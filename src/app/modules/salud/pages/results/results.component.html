 <!-- ============== SECTION PAGETOP ============== -->
 

<!-- <app-hero-section>

  <section class="bg-primary py-5" id="hero">
    <div class="container">
      <div *ngFor="let product of compareProdList()" class="rectangulo"> 
        <span class="close-icon" (click)="toggleCompare(product)" style="position: absolute; top: 5px; right: 5px; font-size: 20px; color: #030303; background-color: #ffffff; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px;">x</span>
        <img [src]="product.images[0].url">
        <br>
        <h3>{{product?.name}}</h3>
      </div>
    </div>
    
    <ng-container *ngIf='compareProdList().length >= 2' class="center-button container">
      <button pButton pRipple type="button" label="Comparalos" class="p-button-raised p-button-danger" (click)="displayDialog = true" style="margin: 0 auto;">Comparalos</button>
    </ng-container>
    
  </section>
  

</app-hero-section> -->


  <!-- ============== SECTION PAGETOP END// ============== -->
  
  <!-- ============== SECTION CONTENT ============== -->
  <section class="container mt-5">
    




 

    <div class="main-content ">


<div class="row ">

<!-- <aside class="col-lg-3 ">
 <app-filters-products  [product]="products" ></app-filters-products>
</aside> -->
<div class="collapse content" *ngIf="!sidebarVisible">
  <app-filters-products [product]="products"  [productosFiltrados]="productosFiltrados"></app-filters-products>
  <!-- Contenido principal aquí -->
</div>
<aside class=" col-lg-3 filters-sidebar">
  <app-filters-products [product]="products"></app-filters-products>
</aside>

<main class="col-lg-9">
<ng-container *ngIf="!(loading$ | async); else loadingTpl">
<header class="d-sm-flex align-items-center border-bottom mb-4 pb-3">

<div class="d-flex flex-wrap justify-content-between surface-card p-2 shadow-2 border-round" style="background-color: whitesmoke; margin: 0 5px 5px 5px; align-items: center;">
<div class="d-flex flex-wrap">
  <p-multiSelect
  class="custom-ms"
  [options]="dropdownClinica"
  display="chip" 
  [filter]="true"
  defaultLabel="Busca por nombre"
  [selectedItemsLabel]="'Selected Clinicas'"
  [(ngModel)]="selectedClinica"
  optionLabel="nombre"
  (onChange)="onItemSelect($event)">
    <!-- Plantilla para elementos seleccionados -->
    <ng-template let-option pTemplate="selectedItems">
      <div class="selected-chips">
        <div *ngFor="let item of selectedClinica" >
          <strong class="p-chip p-highlight">{{ item.nombre }} <i class="pi pi-times-circle" (click)="removeSelection(item)"></i></strong>
          <!-- Icono de cruz (x) -->
        </div>
      </div>
      <div class="no-selected-items" *ngIf="!selectedClinica || selectedClinica.length === 0">Selecciona Clínicas</div>
    </ng-template>

    <!-- Plantilla para elementos en la lista -->
    <ng-template let-option pTemplate="item">
      <div class="item">
        {{ option.entity }}
      </div>
    </ng-template>
  </p-multiSelect>

</div>
<!-- <select class="form-select d-inline-block w-auto me-1">
  <option value="0">Best match</option>
  <option value="1">Recommended</option>
  <option value="2">High rated</option>
  <option value="3">Randomly</option>
</select> -->
<div class="d-flex">
  <select class="form-select d-inline-block w-auto me-1" [formControl]="empresa" (change)="onEmpresaFilter()">
    <option>Empresa</option>
    <option>SanCor Salud</option>
    <option>OMINT</option>
    <option>Galeno</option>
    <option>Avalian</option>
    <option>Swiss Medical</option>
    <option>Premedic</option>
    <option>Medife</option>
  </select>
  <label class="ms-2">Ordenar por</label>

  
  <select class="form-select d-inline-block w-auto me-1" [formControl]="SortbyParamControl" (click)="onSortDirection()">
    <option value="empresa">Empresa</option>
    <option value="precio">Precio</option>
    <option value="name">Nombre</option>
    <option value="rating">Rating</option>
  </select>
  <button type="button" (click)="onSortDirection()">
    <i *ngIf="SortDirection === 'asc'" class="fas fa-sort-alpha-down-alt fa-2x" style="size: 19px;"></i>
    <i *ngIf="SortDirection === 'desc'" class="fas fa-sort-alpha-up-alt  fa-2x"></i>
  </button>
</div>
<div class="btn-group" id="view">
  <button [class.text-primary]="view === 'list'" (click)="view = 'list';"  type="button"  class="btn btn-secondary custom-hidden-button" data-bs-toggle="tooltip" title="List view"> 
    <i class="fa fa-bars"></i>
  </button>
  <button [class.text-primary]="view === 'grid'" (click)="view = 'grid';" type="button"  type="button" class="btn btn-secondary custom-hidden-button" data-bs-toggle="tooltip" title="Grid view"> 
    <i class="fa fa-th"></i>
  </button>
  </div>
</div>



</header>
<!-- ========= content items ========= -->
 <div class="container">
  


</div>



<div class="row justify-content-center ">
<div class="row ">
<div class="d-flex flex-column justify-content-center surface-card p-2 shadow-2 border-round  " style="background-color: rgba(255, 215, 0, 0.6); margin: 0 5px 5px 5px; align-items: center; animation: shake 0.5s ease-in-out;">
  <div class="text-lg font-medium text-600 mb-2"><strong>Paso 1:</strong> Ingresa tu <strong>edad</strong> para calcular precios exactos y obtener los mejores planes</div>
  <button pButton pRipple type="button" label="Completar Perfil" class="p-button-raised p-button-danger" (click)="openModa('custom-modal-3')" style="animation: aura 0.5s ease-in-out;">
   
  </button>
</div>

  
  
    <ng-container *ngIf="isLoaded">
      
        <div *ngFor="let product of productosFiltrados | filter: SearchEmpresa:'empresa'  |  sort: [SortbyParam, SortDirection]" class="items col-lg-4 col-md-6 col-sm-6 ">
         
          <app-product-card *ngIf="view === 'grid'" [product]="product"></app-product-card>
        </div>
      
      

  
      <div class="items" *ngFor="let product of productosFiltrados | filter: SearchEmpresa:'empresa'  |  sort: [SortbyParam, SortDirection]" >
      <app-product-land *ngIf="view === 'list'" [product]="product"></app-product-land>
      <!-- <app-product-land [product]="product"></app-product-land> -->

      </div>  
    
    </ng-container>
    <div class="row p-4 d-flex justify-content-between sticky-bottom bg-primary text-white">
      <div class="col text-start">
        <small class="text-uppercase fw-bold">Seleccione al menos una opción</small>
      </div>
      <div class="col text-end">
        <a role="button" class="fw-bold text-white text-uppercase">Aplicar ></a>
      </div>
    </div>
    <div *ngFor="let product of products"  class="col-lg-4 col-md-6 col-sm-6 ">
      <div class="custom-skeleton p-4" *ngIf="!isLoaded" >
        <div class="flex mb-3">
          <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
          <div>
            <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton width="5rem" styleClass="mb-2"></p-skeleton>
            <p-skeleton height=".5rem"></p-skeleton>
          </div>
        </div>
        <p-skeleton width="100%" height="150px"></p-skeleton>
        <div class="flex justify-content-between mt-3">
          <p-skeleton width="4rem" height="2rem"></p-skeleton>
          <p-skeleton width="4rem" height="2rem"></p-skeleton>
        </div>
      </div>          </div>
  </div>  
 
    <footer class="d-flex mt-4">
            
   
      </footer>

 
 

  </div>
<hr>
  <div >
 
    <!-- <ngx-skeleton-loader *ngIf="!isLoaded" count="9" appearance="circle" [theme]="{'border-radius': '5px',height: '280px',width: 'calc(33% - 10px)'}"></ngx-skeleton-loader> -->
  </div>

  


  </ng-container>
    </main>
    </div> 


</div>



     <!--Spinner-->
<ng-template #loadingTpl>
  <div class="progress">
    <div class="indeterminate"></div>sty
  </div>
</ng-template>

<p-dialog header="Comparador de Planes" [(visible)]="displayDialog" [style]="{ 'width': '100%', 'height': '100%' }">
  <app-compara-item
    [productos]="compareProdList()"
    [clinicasVal]="compareProdClinicas(compareProdList())"
    [items]="compareProdClinicas(compareProdList())"
    ></app-compara-item
  >
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-primary btn-sm mt-2" (click)="onPrint()">
      Imprimir Listado
    </button>
    <button type="button" class="btn btn-outline-primary btn-sm mt-2" (click)="closeDialog()">
      Cerrar
    </button>
  </div>
</p-dialog>

<p-sidebar [(visible)]="sidebarVisible" [style]="{ 'width': anchoSidebar }">
  
    <app-filters-products [product]="products" ></app-filters-products>


</p-sidebar>
<!-- Botón para activar el sidebar en dispositivos móviles -->
<button class="mobile-filters-button p-button p-button-raised" (click)="sidebarVisible = true">
<i class="pi pi-filter"></i> Fiiltros
</button>



        <jw-modal id='custom-modal-3' >
        <body class="theme">  
        <app-form-queplan>   <button type="button" class="btn" (click)="closeModa('custom-modal-3')">Cerrar</button>
         
        </app-form-queplan> </body> 
        </jw-modal>
      