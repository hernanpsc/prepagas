function _typeof(obj) {
    return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}

function _typeof(obj) {
    return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}

function _typeof(obj) {
    return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}! function(window, document, undefined) {
    "use strict";

    function minErr(module) {
        return function() {
            var message, i, obj, code = arguments[0],
                prefix = "[" + (module ? module + ":" : "") + code + "] ",
                template = arguments[1],
                templateArgs = arguments;
            for (message = (message = prefix + template.replace(/\{\d+\}/g, function(match) {
                    var arg, index = +match.slice(1, -1);
                    return index + 2 < templateArgs.length ? "function" == typeof(arg = templateArgs[index + 2]) ? arg.toString().replace(/ ?\{[\s\S]*$/, "") : void 0 === arg ? "undefined" : "string" != typeof arg ? toJson(arg) : arg : match
                })) + "\nhttp://errors.angularjs.org/1.2.22/" + (module ? module + "/" : "") + code, i = 2; i < arguments.length; i++) message = message + (2 == i ? "?" : "&") + "p" + (i - 2) + "=" + encodeURIComponent("function" == typeof(obj = arguments[i]) ? obj.toString().replace(/ \{[\s\S]*$/, "") : void 0 === obj ? "undefined" : "string" != typeof obj ? JSON.stringify(obj) : obj);
            return new Error(message)
        }
    }
    var VALIDITY_STATE_PROPERTY = "validity",
        lowercase = function(string) {
            return isString(string) ? string.toLowerCase() : string
        },
        hasOwnProperty = Object.prototype.hasOwnProperty,
        uppercase = function(string) {
            return isString(string) ? string.toUpperCase() : string
        };
    "i" !== "I".toLowerCase() && (lowercase = function(s) {
        return isString(s) ? s.replace(/[A-Z]/g, function(ch) {
            return String.fromCharCode(32 | ch.charCodeAt(0))
        }) : s
    }, uppercase = function(s) {
        return isString(s) ? s.replace(/[a-z]/g, function(ch) {
            return String.fromCharCode(-33 & ch.charCodeAt(0))
        }) : s
    });
    var msie, jqLite, jQuery, angularModule, nodeName_, slice = [].slice,
        push = [].push,
        toString = Object.prototype.toString,
        ngMinErr = minErr("ng"),
        angular = window.angular || (window.angular = {}),
        uid = ["0", "0", "0"];

    function isArrayLike(obj) {
        if (null == obj || isWindow(obj)) return !1;
        var length = obj.length;
        return !(1 !== obj.nodeType || !length) || (isString(obj) || isArray(obj) || 0 === length || "number" == typeof length && 0 < length && length - 1 in obj)
    }

    function forEach(obj, iterator, context) {
        var key;
        if (obj)
            if (isFunction(obj))
                for (key in obj) "prototype" == key || "length" == key || "name" == key || obj.hasOwnProperty && !obj.hasOwnProperty(key) || iterator.call(context, obj[key], key);
            else if (isArray(obj) || isArrayLike(obj))
            for (key = 0; key < obj.length; key++) iterator.call(context, obj[key], key);
        else if (obj.forEach && obj.forEach !== forEach) obj.forEach(iterator, context);
        else
            for (key in obj) obj.hasOwnProperty(key) && iterator.call(context, obj[key], key);
        return obj
    }

    function sortedKeys(obj) {
        var keys = [];
        for (var key in obj) obj.hasOwnProperty(key) && keys.push(key);
        return keys.sort()
    }

    function reverseParams(iteratorFn) {
        return function(value, key) {
            iteratorFn(key, value)
        }
    }

    function nextUid() {
        for (var digit, index = uid.length; index;) {
            if (57 == (digit = uid[--index].charCodeAt(0))) return uid[index] = "A", uid.join("");
            if (90 != digit) return uid[index] = String.fromCharCode(digit + 1), uid.join("");
            uid[index] = "0"
        }
        return uid.unshift("0"), uid.join("")
    }

    function setHashKey(obj, h) {
        h ? obj.$$hashKey = h : delete obj.$$hashKey
    }

    function extend(dst) {
        var h = dst.$$hashKey;
        return forEach(arguments, function(obj) {
            obj !== dst && forEach(obj, function(value, key) {
                dst[key] = value
            })
        }), setHashKey(dst, h), dst
    }

    function int(str) {
        return parseInt(str, 10)
    }

    function inherit(parent, extra) {
        return extend(new(extend(function() {}, {
            prototype: parent
        })), extra)
    }

    function noop() {}

    function identity($) {
        return $
    }

    function valueFn(value) {
        return function() {
            return value
        }
    }

    function isUndefined(value) {
        return void 0 === value
    }

    function isDefined(value) {
        return void 0 !== value
    }

    function isObject(value) {
        return null != value && "object" === _typeof(value)
    }

    function isString(value) {
        return "string" == typeof value
    }

    function isNumber(value) {
        return "number" == typeof value
    }

    function isDate(value) {
        return "[object Date]" === toString.call(value)
    }
    msie = int((/msie (\d+)/.exec(lowercase(navigator.userAgent)) || [])[1]), isNaN(msie) && (msie = int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent)) || [])[1])), noop.$inject = [], identity.$inject = [];
    var isArray = isFunction(Array.isArray) ? Array.isArray : function(value) {
        return "[object Array]" === toString.call(value)
    };

    function isFunction(value) {
        return "function" == typeof value
    }

    function isRegExp(value) {
        return "[object RegExp]" === toString.call(value)
    }

    function isWindow(obj) {
        return obj && obj.document && obj.location && obj.alert && obj.setInterval
    }

    function isScope(obj) {
        return obj && obj.$evalAsync && obj.$watch
    }

    function isPromiseLike(obj) {
        return obj && isFunction(obj.then)
    }
    var trim = String.prototype.trim ? function(value) {
        return isString(value) ? value.trim() : value
    } : function(value) {
        return isString(value) ? value.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : value
    };

    function isElement(node) {
        return !(!node || !(node.nodeName || node.prop && node.attr && node.find))
    }

    function indexOf(array, obj) {
        if (array.indexOf) return array.indexOf(obj);
        for (var i = 0; i < array.length; i++)
            if (obj === array[i]) return i;
        return -1
    }

    function arrayRemove(array, value) {
        var index = indexOf(array, value);
        return 0 <= index && array.splice(index, 1), value
    }

    function copy(source, destination, stackSource, stackDest) {
        if (isWindow(source) || isScope(source)) throw ngMinErr("cpws", "Can't copy! Making copies of Window or Scope instances is not supported.");
        if (destination) {
            if (source === destination) throw ngMinErr("cpi", "Can't copy! Source and destination are identical.");
            if (stackSource = stackSource || [], stackDest = stackDest || [], isObject(source)) {
                var index = indexOf(stackSource, source);
                if (-1 !== index) return stackDest[index];
                stackSource.push(source), stackDest.push(destination)
            }
            var result;
            if (isArray(source))
                for (var i = destination.length = 0; i < source.length; i++) result = copy(source[i], null, stackSource, stackDest), isObject(source[i]) && (stackSource.push(source[i]), stackDest.push(result)), destination.push(result);
            else {
                var h = destination.$$hashKey;
                for (var key in forEach(destination, function(value, key) {
                        delete destination[key]
                    }), source) result = copy(source[key], null, stackSource, stackDest), isObject(source[key]) && (stackSource.push(source[key]), stackDest.push(result)), destination[key] = result;
                setHashKey(destination, h)
            }
        } else(destination = source) && (isArray(source) ? destination = copy(source, [], stackSource, stackDest) : isDate(source) ? destination = new Date(source.getTime()) : isRegExp(source) ? (destination = new RegExp(source.source, source.toString().match(/[^\/]*$/)[0])).lastIndex = source.lastIndex : isObject(source) && (destination = copy(source, {}, stackSource, stackDest)));
        return destination
    }

    function shallowCopy(src, dst) {
        if (isArray(src)) {
            dst = dst || [];
            for (var i = 0; i < src.length; i++) dst[i] = src[i]
        } else if (isObject(src))
            for (var key in dst = dst || {}, src) !hasOwnProperty.call(src, key) || "$" === key.charAt(0) && "$" === key.charAt(1) || (dst[key] = src[key]);
        return dst || src
    }

    function equals(o1, o2) {
        if (o1 === o2) return !0;
        if (null === o1 || null === o2) return !1;
        if (o1 != o1 && o2 != o2) return !0;
        var length, key, keySet, t1 = _typeof(o1);
        if (t1 == _typeof(o2) && "object" == t1) {
            if (!isArray(o1)) {
                if (isDate(o1)) return isDate(o2) && o1.getTime() == o2.getTime();
                if (isRegExp(o1) && isRegExp(o2)) return o1.toString() == o2.toString();
                if (isScope(o1) || isScope(o2) || isWindow(o1) || isWindow(o2) || isArray(o2)) return !1;
                for (key in keySet = {}, o1)
                    if ("$" !== key.charAt(0) && !isFunction(o1[key])) {
                        if (!equals(o1[key], o2[key])) return !1;
                        keySet[key] = !0
                    } for (key in o2)
                    if (!keySet.hasOwnProperty(key) && "$" !== key.charAt(0) && o2[key] !== undefined && !isFunction(o2[key])) return !1;
                return !0
            }
            if (!isArray(o2)) return !1;
            if ((length = o1.length) == o2.length) {
                for (key = 0; key < length; key++)
                    if (!equals(o1[key], o2[key])) return !1;
                return !0
            }
        }
        return !1
    }
    nodeName_ = msie < 9 ? function(element) {
        return (element = element.nodeName ? element : element[0]).scopeName && "HTML" != element.scopeName ? uppercase(element.scopeName + ":" + element.nodeName) : element.nodeName
    } : function(element) {
        return element.nodeName ? element.nodeName : element[0].nodeName
    };
    var csp = function csp() {
        if (isDefined(csp.isActive_)) return csp.isActive_;
        var active = !(!document.querySelector("[ng-csp]") && !document.querySelector("[data-ng-csp]"));
        if (!active) try {
            new Function("")
        } catch (e) {
            active = !0
        }
        return csp.isActive_ = active
    };

    function concat(array1, array2, index) {
        return array1.concat(slice.call(array2, index))
    }

    function sliceArgs(args, startIndex) {
        return slice.call(args, startIndex || 0)
    }

    function bind(self, fn) {
        var curryArgs = 2 < arguments.length ? sliceArgs(arguments, 2) : [];
        return !isFunction(fn) || fn instanceof RegExp ? fn : curryArgs.length ? function() {
            return arguments.length ? fn.apply(self, curryArgs.concat(slice.call(arguments, 0))) : fn.apply(self, curryArgs)
        } : function() {
            return arguments.length ? fn.apply(self, arguments) : fn.call(self)
        }
    }

    function toJsonReplacer(key, value) {
        var val = value;
        return "string" == typeof key && "$" === key.charAt(0) ? val = undefined : isWindow(value) ? val = "$WINDOW" : value && document === value ? val = "$DOCUMENT" : isScope(value) && (val = "$SCOPE"), val
    }

    function toJson(obj, pretty) {
        return void 0 === obj ? undefined : JSON.stringify(obj, toJsonReplacer, pretty ? "  " : null)
    }

    function fromJson(json) {
        return isString(json) ? JSON.parse(json) : json
    }

    function toBoolean(value) {
        if ("function" == typeof value) value = !0;
        else if (value && 0 !== value.length) {
            var v = lowercase("" + value);
            value = !("f" == v || "0" == v || "false" == v || "no" == v || "n" == v || "[]" == v)
        } else value = !1;
        return value
    }

    function startingTag(element) {
        element = jqLite(element).clone();
        try {
            element.empty()
        } catch (e) {}
        var elemHtml = jqLite("<div>").append(element).html();
        try {
            return 3 === element[0].nodeType ? lowercase(elemHtml) : elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(match, nodeName) {
                return "<" + lowercase(nodeName)
            })
        } catch (e) {
            return lowercase(elemHtml)
        }
    }

    function tryDecodeURIComponent(value) {
        try {
            return decodeURIComponent(value)
        } catch (e) {}
    }

    function parseKeyValue(keyValue) {
        var key_value, key, obj = {};
        return forEach((keyValue || "").split("&"), function(keyValue) {
            if (keyValue && (key_value = keyValue.replace(/\+/g, "%20").split("="), isDefined(key = tryDecodeURIComponent(key_value[0])))) {
                var val = !isDefined(key_value[1]) || tryDecodeURIComponent(key_value[1]);
                hasOwnProperty.call(obj, key) ? isArray(obj[key]) ? obj[key].push(val) : obj[key] = [obj[key], val] : obj[key] = val
            }
        }), obj
    }

    function toKeyValue(obj) {
        var parts = [];
        return forEach(obj, function(value, key) {
            isArray(value) ? forEach(value, function(arrayValue) {
                parts.push(encodeUriQuery(key, !0) + (!0 === arrayValue ? "" : "=" + encodeUriQuery(arrayValue, !0)))
            }) : parts.push(encodeUriQuery(key, !0) + (!0 === value ? "" : "=" + encodeUriQuery(value, !0)))
        }), parts.length ? parts.join("&") : ""
    }

    function encodeUriSegment(val) {
        return encodeUriQuery(val, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
    }

    function encodeUriQuery(val, pctEncodeSpaces) {
        return encodeURIComponent(val).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, pctEncodeSpaces ? "%20" : "+")
    }

    function bootstrap(element, modules) {
        var doBootstrap = function() {
                if ((element = jqLite(element)).injector()) {
                    var tag = element[0] === document ? "document" : startingTag(element);
                    throw ngMinErr("btstrpd", "App Already Bootstrapped with this Element '{0}'", tag)
                }(modules = modules || []).unshift(["$provide", function($provide) {
                    $provide.value("$rootElement", element)
                }]), modules.unshift("ng");
                var injector = createInjector(modules);
                return injector.invoke(["$rootScope", "$rootElement", "$compile", "$injector", "$animate", function(scope, element, compile, injector, animate) {
                    scope.$apply(function() {
                        element.data("$injector", injector), compile(element)(scope)
                    })
                }]), injector
            },
            NG_DEFER_BOOTSTRAP = /^NG_DEFER_BOOTSTRAP!/;
        if (window && !NG_DEFER_BOOTSTRAP.test(window.name)) return doBootstrap();
        window.name = window.name.replace(NG_DEFER_BOOTSTRAP, ""), angular.resumeBootstrap = function(extraModules) {
            forEach(extraModules, function(module) {
                modules.push(module)
            }), doBootstrap()
        }
    }
    var SNAKE_CASE_REGEXP = /[A-Z]/g;

    function snake_case(name, separator) {
        return separator = separator || "_", name.replace(SNAKE_CASE_REGEXP, function(letter, pos) {
            return (pos ? separator : "") + letter.toLowerCase()
        })
    }

    function assertArg(arg, name, reason) {
        if (!arg) throw ngMinErr("areq", "Argument '{0}' is {1}", name || "?", reason || "required");
        return arg
    }

    function assertArgFn(arg, name, acceptArrayAnnotation) {
        return acceptArrayAnnotation && isArray(arg) && (arg = arg[arg.length - 1]), assertArg(isFunction(arg), name, "not a function, got " + (arg && "object" === _typeof(arg) ? arg.constructor.name || "Object" : _typeof(arg))), arg
    }

    function assertNotHasOwnProperty(name, context) {
        if ("hasOwnProperty" === name) throw ngMinErr("badname", "hasOwnProperty is not a valid {0} name", context)
    }

    function getter(obj, path, bindFnToScope) {
        if (!path) return obj;
        for (var key, keys = path.split("."), lastInstance = obj, len = keys.length, i = 0; i < len; i++) key = keys[i], obj && (obj = (lastInstance = obj)[key]);
        return !bindFnToScope && isFunction(obj) ? bind(lastInstance, obj) : obj
    }

    function getBlockElements(nodes) {
        var startNode = nodes[0],
            endNode = nodes[nodes.length - 1];
        if (startNode === endNode) return jqLite(startNode);
        var element = startNode,
            elements = [element];
        do {
            if (!(element = element.nextSibling)) break;
            elements.push(element)
        } while (element !== endNode);
        return jqLite(elements)
    }
    var version = {
        full: "1.2.22",
        major: 1,
        minor: 2,
        dot: 22,
        codeName: "finicky-pleasure"
    };
    JQLite.expando = "ng339";
    var jqCache = JQLite.cache = {},
        jqId = 1,
        addEventListenerFn = window.document.addEventListener ? function(element, type, fn) {
            element.addEventListener(type, fn, !1)
        } : function(element, type, fn) {
            element.attachEvent("on" + type, fn)
        },
        removeEventListenerFn = window.document.removeEventListener ? function(element, type, fn) {
            element.removeEventListener(type, fn, !1)
        } : function(element, type, fn) {
            element.detachEvent("on" + type, fn)
        };
    JQLite._data = function(node) {
        return this.cache[node[this.expando]] || {}
    };
    var SPECIAL_CHARS_REGEXP = /([\:\-\_]+(.))/g,
        MOZ_HACK_REGEXP = /^moz([A-Z])/,
        jqLiteMinErr = minErr("jqLite");

    function camelCase(name) {
        return name.replace(SPECIAL_CHARS_REGEXP, function(_, separator, letter, offset) {
            return offset ? letter.toUpperCase() : letter
        }).replace(MOZ_HACK_REGEXP, "Moz$1")
    }

    function jqLitePatchJQueryRemove(name, dispatchThis, filterElems, getterIfNoArguments) {
        var originalJqFn = jQuery.fn[name];

        function removePatch(param) {
            var set, setIndex, setLength, element, childIndex, childLength, children, list = filterElems && param ? [this.filter(param)] : [this],
                fireEvent = dispatchThis;
            if (!getterIfNoArguments || null != param)
                for (; list.length;)
                    for (setIndex = 0, setLength = (set = list.shift()).length; setIndex < setLength; setIndex++)
                        for (element = jqLite(set[setIndex]), fireEvent ? element.triggerHandler("$destroy") : fireEvent = !fireEvent, childIndex = 0, childLength = (children = element.children()).length; childIndex < childLength; childIndex++) list.push(jQuery(children[childIndex]));
            return originalJqFn.apply(this, arguments)
        }
        originalJqFn = originalJqFn.$original || originalJqFn, removePatch.$original = originalJqFn, jQuery.fn[name] = removePatch
    }
    var SINGLE_TAG_REGEXP = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        HTML_REGEXP = /<|&#?\w+;/,
        TAG_NAME_REGEXP = /<([\w:]+)/,
        XHTML_TAG_REGEXP = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        wrapMap = {
            option: [1, '<select multiple="multiple">', "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };

    function jqLiteIsTextNode(html) {
        return !HTML_REGEXP.test(html)
    }

    function jqLiteParseHTML(html, context) {
        var parsed;
        return context = context || document, (parsed = SINGLE_TAG_REGEXP.exec(html)) ? [context.createElement(parsed[1])] : function(html, context) {
            var tmp, tag, wrap, i, j, jj, fragment = context.createDocumentFragment(),
                nodes = [];
            if (jqLiteIsTextNode(html)) nodes.push(context.createTextNode(html));
            else {
                for (tmp = fragment.appendChild(context.createElement("div")), tag = (TAG_NAME_REGEXP.exec(html) || ["", ""])[1].toLowerCase(), wrap = wrapMap[tag] || wrapMap._default, tmp.innerHTML = "<div>&#160;</div>" + wrap[1] + html.replace(XHTML_TAG_REGEXP, "<$1></$2>") + wrap[2], tmp.removeChild(tmp.firstChild), i = wrap[0]; i--;) tmp = tmp.lastChild;
                for (j = 0, jj = tmp.childNodes.length; j < jj; ++j) nodes.push(tmp.childNodes[j]);
                (tmp = fragment.firstChild).textContent = ""
            }
            return fragment.textContent = "", fragment.innerHTML = "", nodes
        }(html, context)
    }

    function JQLite(element) {
        if (element instanceof JQLite) return element;
        if (isString(element) && (element = trim(element)), !(this instanceof JQLite)) {
            if (isString(element) && "<" != element.charAt(0)) throw jqLiteMinErr("nosel", "Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
            return new JQLite(element)
        }
        isString(element) ? (jqLiteAddNodes(this, jqLiteParseHTML(element)), jqLite(document.createDocumentFragment()).append(this)) : jqLiteAddNodes(this, element)
    }

    function jqLiteClone(element) {
        return element.cloneNode(!0)
    }

    function jqLiteDealoc(element) {
        jqLiteRemoveData(element);
        for (var i = 0, children = element.childNodes || []; i < children.length; i++) jqLiteDealoc(children[i])
    }

    function jqLiteOff(element, type, fn, unsupported) {
        if (isDefined(unsupported)) throw jqLiteMinErr("offargs", "jqLite#off() does not support the `selector` argument");
        var events = jqLiteExpandoStore(element, "events");
        jqLiteExpandoStore(element, "handle") && (isUndefined(type) ? forEach(events, function(eventHandler, type) {
            removeEventListenerFn(element, type, eventHandler), delete events[type]
        }) : forEach(type.split(" "), function(type) {
            isUndefined(fn) ? (removeEventListenerFn(element, type, events[type]), delete events[type]) : arrayRemove(events[type] || [], fn)
        }))
    }

    function jqLiteRemoveData(element, name) {
        var expandoId = element.ng339,
            expandoStore = jqCache[expandoId];
        if (expandoStore) {
            if (name) return void delete jqCache[expandoId].data[name];
            expandoStore.handle && (expandoStore.events.$destroy && expandoStore.handle({}, "$destroy"), jqLiteOff(element)), delete jqCache[expandoId], element.ng339 = undefined
        }
    }

    function jqLiteExpandoStore(element, key, value) {
        var expandoId = element.ng339,
            expandoStore = jqCache[expandoId || -1];
        if (!isDefined(value)) return expandoStore && expandoStore[key];
        expandoStore || (element.ng339 = expandoId = ++jqId, expandoStore = jqCache[expandoId] = {}), expandoStore[key] = value
    }

    function jqLiteData(element, key, value) {
        var data = jqLiteExpandoStore(element, "data"),
            isSetter = isDefined(value),
            keyDefined = !isSetter && isDefined(key),
            isSimpleGetter = keyDefined && !isObject(key);
        if (data || isSimpleGetter || jqLiteExpandoStore(element, "data", data = {}), isSetter) data[key] = value;
        else {
            if (!keyDefined) return data;
            if (isSimpleGetter) return data && data[key];
            extend(data, key)
        }
    }

    function jqLiteHasClass(element, selector) {
        return !!element.getAttribute && -1 < (" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + selector + " ")
    }

    function jqLiteRemoveClass(element, cssClasses) {
        cssClasses && element.setAttribute && forEach(cssClasses.split(" "), function(cssClass) {
            element.setAttribute("class", trim((" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + trim(cssClass) + " ", " ")))
        })
    }

    function jqLiteAddClass(element, cssClasses) {
        if (cssClasses && element.setAttribute) {
            var existingClasses = (" " + (element.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            forEach(cssClasses.split(" "), function(cssClass) {
                cssClass = trim(cssClass), -1 === existingClasses.indexOf(" " + cssClass + " ") && (existingClasses += cssClass + " ")
            }), element.setAttribute("class", trim(existingClasses))
        }
    }

    function jqLiteAddNodes(root, elements) {
        if (elements) {
            elements = elements.nodeName || !isDefined(elements.length) || isWindow(elements) ? [elements] : elements;
            for (var i = 0; i < elements.length; i++) root.push(elements[i])
        }
    }

    function jqLiteController(element, name) {
        return jqLiteInheritedData(element, "$" + (name || "ngController") + "Controller")
    }

    function jqLiteInheritedData(element, name, value) {
        9 == element.nodeType && (element = element.documentElement);
        for (var names = isArray(name) ? name : [name]; element;) {
            for (var i = 0, ii = names.length; i < ii; i++)
                if ((value = jqLite.data(element, names[i])) !== undefined) return value;
            element = element.parentNode || 11 === element.nodeType && element.host
        }
    }

    function jqLiteEmpty(element) {
        for (var i = 0, childNodes = element.childNodes; i < childNodes.length; i++) jqLiteDealoc(childNodes[i]);
        for (; element.firstChild;) element.removeChild(element.firstChild)
    }
    wrapMap.optgroup = wrapMap.option, wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead, wrapMap.th = wrapMap.td;
    var JQLitePrototype = JQLite.prototype = {
            ready: function(fn) {
                var fired = !1;

                function trigger() {
                    fired || (fired = !0, fn())
                }
                "complete" === document.readyState ? setTimeout(trigger) : (this.on("DOMContentLoaded", trigger), JQLite(window).on("load", trigger))
            },
            toString: function() {
                var value = [];
                return forEach(this, function(e) {
                    value.push("" + e)
                }), "[" + value.join(", ") + "]"
            },
            eq: function(index) {
                return jqLite(0 <= index ? this[index] : this[this.length + index])
            },
            length: 0,
            push: push,
            sort: [].sort,
            splice: [].splice
        },
        BOOLEAN_ATTR = {};
    forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","), function(value) {
        BOOLEAN_ATTR[lowercase(value)] = value
    });
    var BOOLEAN_ELEMENTS = {};

    function getBooleanAttrName(element, name) {
        var booleanAttr = BOOLEAN_ATTR[name.toLowerCase()];
        return booleanAttr && BOOLEAN_ELEMENTS[element.nodeName] && booleanAttr
    }

    function hashKey(obj, nextUidFn) {
        var key, objType = _typeof(obj);
        return "function" == objType || "object" == objType && null !== obj ? "function" == typeof(key = obj.$$hashKey) ? key = obj.$$hashKey() : key === undefined && (key = obj.$$hashKey = (nextUidFn || nextUid)()) : key = obj, objType + ":" + key
    }

    function HashMap(array, isolatedUid) {
        if (isolatedUid) {
            var uid = 0;
            this.nextUid = function() {
                return ++uid
            }
        }
        forEach(array, this.put, this)
    }
    forEach("input,select,option,textarea,button,form,details".split(","), function(value) {
        BOOLEAN_ELEMENTS[uppercase(value)] = !0
    }), forEach({
        data: jqLiteData,
        removeData: jqLiteRemoveData
    }, function(fn, name) {
        JQLite[name] = fn
    }), forEach({
        data: jqLiteData,
        inheritedData: jqLiteInheritedData,
        scope: function(element) {
            return jqLite.data(element, "$scope") || jqLiteInheritedData(element.parentNode || element, ["$isolateScope", "$scope"])
        },
        isolateScope: function(element) {
            return jqLite.data(element, "$isolateScope") || jqLite.data(element, "$isolateScopeNoTemplate")
        },
        controller: jqLiteController,
        injector: function(element) {
            return jqLiteInheritedData(element, "$injector")
        },
        removeAttr: function(element, name) {
            element.removeAttribute(name)
        },
        hasClass: jqLiteHasClass,
        css: function(element, name, value) {
            var val;
            if (name = camelCase(name), !isDefined(value)) return msie <= 8 && "" === (val = element.currentStyle && element.currentStyle[name]) && (val = "auto"), val = val || element.style[name], msie <= 8 && (val = "" === val ? undefined : val), val;
            element.style[name] = value
        },
        attr: function(element, name, value) {
            var lowercasedName = lowercase(name);
            if (BOOLEAN_ATTR[lowercasedName]) {
                if (!isDefined(value)) return element[name] || (element.attributes.getNamedItem(name) || noop).specified ? lowercasedName : undefined;
                value ? (element[name] = !0, element.setAttribute(name, lowercasedName)) : (element[name] = !1, element.removeAttribute(lowercasedName))
            } else if (isDefined(value)) element.setAttribute(name, value);
            else if (element.getAttribute) {
                var ret = element.getAttribute(name, 2);
                return null === ret ? undefined : ret
            }
        },
        prop: function(element, name, value) {
            if (!isDefined(value)) return element[name];
            element[name] = value
        },
        text: function() {
            var NODE_TYPE_TEXT_PROPERTY = [];
            return msie < 9 ? (NODE_TYPE_TEXT_PROPERTY[1] = "innerText", NODE_TYPE_TEXT_PROPERTY[3] = "nodeValue") : NODE_TYPE_TEXT_PROPERTY[1] = NODE_TYPE_TEXT_PROPERTY[3] = "textContent", getText.$dv = "", getText;

            function getText(element, value) {
                var textProp = NODE_TYPE_TEXT_PROPERTY[element.nodeType];
                if (isUndefined(value)) return textProp ? element[textProp] : "";
                element[textProp] = value
            }
        }(),
        val: function(element, value) {
            if (isUndefined(value)) {
                if ("SELECT" === nodeName_(element) && element.multiple) {
                    var result = [];
                    return forEach(element.options, function(option) {
                        option.selected && result.push(option.value || option.text)
                    }), 0 === result.length ? null : result
                }
                return element.value
            }
            element.value = value
        },
        html: function(element, value) {
            if (isUndefined(value)) return element.innerHTML;
            for (var i = 0, childNodes = element.childNodes; i < childNodes.length; i++) jqLiteDealoc(childNodes[i]);
            element.innerHTML = value
        },
        empty: jqLiteEmpty
    }, function(fn, name) {
        JQLite.prototype[name] = function(arg1, arg2) {
            var i, key, nodeCount = this.length;
            if (fn !== jqLiteEmpty && (2 == fn.length && fn !== jqLiteHasClass && fn !== jqLiteController ? arg1 : arg2) === undefined) {
                if (isObject(arg1)) {
                    for (i = 0; i < nodeCount; i++)
                        if (fn === jqLiteData) fn(this[i], arg1);
                        else
                            for (key in arg1) fn(this[i], key, arg1[key]);
                    return this
                }
                for (var value = fn.$dv, jj = value === undefined ? Math.min(nodeCount, 1) : nodeCount, j = 0; j < jj; j++) {
                    var nodeValue = fn(this[j], arg1, arg2);
                    value = value ? value + nodeValue : nodeValue
                }
                return value
            }
            for (i = 0; i < nodeCount; i++) fn(this[i], arg1, arg2);
            return this
        }
    }), forEach({
        removeData: jqLiteRemoveData,
        dealoc: jqLiteDealoc,
        on: function onFn(element, type, fn, unsupported) {
            if (isDefined(unsupported)) throw jqLiteMinErr("onargs", "jqLite#on() does not support the `selector` or `eventData` parameters");
            var events = jqLiteExpandoStore(element, "events"),
                handle = jqLiteExpandoStore(element, "handle");
            events || jqLiteExpandoStore(element, "events", events = {}), handle || jqLiteExpandoStore(element, "handle", handle = function(element, events) {
                var eventHandler = function(event, type) {
                    if (event.preventDefault || (event.preventDefault = function() {
                            event.returnValue = !1
                        }), event.stopPropagation || (event.stopPropagation = function() {
                            event.cancelBubble = !0
                        }), event.target || (event.target = event.srcElement || document), isUndefined(event.defaultPrevented)) {
                        var prevent = event.preventDefault;
                        event.preventDefault = function() {
                            event.defaultPrevented = !0, prevent.call(event)
                        }, event.defaultPrevented = !1
                    }
                    event.isDefaultPrevented = function() {
                        return event.defaultPrevented || !1 === event.returnValue
                    }, forEach(shallowCopy(events[type || event.type] || []), function(fn) {
                        fn.call(element, event)
                    }), msie <= 8 ? (event.preventDefault = null, event.stopPropagation = null, event.isDefaultPrevented = null) : (delete event.preventDefault, delete event.stopPropagation, delete event.isDefaultPrevented)
                };
                return eventHandler.elem = element, eventHandler
            }(element, events)), forEach(type.split(" "), function(type) {
                var eventFns = events[type];
                if (!eventFns) {
                    if ("mouseenter" == type || "mouseleave" == type) {
                        var contains = document.body.contains || document.body.compareDocumentPosition ? function(a, b) {
                            var adown = 9 === a.nodeType ? a.documentElement : a,
                                bup = b && b.parentNode;
                            return a === bup || !(!bup || 1 !== bup.nodeType || !(adown.contains ? adown.contains(bup) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(bup)))
                        } : function(a, b) {
                            if (b)
                                for (; b = b.parentNode;)
                                    if (b === a) return !0;
                            return !1
                        };
                        events[type] = [];
                        onFn(element, {
                            mouseleave: "mouseout",
                            mouseenter: "mouseover"
                        } [type], function(event) {
                            var related = event.relatedTarget;
                            related && (related === this || contains(this, related)) || handle(event, type)
                        })
                    } else addEventListenerFn(element, type, handle), events[type] = [];
                    eventFns = events[type]
                }
                eventFns.push(fn)
            })
        },
        off: jqLiteOff,
        one: function(element, type, fn) {
            (element = jqLite(element)).on(type, function onFn() {
                element.off(type, fn), element.off(type, onFn)
            }), element.on(type, fn)
        },
        replaceWith: function(element, replaceNode) {
            var index, parent = element.parentNode;
            jqLiteDealoc(element), forEach(new JQLite(replaceNode), function(node) {
                index ? parent.insertBefore(node, index.nextSibling) : parent.replaceChild(node, element), index = node
            })
        },
        children: function(element) {
            var children = [];
            return forEach(element.childNodes, function(element) {
                1 === element.nodeType && children.push(element)
            }), children
        },
        contents: function(element) {
            return element.contentDocument || element.childNodes || []
        },
        append: function(element, node) {
            forEach(new JQLite(node), function(child) {
                1 !== element.nodeType && 11 !== element.nodeType || element.appendChild(child)
            })
        },
        prepend: function(element, node) {
            if (1 === element.nodeType) {
                var index = element.firstChild;
                forEach(new JQLite(node), function(child) {
                    element.insertBefore(child, index)
                })
            }
        },
        wrap: function(element, wrapNode) {
            wrapNode = jqLite(wrapNode)[0];
            var parent = element.parentNode;
            parent && parent.replaceChild(wrapNode, element), wrapNode.appendChild(element)
        },
        remove: function(element) {
            jqLiteDealoc(element);
            var parent = element.parentNode;
            parent && parent.removeChild(element)
        },
        after: function(element, newElement) {
            var index = element,
                parent = element.parentNode;
            forEach(new JQLite(newElement), function(node) {
                parent.insertBefore(node, index.nextSibling), index = node
            })
        },
        addClass: jqLiteAddClass,
        removeClass: jqLiteRemoveClass,
        toggleClass: function(element, selector, condition) {
            selector && forEach(selector.split(" "), function(className) {
                var classCondition = condition;
                isUndefined(classCondition) && (classCondition = !jqLiteHasClass(element, className)), (classCondition ? jqLiteAddClass : jqLiteRemoveClass)(element, className)
            })
        },
        parent: function(element) {
            var parent = element.parentNode;
            return parent && 11 !== parent.nodeType ? parent : null
        },
        next: function(element) {
            if (element.nextElementSibling) return element.nextElementSibling;
            for (var elm = element.nextSibling; null != elm && 1 !== elm.nodeType;) elm = elm.nextSibling;
            return elm
        },
        find: function(element, selector) {
            return element.getElementsByTagName ? element.getElementsByTagName(selector) : []
        },
        clone: jqLiteClone,
        triggerHandler: function(element, event, extraParameters) {
            var dummyEvent, eventFnsCopy, handlerArgs, eventName = event.type || event,
                eventFns = (jqLiteExpandoStore(element, "events") || {})[eventName];
            eventFns && (dummyEvent = {
                preventDefault: function() {
                    this.defaultPrevented = !0
                },
                isDefaultPrevented: function() {
                    return !0 === this.defaultPrevented
                },
                stopPropagation: noop,
                type: eventName,
                target: element
            }, event.type && (dummyEvent = extend(dummyEvent, event)), eventFnsCopy = shallowCopy(eventFns), handlerArgs = extraParameters ? [dummyEvent].concat(extraParameters) : [dummyEvent], forEach(eventFnsCopy, function(fn) {
                fn.apply(element, handlerArgs)
            }))
        }
    }, function(fn, name) {
        JQLite.prototype[name] = function(arg1, arg2, arg3) {
            for (var value, i = 0; i < this.length; i++) isUndefined(value) ? isDefined(value = fn(this[i], arg1, arg2, arg3)) && (value = jqLite(value)) : jqLiteAddNodes(value, fn(this[i], arg1, arg2, arg3));
            return isDefined(value) ? value : this
        }, JQLite.prototype.bind = JQLite.prototype.on, JQLite.prototype.unbind = JQLite.prototype.off
    }), HashMap.prototype = {
        put: function(key, value) {
            this[hashKey(key, this.nextUid)] = value
        },
        get: function(key) {
            return this[hashKey(key, this.nextUid)]
        },
        remove: function(key) {
            var value = this[key = hashKey(key, this.nextUid)];
            return delete this[key], value
        }
    };
    var FN_ARGS = /^function\s*[^\(]*\(\s*([^\)]*)\)/m,
        FN_ARG_SPLIT = /,/,
        FN_ARG = /^\s*(_?)(\S+?)\1\s*$/,
        STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,
        $injectorMinErr = minErr("$injector");

    function annotate(fn) {
        var $inject, last;
        return "function" == typeof fn ? ($inject = fn.$inject) || ($inject = [], fn.length && forEach(fn.toString().replace(STRIP_COMMENTS, "").match(FN_ARGS)[1].split(FN_ARG_SPLIT), function(arg) {
            arg.replace(FN_ARG, function(all, underscore, name) {
                $inject.push(name)
            })
        }), fn.$inject = $inject) : isArray(fn) ? (assertArgFn(fn[last = fn.length - 1], "fn"), $inject = fn.slice(0, last)) : assertArgFn(fn, "fn", !0), $inject
    }

    function createInjector(modulesToLoad) {
        var INSTANTIATING = {},
            providerSuffix = "Provider",
            path = [],
            loadedModules = new HashMap([], !0),
            providerCache = {
                $provide: {
                    provider: supportObject(provider),
                    factory: supportObject(factory),
                    service: supportObject(function(name, constructor) {
                        return factory(name, ["$injector", function($injector) {
                            return $injector.instantiate(constructor)
                        }])
                    }),
                    value: supportObject(function(name, val) {
                        return factory(name, valueFn(val))
                    }),
                    constant: supportObject(function(name, value) {
                        assertNotHasOwnProperty(name, "constant"), providerCache[name] = value, instanceCache[name] = value
                    }),
                    decorator: function(serviceName, decorFn) {
                        var origProvider = providerInjector.get(serviceName + providerSuffix),
                            orig$get = origProvider.$get;
                        origProvider.$get = function() {
                            var origInstance = instanceInjector.invoke(orig$get, origProvider);
                            return instanceInjector.invoke(decorFn, null, {
                                $delegate: origInstance
                            })
                        }
                    }
                }
            },
            providerInjector = providerCache.$injector = createInternalInjector(providerCache, function() {
                throw $injectorMinErr("unpr", "Unknown provider: {0}", path.join(" <- "))
            }),
            instanceCache = {},
            instanceInjector = instanceCache.$injector = createInternalInjector(instanceCache, function(servicename) {
                var provider = providerInjector.get(servicename + providerSuffix);
                return instanceInjector.invoke(provider.$get, provider)
            });
        return forEach(function loadModules(modulesToLoad) {
            var moduleFn, invokeQueue, i, ii, runBlocks = [];
            forEach(modulesToLoad, function(module) {
                if (!loadedModules.get(module)) {
                    loadedModules.put(module, !0);
                    try {
                        if (isString(module))
                            for (moduleFn = angularModule(module), runBlocks = runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks), invokeQueue = moduleFn._invokeQueue, i = 0, ii = invokeQueue.length; i < ii; i++) {
                                var invokeArgs = invokeQueue[i],
                                    provider = providerInjector.get(invokeArgs[0]);
                                provider[invokeArgs[1]].apply(provider, invokeArgs[2])
                            } else isFunction(module) ? runBlocks.push(providerInjector.invoke(module)) : isArray(module) ? runBlocks.push(providerInjector.invoke(module)) : assertArgFn(module, "module")
                    } catch (e) {
                        throw isArray(module) && (module = module[module.length - 1]), e.message && e.stack && -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack), $injectorMinErr("modulerr", "Failed to instantiate module {0} due to:\n{1}", module, e.stack || e.message || e)
                    }
                }
            });
            return runBlocks
        }(modulesToLoad), function(fn) {
            instanceInjector.invoke(fn || noop)
        }), instanceInjector;

        function supportObject(delegate) {
            return function(key, value) {
                if (!isObject(key)) return delegate(key, value);
                forEach(key, reverseParams(delegate))
            }
        }

        function provider(name, provider_) {
            if (assertNotHasOwnProperty(name, "service"), (isFunction(provider_) || isArray(provider_)) && (provider_ = providerInjector.instantiate(provider_)), !provider_.$get) throw $injectorMinErr("pget", "Provider '{0}' must define $get factory method.", name);
            return providerCache[name + providerSuffix] = provider_
        }

        function factory(name, factoryFn) {
            return provider(name, {
                $get: factoryFn
            })
        }

        function createInternalInjector(cache, factory) {
            function getService(serviceName) {
                if (cache.hasOwnProperty(serviceName)) {
                    if (cache[serviceName] === INSTANTIATING) throw $injectorMinErr("cdep", "Circular dependency found: {0}", serviceName + " <- " + path.join(" <- "));
                    return cache[serviceName]
                }
                try {
                    return path.unshift(serviceName), cache[serviceName] = INSTANTIATING, cache[serviceName] = factory(serviceName)
                } catch (err) {
                    throw cache[serviceName] === INSTANTIATING && delete cache[serviceName], err
                } finally {
                    path.shift()
                }
            }

            function invoke(fn, self, locals) {
                var length, i, key, args = [],
                    $inject = annotate(fn);
                for (i = 0, length = $inject.length; i < length; i++) {
                    if ("string" != typeof(key = $inject[i])) throw $injectorMinErr("itkn", "Incorrect injection token! Expected service name as string, got {0}", key);
                    args.push(locals && locals.hasOwnProperty(key) ? locals[key] : getService(key))
                }
                return isArray(fn) && (fn = fn[length]), fn.apply(self, args)
            }
            return {
                invoke: invoke,
                instantiate: function(Type, locals) {
                    var instance, returnedValue, Constructor = function() {};
                    return Constructor.prototype = (isArray(Type) ? Type[Type.length - 1] : Type).prototype, isObject(returnedValue = invoke(Type, instance = new Constructor, locals)) || isFunction(returnedValue) ? returnedValue : instance
                },
                get: getService,
                annotate: annotate,
                has: function(name) {
                    return providerCache.hasOwnProperty(name + providerSuffix) || cache.hasOwnProperty(name)
                }
            }
        }
    }

    function $AnchorScrollProvider() {
        var autoScrollingEnabled = !0;
        this.disableAutoScrolling = function() {
            autoScrollingEnabled = !1
        }, this.$get = ["$window", "$location", "$rootScope", function($window, $location, $rootScope) {
            var document = $window.document;

            function scroll() {
                var elm, list, result, hash = $location.hash();
                hash ? (elm = document.getElementById(hash)) ? elm.scrollIntoView() : (list = document.getElementsByName(hash), result = null, forEach(list, function(element) {
                    result || "a" !== lowercase(element.nodeName) || (result = element)
                }), (elm = result) ? elm.scrollIntoView() : "top" === hash && $window.scrollTo(0, 0)) : $window.scrollTo(0, 0)
            }
            return autoScrollingEnabled && $rootScope.$watch(function() {
                return $location.hash()
            }, function() {
                $rootScope.$evalAsync(scroll)
            }), scroll
        }]
    }
    var $animateMinErr = minErr("$animate"),
        $AnimateProvider = ["$provide", function($provide) {
            this.$$selectors = {}, this.register = function(name, factory) {
                var key = name + "-animation";
                if (name && "." != name.charAt(0)) throw $animateMinErr("notcsel", "Expecting class selector starting with '.' got '{0}'.", name);
                this.$$selectors[name.substr(1)] = key, $provide.factory(key, factory)
            }, this.classNameFilter = function(expression) {
                return 1 === arguments.length && (this.$$classNameFilter = expression instanceof RegExp ? expression : null), this.$$classNameFilter
            }, this.$get = ["$timeout", "$$asyncCallback", function($timeout, $$asyncCallback) {
                function async (fn) {
                    fn && $$asyncCallback(fn)
                }
                return {
                    enter: function(element, parent, after, done) {
                        after ? after.after(element) : (parent && parent[0] || (parent = after.parent()), parent.append(element)), async (done)
                    },
                    leave: function(element, done) {
                        element.remove(), async (done)
                    },
                    move: function(element, parent, after, done) {
                        this.enter(element, parent, after, done)
                    },
                    addClass: function(element, className, done) {
                        className = isString(className) ? className : isArray(className) ? className.join(" ") : "", forEach(element, function(element) {
                            jqLiteAddClass(element, className)
                        }), async (done)
                    },
                    removeClass: function(element, className, done) {
                        className = isString(className) ? className : isArray(className) ? className.join(" ") : "", forEach(element, function(element) {
                            jqLiteRemoveClass(element, className)
                        }), async (done)
                    },
                    setClass: function(element, add, remove, done) {
                        forEach(element, function(element) {
                            jqLiteAddClass(element, add), jqLiteRemoveClass(element, remove)
                        }), async (done)
                    },
                    enabled: noop
                }
            }]
        }];

    function $$AsyncCallbackProvider() {
        this.$get = ["$$rAF", "$timeout", function($$rAF, $timeout) {
            return $$rAF.supported ? function(fn) {
                return $$rAF(fn)
            } : function(fn) {
                return $timeout(fn, 0, !1)
            }
        }]
    }

    function Browser(window, document, $log, $sniffer) {
        var self = this,
            rawDocument = document[0],
            location = window.location,
            history = window.history,
            setTimeout = window.setTimeout,
            clearTimeout = window.clearTimeout,
            pendingDeferIds = {};
        self.isMock = !1;
        var outstandingRequestCount = 0,
            outstandingRequestCallbacks = [];

        function completeOutstandingRequest(fn) {
            try {
                fn.apply(null, sliceArgs(arguments, 1))
            } finally {
                if (0 === --outstandingRequestCount)
                    for (; outstandingRequestCallbacks.length;) try {
                        outstandingRequestCallbacks.pop()()
                    } catch (e) {
                        $log.error(e)
                    }
            }
        }
        self.$$completeOutstandingRequest = completeOutstandingRequest, self.$$incOutstandingRequestCount = function() {
            outstandingRequestCount++
        }, self.notifyWhenNoOutstandingRequests = function(callback) {
            forEach(pollFns, function(pollFn) {
                pollFn()
            }), 0 === outstandingRequestCount ? callback() : outstandingRequestCallbacks.push(callback)
        };
        var pollTimeout, pollFns = [];
        self.addPollFn = function(fn) {
            return isUndefined(pollTimeout) && function(interval, setTimeout) {
                ! function check() {
                    forEach(pollFns, function(pollFn) {
                        pollFn()
                    }), pollTimeout = setTimeout(check, interval)
                }()
            }(100, setTimeout), pollFns.push(fn), fn
        };
        var lastBrowserUrl = location.href,
            baseElement = document.find("base"),
            newLocation = null;
        self.url = function(url, replace) {
            if (location !== window.location && (location = window.location), history !== window.history && (history = window.history), url) {
                if (lastBrowserUrl == url) return;
                return lastBrowserUrl = url, $sniffer.history ? replace ? history.replaceState(null, "", url) : (history.pushState(null, "", url), baseElement.attr("href", baseElement.attr("href"))) : (newLocation = url, replace ? location.replace(url) : location.href = url), self
            }
            return newLocation || location.href.replace(/%27/g, "'")
        };
        var urlChangeListeners = [],
            urlChangeInit = !1;

        function fireUrlChange() {
            newLocation = null, lastBrowserUrl != self.url() && (lastBrowserUrl = self.url(), forEach(urlChangeListeners, function(listener) {
                listener(self.url())
            }))
        }
        self.onUrlChange = function(callback) {
            return urlChangeInit || ($sniffer.history && jqLite(window).on("popstate", fireUrlChange), $sniffer.hashchange ? jqLite(window).on("hashchange", fireUrlChange) : self.addPollFn(fireUrlChange), urlChangeInit = !0), urlChangeListeners.push(callback), callback
        }, self.baseHref = function() {
            var href = baseElement.attr("href");
            return href ? href.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        };
        var lastCookies = {},
            lastCookieString = "",
            cookiePath = self.baseHref();
        self.cookies = function(name, value) {
            var cookieLength, cookieArray, cookie, i, index;
            if (!name) {
                if (rawDocument.cookie !== lastCookieString)
                    for (cookieArray = (lastCookieString = rawDocument.cookie).split("; "), lastCookies = {}, i = 0; i < cookieArray.length; i++) 0 < (index = (cookie = cookieArray[i]).indexOf("=")) && (name = unescape(cookie.substring(0, index)), lastCookies[name] === undefined && (lastCookies[name] = unescape(cookie.substring(index + 1))));
                return lastCookies
            }
            value === undefined ? rawDocument.cookie = escape(name) + "=;path=" + cookiePath + ";expires=Thu, 01 Jan 1970 00:00:00 GMT" : isString(value) && 4096 < (cookieLength = (rawDocument.cookie = escape(name) + "=" + escape(value) + ";path=" + cookiePath).length + 1) && $log.warn("Cookie '" + name + "' possibly not set or overflowed because it was too large (" + cookieLength + " > 4096 bytes)!")
        }, self.defer = function(fn, delay) {
            var timeoutId;
            return outstandingRequestCount++, timeoutId = setTimeout(function() {
                delete pendingDeferIds[timeoutId], completeOutstandingRequest(fn)
            }, delay || 0), pendingDeferIds[timeoutId] = !0, timeoutId
        }, self.defer.cancel = function(deferId) {
            return !!pendingDeferIds[deferId] && (delete pendingDeferIds[deferId], clearTimeout(deferId), completeOutstandingRequest(noop), !0)
        }
    }

    function $BrowserProvider() {
        this.$get = ["$window", "$log", "$sniffer", "$document", function($window, $log, $sniffer, $document) {
            return new Browser($window, $document, $log, $sniffer)
        }]
    }

    function $CacheFactoryProvider() {
        this.$get = function() {
            var caches = {};

            function cacheFactory(cacheId, options) {
                if (cacheId in caches) throw minErr("$cacheFactory")("iid", "CacheId '{0}' is already taken!", cacheId);
                var size = 0,
                    stats = extend({}, options, {
                        id: cacheId
                    }),
                    data = {},
                    capacity = options && options.capacity || Number.MAX_VALUE,
                    lruHash = {},
                    freshEnd = null,
                    staleEnd = null;
                return caches[cacheId] = {
                    put: function(key, value) {
                        capacity < Number.MAX_VALUE && refresh(lruHash[key] || (lruHash[key] = {
                            key: key
                        }));
                        if (!isUndefined(value)) return key in data || size++, data[key] = value, capacity < size && this.remove(staleEnd.key), value
                    },
                    get: function(key) {
                        if (capacity < Number.MAX_VALUE) {
                            var lruEntry = lruHash[key];
                            if (!lruEntry) return;
                            refresh(lruEntry)
                        }
                        return data[key]
                    },
                    remove: function(key) {
                        if (capacity < Number.MAX_VALUE) {
                            var lruEntry = lruHash[key];
                            if (!lruEntry) return;
                            lruEntry == freshEnd && (freshEnd = lruEntry.p), lruEntry == staleEnd && (staleEnd = lruEntry.n), link(lruEntry.n, lruEntry.p), delete lruHash[key]
                        }
                        delete data[key], size--
                    },
                    removeAll: function() {
                        data = {}, size = 0, lruHash = {}, freshEnd = staleEnd = null
                    },
                    destroy: function() {
                        lruHash = stats = data = null, delete caches[cacheId]
                    },
                    info: function() {
                        return extend({}, stats, {
                            size: size
                        })
                    }
                };

                function refresh(entry) {
                    entry != freshEnd && (staleEnd ? staleEnd == entry && (staleEnd = entry.n) : staleEnd = entry, link(entry.n, entry.p), link(entry, freshEnd), (freshEnd = entry).n = null)
                }

                function link(nextEntry, prevEntry) {
                    nextEntry != prevEntry && (nextEntry && (nextEntry.p = prevEntry), prevEntry && (prevEntry.n = nextEntry))
                }
            }
            return cacheFactory.info = function() {
                var info = {};
                return forEach(caches, function(cache, cacheId) {
                    info[cacheId] = cache.info()
                }), info
            }, cacheFactory.get = function(cacheId) {
                return caches[cacheId]
            }, cacheFactory
        }
    }

    function $TemplateCacheProvider() {
        this.$get = ["$cacheFactory", function($cacheFactory) {
            return $cacheFactory("templates")
        }]
    }
    var $compileMinErr = minErr("$compile");

    function $CompileProvider($provide, $$sanitizeUriProvider) {
        var hasDirectives = {},
            COMMENT_DIRECTIVE_REGEXP = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,
            CLASS_DIRECTIVE_REGEXP = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
            EVENT_HANDLER_ATTR_REGEXP = /^(on[a-z]+|formaction)$/;
        this.directive = function registerDirective(name, directiveFactory) {
            return assertNotHasOwnProperty(name, "directive"), isString(name) ? (assertArg(directiveFactory, "directiveFactory"), hasDirectives.hasOwnProperty(name) || (hasDirectives[name] = [], $provide.factory(name + "Directive", ["$injector", "$exceptionHandler", function($injector, $exceptionHandler) {
                var directives = [];
                return forEach(hasDirectives[name], function(directiveFactory, index) {
                    try {
                        var directive = $injector.invoke(directiveFactory);
                        isFunction(directive) ? directive = {
                            compile: valueFn(directive)
                        } : !directive.compile && directive.link && (directive.compile = valueFn(directive.link)), directive.priority = directive.priority || 0, directive.index = index, directive.name = directive.name || name, directive.require = directive.require || directive.controller && directive.name, directive.restrict = directive.restrict || "A", directives.push(directive)
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                }), directives
            }])), hasDirectives[name].push(directiveFactory)) : forEach(name, reverseParams(registerDirective)), this
        }, this.aHrefSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? ($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp), this) : $$sanitizeUriProvider.aHrefSanitizationWhitelist()
        }, this.imgSrcSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? ($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp), this) : $$sanitizeUriProvider.imgSrcSanitizationWhitelist()
        }, this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$http", "$templateCache", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function($injector, $interpolate, $exceptionHandler, $http, $templateCache, $parse, $controller, $rootScope, $document, $sce, $animate, $$sanitizeUri) {
            var Attributes = function(element, attr) {
                this.$$element = element, this.$attr = attr || {}
            };
            Attributes.prototype = {
                $normalize: directiveNormalize,
                $addClass: function(classVal) {
                    classVal && 0 < classVal.length && $animate.addClass(this.$$element, classVal)
                },
                $removeClass: function(classVal) {
                    classVal && 0 < classVal.length && $animate.removeClass(this.$$element, classVal)
                },
                $updateClass: function(newClasses, oldClasses) {
                    var toAdd = tokenDifference(newClasses, oldClasses),
                        toRemove = tokenDifference(oldClasses, newClasses);
                    0 === toAdd.length ? $animate.removeClass(this.$$element, toRemove) : 0 === toRemove.length ? $animate.addClass(this.$$element, toAdd) : $animate.setClass(this.$$element, toAdd, toRemove)
                },
                $set: function(key, value, writeAttr, attrName) {
                    var nodeName, booleanKey = getBooleanAttrName(this.$$element[0], key);
                    booleanKey && (this.$$element.prop(key, value), attrName = booleanKey), this[key] = value, attrName ? this.$attr[key] = attrName : (attrName = this.$attr[key]) || (this.$attr[key] = attrName = snake_case(key, "-")), ("A" === (nodeName = nodeName_(this.$$element)) && "href" === key || "IMG" === nodeName && "src" === key) && (this[key] = value = $$sanitizeUri(value, "src" === key)), !1 !== writeAttr && (null === value || value === undefined ? this.$$element.removeAttr(attrName) : this.$$element.attr(attrName, value));
                    var $$observers = this.$$observers;
                    $$observers && forEach($$observers[key], function(fn) {
                        try {
                            fn(value)
                        } catch (e) {
                            $exceptionHandler(e)
                        }
                    })
                },
                $observe: function(key, fn) {
                    var attrs = this,
                        $$observers = attrs.$$observers || (attrs.$$observers = {}),
                        listeners = $$observers[key] || ($$observers[key] = []);
                    return listeners.push(fn), $rootScope.$evalAsync(function() {
                        listeners.$$inter || fn(attrs[key])
                    }), fn
                }
            };
            var startSymbol = $interpolate.startSymbol(),
                endSymbol = $interpolate.endSymbol(),
                denormalizeTemplate = "{{" == startSymbol || "}}" == endSymbol ? identity : function(template) {
                    return template.replace(/\{\{/g, startSymbol).replace(/}}/g, endSymbol)
                },
                NG_ATTR_BINDING = /^ngAttr[A-Z]/;
            return compile;

            function compile($compileNodes, transcludeFn, maxPriority, ignoreDirective, previousCompileContext) {
                $compileNodes instanceof jqLite || ($compileNodes = jqLite($compileNodes)), forEach($compileNodes, function(node, index) {
                    3 == node.nodeType && node.nodeValue.match(/\S+/) && ($compileNodes[index] = node = jqLite(node).wrap("<span></span>").parent()[0])
                });
                var compositeLinkFn = compileNodes($compileNodes, transcludeFn, $compileNodes, maxPriority, ignoreDirective, previousCompileContext);
                return safeAddClass($compileNodes, "ng-scope"),
                    function(scope, cloneConnectFn, transcludeControllers, parentBoundTranscludeFn) {
                        assertArg(scope, "scope");
                        var $linkNode = cloneConnectFn ? JQLitePrototype.clone.call($compileNodes) : $compileNodes;
                        forEach(transcludeControllers, function(instance, name) {
                            $linkNode.data("$" + name + "Controller", instance)
                        });
                        for (var i = 0, ii = $linkNode.length; i < ii; i++) {
                            var nodeType = $linkNode[i].nodeType;
                            1 !== nodeType && 9 !== nodeType || $linkNode.eq(i).data("$scope", scope)
                        }
                        return cloneConnectFn && cloneConnectFn($linkNode, scope), compositeLinkFn && compositeLinkFn(scope, $linkNode, $linkNode, parentBoundTranscludeFn), $linkNode
                    }
            }

            function safeAddClass($element, className) {
                try {
                    $element.addClass(className)
                } catch (e) {}
            }

            function compileNodes(nodeList, transcludeFn, $rootElement, maxPriority, ignoreDirective, previousCompileContext) {
                for (var attrs, directives, nodeLinkFn, childNodes, childLinkFn, linkFnFound, linkFns = [], i = 0; i < nodeList.length; i++) attrs = new Attributes, (nodeLinkFn = (directives = collectDirectives(nodeList[i], [], attrs, 0 === i ? maxPriority : undefined, ignoreDirective)).length ? applyDirectivesToNode(directives, nodeList[i], attrs, transcludeFn, $rootElement, null, [], [], previousCompileContext) : null) && nodeLinkFn.scope && safeAddClass(attrs.$$element, "ng-scope"), childLinkFn = nodeLinkFn && nodeLinkFn.terminal || !(childNodes = nodeList[i].childNodes) || !childNodes.length ? null : compileNodes(childNodes, nodeLinkFn ? (nodeLinkFn.transcludeOnThisElement || !nodeLinkFn.templateOnThisElement) && nodeLinkFn.transclude : transcludeFn), linkFns.push(nodeLinkFn, childLinkFn), linkFnFound = linkFnFound || nodeLinkFn || childLinkFn, previousCompileContext = null;
                return linkFnFound ? function(scope, nodeList, $rootElement, parentBoundTranscludeFn) {
                    var nodeLinkFn, childLinkFn, node, childScope, i, ii, n, childBoundTranscludeFn, nodeListLength = nodeList.length,
                        stableNodeList = new Array(nodeListLength);
                    for (i = 0; i < nodeListLength; i++) stableNodeList[i] = nodeList[i];
                    for (n = i = 0, ii = linkFns.length; i < ii; n++) node = stableNodeList[n], nodeLinkFn = linkFns[i++], childLinkFn = linkFns[i++], nodeLinkFn ? (nodeLinkFn.scope ? (childScope = scope.$new(), jqLite.data(node, "$scope", childScope)) : childScope = scope, childBoundTranscludeFn = nodeLinkFn.transcludeOnThisElement ? createBoundTranscludeFn(scope, nodeLinkFn.transclude, parentBoundTranscludeFn) : !nodeLinkFn.templateOnThisElement && parentBoundTranscludeFn ? parentBoundTranscludeFn : !parentBoundTranscludeFn && transcludeFn ? createBoundTranscludeFn(scope, transcludeFn) : null, nodeLinkFn(childLinkFn, childScope, node, $rootElement, childBoundTranscludeFn)) : childLinkFn && childLinkFn(scope, node.childNodes, undefined, parentBoundTranscludeFn)
                } : null
            }

            function createBoundTranscludeFn(scope, transcludeFn, previousBoundTranscludeFn) {
                return function(transcludedScope, cloneFn, controllers) {
                    var scopeCreated = !1;
                    transcludedScope || (scopeCreated = (transcludedScope = scope.$new()).$$transcluded = !0);
                    var clone = transcludeFn(transcludedScope, cloneFn, controllers, previousBoundTranscludeFn);
                    return scopeCreated && clone.on("$destroy", function() {
                        transcludedScope.$destroy()
                    }), clone
                }
            }

            function collectDirectives(node, directives, attrs, maxPriority, ignoreDirective) {
                var match, className, nodeType = node.nodeType,
                    attrsMap = attrs.$attr;
                switch (nodeType) {
                    case 1:
                        addDirective(directives, directiveNormalize(nodeName_(node).toLowerCase()), "E", maxPriority, ignoreDirective);
                        for (var attr, name, nName, ngAttrName, value, isNgAttr, nAttrs = node.attributes, j = 0, jj = nAttrs && nAttrs.length; j < jj; j++) {
                            var attrStartName = !1,
                                attrEndName = !1;
                            if (attr = nAttrs[j], !msie || 8 <= msie || attr.specified) {
                                name = attr.name, value = trim(attr.value), ngAttrName = directiveNormalize(name), (isNgAttr = NG_ATTR_BINDING.test(ngAttrName)) && (name = snake_case(ngAttrName.substr(6), "-"));
                                var directiveNName = ngAttrName.replace(/(Start|End)$/, "");
                                ngAttrName === directiveNName + "Start" && (attrEndName = (attrStartName = name).substr(0, name.length - 5) + "end", name = name.substr(0, name.length - 6)), attrsMap[nName = directiveNormalize(name.toLowerCase())] = name, !isNgAttr && attrs.hasOwnProperty(nName) || (attrs[nName] = value, getBooleanAttrName(node, nName) && (attrs[nName] = !0)), addAttrInterpolateDirective(node, directives, value, nName), addDirective(directives, nName, "A", maxPriority, ignoreDirective, attrStartName, attrEndName)
                            }
                        }
                        if (isString(className = node.className) && "" !== className)
                            for (; match = CLASS_DIRECTIVE_REGEXP.exec(className);) addDirective(directives, nName = directiveNormalize(match[2]), "C", maxPriority, ignoreDirective) && (attrs[nName] = trim(match[3])), className = className.substr(match.index + match[0].length);
                        break;
                    case 3:
                        ! function(directives, text) {
                            var interpolateFn = $interpolate(text, !0);
                            interpolateFn && directives.push({
                                priority: 0,
                                compile: function(templateNode) {
                                    var parent = templateNode.parent(),
                                        hasCompileParent = parent.length;
                                    return hasCompileParent && safeAddClass(templateNode.parent(), "ng-binding"),
                                        function(scope, node) {
                                            var parent = node.parent(),
                                                bindings = parent.data("$binding") || [];
                                            bindings.push(interpolateFn), parent.data("$binding", bindings), hasCompileParent || safeAddClass(parent, "ng-binding"), scope.$watch(interpolateFn, function(value) {
                                                node[0].nodeValue = value
                                            })
                                        }
                                }
                            })
                        }(directives, node.nodeValue);
                        break;
                    case 8:
                        try {
                            (match = COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue)) && addDirective(directives, nName = directiveNormalize(match[1]), "M", maxPriority, ignoreDirective) && (attrs[nName] = trim(match[2]))
                        } catch (e) {}
                }
                return directives.sort(byPriority), directives
            }

            function groupScan(node, attrStart, attrEnd) {
                var nodes = [],
                    depth = 0;
                if (attrStart && node.hasAttribute && node.hasAttribute(attrStart)) {
                    do {
                        if (!node) throw $compileMinErr("uterdir", "Unterminated attribute, found '{0}' but no matching '{1}' found.", attrStart, attrEnd);
                        1 == node.nodeType && (node.hasAttribute(attrStart) && depth++, node.hasAttribute(attrEnd) && depth--), nodes.push(node), node = node.nextSibling
                    } while (0 < depth)
                } else nodes.push(node);
                return jqLite(nodes)
            }

            function groupElementsLinkFnWrapper(linkFn, attrStart, attrEnd) {
                return function(scope, element, attrs, controllers, transcludeFn) {
                    return element = groupScan(element[0], attrStart, attrEnd), linkFn(scope, element, attrs, controllers, transcludeFn)
                }
            }

            function applyDirectivesToNode(directives, compileNode, templateAttrs, transcludeFn, jqCollection, originalReplaceDirective, preLinkFns, postLinkFns, previousCompileContext) {
                previousCompileContext = previousCompileContext || {};
                for (var newScopeDirective, directive, directiveName, $template, linkFn, directiveValue, terminalPriority = -Number.MAX_VALUE, controllerDirectives = previousCompileContext.controllerDirectives, newIsolateScopeDirective = previousCompileContext.newIsolateScopeDirective, templateDirective = previousCompileContext.templateDirective, nonTlbTranscludeDirective = previousCompileContext.nonTlbTranscludeDirective, hasTranscludeDirective = !1, hasTemplate = !1, hasElementTranscludeDirective = previousCompileContext.hasElementTranscludeDirective, $compileNode = templateAttrs.$$element = jqLite(compileNode), replaceDirective = originalReplaceDirective, childTranscludeFn = transcludeFn, i = 0, ii = directives.length; i < ii; i++) {
                    var attrStart = (directive = directives[i]).$$start,
                        attrEnd = directive.$$end;
                    if (attrStart && ($compileNode = groupScan(compileNode, attrStart, attrEnd)), $template = undefined, terminalPriority > directive.priority) break;
                    if ((directiveValue = directive.scope) && (newScopeDirective = newScopeDirective || directive, directive.templateUrl || (assertNoDuplicate("new/isolated scope", newIsolateScopeDirective, directive, $compileNode), isObject(directiveValue) && (newIsolateScopeDirective = directive))), directiveName = directive.name, !directive.templateUrl && directive.controller && (directiveValue = directive.controller, assertNoDuplicate("'" + directiveName + "' controller", (controllerDirectives = controllerDirectives || {})[directiveName], directive, $compileNode), controllerDirectives[directiveName] = directive), (directiveValue = directive.transclude) && (hasTranscludeDirective = !0, directive.$$tlb || (assertNoDuplicate("transclusion", nonTlbTranscludeDirective, directive, $compileNode), nonTlbTranscludeDirective = directive), childTranscludeFn = "element" == directiveValue ? (hasElementTranscludeDirective = !0, terminalPriority = directive.priority, $template = $compileNode, $compileNode = templateAttrs.$$element = jqLite(document.createComment(" " + directiveName + ": " + templateAttrs[directiveName] + " ")), compileNode = $compileNode[0], replaceWith(jqCollection, sliceArgs($template), compileNode), compile($template, transcludeFn, terminalPriority, replaceDirective && replaceDirective.name, {
                            nonTlbTranscludeDirective: nonTlbTranscludeDirective
                        })) : ($template = jqLite(jqLiteClone(compileNode)).contents(), $compileNode.empty(), compile($template, transcludeFn))), directive.template)
                        if (hasTemplate = !0, assertNoDuplicate("template", templateDirective, directive, $compileNode), directiveValue = isFunction((templateDirective = directive).template) ? directive.template($compileNode, templateAttrs) : directive.template, directiveValue = denormalizeTemplate(directiveValue), directive.replace) {
                            if (replaceDirective = directive, $template = jqLiteIsTextNode(directiveValue) ? [] : jqLite(trim(directiveValue)), compileNode = $template[0], 1 != $template.length || 1 !== compileNode.nodeType) throw $compileMinErr("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", directiveName, "");
                            replaceWith(jqCollection, $compileNode, compileNode);
                            var newTemplateAttrs = {
                                    $attr: {}
                                },
                                templateDirectives = collectDirectives(compileNode, [], newTemplateAttrs),
                                unprocessedDirectives = directives.splice(i + 1, directives.length - (i + 1));
                            newIsolateScopeDirective && markDirectivesAsIsolate(templateDirectives), directives = directives.concat(templateDirectives).concat(unprocessedDirectives), mergeTemplateAttributes(templateAttrs, newTemplateAttrs), ii = directives.length
                        } else $compileNode.html(directiveValue);
                    if (directive.templateUrl) hasTemplate = !0, assertNoDuplicate("template", templateDirective, directive, $compileNode), (templateDirective = directive).replace && (replaceDirective = directive), nodeLinkFn = compileTemplateUrl(directives.splice(i, directives.length - i), $compileNode, templateAttrs, jqCollection, hasTranscludeDirective && childTranscludeFn, preLinkFns, postLinkFns, {
                        controllerDirectives: controllerDirectives,
                        newIsolateScopeDirective: newIsolateScopeDirective,
                        templateDirective: templateDirective,
                        nonTlbTranscludeDirective: nonTlbTranscludeDirective
                    }), ii = directives.length;
                    else if (directive.compile) try {
                        isFunction(linkFn = directive.compile($compileNode, templateAttrs, childTranscludeFn)) ? addLinkFns(null, linkFn, attrStart, attrEnd) : linkFn && addLinkFns(linkFn.pre, linkFn.post, attrStart, attrEnd)
                    } catch (e) {
                        $exceptionHandler(e, startingTag($compileNode))
                    }
                    directive.terminal && (nodeLinkFn.terminal = !0, terminalPriority = Math.max(terminalPriority, directive.priority))
                }
                return nodeLinkFn.scope = newScopeDirective && !0 === newScopeDirective.scope, nodeLinkFn.transcludeOnThisElement = hasTranscludeDirective, nodeLinkFn.templateOnThisElement = hasTemplate, nodeLinkFn.transclude = childTranscludeFn, previousCompileContext.hasElementTranscludeDirective = hasElementTranscludeDirective, nodeLinkFn;

                function addLinkFns(pre, post, attrStart, attrEnd) {
                    pre && (attrStart && (pre = groupElementsLinkFnWrapper(pre, attrStart, attrEnd)), pre.require = directive.require, pre.directiveName = directiveName, (newIsolateScopeDirective === directive || directive.$$isolateScope) && (pre = cloneAndAnnotateFn(pre, {
                        isolateScope: !0
                    })), preLinkFns.push(pre)), post && (attrStart && (post = groupElementsLinkFnWrapper(post, attrStart, attrEnd)), post.require = directive.require, post.directiveName = directiveName, (newIsolateScopeDirective === directive || directive.$$isolateScope) && (post = cloneAndAnnotateFn(post, {
                        isolateScope: !0
                    })), postLinkFns.push(post))
                }

                function getControllers(directiveName, require, $element, elementControllers) {
                    var value, retrievalMethod = "data",
                        optional = !1;
                    if (isString(require)) {
                        for (;
                            "^" == (value = require.charAt(0)) || "?" == value;) require = require.substr(1), "^" == value && (retrievalMethod = "inheritedData"), optional = optional || "?" == value;
                        if (value = null, elementControllers && "data" === retrievalMethod && (value = elementControllers[require]), !(value = value || $element[retrievalMethod]("$" + require + "Controller")) && !optional) throw $compileMinErr("ctreq", "Controller '{0}', required by directive '{1}', can't be found!", require, directiveName);
                        return value
                    }
                    return isArray(require) && (value = [], forEach(require, function(require) {
                        value.push(getControllers(directiveName, require, $element, elementControllers))
                    })), value
                }

                function nodeLinkFn(childLinkFn, scope, linkNode, $rootElement, boundTranscludeFn) {
                    var attrs, $element, i, ii, linkFn, controller, isolateScope, transcludeFn, elementControllers = {};
                    if (attrs = compileNode === linkNode ? templateAttrs : shallowCopy(templateAttrs, new Attributes(jqLite(linkNode), templateAttrs.$attr)), $element = attrs.$$element, newIsolateScopeDirective) {
                        var LOCAL_REGEXP = /^\s*([@=&])(\??)\s*(\w*)\s*$/;
                        isolateScope = scope.$new(!0), !templateDirective || templateDirective !== newIsolateScopeDirective && templateDirective !== newIsolateScopeDirective.$$originalDirective ? $element.data("$isolateScopeNoTemplate", isolateScope) : $element.data("$isolateScope", isolateScope), safeAddClass($element, "ng-isolate-scope"), forEach(newIsolateScopeDirective.scope, function(definition, scopeName) {
                            var lastValue, parentGet, parentSet, compare, match = definition.match(LOCAL_REGEXP) || [],
                                attrName = match[3] || scopeName,
                                optional = "?" == match[2],
                                mode = match[1];
                            switch (isolateScope.$$isolateBindings[scopeName] = mode + attrName, mode) {
                                case "@":
                                    attrs.$observe(attrName, function(value) {
                                        isolateScope[scopeName] = value
                                    }), attrs.$$observers[attrName].$$scope = scope, attrs[attrName] && (isolateScope[scopeName] = $interpolate(attrs[attrName])(scope));
                                    break;
                                case "=":
                                    if (optional && !attrs[attrName]) return;
                                    parentGet = $parse(attrs[attrName]), compare = parentGet.literal ? equals : function(a, b) {
                                        return a === b || a != a && b != b
                                    }, parentSet = parentGet.assign || function() {
                                        throw lastValue = isolateScope[scopeName] = parentGet(scope), $compileMinErr("nonassign", "Expression '{0}' used with directive '{1}' is non-assignable!", attrs[attrName], newIsolateScopeDirective.name)
                                    }, lastValue = isolateScope[scopeName] = parentGet(scope), isolateScope.$watch(function() {
                                        var parentValue = parentGet(scope);
                                        return compare(parentValue, isolateScope[scopeName]) || (compare(parentValue, lastValue) ? parentSet(scope, parentValue = isolateScope[scopeName]) : isolateScope[scopeName] = parentValue), lastValue = parentValue
                                    }, null, parentGet.literal);
                                    break;
                                case "&":
                                    parentGet = $parse(attrs[attrName]), isolateScope[scopeName] = function(locals) {
                                        return parentGet(scope, locals)
                                    };
                                    break;
                                default:
                                    throw $compileMinErr("iscp", "Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}", newIsolateScopeDirective.name, scopeName, definition)
                            }
                        })
                    }
                    for (transcludeFn = boundTranscludeFn && function(scope, cloneAttachFn) {
                            var transcludeControllers;
                            arguments.length < 2 && (cloneAttachFn = scope, scope = undefined);
                            hasElementTranscludeDirective && (transcludeControllers = elementControllers);
                            return boundTranscludeFn(scope, cloneAttachFn, transcludeControllers)
                        }, controllerDirectives && forEach(controllerDirectives, function(directive) {
                            var controllerInstance, locals = {
                                $scope: directive === newIsolateScopeDirective || directive.$$isolateScope ? isolateScope : scope,
                                $element: $element,
                                $attrs: attrs,
                                $transclude: transcludeFn
                            };
                            "@" == (controller = directive.controller) && (controller = attrs[directive.name]), controllerInstance = $controller(controller, locals), elementControllers[directive.name] = controllerInstance, hasElementTranscludeDirective || $element.data("$" + directive.name + "Controller", controllerInstance), directive.controllerAs && (locals.$scope[directive.controllerAs] = controllerInstance)
                        }), i = 0, ii = preLinkFns.length; i < ii; i++) try {
                        (linkFn = preLinkFns[i])(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers), transcludeFn)
                    } catch (e) {
                        $exceptionHandler(e, startingTag($element))
                    }
                    var scopeToChild = scope;
                    for (newIsolateScopeDirective && (newIsolateScopeDirective.template || null === newIsolateScopeDirective.templateUrl) && (scopeToChild = isolateScope), childLinkFn && childLinkFn(scopeToChild, linkNode.childNodes, undefined, boundTranscludeFn), i = postLinkFns.length - 1; 0 <= i; i--) try {
                        (linkFn = postLinkFns[i])(linkFn.isolateScope ? isolateScope : scope, $element, attrs, linkFn.require && getControllers(linkFn.directiveName, linkFn.require, $element, elementControllers), transcludeFn)
                    } catch (e) {
                        $exceptionHandler(e, startingTag($element))
                    }
                }
            }

            function markDirectivesAsIsolate(directives) {
                for (var j = 0, jj = directives.length; j < jj; j++) directives[j] = inherit(directives[j], {
                    $$isolateScope: !0
                })
            }

            function addDirective(tDirectives, name, location, maxPriority, ignoreDirective, startAttrName, endAttrName) {
                if (name === ignoreDirective) return null;
                var match = null;
                if (hasDirectives.hasOwnProperty(name))
                    for (var directive, directives = $injector.get(name + "Directive"), i = 0, ii = directives.length; i < ii; i++) try {
                        directive = directives[i], (maxPriority === undefined || maxPriority > directive.priority) && -1 != directive.restrict.indexOf(location) && (startAttrName && (directive = inherit(directive, {
                            $$start: startAttrName,
                            $$end: endAttrName
                        })), tDirectives.push(directive), match = directive)
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                return match
            }

            function mergeTemplateAttributes(dst, src) {
                var srcAttr = src.$attr,
                    dstAttr = dst.$attr,
                    $element = dst.$$element;
                forEach(dst, function(value, key) {
                    "$" != key.charAt(0) && (src[key] && src[key] !== value && (value += ("style" === key ? ";" : " ") + src[key]), dst.$set(key, value, !0, srcAttr[key]))
                }), forEach(src, function(value, key) {
                    "class" == key ? (safeAddClass($element, value), dst.class = (dst.class ? dst.class + " " : "") + value) : "style" == key ? ($element.attr("style", $element.attr("style") + ";" + value), dst.style = (dst.style ? dst.style + ";" : "") + value) : "$" == key.charAt(0) || dst.hasOwnProperty(key) || (dst[key] = value, dstAttr[key] = srcAttr[key])
                })
            }

            function compileTemplateUrl(directives, $compileNode, tAttrs, $rootElement, childTranscludeFn, preLinkFns, postLinkFns, previousCompileContext) {
                var afterTemplateNodeLinkFn, afterTemplateChildLinkFn, linkQueue = [],
                    beforeTemplateCompileNode = $compileNode[0],
                    origAsyncDirective = directives.shift(),
                    derivedSyncDirective = extend({}, origAsyncDirective, {
                        templateUrl: null,
                        transclude: null,
                        replace: null,
                        $$originalDirective: origAsyncDirective
                    }),
                    templateUrl = isFunction(origAsyncDirective.templateUrl) ? origAsyncDirective.templateUrl($compileNode, tAttrs) : origAsyncDirective.templateUrl;
                return $compileNode.empty(), $http.get($sce.getTrustedResourceUrl(templateUrl), {
                        cache: $templateCache
                    }).success(function(content) {
                        var compileNode, tempTemplateAttrs, $template, childBoundTranscludeFn;
                        if (content = denormalizeTemplate(content), origAsyncDirective.replace) {
                            if ($template = jqLiteIsTextNode(content) ? [] : jqLite(trim(content)), compileNode = $template[0], 1 != $template.length || 1 !== compileNode.nodeType) throw $compileMinErr("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", origAsyncDirective.name, templateUrl);
                            tempTemplateAttrs = {
                                $attr: {}
                            }, replaceWith($rootElement, $compileNode, compileNode);
                            var templateDirectives = collectDirectives(compileNode, [], tempTemplateAttrs);
                            isObject(origAsyncDirective.scope) && markDirectivesAsIsolate(templateDirectives), directives = templateDirectives.concat(directives), mergeTemplateAttributes(tAttrs, tempTemplateAttrs)
                        } else compileNode = beforeTemplateCompileNode, $compileNode.html(content);
                        for (directives.unshift(derivedSyncDirective), afterTemplateNodeLinkFn = applyDirectivesToNode(directives, compileNode, tAttrs, childTranscludeFn, $compileNode, origAsyncDirective, preLinkFns, postLinkFns, previousCompileContext), forEach($rootElement, function(node, i) {
                                node == compileNode && ($rootElement[i] = $compileNode[0])
                            }), afterTemplateChildLinkFn = compileNodes($compileNode[0].childNodes, childTranscludeFn); linkQueue.length;) {
                            var scope = linkQueue.shift(),
                                beforeTemplateLinkNode = linkQueue.shift(),
                                linkRootElement = linkQueue.shift(),
                                boundTranscludeFn = linkQueue.shift(),
                                linkNode = $compileNode[0];
                            if (beforeTemplateLinkNode !== beforeTemplateCompileNode) {
                                var oldClasses = beforeTemplateLinkNode.className;
                                previousCompileContext.hasElementTranscludeDirective && origAsyncDirective.replace || (linkNode = jqLiteClone(compileNode)), replaceWith(linkRootElement, jqLite(beforeTemplateLinkNode), linkNode), safeAddClass(jqLite(linkNode), oldClasses)
                            }
                            childBoundTranscludeFn = afterTemplateNodeLinkFn.transcludeOnThisElement ? createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn) : boundTranscludeFn, afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, linkNode, $rootElement, childBoundTranscludeFn)
                        }
                        linkQueue = null
                    }).error(function(response, code, headers, config) {
                        throw $compileMinErr("tpload", "Failed to load template: {0}", config.url)
                    }),
                    function(ignoreChildLinkFn, scope, node, rootElement, boundTranscludeFn) {
                        var childBoundTranscludeFn = boundTranscludeFn;
                        linkQueue ? (linkQueue.push(scope), linkQueue.push(node), linkQueue.push(rootElement), linkQueue.push(childBoundTranscludeFn)) : (afterTemplateNodeLinkFn.transcludeOnThisElement && (childBoundTranscludeFn = createBoundTranscludeFn(scope, afterTemplateNodeLinkFn.transclude, boundTranscludeFn)), afterTemplateNodeLinkFn(afterTemplateChildLinkFn, scope, node, rootElement, childBoundTranscludeFn))
                    }
            }

            function byPriority(a, b) {
                var diff = b.priority - a.priority;
                return 0 !== diff ? diff : a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index
            }

            function assertNoDuplicate(what, previousDirective, directive, element) {
                if (previousDirective) throw $compileMinErr("multidir", "Multiple directives [{0}, {1}] asking for {2} on: {3}", previousDirective.name, directive.name, what, startingTag(element))
            }

            function addAttrInterpolateDirective(node, directives, value, name) {
                var interpolateFn = $interpolate(value, !0);
                if (interpolateFn) {
                    if ("multiple" === name && "SELECT" === nodeName_(node)) throw $compileMinErr("selmulti", "Binding to the 'multiple' attribute is not supported. Element: {0}", startingTag(node));
                    directives.push({
                        priority: 100,
                        compile: function() {
                            return {
                                pre: function(scope, element, attr) {
                                    var $$observers = attr.$$observers || (attr.$$observers = {});
                                    if (EVENT_HANDLER_ATTR_REGEXP.test(name)) throw $compileMinErr("nodomevents", "Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");
                                    (interpolateFn = $interpolate(attr[name], !0, function(node, attrNormalizedName) {
                                        if ("srcdoc" == attrNormalizedName) return $sce.HTML;
                                        var tag = nodeName_(node);
                                        return "xlinkHref" == attrNormalizedName || "FORM" == tag && "action" == attrNormalizedName || "IMG" != tag && ("src" == attrNormalizedName || "ngSrc" == attrNormalizedName) ? $sce.RESOURCE_URL : void 0
                                    }(node, name))) && (attr[name] = interpolateFn(scope), ($$observers[name] || ($$observers[name] = [])).$$inter = !0, (attr.$$observers && attr.$$observers[name].$$scope || scope).$watch(interpolateFn, function(newValue, oldValue) {
                                        "class" === name && newValue != oldValue ? attr.$updateClass(newValue, oldValue) : attr.$set(name, newValue)
                                    }))
                                }
                            }
                        }
                    })
                }
            }

            function replaceWith($rootElement, elementsToRemove, newNode) {
                var i, ii, firstElementToRemove = elementsToRemove[0],
                    removeCount = elementsToRemove.length,
                    parent = firstElementToRemove.parentNode;
                if ($rootElement)
                    for (i = 0, ii = $rootElement.length; i < ii; i++)
                        if ($rootElement[i] == firstElementToRemove) {
                            $rootElement[i++] = newNode;
                            for (var j = i, j2 = j + removeCount - 1, jj = $rootElement.length; j < jj; j++, j2++) j2 < jj ? $rootElement[j] = $rootElement[j2] : delete $rootElement[j];
                            $rootElement.length -= removeCount - 1;
                            break
                        } parent && parent.replaceChild(newNode, firstElementToRemove);
                var fragment = document.createDocumentFragment();
                fragment.appendChild(firstElementToRemove), newNode[jqLite.expando] = firstElementToRemove[jqLite.expando];
                for (var k = 1, kk = elementsToRemove.length; k < kk; k++) {
                    var element = elementsToRemove[k];
                    jqLite(element).remove(), fragment.appendChild(element), delete elementsToRemove[k]
                }
                elementsToRemove[0] = newNode, elementsToRemove.length = 1
            }

            function cloneAndAnnotateFn(fn, annotation) {
                return extend(function() {
                    return fn.apply(null, arguments)
                }, fn, annotation)
            }
        }]
    }
    $CompileProvider.$inject = ["$provide", "$$sanitizeUriProvider"];
    var PREFIX_REGEXP = /^(x[\:\-_]|data[\:\-_])/i;

    function directiveNormalize(name) {
        return camelCase(name.replace(PREFIX_REGEXP, ""))
    }

    function tokenDifference(str1, str2) {
        var values = "",
            tokens1 = str1.split(/\s+/),
            tokens2 = str2.split(/\s+/);
        outer: for (var i = 0; i < tokens1.length; i++) {
            for (var token = tokens1[i], j = 0; j < tokens2.length; j++)
                if (token == tokens2[j]) continue outer;
            values += (0 < values.length ? " " : "") + token
        }
        return values
    }

    function $ControllerProvider() {
        var controllers = {},
            CNTRL_REG = /^(\S+)(\s+as\s+(\w+))?$/;
        this.register = function(name, constructor) {
            assertNotHasOwnProperty(name, "controller"), isObject(name) ? extend(controllers, name) : controllers[name] = constructor
        }, this.$get = ["$injector", "$window", function($injector, $window) {
            return function(expression, locals) {
                var instance, match, constructor, identifier;
                if (isString(expression) && (constructor = (match = expression.match(CNTRL_REG))[1], identifier = match[3], assertArgFn(expression = controllers.hasOwnProperty(constructor) ? controllers[constructor] : getter(locals.$scope, constructor, !0) || getter($window, constructor, !0), constructor, !0)), instance = $injector.instantiate(expression, locals), identifier) {
                    if (!locals || "object" !== _typeof(locals.$scope)) throw minErr("$controller")("noscp", "Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.", constructor || expression.name, identifier);
                    locals.$scope[identifier] = instance
                }
                return instance
            }
        }]
    }

    function $DocumentProvider() {
        this.$get = ["$window", function(window) {
            return jqLite(window.document)
        }]
    }

    function $ExceptionHandlerProvider() {
        this.$get = ["$log", function($log) {
            return function(exception, cause) {
                $log.error.apply($log, arguments)
            }
        }]
    }

    function parseHeaders(headers) {
        var key, val, i, parsed = {};
        return headers && forEach(headers.split("\n"), function(line) {
            i = line.indexOf(":"), key = lowercase(trim(line.substr(0, i))), val = trim(line.substr(i + 1)), key && (parsed[key] = parsed[key] ? parsed[key] + ", " + val : val)
        }), parsed
    }

    function headersGetter(headers) {
        var headersObj = isObject(headers) ? headers : undefined;
        return function(name) {
            return headersObj || (headersObj = parseHeaders(headers)), name ? headersObj[lowercase(name)] || null : headersObj
        }
    }

    function transformData(data, headers, fns) {
        return isFunction(fns) ? fns(data, headers) : (forEach(fns, function(fn) {
            data = fn(data, headers)
        }), data)
    }

    function isSuccess(status) {
        return 200 <= status && status < 300
    }

    function $HttpProvider() {
        var JSON_START = /^\s*(\[|\{[^\{])/,
            JSON_END = /[\}\]]\s*$/,
            PROTECTION_PREFIX = /^\)\]\}',?\n/,
            CONTENT_TYPE_APPLICATION_JSON = {
                "Content-Type": "application/json;charset=utf-8"
            },
            defaults = this.defaults = {
                transformResponse: [function(data) {
                    return isString(data) && (data = data.replace(PROTECTION_PREFIX, ""), JSON_START.test(data) && JSON_END.test(data) && (data = fromJson(data))), data
                }],
                transformRequest: [function(d) {
                    return isObject(d) && (obj = d, "[object File]" !== toString.call(obj)) && ! function(obj) {
                        return "[object Blob]" === toString.call(obj)
                    }(d) ? toJson(d) : d;
                    var obj
                }],
                headers: {
                    common: {
                        Accept: "application/json, text/plain, */*"
                    },
                    post: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                    put: shallowCopy(CONTENT_TYPE_APPLICATION_JSON),
                    patch: shallowCopy(CONTENT_TYPE_APPLICATION_JSON)
                },
                xsrfCookieName: "XSRF-TOKEN",
                xsrfHeaderName: "X-XSRF-TOKEN"
            },
            interceptorFactories = this.interceptors = [],
            responseInterceptorFactories = this.responseInterceptors = [];
        this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector", function($httpBackend, $browser, $cacheFactory, $rootScope, $q, $injector) {
            var defaultCache = $cacheFactory("$http"),
                reversedInterceptors = [];

            function $http(requestConfig) {
                var config = {
                        method: "get",
                        transformRequest: defaults.transformRequest,
                        transformResponse: defaults.transformResponse
                    },
                    headers = function(config) {
                        var defHeaderName, lowercaseDefHeaderName, reqHeaderName, defHeaders = defaults.headers,
                            reqHeaders = extend({}, config.headers);
                        defHeaders = extend({}, defHeaders.common, defHeaders[lowercase(config.method)]);
                        defaultHeadersIteration: for (defHeaderName in defHeaders) {
                            for (reqHeaderName in lowercaseDefHeaderName = lowercase(defHeaderName), reqHeaders)
                                if (lowercase(reqHeaderName) === lowercaseDefHeaderName) continue defaultHeadersIteration;
                            reqHeaders[defHeaderName] = defHeaders[defHeaderName]
                        }
                        return headers = reqHeaders, forEach(headers, function(headerFn, header) {
                            isFunction(headerFn) && (null != (headerContent = headerFn()) ? headers[header] = headerContent : delete headers[header])
                        }), reqHeaders;
                        var headers, headerContent
                    }(requestConfig);
                extend(config, requestConfig), config.headers = headers, config.method = uppercase(config.method);
                var chain = [function(config) {
                        headers = config.headers;
                        var reqData = transformData(config.data, headersGetter(headers), config.transformRequest);
                        return isUndefined(reqData) && forEach(headers, function(value, header) {
                                "content-type" === lowercase(header) && delete headers[header]
                            }), isUndefined(config.withCredentials) && !isUndefined(defaults.withCredentials) && (config.withCredentials = defaults.withCredentials),
                            function(config, reqData, reqHeaders) {
                                var cache, cachedResp, deferred = $q.defer(),
                                    promise = deferred.promise,
                                    url = function(url, params) {
                                        if (!params) return url;
                                        var parts = [];
                                        return function(obj, iterator, context) {
                                            for (var keys = sortedKeys(obj), i = 0; i < keys.length; i++) iterator.call(context, obj[keys[i]], keys[i])
                                        }(params, function(value, key) {
                                            null === value || isUndefined(value) || (isArray(value) || (value = [value]), forEach(value, function(v) {
                                                isObject(v) && (isDate(v) ? v = v.toISOString() : isObject(v) && (v = toJson(v))), parts.push(encodeUriQuery(key) + "=" + encodeUriQuery(v))
                                            }))
                                        }), 0 < parts.length && (url += (-1 == url.indexOf("?") ? "?" : "&") + parts.join("&")), url
                                    }(config.url, config.params);
                                if ($http.pendingRequests.push(config), promise.then(removePendingReq, removePendingReq), !config.cache && !defaults.cache || !1 === config.cache || "GET" !== config.method && "JSONP" !== config.method || (cache = isObject(config.cache) ? config.cache : isObject(defaults.cache) ? defaults.cache : defaultCache), cache)
                                    if (isDefined(cachedResp = cache.get(url))) {
                                        if (isPromiseLike(cachedResp)) return cachedResp.then(removePendingReq, removePendingReq), cachedResp;
                                        isArray(cachedResp) ? resolvePromise(cachedResp[1], cachedResp[0], shallowCopy(cachedResp[2]), cachedResp[3]) : resolvePromise(cachedResp, 200, {}, "OK")
                                    } else cache.put(url, promise);
                                if (isUndefined(cachedResp)) {
                                    var xsrfValue = urlIsSameOrigin(config.url) ? $browser.cookies()[config.xsrfCookieName || defaults.xsrfCookieName] : undefined;
                                    xsrfValue && (reqHeaders[config.xsrfHeaderName || defaults.xsrfHeaderName] = xsrfValue), $httpBackend(config.method, url, reqData, function(status, response, headersString, statusText) {
                                        cache && (isSuccess(status) ? cache.put(url, [status, response, parseHeaders(headersString), statusText]) : cache.remove(url)), resolvePromise(response, status, headersString, statusText), $rootScope.$$phase || $rootScope.$apply()
                                    }, reqHeaders, config.timeout, config.withCredentials, config.responseType)
                                }
                                return promise;

                                function resolvePromise(response, status, headers, statusText) {
                                    (isSuccess(status = Math.max(status, 0)) ? deferred.resolve : deferred.reject)({
                                        data: response,
                                        status: status,
                                        headers: headersGetter(headers),
                                        config: config,
                                        statusText: statusText
                                    })
                                }

                                function removePendingReq() {
                                    var idx = indexOf($http.pendingRequests, config); - 1 !== idx && $http.pendingRequests.splice(idx, 1)
                                }
                            }(config, reqData, headers).then(transformResponse, transformResponse)
                    }, undefined],
                    promise = $q.when(config);
                for (forEach(reversedInterceptors, function(interceptor) {
                        (interceptor.request || interceptor.requestError) && chain.unshift(interceptor.request, interceptor.requestError), (interceptor.response || interceptor.responseError) && chain.push(interceptor.response, interceptor.responseError)
                    }); chain.length;) {
                    var thenFn = chain.shift(),
                        rejectFn = chain.shift();
                    promise = promise.then(thenFn, rejectFn)
                }
                return promise.success = function(fn) {
                    return promise.then(function(response) {
                        fn(response.data, response.status, response.headers, config)
                    }), promise
                }, promise.error = function(fn) {
                    return promise.then(null, function(response) {
                        fn(response.data, response.status, response.headers, config)
                    }), promise
                }, promise;

                function transformResponse(response) {
                    var resp = extend({}, response, {
                        data: transformData(response.data, response.headers, config.transformResponse)
                    });
                    return isSuccess(response.status) ? resp : $q.reject(resp)
                }
            }
            return forEach(interceptorFactories, function(interceptorFactory) {
                    reversedInterceptors.unshift(isString(interceptorFactory) ? $injector.get(interceptorFactory) : $injector.invoke(interceptorFactory))
                }), forEach(responseInterceptorFactories, function(interceptorFactory, index) {
                    var responseFn = isString(interceptorFactory) ? $injector.get(interceptorFactory) : $injector.invoke(interceptorFactory);
                    reversedInterceptors.splice(index, 0, {
                        response: function(_response) {
                            return responseFn($q.when(_response))
                        },
                        responseError: function(response) {
                            return responseFn($q.reject(response))
                        }
                    })
                }), $http.pendingRequests = [],
                function(names) {
                    forEach(arguments, function(name) {
                        $http[name] = function(url, config) {
                            return $http(extend(config || {}, {
                                method: name,
                                url: url
                            }))
                        }
                    })
                }("get", "delete", "head", "jsonp"),
                function(name) {
                    forEach(arguments, function(name) {
                        $http[name] = function(url, data, config) {
                            return $http(extend(config || {}, {
                                method: name,
                                url: url,
                                data: data
                            }))
                        }
                    })
                }("post", "put"), $http.defaults = defaults, $http
        }]
    }

    function createXhr(method) {
        if (msie <= 8 && (!method.match(/^(get|post|head|put|delete|options)$/i) || !window.XMLHttpRequest)) return new window.ActiveXObject("Microsoft.XMLHTTP");
        if (window.XMLHttpRequest) return new window.XMLHttpRequest;
        throw minErr("$httpBackend")("noxhr", "This browser does not support XMLHttpRequest.")
    }

    function $HttpBackendProvider() {
        this.$get = ["$browser", "$window", "$document", function($browser, $window, $document) {
            return function($browser, createXhr, $browserDefer, callbacks, rawDocument) {
                return function(method, url, post, callback, headers, timeout, withCredentials, responseType) {
                    var status;
                    if ($browser.$$incOutstandingRequestCount(), url = url || $browser.url(), "jsonp" == lowercase(method)) {
                        var callbackId = "_" + (callbacks.counter++).toString(36);
                        callbacks[callbackId] = function(data) {
                            callbacks[callbackId].data = data, callbacks[callbackId].called = !0
                        };
                        var jsonpDone = function(url, callbackId, done) {
                            var script = rawDocument.createElement("script"),
                                _callback = null;
                            script.type = "text/javascript", script.src = url, script.async = !0, _callback = function(event) {
                                removeEventListenerFn(script, "load", _callback), removeEventListenerFn(script, "error", _callback), rawDocument.body.removeChild(script), script = null;
                                var status = -1,
                                    text = "unknown";
                                event && ("load" !== event.type || callbacks[callbackId].called || (event = {
                                    type: "error"
                                }), text = event.type, status = "error" === event.type ? 404 : 200), done && done(status, text)
                            }, addEventListenerFn(script, "load", _callback), addEventListenerFn(script, "error", _callback), msie <= 8 && (script.onreadystatechange = function() {
                                isString(script.readyState) && /loaded|complete/.test(script.readyState) && (script.onreadystatechange = null, _callback({
                                    type: "load"
                                }))
                            });
                            return rawDocument.body.appendChild(script), _callback
                        }(url.replace("JSON_CALLBACK", "angular.callbacks." + callbackId), callbackId, function(status, text) {
                            completeRequest(callback, status, callbacks[callbackId].data, "", text), callbacks[callbackId] = noop
                        })
                    } else {
                        var xhr = createXhr(method);
                        if (xhr.open(method, url, !0), forEach(headers, function(value, key) {
                                isDefined(value) && xhr.setRequestHeader(key, value)
                            }), xhr.onreadystatechange = function() {
                                if (xhr && 4 == xhr.readyState) {
                                    var responseHeaders = null,
                                        response = null,
                                        statusText = ""; - 1 !== status && (responseHeaders = xhr.getAllResponseHeaders(), response = "response" in xhr ? xhr.response : xhr.responseText), -1 === status && msie < 10 || (statusText = xhr.statusText), completeRequest(callback, status || xhr.status, response, responseHeaders, statusText)
                                }
                            }, withCredentials && (xhr.withCredentials = !0), responseType) try {
                            xhr.responseType = responseType
                        } catch (e) {
                            if ("json" !== responseType) throw e
                        }
                        xhr.send(post || null)
                    }
                    if (0 < timeout) var timeoutId = $browserDefer(timeoutRequest, timeout);
                    else isPromiseLike(timeout) && timeout.then(timeoutRequest);

                    function timeoutRequest() {
                        status = -1, jsonpDone && jsonpDone(), xhr && xhr.abort()
                    }

                    function completeRequest(callback, status, response, headersString, statusText) {
                        timeoutId && $browserDefer.cancel(timeoutId), jsonpDone = xhr = null, 0 === status && (status = response ? 200 : "file" == urlResolve(url).protocol ? 404 : 0), callback(status = 1223 === status ? 204 : status, response, headersString, statusText = statusText || ""), $browser.$$completeOutstandingRequest(noop)
                    }
                }
            }($browser, createXhr, $browser.defer, $window.angular.callbacks, $document[0])
        }]
    }
    var $interpolateMinErr = minErr("$interpolate");

    function $InterpolateProvider() {
        var startSymbol = "{{",
            endSymbol = "}}";
        this.startSymbol = function(value) {
            return value ? (startSymbol = value, this) : startSymbol
        }, this.endSymbol = function(value) {
            return value ? (endSymbol = value, this) : endSymbol
        }, this.$get = ["$parse", "$exceptionHandler", "$sce", function($parse, $exceptionHandler, $sce) {
            var startSymbolLength = startSymbol.length,
                endSymbolLength = endSymbol.length;

            function $interpolate(text, mustHaveExpression, trustedContext) {
                for (var startIndex, endIndex, fn, exp, index = 0, parts = [], length = text.length, hasInterpolation = !1, concat = []; index < length;) - 1 != (startIndex = text.indexOf(startSymbol, index)) && -1 != (endIndex = text.indexOf(endSymbol, startIndex + startSymbolLength)) ? (index != startIndex && parts.push(text.substring(index, startIndex)), parts.push(fn = $parse(exp = text.substring(startIndex + startSymbolLength, endIndex))), fn.exp = exp, index = endIndex + endSymbolLength, hasInterpolation = !0) : (index != length && parts.push(text.substring(index)), index = length);
                if ((length = parts.length) || (parts.push(""), length = 1), trustedContext && 1 < parts.length) throw $interpolateMinErr("noconcat", "Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce", text);
                if (!mustHaveExpression || hasInterpolation) return concat.length = length, (fn = function(context) {
                    try {
                        for (var part, i = 0, ii = length; i < ii; i++) {
                            if ("function" == typeof(part = parts[i]))
                                if (part = part(context), null == (part = trustedContext ? $sce.getTrusted(trustedContext, part) : $sce.valueOf(part))) part = "";
                                else switch (_typeof(part)) {
                                    case "string":
                                        break;
                                    case "number":
                                        part = "" + part;
                                        break;
                                    default:
                                        part = toJson(part)
                                }
                            concat[i] = part
                        }
                        return concat.join("")
                    } catch (err) {
                        var newErr = $interpolateMinErr("interr", "Can't interpolate: {0}\n{1}", text, err.toString());
                        $exceptionHandler(newErr)
                    }
                }).exp = text, fn.parts = parts, fn
            }
            return $interpolate.startSymbol = function() {
                return startSymbol
            }, $interpolate.endSymbol = function() {
                return endSymbol
            }, $interpolate
        }]
    }

    function $IntervalProvider() {
        this.$get = ["$rootScope", "$window", "$q", function($rootScope, $window, $q) {
            var intervals = {};

            function interval(fn, delay, count, invokeApply) {
                var setInterval = $window.setInterval,
                    clearInterval = $window.clearInterval,
                    deferred = $q.defer(),
                    promise = deferred.promise,
                    iteration = 0,
                    skipApply = isDefined(invokeApply) && !invokeApply;
                return count = isDefined(count) ? count : 0, promise.then(null, null, fn), promise.$$intervalId = setInterval(function() {
                    deferred.notify(iteration++), 0 < count && count <= iteration && (deferred.resolve(iteration), clearInterval(promise.$$intervalId), delete intervals[promise.$$intervalId]), skipApply || $rootScope.$apply()
                }, delay), intervals[promise.$$intervalId] = deferred, promise
            }
            return interval.cancel = function(promise) {
                return !!(promise && promise.$$intervalId in intervals) && (intervals[promise.$$intervalId].reject("canceled"), $window.clearInterval(promise.$$intervalId), delete intervals[promise.$$intervalId], !0)
            }, interval
        }]
    }

    function $LocaleProvider() {
        this.$get = function() {
            return {
                id: "en-us",
                NUMBER_FORMATS: {
                    DECIMAL_SEP: ".",
                    GROUP_SEP: ",",
                    PATTERNS: [{
                        minInt: 1,
                        minFrac: 0,
                        maxFrac: 3,
                        posPre: "",
                        posSuf: "",
                        negPre: "-",
                        negSuf: "",
                        gSize: 3,
                        lgSize: 3
                    }, {
                        minInt: 1,
                        minFrac: 2,
                        maxFrac: 2,
                        posPre: "¤",
                        posSuf: "",
                        negPre: "(¤",
                        negSuf: ")",
                        gSize: 3,
                        lgSize: 3
                    }],
                    CURRENCY_SYM: "$"
                },
                DATETIME_FORMATS: {
                    MONTH: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),
                    SHORTMONTH: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
                    DAY: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
                    SHORTDAY: "Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),
                    AMPMS: ["AM", "PM"],
                    medium: "MMM d, y h:mm:ss a",
                    short: "M/d/yy h:mm a",
                    fullDate: "EEEE, MMMM d, y",
                    longDate: "MMMM d, y",
                    mediumDate: "MMM d, y",
                    shortDate: "M/d/yy",
                    mediumTime: "h:mm:ss a",
                    shortTime: "h:mm a"
                },
                pluralCat: function(num) {
                    return 1 === num ? "one" : "other"
                }
            }
        }
    }
    var PATH_MATCH = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
        DEFAULT_PORTS = {
            http: 80,
            https: 443,
            ftp: 21
        },
        $locationMinErr = minErr("$location");

    function encodePath(path) {
        for (var segments = path.split("/"), i = segments.length; i--;) segments[i] = encodeUriSegment(segments[i]);
        return segments.join("/")
    }

    function parseAbsoluteUrl(absoluteUrl, locationObj, appBase) {
        var parsedUrl = urlResolve(absoluteUrl, appBase);
        locationObj.$$protocol = parsedUrl.protocol, locationObj.$$host = parsedUrl.hostname, locationObj.$$port = int(parsedUrl.port) || DEFAULT_PORTS[parsedUrl.protocol] || null
    }

    function parseAppUrl(relativeUrl, locationObj, appBase) {
        var prefixed = "/" !== relativeUrl.charAt(0);
        prefixed && (relativeUrl = "/" + relativeUrl);
        var match = urlResolve(relativeUrl, appBase);
        locationObj.$$path = decodeURIComponent(prefixed && "/" === match.pathname.charAt(0) ? match.pathname.substring(1) : match.pathname), locationObj.$$search = parseKeyValue(match.search), locationObj.$$hash = decodeURIComponent(match.hash), locationObj.$$path && "/" != locationObj.$$path.charAt(0) && (locationObj.$$path = "/" + locationObj.$$path)
    }

    function beginsWith(begin, whole) {
        if (0 === whole.indexOf(begin)) return whole.substr(begin.length)
    }

    function stripHash(url) {
        var index = url.indexOf("#");
        return -1 == index ? url : url.substr(0, index)
    }

    function stripFile(url) {
        return url.substr(0, stripHash(url).lastIndexOf("/") + 1)
    }

    function LocationHtml5Url(appBase, basePrefix) {
        this.$$html5 = !0, basePrefix = basePrefix || "";
        var appBaseNoFile = stripFile(appBase);
        parseAbsoluteUrl(appBase, this, appBase), this.$$parse = function(url) {
            var pathUrl = beginsWith(appBaseNoFile, url);
            if (!isString(pathUrl)) throw $locationMinErr("ipthprfx", 'Invalid url "{0}", missing path prefix "{1}".', url, appBaseNoFile);
            parseAppUrl(pathUrl, this, appBase), this.$$path || (this.$$path = "/"), this.$$compose()
        }, this.$$compose = function() {
            var search = toKeyValue(this.$$search),
                hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash, this.$$absUrl = appBaseNoFile + this.$$url.substr(1)
        }, this.$$rewrite = function(url) {
            var appUrl, prevAppUrl;
            return (appUrl = beginsWith(appBase, url)) !== undefined ? (appUrl = beginsWith(basePrefix, prevAppUrl = appUrl)) !== undefined ? appBaseNoFile + (beginsWith("/", appUrl) || appUrl) : appBase + prevAppUrl : (appUrl = beginsWith(appBaseNoFile, url)) !== undefined ? appBaseNoFile + appUrl : appBaseNoFile == url + "/" ? appBaseNoFile : void 0
        }
    }

    function LocationHashbangUrl(appBase, hashPrefix) {
        var appBaseNoFile = stripFile(appBase);
        parseAbsoluteUrl(appBase, this, appBase), this.$$parse = function(url) {
            var withoutBaseUrl = beginsWith(appBase, url) || beginsWith(appBaseNoFile, url),
                withoutHashUrl = "#" == withoutBaseUrl.charAt(0) ? beginsWith(hashPrefix, withoutBaseUrl) : this.$$html5 ? withoutBaseUrl : "";
            if (!isString(withoutHashUrl)) throw $locationMinErr("ihshprfx", 'Invalid url "{0}", missing hash prefix "{1}".', url, hashPrefix);
            parseAppUrl(withoutHashUrl, this, appBase), this.$$path = function(path, url, base) {
                var firstPathSegmentMatch, windowsFilePathExp = /^\/[A-Z]:(\/.*)/;
                0 === url.indexOf(base) && (url = url.replace(base, ""));
                if (windowsFilePathExp.exec(url)) return path;
                return (firstPathSegmentMatch = windowsFilePathExp.exec(path)) ? firstPathSegmentMatch[1] : path
            }(this.$$path, withoutHashUrl, appBase), this.$$compose()
        }, this.$$compose = function() {
            var search = toKeyValue(this.$$search),
                hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash, this.$$absUrl = appBase + (this.$$url ? hashPrefix + this.$$url : "")
        }, this.$$rewrite = function(url) {
            if (stripHash(appBase) == stripHash(url)) return url
        }
    }

    function LocationHashbangInHtml5Url(appBase, hashPrefix) {
        this.$$html5 = !0, LocationHashbangUrl.apply(this, arguments);
        var appBaseNoFile = stripFile(appBase);
        this.$$rewrite = function(url) {
            var appUrl;
            return appBase == stripHash(url) ? url : (appUrl = beginsWith(appBaseNoFile, url)) ? appBase + hashPrefix + appUrl : appBaseNoFile === url + "/" ? appBaseNoFile : void 0
        }, this.$$compose = function() {
            var search = toKeyValue(this.$$search),
                hash = this.$$hash ? "#" + encodeUriSegment(this.$$hash) : "";
            this.$$url = encodePath(this.$$path) + (search ? "?" + search : "") + hash, this.$$absUrl = appBase + hashPrefix + this.$$url
        }
    }

    function locationGetter(property) {
        return function() {
            return this[property]
        }
    }

    function locationGetterSetter(property, preprocess) {
        return function(value) {
            return isUndefined(value) ? this[property] : (this[property] = preprocess(value), this.$$compose(), this)
        }
    }

    function $LocationProvider() {
        var hashPrefix = "",
            html5Mode = !1;
        this.hashPrefix = function(prefix) {
            return isDefined(prefix) ? (hashPrefix = prefix, this) : hashPrefix
        }, this.html5Mode = function(mode) {
            return isDefined(mode) ? (html5Mode = mode, this) : html5Mode
        }, this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", function($rootScope, $browser, $sniffer, $rootElement) {
            var $location, LocationMode, appBase, url, baseHref = $browser.baseHref(),
                initialUrl = $browser.url();
            LocationMode = html5Mode ? (appBase = (url = initialUrl).substring(0, url.indexOf("/", url.indexOf("//") + 2)) + (baseHref || "/"), $sniffer.history ? LocationHtml5Url : LocationHashbangInHtml5Url) : (appBase = stripHash(initialUrl), LocationHashbangUrl), ($location = new LocationMode(appBase, "#" + hashPrefix)).$$parse($location.$$rewrite(initialUrl));
            var IGNORE_URI_REGEXP = /^\s*(javascript|mailto):/i;
            $rootElement.on("click", function(event) {
                if (!event.ctrlKey && !event.metaKey && 2 != event.which) {
                    for (var elm = jqLite(event.target);
                        "a" !== lowercase(elm[0].nodeName);)
                        if (elm[0] === $rootElement[0] || !(elm = elm.parent())[0]) return;
                    var absHref = elm.prop("href");
                    if (isObject(absHref) && "[object SVGAnimatedString]" === absHref.toString() && (absHref = urlResolve(absHref.animVal).href), !IGNORE_URI_REGEXP.test(absHref)) {
                        if (LocationMode === LocationHashbangInHtml5Url) {
                            var href = elm.attr("href") || elm.attr("xlink:href");
                            if (href.indexOf("://") < 0) {
                                var prefix = "#" + hashPrefix;
                                if ("/" == href[0]) absHref = appBase + prefix + href;
                                else if ("#" == href[0]) absHref = appBase + prefix + ($location.path() || "/") + href;
                                else {
                                    for (var stack = $location.path().split("/"), parts = href.split("/"), i = 0; i < parts.length; i++) "." != parts[i] && (".." == parts[i] ? stack.pop() : parts[i].length && stack.push(parts[i]));
                                    absHref = appBase + prefix + stack.join("/")
                                }
                            }
                        }
                        var rewrittenUrl = $location.$$rewrite(absHref);
                        absHref && !elm.attr("target") && rewrittenUrl && !event.isDefaultPrevented() && (event.preventDefault(), rewrittenUrl != $browser.url() && ($location.$$parse(rewrittenUrl), $rootScope.$apply(), window.angular["ff-684208-preventDefault"] = !0))
                    }
                }
            }), $location.absUrl() != initialUrl && $browser.url($location.absUrl(), !0), $browser.onUrlChange(function(newUrl) {
                $location.absUrl() != newUrl && ($rootScope.$evalAsync(function() {
                    var oldUrl = $location.absUrl();
                    $location.$$parse(newUrl), $rootScope.$broadcast("$locationChangeStart", newUrl, oldUrl).defaultPrevented ? ($location.$$parse(oldUrl), $browser.url(oldUrl)) : afterLocationChange(oldUrl)
                }), $rootScope.$$phase || $rootScope.$digest())
            });
            var changeCounter = 0;
            return $rootScope.$watch(function() {
                var oldUrl = $browser.url(),
                    currentReplace = $location.$$replace;
                return changeCounter && oldUrl == $location.absUrl() || (changeCounter++, $rootScope.$evalAsync(function() {
                    $rootScope.$broadcast("$locationChangeStart", $location.absUrl(), oldUrl).defaultPrevented ? $location.$$parse(oldUrl) : ($browser.url($location.absUrl(), currentReplace), afterLocationChange(oldUrl))
                })), $location.$$replace = !1, changeCounter
            }), $location;

            function afterLocationChange(oldUrl) {
                $rootScope.$broadcast("$locationChangeSuccess", $location.absUrl(), oldUrl)
            }
        }]
    }

    function $LogProvider() {
        var debug = !0,
            self = this;
        this.debugEnabled = function(flag) {
            return isDefined(flag) ? (debug = flag, this) : debug
        }, this.$get = ["$window", function($window) {
            return {
                log: consoleLog("log"),
                info: consoleLog("info"),
                warn: consoleLog("warn"),
                error: consoleLog("error"),
                debug: (fn = consoleLog("debug"), function() {
                    debug && fn.apply(self, arguments)
                })
            };
            var fn;

            function consoleLog(type) {
                var console = $window.console || {},
                    logFn = console[type] || console.log || noop,
                    hasApply = !1;
                try {
                    hasApply = !!logFn.apply
                } catch (e) {}
                return hasApply ? function() {
                    var args = [];
                    return forEach(arguments, function(arg) {
                        args.push(function(arg) {
                            return arg instanceof Error && (arg.stack ? arg = arg.message && -1 === arg.stack.indexOf(arg.message) ? "Error: " + arg.message + "\n" + arg.stack : arg.stack : arg.sourceURL && (arg = arg.message + "\n" + arg.sourceURL + ":" + arg.line)), arg
                        }(arg))
                    }), logFn.apply(console, args)
                } : function(arg1, arg2) {
                    logFn(arg1, null == arg2 ? "" : arg2)
                }
            }
        }]
    }
    LocationHashbangInHtml5Url.prototype = LocationHashbangUrl.prototype = LocationHtml5Url.prototype = {
        $$html5: !1,
        $$replace: !1,
        absUrl: locationGetter("$$absUrl"),
        url: function(_url, replace) {
            if (isUndefined(_url)) return this.$$url;
            var match = PATH_MATCH.exec(_url);
            return match[1] && this.path(decodeURIComponent(match[1])), (match[2] || match[1]) && this.search(match[3] || ""), this.hash(match[5] || "", replace), this
        },
        protocol: locationGetter("$$protocol"),
        host: locationGetter("$$host"),
        port: locationGetter("$$port"),
        path: locationGetterSetter("$$path", function(path) {
            return "/" == path.charAt(0) ? path : "/" + path
        }),
        search: function(_search, paramValue) {
            switch (arguments.length) {
                case 0:
                    return this.$$search;
                case 1:
                    if (isString(_search)) this.$$search = parseKeyValue(_search);
                    else {
                        if (!isObject(_search)) throw $locationMinErr("isrcharg", "The first argument of the `$location#search()` call must be a string or an object.");
                        forEach(_search, function(value, key) {
                            null == value && delete _search[key]
                        }), this.$$search = _search
                    }
                    break;
                default:
                    isUndefined(paramValue) || null === paramValue ? delete this.$$search[_search] : this.$$search[_search] = paramValue
            }
            return this.$$compose(), this
        },
        hash: locationGetterSetter("$$hash", identity),
        replace: function() {
            return this.$$replace = !0, this
        }
    };
    var promiseWarning, $parseMinErr = minErr("$parse"),
        promiseWarningCache = {};

    function ensureSafeMemberName(name, fullExpression) {
        if ("__defineGetter__" === name || "__defineSetter__" === name || "__lookupGetter__" === name || "__lookupSetter__" === name || "__proto__" === name) throw $parseMinErr("isecfld", "Attempting to access a disallowed field in Angular expressions! Expression: {0}", fullExpression);
        return name
    }

    function ensureSafeObject(obj, fullExpression) {
        if (obj) {
            if (obj.constructor === obj) throw $parseMinErr("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj.document && obj.location && obj.alert && obj.setInterval) throw $parseMinErr("isecwindow", "Referencing the Window in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj.children && (obj.nodeName || obj.prop && obj.attr && obj.find)) throw $parseMinErr("isecdom", "Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}", fullExpression);
            if (obj === Object) throw $parseMinErr("isecobj", "Referencing Object in Angular expressions is disallowed! Expression: {0}", fullExpression)
        }
        return obj
    }
    var CALL = Function.prototype.call,
        APPLY = Function.prototype.apply,
        BIND = Function.prototype.bind;
    var OPERATORS = {
            null: function() {
                return null
            },
            true: function() {
                return !0
            },
            false: function() {
                return !1
            },
            undefined: noop,
            "+": function(self, locals, a, b) {
                return a = a(self, locals), b = b(self, locals), isDefined(a) ? isDefined(b) ? a + b : a : isDefined(b) ? b : undefined
            },
            "-": function(self, locals, a, b) {
                return a = a(self, locals), b = b(self, locals), (isDefined(a) ? a : 0) - (isDefined(b) ? b : 0)
            },
            "*": function(self, locals, a, b) {
                return a(self, locals) * b(self, locals)
            },
            "/": function(self, locals, a, b) {
                return a(self, locals) / b(self, locals)
            },
            "%": function(self, locals, a, b) {
                return a(self, locals) % b(self, locals)
            },
            "^": function(self, locals, a, b) {
                return a(self, locals) ^ b(self, locals)
            },
            "=": noop,
            "===": function(self, locals, a, b) {
                return a(self, locals) === b(self, locals)
            },
            "!==": function(self, locals, a, b) {
                return a(self, locals) !== b(self, locals)
            },
            "==": function(self, locals, a, b) {
                return a(self, locals) == b(self, locals)
            },
            "!=": function(self, locals, a, b) {
                return a(self, locals) != b(self, locals)
            },
            "<": function(self, locals, a, b) {
                return a(self, locals) < b(self, locals)
            },
            ">": function(self, locals, a, b) {
                return a(self, locals) > b(self, locals)
            },
            "<=": function(self, locals, a, b) {
                return a(self, locals) <= b(self, locals)
            },
            ">=": function(self, locals, a, b) {
                return a(self, locals) >= b(self, locals)
            },
            "&&": function(self, locals, a, b) {
                return a(self, locals) && b(self, locals)
            },
            "||": function(self, locals, a, b) {
                return a(self, locals) || b(self, locals)
            },
            "&": function(self, locals, a, b) {
                return a(self, locals) & b(self, locals)
            },
            "|": function(self, locals, a, b) {
                return b(self, locals)(self, locals, a(self, locals))
            },
            "!": function(self, locals, a) {
                return !a(self, locals)
            }
        },
        ESCAPE = {
            n: "\n",
            f: "\f",
            r: "\r",
            t: "\t",
            v: "\v",
            "'": "'",
            '"': '"'
        },
        Lexer = function(options) {
            this.options = options
        };
    Lexer.prototype = {
        constructor: Lexer,
        lex: function(text) {
            for (this.text = text, this.index = 0, this.ch = undefined, this.lastCh = ":", this.tokens = []; this.index < this.text.length;) {
                if (this.ch = this.text.charAt(this.index), this.is("\"'")) this.readString(this.ch);
                else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek())) this.readNumber();
                else if (this.isIdent(this.ch)) this.readIdent();
                else if (this.is("(){}[].,;:?")) this.tokens.push({
                    index: this.index,
                    text: this.ch
                }), this.index++;
                else {
                    if (this.isWhitespace(this.ch)) {
                        this.index++;
                        continue
                    }
                    var ch2 = this.ch + this.peek(),
                        ch3 = ch2 + this.peek(2),
                        fn = OPERATORS[this.ch],
                        fn2 = OPERATORS[ch2],
                        fn3 = OPERATORS[ch3];
                    fn3 ? (this.tokens.push({
                        index: this.index,
                        text: ch3,
                        fn: fn3
                    }), this.index += 3) : fn2 ? (this.tokens.push({
                        index: this.index,
                        text: ch2,
                        fn: fn2
                    }), this.index += 2) : fn ? (this.tokens.push({
                        index: this.index,
                        text: this.ch,
                        fn: fn
                    }), this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1)
                }
                this.lastCh = this.ch
            }
            return this.tokens
        },
        is: function(chars) {
            return -1 !== chars.indexOf(this.ch)
        },
        was: function(chars) {
            return -1 !== chars.indexOf(this.lastCh)
        },
        peek: function(i) {
            var num = i || 1;
            return this.index + num < this.text.length && this.text.charAt(this.index + num)
        },
        isNumber: function(ch) {
            return "0" <= ch && ch <= "9"
        },
        isWhitespace: function(ch) {
            return " " === ch || "\r" === ch || "\t" === ch || "\n" === ch || "\v" === ch || " " === ch
        },
        isIdent: function(ch) {
            return "a" <= ch && ch <= "z" || "A" <= ch && ch <= "Z" || "_" === ch || "$" === ch
        },
        isExpOperator: function(ch) {
            return "-" === ch || "+" === ch || this.isNumber(ch)
        },
        throwError: function(error, start, end) {
            end = end || this.index;
            var colStr = isDefined(start) ? "s " + start + "-" + this.index + " [" + this.text.substring(start, end) + "]" : " " + end;
            throw $parseMinErr("lexerr", "Lexer Error: {0} at column{1} in expression [{2}].", error, colStr, this.text)
        },
        readNumber: function() {
            for (var number = "", start = this.index; this.index < this.text.length;) {
                var ch = lowercase(this.text.charAt(this.index));
                if ("." == ch || this.isNumber(ch)) number += ch;
                else {
                    var peekCh = this.peek();
                    if ("e" == ch && this.isExpOperator(peekCh)) number += ch;
                    else if (this.isExpOperator(ch) && peekCh && this.isNumber(peekCh) && "e" == number.charAt(number.length - 1)) number += ch;
                    else {
                        if (!this.isExpOperator(ch) || peekCh && this.isNumber(peekCh) || "e" != number.charAt(number.length - 1)) break;
                        this.throwError("Invalid exponent")
                    }
                }
                this.index++
            }
            number *= 1, this.tokens.push({
                index: start,
                text: number,
                literal: !0,
                constant: !0,
                fn: function() {
                    return number
                }
            })
        },
        readIdent: function() {
            for (var lastDot, peekIndex, methodName, ch, parser = this, ident = "", start = this.index; this.index < this.text.length && ("." === (ch = this.text.charAt(this.index)) || this.isIdent(ch) || this.isNumber(ch));) "." === ch && (lastDot = this.index), ident += ch, this.index++;
            if (lastDot)
                for (peekIndex = this.index; peekIndex < this.text.length;) {
                    if ("(" === (ch = this.text.charAt(peekIndex))) {
                        methodName = ident.substr(lastDot - start + 1), ident = ident.substr(0, lastDot - start), this.index = peekIndex;
                        break
                    }
                    if (!this.isWhitespace(ch)) break;
                    peekIndex++
                }
            var token = {
                index: start,
                text: ident
            };
            if (OPERATORS.hasOwnProperty(ident)) token.fn = OPERATORS[ident], token.literal = !0, token.constant = !0;
            else {
                var getter = getterFn(ident, this.options, this.text);
                token.fn = extend(function(self, locals) {
                    return getter(self, locals)
                }, {
                    assign: function(self, value) {
                        return setter(self, ident, value, parser.text, parser.options)
                    }
                })
            }
            this.tokens.push(token), methodName && (this.tokens.push({
                index: lastDot,
                text: "."
            }), this.tokens.push({
                index: lastDot + 1,
                text: methodName
            }))
        },
        readString: function(quote) {
            var start = this.index;
            this.index++;
            for (var string = "", rawString = quote, escape = !1; this.index < this.text.length;) {
                var ch = this.text.charAt(this.index);
                if (rawString += ch, escape) {
                    if ("u" === ch) {
                        var hex = this.text.substring(this.index + 1, this.index + 5);
                        hex.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + hex + "]"), this.index += 4, string += String.fromCharCode(parseInt(hex, 16))
                    } else {
                        string += ESCAPE[ch] || ch
                    }
                    escape = !1
                } else if ("\\" === ch) escape = !0;
                else {
                    if (ch === quote) return this.index++, void this.tokens.push({
                        index: start,
                        text: rawString,
                        string: string,
                        literal: !0,
                        constant: !0,
                        fn: function() {
                            return string
                        }
                    });
                    string += ch
                }
                this.index++
            }
            this.throwError("Unterminated quote", start)
        }
    };
    var Parser = function(lexer, $filter, options) {
        this.lexer = lexer, this.$filter = $filter, this.options = options
    };

    function setter(obj, path, setValue, fullExp, options) {
        options = options || {};
        for (var key, element = path.split("."), i = 0; 1 < element.length; i++) {
            var propertyObj = obj[key = ensureSafeMemberName(element.shift(), fullExp)];
            propertyObj || (propertyObj = {}, obj[key] = propertyObj), (obj = propertyObj).then && options.unwrapPromises && (promiseWarning(fullExp), "$$v" in obj || function(promise) {
                promise.then(function(val) {
                    promise.$$v = val
                })
            }(obj), obj.$$v === undefined && (obj.$$v = {}), obj = obj.$$v)
        }
        return key = ensureSafeMemberName(element.shift(), fullExp), ensureSafeObject(obj, fullExp), ensureSafeObject(obj[key], fullExp), obj[key] = setValue
    }
    Parser.ZERO = extend(function() {
        return 0
    }, {
        constant: !0
    }), Parser.prototype = {
        constructor: Parser,
        parse: function(text) {
            this.text = text, this.tokens = this.lexer.lex(text);
            var value = this.statements();
            return 0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]), value.literal = !!value.literal, value.constant = !!value.constant, value
        },
        primary: function() {
            var primary, next, context;
            if (this.expect("(")) primary = this.filterChain(), this.consume(")");
            else if (this.expect("[")) primary = this.arrayDeclaration();
            else if (this.expect("{")) primary = this.object();
            else {
                var token = this.expect();
                primary = token.fn, primary || this.throwError("not a primary expression", token), primary.literal = !!token.literal, primary.constant = !!token.constant
            }
            for (; next = this.expect("(", "[", ".");) "(" === next.text ? (primary = this.functionCall(primary, context), context = null) : "[" === next.text ? (context = primary, primary = this.objectIndex(primary)) : "." === next.text ? (context = primary, primary = this.fieldAccess(primary)) : this.throwError("IMPOSSIBLE");
            return primary
        },
        throwError: function(msg, token) {
            throw $parseMinErr("syntax", "Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].", token.text, msg, token.index + 1, this.text, this.text.substring(token.index))
        },
        peekToken: function() {
            if (0 === this.tokens.length) throw $parseMinErr("ueoe", "Unexpected end of expression: {0}", this.text);
            return this.tokens[0]
        },
        peek: function(e1, e2, e3, e4) {
            if (0 < this.tokens.length) {
                var token = this.tokens[0],
                    t = token.text;
                if (t === e1 || t === e2 || t === e3 || t === e4 || !e1 && !e2 && !e3 && !e4) return token
            }
            return !1
        },
        expect: function(e1, e2, e3, e4) {
            var token = this.peek(e1, e2, e3, e4);
            return !!token && (this.tokens.shift(), token)
        },
        consume: function(e1) {
            this.expect(e1) || this.throwError("is unexpected, expecting [" + e1 + "]", this.peek())
        },
        unaryFn: function(fn, right) {
            return extend(function(self, locals) {
                return fn(self, locals, right)
            }, {
                constant: right.constant
            })
        },
        ternaryFn: function(left, middle, right) {
            return extend(function(self, locals) {
                return left(self, locals) ? middle(self, locals) : right(self, locals)
            }, {
                constant: left.constant && middle.constant && right.constant
            })
        },
        binaryFn: function(left, fn, right) {
            return extend(function(self, locals) {
                return fn(self, locals, left, right)
            }, {
                constant: left.constant && right.constant
            })
        },
        statements: function() {
            for (var statements = [];;)
                if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && statements.push(this.filterChain()), !this.expect(";")) return 1 === statements.length ? statements[0] : function(self, locals) {
                    for (var value, i = 0; i < statements.length; i++) {
                        var statement = statements[i];
                        statement && (value = statement(self, locals))
                    }
                    return value
                }
        },
        filterChain: function() {
            for (var token, left = this.expression();;) {
                if (!(token = this.expect("|"))) return left;
                left = this.binaryFn(left, token.fn, this.filter())
            }
        },
        filter: function() {
            for (var token = this.expect(), fn = this.$filter(token.text), argsFn = [];;) {
                if (!(token = this.expect(":"))) {
                    var fnInvoke = function(self, locals, input) {
                        for (var args = [input], i = 0; i < argsFn.length; i++) args.push(argsFn[i](self, locals));
                        return fn.apply(self, args)
                    };
                    return function() {
                        return fnInvoke
                    }
                }
                argsFn.push(this.expression())
            }
        },
        expression: function() {
            return this.assignment()
        },
        assignment: function() {
            var right, token, left = this.ternary();
            return (token = this.expect("=")) ? (left.assign || this.throwError("implies assignment but [" + this.text.substring(0, token.index) + "] can not be assigned to", token), right = this.ternary(), function(scope, locals) {
                return left.assign(scope, right(scope, locals), locals)
            }) : left
        },
        ternary: function() {
            var middle, token, left = this.logicalOR();
            return (token = this.expect("?")) ? (middle = this.assignment(), (token = this.expect(":")) ? this.ternaryFn(left, middle, this.assignment()) : void this.throwError("expected :", token)) : left
        },
        logicalOR: function() {
            for (var token, left = this.logicalAND();;) {
                if (!(token = this.expect("||"))) return left;
                left = this.binaryFn(left, token.fn, this.logicalAND())
            }
        },
        logicalAND: function() {
            var token, left = this.equality();
            return (token = this.expect("&&")) && (left = this.binaryFn(left, token.fn, this.logicalAND())), left
        },
        equality: function() {
            var token, left = this.relational();
            return (token = this.expect("==", "!=", "===", "!==")) && (left = this.binaryFn(left, token.fn, this.equality())), left
        },
        relational: function() {
            var token, left = this.additive();
            return (token = this.expect("<", ">", "<=", ">=")) && (left = this.binaryFn(left, token.fn, this.relational())), left
        },
        additive: function() {
            for (var token, left = this.multiplicative(); token = this.expect("+", "-");) left = this.binaryFn(left, token.fn, this.multiplicative());
            return left
        },
        multiplicative: function() {
            for (var token, left = this.unary(); token = this.expect("*", "/", "%");) left = this.binaryFn(left, token.fn, this.unary());
            return left
        },
        unary: function() {
            var token;
            return this.expect("+") ? this.primary() : (token = this.expect("-")) ? this.binaryFn(Parser.ZERO, token.fn, this.unary()) : (token = this.expect("!")) ? this.unaryFn(token.fn, this.unary()) : this.primary()
        },
        fieldAccess: function(object) {
            var parser = this,
                field = this.expect().text,
                getter = getterFn(field, this.options, this.text);
            return extend(function(scope, locals, self) {
                return getter(self || object(scope, locals))
            }, {
                assign: function(scope, value, locals) {
                    var o = object(scope, locals);
                    return o || object.assign(scope, o = {}), setter(o, field, value, parser.text, parser.options)
                }
            })
        },
        objectIndex: function(obj) {
            var parser = this,
                indexFn = this.expression();
            return this.consume("]"), extend(function(self, locals) {
                var v, p, o = obj(self, locals),
                    i = indexFn(self, locals);
                return ensureSafeMemberName(i, parser.text), o ? ((v = ensureSafeObject(o[i], parser.text)) && v.then && parser.options.unwrapPromises && ("$$v" in (p = v) || (p.$$v = undefined, p.then(function(val) {
                    p.$$v = val
                })), v = v.$$v), v) : undefined
            }, {
                assign: function(self, value, locals) {
                    var key = ensureSafeMemberName(indexFn(self, locals), parser.text),
                        o = ensureSafeObject(obj(self, locals), parser.text);
                    return o || obj.assign(self, o = {}), o[key] = value
                }
            })
        },
        functionCall: function(fn, contextGetter) {
            var argsFn = [];
            if (")" !== this.peekToken().text)
                for (; argsFn.push(this.expression()), this.expect(","););
            this.consume(")");
            var parser = this;
            return function(scope, locals) {
                for (var args = [], context = contextGetter ? contextGetter(scope, locals) : scope, i = 0; i < argsFn.length; i++) args.push(argsFn[i](scope, locals));
                var fnPtr = fn(scope, locals, context) || noop;
                return ensureSafeObject(context, parser.text),
                    function(obj, fullExpression) {
                        if (obj) {
                            if (obj.constructor === obj) throw $parseMinErr("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", fullExpression);
                            if (obj === CALL || obj === APPLY || BIND && obj === BIND) throw $parseMinErr("isecff", "Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}", fullExpression)
                        }
                    }(fnPtr, parser.text), ensureSafeObject(fnPtr.apply ? fnPtr.apply(context, args) : fnPtr(args[0], args[1], args[2], args[3], args[4]), parser.text)
            }
        },
        arrayDeclaration: function() {
            var elementFns = [],
                allConstant = !0;
            if ("]" !== this.peekToken().text)
                do {
                    if (this.peek("]")) break;
                    var elementFn = this.expression();
                    elementFns.push(elementFn), elementFn.constant || (allConstant = !1)
                } while (this.expect(","));
            return this.consume("]"), extend(function(self, locals) {
                for (var array = [], i = 0; i < elementFns.length; i++) array.push(elementFns[i](self, locals));
                return array
            }, {
                literal: !0,
                constant: allConstant
            })
        },
        object: function() {
            var keyValues = [],
                allConstant = !0;
            if ("}" !== this.peekToken().text)
                do {
                    if (this.peek("}")) break;
                    var token = this.expect(),
                        key = token.string || token.text;
                    this.consume(":");
                    var value = this.expression();
                    keyValues.push({
                        key: key,
                        value: value
                    }), value.constant || (allConstant = !1)
                } while (this.expect(","));
            return this.consume("}"), extend(function(self, locals) {
                for (var object = {}, i = 0; i < keyValues.length; i++) {
                    var keyValue = keyValues[i];
                    object[keyValue.key] = keyValue.value(self, locals)
                }
                return object
            }, {
                literal: !0,
                constant: allConstant
            })
        }
    };
    var getterFnCache = {};

    function cspSafeGetterFn(key0, key1, key2, key3, key4, fullExp, options) {
        return ensureSafeMemberName(key0, fullExp), ensureSafeMemberName(key1, fullExp), ensureSafeMemberName(key2, fullExp), ensureSafeMemberName(key3, fullExp), ensureSafeMemberName(key4, fullExp), options.unwrapPromises ? function(scope, locals) {
            var promise, pathVal = locals && locals.hasOwnProperty(key0) ? locals : scope;
            return null == pathVal ? pathVal : ((pathVal = pathVal[key0]) && pathVal.then && (promiseWarning(fullExp), "$$v" in pathVal || ((promise = pathVal).$$v = undefined, promise.then(function(val) {
                promise.$$v = val
            })), pathVal = pathVal.$$v), key1 ? null == pathVal ? undefined : ((pathVal = pathVal[key1]) && pathVal.then && (promiseWarning(fullExp), "$$v" in pathVal || ((promise = pathVal).$$v = undefined, promise.then(function(val) {
                promise.$$v = val
            })), pathVal = pathVal.$$v), key2 ? null == pathVal ? undefined : ((pathVal = pathVal[key2]) && pathVal.then && (promiseWarning(fullExp), "$$v" in pathVal || ((promise = pathVal).$$v = undefined, promise.then(function(val) {
                promise.$$v = val
            })), pathVal = pathVal.$$v), key3 ? null == pathVal ? undefined : ((pathVal = pathVal[key3]) && pathVal.then && (promiseWarning(fullExp), "$$v" in pathVal || ((promise = pathVal).$$v = undefined, promise.then(function(val) {
                promise.$$v = val
            })), pathVal = pathVal.$$v), key4 ? null == pathVal ? undefined : ((pathVal = pathVal[key4]) && pathVal.then && (promiseWarning(fullExp), "$$v" in pathVal || ((promise = pathVal).$$v = undefined, promise.then(function(val) {
                promise.$$v = val
            })), pathVal = pathVal.$$v), pathVal) : pathVal) : pathVal) : pathVal) : pathVal)
        } : function(scope, locals) {
            var pathVal = locals && locals.hasOwnProperty(key0) ? locals : scope;
            return null == pathVal ? pathVal : (pathVal = pathVal[key0], key1 ? null == pathVal ? undefined : (pathVal = pathVal[key1], key2 ? null == pathVal ? undefined : (pathVal = pathVal[key2], key3 ? null == pathVal ? undefined : (pathVal = pathVal[key3], key4 ? null == pathVal ? undefined : pathVal = pathVal[key4] : pathVal) : pathVal) : pathVal) : pathVal)
        }
    }

    function getterFn(path, options, fullExp) {
        if (getterFnCache.hasOwnProperty(path)) return getterFnCache[path];
        var fn, pathKeys = path.split("."),
            pathKeysLength = pathKeys.length;
        if (options.csp) fn = pathKeysLength < 6 ? cspSafeGetterFn(pathKeys[0], pathKeys[1], pathKeys[2], pathKeys[3], pathKeys[4], fullExp, options) : function(scope, locals) {
            for (var val, i = 0; val = cspSafeGetterFn(pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], fullExp, options)(scope, locals), locals = undefined, scope = val, i < pathKeysLength;);
            return val
        };
        else {
            var code = "var p;\n";
            forEach(pathKeys, function(key, index) {
                ensureSafeMemberName(key, fullExp), code += "if(s == null) return undefined;\ns=" + (index ? "s" : '((k&&k.hasOwnProperty("' + key + '"))?k:s)') + '["' + key + '"];\n' + (options.unwrapPromises ? 'if (s && s.then) {\n pw("' + fullExp.replace(/(["\r\n])/g, "\\$1") + '");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n' : "")
            }), code += "return s;";
            var evaledFnGetter = new Function("s", "k", "pw", code);
            evaledFnGetter.toString = valueFn(code), fn = options.unwrapPromises ? function(scope, locals) {
                return evaledFnGetter(scope, locals, promiseWarning)
            } : evaledFnGetter
        }
        return "hasOwnProperty" !== path && (getterFnCache[path] = fn), fn
    }

    function $ParseProvider() {
        var cache = {},
            $parseOptions = {
                csp: !1,
                unwrapPromises: !1,
                logPromiseWarnings: !0
            };
        this.unwrapPromises = function(value) {
            return isDefined(value) ? ($parseOptions.unwrapPromises = !!value, this) : $parseOptions.unwrapPromises
        }, this.logPromiseWarnings = function(value) {
            return isDefined(value) ? ($parseOptions.logPromiseWarnings = value, this) : $parseOptions.logPromiseWarnings
        }, this.$get = ["$filter", "$sniffer", "$log", function($filter, $sniffer, $log) {
            return $parseOptions.csp = $sniffer.csp, promiseWarning = function(fullExp) {
                    $parseOptions.logPromiseWarnings && !promiseWarningCache.hasOwnProperty(fullExp) && (promiseWarningCache[fullExp] = !0, $log.warn("[$parse] Promise found in the expression `" + fullExp + "`. Automatic unwrapping of promises in Angular expressions is deprecated."))
                },
                function(exp) {
                    var parsedExpression;
                    switch (_typeof(exp)) {
                        case "string":
                            if (cache.hasOwnProperty(exp)) return cache[exp];
                            var lexer = new Lexer($parseOptions);
                            return parsedExpression = new Parser(lexer, $filter, $parseOptions).parse(exp), "hasOwnProperty" !== exp && (cache[exp] = parsedExpression), parsedExpression;
                        case "function":
                            return exp;
                        default:
                            return noop
                    }
                }
        }]
    }

    function $QProvider() {
        this.$get = ["$rootScope", "$exceptionHandler", function($rootScope, $exceptionHandler) {
            return function(nextTick, exceptionHandler) {
                var defer = function defer() {
                        var value, deferred, pending = [];
                        return deferred = {
                            resolve: function(val) {
                                if (pending) {
                                    var callbacks = pending;
                                    pending = undefined, value = ref(val), callbacks.length && nextTick(function() {
                                        for (var callback, i = 0, ii = callbacks.length; i < ii; i++) callback = callbacks[i], value.then(callback[0], callback[1], callback[2])
                                    })
                                }
                            },
                            reject: function(reason) {
                                deferred.resolve(createInternalRejectedPromise(reason))
                            },
                            notify: function(progress) {
                                if (pending) {
                                    var callbacks = pending;
                                    pending.length && nextTick(function() {
                                        for (var i = 0, ii = callbacks.length; i < ii; i++) callbacks[i][2](progress)
                                    })
                                }
                            },
                            promise: {
                                then: function(callback, errback, progressback) {
                                    var result = defer(),
                                        wrappedCallback = function(value) {
                                            try {
                                                result.resolve((isFunction(callback) ? callback : defaultCallback)(value))
                                            } catch (e) {
                                                result.reject(e), exceptionHandler(e)
                                            }
                                        },
                                        wrappedErrback = function(reason) {
                                            try {
                                                result.resolve((isFunction(errback) ? errback : defaultErrback)(reason))
                                            } catch (e) {
                                                result.reject(e), exceptionHandler(e)
                                            }
                                        },
                                        wrappedProgressback = function(progress) {
                                            try {
                                                result.notify((isFunction(progressback) ? progressback : defaultCallback)(progress))
                                            } catch (e) {
                                                exceptionHandler(e)
                                            }
                                        };
                                    return pending ? pending.push([wrappedCallback, wrappedErrback, wrappedProgressback]) : value.then(wrappedCallback, wrappedErrback, wrappedProgressback), result.promise
                                },
                                catch: function(callback) {
                                    return this.then(null, callback)
                                },
                                finally: function(callback) {
                                    function makePromise(value, resolved) {
                                        var result = defer();
                                        return resolved ? result.resolve(value) : result.reject(value), result.promise
                                    }

                                    function handleCallback(value, isResolved) {
                                        var callbackOutput = null;
                                        try {
                                            callbackOutput = (callback || defaultCallback)()
                                        } catch (e) {
                                            return makePromise(e, !1)
                                        }
                                        return isPromiseLike(callbackOutput) ? callbackOutput.then(function() {
                                            return makePromise(value, isResolved)
                                        }, function(error) {
                                            return makePromise(error, !1)
                                        }) : makePromise(value, isResolved)
                                    }
                                    return this.then(function(value) {
                                        return handleCallback(value, !0)
                                    }, function(error) {
                                        return handleCallback(error, !1)
                                    })
                                }
                            }
                        }
                    },
                    ref = function(value) {
                        return isPromiseLike(value) ? value : {
                            then: function(callback) {
                                var result = defer();
                                return nextTick(function() {
                                    result.resolve(callback(value))
                                }), result.promise
                            }
                        }
                    },
                    reject = function(reason) {
                        var result = defer();
                        return result.reject(reason), result.promise
                    },
                    createInternalRejectedPromise = function(reason) {
                        return {
                            then: function(callback, errback) {
                                var result = defer();
                                return nextTick(function() {
                                    try {
                                        result.resolve((isFunction(errback) ? errback : defaultErrback)(reason))
                                    } catch (e) {
                                        result.reject(e), exceptionHandler(e)
                                    }
                                }), result.promise
                            }
                        }
                    };

                function defaultCallback(value) {
                    return value
                }

                function defaultErrback(reason) {
                    return reject(reason)
                }
                return {
                    defer: defer,
                    reject: reject,
                    when: function(value, callback, errback, progressback) {
                        var done, result = defer(),
                            wrappedCallback = function(value) {
                                try {
                                    return (isFunction(callback) ? callback : defaultCallback)(value)
                                } catch (e) {
                                    return exceptionHandler(e), reject(e)
                                }
                            },
                            wrappedErrback = function(reason) {
                                try {
                                    return (isFunction(errback) ? errback : defaultErrback)(reason)
                                } catch (e) {
                                    return exceptionHandler(e), reject(e)
                                }
                            },
                            wrappedProgressback = function(progress) {
                                try {
                                    return (isFunction(progressback) ? progressback : defaultCallback)(progress)
                                } catch (e) {
                                    exceptionHandler(e)
                                }
                            };
                        return nextTick(function() {
                            ref(value).then(function(value) {
                                done || (done = !0, result.resolve(ref(value).then(wrappedCallback, wrappedErrback, wrappedProgressback)))
                            }, function(reason) {
                                done || (done = !0, result.resolve(wrappedErrback(reason)))
                            }, function(progress) {
                                done || result.notify(wrappedProgressback(progress))
                            })
                        }), result.promise
                    },
                    all: function(promises) {
                        var deferred = defer(),
                            counter = 0,
                            results = isArray(promises) ? [] : {};
                        forEach(promises, function(promise, key) {
                            counter++, ref(promise).then(function(value) {
                                results.hasOwnProperty(key) || (results[key] = value, --counter || deferred.resolve(results))
                            }, function(reason) {
                                results.hasOwnProperty(key) || deferred.reject(reason)
                            })
                        }), 0 === counter && deferred.resolve(results);
                        return deferred.promise
                    }
                }
            }(function(callback) {
                $rootScope.$evalAsync(callback)
            }, $exceptionHandler)
        }]
    }

    function $$RAFProvider() {
        this.$get = ["$window", "$timeout", function($window, $timeout) {
            var requestAnimationFrame = $window.requestAnimationFrame || $window.webkitRequestAnimationFrame || $window.mozRequestAnimationFrame,
                cancelAnimationFrame = $window.cancelAnimationFrame || $window.webkitCancelAnimationFrame || $window.mozCancelAnimationFrame || $window.webkitCancelRequestAnimationFrame,
                rafSupported = !!requestAnimationFrame,
                raf = rafSupported ? function(fn) {
                    var id = requestAnimationFrame(fn);
                    return function() {
                        cancelAnimationFrame(id)
                    }
                } : function(fn) {
                    var timer = $timeout(fn, 16.66, !1);
                    return function() {
                        $timeout.cancel(timer)
                    }
                };
            return raf.supported = rafSupported, raf
        }]
    }

    function $RootScopeProvider() {
        var TTL = 10,
            $rootScopeMinErr = minErr("$rootScope"),
            lastDirtyWatch = null;
        this.digestTtl = function(value) {
            return arguments.length && (TTL = value), TTL
        }, this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function($injector, $exceptionHandler, $parse, $browser) {
            function Scope() {
                this.$id = nextUid(), this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null, this.this = this.$root = this, this.$$destroyed = !1, this.$$asyncQueue = [], this.$$postDigestQueue = [], this.$$listeners = {}, this.$$listenerCount = {}, this.$$isolateBindings = {}
            }
            Scope.prototype = {
                constructor: Scope,
                $new: function(isolate) {
                    var child;
                    return isolate ? ((child = new Scope).$root = this.$root, child.$$asyncQueue = this.$$asyncQueue, child.$$postDigestQueue = this.$$postDigestQueue) : (this.$$childScopeClass || (this.$$childScopeClass = function() {
                        this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null, this.$$listeners = {}, this.$$listenerCount = {}, this.$id = nextUid(), this.$$childScopeClass = null
                    }, this.$$childScopeClass.prototype = this), child = new this.$$childScopeClass), (child.this = child).$parent = this, child.$$prevSibling = this.$$childTail, this.$$childHead ? (this.$$childTail.$$nextSibling = child, this.$$childTail = child) : this.$$childHead = this.$$childTail = child, child
                },
                $watch: function(watchExp, listener, objectEquality) {
                    var get = compileToFn(watchExp, "watch"),
                        array = this.$$watchers,
                        watcher = {
                            fn: listener,
                            last: initWatchVal,
                            get: get,
                            exp: watchExp,
                            eq: !!objectEquality
                        };
                    if (lastDirtyWatch = null, !isFunction(listener)) {
                        var listenFn = compileToFn(listener || noop, "listener");
                        watcher.fn = function(newVal, oldVal, scope) {
                            listenFn(scope)
                        }
                    }
                    if ("string" == typeof watchExp && get.constant) {
                        var originalFn = watcher.fn;
                        watcher.fn = function(newVal, oldVal, scope) {
                            originalFn.call(this, newVal, oldVal, scope), arrayRemove(array, watcher)
                        }
                    }
                    return array || (array = this.$$watchers = []), array.unshift(watcher),
                        function() {
                            arrayRemove(array, watcher), lastDirtyWatch = null
                        }
                },
                $watchCollection: function(obj, listener) {
                    var newValue, oldValue, veryOldValue, self = this,
                        trackVeryOldValue = 1 < listener.length,
                        changeDetected = 0,
                        objGetter = $parse(obj),
                        internalArray = [],
                        internalObject = {},
                        initRun = !0,
                        oldLength = 0;
                    return this.$watch(function() {
                        var newLength, key;
                        if (isObject(newValue = objGetter(self)))
                            if (isArrayLike(newValue)) {
                                oldValue !== internalArray && (oldLength = (oldValue = internalArray).length = 0, changeDetected++), newLength = newValue.length, oldLength !== newLength && (changeDetected++, oldValue.length = oldLength = newLength);
                                for (var i = 0; i < newLength; i++) oldValue[i] != oldValue[i] && newValue[i] != newValue[i] || oldValue[i] === newValue[i] || (changeDetected++, oldValue[i] = newValue[i])
                            } else {
                                for (key in oldValue !== internalObject && (oldValue = internalObject = {}, oldLength = 0, changeDetected++), newLength = 0, newValue) newValue.hasOwnProperty(key) && (newLength++, oldValue.hasOwnProperty(key) ? oldValue[key] != oldValue[key] && newValue[key] != newValue[key] || oldValue[key] === newValue[key] || (changeDetected++, oldValue[key] = newValue[key]) : (oldLength++, oldValue[key] = newValue[key], changeDetected++));
                                if (newLength < oldLength)
                                    for (key in changeDetected++, oldValue) oldValue.hasOwnProperty(key) && !newValue.hasOwnProperty(key) && (oldLength--, delete oldValue[key])
                            }
                        else oldValue !== newValue && (oldValue = newValue, changeDetected++);
                        return changeDetected
                    }, function() {
                        if (initRun ? (initRun = !1, listener(newValue, newValue, self)) : listener(newValue, veryOldValue, self), trackVeryOldValue)
                            if (isObject(newValue))
                                if (isArrayLike(newValue)) {
                                    veryOldValue = new Array(newValue.length);
                                    for (var i = 0; i < newValue.length; i++) veryOldValue[i] = newValue[i]
                                } else
                                    for (var key in veryOldValue = {}, newValue) hasOwnProperty.call(newValue, key) && (veryOldValue[key] = newValue[key]);
                        else veryOldValue = newValue
                    })
                },
                $digest: function() {
                    var watch, value, last, watchers, length, dirty, next, current, logIdx, logMsg, asyncTask, asyncQueue = this.$$asyncQueue,
                        postDigestQueue = this.$$postDigestQueue,
                        ttl = TTL,
                        watchLog = [];
                    beginPhase("$digest"), lastDirtyWatch = null;
                    do {
                        for (dirty = !1, current = this; asyncQueue.length;) {
                            try {
                                (asyncTask = asyncQueue.shift()).scope.$eval(asyncTask.expression)
                            } catch (e) {
                                clearPhase(), $exceptionHandler(e)
                            }
                            lastDirtyWatch = null
                        }
                        traverseScopesLoop: do {
                            if (watchers = current.$$watchers)
                                for (length = watchers.length; length--;) try {
                                    if (watch = watchers[length])
                                        if ((value = watch.get(current)) === (last = watch.last) || (watch.eq ? equals(value, last) : "number" == typeof value && "number" == typeof last && isNaN(value) && isNaN(last))) {
                                            if (watch === lastDirtyWatch) {
                                                dirty = !1;
                                                break traverseScopesLoop
                                            }
                                        } else dirty = !0, (lastDirtyWatch = watch).last = watch.eq ? copy(value, null) : value, watch.fn(value, last === initWatchVal ? value : last, current), ttl < 5 && (watchLog[logIdx = 4 - ttl] || (watchLog[logIdx] = []), logMsg = isFunction(watch.exp) ? "fn: " + (watch.exp.name || watch.exp.toString()) : watch.exp, logMsg += "; newVal: " + toJson(value) + "; oldVal: " + toJson(last), watchLog[logIdx].push(logMsg))
                                } catch (e) {
                                    clearPhase(), $exceptionHandler(e)
                                }
                            if (!(next = current.$$childHead || current !== this && current.$$nextSibling))
                                for (; current !== this && !(next = current.$$nextSibling);) current = current.$parent
                        } while (current = next);
                        if ((dirty || asyncQueue.length) && !ttl--) throw clearPhase(), $rootScopeMinErr("infdig", "{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}", TTL, toJson(watchLog))
                    } while (dirty || asyncQueue.length);
                    for (clearPhase(); postDigestQueue.length;) try {
                        postDigestQueue.shift()()
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                },
                $destroy: function() {
                    if (!this.$$destroyed) {
                        var parent = this.$parent;
                        this.$broadcast("$destroy"), this.$$destroyed = !0, this !== $rootScope && (forEach(this.$$listenerCount, bind(null, decrementListenerCount, this)), parent.$$childHead == this && (parent.$$childHead = this.$$nextSibling), parent.$$childTail == this && (parent.$$childTail = this.$$prevSibling), this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = null, this.$$listeners = {}, this.$$watchers = this.$$asyncQueue = this.$$postDigestQueue = [], this.$destroy = this.$digest = this.$apply = noop, this.$on = this.$watch = function() {
                            return noop
                        })
                    }
                },
                $eval: function(expr, locals) {
                    return $parse(expr)(this, locals)
                },
                $evalAsync: function(expr) {
                    $rootScope.$$phase || $rootScope.$$asyncQueue.length || $browser.defer(function() {
                        $rootScope.$$asyncQueue.length && $rootScope.$digest()
                    }), this.$$asyncQueue.push({
                        scope: this,
                        expression: expr
                    })
                },
                $$postDigest: function(fn) {
                    this.$$postDigestQueue.push(fn)
                },
                $apply: function(expr) {
                    try {
                        return beginPhase("$apply"), this.$eval(expr)
                    } catch (e) {
                        $exceptionHandler(e)
                    } finally {
                        clearPhase();
                        try {
                            $rootScope.$digest()
                        } catch (e) {
                            throw $exceptionHandler(e), e
                        }
                    }
                },
                $on: function(name, listener) {
                    var namedListeners = this.$$listeners[name];
                    namedListeners || (this.$$listeners[name] = namedListeners = []), namedListeners.push(listener);
                    for (var current = this; current.$$listenerCount[name] || (current.$$listenerCount[name] = 0), current.$$listenerCount[name]++, current = current.$parent;);
                    var self = this;
                    return function() {
                        namedListeners[indexOf(namedListeners, listener)] = null, decrementListenerCount(self, 1, name)
                    }
                },
                $emit: function(name, args) {
                    var namedListeners, i, length, empty = [],
                        scope = this,
                        _stopPropagation = !1,
                        event = {
                            name: name,
                            targetScope: scope,
                            stopPropagation: function() {
                                _stopPropagation = !0
                            },
                            preventDefault: function() {
                                event.defaultPrevented = !0
                            },
                            defaultPrevented: !1
                        },
                        listenerArgs = concat([event], arguments, 1);
                    do {
                        for (namedListeners = scope.$$listeners[name] || empty, event.currentScope = scope, i = 0, length = namedListeners.length; i < length; i++)
                            if (namedListeners[i]) try {
                                namedListeners[i].apply(null, listenerArgs)
                            } catch (e) {
                                $exceptionHandler(e)
                            } else namedListeners.splice(i, 1), i--, length--;
                        if (_stopPropagation) return event;
                        scope = scope.$parent
                    } while (scope);
                    return event
                },
                $broadcast: function(name, args) {
                    for (var listeners, i, length, current = this, next = this, event = {
                            name: name,
                            targetScope: this,
                            preventDefault: function() {
                                event.defaultPrevented = !0
                            },
                            defaultPrevented: !1
                        }, listenerArgs = concat([event], arguments, 1); current = next;) {
                        for (i = 0, length = (listeners = (event.currentScope = current).$$listeners[name] || []).length; i < length; i++)
                            if (listeners[i]) try {
                                listeners[i].apply(null, listenerArgs)
                            } catch (e) {
                                $exceptionHandler(e)
                            } else listeners.splice(i, 1), i--, length--;
                        if (!(next = current.$$listenerCount[name] && current.$$childHead || current !== this && current.$$nextSibling))
                            for (; current !== this && !(next = current.$$nextSibling);) current = current.$parent
                    }
                    return event
                }
            };
            var $rootScope = new Scope;
            return $rootScope;

            function beginPhase(phase) {
                if ($rootScope.$$phase) throw $rootScopeMinErr("inprog", "{0} already in progress", $rootScope.$$phase);
                $rootScope.$$phase = phase
            }

            function clearPhase() {
                $rootScope.$$phase = null
            }

            function compileToFn(exp, name) {
                var fn = $parse(exp);
                return assertArgFn(fn, name), fn
            }

            function decrementListenerCount(current, count, name) {
                for (; current.$$listenerCount[name] -= count, 0 === current.$$listenerCount[name] && delete current.$$listenerCount[name], current = current.$parent;);
            }

            function initWatchVal() {}
        }]
    }

    function $$SanitizeUriProvider() {
        var aHrefSanitizationWhitelist = /^\s*(https?|ftp|mailto|tel|file):/,
            imgSrcSanitizationWhitelist = /^\s*(https?|ftp|file):|data:image\//;
        this.aHrefSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? (aHrefSanitizationWhitelist = regexp, this) : aHrefSanitizationWhitelist
        }, this.imgSrcSanitizationWhitelist = function(regexp) {
            return isDefined(regexp) ? (imgSrcSanitizationWhitelist = regexp, this) : imgSrcSanitizationWhitelist
        }, this.$get = function() {
            return function(uri, isImage) {
                var normalizedVal, regex = isImage ? imgSrcSanitizationWhitelist : aHrefSanitizationWhitelist;
                return msie && !(8 <= msie) || "" === (normalizedVal = urlResolve(uri).href) || normalizedVal.match(regex) ? uri : "unsafe:" + normalizedVal
            }
        }
    }
    var $sceMinErr = minErr("$sce"),
        SCE_CONTEXTS = {
            HTML: "html",
            CSS: "css",
            URL: "url",
            RESOURCE_URL: "resourceUrl",
            JS: "js"
        };

    function adjustMatchers(matchers) {
        var adjustedMatchers = [];
        return isDefined(matchers) && forEach(matchers, function(matcher) {
            adjustedMatchers.push(function(matcher) {
                if ("self" === matcher) return matcher;
                if (isString(matcher)) {
                    if (-1 < matcher.indexOf("***")) throw $sceMinErr("iwcard", "Illegal sequence *** in string matcher.  String: {0}", matcher);
                    return matcher = (s = matcher, s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"), new RegExp("^" + matcher + "$")
                }
                if (isRegExp(matcher)) return new RegExp("^" + matcher.source + "$");
                throw $sceMinErr("imatcher", 'Matchers may only be "self", string patterns or RegExp objects');
                var s
            }(matcher))
        }), adjustedMatchers
    }

    function $SceDelegateProvider() {
        this.SCE_CONTEXTS = SCE_CONTEXTS;
        var resourceUrlWhitelist = ["self"],
            resourceUrlBlacklist = [];
        this.resourceUrlWhitelist = function(value) {
            return arguments.length && (resourceUrlWhitelist = adjustMatchers(value)), resourceUrlWhitelist
        }, this.resourceUrlBlacklist = function(value) {
            return arguments.length && (resourceUrlBlacklist = adjustMatchers(value)), resourceUrlBlacklist
        }, this.$get = ["$injector", function($injector) {
            var htmlSanitizer = function(html) {
                throw $sceMinErr("unsafe", "Attempting to use an unsafe value in a safe context.")
            };

            function matchUrl(matcher, parsedUrl) {
                return "self" === matcher ? urlIsSameOrigin(parsedUrl) : !!matcher.exec(parsedUrl.href)
            }

            function generateHolderType(Base) {
                var holderType = function(trustedValue) {
                    this.$$unwrapTrustedValue = function() {
                        return trustedValue
                    }
                };
                return Base && (holderType.prototype = new Base), holderType.prototype.valueOf = function() {
                    return this.$$unwrapTrustedValue()
                }, holderType.prototype.toString = function() {
                    return this.$$unwrapTrustedValue().toString()
                }, holderType
            }
            $injector.has("$sanitize") && (htmlSanitizer = $injector.get("$sanitize"));
            var trustedValueHolderBase = generateHolderType(),
                byType = {};
            return byType[SCE_CONTEXTS.HTML] = generateHolderType(trustedValueHolderBase), byType[SCE_CONTEXTS.CSS] = generateHolderType(trustedValueHolderBase), byType[SCE_CONTEXTS.URL] = generateHolderType(trustedValueHolderBase), byType[SCE_CONTEXTS.JS] = generateHolderType(trustedValueHolderBase), byType[SCE_CONTEXTS.RESOURCE_URL] = generateHolderType(byType[SCE_CONTEXTS.URL]), {
                trustAs: function(type, trustedValue) {
                    var Constructor = byType.hasOwnProperty(type) ? byType[type] : null;
                    if (!Constructor) throw $sceMinErr("icontext", "Attempted to trust a value in invalid context. Context: {0}; Value: {1}", type, trustedValue);
                    if (null === trustedValue || trustedValue === undefined || "" === trustedValue) return trustedValue;
                    if ("string" != typeof trustedValue) throw $sceMinErr("itype", "Attempted to trust a non-string value in a content requiring a string: Context: {0}", type);
                    return new Constructor(trustedValue)
                },
                getTrusted: function(type, maybeTrusted) {
                    if (null === maybeTrusted || maybeTrusted === undefined || "" === maybeTrusted) return maybeTrusted;
                    var constructor = byType.hasOwnProperty(type) ? byType[type] : null;
                    if (constructor && maybeTrusted instanceof constructor) return maybeTrusted.$$unwrapTrustedValue();
                    if (type === SCE_CONTEXTS.RESOURCE_URL) {
                        if (function(url) {
                                var i, n, parsedUrl = urlResolve(url.toString()),
                                    allowed = !1;
                                for (i = 0, n = resourceUrlWhitelist.length; i < n; i++)
                                    if (matchUrl(resourceUrlWhitelist[i], parsedUrl)) {
                                        allowed = !0;
                                        break
                                    } if (allowed)
                                    for (i = 0, n = resourceUrlBlacklist.length; i < n; i++)
                                        if (matchUrl(resourceUrlBlacklist[i], parsedUrl)) {
                                            allowed = !1;
                                            break
                                        } return allowed
                            }(maybeTrusted)) return maybeTrusted;
                        throw $sceMinErr("insecurl", "Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}", maybeTrusted.toString())
                    }
                    if (type === SCE_CONTEXTS.HTML) return htmlSanitizer(maybeTrusted);
                    throw $sceMinErr("unsafe", "Attempting to use an unsafe value in a safe context.")
                },
                valueOf: function(maybeTrusted) {
                    return maybeTrusted instanceof trustedValueHolderBase ? maybeTrusted.$$unwrapTrustedValue() : maybeTrusted
                }
            }
        }]
    }

    function $SceProvider() {
        var enabled = !0;
        this.enabled = function(value) {
            return arguments.length && (enabled = !!value), enabled
        }, this.$get = ["$parse", "$sniffer", "$sceDelegate", function($parse, $sniffer, $sceDelegate) {
            if (enabled && $sniffer.msie && $sniffer.msieDocumentMode < 8) throw $sceMinErr("iequirks", "Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");
            var sce = shallowCopy(SCE_CONTEXTS);
            sce.isEnabled = function() {
                return enabled
            }, sce.trustAs = $sceDelegate.trustAs, sce.getTrusted = $sceDelegate.getTrusted, sce.valueOf = $sceDelegate.valueOf, enabled || (sce.trustAs = sce.getTrusted = function(type, value) {
                return value
            }, sce.valueOf = identity), sce.parseAs = function(type, expr) {
                var parsed = $parse(expr);
                return parsed.literal && parsed.constant ? parsed : function(self, locals) {
                    return sce.getTrusted(type, parsed(self, locals))
                }
            };
            var parse = sce.parseAs,
                getTrusted = sce.getTrusted,
                trustAs = sce.trustAs;
            return forEach(SCE_CONTEXTS, function(enumValue, name) {
                var lName = lowercase(name);
                sce[camelCase("parse_as_" + lName)] = function(expr) {
                    return parse(enumValue, expr)
                }, sce[camelCase("get_trusted_" + lName)] = function(value) {
                    return getTrusted(enumValue, value)
                }, sce[camelCase("trust_as_" + lName)] = function(value) {
                    return trustAs(enumValue, value)
                }
            }), sce
        }]
    }

    function $SnifferProvider() {
        this.$get = ["$window", "$document", function($window, $document) {
            var vendorPrefix, match, eventSupport = {},
                android = int((/android (\d+)/.exec(lowercase(($window.navigator || {}).userAgent)) || [])[1]),
                boxee = /Boxee/i.test(($window.navigator || {}).userAgent),
                document = $document[0] || {},
                documentMode = document.documentMode,
                vendorRegex = /^(Moz|webkit|O|ms)(?=[A-Z])/,
                bodyStyle = document.body && document.body.style,
                transitions = !1,
                animations = !1;
            if (bodyStyle) {
                for (var prop in bodyStyle)
                    if (match = vendorRegex.exec(prop)) {
                        vendorPrefix = (vendorPrefix = match[0]).substr(0, 1).toUpperCase() + vendorPrefix.substr(1);
                        break
                    } vendorPrefix || (vendorPrefix = "WebkitOpacity" in bodyStyle && "webkit"), transitions = !!("transition" in bodyStyle || vendorPrefix + "Transition" in bodyStyle), animations = !!("animation" in bodyStyle || vendorPrefix + "Animation" in bodyStyle), !android || transitions && animations || (transitions = isString(document.body.style.webkitTransition), animations = isString(document.body.style.webkitAnimation))
            }
            return {
                history: !(!$window.history || !$window.history.pushState || android < 4 || boxee),
                hashchange: "onhashchange" in $window && (!documentMode || 7 < documentMode),
                hasEvent: function(event) {
                    if ("input" == event && 9 == msie) return !1;
                    if (isUndefined(eventSupport[event])) {
                        var divElm = document.createElement("div");
                        eventSupport[event] = "on" + event in divElm
                    }
                    return eventSupport[event]
                },
                csp: csp(),
                vendorPrefix: vendorPrefix,
                transitions: transitions,
                animations: animations,
                android: android,
                msie: msie,
                msieDocumentMode: documentMode
            }
        }]
    }

    function $TimeoutProvider() {
        this.$get = ["$rootScope", "$browser", "$q", "$exceptionHandler", function($rootScope, $browser, $q, $exceptionHandler) {
            var deferreds = {};

            function timeout(fn, delay, invokeApply) {
                var timeoutId, deferred = $q.defer(),
                    promise = deferred.promise,
                    skipApply = isDefined(invokeApply) && !invokeApply;
                return timeoutId = $browser.defer(function() {
                    try {
                        deferred.resolve(fn())
                    } catch (e) {
                        deferred.reject(e), $exceptionHandler(e)
                    } finally {
                        delete deferreds[promise.$$timeoutId]
                    }
                    skipApply || $rootScope.$apply()
                }, delay), promise.$$timeoutId = timeoutId, deferreds[timeoutId] = deferred, promise
            }
            return timeout.cancel = function(promise) {
                return !!(promise && promise.$$timeoutId in deferreds) && (deferreds[promise.$$timeoutId].reject("canceled"), delete deferreds[promise.$$timeoutId], $browser.defer.cancel(promise.$$timeoutId))
            }, timeout
        }]
    }
    var urlParsingNode = document.createElement("a"),
        originUrl = urlResolve(window.location.href, !0);

    function urlResolve(url, base) {
        var href = url;
        return msie && (urlParsingNode.setAttribute("href", href), href = urlParsingNode.href), urlParsingNode.setAttribute("href", href), {
            href: urlParsingNode.href,
            protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
            host: urlParsingNode.host,
            search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
            hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
            hostname: urlParsingNode.hostname,
            port: urlParsingNode.port,
            pathname: "/" === urlParsingNode.pathname.charAt(0) ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
        }
    }

    function urlIsSameOrigin(requestUrl) {
        var parsed = isString(requestUrl) ? urlResolve(requestUrl) : requestUrl;
        return parsed.protocol === originUrl.protocol && parsed.host === originUrl.host
    }

    function $WindowProvider() {
        this.$get = valueFn(window)
    }

    function $FilterProvider($provide) {
        var suffix = "Filter";

        function register(name, factory) {
            if (isObject(name)) {
                var filters = {};
                return forEach(name, function(filter, key) {
                    filters[key] = register(key, filter)
                }), filters
            }
            return $provide.factory(name + suffix, factory)
        }
        this.register = register, this.$get = ["$injector", function($injector) {
            return function(name) {
                return $injector.get(name + suffix)
            }
        }], register("currency", currencyFilter), register("date", dateFilter), register("filter", filterFilter), register("json", jsonFilter), register("limitTo", limitToFilter), register("lowercase", lowercaseFilter), register("number", numberFilter), register("orderBy", orderByFilter), register("uppercase", uppercaseFilter)
    }

    function filterFilter() {
        return function(array, expression, _comparator) {
            if (!isArray(array)) return array;
            var comparatorType = _typeof(_comparator),
                predicates = [];
            predicates.check = function(value) {
                for (var j = 0; j < predicates.length; j++)
                    if (!predicates[j](value)) return !1;
                return !0
            }, "function" !== comparatorType && (_comparator = "boolean" === comparatorType && _comparator ? function(obj, text) {
                return angular.equals(obj, text)
            } : function(obj, text) {
                if (obj && text && "object" === _typeof(obj) && "object" === _typeof(text)) {
                    for (var objKey in obj)
                        if ("$" !== objKey.charAt(0) && hasOwnProperty.call(obj, objKey) && _comparator(obj[objKey], text[objKey])) return !0;
                    return !1
                }
                return text = ("" + text).toLowerCase(), -1 < ("" + obj).toLowerCase().indexOf(text)
            });
            var search = function search(obj, text) {
                if ("string" == typeof text && "!" === text.charAt(0)) return !search(obj, text.substr(1));
                switch (_typeof(obj)) {
                    case "boolean":
                    case "number":
                    case "string":
                        return _comparator(obj, text);
                    case "object":
                        switch (_typeof(text)) {
                            case "object":
                                return _comparator(obj, text);
                            default:
                                for (var objKey in obj)
                                    if ("$" !== objKey.charAt(0) && search(obj[objKey], text)) return !0
                        }
                        return !1;
                    case "array":
                        for (var i = 0; i < obj.length; i++)
                            if (search(obj[i], text)) return !0;
                        return !1;
                    default:
                        return !1
                }
            };
            switch (_typeof(expression)) {
                case "boolean":
                case "number":
                case "string":
                    expression = {
                        $: expression
                    };
                case "object":
                    for (var key in expression) ! function(path) {
                        void 0 !== expression[path] && predicates.push(function(value) {
                            return search("$" == path ? value : value && value[path], expression[path])
                        })
                    }(key);
                    break;
                case "function":
                    predicates.push(expression);
                    break;
                default:
                    return array
            }
            for (var filtered = [], j = 0; j < array.length; j++) {
                var value = array[j];
                predicates.check(value) && filtered.push(value)
            }
            return filtered
        }
    }

    function currencyFilter($locale) {
        var formats = $locale.NUMBER_FORMATS;
        return function(amount, currencySymbol) {
            return isUndefined(currencySymbol) && (currencySymbol = formats.CURRENCY_SYM), formatNumber(amount, formats.PATTERNS[1], formats.GROUP_SEP, formats.DECIMAL_SEP, 2).replace(/\u00A4/g, currencySymbol)
        }
    }

    function numberFilter($locale) {
        var formats = $locale.NUMBER_FORMATS;
        return function(number, fractionSize) {
            return formatNumber(number, formats.PATTERNS[0], formats.GROUP_SEP, formats.DECIMAL_SEP, fractionSize)
        }
    }
    $FilterProvider.$inject = ["$provide"], currencyFilter.$inject = ["$locale"], numberFilter.$inject = ["$locale"];
    var DECIMAL_SEP = ".";

    function formatNumber(number, pattern, groupSep, decimalSep, fractionSize) {
        if (null == number || !isFinite(number) || isObject(number)) return "";
        var isNegative = number < 0,
            numStr = (number = Math.abs(number)) + "",
            formatedText = "",
            parts = [],
            hasExponent = !1;
        if (-1 !== numStr.indexOf("e")) {
            var match = numStr.match(/([\d\.]+)e(-?)(\d+)/);
            match && "-" == match[2] && match[3] > fractionSize + 1 ? (numStr = "0", number = 0) : (formatedText = numStr, hasExponent = !0)
        }
        if (hasExponent) 0 < fractionSize && -1 < number && number < 1 && (formatedText = number.toFixed(fractionSize));
        else {
            var fractionLen = (numStr.split(DECIMAL_SEP)[1] || "").length;
            isUndefined(fractionSize) && (fractionSize = Math.min(Math.max(pattern.minFrac, fractionLen), pattern.maxFrac));
            var fraction = ("" + (number = +(Math.round(+(number.toString() + "e" + fractionSize)).toString() + "e" + -fractionSize))).split(DECIMAL_SEP),
                whole = fraction[0];
            fraction = fraction[1] || "";
            var i, pos = 0,
                lgroup = pattern.lgSize,
                group = pattern.gSize;
            if (whole.length >= lgroup + group)
                for (pos = whole.length - lgroup, i = 0; i < pos; i++)(pos - i) % group == 0 && 0 !== i && (formatedText += groupSep), formatedText += whole.charAt(i);
            for (i = pos; i < whole.length; i++)(whole.length - i) % lgroup == 0 && 0 !== i && (formatedText += groupSep), formatedText += whole.charAt(i);
            for (; fraction.length < fractionSize;) fraction += "0";
            fractionSize && "0" !== fractionSize && (formatedText += decimalSep + fraction.substr(0, fractionSize))
        }
        return parts.push(isNegative ? pattern.negPre : pattern.posPre), parts.push(formatedText), parts.push(isNegative ? pattern.negSuf : pattern.posSuf), parts.join("")
    }

    function padNumber(num, digits, trim) {
        var neg = "";
        for (num < 0 && (neg = "-", num = -num), num = "" + num; num.length < digits;) num = "0" + num;
        return trim && (num = num.substr(num.length - digits)), neg + num
    }

    function dateGetter(name, size, offset, trim) {
        return offset = offset || 0,
            function(date) {
                var value = date["get" + name]();
                return (0 < offset || -offset < value) && (value += offset), 0 === value && -12 == offset && (value = 12), padNumber(value, size, trim)
            }
    }

    function dateStrGetter(name, shortForm) {
        return function(date, formats) {
            var value = date["get" + name]();
            return formats[uppercase(shortForm ? "SHORT" + name : name)][value]
        }
    }
    var DATE_FORMATS = {
            yyyy: dateGetter("FullYear", 4),
            yy: dateGetter("FullYear", 2, 0, !0),
            y: dateGetter("FullYear", 1),
            MMMM: dateStrGetter("Month"),
            MMM: dateStrGetter("Month", !0),
            MM: dateGetter("Month", 2, 1),
            M: dateGetter("Month", 1, 1),
            dd: dateGetter("Date", 2),
            d: dateGetter("Date", 1),
            HH: dateGetter("Hours", 2),
            H: dateGetter("Hours", 1),
            hh: dateGetter("Hours", 2, -12),
            h: dateGetter("Hours", 1, -12),
            mm: dateGetter("Minutes", 2),
            m: dateGetter("Minutes", 1),
            ss: dateGetter("Seconds", 2),
            s: dateGetter("Seconds", 1),
            sss: dateGetter("Milliseconds", 3),
            EEEE: dateStrGetter("Day"),
            EEE: dateStrGetter("Day", !0),
            a: function(date, formats) {
                return date.getHours() < 12 ? formats.AMPMS[0] : formats.AMPMS[1]
            },
            Z: function(date) {
                var zone = -1 * date.getTimezoneOffset(),
                    paddedZone = 0 <= zone ? "+" : "";
                return paddedZone += padNumber(Math[0 < zone ? "floor" : "ceil"](zone / 60), 2) + padNumber(Math.abs(zone % 60), 2)
            }
        },
        DATE_FORMATS_SPLIT = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,
        NUMBER_STRING = /^\-?\d+$/;

    function dateFilter($locale) {
        var R_ISO8601_STR = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(date, format) {
            var fn, match, text = "",
                parts = [];
            if (format = format || "mediumDate", format = $locale.DATETIME_FORMATS[format] || format, isString(date) && (date = NUMBER_STRING.test(date) ? int(date) : function(string) {
                    var match;
                    if (match = string.match(R_ISO8601_STR)) {
                        var date = new Date(0),
                            tzHour = 0,
                            tzMin = 0,
                            dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear,
                            timeSetter = match[8] ? date.setUTCHours : date.setHours;
                        match[9] && (tzHour = int(match[9] + match[10]), tzMin = int(match[9] + match[11])), dateSetter.call(date, int(match[1]), int(match[2]) - 1, int(match[3]));
                        var h = int(match[4] || 0) - tzHour,
                            m = int(match[5] || 0) - tzMin,
                            s = int(match[6] || 0),
                            ms = Math.round(1e3 * parseFloat("0." + (match[7] || 0)));
                        return timeSetter.call(date, h, m, s, ms), date
                    }
                    return string
                }(date)), isNumber(date) && (date = new Date(date)), !isDate(date)) return date;
            for (; format;) format = (match = DATE_FORMATS_SPLIT.exec(format)) ? (parts = concat(parts, match, 1)).pop() : (parts.push(format), null);
            return forEach(parts, function(value) {
                fn = DATE_FORMATS[value], text += fn ? fn(date, $locale.DATETIME_FORMATS) : value.replace(/(^'|'$)/g, "").replace(/''/g, "'")
            }), text
        }
    }

    function jsonFilter() {
        return function(object) {
            return toJson(object, !0)
        }
    }
    dateFilter.$inject = ["$locale"];
    var lowercaseFilter = valueFn(lowercase),
        uppercaseFilter = valueFn(uppercase);

    function limitToFilter() {
        return function(input, limit) {
            if (!isArray(input) && !isString(input)) return input;
            if (limit = Math.abs(Number(limit)) === 1 / 0 ? Number(limit) : int(limit), isString(input)) return limit ? 0 <= limit ? input.slice(0, limit) : input.slice(limit, input.length) : "";
            var i, n, out = [];
            for (limit > input.length ? limit = input.length : limit < -input.length && (limit = -input.length), n = 0 < limit ? (i = 0, limit) : (i = input.length + limit, input.length); i < n; i++) out.push(input[i]);
            return out
        }
    }

    function orderByFilter($parse) {
        return function(array, sortPredicate, reverseOrder) {
            if (!isArray(array)) return array;
            if (!sortPredicate) return array;
            var iterator, context, results;
            sortPredicate = isArray(sortPredicate) ? sortPredicate : [sortPredicate], iterator = function(predicate) {
                var descending = !1,
                    get = predicate || identity;
                if (isString(predicate) && ("+" != predicate.charAt(0) && "-" != predicate.charAt(0) || (descending = "-" == predicate.charAt(0), predicate = predicate.substring(1)), (get = $parse(predicate)).constant)) {
                    var key = get();
                    return reverseComparator(function(a, b) {
                        return compare(a[key], b[key])
                    }, descending)
                }
                return reverseComparator(function(a, b) {
                    return compare(get(a), get(b))
                }, descending)
            }, results = [], forEach(sortPredicate, function(value, index, list) {
                results.push(iterator.call(context, value, index, list))
            }), sortPredicate = results;
            for (var arrayCopy = [], i = 0; i < array.length; i++) arrayCopy.push(array[i]);
            return arrayCopy.sort(reverseComparator(function(o1, o2) {
                for (var i = 0; i < sortPredicate.length; i++) {
                    var comp = sortPredicate[i](o1, o2);
                    if (0 !== comp) return comp
                }
                return 0
            }, reverseOrder));

            function reverseComparator(comp, descending) {
                return toBoolean(descending) ? function(a, b) {
                    return comp(b, a)
                } : comp
            }

            function compare(v1, v2) {
                var t1 = _typeof(v1),
                    t2 = _typeof(v2);
                return t1 == t2 ? (isDate(v1) && isDate(v2) && (v1 = v1.valueOf(), v2 = v2.valueOf()), "string" == t1 && (v1 = v1.toLowerCase(), v2 = v2.toLowerCase()), v1 === v2 ? 0 : v1 < v2 ? -1 : 1) : t1 < t2 ? -1 : 1
            }
        }
    }

    function ngDirective(directive) {
        return isFunction(directive) && (directive = {
            link: directive
        }), directive.restrict = directive.restrict || "AC", valueFn(directive)
    }
    orderByFilter.$inject = ["$parse"];
    var htmlAnchorDirective = valueFn({
            restrict: "E",
            compile: function(element, attr) {
                if (msie <= 8 && (attr.href || attr.name || attr.$set("href", ""), element.append(document.createComment("IE fix"))), !attr.href && !attr.xlinkHref && !attr.name) return function(scope, element) {
                    var href = "[object SVGAnimatedString]" === toString.call(element.prop("href")) ? "xlink:href" : "href";
                    element.on("click", function(event) {
                        element.attr(href) || event.preventDefault()
                    })
                }
            }
        }),
        ngAttributeAliasDirectives = {};
    forEach(BOOLEAN_ATTR, function(propName, attrName) {
        if ("multiple" != propName) {
            var normalized = directiveNormalize("ng-" + attrName);
            ngAttributeAliasDirectives[normalized] = function() {
                return {
                    priority: 100,
                    link: function(scope, element, attr) {
                        scope.$watch(attr[normalized], function(value) {
                            attr.$set(attrName, !!value)
                        })
                    }
                }
            }
        }
    }), forEach(["src", "srcset", "href"], function(attrName) {
        var normalized = directiveNormalize("ng-" + attrName);
        ngAttributeAliasDirectives[normalized] = function() {
            return {
                priority: 99,
                link: function(scope, element, attr) {
                    var propName = attrName,
                        name = attrName;
                    "href" === attrName && "[object SVGAnimatedString]" === toString.call(element.prop("href")) && (name = "xlinkHref", attr.$attr[name] = "xlink:href", propName = null), attr.$observe(normalized, function(value) {
                        value && (attr.$set(name, value), msie && propName && element.prop(propName, attr[name]))
                    })
                }
            }
        }
    });
    var nullFormCtrl = {
        $addControl: noop,
        $removeControl: noop,
        $setValidity: noop,
        $setDirty: noop,
        $setPristine: noop
    };

    function FormController(element, attrs, $scope, $animate) {
        var form = this,
            parentForm = element.parent().controller("form") || nullFormCtrl,
            invalidCount = 0,
            errors = form.$error = {},
            controls = [];

        function toggleValidCss(isValid, validationErrorKey) {
            validationErrorKey = validationErrorKey ? "-" + snake_case(validationErrorKey, "-") : "", $animate.removeClass(element, (isValid ? INVALID_CLASS : VALID_CLASS) + validationErrorKey), $animate.addClass(element, (isValid ? VALID_CLASS : INVALID_CLASS) + validationErrorKey)
        }
        form.$name = attrs.name || attrs.ngForm, form.$dirty = !1, form.$pristine = !0, form.$valid = !0, form.$invalid = !1, parentForm.$addControl(form), element.addClass(PRISTINE_CLASS), toggleValidCss(!0), form.$addControl = function(control) {
            assertNotHasOwnProperty(control.$name, "input"), controls.push(control), control.$name && (form[control.$name] = control)
        }, form.$removeControl = function(control) {
            control.$name && form[control.$name] === control && delete form[control.$name], forEach(errors, function(queue, validationToken) {
                form.$setValidity(validationToken, !0, control)
            }), arrayRemove(controls, control)
        }, form.$setValidity = function(validationToken, isValid, control) {
            var queue = errors[validationToken];
            if (isValid) queue && (arrayRemove(queue, control), queue.length || (--invalidCount || (toggleValidCss(isValid), form.$valid = !0, form.$invalid = !1), toggleValidCss(!(errors[validationToken] = !1), validationToken), parentForm.$setValidity(validationToken, !0, form)));
            else {
                if (invalidCount || toggleValidCss(isValid), queue) {
                    if (-1 != indexOf(queue, control)) return
                } else errors[validationToken] = queue = [], invalidCount++, toggleValidCss(!1, validationToken), parentForm.$setValidity(validationToken, !1, form);
                queue.push(control), form.$valid = !1, form.$invalid = !0
            }
        }, form.$setDirty = function() {
            $animate.removeClass(element, PRISTINE_CLASS), $animate.addClass(element, DIRTY_CLASS), form.$dirty = !0, form.$pristine = !1, parentForm.$setDirty()
        }, form.$setPristine = function() {
            $animate.removeClass(element, DIRTY_CLASS), $animate.addClass(element, PRISTINE_CLASS), form.$dirty = !1, form.$pristine = !0, forEach(controls, function(control) {
                control.$setPristine()
            })
        }
    }
    FormController.$inject = ["$element", "$attrs", "$scope", "$animate"];
    var formDirectiveFactory = function(isNgForm) {
            return ["$timeout", function($timeout) {
                return {
                    name: "form",
                    restrict: isNgForm ? "EAC" : "E",
                    controller: FormController,
                    compile: function() {
                        return {
                            pre: function(scope, formElement, attr, controller) {
                                if (!attr.action) {
                                    var preventDefaultListener = function(event) {
                                        event.preventDefault ? event.preventDefault() : event.returnValue = !1
                                    };
                                    addEventListenerFn(formElement[0], "submit", preventDefaultListener), formElement.on("$destroy", function() {
                                        $timeout(function() {
                                            removeEventListenerFn(formElement[0], "submit", preventDefaultListener)
                                        }, 0, !1)
                                    })
                                }
                                var parentFormCtrl = formElement.parent().controller("form"),
                                    alias = attr.name || attr.ngForm;
                                alias && setter(scope, alias, controller, alias), parentFormCtrl && formElement.on("$destroy", function() {
                                    parentFormCtrl.$removeControl(controller), alias && setter(scope, alias, undefined, alias), extend(controller, nullFormCtrl)
                                })
                            }
                        }
                    }
                }
            }]
        },
        formDirective = formDirectiveFactory(),
        ngFormDirective = formDirectiveFactory(!0),
        URL_REGEXP = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
        EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
        NUMBER_REGEXP = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,
        inputType = {
            text: textInputType,
            number: function(scope, element, attr, ctrl, $sniffer, $browser) {
                if (textInputType(scope, element, attr, ctrl, $sniffer, $browser), ctrl.$parsers.push(function(value) {
                        var empty = ctrl.$isEmpty(value);
                        return empty || NUMBER_REGEXP.test(value) ? (ctrl.$setValidity("number", !0), "" === value ? null : empty ? value : parseFloat(value)) : (ctrl.$setValidity("number", !1), undefined)
                    }), function(ctrl, validatorName, badFlags, ignoreFlags, validity) {
                        isObject(validity) && (ctrl.$$hasNativeValidators = !0, ctrl.$parsers.push(function(value) {
                            return ctrl.$error[validatorName] || testFlags(validity, ignoreFlags) || !testFlags(validity, badFlags) ? value : void ctrl.$setValidity(validatorName, !1)
                        }))
                    }(ctrl, "number", numberBadFlags, null, ctrl.$$validityState), ctrl.$formatters.push(function(value) {
                        return ctrl.$isEmpty(value) ? "" : "" + value
                    }), attr.min) {
                    var minValidator = function(value) {
                        var min = parseFloat(attr.min);
                        return validate(ctrl, "min", ctrl.$isEmpty(value) || min <= value, value)
                    };
                    ctrl.$parsers.push(minValidator), ctrl.$formatters.push(minValidator)
                }
                if (attr.max) {
                    var maxValidator = function(value) {
                        var max = parseFloat(attr.max);
                        return validate(ctrl, "max", ctrl.$isEmpty(value) || value <= max, value)
                    };
                    ctrl.$parsers.push(maxValidator), ctrl.$formatters.push(maxValidator)
                }
                ctrl.$formatters.push(function(value) {
                    return validate(ctrl, "number", ctrl.$isEmpty(value) || isNumber(value), value)
                })
            },
            url: function(scope, element, attr, ctrl, $sniffer, $browser) {
                textInputType(scope, element, attr, ctrl, $sniffer, $browser);
                var urlValidator = function(value) {
                    return validate(ctrl, "url", ctrl.$isEmpty(value) || URL_REGEXP.test(value), value)
                };
                ctrl.$formatters.push(urlValidator), ctrl.$parsers.push(urlValidator)
            },
            email: function(scope, element, attr, ctrl, $sniffer, $browser) {
                textInputType(scope, element, attr, ctrl, $sniffer, $browser);
                var emailValidator = function(value) {
                    return validate(ctrl, "email", ctrl.$isEmpty(value) || EMAIL_REGEXP.test(value), value)
                };
                ctrl.$formatters.push(emailValidator), ctrl.$parsers.push(emailValidator)
            },
            radio: function(scope, element, attr, ctrl) {
                isUndefined(attr.name) && element.attr("name", nextUid());
                element.on("click", function() {
                    element[0].checked && scope.$apply(function() {
                        ctrl.$setViewValue(attr.value)
                    })
                }), ctrl.$render = function() {
                    var value = attr.value;
                    element[0].checked = value == ctrl.$viewValue
                }, attr.$observe("value", ctrl.$render)
            },
            checkbox: function(scope, element, attr, ctrl) {
                var trueValue = attr.ngTrueValue,
                    falseValue = attr.ngFalseValue;
                isString(trueValue) || (trueValue = !0);
                isString(falseValue) || (falseValue = !1);
                element.on("click", function() {
                    scope.$apply(function() {
                        ctrl.$setViewValue(element[0].checked)
                    })
                }), ctrl.$render = function() {
                    element[0].checked = ctrl.$viewValue
                }, ctrl.$isEmpty = function(value) {
                    return value !== trueValue
                }, ctrl.$formatters.push(function(value) {
                    return value === trueValue
                }), ctrl.$parsers.push(function(value) {
                    return value ? trueValue : falseValue
                })
            },
            hidden: noop,
            button: noop,
            submit: noop,
            reset: noop,
            file: noop
        };

    function validate(ctrl, validatorName, validity, value) {
        return ctrl.$setValidity(validatorName, validity), validity ? value : undefined
    }

    function testFlags(validity, flags) {
        var i;
        if (flags)
            for (i = 0; i < flags.length; ++i)
                if (validity[flags[i]]) return !0;
        return !1
    }

    function textInputType(scope, element, attr, ctrl, $sniffer, $browser) {
        var validity = element.prop(VALIDITY_STATE_PROPERTY),
            placeholder = element[0].placeholder,
            noevent = {};
        if (ctrl.$$validityState = validity, !$sniffer.android) {
            var composing = !1;
            element.on("compositionstart", function(data) {
                composing = !0
            }), element.on("compositionend", function() {
                composing = !1, listener()
            })
        }
        var listener = function(ev) {
            if (!composing) {
                var value = element.val();
                if (msie && "input" === (ev || noevent).type && element[0].placeholder !== placeholder) placeholder = element[0].placeholder;
                else {
                    toBoolean(attr.ngTrim || "T") && (value = trim(value));
                    var revalidate = validity && ctrl.$$hasNativeValidators;
                    (ctrl.$viewValue !== value || "" === value && revalidate) && (scope.$$phase ? ctrl.$setViewValue(value) : scope.$apply(function() {
                        ctrl.$setViewValue(value)
                    }))
                }
            }
        };
        if ($sniffer.hasEvent("input")) element.on("input", listener);
        else {
            var timeout, deferListener = function() {
                timeout || (timeout = $browser.defer(function() {
                    listener(), timeout = null
                }))
            };
            element.on("keydown", function(event) {
                var key = event.keyCode;
                91 === key || 15 < key && key < 19 || 37 <= key && key <= 40 || deferListener()
            }), $sniffer.hasEvent("paste") && element.on("paste cut", deferListener)
        }
        element.on("change", listener), ctrl.$render = function() {
            element.val(ctrl.$isEmpty(ctrl.$viewValue) ? "" : ctrl.$viewValue)
        };
        var patternValidator, match, pattern = attr.ngPattern;
        if (pattern) {
            var validateRegex = function(regexp, value) {
                return validate(ctrl, "pattern", ctrl.$isEmpty(value) || regexp.test(value), value)
            };
            patternValidator = (match = pattern.match(/^\/(.*)\/([gim]*)$/)) ? (pattern = new RegExp(match[1], match[2]), function(value) {
                return validateRegex(pattern, value)
            }) : function(value) {
                var patternObj = scope.$eval(pattern);
                if (!patternObj || !patternObj.test) throw minErr("ngPattern")("noregexp", "Expected {0} to be a RegExp but was {1}. Element: {2}", pattern, patternObj, startingTag(element));
                return validateRegex(patternObj, value)
            }, ctrl.$formatters.push(patternValidator), ctrl.$parsers.push(patternValidator)
        }
        if (attr.ngMinlength) {
            var minlength = int(attr.ngMinlength),
                minLengthValidator = function(value) {
                    return validate(ctrl, "minlength", ctrl.$isEmpty(value) || value.length >= minlength, value)
                };
            ctrl.$parsers.push(minLengthValidator), ctrl.$formatters.push(minLengthValidator)
        }
        if (attr.ngMaxlength) {
            var maxlength = int(attr.ngMaxlength),
                maxLengthValidator = function(value) {
                    return validate(ctrl, "maxlength", ctrl.$isEmpty(value) || value.length <= maxlength, value)
                };
            ctrl.$parsers.push(maxLengthValidator), ctrl.$formatters.push(maxLengthValidator)
        }
    }
    var numberBadFlags = ["badInput"];
    var inputDirective = ["$browser", "$sniffer", function($browser, $sniffer) {
            return {
                restrict: "E",
                require: "?ngModel",
                link: function(scope, element, attr, ctrl) {
                    ctrl && (inputType[lowercase(attr.type)] || inputType.text)(scope, element, attr, ctrl, $sniffer, $browser)
                }
            }
        }],
        VALID_CLASS = "ng-valid",
        INVALID_CLASS = "ng-invalid",
        PRISTINE_CLASS = "ng-pristine",
        DIRTY_CLASS = "ng-dirty",
        NgModelController = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", function($scope, $exceptionHandler, $attr, $element, $parse, $animate) {
            this.$viewValue = Number.NaN, this.$modelValue = Number.NaN, this.$parsers = [], this.$formatters = [], this.$viewChangeListeners = [], this.$pristine = !0, this.$dirty = !1, this.$valid = !0, this.$invalid = !1, this.$name = $attr.name;
            var ngModelGet = $parse($attr.ngModel),
                ngModelSet = ngModelGet.assign;
            if (!ngModelSet) throw minErr("ngModel")("nonassign", "Expression '{0}' is non-assignable. Element: {1}", $attr.ngModel, startingTag($element));
            this.$render = noop, this.$isEmpty = function(value) {
                return isUndefined(value) || "" === value || null === value || value != value
            };
            var parentForm = $element.inheritedData("$formController") || nullFormCtrl,
                invalidCount = 0,
                $error = this.$error = {};

            function toggleValidCss(isValid, validationErrorKey) {
                validationErrorKey = validationErrorKey ? "-" + snake_case(validationErrorKey, "-") : "", $animate.removeClass($element, (isValid ? INVALID_CLASS : VALID_CLASS) + validationErrorKey), $animate.addClass($element, (isValid ? VALID_CLASS : INVALID_CLASS) + validationErrorKey)
            }
            $element.addClass(PRISTINE_CLASS), toggleValidCss(!0), this.$setValidity = function(validationErrorKey, isValid) {
                $error[validationErrorKey] !== !isValid && (isValid ? ($error[validationErrorKey] && invalidCount--, invalidCount || (toggleValidCss(!0), this.$valid = !0, this.$invalid = !1)) : (toggleValidCss(!1), this.$invalid = !0, this.$valid = !1, invalidCount++), $error[validationErrorKey] = !isValid, toggleValidCss(isValid, validationErrorKey), parentForm.$setValidity(validationErrorKey, isValid, this))
            }, this.$setPristine = function() {
                this.$dirty = !1, this.$pristine = !0, $animate.removeClass($element, DIRTY_CLASS), $animate.addClass($element, PRISTINE_CLASS)
            }, this.$setViewValue = function(value) {
                this.$viewValue = value, this.$pristine && (this.$dirty = !0, this.$pristine = !1, $animate.removeClass($element, PRISTINE_CLASS), $animate.addClass($element, DIRTY_CLASS), parentForm.$setDirty()), forEach(this.$parsers, function(fn) {
                    value = fn(value)
                }), this.$modelValue !== value && (this.$modelValue = value, ngModelSet($scope, value), forEach(this.$viewChangeListeners, function(listener) {
                    try {
                        listener()
                    } catch (e) {
                        $exceptionHandler(e)
                    }
                }))
            };
            var ctrl = this;
            $scope.$watch(function() {
                var value = ngModelGet($scope);
                if (ctrl.$modelValue !== value) {
                    var formatters = ctrl.$formatters,
                        idx = formatters.length;
                    for (ctrl.$modelValue = value; idx--;) value = formatters[idx](value);
                    ctrl.$viewValue !== value && (ctrl.$viewValue = value, ctrl.$render())
                }
                return value
            })
        }],
        ngModelDirective = function() {
            return {
                require: ["ngModel", "^?form"],
                controller: NgModelController,
                link: function(scope, element, attr, ctrls) {
                    var modelCtrl = ctrls[0],
                        formCtrl = ctrls[1] || nullFormCtrl;
                    formCtrl.$addControl(modelCtrl), scope.$on("$destroy", function() {
                        formCtrl.$removeControl(modelCtrl)
                    })
                }
            }
        },
        ngChangeDirective = valueFn({
            require: "ngModel",
            link: function(scope, element, attr, ctrl) {
                ctrl.$viewChangeListeners.push(function() {
                    scope.$eval(attr.ngChange)
                })
            }
        }),
        requiredDirective = function() {
            return {
                require: "?ngModel",
                link: function(scope, elm, attr, ctrl) {
                    if (ctrl) {
                        attr.required = !0;
                        var validator = function(value) {
                            return attr.required && ctrl.$isEmpty(value) ? void ctrl.$setValidity("required", !1) : (ctrl.$setValidity("required", !0), value)
                        };
                        ctrl.$formatters.push(validator), ctrl.$parsers.unshift(validator), attr.$observe("required", function() {
                            validator(ctrl.$viewValue)
                        })
                    }
                }
            }
        },
        ngListDirective = function() {
            return {
                require: "ngModel",
                link: function(scope, element, attr, ctrl) {
                    var match = /\/(.*)\//.exec(attr.ngList),
                        separator = match && new RegExp(match[1]) || attr.ngList || ",";
                    ctrl.$parsers.push(function(viewValue) {
                        if (!isUndefined(viewValue)) {
                            var list = [];
                            return viewValue && forEach(viewValue.split(separator), function(value) {
                                value && list.push(trim(value))
                            }), list
                        }
                    }), ctrl.$formatters.push(function(value) {
                        return isArray(value) ? value.join(", ") : undefined
                    }), ctrl.$isEmpty = function(value) {
                        return !value || !value.length
                    }
                }
            }
        },
        CONSTANT_VALUE_REGEXP = /^(true|false|\d+)$/,
        ngValueDirective = function() {
            return {
                priority: 100,
                compile: function(tpl, tplAttr) {
                    return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue) ? function(scope, elm, attr) {
                        attr.$set("value", scope.$eval(attr.ngValue))
                    } : function(scope, elm, attr) {
                        scope.$watch(attr.ngValue, function(value) {
                            attr.$set("value", value)
                        })
                    }
                }
            }
        },
        ngBindDirective = ngDirective({
            compile: function(templateElement) {
                return templateElement.addClass("ng-binding"),
                    function(scope, element, attr) {
                        element.data("$binding", attr.ngBind), scope.$watch(attr.ngBind, function(value) {
                            element.text(value == undefined ? "" : value)
                        })
                    }
            }
        }),
        ngBindTemplateDirective = ["$interpolate", function($interpolate) {
            return function(scope, element, attr) {
                var interpolateFn = $interpolate(element.attr(attr.$attr.ngBindTemplate));
                element.addClass("ng-binding").data("$binding", interpolateFn), attr.$observe("ngBindTemplate", function(value) {
                    element.text(value)
                })
            }
        }],
        ngBindHtmlDirective = ["$sce", "$parse", function($sce, $parse) {
            return {
                compile: function(tElement) {
                    return tElement.addClass("ng-binding"),
                        function(scope, element, attr) {
                            element.data("$binding", attr.ngBindHtml);
                            var parsed = $parse(attr.ngBindHtml);
                            scope.$watch(function() {
                                return (parsed(scope) || "").toString()
                            }, function(value) {
                                element.html($sce.getTrustedHtml(parsed(scope)) || "")
                            })
                        }
                }
            }
        }];

    function classDirective(name, selector) {
        return name = "ngClass" + name, ["$animate", function($animate) {
            return {
                restrict: "AC",
                link: function(scope, element, attr) {
                    var oldVal;

                    function addClasses(classes) {
                        var newClasses = digestClassCounts(classes, 1);
                        attr.$addClass(newClasses)
                    }

                    function digestClassCounts(classes, count) {
                        var classCounts = element.data("$classCounts") || {},
                            classesToUpdate = [];
                        return forEach(classes, function(className) {
                            (0 < count || classCounts[className]) && (classCounts[className] = (classCounts[className] || 0) + count, classCounts[className] === +(0 < count) && classesToUpdate.push(className))
                        }), element.data("$classCounts", classCounts), classesToUpdate.join(" ")
                    }

                    function ngClassWatchAction(newVal) {
                        if (!0 === selector || scope.$index % 2 === selector) {
                            var newClasses = arrayClasses(newVal || []);
                            if (oldVal) {
                                if (!equals(newVal, oldVal)) {
                                    ! function(oldClasses, newClasses) {
                                        var toAdd = arrayDifference(newClasses, oldClasses),
                                            toRemove = arrayDifference(oldClasses, newClasses);
                                        toRemove = digestClassCounts(toRemove, -1), 0 === (toAdd = digestClassCounts(toAdd, 1)).length ? $animate.removeClass(element, toRemove) : 0 === toRemove.length ? $animate.addClass(element, toAdd) : $animate.setClass(element, toAdd, toRemove)
                                    }(arrayClasses(oldVal), newClasses)
                                }
                            } else addClasses(newClasses)
                        }
                        oldVal = shallowCopy(newVal)
                    }
                    scope.$watch(attr[name], ngClassWatchAction, !0), attr.$observe("class", function(value) {
                        ngClassWatchAction(scope.$eval(attr[name]))
                    }), "ngClass" !== name && scope.$watch("$index", function($index, old$index) {
                        var mod = 1 & $index;
                        if (mod !== (1 & old$index)) {
                            var classes = arrayClasses(scope.$eval(attr[name]));
                            mod === selector ? addClasses(classes) : function(classes) {
                                var newClasses = digestClassCounts(classes, -1);
                                attr.$removeClass(newClasses)
                            }(classes)
                        }
                    })
                }
            };

            function arrayDifference(tokens1, tokens2) {
                var values = [];
                outer: for (var i = 0; i < tokens1.length; i++) {
                    for (var token = tokens1[i], j = 0; j < tokens2.length; j++)
                        if (token == tokens2[j]) continue outer;
                    values.push(token)
                }
                return values
            }

            function arrayClasses(classVal) {
                if (isArray(classVal)) return classVal;
                if (isString(classVal)) return classVal.split(" ");
                if (isObject(classVal)) {
                    var classes = [];
                    return forEach(classVal, function(v, k) {
                        v && (classes = classes.concat(k.split(" ")))
                    }), classes
                }
                return classVal
            }
        }]
    }
    var ngClassDirective = classDirective("", !0),
        ngClassOddDirective = classDirective("Odd", 0),
        ngClassEvenDirective = classDirective("Even", 1),
        ngCloakDirective = ngDirective({
            compile: function(element, attr) {
                attr.$set("ngCloak", undefined), element.removeClass("ng-cloak")
            }
        }),
        ngControllerDirective = [function() {
            return {
                scope: !0,
                controller: "@",
                priority: 500
            }
        }],
        ngEventDirectives = {};
    forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(name) {
        var directiveName = directiveNormalize("ng-" + name);
        ngEventDirectives[directiveName] = ["$parse", function($parse) {
            return {
                compile: function($element, attr) {
                    var fn = $parse(attr[directiveName]);
                    return function(scope, element) {
                        element.on(lowercase(name), function(event) {
                            scope.$apply(function() {
                                fn(scope, {
                                    $event: event
                                })
                            })
                        })
                    }
                }
            }
        }]
    });
    var ngIfDirective = ["$animate", function($animate) {
            return {
                transclude: "element",
                priority: 600,
                terminal: !0,
                restrict: "A",
                $$tlb: !0,
                link: function($scope, $element, $attr, ctrl, $transclude) {
                    var block, childScope, previousElements;
                    $scope.$watch($attr.ngIf, function(value) {
                        toBoolean(value) ? childScope || (childScope = $scope.$new(), $transclude(childScope, function(clone) {
                            clone[clone.length++] = document.createComment(" end ngIf: " + $attr.ngIf + " "), block = {
                                clone: clone
                            }, $animate.enter(clone, $element.parent(), $element)
                        })) : (previousElements && (previousElements.remove(), previousElements = null), childScope && (childScope.$destroy(), childScope = null), block && (previousElements = getBlockElements(block.clone), $animate.leave(previousElements, function() {
                            previousElements = null
                        }), block = null))
                    })
                }
            }
        }],
        ngIncludeDirective = ["$http", "$templateCache", "$anchorScroll", "$animate", "$sce", function($http, $templateCache, $anchorScroll, $animate, $sce) {
            return {
                restrict: "ECA",
                priority: 400,
                terminal: !0,
                transclude: "element",
                controller: angular.noop,
                compile: function(element, attr) {
                    var srcExp = attr.ngInclude || attr.src,
                        onloadExp = attr.onload || "",
                        autoScrollExp = attr.autoscroll;
                    return function(scope, $element, $attr, ctrl, $transclude) {
                        var currentScope, previousElement, currentElement, changeCounter = 0,
                            cleanupLastIncludeContent = function() {
                                previousElement && (previousElement.remove(), previousElement = null), currentScope && (currentScope.$destroy(), currentScope = null), currentElement && ($animate.leave(currentElement, function() {
                                    previousElement = null
                                }), previousElement = currentElement, currentElement = null)
                            };
                        scope.$watch($sce.parseAsResourceUrl(srcExp), function(src) {
                            var afterAnimation = function() {
                                    !isDefined(autoScrollExp) || autoScrollExp && !scope.$eval(autoScrollExp) || $anchorScroll()
                                },
                                thisChangeId = ++changeCounter;
                            src ? ($http.get(src, {
                                cache: $templateCache
                            }).success(function(response) {
                                if (thisChangeId === changeCounter) {
                                    var newScope = scope.$new();
                                    ctrl.template = response;
                                    var clone = $transclude(newScope, function(clone) {
                                        cleanupLastIncludeContent(), $animate.enter(clone, null, $element, afterAnimation)
                                    });
                                    currentElement = clone, (currentScope = newScope).$emit("$includeContentLoaded"), scope.$eval(onloadExp)
                                }
                            }).error(function() {
                                thisChangeId === changeCounter && cleanupLastIncludeContent()
                            }), scope.$emit("$includeContentRequested")) : (cleanupLastIncludeContent(), ctrl.template = null)
                        })
                    }
                }
            }
        }],
        ngIncludeFillContentDirective = ["$compile", function($compile) {
            return {
                restrict: "ECA",
                priority: -400,
                require: "ngInclude",
                link: function(scope, $element, $attr, ctrl) {
                    $element.html(ctrl.template), $compile($element.contents())(scope)
                }
            }
        }],
        ngInitDirective = ngDirective({
            priority: 450,
            compile: function() {
                return {
                    pre: function(scope, element, attrs) {
                        scope.$eval(attrs.ngInit)
                    }
                }
            }
        }),
        ngNonBindableDirective = ngDirective({
            terminal: !0,
            priority: 1e3
        }),
        ngPluralizeDirective = ["$locale", "$interpolate", function($locale, $interpolate) {
            var BRACE = /{}/g;
            return {
                restrict: "EA",
                link: function(scope, element, attr) {
                    var numberExp = attr.count,
                        whenExp = attr.$attr.when && element.attr(attr.$attr.when),
                        offset = attr.offset || 0,
                        whens = scope.$eval(whenExp) || {},
                        whensExpFns = {},
                        startSymbol = $interpolate.startSymbol(),
                        endSymbol = $interpolate.endSymbol(),
                        isWhen = /^when(Minus)?(.+)$/;
                    forEach(attr, function(expression, attributeName) {
                        isWhen.test(attributeName) && (whens[lowercase(attributeName.replace("when", "").replace("Minus", "-"))] = element.attr(attr.$attr[attributeName]))
                    }), forEach(whens, function(expression, key) {
                        whensExpFns[key] = $interpolate(expression.replace(BRACE, startSymbol + numberExp + "-" + offset + endSymbol))
                    }), scope.$watch(function() {
                        var value = parseFloat(scope.$eval(numberExp));
                        return isNaN(value) ? "" : (value in whens || (value = $locale.pluralCat(value - offset)), whensExpFns[value](scope, element, !0))
                    }, function(newVal) {
                        element.text(newVal)
                    })
                }
            }
        }],
        ngRepeatDirective = ["$parse", "$animate", function($parse, $animate) {
            var ngRepeatMinErr = minErr("ngRepeat");
            return {
                transclude: "element",
                priority: 1e3,
                terminal: !0,
                $$tlb: !0,
                link: function($scope, $element, $attr, ctrl, $transclude) {
                    var trackByExp, trackByExpGetter, trackByIdExpFn, trackByIdArrayFn, trackByIdObjFn, lhs, rhs, valueIdentifier, keyIdentifier, expression = $attr.ngRepeat,
                        match = expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),
                        hashFnLocals = {
                            $id: hashKey
                        };
                    if (!match) throw ngRepeatMinErr("iexp", "Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.", expression);
                    if (lhs = match[1], rhs = match[2], (trackByExp = match[3]) ? (trackByExpGetter = $parse(trackByExp), trackByIdExpFn = function(key, value, index) {
                            return keyIdentifier && (hashFnLocals[keyIdentifier] = key), hashFnLocals[valueIdentifier] = value, hashFnLocals.$index = index, trackByExpGetter($scope, hashFnLocals)
                        }) : (trackByIdArrayFn = function(key, value) {
                            return hashKey(value)
                        }, trackByIdObjFn = function(key) {
                            return key
                        }), !(match = lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/))) throw ngRepeatMinErr("iidexp", "'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.", lhs);
                    valueIdentifier = match[3] || match[1], keyIdentifier = match[2];
                    var lastBlockMap = {};
                    $scope.$watchCollection(rhs, function(collection) {
                        var index, length, nextNode, arrayLength, childScope, key, value, trackById, trackByIdFn, collectionKeys, block, elementsToRemove, previousNode = $element[0],
                            nextBlockMap = {},
                            nextBlockOrder = [];
                        if (isArrayLike(collection)) collectionKeys = collection, trackByIdFn = trackByIdExpFn || trackByIdArrayFn;
                        else {
                            for (key in trackByIdFn = trackByIdExpFn || trackByIdObjFn, collectionKeys = [], collection) collection.hasOwnProperty(key) && "$" != key.charAt(0) && collectionKeys.push(key);
                            collectionKeys.sort()
                        }
                        for (arrayLength = collectionKeys.length, length = nextBlockOrder.length = collectionKeys.length, index = 0; index < length; index++)
                            if (assertNotHasOwnProperty(trackById = trackByIdFn(key = collection === collectionKeys ? index : collectionKeys[index], value = collection[key], index), "`track by` id"), lastBlockMap.hasOwnProperty(trackById)) block = lastBlockMap[trackById], delete lastBlockMap[trackById], nextBlockMap[trackById] = block, nextBlockOrder[index] = block;
                            else {
                                if (nextBlockMap.hasOwnProperty(trackById)) throw forEach(nextBlockOrder, function(block) {
                                    block && block.scope && (lastBlockMap[block.id] = block)
                                }), ngRepeatMinErr("dupes", "Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}", expression, trackById);
                                nextBlockOrder[index] = {
                                    id: trackById
                                }, nextBlockMap[trackById] = !1
                            } for (key in lastBlockMap) lastBlockMap.hasOwnProperty(key) && (elementsToRemove = getBlockElements((block = lastBlockMap[key]).clone), $animate.leave(elementsToRemove), forEach(elementsToRemove, function(element) {
                            element.$$NG_REMOVED = !0
                        }), block.scope.$destroy());
                        for (index = 0, length = collectionKeys.length; index < length; index++) {
                            if (value = collection[key = collection === collectionKeys ? index : collectionKeys[index]], block = nextBlockOrder[index], nextBlockOrder[index - 1] && (previousNode = getBlockEnd(nextBlockOrder[index - 1])), block.scope) {
                                for (childScope = block.scope, nextNode = previousNode;
                                    (nextNode = nextNode.nextSibling) && nextNode.$$NG_REMOVED;);
                                getBlockStart(block) != nextNode && $animate.move(getBlockElements(block.clone), null, jqLite(previousNode)), previousNode = getBlockEnd(block)
                            } else childScope = $scope.$new();
                            childScope[valueIdentifier] = value, keyIdentifier && (childScope[keyIdentifier] = key), childScope.$index = index, childScope.$first = 0 === index, childScope.$last = index === arrayLength - 1, childScope.$middle = !(childScope.$first || childScope.$last), childScope.$odd = !(childScope.$even = 0 == (1 & index)), block.scope || $transclude(childScope, function(clone) {
                                clone[clone.length++] = document.createComment(" end ngRepeat: " + expression + " "), $animate.enter(clone, null, jqLite(previousNode)), previousNode = clone, block.scope = childScope, block.clone = clone, nextBlockMap[block.id] = block
                            })
                        }
                        lastBlockMap = nextBlockMap
                    })
                }
            };

            function getBlockStart(block) {
                return block.clone[0]
            }

            function getBlockEnd(block) {
                return block.clone[block.clone.length - 1]
            }
        }],
        ngShowDirective = ["$animate", function($animate) {
            return function(scope, element, attr) {
                scope.$watch(attr.ngShow, function(value) {
                    $animate[toBoolean(value) ? "removeClass" : "addClass"](element, "ng-hide")
                })
            }
        }],
        ngHideDirective = ["$animate", function($animate) {
            return function(scope, element, attr) {
                scope.$watch(attr.ngHide, function(value) {
                    $animate[toBoolean(value) ? "addClass" : "removeClass"](element, "ng-hide")
                })
            }
        }],
        ngStyleDirective = ngDirective(function(scope, element, attr) {
            scope.$watch(attr.ngStyle, function(newStyles, oldStyles) {
                oldStyles && newStyles !== oldStyles && forEach(oldStyles, function(val, style) {
                    element.css(style, "")
                }), newStyles && element.css(newStyles)
            }, !0)
        }),
        ngSwitchDirective = ["$animate", function($animate) {
            return {
                restrict: "EA",
                require: "ngSwitch",
                controller: ["$scope", function() {
                    this.cases = {}
                }],
                link: function(scope, element, attr, ngSwitchController) {
                    var watchExpr = attr.ngSwitch || attr.on,
                        selectedTranscludes = [],
                        selectedElements = [],
                        previousElements = [],
                        selectedScopes = [];
                    scope.$watch(watchExpr, function(value) {
                        var i, ii;
                        for (i = 0, ii = previousElements.length; i < ii; ++i) previousElements[i].remove();
                        for (previousElements.length = 0, i = 0, ii = selectedScopes.length; i < ii; ++i) {
                            var selected = selectedElements[i];
                            selectedScopes[i].$destroy(), previousElements[i] = selected, $animate.leave(selected, function() {
                                previousElements.splice(i, 1)
                            })
                        }
                        selectedElements.length = 0, selectedScopes.length = 0, (selectedTranscludes = ngSwitchController.cases["!" + value] || ngSwitchController.cases["?"]) && (scope.$eval(attr.change), forEach(selectedTranscludes, function(selectedTransclude) {
                            var selectedScope = scope.$new();
                            selectedScopes.push(selectedScope), selectedTransclude.transclude(selectedScope, function(caseElement) {
                                var anchor = selectedTransclude.element;
                                selectedElements.push(caseElement), $animate.enter(caseElement, anchor.parent(), anchor)
                            })
                        }))
                    })
                }
            }
        }],
        ngSwitchWhenDirective = ngDirective({
            transclude: "element",
            priority: 800,
            require: "^ngSwitch",
            link: function(scope, element, attrs, ctrl, $transclude) {
                ctrl.cases["!" + attrs.ngSwitchWhen] = ctrl.cases["!" + attrs.ngSwitchWhen] || [], ctrl.cases["!" + attrs.ngSwitchWhen].push({
                    transclude: $transclude,
                    element: element
                })
            }
        }),
        ngSwitchDefaultDirective = ngDirective({
            transclude: "element",
            priority: 800,
            require: "^ngSwitch",
            link: function(scope, element, attr, ctrl, $transclude) {
                ctrl.cases["?"] = ctrl.cases["?"] || [], ctrl.cases["?"].push({
                    transclude: $transclude,
                    element: element
                })
            }
        }),
        ngTranscludeDirective = ngDirective({
            link: function($scope, $element, $attrs, controller, $transclude) {
                if (!$transclude) throw minErr("ngTransclude")("orphan", "Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}", startingTag($element));
                $transclude(function(clone) {
                    $element.empty(), $element.append(clone)
                })
            }
        }),
        scriptDirective = ["$templateCache", function($templateCache) {
            return {
                restrict: "E",
                terminal: !0,
                compile: function(element, attr) {
                    if ("text/ng-template" == attr.type) {
                        var templateUrl = attr.id,
                            text = element[0].text;
                        $templateCache.put(templateUrl, text)
                    }
                }
            }
        }],
        ngOptionsMinErr = minErr("ngOptions"),
        ngOptionsDirective = valueFn({
            terminal: !0
        }),
        selectDirective = ["$compile", "$parse", function($compile, $parse) {
            var NG_OPTIONS_REGEXP = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
                nullModelCtrl = {
                    $setViewValue: noop
                };
            return {
                restrict: "E",
                require: ["select", "?ngModel"],
                controller: ["$element", "$scope", "$attrs", function($element, $scope, $attrs) {
                    var unknownOption, self = this,
                        optionsMap = {},
                        ngModelCtrl = nullModelCtrl;
                    self.databound = $attrs.ngModel, self.init = function(ngModelCtrl_, nullOption_, unknownOption_) {
                        ngModelCtrl = ngModelCtrl_, nullOption_, unknownOption = unknownOption_
                    }, self.addOption = function(value) {
                        assertNotHasOwnProperty(value, '"option value"'), optionsMap[value] = !0, ngModelCtrl.$viewValue == value && ($element.val(value), unknownOption.parent() && unknownOption.remove())
                    }, self.removeOption = function(value) {
                        this.hasOption(value) && (delete optionsMap[value], ngModelCtrl.$viewValue == value && this.renderUnknownOption(value))
                    }, self.renderUnknownOption = function(val) {
                        var unknownVal = "? " + hashKey(val) + " ?";
                        unknownOption.val(unknownVal), $element.prepend(unknownOption), $element.val(unknownVal), unknownOption.prop("selected", !0)
                    }, self.hasOption = function(value) {
                        return optionsMap.hasOwnProperty(value)
                    }, $scope.$on("$destroy", function() {
                        self.renderUnknownOption = noop
                    })
                }],
                link: function(scope, element, attr, ctrls) {
                    if (ctrls[1]) {
                        for (var emptyOption, selectCtrl = ctrls[0], ngModelCtrl = ctrls[1], multiple = attr.multiple, optionsExp = attr.ngOptions, nullOption = !1, optionTemplate = jqLite(document.createElement("option")), optGroupTemplate = jqLite(document.createElement("optgroup")), unknownOption = optionTemplate.clone(), i = 0, children = element.children(), ii = children.length; i < ii; i++)
                            if ("" === children[i].value) {
                                emptyOption = nullOption = children.eq(i);
                                break
                            } selectCtrl.init(ngModelCtrl, nullOption, unknownOption), multiple && (ngModelCtrl.$isEmpty = function(value) {
                            return !value || 0 === value.length
                        }), optionsExp ? function(scope, selectElement, ctrl) {
                            var match;
                            if (!(match = optionsExp.match(NG_OPTIONS_REGEXP))) throw ngOptionsMinErr("iexp", "Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}", optionsExp, startingTag(selectElement));
                            var displayFn = $parse(match[2] || match[1]),
                                valueName = match[4] || match[6],
                                keyName = match[5],
                                groupByFn = $parse(match[3] || ""),
                                valueFn = $parse(match[2] ? match[1] : valueName),
                                valuesFn = $parse(match[7]),
                                trackFn = match[8] ? $parse(match[8]) : null,
                                optionGroupsCache = [
                                    [{
                                        element: selectElement,
                                        label: ""
                                    }]
                                ];
                            nullOption && ($compile(nullOption)(scope), nullOption.removeClass("ng-scope"), nullOption.remove());
                            selectElement.empty(), selectElement.on("change", function() {
                                scope.$apply(function() {
                                    var optionGroup, key, value, optionElement, index, groupIndex, length, groupLength, trackIndex, collection = valuesFn(scope) || [],
                                        locals = {};
                                    if (multiple) {
                                        for (value = [], groupIndex = 0, groupLength = optionGroupsCache.length; groupIndex < groupLength; groupIndex++)
                                            for (index = 1, length = (optionGroup = optionGroupsCache[groupIndex]).length; index < length; index++)
                                                if ((optionElement = optionGroup[index].element)[0].selected) {
                                                    if (key = optionElement.val(), keyName && (locals[keyName] = key), trackFn)
                                                        for (trackIndex = 0; trackIndex < collection.length && (locals[valueName] = collection[trackIndex], trackFn(scope, locals) != key); trackIndex++);
                                                    else locals[valueName] = collection[key];
                                                    value.push(valueFn(scope, locals))
                                                }
                                    } else if ("?" == (key = selectElement.val())) value = undefined;
                                    else if ("" === key) value = null;
                                    else if (trackFn) {
                                        for (trackIndex = 0; trackIndex < collection.length; trackIndex++)
                                            if (locals[valueName] = collection[trackIndex], trackFn(scope, locals) == key) {
                                                value = valueFn(scope, locals);
                                                break
                                            }
                                    } else locals[valueName] = collection[key], keyName && (locals[keyName] = key), value = valueFn(scope, locals);
                                    ctrl.$setViewValue(value), render()
                                })
                            }), ctrl.$render = render, scope.$watchCollection(valuesFn, render), multiple && scope.$watchCollection(function() {
                                return ctrl.$modelValue
                            }, render);

                            function render() {
                                var optionGroupName, optionGroup, option, existingParent, existingOptions, existingOption, key, groupLength, length, groupIndex, index, selected, lastElement, element, label, optionGroups = {
                                        "": []
                                    },
                                    optionGroupNames = [""],
                                    modelValue = ctrl.$modelValue,
                                    values = valuesFn(scope) || [],
                                    keys = keyName ? sortedKeys(values) : values,
                                    locals = {},
                                    selectedSet = function() {
                                        var selectedSet = !1;
                                        if (multiple) {
                                            var modelValue = ctrl.$modelValue;
                                            if (trackFn && isArray(modelValue)) {
                                                selectedSet = new HashMap([]);
                                                for (var locals = {}, trackIndex = 0; trackIndex < modelValue.length; trackIndex++) locals[valueName] = modelValue[trackIndex], selectedSet.put(trackFn(scope, locals), modelValue[trackIndex])
                                            } else selectedSet = new HashMap(modelValue)
                                        }
                                        return selectedSet
                                    }();
                                for (index = 0; length = keys.length, index < length; index++) {
                                    if (key = index, keyName) {
                                        if ("$" === (key = keys[index]).charAt(0)) continue;
                                        locals[keyName] = key
                                    }
                                    if (locals[valueName] = values[key], optionGroupName = groupByFn(scope, locals) || "", (optionGroup = optionGroups[optionGroupName]) || (optionGroup = optionGroups[optionGroupName] = [], optionGroupNames.push(optionGroupName)), multiple) selected = isDefined(selectedSet.remove(trackFn ? trackFn(scope, locals) : valueFn(scope, locals)));
                                    else {
                                        if (trackFn) {
                                            var modelCast = {};
                                            modelCast[valueName] = modelValue, selected = trackFn(scope, modelCast) === trackFn(scope, locals)
                                        } else selected = modelValue === valueFn(scope, locals);
                                        selectedSet = selectedSet || selected
                                    }
                                    label = isDefined(label = displayFn(scope, locals)) ? label : "", optionGroup.push({
                                        id: trackFn ? trackFn(scope, locals) : keyName ? keys[index] : index,
                                        label: label,
                                        selected: selected
                                    })
                                }
                                for (multiple || (nullOption || null === modelValue ? optionGroups[""].unshift({
                                        id: "",
                                        label: "",
                                        selected: !selectedSet
                                    }) : selectedSet || optionGroups[""].unshift({
                                        id: "?",
                                        label: "",
                                        selected: !0
                                    })), groupIndex = 0, groupLength = optionGroupNames.length; groupIndex < groupLength; groupIndex++) {
                                    for (optionGroupName = optionGroupNames[groupIndex], optionGroup = optionGroups[optionGroupName], optionGroupsCache.length <= groupIndex ? (existingParent = {
                                            element: optGroupTemplate.clone().attr("label", optionGroupName),
                                            label: optionGroup.label
                                        }, existingOptions = [existingParent], optionGroupsCache.push(existingOptions), selectElement.append(existingParent.element)) : (existingOptions = optionGroupsCache[groupIndex], (existingParent = existingOptions[0]).label != optionGroupName && existingParent.element.attr("label", existingParent.label = optionGroupName)), lastElement = null, index = 0, length = optionGroup.length; index < length; index++) option = optionGroup[index], (existingOption = existingOptions[index + 1]) ? (lastElement = existingOption.element, existingOption.label !== option.label && lastElement.text(existingOption.label = option.label), existingOption.id !== option.id && lastElement.val(existingOption.id = option.id), lastElement[0].selected !== option.selected && (lastElement.prop("selected", existingOption.selected = option.selected), msie && lastElement.prop("selected", existingOption.selected))) : ("" === option.id && nullOption ? element = nullOption : (element = optionTemplate.clone()).val(option.id).prop("selected", option.selected).attr("selected", option.selected).text(option.label), existingOptions.push(existingOption = {
                                        element: element,
                                        label: option.label,
                                        id: option.id,
                                        selected: option.selected
                                    }), lastElement ? lastElement.after(element) : existingParent.element.append(element), lastElement = element);
                                    for (index++; existingOptions.length > index;) existingOptions.pop().element.remove()
                                }
                                for (; optionGroupsCache.length > groupIndex;) optionGroupsCache.pop()[0].element.remove()
                            }
                        }(scope, element, ngModelCtrl) : multiple ? function(scope, selectElement, ctrl) {
                            var lastView;
                            ctrl.$render = function() {
                                var items = new HashMap(ctrl.$viewValue);
                                forEach(selectElement.find("option"), function(option) {
                                    option.selected = isDefined(items.get(option.value))
                                })
                            }, scope.$watch(function() {
                                equals(lastView, ctrl.$viewValue) || (lastView = shallowCopy(ctrl.$viewValue), ctrl.$render())
                            }), selectElement.on("change", function() {
                                scope.$apply(function() {
                                    var array = [];
                                    forEach(selectElement.find("option"), function(option) {
                                        option.selected && array.push(option.value)
                                    }), ctrl.$setViewValue(array)
                                })
                            })
                        }(scope, element, ngModelCtrl) : function(scope, selectElement, ngModelCtrl, selectCtrl) {
                            ngModelCtrl.$render = function() {
                                var viewValue = ngModelCtrl.$viewValue;
                                selectCtrl.hasOption(viewValue) ? (unknownOption.parent() && unknownOption.remove(), selectElement.val(viewValue), "" === viewValue && emptyOption.prop("selected", !0)) : isUndefined(viewValue) && emptyOption ? selectElement.val("") : selectCtrl.renderUnknownOption(viewValue)
                            }, selectElement.on("change", function() {
                                scope.$apply(function() {
                                    unknownOption.parent() && unknownOption.remove(), ngModelCtrl.$setViewValue(selectElement.val())
                                })
                            })
                        }(scope, element, ngModelCtrl, selectCtrl)
                    }
                }
            }
        }],
        optionDirective = ["$interpolate", function($interpolate) {
            var nullSelectCtrl = {
                addOption: noop,
                removeOption: noop
            };
            return {
                restrict: "E",
                priority: 100,
                compile: function(element, attr) {
                    if (isUndefined(attr.value)) {
                        var interpolateFn = $interpolate(element.text(), !0);
                        interpolateFn || attr.$set("value", element.text())
                    }
                    return function(scope, element, attr) {
                        var parent = element.parent(),
                            selectCtrl = parent.data("$selectController") || parent.parent().data("$selectController");
                        selectCtrl && selectCtrl.databound ? element.prop("selected", !1) : selectCtrl = nullSelectCtrl, interpolateFn ? scope.$watch(interpolateFn, function(newVal, oldVal) {
                            attr.$set("value", newVal), newVal !== oldVal && selectCtrl.removeOption(oldVal), selectCtrl.addOption(newVal)
                        }) : selectCtrl.addOption(attr.value), element.on("$destroy", function() {
                            selectCtrl.removeOption(attr.value)
                        })
                    }
                }
            }
        }],
        styleDirective = valueFn({
            restrict: "E",
            terminal: !0
        });
    window.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : ((jQuery = window.jQuery) && jQuery.fn.on ? (extend((jqLite = jQuery).fn, {
        scope: JQLitePrototype.scope,
        isolateScope: JQLitePrototype.isolateScope,
        controller: JQLitePrototype.controller,
        injector: JQLitePrototype.injector,
        inheritedData: JQLitePrototype.inheritedData
    }), jqLitePatchJQueryRemove("remove", !0, !0, !1), jqLitePatchJQueryRemove("empty", !1, !1, !1), jqLitePatchJQueryRemove("html", !1, !1, !0)) : jqLite = JQLite, angular.element = jqLite, function(angular) {
        extend(angular, {
            bootstrap: bootstrap,
            copy: copy,
            extend: extend,
            equals: equals,
            element: jqLite,
            forEach: forEach,
            injector: createInjector,
            noop: noop,
            bind: bind,
            toJson: toJson,
            fromJson: fromJson,
            identity: identity,
            isUndefined: isUndefined,
            isDefined: isDefined,
            isString: isString,
            isFunction: isFunction,
            isObject: isObject,
            isNumber: isNumber,
            isElement: isElement,
            isArray: isArray,
            version: version,
            isDate: isDate,
            lowercase: lowercase,
            uppercase: uppercase,
            callbacks: {
                counter: 0
            },
            $$minErr: minErr,
            $$csp: csp
        }), angularModule = function(window) {
            var $injectorMinErr = minErr("$injector"),
                ngMinErr = minErr("ng");

            function ensure(obj, name, factory) {
                return obj[name] || (obj[name] = factory())
            }
            var angular = ensure(window, "angular", Object);
            return angular.$$minErr = angular.$$minErr || minErr, ensure(angular, "module", function() {
                var modules = {};
                return function(name, requires, configFn) {
                    return function(name, context) {
                        if ("hasOwnProperty" === name) throw ngMinErr("badname", "hasOwnProperty is not a valid {0} name", context)
                    }(name, "module"), requires && modules.hasOwnProperty(name) && (modules[name] = null), ensure(modules, name, function() {
                        if (!requires) throw $injectorMinErr("nomod", "Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.", name);
                        var invokeQueue = [],
                            runBlocks = [],
                            config = invokeLater("$injector", "invoke"),
                            moduleInstance = {
                                _invokeQueue: invokeQueue,
                                _runBlocks: runBlocks,
                                requires: requires,
                                name: name,
                                provider: invokeLater("$provide", "provider"),
                                factory: invokeLater("$provide", "factory"),
                                service: invokeLater("$provide", "service"),
                                value: invokeLater("$provide", "value"),
                                constant: invokeLater("$provide", "constant", "unshift"),
                                animation: invokeLater("$animateProvider", "register"),
                                filter: invokeLater("$filterProvider", "register"),
                                controller: invokeLater("$controllerProvider", "register"),
                                directive: invokeLater("$compileProvider", "directive"),
                                config: config,
                                run: function(block) {
                                    return runBlocks.push(block), this
                                }
                            };
                        return configFn && config(configFn), moduleInstance;

                        function invokeLater(provider, method, insertMethod) {
                            return function() {
                                return invokeQueue[insertMethod || "push"]([provider, method, arguments]), moduleInstance
                            }
                        }
                    })
                }
            })
        }(window);
        try {
            angularModule("ngLocale")
        } catch (e) {
            angularModule("ngLocale", []).provider("$locale", $LocaleProvider)
        }
        angularModule("ng", ["ngLocale"], ["$provide", function($provide) {
            $provide.provider({
                $$sanitizeUri: $$SanitizeUriProvider
            }), $provide.provider("$compile", $CompileProvider).directive({
                a: htmlAnchorDirective,
                input: inputDirective,
                textarea: inputDirective,
                form: formDirective,
                script: scriptDirective,
                select: selectDirective,
                style: styleDirective,
                option: optionDirective,
                ngBind: ngBindDirective,
                ngBindHtml: ngBindHtmlDirective,
                ngBindTemplate: ngBindTemplateDirective,
                ngClass: ngClassDirective,
                ngClassEven: ngClassEvenDirective,
                ngClassOdd: ngClassOddDirective,
                ngCloak: ngCloakDirective,
                ngController: ngControllerDirective,
                ngForm: ngFormDirective,
                ngHide: ngHideDirective,
                ngIf: ngIfDirective,
                ngInclude: ngIncludeDirective,
                ngInit: ngInitDirective,
                ngNonBindable: ngNonBindableDirective,
                ngPluralize: ngPluralizeDirective,
                ngRepeat: ngRepeatDirective,
                ngShow: ngShowDirective,
                ngStyle: ngStyleDirective,
                ngSwitch: ngSwitchDirective,
                ngSwitchWhen: ngSwitchWhenDirective,
                ngSwitchDefault: ngSwitchDefaultDirective,
                ngOptions: ngOptionsDirective,
                ngTransclude: ngTranscludeDirective,
                ngModel: ngModelDirective,
                ngList: ngListDirective,
                ngChange: ngChangeDirective,
                required: requiredDirective,
                ngRequired: requiredDirective,
                ngValue: ngValueDirective
            }).directive({
                ngInclude: ngIncludeFillContentDirective
            }).directive(ngAttributeAliasDirectives).directive(ngEventDirectives), $provide.provider({
                $anchorScroll: $AnchorScrollProvider,
                $animate: $AnimateProvider,
                $browser: $BrowserProvider,
                $cacheFactory: $CacheFactoryProvider,
                $controller: $ControllerProvider,
                $document: $DocumentProvider,
                $exceptionHandler: $ExceptionHandlerProvider,
                $filter: $FilterProvider,
                $interpolate: $InterpolateProvider,
                $interval: $IntervalProvider,
                $http: $HttpProvider,
                $httpBackend: $HttpBackendProvider,
                $location: $LocationProvider,
                $log: $LogProvider,
                $parse: $ParseProvider,
                $rootScope: $RootScopeProvider,
                $q: $QProvider,
                $sce: $SceProvider,
                $sceDelegate: $SceDelegateProvider,
                $sniffer: $SnifferProvider,
                $templateCache: $TemplateCacheProvider,
                $timeout: $TimeoutProvider,
                $window: $WindowProvider,
                $$rAF: $$RAFProvider,
                $$asyncCallback: $$AsyncCallbackProvider
            })
        }])
    }(angular), jqLite(document).ready(function() {
        ! function(element, bootstrap) {
            var appElement, module, elements = [element],
                names = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"],
                NG_APP_CLASS_REGEXP = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;

            function append(element) {
                element && elements.push(element)
            }
            forEach(names, function(name) {
                names[name] = !0, append(document.getElementById(name)), name = name.replace(":", "\\:"), element.querySelectorAll && (forEach(element.querySelectorAll("." + name), append), forEach(element.querySelectorAll("." + name + "\\:"), append), forEach(element.querySelectorAll("[" + name + "]"), append))
            }), forEach(elements, function(element) {
                if (!appElement) {
                    var className = " " + element.className + " ",
                        match = NG_APP_CLASS_REGEXP.exec(className);
                    match ? (appElement = element, module = (match[2] || "").replace(/\s+/g, ",")) : forEach(element.attributes, function(attr) {
                        !appElement && names[attr.name] && (appElement = element, module = attr.value)
                    })
                }
            }), appElement && bootstrap(appElement, module ? [module] : [])
        }(document, bootstrap)
    }))
}(window, document), !window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),
    function(window, angular, undefined) {
        "use strict";
        var ngRouteModule = angular.module("ngRoute", ["ng"]).provider("$route", function() {
            function inherit(parent, extra) {
                return angular.extend(new(angular.extend(function() {}, {
                    prototype: parent
                })), extra)
            }
            var routes = {};

            function pathRegExp(path, opts) {
                var insensitive = opts.caseInsensitiveMatch,
                    ret = {
                        originalPath: path,
                        regexp: path
                    },
                    keys = ret.keys = [];
                return path = path.replace(/([().])/g, "\\$1").replace(/(\/)?:(\w+)([\?\*])?/g, function(_, slash, key, option) {
                    var optional = "?" === option ? option : null,
                        star = "*" === option ? option : null;
                    return keys.push({
                        name: key,
                        optional: !!optional
                    }), slash = slash || "", (optional ? "" : slash) + "(?:" + (optional ? slash : "") + (star ? "(.+?)" : "([^/]+)") + (optional || "") + ")" + (optional || "")
                }).replace(/([\/$\*])/g, "\\$1"), ret.regexp = new RegExp("^" + path + "$", insensitive ? "i" : ""), ret
            }
            this.when = function(path, route) {
                if (routes[path] = angular.extend({
                        reloadOnSearch: !0
                    }, route, path && pathRegExp(path, route)), path) {
                    var redirectPath = "/" == path[path.length - 1] ? path.substr(0, path.length - 1) : path + "/";
                    routes[redirectPath] = angular.extend({
                        redirectTo: path
                    }, pathRegExp(redirectPath, route))
                }
                return this
            }, this.otherwise = function(params) {
                return this.when(null, params), this
            }, this.$get = ["$rootScope", "$location", "$routeParams", "$q", "$injector", "$http", "$templateCache", "$sce", function($rootScope, $location, $routeParams, $q, $injector, $http, $templateCache, $sce) {
                var forceReload = !1,
                    $route = {
                        routes: routes,
                        reload: function() {
                            forceReload = !0, $rootScope.$evalAsync(updateRoute)
                        }
                    };
                return $rootScope.$on("$locationChangeSuccess", updateRoute), $route;

                function updateRoute() {
                    var params, match, next = (angular.forEach(routes, function(route, path) {
                            !match && (params = function(on, route) {
                                var keys = route.keys,
                                    params = {};
                                if (!route.regexp) return null;
                                var m = route.regexp.exec(on);
                                if (!m) return null;
                                for (var i = 1, len = m.length; i < len; ++i) {
                                    var key = keys[i - 1],
                                        val = m[i];
                                    key && val && (params[key.name] = val)
                                }
                                return params
                            }($location.path(), route)) && ((match = inherit(route, {
                                params: angular.extend({}, $location.search(), params),
                                pathParams: params
                            })).$$route = route)
                        }), match || routes.null && inherit(routes.null, {
                            params: {},
                            pathParams: {}
                        })),
                        last = $route.current;
                    next && last && next.$$route === last.$$route && angular.equals(next.pathParams, last.pathParams) && !next.reloadOnSearch && !forceReload ? (last.params = next.params, angular.copy(last.params, $routeParams), $rootScope.$broadcast("$routeUpdate", last)) : (next || last) && (forceReload = !1, $rootScope.$broadcast("$routeChangeStart", next, last), ($route.current = next) && next.redirectTo && (angular.isString(next.redirectTo) ? $location.path(function(string, params) {
                        var result = [];
                        return angular.forEach((string || "").split(":"), function(segment, i) {
                            if (0 === i) result.push(segment);
                            else {
                                var segmentMatch = segment.match(/(\w+)(.*)/),
                                    key = segmentMatch[1];
                                result.push(params[key]), result.push(segmentMatch[2] || ""), delete params[key]
                            }
                        }), result.join("")
                    }(next.redirectTo, next.params)).search(next.params).replace() : $location.url(next.redirectTo(next.pathParams, $location.path(), $location.search())).replace()), $q.when(next).then(function() {
                        if (next) {
                            var template, templateUrl, locals = angular.extend({}, next.resolve);
                            return angular.forEach(locals, function(value, key) {
                                locals[key] = angular.isString(value) ? $injector.get(value) : $injector.invoke(value)
                            }), angular.isDefined(template = next.template) ? angular.isFunction(template) && (template = template(next.params)) : angular.isDefined(templateUrl = next.templateUrl) && (angular.isFunction(templateUrl) && (templateUrl = templateUrl(next.params)), templateUrl = $sce.getTrustedResourceUrl(templateUrl), angular.isDefined(templateUrl) && (next.loadedTemplateUrl = templateUrl, template = $http.get(templateUrl, {
                                cache: $templateCache
                            }).then(function(response) {
                                return response.data
                            }))), angular.isDefined(template) && (locals.$template = template), $q.all(locals)
                        }
                    }).then(function(locals) {
                        next == $route.current && (next && (next.locals = locals, angular.copy(next.params, $routeParams)), $rootScope.$broadcast("$routeChangeSuccess", next, last))
                    }, function(error) {
                        next == $route.current && $rootScope.$broadcast("$routeChangeError", next, last, error)
                    }))
                }
            }]
        });

        function ngViewFactory($route, $anchorScroll, $animate) {
            return {
                restrict: "ECA",
                terminal: !0,
                priority: 400,
                transclude: "element",
                link: function(scope, $element, attr, ctrl, $transclude) {
                    var currentScope, currentElement, previousElement, autoScrollExp = attr.autoscroll,
                        onloadExp = attr.onload || "";

                    function cleanupLastView() {
                        previousElement && (previousElement.remove(), previousElement = null), currentScope && (currentScope.$destroy(), currentScope = null), currentElement && ($animate.leave(currentElement, function() {
                            previousElement = null
                        }), previousElement = currentElement, currentElement = null)
                    }

                    function update() {
                        var locals = $route.current && $route.current.locals,
                            template = locals && locals.$template;
                        if (angular.isDefined(template)) {
                            var newScope = scope.$new(),
                                current = $route.current,
                                clone = $transclude(newScope, function(clone) {
                                    $animate.enter(clone, null, currentElement || $element, function() {
                                        !angular.isDefined(autoScrollExp) || autoScrollExp && !scope.$eval(autoScrollExp) || $anchorScroll()
                                    }), cleanupLastView()
                                });
                            currentElement = clone, (currentScope = current.scope = newScope).$emit("$viewContentLoaded"), currentScope.$eval(onloadExp)
                        } else cleanupLastView()
                    }
                    scope.$on("$routeChangeSuccess", update), update()
                }
            }
        }

        function ngViewFillContentFactory($compile, $controller, $route) {
            return {
                restrict: "ECA",
                priority: -400,
                link: function(scope, $element) {
                    var current = $route.current,
                        locals = current.locals;
                    $element.html(locals.$template);
                    var link = $compile($element.contents());
                    if (current.controller) {
                        locals.$scope = scope;
                        var controller = $controller(current.controller, locals);
                        current.controllerAs && (scope[current.controllerAs] = controller), $element.data("$ngControllerController", controller), $element.children().data("$ngControllerController", controller)
                    }
                    link(scope)
                }
            }
        }
        ngRouteModule.provider("$routeParams", function() {
            this.$get = function() {
                return {}
            }
        }), ngRouteModule.directive("ngView", ngViewFactory), ngRouteModule.directive("ngView", ngViewFillContentFactory), ngViewFactory.$inject = ["$route", "$anchorScroll", "$animate"], ngViewFillContentFactory.$inject = ["$compile", "$controller", "$route"]
    }(window, window.angular),
    function(window, angular, undefined) {
        "use strict";
        var $resourceMinErr = angular.$$minErr("$resource"),
            MEMBER_NAME_REGEX = /^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;

        function lookupDottedPath(obj, path) {
            if (! function(path) {
                    return null != path && "" !== path && "hasOwnProperty" !== path && MEMBER_NAME_REGEX.test("." + path)
                }(path)) throw $resourceMinErr("badmember", 'Dotted member path "@{0}" is invalid.', path);
            for (var keys = path.split("."), i = 0, ii = keys.length; i < ii && obj !== undefined; i++) {
                var key = keys[i];
                obj = null !== obj ? obj[key] : undefined
            }
            return obj
        }

        function shallowClearAndCopy(src, dst) {
            for (var key in dst = dst || {}, angular.forEach(dst, function(value, key) {
                    delete dst[key]
                }), src) !src.hasOwnProperty(key) || "$" === key.charAt(0) && "$" === key.charAt(1) || (dst[key] = src[key]);
            return dst
        }
        angular.module("ngResource", ["ng"]).factory("$resource", ["$http", "$q", function($http, $q) {
            var DEFAULT_ACTIONS = {
                    get: {
                        method: "GET"
                    },
                    save: {
                        method: "POST"
                    },
                    query: {
                        method: "GET",
                        isArray: !0
                    },
                    remove: {
                        method: "DELETE"
                    },
                    delete: {
                        method: "DELETE"
                    }
                },
                noop = angular.noop,
                forEach = angular.forEach,
                extend = angular.extend,
                copy = angular.copy,
                isFunction = angular.isFunction;

            function encodeUriSegment(val) {
                return function(val, pctEncodeSpaces) {
                    return encodeURIComponent(val).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, pctEncodeSpaces ? "%20" : "+")
                }(val, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
            }

            function Route(template, defaults) {
                this.template = template, this.defaults = defaults || {}, this.urlParams = {}
            }
            return Route.prototype = {
                    setUrlParams: function(config, params, actionUrl) {
                        var val, encodedVal, self = this,
                            url = actionUrl || self.template,
                            urlParams = self.urlParams = {};
                        forEach(url.split(/\W/), function(param) {
                            if ("hasOwnProperty" === param) throw $resourceMinErr("badname", "hasOwnProperty is not a valid parameter name.");
                            !new RegExp("^\\d+$").test(param) && param && new RegExp("(^|[^\\\\]):" + param + "(\\W|$)").test(url) && (urlParams[param] = !0)
                        }), url = url.replace(/\\:/g, ":"), params = params || {}, forEach(self.urlParams, function(_, urlParam) {
                            val = params.hasOwnProperty(urlParam) ? params[urlParam] : self.defaults[urlParam], url = angular.isDefined(val) && null !== val ? (encodedVal = encodeUriSegment(val), url.replace(new RegExp(":" + urlParam + "(\\W|$)", "g"), function(match, p1) {
                                return encodedVal + p1
                            })) : url.replace(new RegExp("(/?):" + urlParam + "(\\W|$)", "g"), function(match, leadingSlashes, tail) {
                                return "/" == tail.charAt(0) ? tail : leadingSlashes + tail
                            })
                        }), url = (url = url.replace(/\/+$/, "") || "/").replace(/\/\.(?=\w+($|\?))/, "."), config.url = url.replace(/\/\\\./, "/."), forEach(params, function(value, key) {
                            self.urlParams[key] || (config.params = config.params || {}, config.params[key] = value)
                        })
                    }
                },
                function resourceFactory(url, paramDefaults, actions) {
                    var route = new Route(url);

                    function defaultResponseInterceptor(response) {
                        return response.resource
                    }

                    function Resource(value) {
                        shallowClearAndCopy(value || {}, this)
                    }
                    return actions = extend({}, DEFAULT_ACTIONS, actions), forEach(actions, function(action, name) {
                        var hasBody = /^(POST|PUT|PATCH)$/i.test(action.method);
                        Resource[name] = function(a1, a2, a3, a4) {
                            var data, success, error, params = {};
                            switch (arguments.length) {
                                case 4:
                                    error = a4, success = a3;
                                case 3:
                                case 2:
                                    if (!isFunction(a2)) {
                                        params = a1, data = a2, success = a3;
                                        break
                                    }
                                    if (isFunction(a1)) {
                                        success = a1, error = a2;
                                        break
                                    }
                                    success = a2, error = a3;
                                case 1:
                                    isFunction(a1) ? success = a1 : hasBody ? data = a1 : params = a1;
                                    break;
                                case 0:
                                    break;
                                default:
                                    throw $resourceMinErr("badargs", "Expected up to 4 arguments [params, data, success, error], got {0} arguments", arguments.length)
                            }
                            var isInstanceCall = this instanceof Resource,
                                value = isInstanceCall ? data : action.isArray ? [] : new Resource(data),
                                httpConfig = {},
                                responseInterceptor = action.interceptor && action.interceptor.response || defaultResponseInterceptor,
                                responseErrorInterceptor = action.interceptor && action.interceptor.responseError || undefined;
                            forEach(action, function(value, key) {
                                "params" != key && "isArray" != key && "interceptor" != key && (httpConfig[key] = copy(value))
                            }), hasBody && (httpConfig.data = data), route.setUrlParams(httpConfig, extend({}, function(data, actionParams) {
                                var ids = {};
                                return actionParams = extend({}, paramDefaults, actionParams), forEach(actionParams, function(value, key) {
                                    isFunction(value) && (value = value()), ids[key] = value && value.charAt && "@" == value.charAt(0) ? lookupDottedPath(data, value.substr(1)) : value
                                }), ids
                            }(data, action.params || {}), params), action.url);
                            var promise = $http(httpConfig).then(function(response) {
                                var data = response.data,
                                    promise = value.$promise;
                                if (data) {
                                    if (angular.isArray(data) !== !!action.isArray) throw $resourceMinErr("badcfg", "Error in resource configuration. Expected response to contain an {0} but got an {1}", action.isArray ? "array" : "object", angular.isArray(data) ? "array" : "object");
                                    action.isArray ? (value.length = 0, forEach(data, function(item) {
                                        "object" === _typeof(item) ? value.push(new Resource(item)) : value.push(item)
                                    })) : (shallowClearAndCopy(data, value), value.$promise = promise)
                                }
                                return value.$resolved = !0, response.resource = value, response
                            }, function(response) {
                                return value.$resolved = !0, (error || noop)(response), $q.reject(response)
                            });
                            return promise = promise.then(function(response) {
                                var value = responseInterceptor(response);
                                return (success || noop)(value, response.headers), value
                            }, responseErrorInterceptor), isInstanceCall ? promise : (value.$promise = promise, value.$resolved = !1, value)
                        }, Resource.prototype["$" + name] = function(params, success, error) {
                            isFunction(params) && (error = success, success = params, params = {});
                            var result = Resource[name].call(this, params, this, success, error);
                            return result.$promise || result
                        }
                    }), Resource.bind = function(additionalParamDefaults) {
                        return resourceFactory(url, extend({}, paramDefaults, additionalParamDefaults), actions)
                    }, Resource
                }
        }])
    }(window, window.angular),
    function(window, angular, undefined) {
        "use strict";
        var $sanitizeMinErr = angular.$$minErr("$sanitize");
        var START_TAG_REGEXP = /^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,
            END_TAG_REGEXP = /^<\/\s*([\w:-]+)[^>]*>/,
            ATTR_REGEXP = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
            BEGIN_TAG_REGEXP = /^</,
            BEGING_END_TAGE_REGEXP = /^<\//,
            COMMENT_REGEXP = /<!--(.*?)-->/g,
            DOCTYPE_REGEXP = /<!DOCTYPE([^>]*?)>/i,
            CDATA_REGEXP = /<!\[CDATA\[(.*?)]]>/g,
            SURROGATE_PAIR_REGEXP = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
            NON_ALPHANUMERIC_REGEXP = /([^\#-~| |!])/g,
            voidElements = makeMap("area,br,col,hr,img,wbr"),
            optionalEndTagBlockElements = makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
            optionalEndTagInlineElements = makeMap("rp,rt"),
            optionalEndTagElements = angular.extend({}, optionalEndTagInlineElements, optionalEndTagBlockElements),
            blockElements = angular.extend({}, optionalEndTagBlockElements, makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),
            inlineElements = angular.extend({}, optionalEndTagInlineElements, makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
            specialElements = makeMap("script,style"),
            validElements = angular.extend({}, voidElements, blockElements, inlineElements, optionalEndTagElements),
            uriAttrs = makeMap("background,cite,href,longdesc,src,usemap"),
            validAttrs = angular.extend({}, uriAttrs, makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"));

        function makeMap(str) {
            var i, obj = {},
                items = str.split(",");
            for (i = 0; i < items.length; i++) obj[items[i]] = !0;
            return obj
        }
        var hiddenPre = document.createElement("pre"),
            spaceRe = /^(\s*)([\s\S]*?)(\s*)$/;

        function decodeEntities(value) {
            if (!value) return "";
            var parts = spaceRe.exec(value),
                spaceBefore = parts[1],
                spaceAfter = parts[3],
                content = parts[2];
            return content && (hiddenPre.innerHTML = content.replace(/</g, "&lt;"), content = "textContent" in hiddenPre ? hiddenPre.textContent : hiddenPre.innerText), spaceBefore + content + spaceAfter
        }

        function encodeEntities(value) {
            return value.replace(/&/g, "&amp;").replace(SURROGATE_PAIR_REGEXP, function(value) {
                return "&#" + (1024 * (value.charCodeAt(0) - 55296) + (value.charCodeAt(1) - 56320) + 65536) + ";"
            }).replace(NON_ALPHANUMERIC_REGEXP, function(value) {
                return "&#" + value.charCodeAt(0) + ";"
            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }

        function htmlSanitizeWriter(buf, uriValidator) {
            var ignore = !1,
                out = angular.bind(buf, buf.push);
            return {
                start: function(tag, attrs, unary) {
                    tag = angular.lowercase(tag), !ignore && specialElements[tag] && (ignore = tag), ignore || !0 !== validElements[tag] || (out("<"), out(tag), angular.forEach(attrs, function(value, key) {
                        var lkey = angular.lowercase(key),
                            isImage = "img" === tag && "src" === lkey || "background" === lkey;
                        !0 !== validAttrs[lkey] || !0 === uriAttrs[lkey] && !uriValidator(value, isImage) || (out(" "), out(key), out('="'), out(encodeEntities(value)), out('"'))
                    }), out(unary ? "/>" : ">"))
                },
                end: function(tag) {
                    tag = angular.lowercase(tag), ignore || !0 !== validElements[tag] || (out("</"), out(tag), out(">")), tag == ignore && (ignore = !1)
                },
                chars: function(_chars) {
                    ignore || out(encodeEntities(_chars))
                }
            }
        }
        angular.module("ngSanitize", []).provider("$sanitize", function() {
            this.$get = ["$$sanitizeUri", function($$sanitizeUri) {
                return function(html) {
                    var buf = [];
                    return function(html, handler) {
                        "string" != typeof html && (html = null == html ? "" : "" + html);
                        var index, chars, match, text, stack = [],
                            last = html;
                        for (stack.last = function() {
                                return stack[stack.length - 1]
                            }; html;) {
                            if (chars = !(text = ""), stack.last() && specialElements[stack.last()] ? (html = html.replace(new RegExp("(.*)<\\s*\\/\\s*" + stack.last() + "[^>]*>", "i"), function(all, text) {
                                    return text = text.replace(COMMENT_REGEXP, "$1").replace(CDATA_REGEXP, "$1"), handler.chars && handler.chars(decodeEntities(text)), ""
                                }), parseEndTag("", stack.last())) : (0 === html.indexOf("\x3c!--") ? 0 <= (index = html.indexOf("--", 4)) && html.lastIndexOf("--\x3e", index) === index && (handler.comment && handler.comment(html.substring(4, index)), html = html.substring(index + 3), chars = !1) : DOCTYPE_REGEXP.test(html) ? (match = html.match(DOCTYPE_REGEXP)) && (html = html.replace(match[0], ""), chars = !1) : BEGING_END_TAGE_REGEXP.test(html) ? (match = html.match(END_TAG_REGEXP)) && (html = html.substring(match[0].length), match[0].replace(END_TAG_REGEXP, parseEndTag), chars = !1) : BEGIN_TAG_REGEXP.test(html) && ((match = html.match(START_TAG_REGEXP)) ? (match[4] && (html = html.substring(match[0].length), match[0].replace(START_TAG_REGEXP, parseStartTag)), chars = !1) : (text += "<", html = html.substring(1))), chars && (index = html.indexOf("<"), text += index < 0 ? html : html.substring(0, index), html = index < 0 ? "" : html.substring(index), handler.chars && handler.chars(decodeEntities(text)))), html == last) throw $sanitizeMinErr("badparse", "The sanitizer was unable to parse the following block of html: {0}", html);
                            last = html
                        }

                        function parseStartTag(tag, tagName, rest, unary) {
                            if (tagName = angular.lowercase(tagName), blockElements[tagName])
                                for (; stack.last() && inlineElements[stack.last()];) parseEndTag("", stack.last());
                            optionalEndTagElements[tagName] && stack.last() == tagName && parseEndTag("", tagName), (unary = voidElements[tagName] || !!unary) || stack.push(tagName);
                            var attrs = {};
                            rest.replace(ATTR_REGEXP, function(match, name, doubleQuotedValue, singleQuotedValue, unquotedValue) {
                                var value = doubleQuotedValue || singleQuotedValue || unquotedValue || "";
                                attrs[name] = decodeEntities(value)
                            }), handler.start && handler.start(tagName, attrs, unary)
                        }

                        function parseEndTag(tag, tagName) {
                            var i, pos = 0;
                            if (tagName = angular.lowercase(tagName))
                                for (pos = stack.length - 1; 0 <= pos && stack[pos] != tagName; pos--);
                            if (0 <= pos) {
                                for (i = stack.length - 1; pos <= i; i--) handler.end && handler.end(stack[i]);
                                stack.length = pos
                            }
                        }
                        parseEndTag()
                    }(html, htmlSanitizeWriter(buf, function(uri, isImage) {
                        return !/^unsafe/.test($$sanitizeUri(uri, isImage))
                    })), buf.join("")
                }
            }]
        }), angular.module("ngSanitize").filter("linky", ["$sanitize", function($sanitize) {
            var LINKY_URL_REGEXP = /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,
                MAILTO_REGEXP = /^mailto:/;
            return function(text, target) {
                if (!text) return text;
                for (var match, url, i, raw = text, html = []; match = raw.match(LINKY_URL_REGEXP);) url = match[0], match[2] == match[3] && (url = "mailto:" + url), i = match.index, addText(raw.substr(0, i)), addLink(url, match[0].replace(MAILTO_REGEXP, "")), raw = raw.substring(i + match[0].length);
                return addText(raw), $sanitize(html.join(""));

                function addText(text) {
                    var chars, buf;
                    text && html.push((chars = text, htmlSanitizeWriter(buf = [], angular.noop).chars(chars), buf.join("")))
                }

                function addLink(url, text) {
                    html.push("<a "), angular.isDefined(target) && (html.push('target="'), html.push(target), html.push('" ')), html.push('href="'), html.push(url), html.push('">'), addText(text), html.push("</a>")
                }
            }
        }])
    }(window, window.angular),
    function(root, factory) {
        "undefined" != typeof module && module.exports ? module.exports = factory(require("angular")) : "function" == typeof define && define.amd ? define(["angular"], factory) : factory(root.angular)
    }(window, function(angular) {
        angular.module("angucomplete-alt", []).directive("angucompleteAlt", ["$q", "$parse", "$http", "$sce", "$timeout", "$templateCache", "$interpolate", function($q, $parse, $http, $sce, $timeout, $templateCache, $interpolate) {
            function link(scope, elem, attrs, ctrl) {
                var hideTimer, responseFormatter, unbindInitialValue, displaySearching, displayNoResults, fn, inputField = elem.find("input"),
                    minlength = 3,
                    searchTimer = null,
                    requiredClassName = "autocomplete-required",
                    validState = null,
                    httpCanceller = null,
                    dd = elem[0].querySelector(".angucomplete-dropdown"),
                    isScrollOn = !1,
                    mousedownOn = null;

                function handleInputChange(newval, initial) {
                    newval && ("object" === _typeof(newval) ? (scope.searchStr = extractTitle(newval), callOrAssign({
                        originalObject: newval
                    })) : "string" == typeof newval && 0 < newval.length ? scope.searchStr = newval : console && console.error && console.error("Tried to set " + (initial ? "initial" : "") + " value of angucomplete to", newval, "which is an invalid value"), handleRequired(!0))
                }

                function clickoutHandlerForDropdown(event) {
                    mousedownOn = null, scope.hideResults(event), document.body.removeEventListener("click", clickoutHandlerForDropdown)
                }

                function ie8EventNormalizer(event) {
                    return event.which ? event.which : event.keyCode
                }

                function callOrAssign(value) {
                    "function" == typeof scope.selectedObject ? scope.selectedObject(value) : scope.selectedObject = value, handleRequired(!!value)
                }

                function extractTitle(data) {
                    return scope.titleField.split(",").map(function(field) {
                        return extractValue(data, field)
                    }).join(" ")
                }

                function extractValue(obj, key) {
                    var keys, result;
                    if (key) {
                        keys = key.split("."), result = obj;
                        for (var i = 0; i < keys.length; i++) result = result[keys[i]]
                    } else result = obj;
                    return result
                }

                function findMatchString(target, str) {
                    var result, matches, re;
                    if (re = new RegExp(str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), "i"), target) return target.match && target.replace || (target = target.toString()), result = (matches = target.match(re)) ? target.replace(re, '<span class="' + scope.matchClass + '">' + matches[0] + "</span>") : target, $sce.trustAsHtml(result)
                }

                function handleRequired(valid) {
                    scope.notEmpty = valid, validState = scope.searchStr, scope.fieldRequired && ctrl && ctrl.$setValidity(requiredClassName, valid)
                }

                function handleOverrideSuggestions(event) {
                    !scope.overrideSuggestions || scope.selectedObject && scope.selectedObject.originalObject === scope.searchStr || (event && event.preventDefault(), $timeout.cancel(searchTimer), cancelHttpRequest(), callOrAssign({
                        originalObject: scope.searchStr
                    }), scope.clearSelected && (scope.searchStr = null), clearResults())
                }

                function dropdownRow() {
                    return elem[0].querySelectorAll(".angucomplete-row")[scope.currentIndex]
                }

                function dropdownScrollTopTo(offset) {
                    dd.scrollTop = dd.scrollTop + offset
                }

                function updateInputField() {
                    var current = scope.results[scope.currentIndex];
                    scope.matchClass ? inputField.val(extractTitle(current.originalObject)) : inputField.val(current.title)
                }

                function httpSuccessCallbackGen(str) {
                    return function(responseData, status, headers, config) {
                        status || headers || config || (responseData = responseData.data), scope.searching = !1, processResults(extractValue(responseFormatter(responseData), scope.remoteUrlDataField), str)
                    }
                }

                function httpErrorCallback(errorRes, status, headers, config) {
                    0 !== status && -1 !== status && (status || headers || config || (status = errorRes.status), scope.remoteUrlErrorCallback ? scope.remoteUrlErrorCallback(errorRes, status, headers, config) : console && console.error && console.error("http error"))
                }

                function cancelHttpRequest() {
                    httpCanceller && httpCanceller.resolve()
                }

                function getRemoteResults(str) {
                    var params = {},
                        url = scope.remoteUrl + encodeURIComponent(str);
                    scope.remoteUrlRequestFormatter && (params = {
                        params: scope.remoteUrlRequestFormatter(str)
                    }, url = scope.remoteUrl), scope.remoteUrlRequestWithCredentials && (params.withCredentials = !0), cancelHttpRequest(), httpCanceller = $q.defer(), params.timeout = httpCanceller.promise, $http.get(url, params).success(httpSuccessCallbackGen(str)).error(httpErrorCallback)
                }

                function getRemoteResultsWithCustomHandler(str) {
                    cancelHttpRequest(), httpCanceller = $q.defer(), scope.remoteApiHandler(str, httpCanceller.promise).then(httpSuccessCallbackGen(str)).catch(httpErrorCallback)
                }

                function clearResults() {
                    scope.showDropdown = !1, scope.results = [], dd && (dd.scrollTop = 0)
                }

                function initResults() {
                    scope.showDropdown = displaySearching, scope.currentIndex = scope.focusFirst ? 0 : -1, scope.results = []
                }

                function searchTimerComplete(str) {
                    !str || str.length < minlength || (scope.localData ? scope.$apply(function() {
                        ! function(str) {
                            var i, match, s, value, searchFields = scope.searchFields.split(","),
                                matches = [];
                            for (i = 0; i < scope.localData.length; i++) {
                                for (match = !1, s = 0; s < searchFields.length; s++) value = extractValue(scope.localData[i], searchFields[s]) || "", match = match || 0 <= value.toString().toLowerCase().indexOf(str.toString().toLowerCase());
                                match && (matches[matches.length] = scope.localData[i])
                            }
                            scope.searching = !1, processResults(matches, str)
                        }(str)
                    }) : scope.remoteApiHandler ? getRemoteResultsWithCustomHandler(str) : getRemoteResults(str))
                }

                function processResults(responseData, str) {
                    var i, description, image, text, formattedText, formattedDesc;
                    if (responseData && 0 < responseData.length)
                        for (scope.results = [], i = 0; i < responseData.length; i++) scope.titleField && "" !== scope.titleField && (text = formattedText = extractTitle(responseData[i])), description = "", scope.descriptionField && (description = formattedDesc = extractValue(responseData[i], scope.descriptionField)), image = "", scope.imageField && (image = extractValue(responseData[i], scope.imageField)), scope.matchClass && (formattedText = findMatchString(text, str), formattedDesc = findMatchString(description, str)), scope.results[scope.results.length] = {
                            title: formattedText,
                            description: formattedDesc,
                            image: image,
                            originalObject: responseData[i]
                        };
                    else scope.results = [];
                    scope.autoMatch && 1 === scope.results.length && function(result, obj, str) {
                        if (!str) return !1;
                        for (var key in obj)
                            if (obj[key].toLowerCase() === str.toLowerCase()) return scope.selectResult(result), !0;
                        return !1
                    }(scope.results[0], {
                        title: text,
                        desc: description || ""
                    }, scope.searchStr) ? scope.showDropdown = !1 : 0 !== scope.results.length || displayNoResults ? scope.showDropdown = !0 : scope.showDropdown = !1
                }

                function showAll() {
                    scope.localData ? processResults(scope.localData, "") : scope.remoteApiHandler ? getRemoteResultsWithCustomHandler("") : getRemoteResults("")
                }
                elem.on("mousedown", function(event) {
                    event.target.id ? (mousedownOn = event.target.id) === scope.id + "_dropdown" && document.body.addEventListener("click", clickoutHandlerForDropdown) : mousedownOn = event.target.className
                }), scope.currentIndex = scope.focusFirst ? 0 : null, scope.searching = !1, unbindInitialValue = scope.$watch("initialValue", function(newval, oldval) {
                    newval && (unbindInitialValue(), handleInputChange(newval, !0))
                }), scope.$on("angucomplete-alt:clearInput", function(event, elementId) {
                    elementId && elementId !== scope.id || (scope.searchStr = null, callOrAssign(), handleRequired(!1), clearResults())
                }), scope.$on("angucomplete-alt:changeInput", function(event, elementId, newval) {
                    elementId && elementId === scope.id && handleInputChange(newval)
                }), scope.onFocusHandler = function() {
                    scope.focusIn && scope.focusIn(), 0 !== minlength || scope.searchStr && 0 !== scope.searchStr.length || (scope.currentIndex = scope.focusFirst ? 0 : scope.currentIndex, scope.showDropdown = !0, showAll())
                }, scope.hideResults = function(event) {
                    mousedownOn && (mousedownOn === scope.id + "_dropdown" || 0 <= mousedownOn.indexOf("angucomplete")) ? mousedownOn = null : (hideTimer = $timeout(function() {
                        clearResults(), scope.$apply(function() {
                            scope.searchStr && 0 < scope.searchStr.length && inputField.val(scope.searchStr)
                        })
                    }, 200), cancelHttpRequest(), scope.focusOut && scope.focusOut(), scope.overrideSuggestions && scope.searchStr && 0 < scope.searchStr.length && -1 === scope.currentIndex && handleOverrideSuggestions())
                }, scope.resetHideResults = function() {
                    hideTimer && $timeout.cancel(hideTimer)
                }, scope.hoverRow = function(index) {
                    scope.currentIndex = index
                }, scope.selectResult = function(result) {
                    scope.matchClass && (result.title = extractTitle(result.originalObject), result.description = extractValue(result.originalObject, scope.descriptionField)), scope.clearSelected ? scope.searchStr = null : scope.searchStr = result.title, callOrAssign(result), clearResults()
                }, scope.inputChangeHandler = function(str) {
                    return str.length < minlength ? (cancelHttpRequest(), clearResults()) : 0 === str.length && 0 === minlength && (scope.searching = !1, showAll()), scope.inputChanged && (str = scope.inputChanged(str)), str
                }, scope.fieldRequiredClass && "" !== scope.fieldRequiredClass && (requiredClassName = scope.fieldRequiredClass), scope.minlength && "" !== scope.minlength && (minlength = parseInt(scope.minlength, 10)), scope.pause || (scope.pause = 500), scope.clearSelected || (scope.clearSelected = !1), scope.overrideSuggestions || (scope.overrideSuggestions = !1), scope.fieldRequired && ctrl && (scope.initialValue ? handleRequired(!0) : handleRequired(!1)), scope.inputType = attrs.type ? attrs.type : "text", scope.textSearching = attrs.textSearching ? attrs.textSearching : "Searching...", scope.textNoResults = attrs.textNoResults ? attrs.textNoResults : "No results found", displaySearching = "false" !== scope.textSearching, displayNoResults = "false" !== scope.textNoResults, scope.maxlength = attrs.maxlength ? attrs.maxlength : 524288, inputField.on("keydown", function(event) {
                    var which = ie8EventNormalizer(event),
                        row = null,
                        rowTop = null;
                    13 === which && scope.results ? (0 <= scope.currentIndex && scope.currentIndex < scope.results.length ? (event.preventDefault(), scope.selectResult(scope.results[scope.currentIndex])) : (handleOverrideSuggestions(event), clearResults()), scope.$apply()) : 40 === which && scope.results ? (event.preventDefault(), scope.currentIndex + 1 < scope.results.length && scope.showDropdown && (scope.$apply(function() {
                        scope.currentIndex++, updateInputField()
                    }), isScrollOn && (row = dropdownRow(), dd.getBoundingClientRect().top + parseInt(getComputedStyle(dd).maxHeight, 10) < row.getBoundingClientRect().bottom && dropdownScrollTopTo(function(row) {
                        var css = getComputedStyle(row);
                        return row.offsetHeight + parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10)
                    }(row))))) : 38 === which && scope.results ? (event.preventDefault(), 1 <= scope.currentIndex ? (scope.$apply(function() {
                        scope.currentIndex--, updateInputField()
                    }), isScrollOn && (rowTop = dropdownRow().getBoundingClientRect().top - (dd.getBoundingClientRect().top + parseInt(getComputedStyle(dd).paddingTop, 10))) < 0 && dropdownScrollTopTo(rowTop - 1)) : 0 === scope.currentIndex && scope.$apply(function() {
                        scope.currentIndex = -1, inputField.val(scope.searchStr)
                    })) : 9 === which && (scope.results && 0 < scope.results.length && scope.showDropdown ? -1 === scope.currentIndex && scope.overrideSuggestions ? handleOverrideSuggestions() : (-1 === scope.currentIndex && (scope.currentIndex = 0), scope.selectResult(scope.results[scope.currentIndex]), scope.$digest()) : scope.searchStr && 0 < scope.searchStr.length && handleOverrideSuggestions())
                }), inputField.on("keyup input", function(event) {
                    var which = ie8EventNormalizer(event);
                    if (37 !== which && 39 !== which)
                        if (38 === which || 13 === which) event.preventDefault();
                        else if (40 === which) event.preventDefault(), !scope.showDropdown && scope.searchStr && scope.searchStr.length >= minlength && (initResults(), scope.searching = !0, searchTimerComplete(scope.searchStr));
                    else if (27 === which) clearResults(), scope.$apply(function() {
                        inputField.val(scope.searchStr)
                    });
                    else {
                        if (0 === minlength && !scope.searchStr) return;
                        scope.searchStr && "" !== scope.searchStr ? scope.searchStr.length >= minlength && (initResults(), searchTimer && $timeout.cancel(searchTimer), scope.searching = !0, searchTimer = $timeout(function() {
                            searchTimerComplete(scope.searchStr)
                        }, scope.pause)) : scope.showDropdown = !1, validState && validState !== scope.searchStr && !scope.clearSelected && scope.$apply(function() {
                            callOrAssign()
                        })
                    }
                }), fn = "remoteUrlResponseFormatter", responseFormatter = function(data) {
                    return scope[fn] ? scope[fn](data) : data
                }, scope.$on("$destroy", function() {
                    handleRequired(!0)
                }), $timeout(function() {
                    var css = getComputedStyle(dd);
                    isScrollOn = css.maxHeight && "auto" === css.overflowY
                })
            }
            return $templateCache.put("/angucomplete-alt/index.html", '<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'), {
                restrict: "EA",
                require: "^?form",
                scope: {
                    selectedObject: "=",
                    disableInput: "=",
                    initialValue: "=",
                    localData: "=",
                    remoteUrlRequestFormatter: "=",
                    remoteUrlRequestWithCredentials: "@",
                    remoteUrlResponseFormatter: "=",
                    remoteUrlErrorCallback: "=",
                    remoteApiHandler: "=",
                    id: "@",
                    type: "@",
                    placeholder: "@",
                    remoteUrl: "@",
                    remoteUrlDataField: "@",
                    titleField: "@",
                    descriptionField: "@",
                    imageField: "@",
                    inputClass: "@",
                    pause: "@",
                    searchFields: "@",
                    minlength: "@",
                    matchClass: "@",
                    clearSelected: "@",
                    overrideSuggestions: "@",
                    fieldRequired: "@",
                    fieldRequiredClass: "@",
                    inputChanged: "=",
                    autoMatch: "@",
                    focusOut: "&",
                    focusIn: "&",
                    inputName: "@",
                    focusFirst: "@"
                },
                templateUrl: function(element, attrs) {
                    return attrs.templateUrl || "/angucomplete-alt/index.html"
                },
                compile: function(tElement, tAttrs) {
                    var startSym = $interpolate.startSymbol(),
                        endSym = $interpolate.endSymbol();
                    if ("{{" !== startSym || "}}" !== endSym) {
                        var interpolatedHtml = tElement.html().replace(/\{\{/g, startSym).replace(/\}\}/g, endSym);
                        tElement.html(interpolatedHtml)
                    }
                    return link
                }
            }
        }])
    }), window.vemm = window.vemm || {}, window.formsonspeed = window.formsonspeed || {}, window.console = window.console || {}, window.console.log = window.console.log || function() {}, window.ENABLE_CAPTCHA = !1, $(document).ready(function() {
        window.ENABLE_CAPTCHA = 0 < $("#vemm-captcha").length
    }), window.vemmRecaptchaOk = function() {
        console.log("vemmRecaptchaOk()"), scope = $("#vemm-captcha").scope(), scope.$apply(function() {
            scope.lead.captcha_ok = "true"
        })
    };
var formsOnSpeed = angular.module("formsOnSpeed", ["ngRoute", "ngResource", "leadModule", "angucomplete-alt"]),
    vehiclesBaseURL = "//vemmvehicles.herokuapp.com",
    vehicle_manufacturer_Hide_condition = !1,
    vehicle_manufacturer_Hide_in_case_of_vehicle_placa = !1,
    vehicle_model_Hide_in_case_of_vehicle_placa = !1,
    vehicle_info_based_on_placa = !1;
formsOnSpeed.config(["$locationProvider", function($locationProvider) {
    $locationProvider.html5Mode(!0).hashPrefix("!")
}]), formsOnSpeed.controller("formController", ["$scope", "$routeParams", "$location", "$window", "Lead", "$http", "$timeout", function($scope, $routeParams, $location, $window, Lead, $http, $timeout) {
    $scope.vemmStatus = {}, $scope.attemptedSubmit = [], $scope.attemptedOpen = !1, $scope.step = 1, $scope.steps = 0, $scope.stepGroup = "", $scope.lastStep = {}, $scope._incrementSteps = function() {
        $scope.steps++
    }, $scope._previousStep = function() {
        1 < $scope.step && $scope.step--
    }, $scope.backToHome = function() {
        window.location.replace("https://consorcio.org/")
    }, $scope.lead = {
        complete: !1
    }, angular.lead = $scope.lead, $scope.originalParams = $location.search(), addTrackingVariablesToLead($scope, $window), $scope.modelYears = "", $(window).load(function() {
        setTimeout(function() {
            $scope.lead.WURFL_complete_device_name = WURFL.complete_device_name;
            $scope.lead.WURFL_form_factor = WURFL.form_factor;
            $scope.lead.WURFL_is_mobile = WURFL.is_mobile;
        }, 1000);
    });
    var INVALID_DDDS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 23, 30, 40, 50, 60, 70, 80, 90],
        DDDS_WITH_9_DIGITS = [11, 12, 13, 14, 15, 16, 17, 18, 19, 21, 22, 24, 27, 28, 31, 32, 33, 34, 35, 37, 38, 71, 73, 74, 75, 77, 79, 81, 87, 82, 83, 84, 85, 88, 86, 89];

    function dddValid(ddd) {
        ddd = parseInt(ddd), console.log("Testing " + ddd.toString());
        for (var i = 0; i < INVALID_DDDS.length; i++)
            if (ddd === INVALID_DDDS[i]) return console.log("invalid"), !1;
        return console.log("valid"), !0
    }

    function ddd9DigitosCelular(ddd) {
        ddd = parseInt(ddd);
        for (var i = 0; i < DDDS_WITH_9_DIGITS.length; i++)
            if (ddd === DDDS_WITH_9_DIGITS[i]) return !0;
        return !1
    }
    $scope.executeDecisionPoint = function(decisionPointKey) {
        var fieldName = decisionPointKey.split(" ")[1],
            lead = $scope.lead;
        return window.vemm.fieldConditional(fieldName, lead)
    }, $(window).load(function() {
        setTimeout(function() {
            vehicle_manufacturer_Hide_condition = !0
        }, 2e3)
    }), $scope.makeModelInfo = function(str) {
        var vehicle_type = $scope.lead.vehicle_type;
        return null === $scope.lead.vehicle_model && (angular.element("#vehicle_model_value").scope().searchStr = "", $scope.lead.vehicle_year = null), void 0 === angular.element("#vehicle_manufacturer_value").scope().selectedObject && "undefined" != $scope.lead.vehicle_manufacturer && (angular.element("#vehicle_manufacturer_value").scope().selectedObject = {}, angular.element("#vehicle_manufacturer_value").scope().selectedObject.title = $scope.lead.vehicle_manufacturer, angular.element("#vehicle_model_value").scope().searchStr = "", $scope.lead.vehicle_year = null), void 0 !== angular.element("#vehicle_manufacturer_value").scope().selectedObject && void 0 !== angular.element("#vehicle_manufacturer_value").scope().selectedObject.title ? {
            q: str,
            model: angular.element("#vehicle_manufacturer_value").scope().selectedObject.title,
            vehicle_type: vehicle_type
        } : {
            q: str,
            model: angular.element("#vehicle_model_value").scope().searchStr = "",
            vehicle_type: vehicle_type
        }
    }, $scope.get_placa_API = function(event) {
        var paste_clipboard_value = void 0;
        if ("paste" == event.type && (paste_clipboard_value = event.originalEvent.clipboardData.getData("text")), null == $scope.lead.vehicle_placa && null == paste_clipboard_value) return console.log("lead.vehicle_placa. Skipping get_placa_API()"), !1;
        var lead = $scope.lead,
            placa_without_special_char = "";
        if (7 == (placa_without_special_char = "paste" == event.type ? (placa_without_special_char = event.originalEvent.clipboardData.getData("text")).replace(/[^\w\s]|\s/gi, "") : lead.vehicle_placa.replace(/[^\w\s]|\s/gi, "")).length) {
            var QueryParam = {
                params: {
                    placa: placa_without_special_char
                }
            };
            $http.get("//vemmplaca.herokuapp.com/get_placa_result", QueryParam).then(function(response) {
                if (responseResult = response.data, console.log(responseResult), vehicle_info_based_on_placa = !0, 1 == responseResult.vehicle_placa_api_failed) console.log("not getting vehicel info from placa API"), vehicle_model_Hide_in_case_of_vehicle_placa = !0, lead.vehicle_manufacturer = void 0, angular.element("#vehicle_manufacturer_value").scope().searchStr = "", lead.vehicle_model = void 0, angular.element("#vehicle_model_value").scope().searchStr = "", lead.vehicle_year = void 0, lead.vehicle_type = void 0, lead.market_value_of_vehicle = void 0, $scope.modelYears = "";
                else {
                    console.log(" getting vehicle info from placa API"), vehicle_manufacturer_Hide_in_case_of_vehicle_placa = !0, lead.vehicle_type = "Carro", lead.vehicle_manufacturer = responseResult.vehicle_manufacturer, angular.element("#vehicle_manufacturer_value").scope().searchStr = responseResult.vehicle_manufacturer, vehicle_manufacturer_Hide_condition = !0, lead.vehicle_model = responseResult.vehicle_model, angular.element("#vehicle_model_value").scope().searchStr = responseResult.vehicle_model, lead.market_value_of_vehicle = responseResult.market_value_of_vehicle, $scope.modelYears = responseResult.years, replace_dropdown_options("vehicle_year", responseResult.years.split(",")), lead.vehicle_year = responseResult.model_year, lead.fipe = responseResult.fipe;
                    var vehicle_fipe_api = responseResult.fipe.split("-");
                    lead.vehicle_model_fipe = vehicle_fipe_api[0]
                }
            })
        }
    }, $scope.RequestEnrichedCEPData = function(event) {
        $timeout(function() {
            if (null == $scope.lead.postal_code) return console.log("lead.postal_code missing. Skipping RequestEnrichedCEPData()"), !1;
            var lead = $scope.lead,
                start = (new Date).getTime(),
                postal_code_without_special_char = lead.postal_code.replace(/[^\w\s]|\s/gi, "");
            if (8 <= postal_code_without_special_char.length) {
                var postal_code = postal_code_without_special_char.substring(0, 8);
                event.target.value = postal_code, $scope.MascaraCep(event), lead.postal_code = event.target.value, $(".loading").show();
                var url = "https://vemmcepvalidation.herokuapp.com/cep_validation_jsonp/?cep=" + lead.postal_code;
                return $.ajax({
                    crossDomain: !0,
                    dataType: "jsonp",
                    url: url,
                    success: function(data) {
                        var elapsed = (elapsed = (new Date).getTime() - start).toString() + "ms";
                        if (null != data.error) {
                            console.log("Soft error returned by CEP Validation"), console.log(data.error), console.log(elapsed), lead.cep_validation_error = data.error;
                            var fornName = $("#postal_code").closest("form").attr("name");
                            $scope[fornName].postal_code.$setValidity("invalid", !1), $(".loading").hide()
                        } else console.log("Service said CEP was valid."), console.log(elapsed),
                            function(lead, data) {
                                for (var key in console.log("Merging data:"), console.log(data), data) data.hasOwnProperty(key) && (console.log(key + " ="), console.log(data[key]), lead[key] = data[key])
                            }(lead, data), $(".loading").hide()
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        console.log("enrichedCEPDataFailure() called."), console.log(textStatus), $(".loading").hide()
                    },
                    cache: !0,
                    timeout: 2e4
                }), !0
            }
        }, 0)
    }, $scope.dateToYYYYMMDD = function(ddmmyyyy) {
        var transformed_date = "";
        return ddmmyyyy && (transformed_date = ddmmyyyy.substr(6, 4) + ddmmyyyy.substr(3, 2) + ddmmyyyy.substr(0, 2)), transformed_date
    }, $scope.telephoneToDdd = function(telephone) {
        var value = "";
        return telephone && (value = telephone.substr(1, 2)), value
    }, $scope.telephoneToNumber = function(telephone) {
        var value = "";
        return telephone && (value = telephone.substr(5, 10).replace(/[^0-9]+/g, "")), value
    }, $scope.open_or_update_lead = function(blurEvent) {
        if ($scope.attemptedOpen ? ($scope.setConnectionStatus("Updating lead"), $scope.update_lead()) : ($scope.setConnectionStatus("Opening lead"), $scope.open_lead()), "loan_value_other" == blurEvent.target.name) {
            var forName = $(blurEvent.target).closest("form").attr("name");
            $scope.validate_loan_other_value(blurEvent.target.value, forName)
        }
        $scope.sendFieldValidityToAnalytics(blurEvent)
    }, $scope.validate_loan_other_value = function(amount, formNme) {
        $scope.lead.loan_value_other = $scope.lead.loan_value_other.replace(/[^0-9 ]/g, ""), $scope.lead.loan_value_other < 1e4 && $scope[formNme].loan_value_other.$setValidity("invalid", !0)
    }, $scope.interceptPaste = function(pasteEvent, nameMaskFunction, nameValidateFunction) {
        var pastedData = pasteEvent.originalEvent.clipboardData.getData("text/plain"),
            node = pasteEvent.target,
            jQueryNode = $(node),
            formName = getFormName(jQueryNode),
            name = node.name,
            value = node.value,
            maxlength = jQueryNode.attr("maxLength");
        console.log("Paste intercepted with " + pastedData), console.log("formName = " + formName), console.log("name = " + name), console.log("value = " + value), console.log("maxlength = " + maxlength), console.log("nameMaskFunction " + nameMaskFunction), console.log("nameValidateFunction " + nameValidateFunction);
        var maskFunction = $scope[nameMaskFunction],
            validateFunction = $scope[nameValidateFunction];
        return setTimeout(function() {
            maskFunction(pasteEvent);
            var newValue = node.value;
            console.log("New value " + newValue), 0 < parseInt(maxlength, 10) && ("string" == typeof newValue || newValue instanceof String) && (console.log("Truncating to " + maxlength), newValue = newValue.substring(0, maxlength), $scope.$apply(function() {
                $scope.lead[name] = newValue, validateFunction(newValue) ? (console.log("New value valid"), $scope[formName][name].$setValidity("invalid", !0)) : (console.log("New value invalid"), $scope[formName][name].$setValidity("invalid", !1))
            }))
        }, 100), !1
    }, $scope.sendFieldValidityToAnalytics = function(blurEvent) {
        setTimeout(function() {
            var node = blurEvent.target,
                jNode = $(node),
                formName = getFormName(jNode),
                name = node.name,
                valid = (node.value, !$scope[formName][name].$invalid);
            window.formsonspeed.registerFieldFilledIn(node.name, node.value, valid)
        }, 100)
    }, $scope.open_lead = function(successCallback) {
        $scope.saveCompleted = function() {
            $scope.lead = angular.extend($scope.leadOnServer.fields, $scope.lead), "function" == typeof $window[successCallback] && $window[successCallback]($scope.lead)
        }, $scope.leadOnServer = Lead.save($scope.leadForSubmission(!1), $scope.saveCompleted), $scope.attemptedOpen = !0
    }, $scope.update_lead = function() {
        $scope.leadOnServer.id ? ($scope.setConnectionStatus("Server ready for update"), $scope.leadOnServer.fields = $scope.lead, $scope.leadOnServer.$update()) : $scope.setConnectionStatus("Server NOT ready for update")
    }, $scope.close_lead = function() {
        $scope.leadOnServer.id ? ($scope.leadOnServer.fields = $scope.lead, $scope.leadOnServer.complete = !0, $scope.leadOnServer.$update($scope.leadForSubmission(!0)), $scope.setConnectionStatus("Server link closed")) : $scope.setConnectionStatus("Server NOT ready for closing")
    }, $scope.setConnectionStatus = function(newStatus) {
        $scope.connectionStatus = newStatus, console.log(newStatus)
    }, $scope.leadForSubmission = function(complete) {
        return {
            complete: complete,
            email: $scope.lead.email,
            fields: $scope.lead
        }
    }, $scope.update = function(lead) {
        $scope.master = angular.copy(lead)
    }, $scope.submitAndClose = function(theEvent) {
        var skipSubmit;
        if (window.vemm.submitFilter) {
            try {
                skipSubmit = window.vemm.submitFilter($scope.lead, $scope.step)
            } catch (error) {
                console.log("error: on skipping submitAndClose")
            }
            if (skipSubmit) return
        }
        $scope.create_final_field_from_basicAndOther_fields();
        var formName = getFormName(theEvent.target);
        console.log("Submit clicked"), $scope.attemptedSubmit[$scope.step] = !0, $scope[formName].$valid && ($scope.step++, $scope.lead.complete = !0, console.log("Enable Captcha:"), console.log(window.ENABLE_CAPTCHA), window.ENABLE_CAPTCHA && ($scope.lead["g-recaptcha-response"] = grecaptcha.getResponse(), console.log($scope.lead["g-recaptcha-response"])), $scope.copyClickerData(), $scope.update_lead(), console.log("Lead updated with complete=true"), window.formsonspeed.registerGoogleAnalyticsTransaction(), window.formsonspeed.registerConversion(), console.log("Google Analytics updated."), window.formsonspeed.registerVisualWebsiteOptimizerConversion(), console.log("VWO updated."), window.formsonspeed.runThankYouScripts(), console.log("Ran thank you scripts."), window.dataLayer = window.dataLayer || [], window.dataLayer.push({
            event: "lead-successfully-submitted"
        }), document.getElementsByClassName("js-submit-scroll")[0].scrollIntoView(!0))
    }, $scope.create_final_field_from_basicAndOther_fields = function() {
        var all_element_names = [];
        $("input, select, textarea").each(function(index) {
            var input = $(this);
            all_element_names.push(input.attr("name"))
        });
        for (var i = 0; i < all_element_names.length; i++)
            if (all_element_names[i].includes("_basic"))
                for (var orignal_name = all_element_names[i].replace("_basic", ""), j = 0; j < all_element_names.length; j++) all_element_names[j] == orignal_name + "_other" && ("other" == $scope.lead[all_element_names[i]] ? $scope.lead[orignal_name] = $scope.lead[all_element_names[j]] : $scope.lead[orignal_name] = $scope.lead[all_element_names[i]])
    }, $scope.copyClickerData = function() {
        if (window.vemm) {
            var clickerData = window.vemm.clickerData;
            if (clickerData)
                for (var attr in clickerData) clickerData.hasOwnProperty(attr) && ($scope.lead[attr] = $scope.lead[attr] || clickerData[attr])
        }
    }, $scope.submit = function(theEvent) {
        var skipSubmit;
        if (window.vemm.submitFilter) {
            try {
                skipSubmit = window.vemm.submitFilter($scope.lead, $scope.step)
            } catch (error) {
                console.log("error: on skipping submit")
            }
            if (skipSubmit) return
        }
        $scope.attemptedSubmit[$scope.step] = !0;
        var formName = getFormName(theEvent.target);
        $scope[formName].$valid && ($scope.step++, $scope.update_lead(), document.getElementsByClassName("js-submit-scroll")[0].scrollIntoView(!0))
    }, $scope.previous = function(lead) {
        $scope.step--, $scope.step <= 0 && ($scope.step = 1)
    }, $scope.next = function(lead) {
        $scope.step++
    }, $scope.MascaraCelularOrTelefone = function(event) {
        tel = event.target, 0 == mascaraInteiro(tel) && (event.returnValue = !1);
        var mask = "",
            ddd = tel.value.toString().substring(1, 3),
            initial_digit = tel.value.toString().substring(5, 6);
        return ddd9DigitosCelular(ddd) ? tel.maxLength = (mask = "9" == initial_digit ? "(00) 00000-0000" : "(00) 0000-00000", 15) : (mask = "(00) 0000-00000", tel.maxLength = 15), formataCampo(tel, mask, event)
    }, $scope.MascaraCelular = function(event) {
        tel = event.target;
        var value = tel.value.toString().trim().replace(/^\+/, "");
        0 == mascaraInteiro(tel) && (event.returnValue = !1);
        var mask = "";
        return mask = ddd9DigitosCelular(value.substring(0, 2)) ? "(00) 00000-0000" : 10 == value.length ? "(00) 0000-0000" : "(00) 0000-00000", tel.maxLength = 15, formataCampo(tel, mask, event)
    }, $scope.MascaraTelefone = function(event) {
        return tel = event.target, 0 == mascaraInteiro(tel) && (event.returnValue = !1), formataCampo(tel, "(00) 0000-0000", event)
    }, $scope.MascaraCpf = function(event) {
        return cpf = event.target, 0 == mascaraInteiro(cpf) && (event.returnValue = !1), formataCampo(cpf, "000.000.000-00", event)
    }, $scope.MascaraCep = function(event) {
        return cep = event.target, 0 == mascaraInteiro(cep) && (event.returnValue = !1), formataCampo(cep, "00000-000", event)
    }, $scope.MascaraPlaca = function(event) {
        return placa = event.target, 0 == mascaraInteiro(placa) && (event.returnValue = !1), formataCampo(placa, "000-0000", event)
    }, $scope.MascaraCnpj = function(event) {
        return cnpj = event.target, 0 == mascaraInteiro(cnpj) && (event.returnValue = !1), formataCampo(cnpj, "00.000.000/0000-00", event)
    }, $scope.ValidaCep = function(cep) {
        if (null != cep) {
            cep = cep.replace(/[^\w\s]|\s/gi, "");
            return !!/\d{8}/.test(cep)
        }
    }, $scope.ValidatePlaca = function(Placa) {
        if (null != Placa) {
            Placa = Placa.replace(/[^\w\s]|\s/gi, "");
            return !!/^[a-zA-Z]{3}\d{4}$/.test(Placa)
        }
    }, $scope.ValidaCnpj = function(cnpj) {
        var valida = new Array(6, 5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2),
            dig1 = new Number,
            dig2 = new Number;
        exp = /\.|\-|\//g, cnpj = cnpj.toString().replace(exp, "");
        var digito = new Number(eval(cnpj.charAt(12) + cnpj.charAt(13)));
        for (i = 0; i < valida.length; i++) dig1 += 0 < i ? cnpj.charAt(i - 1) * valida[i] : 0, dig2 += cnpj.charAt(i) * valida[i];
        return dig1 = dig1 % 11 < 2 ? 0 : 11 - dig1 % 11, dig2 = dig2 % 11 < 2 ? 0 : 11 - dig2 % 11, 10 * dig1 + dig2 == digito
    }, $scope.ValidaCpf2 = function(cpf) {
        if ("" == (cpf = cpf.replace(/[^\d]+/g, ""))) return !1;
        if (11 != cpf.length || "00000000000" == cpf || "11111111111" == cpf || "22222222222" == cpf || "33333333333" == cpf || "44444444444" == cpf || "55555555555" == cpf || "66666666666" == cpf || "77777777777" == cpf || "88888888888" == cpf || "99999999999" == cpf) return !1;
        var add = 0;
        for (i = 0; i < 9; i++) add += parseInt(cpf.charAt(i)) * (10 - i);
        var rev = 11 - add % 11;
        if (10 != rev && 11 != rev || (rev = 0), rev != parseInt(cpf.charAt(9))) return !1;
        for (add = 0, i = 0; i < 10; i++) add += parseInt(cpf.charAt(i)) * (11 - i);
        return 10 != (rev = 11 - add % 11) && 11 != rev || (rev = 0), rev == parseInt(cpf.charAt(10))
    }, $scope.ValidaGenericPhone = function(tel) {
        return !!$scope.ValidaCelular(tel) || !!$scope.ValidaTelefone(tel)
    }, $scope.ValidaCelular = function(tel) {
        var ddd = (tel = (tel = tel || "00").replace(/[^\w\s]|\s/gi, "")).substring(0, 2);
        if (console.log("DDD-> " + ddd), !dddValid(ddd)) return !1;
        if (tel = tel.substring(2), 11 <= ddd && ddd <= 19) var exp = /^9[4-9]\d{7}$/;
        else if (21 <= ddd && ddd <= 29 || 91 <= ddd && ddd <= 99) exp = /^9\d{8}$/;
        else if (31 <= ddd && ddd <= 35 || 37 <= ddd && ddd <= 38 || 41 <= ddd && ddd <= 49 || 53 <= ddd && ddd <= 55 || 61 <= ddd && ddd <= 69 || 73 <= ddd && ddd <= 75 || 81 <= ddd && ddd <= 89 || 51 == ddd || 71 == ddd || 77 == ddd || 79 == ddd) exp = /^9[2-9]\d{7}$/;
        else if (56 <= ddd && ddd <= 59 || 36 == ddd || 39 == ddd || 52 == ddd || 72 == ddd || 76 == ddd || 78 == ddd) exp = /^9[2-9]\d{7}$/;
        return !!exp.test(tel)
    }, $scope.ValidaTelefone = function(tel) {
        return "" == (tel = tel.replace(/[^\w\s]|\s/gi, "")) || !!/(10|[1-9][1-9])\d{8}/.test(tel)
    }, $scope.ValidaEmail = function(email) {
        return exp = /[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}/, !!exp.test(email)
    }, $scope.ValidaUrl = function(url) {
        return !!/^(https?:\/\/)?([\dA-Za-z\.-]+\.)+([A-Za-z]{2,4})(\/.*)?$|^N\/A$/i.test(url)
    }, $scope.getVehicleModelYears = function() {
        if (null != vemm.vehicle_model) {
            var years = new Array,
                lead = $scope.lead,
                vehicle_type = "Carro" == lead.vehicle_type ? "vehicle_model" : "motos_model",
                vehicle_model = lead.vehicle_model,
                vehicle_manufacturer = lead.vehicle_manufacturer;
            return angular.forEach(vemm[vehicle_type][vehicle_manufacturer], function(value, key) {
                value.name == vehicle_model && (years = value.years.split(","))
            }), years
        }
    }, $scope.assigsProfileValues = function() {
        var lead = $scope.lead,
            vehicle_type = "Carro" == lead.vehicle_type ? "vehicle_model" : "motos_model";
        if (lead.vehicle_type && lead.vehicle_model && lead.vehicle_manufacturer && "" != lead.vehicle_year) {
            var QueryParam = {
                params: {
                    vehicle_models: lead.vehicle_model,
                    vehicle_manufacturers: lead.vehicle_manufacturer,
                    vehicle_years: lead.vehicle_year,
                    vehicle_type: vehicle_type
                }
            };
            null == lead.vehicle_model && null == lead.vehicle_model || null == lead.vehicle_manufacturer && null == lead.vehicle_manufacturer || null == lead.vehicle_year && null == lead.vehicle_year || $http.get(vehiclesBaseURL + "/getProfiles", QueryParam).then(function(response) {
                var profileResponse = response.data;
                "" != profileResponse && null != profileResponse || ($scope.lead.vehicle_manufacturer = null, angular.element("#vehicle_manufacturer_value").scope().searchStr = "", $scope.lead.vehicle_model = null, angular.element("#vehicle_model_value").scope().searchStr = "", $scope.lead.vehicle_year = null, replace_dropdown_options("vehicle_year", $scope.modelYears.split(","))), angular.forEach(profileResponse, function(value, key) {
                    lead[key] = value
                })
            })
        } else "" != lead.vehicle_year && null != lead.vehicle_year && (console.log("we haven't got vehicle_manufacturer and model from API yet , wait and call assign profile again"), setTimeout(function() {
            $scope.assigsProfileValues()
        }, 500))
    }, $scope.checkModelINList = function(callbackFn) {
        var isValid = !1,
            getLeadDetail = $scope.lead,
            vehicle_type1 = "Carro" == $scope.lead.vehicle_type ? "vehicle_model" : "motos_model",
            QueryParams = {
                params: {
                    vehicle_models: getLeadDetail.vehicle_model,
                    vehicle_manufacturers: getLeadDetail.vehicle_manufacturer,
                    vehicle_type: vehicle_type1
                }
            };
        if (null != $scope.lead.vehicle_model && null != $scope.lead.vehicle_manufacturer) $http.get(vehiclesBaseURL + "/checkModelINList", QueryParams).then(function(response) {
            response.data.result ? callbackFn(isValid = !0) : (15 < angular.element("#vehicle_model_value").scope().searchStr.split("").length && (angular.element("#vehicle_model_value").scope().searchStr = "", $scope.vehicle_year = null), callbackFn(isValid = !1))
        }, function(error) {
            console.log("======================================================="), console.log("server erorrrrrrrrrrrrr vemmVehicles")
        });
        else if (null == $scope.lead.vehicle_model && null != $scope.lead.vehicle_manufacturer) {
            var _QueryParams = {
                params: {
                    q: $scope.lead.vehicle_manufacturer,
                    vehicle_type: $scope.lead.vehicle_type
                }
            };
            $http.get(vehiclesBaseURL + "/manufactureValidate", _QueryParams).then(function(response) {
                var responseResult = response.data.results[0].flag;
                callbackFn(isValid = !!responseResult)
            })
        }
        return isValid
    }, $scope.validateVehicleManufacturerAPI = function(manufacturer, callback) {
        var responseResult, QueryParams = {
            params: {
                q: manufacturer,
                vehicle_type: $scope.lead.vehicle_type
            }
        };
        $http.get(vehiclesBaseURL + "/manufactureValidate", QueryParams).then(function(response) {
            return responseResult = response.data.results[0].flag, callback(responseResult), responseResult
        })
    }, $scope.getmodelInfobasedonFIPE = function(fipe, callback) {
        var responseResult, QueryParams = {
            params: {
                q: fipe,
                vehicle_type: $scope.lead.vehicle_type
            }
        };
        $http.get(vehiclesBaseURL + "/getmodelInfobasedonFIPE", QueryParams).then(function(response) {
            return responseResult = response.data, callback(responseResult), responseResult
        })
    }, $scope.ValidaFullName = function(name) {
        return 1 < (name = name || "").split(" ").length
    }, $scope.MonitorLenght = function(e) {
        var match = e.target.value.match(/[^\w\s]|\s/gi),
            count = match ? match.length : 0,
            max = parseInt(e.target.max);
        0 != count && (max += count), e.target.value.length >= max && (e.target.value = e.target.value.substring(0, max))
    }
}]), formsOnSpeed.directive("vemmRadioSet", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !1,
        transclude: !0,
        priority: 100,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmRadioSet(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {
                    setFormNameinElement(element);
                    var dummySelectToFoolIE = element.find(".radio-buttons"),
                        optionsProtectedFromIE = dummySelectToFoolIE.children();
                    dummySelectToFoolIE.replaceWith(optionsProtectedFromIE), scope.$watch("lead.vehicle_type", function(value) {
                        value && scope.$broadcast("angucomplete-alt:clearInput", "vehicle_model")
                    }), scope.$watch("lead.vehicle_manufacturer", function(value) {
                        if (value) {
                            scope.$broadcast("angucomplete-alt:clearInput", "vehicle_model")
                        }
                    })
                }
        }
    }
}]), formsOnSpeed.directive("vemmDateDropdowns", function($parse) {
    return {
        restrict: "EA",
        compile: function compile(element, attrs) {
            var vemmCondition = attrs,
                v = getAttrValues(attrs, "Data"),
                modelAccessor = $parse("lead." + v.field),
                html = vemmDateDropdownsWithFormName(v, "text", "", "Data deve ser uma data com o formato seguinte (DD/MM/AAAA).", "");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ngModelCtrl) {
                    setFormNameinElement(element);
                    var updateDateField = function(field, attrs) {
                            var day = scope.lead[v.field + "_day"],
                                month = monthsInPortuguese.indexOf(scope.lead[v.field + "_month"]);
                            if (month === parseInt(month) && (month += 1), month) var year = scope.lead[v.field + "_year"];
                            if (day && month && year) {
                                var mmddyyyy = padNumberString(month, 2) + "/" + padNumberString(day, 2) + "/" + year;
                                scope.lead[v.field] = padNumberString(day, 2) + "/" + padNumberString(month, 2) + "/" + year, isValidDate(mmddyyyy) ? setValidityOfDate(scope, element, v, !0) : setValidityOfDate(scope, element, v, !1)
                            } else setValidityOfDate(scope, element, v, !1)
                        },
                        lead = scope.lead,
                        subFieldStub = "lead." + v.field;
                    scope.$watch(subFieldStub + "_day", function() {
                        var lead = scope.lead,
                            executeDecisionPoint = scope.executeDecisionPoint;
                        v.conditional && eval(v.conditional) && updateDateField(subFieldStub)
                    }), scope.$watch(subFieldStub + "_month", function() {
                        var lead = scope.lead,
                            executeDecisionPoint = scope.executeDecisionPoint;
                        v.conditional && eval(v.conditional) && updateDateField(subFieldStub)
                    }), scope.$watch(subFieldStub + "_year", function() {
                        var lead = scope.lead,
                            executeDecisionPoint = scope.executeDecisionPoint;
                        v.conditional && eval(v.conditional) && updateDateField(subFieldStub)
                    })
                }
        }
    }
});
var setValidityOfDate = function(scope, element, v, valid) {
        valid ? console.log("Date OK") : console.log("Date Invalid");
        var formName = getFormName(element);
        scope[formName][v.field + "_day"].$setValidity("invalid", valid), scope[formName][v.field + "_month"].$setValidity("invalid", valid), scope[formName][v.field + "_year"].$setValidity("invalid", valid)
    },
    padNumberString = function(number, digits) {
        var numberString = number.toString(),
            numberExtraZeroes = digits - numberString.length;
        return 0 < numberExtraZeroes && (numberString = "0000000".substring(1, numberExtraZeroes + 1) + numberString), numberString
    },
    isValidDate = function(dateStr) {
        var matchArray = dateStr.match(/^(\d{2,2})(\/)(\d{2,2})\2(\d{4}|\d{4})$/);
        if (null == matchArray) return alert("Date must be in MM/DD/YYYY format"), !1;
        if (month = matchArray[1], day = matchArray[3], year = matchArray[4], month < 1 || 12 < month) return alert("Month must be between 1 and 12"), !1;
        if (day < 1 || 31 < day) return alert("Day must be between 1 and 31"), !1;
        if ((4 == month || 6 == month || 9 == month || 11 == month) && 31 == day) return alert("Mês " + month + " não tem 31 dias!"), !1;
        if (2 == month) {
            var isleap = year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);
            if (29 < day || 29 == day && !isleap) return alert("Fevereiro " + year + " não tem " + day + " dias!"), !1
        }
        return !0
    };
formsOnSpeed.directive("vemmLeadCreate", ["$parse", function($parse) {
    return {
        restrict: "EA",
        template: "",
        link: function(scope, element, attrs, controller) {
            setFormNameinElement(element);
            var successCallback = getAttrValues(attrs, "").vemmCallback;
            scope.open_lead(successCallback)
        }
    }
}]), formsOnSpeed.directive("vemmDatepicker", function($parse) {
    return {
        restrict: "EA",
        require: "^ngModel",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Data");
            v.placeholder = v.label.replace(/:|\*/gi, "");
            $parse("lead." + v.field);
            var html = vemmCompleteInput(v, "text", "", "Data deve ser uma data com o formato seguinte (DD/MM/AAAA).", "");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ngModelCtrl) {
                    setFormNameinElement(element);
                    var input_tag = element.find("input");
                    $.datepicker.setDefaults($.datepicker.regional["pt-BR"]);
                    var datepickerDefinition = {
                        dateFormat: "dd/mm/yy",
                        inline: !0,
                        onSelect: function(date) {
                            scope.$apply(function() {
                                ngModelCtrl.$setViewValue(date)
                            }), setTimeout(function() {
                                setFocusToNextField(element)
                            }, 0)
                        }
                    };
                    null != attrs.vemmDateFuture && (datepickerDefinition.minDate = new Date), $(function() {
                        input_tag.datepicker(datepickerDefinition)
                    })
                }
        }
    }
});
var setFocusToNextField = function(element) {
        for (var $inputs = $("input"), startSearch = element[0], theFirst = !0, i = 0; i < $inputs.length; i++)
            if (isAfter($inputs[i], startSearch)) {
                var nextInput = $inputs[i];
                if (!theFirst) {
                    nextInput.focus();
                    break
                }
                theFirst = !1
            }
    },
    isAfter = function(elA, elB) {
        return $("*").index($(elA).last()) > $("*").index($(elB).first())
    };

function replace_dropdown_options(field_name, options) {
    if (angular.isArray(options)) {
        var select = $("select[name='" + field_name + "']");
        select.empty(), select.append("<option value=''>----- Selecione... -----</option>"), $.each(options, function(i, item) {
            var o = new Option(item, item);
            select.append(o)
        })
    }
}
formsOnSpeed.directive("vemmDateFuture", function() {
    return {
        require: "^ngModel",
        link: function(scope, elm, attrs, ctrl) {
            getFormName(elm)
        }
    }
}), formsOnSpeed.directive("vemmCep", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Insira somente números"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Preencha o CEP corretamente.", "vemm-validate-cep  ng-blur='MascaraCep($event)' ng-keyup='MonitorLenght($event);RequestEnrichedCEPData($event);' ng-keydown='MonitorLenght($event);' ng-paste='RequestEnrichedCEPData($event);' max=8", "MascaraCep", "ValidaCep");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCep", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaCep(viewValue) ? (console.log("CEP valid"), ctrl.$setValidity("invalid", !0), viewValue) : (console.log("CEP invalid"), void ctrl.$setValidity("invalid", !1))
            })
        }
    }
}), formsOnSpeed.directive("vemmVehiclePlaca", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Digite o número do veículo"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Preencha o número correto do veículo.", "vemm-validate-placa  ng-blur='MascaraPlaca($event);' ng-keyup='MonitorLenght($event);get_placa_API($event)' ng-keydown='MonitorLenght($event);' ng-paste='get_placa_API($event)' max=10", "MascaraPlaca", "ValidatePlaca");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    scope.$watch("lead.vehicle_placa", function(value) {
                        value && (scope.lead.vehicle_placa = scope.lead.vehicle_placa.toUpperCase())
                    }), setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidatePlaca", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidatePlaca(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : (console.log("vehicle number is invalid"), void ctrl.$setValidity("invalid", !1))
            })
        }
    }
}), formsOnSpeed.directive("vemmCpf", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "XXX.XXX.XXX-XX"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Preencha o seu CPF corretamente.", "vemm-validate-cpf  ng-blur='MascaraCpf($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=11 ", "MascaraCpf", "ValidaCpf2");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCpf", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaCpf2(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmCnpj", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "CNPJ"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "O CNPJ &eacute; inv&aacute;lido.", "vemm-validate-cnpj ng-blur='MascaraCnpj($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=18 ", "MascaraCnpj", "ValidaCnpj");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCnpj", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaCnpj(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmCaptcha", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, ""),
                html = vemmRecaptcha(v, "hidden", "Este campo &eacute; obrigat&oacute;rio.", "O CAPTCHA &eacute; inv&aacute;lido.", "vemm-validate-captcha ", "MascaraCnpj", "ValidaCnpj");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCaptcha", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return viewValue ? (alert("Setting CAPTCHA invalid to TRUE"), ctrl.$setValidity("invalid", !0), viewValue) : (alert("Setting CAPTCHA invalid to FALSE"), void ctrl.$setValidity("invalid", !1))
            })
        }
    }
}), formsOnSpeed.directive("vemmCelularOrTelefone", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "DDD + Número"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Preencha o n&uacute;mero de telefone corretamente.", "vemm-validate-celular-or-telefone  ng-blur='MascaraCelularOrTelefone($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=18 ", "MascaraCelularOrTelefone", "ValidaGenericPhone");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCelularOrTelefone", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaGenericPhone(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmCelular", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "DDD + Número"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Preencha o n&uacute;mero de celular corretamente.", "vemm-validate-celular  ng-blur='MascaraCelular($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=11", "MascaraCelular", "ValidaCelular");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateCelular", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                var mismatch = elm.data("mismatch");
                return void 0 === mismatch && (mismatch = !1), scope.ValidaCelular(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : (ctrl.$setValidity("invalid", mismatch), void(scope.lead.ddd = viewValue.substr(0, 2)))
            })
        }
    }
}), formsOnSpeed.directive("vemmTelefone", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "DDD + Número"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "O n&uacute;mero de telefone &eacute; inv&aacute;lido.", "vemm-validate-telefone  ng-blur='MascaraTelefone($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=10", "MascaraTelefone", "ValidaTelefone");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateTelefone", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaTelefone(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : (ctrl.$setValidity("invalid", !1), void(scope.lead.ddd = viewValue.substr(1, 2)))
            })
        }
    }
}), formsOnSpeed.directive("vemmWebsiteUrl", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Qual a URL do site?"),
                html = vemmCompleteInputWithElement(v, "text", "", "O Website url &eacute; inv&aacute;lido.", "vemm-validate-url");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateUrl", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaUrl(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmEmail", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Email"),
                html = vemmCompleteInputWithElement(v, "email", "", "Digite seu e-mail corretamente.", "vemm-validate-email");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmValidateEmail", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaEmail(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmCompanyName", ["$parse", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Company Name"),
                html = vemmCompleteInputWithMaskAndForm(v, "text", "", "Por favor escreva o seu Nome e Sobrenome.", "");
            return console.log(), replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmFullName", ["$parse", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Nome"),
                html = vemmCompleteInputWithElement(v, "text", "", "Por favor escreva o seu Nome e Sobrenome.", "vemm-validate-full-name");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmValidateFullName", function() {
    return {
        require: "ngModel",
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                return scope.ValidaFullName(viewValue) ? (ctrl.$setValidity("invalid", !0), viewValue) : void ctrl.$setValidity("invalid", !1)
            })
        }
    }
}), formsOnSpeed.directive("vemmText", ["$parse", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "Nome"),
                html = vemmCompleteInput(v, "text", "", v.label + " is invalid", "");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmNumber", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, "N&uacute;mero"),
                html = vemmCompleteInput(v, "number", "", v.label + " &eacute; inv&aacute;lido.", "");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmCheckbox", function($parse) {
    return {
        restrict: "EA",
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, ""),
                html = vemmCompleteInputLabelSurround(v, "checkbox", "", v.label + " &eacute; inv&aacute;lido.", "");
            return replaceElementHtml(element, html),
                function(scope, element, attrs, ctrl) {
                    setFormNameinElement(element)
                }
        }
    }
}), formsOnSpeed.directive("vemmAutocomplete", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !1,
        transclude: !0,
        priority: 100,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmAutocomplete(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {
                    scope[v.local_data] = window.vemm[v.local_data], null == scope.autocomplete && (scope.autocomplete = {}), scope.autocomplete[v.local_data] = function(item) {
                        null != item && (scope.lead[v.field] = item.originalObject.code, scope.lead.vehicle_model_fipe = item.originalObject.fipe, scope.lead.fipe = item.originalObject.fipe + "-" + item.originalObject.e)
                    }, setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("checkBlankOrFilled", function($timeout) {
    return {
        require: "^form",
        link: function(scope, element, attrs, ctrl) {
            scope.$watch(function() {
                if (vehicle_manufacturer_Hide_condition && null == scope.lead.vehicle_manufacturer) {
                    var field_form = attrs.vemmFormName;
                    scope[field_form].vehicle_manufacturer.$pristine = !1
                }
                if (vehicle_manufacturer_Hide_in_case_of_vehicle_placa && null != scope.lead.vehicle_manufacturer) {
                    var _field_form = attrs.vemmFormName;
                    scope[_field_form].vehicle_manufacturer.$pristine = !0
                }
                if (vehicle_model_Hide_in_case_of_vehicle_placa) {
                    var _field_form2 = attrs.vemmFormName;
                    scope[_field_form2].vehicle_manufacturer.$pristine = !1, scope[_field_form2].vehicle_model.$pristine = !1
                }
                getAttrValues(attrs, "");
                var lead = scope.lead;
                return "Carro" != lead.vehicle_type && "Moto" != lead.vehicle_type && ctrl.vehicle_model.$setValidity("invalid", !0), element.find("input").val()
            }, function(newval, oldval) {
                if (0 < (str = newval).length && newval != oldval)
                    if (scope.lead[attrs.checkBlankOrFilled] = newval, null == scope.lead.vehicle_model && null != scope.lead.vehicle_manufacturer) {
                        scope.checkModelINList(function(isValid) {
                            isValid ? ctrl.vehicle_manufacturer.$setValidity("invalid", !0) : ctrl.vehicle_manufacturer.$setValidity("invalid", !1)
                        }) ? ctrl.vehicle_manufacturer.$setValidity("invalid", !0) : ctrl.vehicle_manufacturer.$setValidity("invalid", !1)
                    } else if (null != scope.lead.vehicle_model && null != scope.lead.vehicle_manufacturer) {
                    scope.checkModelINList(function(isValid) {
                        isValid ? ctrl.vehicle_model.$setValidity("invalid", !0) : ctrl.vehicle_model.$setValidity("invalid", !1)
                    }) ? ctrl.vehicle_model.$setValidity("invalid", !0) : ctrl.vehicle_model.$setValidity("invalid", !1)
                }
            })
        }
    }
}), formsOnSpeed.directive("vemmAutocompleteRemote", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !1,
        transclude: !0,
        priority: 100,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmAutocompleteRemote(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {
                    scope[v.local_data] = window.vemm[v.local_data], null == scope.autocomplete && (scope.autocomplete = {}), scope.autocomplete[v.local_data] = function(item) {
                        null != item && (scope.lead.vehicle_model_fipe = item.originalObject.fipe, scope.lead.fipe = item.originalObject.fipe + "-" + item.originalObject.e, replace_dropdown_options("vehicle_year", item.originalObject.years.split(",")))
                    }, setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmHiddenField", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !1,
        transclude: !0,
        priority: 100,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmHiddenField(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmDropdown", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !1,
        transclude: !0,
        priority: 100,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmDropdown(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {
                    setFormNameinElement(element);
                    var dummySelectToFoolIE = element.find(".dummySelect"),
                        optionsProtectedFromIE = dummySelectToFoolIE.children();
                    dummySelectToFoolIE.replaceWith(optionsProtectedFromIE), scope.$watch("lead." + v.field, function(newValue, oldValue) {
                        "vehicle_year" == v.field && scope.assigsProfileValues(), newValue !== oldValue && ("vehicle_type" != v.field || "" == oldValue || "" == newValue || vehicle_info_based_on_placa || (scope.lead.vehicle_manufacturer = null, angular.element("#vehicle_manufacturer_value").scope().searchStr = "", scope.lead.vehicle_model = null, angular.element("#vehicle_model_value").scope().searchStr = "", scope.lead.vehicle_year = null), element.find("select").val(newValue))
                    }), setTimeout(function() {
                        var value = scope.lead[v.field];
                        scope.$apply(function() {
                            scope.lead[v.field] = ""
                        }), scope.$apply(function() {
                            scope.lead[v.field] = value
                        })
                    }, 500)
                }
        }
    }
}]), formsOnSpeed.directive("vemmOptionsFrom", ["$parse", function($parse) {
    return {
        link: function(scope, elm, attrs, ctrl) {
            var sourceAttribute = attrs.vemmOptionsFrom,
                sourcePath = attrs.vemmOptionsRoute,
                optionsHeader = "<option value=''>" + attrs.vemmOptionsHeader + "</option>",
                select = elm.find("select").first();
            scope.$watch("lead." + sourceAttribute, function(newValue, oldValue) {
                if (newValue && newValue != oldValue) {
                    var loadFile = sourcePath + newValue + ".html";
                    select.load(loadFile, function() {
                        select.prepend(optionsHeader), select.find("option:first-child").prop("selected", !0)
                    })
                } else newValue || newValue == oldValue || (select.children().remove(), select.append(optionsHeader))
            })
        }
    }
}]), formsOnSpeed.directive("vemmOption", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !0,
        compile: function(element, attrs, transcludeFn) {
            var v = getAttrValues(attrs, ""),
                html = vemmOption(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller, transclude) {}
        }
    }
}]), formsOnSpeed.directive("ieSelectFix", [function() {
    return {
        restrict: "A",
        require: "ngModel",
        link: function(scope, element, attributes, ngModelCtrl) {
            if (document.attachEvent) {
                var control = element[0];
                scope.$watch(attributes.ieSelectFix, function() {
                    var option = document.createElement("option");
                    control.add(option, null), control.remove(control.options.length - 1)
                })
            }
        }
    }
}]), formsOnSpeed.directive("vemmHtml", ["$parse", function($parse) {
    return {
        restrict: "EA",
        transclude: !0,
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, ""),
                html = vemmContainingDivWithTransclude(v) + vemmContainingDivClose(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmUrlParam", ["$parse", function($parse) {
    return {
        restrict: "EA",
        template: "",
        link: function(scope, element, attrs, controller) {
            setFormNameinElement(element);
            var v = getAttrValues(attrs, ""),
                value = scope.originalParams[v.param];
            if (value) switch (v.field) {
                case "vehicle_manufacturer":
                    scope.validateVehicleManufacturerAPI(value, function(isValid) {
                        isValid && (scope.lead[v.field] = decodeURIComponent(value))
                    });
                    break;
                case "fipe":
                    console.log("call from car sale"), scope.lead[v.field] = decodeURIComponent(value), scope.getmodelInfobasedonFIPE(value, function(result) {
                        angular.equals(result, {}) ? console.log("***********Fipe not exist**************") : (console.log(result), scope.lead.vehicle_manufacturer = result.vehicle_manufacturer, scope.lead.vehicle_model = result.vehicle_model, scope.modelYears = result.years, replace_dropdown_options("vehicle_year", result.years.split(",")))
                    });
                    break;
                case "auto_click":
                    scope.lead[v.field] = decodeURIComponent(value), "1" == value && setTimeout(function() {
                        window.vemm.callSubmitIfautoClickYes()
                    }, 2100);
                    break;
                case "cellphone":
                    scope.ValidaCelular(value) ? (scope.lead[v.field] = decodeURIComponent(value), setTimeout(function() {
                        window.vemm.cellularBlurEvent()
                    }, 100)) : console.log("********INVALID cellular in URL*****");
                    break;
                case "name":
                    scope.ValidaFullName(value) ? scope.lead[v.field] = decodeURIComponent(value) : console.log("********INVALID name in URL*****");
                    break;
                case "postal_code":
                    scope.ValidaCep(value) ? (scope.lead[v.field] = decodeURIComponent(value), setTimeout(function() {
                        window.vemm.cepBlurEvent()
                    }, 100)) : console.log("********INVALID CEP in URL*****");
                    break;
                case "email":
                    scope.ValidaEmail(value) ? scope.lead[v.field] = decodeURIComponent(value) : console.log("********INVALID email in URL*****");
                    break;
                case "vehicle_placa":
                    scope.ValidatePlaca(value) ? (scope.lead[v.field] = decodeURIComponent(value), setTimeout(function() {
                        window.vemm.placaBlurEvent()
                    }, 100)) : console.log("********INVALID vehicle placa in URL*****");
                    break;
                case "vehicle_bought_already":
                    if (1 == value) {
                        var newvalue = "Sim";
                        scope.lead[v.field] = decodeURIComponent(newvalue)
                    } else if (2 == value) {
                        newvalue = "Não, mas estou negociando.";
                        scope.lead[v.field] = decodeURIComponent(newvalue)
                    } else if (3 == value) {
                        newvalue = "Não, estou apenas pesquisando.";
                        scope.lead[v.field] = decodeURIComponent(newvalue)
                    }
                    break;
                case "vehicle_type":
                    for (var vehicle_types_available = ["Carro", "Moto", "Caminhão"], i = 0; i < vehicle_types_available.length; i++)
                        if (value.toLowerCase() == vehicle_types_available[i].toLowerCase()) var vehicle_type_newvalue = vehicle_types_available[i];
                    scope.lead[v.field] = decodeURIComponent(vehicle_type_newvalue);
                    break;
                case "vehicle_year":
                    setTimeout(function() {
                        scope.lead[v.field] = decodeURIComponent(value)
                    }, 100);
                    break;
                default:
                    scope.lead[v.field] = decodeURIComponent(value)
            }
        }
    }
}]), formsOnSpeed.directive("vemmGlobal", ["$parse", function($parse) {
    return {
        restrict: "EA",
        template: "",
        link: function(scope, element, attrs, controller) {
            setFormNameinElement(element);
            var v = getAttrValues(attrs, ""),
                value = window[v.field];
            value && (scope[v.field] = value)
        }
    }
}]), formsOnSpeed.directive("vemmHidden", ["$parse", function($parse) {
    return {
        restrict: "EA",
        template: "",
        link: function(scope, element, attrs, controller) {
            setFormNameinElement(element);
            var v = getAttrValues(attrs, "");
            v.value && (scope.lead[v.field] = v.value)
        }
    }
}]), formsOnSpeed.directive("vemmFieldset", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !0,
        transclude: !0,
        scope: {
            vemmLabel: "@vemmLabel"
        },
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, ""),
                html = vemmFieldset(v);
            return replaceElementHtml(element, html),
                function(scope, element, attrs) {
                    setFormNameinElement(element)
                }
        }
    }
}]), formsOnSpeed.directive("vemmMustEqualField", function($parse) {
    return {
        require: "^ngModel",
        link: function(scope, elem, attrs, ctrl) {
            scope.$watch(function() {
                return $parse(attrs.vemmMustEqualField)(scope) === ctrl.$modelValue
            }, function(currentValue) {
                ctrl.$setValidity("mismatch", currentValue)
            })
        }
    }
}), formsOnSpeed.directive("vemmRedirectToPost", ["$parse", function($parse) {
    return {
        restrict: "EA",
        transclude: !0,
        compile: function(element, attrs) {
            var v = getAttrValues(attrs, ""),
                id = randomId(),
                html = vemmRedirectToPost(v, id);
            return replaceElementHtml(element, html),
                function(scope, element, attrs, controller) {
                    setFormNameinElement(element), scope.$watch(v.conditional, function(newValue, oldValue) {
                        newValue != oldValue && newValue && (window.formsonspeed.registerExitClick(v.field, v.url), $("#" + id).submit())
                    })
                }
        }
    }
}]), formsOnSpeed.directive("vemmTest", ["$parse", function($parse) {
    return {
        restrict: "EA",
        replace: !0,
        template: "<fieldset><legend>{{vemmTest}}</legend><div ng-transclude></div></fieldset>",
        transclude: !0,
        scope: {
            vemmLabel: "@vemmLabel"
        },
        compile: function(element, attrs) {
            return replaceElementHtml(element, html), alert("vemmTest compile" + element.html()),
                function(scope, element, attrs) {
                    alert("vemmTest link" + element.html()), setFormNameinElement(element)
                }
        }
    }
}]);
var randomId = function() {
        return "vemmId-" + (Math.random().toString(36) + "00000000000000000").slice(2, 7)
    },
    vemmDropdown = function(v) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + "<select name='" + v.field + "' class='" + v.fieldClass + "' ng-model='lead." + v.field + "' ng-init='" + v.field + " = " + v.field + " || String(null)' ng-show='" + v.conditional + "' " + v.required + "ie-select-fix='lead.name' ng-transclude ng-blur='open_or_update_lead($event);' ><option value=''>----- Selecione... -----</option></select>" + errorDivsWithElement(v, "", "") + vemmContainingDivClose(v)
    },
    vemmRadioSet = function(v) {
        return vemmContainingDiv(v) + "<div class='pergunta prompt_ques strong'>" + v.label + "</div><div name='" + v.field + "' class='" + v.fieldClass + "' ng-model='lead." + v.field + "' ng-init='" + v.field + " = " + v.field + " || String(null)' ng-show='" + v.conditional + "' " + v.required + "ie-select-fix='lead.name' ng-transclude  ></div>" + errorDivsWithElement(v, "", "") + vemmContainingDivClose(v)
    },
    vemmOption = function(v) {
        return "<option value='" + v.label + "'>" + v.label + "</option>"
    },
    vemmAutocomplete = function(v) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + "<div class='' ng-show='" + v.conditional + "'>  <angucomplete-alt id='" + v.field + "' input-class='form-control form-control-small " + v.fieldClass + "' selected-object='autocomplete." + v.field + "' ng-init='" + v.field + " = " + v.field + " || String(null)' ng-show='" + v.conditional + "' " + v.required + "' placeholder='" + v.placeholder + "' maxlength='" + v.maxlength + "' text-no-results='" + v.noResults + "' local-data='" + v.local_data + "[" + v.key + "]' search-fields='name'title-field='name' minlength='0' input-class='form-control form-control-small' match-class='highlight' text-searching='Procurando...' auto-match='true' />" + vemmContainingDivClose(v) + errorDivsWithElement(v, "", "") + "</div>"
    },
    vemmAutocompleteRemote = function(v) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + "<div class='' ng-show='" + v.conditional + "'>  <angucomplete-alt id='" + v.field + "' input-class='form-control form-control-small " + v.fieldClass + "' selected-object='autocomplete." + v.field + "' ng-init='" + v.field + " = " + v.field + " || String(null)' ng-show='" + v.conditional + "' " + v.required + "' placeholder='" + v.placeholder + "' maxlength='" + v.maxlength + "' text-no-results='" + v.noResults + "' remote-url='" + v.remote_url + "' search-fields='name'remote-url-request-formatter='makeModelInfo'remote-url-data-field='results'initial-value=lead." + v.field + " title-field='name' minlength='0' input-class='form-control form-control-small' match-class='highlight' text-searching='Procurando...' auto-match='true' />" + vemmContainingDivClose(v) + errorDivsWithElement(v, "", "") + "</div>"
    },
    vemmHiddenField = function(v) {
        return vemmContainingDiv(v) + vemmInput(v, "hidden", "") + vemmContainingDivClose(v)
    },
    vemmFieldset = function(v) {
        return "<fieldset><legend>" + v.label + "</legend><div ng-transclude></div></fieldset>"
    },
    vemmRedirectToPost = function(v, id) {
        return "<form method='post' action='" + v.url + "' id='" + id + "' action='" + v.url + "' ng-show=\"" + v.conditional + '" ><div ng-transclude></div></form>'
    },
    vemmContainingDiv = function(v) {
        return "<div ng-show='" + v.conditional + "'>"
    },
    vemmContainingDivWithTransclude = function(v) {
        return "<div ng-show='" + v.conditional + "' ng-transclude>"
    },
    vemmContainingDivClose = function(v) {
        return "</div>"
    },
    vemmInput = function(v, inputType, extraAttributes) {
        return "<input id='" + v.field + "' type='" + inputType + "' name='" + v.field + "' class='" + v.fieldClass + "'  ng-model='lead." + v.field + "' ng-show='" + v.conditional + "' placeholder='" + v.placeholder + "' " + v.required + extraAttributes + " ng-blur='open_or_update_lead($event);' " + v.validations.join(" ") + " />"
    },
    vemmInputWithMask = function(v, inputType, extraAttributes, nameMaskFunction, nameValidationFunction) {
        return "<input id='" + v.field + "' type='" + inputType + "' name='" + v.field + "' class='" + v.fieldClass + "'  ng-model='lead." + v.field + "' ng-show='" + v.conditional + "' placeholder='" + v.placeholder + "' " + v.required + extraAttributes + " ng-blur='open_or_update_lead($event);' ng-paste='interceptPaste($event, \"" + nameMaskFunction + '", "' + nameValidationFunction + "\")' " + v.validations.join(" ") + " />"
    },
    vemmLabel = function(v) {
        return "<label for='" + v.field + "' class='" + v.labelClass + "' ng-show='" + v.conditional + "'>"
    },
    vemmLabelClose = function() {
        return "</label>"
    },
    vemmDateDropdowns = function(v, inputType, requiredError, InvalidError, extraAttributes) {
        var dayDropdownValues = rangeToOptions(createRange(31, 1)),
            monthDropdownValues = rangeToOptions(monthsInPortuguese),
            yearValues = rangeToOptions(createRange(78, 1920).reverse());
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmSelect(v, "Dia", dayDropdownValues, "_day") + vemmSelect(v, "Mês", monthDropdownValues, "_month") + vemmSelect(v, "Ano", yearValues, "_year") + vemmContainingDivClose(v) + errorDivsSubField(v, "Dia é requerido.", "Dia é invalido.", v.field, "_day") + errorDivsSubField(v, "Mês é requerido.", "Mês é invalido.", v.field, "_month") + errorDivsSubField(v, "Ano é requerido.", "Ano é invalido.", v.field, "_year")
    },
    vemmDateDropdownsWithFormName = function(v, inputType, requiredError, InvalidError, extraAttributes) {
        var dayDropdownValues = rangeToOptions(createRange(31, 1)),
            monthDropdownValues = rangeToOptions(monthsInPortuguese),
            currentYear = (new Date).getFullYear(),
            yearValues = rangeToOptions(createRange(currentYear - 18 - 1920 + 1, 1920).reverse());
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmSelect(v, "Dia", dayDropdownValues, "_day") + vemmSelect(v, "Mês", monthDropdownValues, "_month") + vemmSelect(v, "Ano", yearValues, "_year") + vemmContainingDivClose(v) + errorDivsSubFieldWithFormName(v, "Dia é requerido.", "Dia é invalido.", v.field, "_day") + errorDivsSubFieldWithFormName(v, "Mês é requerido.", "Mês é invalido.", v.field, "_month") + errorDivsSubFieldWithFormName(v, "Ano é requerido.", "Ano é invalido.", v.field, "_year")
    },
    monthsInPortuguese = ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"],
    createRange = function(n, start_value) {
        var array = Array(n);
        for (i = 0; i < n; i++) array[i] = i + start_value;
        return array
    },
    rangeToOptions = function(range) {
        var optionsString = "",
            n = range.length;
        for (optionsString = optionsString + "<option class='greyed-out'>" + range[0] + "</option>", i = 1; i < n; i++) optionsString = optionsString + "<option>" + range[i] + "</option>";
        return optionsString
    },
    vemmSelect = function(v, interior_label, options, subfield) {
        var completeField = v.field + subfield;
        return "<select name='" + completeField + "' class='" + v.fieldClass + " date-dropdowns' ng-model='lead." + completeField + "' ng-init='" + completeField + " = " + completeField + " || String(null)' ng-show='" + v.conditional + "' " + v.required + "ie-select-fix='lead.name'><option value=''>" + interior_label + "</option>" + options + "</select>"
    },
    vemmCompleteInputWithElement = function(v, inputType, requiredError, InvalidError, extraAttributes, form_name) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmInput(v, inputType, extraAttributes) + errorDivsWithElement(v, requiredError, InvalidError, form_name) + vemmContainingDivClose(v)
    },
    vemmCompleteInput = function(v, inputType, requiredError, InvalidError, extraAttributes) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmInput(v, inputType, extraAttributes) + errorDivs(v, requiredError, InvalidError) + vemmContainingDivClose(v)
    },
    vemmCompleteInputWithMask = function(v, inputType, requiredError, InvalidError, extraAttributes, nameMaskFunction, nameValidationFunction) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmInputWithMask(v, inputType, extraAttributes, nameMaskFunction, nameValidationFunction) + errorDivs(v, requiredError, InvalidError) + vemmContainingDivClose(v)
    },
    vemmCompleteInputWithMaskAndForm = function(v, inputType, requiredError, InvalidError, extraAttributes, nameMaskFunction, nameValidationFunction) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmInputWithMask(v, inputType, extraAttributes, nameMaskFunction, nameValidationFunction) + errorDivsWithElement(v, requiredError, InvalidError) + vemmContainingDivClose(v)
    },
    vemmCompleteInputLabelSurround = function(v, inputType, requiredError, InvalidError, extraAttributes) {
        return vemmContainingDiv(v) + vemmLabel(v) + vemmInput(v, inputType, extraAttributes) + v.label + vemmLabelClose() + errorDivs(v, requiredError, InvalidError) + vemmContainingDivClose(v)
    },
    vemmRecaptcha = function(v, inputType, requiredError, InvalidError, extraAttributes) {
        return vemmContainingDiv(v) + vemmLabel(v) + v.label + vemmLabelClose() + vemmInput(v, inputType, extraAttributes) + errorDivsWithElement(v, requiredError, InvalidError) + vemmContainingDivClose(v)
    },
    getAttrValues = function(attrs, defaultPlaceholder) {
        var conditional = "(" + (attrs.vemmConditional || "true") + ")",
            field = attrs.vemmField,
            hideIfFilled = null != attrs.vemmHideIfFilled,
            formname = attrs.vemmFormName || "leadForm";
        hideIfFilled && (conditional = conditional + "&&!((lead." + field + "!=undefined)&&(" + formname + "." + field + ".$pristine))");
        var attributeValues = {
                field: field,
                label: attrs.vemmLabel + ("required" in attrs && "false" != attrs.vemmLabelShowRequired ? " *" : ""),
                fieldClass: (attrs.vemmFieldClass || "") + " ",
                labelClass: (attrs.vemmLabelClass || "") + " ",
                confirmationField: attrs.vemmMustEqualField || "",
                url: attrs.vemmUrl || "#",
                conditional: conditional,
                required: "required" in attrs ? " ng-required='" + conditional + "' " : "",
                placeholder: attrs.vemmPlaceholder || defaultPlaceholder,
                param: attrs.vemmParam,
                value: attrs.vemmValue,
                form_name: attrs.vemmFormName,
                local_data: attrs.vemmLocalData,
                hideIfFilled: hideIfFilled,
                validations: new Array,
                maxlength: attrs.maxlength || "25",
                key: "lead." + (attrs.vemmKey || "keyMissing"),
                noResults: attrs.vemmNoResults || "Sem resultados",
                vemmCallback: attrs.vemmCallback,
                remote_url: attrs.vemmRemoteUrl
            },
            whitelistAttributesNoValue = ["vemmDateFuture"];
        for (i = 0; i < whitelistAttributesNoValue.length; i++) {
            null != (value = attrs[whitelistAttribute = whitelistAttributesNoValue[i]]) && attributeValues.validations.push(camelCaseToSnakeCase(whitelistAttribute))
        }
        var whitelistAttributes = ["min", "max", "ngMinlength", "ngMaxlength", "vemmMustEqualField"];
        for (i = 0; i < whitelistAttributes.length; i++) {
            var whitelistAttribute, value;
            (value = attrs[whitelistAttribute = whitelistAttributes[i]]) && attributeValues.validations.push(camelCaseToSnakeCase(whitelistAttribute) + "='" + value + "'")
        }
        return attributeValues
    },
    camelCaseToSnakeCase = function(value) {
        return value.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase()
    },
    errorDivs = function(v, requiredMessage, invalidMessage) {
        "" == requiredMessage && (requiredMessage = "Este campo &eacute; requerido."), "" == invalidMessage && (invalidMessage = "Este campo &eacute; inv&aacute;lido.");
        var required_error = v.required ? "<span ng-show='leadForm." + v.field + ".$error.required'>" + requiredMessage + " </span>" : "";
        return "<div class='error' ng-show='((leadForm." + v.field + ".$dirty)||(attemptedSubmit[step])) && leadForm." + v.field + ".$invalid'>" + required_error + "<span ng-show='leadForm." + v.field + ".$error.invalid'>" + invalidMessage + " </span><span ng-show='leadForm." + v.field + ".$error.mismatch'>O valor não corresponde </span><span ng-show='leadForm." + v.field + ".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='leadForm." + v.field + ".$error.maxlength'>O valor &eacute; muito longo. </span></div>"
    },
    errorDivsWithElement = function(v, requiredMessage, invalidMessage) {
        "" == requiredMessage && (requiredMessage = "Este campo &eacute; requerido."), "" == invalidMessage && (invalidMessage = "Este campo &eacute; inv&aacute;lido.");
        var form_name = v.form_name || "leadForm",
            required_error = v.required ? "<span ng-show='" + form_name + "." + v.field + ".$error.required'>" + requiredMessage + " </span>" : "";
        return "<div class='error' ng-show='((" + form_name + "." + v.field + ".$dirty)||(attemptedSubmit[step])) && " + form_name + "." + v.field + ".$invalid'>" + required_error + "<span ng-show='" + form_name + "." + v.field + ".$error.invalid'>" + invalidMessage + " </span><span ng-show='" + form_name + "." + v.field + ".$error.mismatch'>O valor não corresponde </span><span ng-show='" + form_name + "." + v.field + ".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='" + form_name + "." + v.field + ".$error.maxlength'>O valor &eacute; muito longo. </span></div>"
    },
    errorDivsSubField = function(v, requiredMessage, invalidMessage, fieldName, subField) {
        "" == requiredMessage && (requiredMessage = "Este campo &eacute; requerido."), "" == invalidMessage && (invalidMessage = "Este campo &eacute; inv&aacute;lido.");
        var required_error = v.required ? "<span ng-show='leadForm." + subFieldName + ".$error.required'>" + requiredMessage + " </span>" : "",
            subFieldName = fieldName + subField;
        return "<div class='error' ng-show='(((leadForm." + fieldName + "_day.$dirty)&&(leadForm." + fieldName + "_month.$dirty)&&(leadForm." + fieldName + "_year.$dirty))||(attemptedSubmit[step])) && leadForm." + subFieldName + ".$invalid'> " + required_error + "<span ng-show='leadForm." + subFieldName + ".$error.invalid'>" + invalidMessage + " </span><span ng-show='leadForm." + subFieldName + ".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='leadForm." + subFieldName + ".$error.maxlength'>O valor &eacute; muito longo. </span></div>"
    },
    errorDivsSubFieldWithFormName = function(v, requiredMessage, invalidMessage, fieldName, subField) {
        "" == requiredMessage && (requiredMessage = "Este campo &eacute; requerido."), "" == invalidMessage && (invalidMessage = "Este campo &eacute; inv&aacute;lido.");
        var form_name = v.form_name || "leadForm",
            required_error = v.required ? "<span ng-show='" + form_name + "." + subFieldName + ".$error.required'>" + requiredMessage + " </span>" : "",
            subFieldName = fieldName + subField;
        return "<div class='error' ng-show='(((" + form_name + "." + fieldName + "_day.$dirty)&&(" + form_name + "." + fieldName + "_month.$dirty)&&(" + form_name + "." + fieldName + "_year.$dirty))||(attemptedSubmit[step])) && " + form_name + "." + subFieldName + ".$invalid'> " + required_error + "<span ng-show='" + form_name + "." + subFieldName + ".$error.invalid'>" + invalidMessage + " </span><span ng-show='" + form_name + "." + subFieldName + ".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='" + form_name + "." + subFieldName + ".$error.maxlength'>O valor &eacute; muito longo. </span></div>"
    },
    replaceElementHtml = function(element, html) {
        element.html(html)
    },
    replaceElementHtmlAndChildren = function(element, html, children) {
        var newElem = $(html);
        newElem.innerHTML = children.innerHTML, element.replaceWith(newElem)
    },
    addTrackingVariablesToLead = function($scope, $window) {
        $scope.lead.user_agent = $window.navigator.userAgent, addRemoteIpToTrackingVariables($scope), addReferrertoTrackingVariables($scope)
    },
    addRemoteIpToTrackingVariables = function($scope) {
        $.getJSON("https://jsonip.com/?callback=?", function(json) {
            $scope.$apply(function() {
                $scope.lead.remote_ip = json.ip
            })
        })
    },
    addReferrertoTrackingVariables = function($scope) {
        var referrer = document.referrer;
        $scope.lead.referer = referrer
    },
    hashToUrlParams = function(obj) {
        var str = [];
        for (var p in obj) obj.hasOwnProperty(p) && str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
        return str.join("&")
    },
    getFormName = function(element) {
        return $(element).closest("form").attr("name")
    },
    setFormNameinElement = function(element) {
        var formName = getFormName(element),
            conditional = $(element.html()).attr("ng-show");
        null != conditional && element.attr("ng-show", conditional.replace("leadForm", formName))
    },
    setFormNameinElementHtml = function(element) {
        var formName = getFormName(element);
        $(element.html());
        element.find("div,span,input,label").each(function() {
            var conditional = $(this).attr("ng-show"),
                required = $(this).attr("ng-required");
            $(this).attr("ng-show", conditional.replace(/leadForm/g, formName)), null != required && $(this).attr("ng-required", required.replace(/leadForm/g, formName))
        })
    };

function mascaraInteiro(event) {
    return !(event.keyCode < 48 || 57 < event.keyCode) || (event.returnValue = !1)
}

function formataCampo(campo, Mascara, evento) {
    if ("" == campo.value) return !0;
    var Digitato = evento.keyCode;
    exp = /\-|\.|\/|\(|\)| /g, campoSoNumeros = campo.value.toString().replace(exp, "");
    var posicaoCampo = 0,
        NovoValorCampo = "",
        TamanhoMascara = campoSoNumeros.length;
    if (8 == Digitato) return !0;
    for (i = 0; i <= TamanhoMascara; i++) "-" == Mascara.charAt(i) || "." == Mascara.charAt(i) || "/" == Mascara.charAt(i) || "(" == Mascara.charAt(i) || ")" == Mascara.charAt(i) || " " == Mascara.charAt(i) ? (NovoValorCampo += Mascara.charAt(i), TamanhoMascara++) : (NovoValorCampo += campoSoNumeros.charAt(posicaoCampo), posicaoCampo++);
    return campo.value = NovoValorCampo, !0
}

function setFosScopeVariable(variable, value) {
    var scope = angular.element($("#formController")).scope();
    scope.$apply(function() {
        scope[variable] = value
    })
}
window.formsonspeed.getConfigParam = function(param) {}, window.formsonspeed.registerGoogleAnalyticsTransaction = function() {
    console.log("Recording transaction on Google Analytics"), "function" == typeof gtag ? gtag("event", "purchase", {
        transaction_id: "1234",
        affiliation: this.configParams.formName,
        value: this.configParams.dummyValue,
        currency: "BRL",
        tax: "0.0",
        shipping: "0",
        items: [{
            id: this.configParams.analyticsSku,
            name: this.configParams.analyticsProduct,
            list_name: "Search Results",
            brand: "Google",
            category: this.configParams.analyticsCategory,
            price: this.configParams.dummyValue,
            quantity: "1"
        }]
    }) : "function" == typeof ga && (ga("ecommerce:addTransaction", {
        id: "1234",
        affiliation: this.configParams.formName,
        revenue: this.configParams.dummyValue,
        shipping: "0",
        tax: "0.0"
    }), ga("ecommerce:addItem", {
        id: "1234",
        name: this.configParams.analyticsProduct,
        sku: this.configParams.analyticsSku,
        category: this.configParams.analyticsCategory,
        price: this.configParams.dummyValue,
        quantity: "1"
    }), ga("ecommerce:send"))
}, window.formsonspeed.registerVisualWebsiteOptimizerConversion = function() {
    if ("function" == typeof _vis_opt_top_initialize) {
        var vwoGoalNumber = window.vemm.VWOGoalNumber || 232;
        _vis_opt_goal_conversion(vwoGoalNumber), console.log("VWO goal registered:"), console.log(vwoGoalNumber), _vis_opt_pause(500)
    }
}, window.formsonspeed.runThankYouScripts = function() {
    var oldDocumentWrite = document.write;
    document.write = function(node) {
        $("body").append(node)
    }, $("#thankyou-node").load("thankyou_scripts.html", function() {
        console.log("Thank you scripts loaded successfully"), setTimeout(function() {
            document.write = oldDocumentWrite
        }, 100)
    })
}, window.formsonspeed.sendGoogleAnalyticsEvent = function(action, field, fieldValue) {
    if ("function" == typeof gtag) {
        var options = {};
        field || (field = ""), action && (options.event_category = action), fieldValue && (options.event_label = fieldValue), gtag("event", field, options)
    } else "function" == typeof ga && ga("send", "event", action, field, fieldValue)
}, window.formsonspeed.registerFieldFilledIn = function(field, fieldValue, valid) {
    var action = valid ? "FieldOk" : "FieldError";
    window.formsonspeed.sendGoogleAnalyticsEvent(action, field, fieldValue)
}, window.formsonspeed.registerExitClick = function(linkName, destination) {
    window.formsonspeed.sendGoogleAnalyticsEvent("ExitClick", linkName, destination)
}, window.formsonspeed.registerConversion = function() {
    console.log("Registered form submission with Analytics"), window.formsonspeed.sendGoogleAnalyticsEvent("FormSubmitted")
};
var leadModule = angular.module("leadModule", []);

function _typeof4(obj) {
    return (_typeof4 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}

function _typeof(obj) {
    return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}

function _typeof(obj) {
    return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
        return typeof obj
    } : function(obj) {
        return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
    })(obj)
}
leadModule.factory("Lead", function($resource) {
        return $resource("//formsonspeed.herokuapp.com/vleads/:id", {
            id: "@id"
        }, {
            update: {
                method: "PUT"
            }
        })
    }), formsOnSpeed.directive("vemmStep", function() {
        return {
            restrict: "A",
            link: function($scope, $element, $attr) {
                $scope._incrementSteps();
                var index = $scope.steps;
                $scope.$watch("step", function(value) {
                    value === index ? $element.removeClass("ng-hide") : $element.addClass("ng-hide")
                })
            }
        }
    }),
    function(f) {
        if ("object" === ("undefined" == typeof exports ? "undefined" : _typeof4(exports)) && "undefined" != typeof module) module.exports = f();
        else if ("function" == typeof define && define.amd) define([], f);
        else {
            var g;
            ((g = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).Twilio || (g.Twilio = {})).Chat = f()
        }
    }(function() {
        var define, module, exports;
        return function e(t, n, r) {
            function s(o, u) {
                if (!n[o]) {
                    if (!t[o]) {
                        var a = "function" == typeof require && require;
                        if (!u && a) return a(o, !0);
                        if (i) return i(o, !0);
                        var f = new Error("Cannot find module '" + o + "'");
                        throw f.code = "MODULE_NOT_FOUND", f
                    }
                    var l = n[o] = {
                        exports: {}
                    };
                    t[o][0].call(l.exports, function(e) {
                        var n = t[o][1][e];
                        return s(n || e)
                    }, l, l.exports, e, t, n, r)
                }
                return n[o].exports
            }
            for (var i = "function" == typeof require && require, o = 0; o < r.length; o++) s(r[o]);
            return s
        }({
            1: [function(_dereq_, module, exports) {
                "use strict";
                var _getIterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/get-iterator")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _isInteger2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/number/is-integer")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    logger_1 = _dereq_("./logger"),
                    members_1 = _dereq_("./data/members"),
                    member_1 = _dereq_("./member"),
                    messages_1 = _dereq_("./data/messages"),
                    util_1 = _dereq_("./util"),
                    log = logger_1.Logger.scope(""),
                    fieldMappings = {
                        attributes: "attributes",
                        createdBy: "createdBy",
                        dateCreated: "dateCreated",
                        dateUpdated: "dateUpdated",
                        friendlyName: "friendlyName",
                        lastConsumedMessageIndex: "lastConsumedMessageIndex",
                        name: "friendlyName",
                        sid: "sid",
                        status: "status",
                        type: "type",
                        uniqueName: "uniqueName"
                    };

                function parseTime(timeString) {
                    try {
                        return new Date(timeString)
                    } catch (e) {
                        return null
                    }
                }

                function filterStatus(status) {
                    switch (status) {
                        case "notParticipating":
                            return "known";
                        default:
                            return status
                    }
                }
                exports.filterStatus = filterStatus;
                var Channel = function(_events_1$EventEmitte) {
                    function Channel(services, descriptor, sid) {
                        (0, _classCallCheck3.default)(this, Channel);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (Channel.__proto__ || (0, _getPrototypeOf2.default)(Channel)).call(this)),
                            attributes = descriptor.attributes || {},
                            createdBy = descriptor.createdBy,
                            dateCreated = parseTime(descriptor.dateCreated),
                            dateUpdated = parseTime(descriptor.dateUpdated),
                            friendlyName = descriptor.name || descriptor.friendlyName || null,
                            lastConsumedMessageIndex = (0, _isInteger2.default)(descriptor.lastConsumedMessageIndex) ? descriptor.lastConsumedMessageIndex : null,
                            uniqueName = descriptor.uniqueName || null;
                        try {
                            (0, _stringify2.default)(attributes)
                        } catch (e) {
                            throw new Error("Attributes must be a valid JSON object.")
                        }
                        return _this.services = services, _this.sid = sid, _this.entityName = descriptor.channel, _this.state = {
                            uniqueName: uniqueName,
                            status: "known",
                            type: descriptor.type,
                            attributes: attributes,
                            createdBy: createdBy,
                            dateCreated: dateCreated,
                            dateUpdated: dateUpdated,
                            friendlyName: friendlyName,
                            lastConsumedMessageIndex: lastConsumedMessageIndex
                        }, _this.members = new _map2.default, _this.membersEntity = new members_1.Members(_this, _this.services, _this.members), _this.membersEntity.on("memberJoined", _this.emit.bind(_this, "memberJoined")), _this.membersEntity.on("memberLeft", _this.emit.bind(_this, "memberLeft")), _this.membersEntity.on("memberUpdated", _this.emit.bind(_this, "memberUpdated")), _this.messagesEntity = new messages_1.Messages(_this, services), _this.messagesEntity.on("messageAdded", function(message) {
                            return _this._onMessageAdded(message)
                        }), _this.messagesEntity.on("messageUpdated", _this.emit.bind(_this, "messageUpdated")), _this.messagesEntity.on("messageRemoved", _this.emit.bind(_this, "messageRemoved")), _this
                    }
                    return (0, _inherits3.default)(Channel, _events_1$EventEmitte), (0, _createClass3.default)(Channel, [{
                        key: "_subscribe",
                        value: function() {
                            var _this2 = this;
                            return this.entityPromise ? this.entityPromise : this.entityPromise = this.entityPromise || this.services.syncClient.document({
                                uniqueName: this.entityName,
                                mode: "open"
                            }).then(function(entity) {
                                return _this2.entity = entity, _this2.entity.on("updated", function(value) {
                                    _this2._update(value)
                                }), _this2.entity.on("removed", function() {
                                    return _this2.emit("removed", _this2)
                                }), _this2._update(_this2.entity.value), entity
                            }).catch(function(err) {
                                throw _this2.entity = null, _this2.entityPromise = null, log.error("Failed to get channel object", err), err
                            })
                        }
                    }, {
                        key: "_subscribeStreams",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                var messagesObjectName, rosterObjectName;
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return _context.prev = 0, _context.next = 3, this._subscribe();
                                        case 3:
                                            return log.trace("_subscribeStreams, this.entity.value=", this.entity.value), messagesObjectName = this.entity.value.messages, rosterObjectName = this.entity.value.roster, _context.next = 8, _promise2.default.all([this.messagesEntity.subscribe(messagesObjectName), this.membersEntity.subscribe(rosterObjectName)]);
                                        case 8:
                                            _context.next = 14;
                                            break;
                                        case 10:
                                            throw _context.prev = 10, _context.t0 = _context.catch(0), log.error("Failed to subscribe on channel objects", this.sid, _context.t0), _context.t0;
                                        case 14:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this, [
                                    [0, 10]
                                ])
                            }))
                        }
                    }, {
                        key: "_unsubscribe",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            if (this.isPrivate && this.entity) return _context2.next = 3, this.entity.close();
                                            _context2.next = 5;
                                            break;
                                        case 3:
                                            this.entity = null, this.entityPromise = null;
                                        case 5:
                                            return _context2.abrupt("return", _promise2.default.all([this.membersEntity.unsubscribe(), this.messagesEntity.unsubscribe()]));
                                        case 6:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "_setStatus",
                        value: function(status, source) {
                            this.statusSource = source, this.state.status !== status && ("joined" === (this.state.status = status) ? this._subscribeStreams() : "invited" === status ? this._subscribe() : this.entityPromise && this._unsubscribe())
                        }
                    }, {
                        key: "_statusSource",
                        value: function() {
                            return this.statusSource
                        }
                    }, {
                        key: "_update",
                        value: function(update) {
                            log.trace("_update", update), Channel.preprocessUpdate(update, this.sid);
                            var updated = !1;
                            for (var key in update) {
                                var localKey = fieldMappings[key];
                                localKey && (localKey === fieldMappings.status ? update.status && "unknown" != update.status && (this.state.status = filterStatus(update.status)) : localKey === fieldMappings.attributes ? util_1.isDeepEqual(this.state.attributes, update.attributes) || (this.state.attributes = update.attributes, updated = !0) : update[key] instanceof Date ? this.state[localKey] && this.state[localKey].getTime() === update[key].getTime() || (this.state[localKey] = update[key], updated = !0) : this[localKey] !== update[key] && (this.state[localKey] = update[key], updated = !0))
                            }
                            updated && this.emit("updated", this)
                        }
                    }, {
                        key: "_onMessageAdded",
                        value: function(message) {
                            var _iteratorNormalCompletion = !0,
                                _didIteratorError = !1,
                                _iteratorError = void 0;
                            try {
                                for (var _step, _iterator = (0, _getIterator3.default)(this.members.values()); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0) {
                                    var member = _step.value;
                                    if (member.identity === message.author) {
                                        member._endTyping();
                                        break
                                    }
                                }
                            } catch (err) {
                                _didIteratorError = !0, _iteratorError = err
                            } finally {
                                try {
                                    !_iteratorNormalCompletion && _iterator.return && _iterator.return()
                                } finally {
                                    if (_didIteratorError) throw _iteratorError
                                }
                            }
                            this.emit("messageAdded", message)
                        }
                    }, {
                        key: "add",
                        value: function(identity) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                return _regenerator2.default.wrap(function(_context3) {
                                    for (;;) switch (_context3.prev = _context3.next) {
                                        case 0:
                                            if (identity && "string" == typeof identity) {
                                                _context3.next = 2;
                                                break
                                            }
                                            throw new Error("Channel.add requires an <String>identity parameter");
                                        case 2:
                                            return _context3.abrupt("return", this.membersEntity.add(identity));
                                        case 3:
                                        case "end":
                                            return _context3.stop()
                                    }
                                }, _callee3, this)
                            }))
                        }
                    }, {
                        key: "advanceLastConsumedMessageIndex",
                        value: function(index) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                return _regenerator2.default.wrap(function(_context4) {
                                    for (;;) switch (_context4.prev = _context4.next) {
                                        case 0:
                                            if ((0, _isInteger2.default)(index)) {
                                                _context4.next = 2;
                                                break
                                            }
                                            throw new Error("Channel.advanceLastConsumedMessageIndex requires an integral <Number>index parameter");
                                        case 2:
                                            if (null !== this.lastConsumedMessageIndex && index <= this.lastConsumedMessageIndex) return _context4.abrupt("return");
                                            _context4.next = 4;
                                            break;
                                        case 4:
                                            return _context4.next = 6, this._subscribeStreams();
                                        case 6:
                                            return this.services.consumptionHorizon.advanceLastConsumedMessageIndexForChannel(this.sid, index), _context4.abrupt("return", this);
                                        case 8:
                                        case "end":
                                            return _context4.stop()
                                    }
                                }, _callee4, this)
                            }))
                        }
                    }, {
                        key: "decline",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                return _regenerator2.default.wrap(function(_context5) {
                                    for (;;) switch (_context5.prev = _context5.next) {
                                        case 0:
                                            return _context5.next = 2, this.services.session.addCommand("declineInvitation", {
                                                channelSid: this.sid
                                            });
                                        case 2:
                                            return _context5.abrupt("return", this);
                                        case 3:
                                        case "end":
                                            return _context5.stop()
                                    }
                                }, _callee5, this)
                            }))
                        }
                    }, {
                        key: "delete",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                return _regenerator2.default.wrap(function(_context6) {
                                    for (;;) switch (_context6.prev = _context6.next) {
                                        case 0:
                                            return _context6.next = 2, this.services.session.addCommand("destroyChannel", {
                                                channelSid: this.sid
                                            });
                                        case 2:
                                            return _context6.abrupt("return", this);
                                        case 3:
                                        case "end":
                                            return _context6.stop()
                                    }
                                }, _callee6, this)
                            }))
                        }
                    }, {
                        key: "getAttributes",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                return _regenerator2.default.wrap(function(_context7) {
                                    for (;;) switch (_context7.prev = _context7.next) {
                                        case 0:
                                            return _context7.next = 2, this._subscribe();
                                        case 2:
                                            return _context7.abrupt("return", this.attributes);
                                        case 3:
                                        case "end":
                                            return _context7.stop()
                                    }
                                }, _callee7, this)
                            }))
                        }
                    }, {
                        key: "getMessages",
                        value: function(pageSize, anchor, direction) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {
                                return _regenerator2.default.wrap(function(_context8) {
                                    for (;;) switch (_context8.prev = _context8.next) {
                                        case 0:
                                            if (void 0 === anchor || (0, _isInteger2.default)(anchor)) {
                                                _context8.next = 2;
                                                break
                                            }
                                            throw new Error("Anchor should be a valid message index");
                                        case 2:
                                            return _context8.next = 4, this._subscribeStreams();
                                        case 4:
                                            return _context8.abrupt("return", this.messagesEntity.getMessages(pageSize, anchor, direction));
                                        case 5:
                                        case "end":
                                            return _context8.stop()
                                    }
                                }, _callee8, this)
                            }))
                        }
                    }, {
                        key: "getMembers",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {
                                return _regenerator2.default.wrap(function(_context9) {
                                    for (;;) switch (_context9.prev = _context9.next) {
                                        case 0:
                                            return _context9.next = 2, this._subscribeStreams();
                                        case 2:
                                            return _context9.abrupt("return", this.membersEntity.getMembers());
                                        case 3:
                                        case "end":
                                            return _context9.stop()
                                    }
                                }, _callee9, this)
                            }))
                        }
                    }, {
                        key: "getMembersCount",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {
                                var links, url, response;
                                return _regenerator2.default.wrap(function(_context10) {
                                    for (;;) switch (_context10.prev = _context10.next) {
                                        case 0:
                                            return _context10.next = 2, this.services.session.getSessionLinks();
                                        case 2:
                                            return links = _context10.sent, url = new util_1.UriBuilder(links.publicChannelsUrl).path(this.sid).build(), _context10.next = 6, this.services.network.get(url);
                                        case 6:
                                            return response = _context10.sent, _context10.abrupt("return", response.body.members_count);
                                        case 8:
                                        case "end":
                                            return _context10.stop()
                                    }
                                }, _callee10, this)
                            }))
                        }
                    }, {
                        key: "getMessagesCount",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {
                                var links, url, response;
                                return _regenerator2.default.wrap(function(_context11) {
                                    for (;;) switch (_context11.prev = _context11.next) {
                                        case 0:
                                            return _context11.next = 2, this.services.session.getSessionLinks();
                                        case 2:
                                            return links = _context11.sent, url = new util_1.UriBuilder(links.publicChannelsUrl).path(this.sid).build(), _context11.next = 6, this.services.network.get(url);
                                        case 6:
                                            return response = _context11.sent, _context11.abrupt("return", response.body.messages_count);
                                        case 8:
                                        case "end":
                                            return _context11.stop()
                                    }
                                }, _callee11, this)
                            }))
                        }
                    }, {
                        key: "getUnconsumedMessagesCount",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {
                                var links, url, response;
                                return _regenerator2.default.wrap(function(_context12) {
                                    for (;;) switch (_context12.prev = _context12.next) {
                                        case 0:
                                            return _context12.next = 2, this.services.session.getSessionLinks();
                                        case 2:
                                            return links = _context12.sent, url = new util_1.UriBuilder(links.myChannelsUrl).arg("ChannelSid", this.sid).build(), _context12.next = 6, this.services.network.get(url);
                                        case 6:
                                            if ((response = _context12.sent).body.channels.length) return _context12.abrupt("return", response.body.channels[0].unread_messages_count || 0);
                                            _context12.next = 9;
                                            break;
                                        case 9:
                                            throw new Error("Channel is not in user channels list");
                                        case 10:
                                        case "end":
                                            return _context12.stop()
                                    }
                                }, _callee12, this)
                            }))
                        }
                    }, {
                        key: "invite",
                        value: function(identity) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {
                                return _regenerator2.default.wrap(function(_context13) {
                                    for (;;) switch (_context13.prev = _context13.next) {
                                        case 0:
                                            if ("string" == typeof identity && identity.length) {
                                                _context13.next = 2;
                                                break
                                            }
                                            throw new Error("Channel.invite requires an <String>identity parameter");
                                        case 2:
                                            return _context13.abrupt("return", this.membersEntity.invite(identity));
                                        case 3:
                                        case "end":
                                            return _context13.stop()
                                    }
                                }, _callee13, this)
                            }))
                        }
                    }, {
                        key: "join",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee14() {
                                return _regenerator2.default.wrap(function(_context14) {
                                    for (;;) switch (_context14.prev = _context14.next) {
                                        case 0:
                                            return _context14.next = 2, this.services.session.addCommand("joinChannel", {
                                                channelSid: this.sid
                                            });
                                        case 2:
                                            return _context14.abrupt("return", this);
                                        case 3:
                                        case "end":
                                            return _context14.stop()
                                    }
                                }, _callee14, this)
                            }))
                        }
                    }, {
                        key: "leave",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee15() {
                                return _regenerator2.default.wrap(function(_context15) {
                                    for (;;) switch (_context15.prev = _context15.next) {
                                        case 0:
                                            if ("joined" === this.state.status) return _context15.next = 3, this.services.session.addCommand("leaveChannel", {
                                                channelSid: this.sid
                                            });
                                            _context15.next = 3;
                                            break;
                                        case 3:
                                            return _context15.abrupt("return", this);
                                        case 4:
                                        case "end":
                                            return _context15.stop()
                                    }
                                }, _callee15, this)
                            }))
                        }
                    }, {
                        key: "removeMember",
                        value: function(member) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee16() {
                                return _regenerator2.default.wrap(function(_context16) {
                                    for (;;) switch (_context16.prev = _context16.next) {
                                        case 0:
                                            if (member && ("string" == typeof member || member instanceof member_1.Member)) {
                                                _context16.next = 2;
                                                break
                                            }
                                            throw new Error("Channel.removeMember requires a <String|Member>member parameter.");
                                        case 2:
                                            return _context16.abrupt("return", this.membersEntity.remove("string" == typeof member ? member : member.identity));
                                        case 3:
                                        case "end":
                                            return _context16.stop()
                                    }
                                }, _callee16, this)
                            }))
                        }
                    }, {
                        key: "sendMessage",
                        value: function(message, messageAttributes) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee17() {
                                var response, _response;
                                return _regenerator2.default.wrap(function(_context17) {
                                    for (;;) switch (_context17.prev = _context17.next) {
                                        case 0:
                                            if ("string" == typeof message) return _context17.next = 3, this.messagesEntity.send(message, messageAttributes);
                                            _context17.next = 7;
                                            break;
                                        case 3:
                                            return response = _context17.sent, _context17.abrupt("return", response.messageId);
                                        case 7:
                                            return _context17.next = 9, this.messagesEntity.sendMedia(message, messageAttributes);
                                        case 9:
                                            return _response = _context17.sent, _context17.abrupt("return", _response.messageId);
                                        case 11:
                                        case "end":
                                            return _context17.stop()
                                    }
                                }, _callee17, this)
                            }))
                        }
                    }, {
                        key: "setAllMessagesConsumed",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee18() {
                                var messagesPage;
                                return _regenerator2.default.wrap(function(_context18) {
                                    for (;;) switch (_context18.prev = _context18.next) {
                                        case 0:
                                            return _context18.next = 2, this._subscribeStreams();
                                        case 2:
                                            return _context18.next = 4, this.getMessages(1);
                                        case 4:
                                            if (0 < (messagesPage = _context18.sent).items.length) return _context18.next = 8, this.advanceLastConsumedMessageIndex(messagesPage.items[0].index);
                                            _context18.next = 8;
                                            break;
                                        case 8:
                                            return _context18.abrupt("return", this);
                                        case 9:
                                        case "end":
                                            return _context18.stop()
                                    }
                                }, _callee18, this)
                            }))
                        }
                    }, {
                        key: "setNoMessagesConsumed",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee19() {
                                return _regenerator2.default.wrap(function(_context19) {
                                    for (;;) switch (_context19.prev = _context19.next) {
                                        case 0:
                                            return _context19.next = 2, this._subscribeStreams();
                                        case 2:
                                            return this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid, null), _context19.abrupt("return", this);
                                        case 4:
                                        case "end":
                                            return _context19.stop()
                                    }
                                }, _callee19, this)
                            }))
                        }
                    }, {
                        key: "typing",
                        value: function() {
                            return this.services.typingIndicator.send(this.sid)
                        }
                    }, {
                        key: "updateAttributes",
                        value: function(attributes) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee20() {
                                return _regenerator2.default.wrap(function(_context20) {
                                    for (;;) switch (_context20.prev = _context20.next) {
                                        case 0:
                                            if (attributes) {
                                                _context20.next = 4;
                                                break
                                            }
                                            throw new Error("Attributes can't be null");
                                        case 4:
                                            if (attributes.constructor !== Object) throw new Error("Attributes must be a valid JSON object.");
                                            _context20.next = 6;
                                            break;
                                        case 6:
                                            return _context20.next = 8, this.services.session.addCommand("editAttributes", {
                                                channelSid: this.sid,
                                                attributes: (0, _stringify2.default)(attributes)
                                            });
                                        case 8:
                                            return _context20.abrupt("return", this);
                                        case 9:
                                        case "end":
                                            return _context20.stop()
                                    }
                                }, _callee20, this)
                            }))
                        }
                    }, {
                        key: "updateFriendlyName",
                        value: function(name) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee21() {
                                return _regenerator2.default.wrap(function(_context21) {
                                    for (;;) switch (_context21.prev = _context21.next) {
                                        case 0:
                                            if (this.state.friendlyName !== name) return _context21.next = 3, this.services.session.addCommand("editFriendlyName", {
                                                channelSid: this.sid,
                                                friendlyName: name
                                            });
                                            _context21.next = 3;
                                            break;
                                        case 3:
                                            return _context21.abrupt("return", this);
                                        case 4:
                                        case "end":
                                            return _context21.stop()
                                    }
                                }, _callee21, this)
                            }))
                        }
                    }, {
                        key: "updateLastConsumedMessageIndex",
                        value: function(index) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee22() {
                                return _regenerator2.default.wrap(function(_context22) {
                                    for (;;) switch (_context22.prev = _context22.next) {
                                        case 0:
                                            if ((0, _isInteger2.default)(index) || null === index) {
                                                _context22.next = 2;
                                                break
                                            }
                                            throw new Error('Incorrect argument "index": integer number or null expected');
                                        case 2:
                                            return _context22.next = 4, this._subscribeStreams();
                                        case 4:
                                            return this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid, index), _context22.abrupt("return", this);
                                        case 6:
                                        case "end":
                                            return _context22.stop()
                                    }
                                }, _callee22, this)
                            }))
                        }
                    }, {
                        key: "updateUniqueName",
                        value: function(uniqueName) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee23() {
                                return _regenerator2.default.wrap(function(_context23) {
                                    for (;;) switch (_context23.prev = _context23.next) {
                                        case 0:
                                            if (this.state.uniqueName !== uniqueName) return _context23.next = 3, this.services.session.addCommand("editUniqueName", {
                                                channelSid: this.sid,
                                                uniqueName: uniqueName
                                            });
                                            _context23.next = 3;
                                            break;
                                        case 3:
                                            return _context23.abrupt("return", this);
                                        case 4:
                                        case "end":
                                            return _context23.stop()
                                    }
                                }, _callee23, this)
                            }))
                        }
                    }, {
                        key: "getUserDescriptors",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee24() {
                                return _regenerator2.default.wrap(function(_context24) {
                                    for (;;) switch (_context24.prev = _context24.next) {
                                        case 0:
                                            return _context24.abrupt("return", this.services.users.getChannelUserDescriptors(this.sid));
                                        case 1:
                                        case "end":
                                            return _context24.stop()
                                    }
                                }, _callee24, this)
                            }))
                        }
                    }, {
                        key: "status",
                        get: function() {
                            return this.state.status
                        }
                    }, {
                        key: "type",
                        get: function() {
                            return this.state.type
                        }
                    }, {
                        key: "uniqueName",
                        get: function() {
                            return this.state.uniqueName
                        }
                    }, {
                        key: "isPrivate",
                        get: function() {
                            return "private" === this.state.type
                        }
                    }, {
                        key: "friendlyName",
                        get: function() {
                            return this.state.friendlyName
                        }
                    }, {
                        key: "dateUpdated",
                        get: function() {
                            return this.state.dateUpdated
                        }
                    }, {
                        key: "dateCreated",
                        get: function() {
                            return this.state.dateCreated
                        }
                    }, {
                        key: "createdBy",
                        get: function() {
                            return this.state.createdBy
                        }
                    }, {
                        key: "attributes",
                        get: function() {
                            return this.state.attributes
                        }
                    }, {
                        key: "lastConsumedMessageIndex",
                        get: function() {
                            return this.state.lastConsumedMessageIndex
                        }
                    }], [{
                        key: "preprocessUpdate",
                        value: function(update, channelSid) {
                            try {
                                "string" == typeof update.attributes ? update.attributes = JSON.parse(update.attributes) : update.attributes && (0, _stringify2.default)(update.attributes)
                            } catch (e) {
                                log.warn("Retrieved malformed attributes from the server for channel: " + channelSid), update.attributes = {}
                            }
                            try {
                                update.dateCreated && (update.dateCreated = new Date(update.dateCreated))
                            } catch (e) {
                                log.warn("Retrieved malformed attributes from the server for channel: " + channelSid), delete update.dateCreated
                            }
                            try {
                                update.dateUpdated && (update.dateUpdated = new Date(update.dateUpdated))
                            } catch (e) {
                                log.warn("Retrieved malformed attributes from the server for channel: " + channelSid), delete update.dateUpdated
                            }
                        }
                    }]), Channel
                }(events_1.EventEmitter);
                exports.Channel = Channel
            }, {
                "./data/members": 6,
                "./data/messages": 7,
                "./logger": 14,
                "./member": 16,
                "./util": 30,
                "babel-runtime/core-js/get-iterator": 32,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/number/is-integer": 36,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            2: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("./logger"),
                    channel_1 = _dereq_("./channel"),
                    log = new logger_1.Logger;

                function parseTime(timeString) {
                    try {
                        return new Date(timeString)
                    } catch (e) {
                        return null
                    }
                }
                var ChannelDescriptor = function() {
                    function ChannelDescriptor(client, descriptor) {
                        (0, _classCallCheck3.default)(this, ChannelDescriptor), this.client = client, (this.descriptor = descriptor).sid ? (this.sid = descriptor.sid, this.channel = descriptor.sid + ".channel") : (this.sid = descriptor.channel_sid, this.channel = descriptor.channel_sid + ".channel"), this.uniqueName = descriptor.unique_name, this.friendlyName = descriptor.friendly_name, this.attributes = function(attrs) {
                            try {
                                return JSON.parse(attrs)
                            } catch (e) {
                                log.warn("Failed to parse channel attributes", e)
                            }
                            return {}
                        }(descriptor.attributes), this.createdBy = descriptor.created_by, this.dateCreated = parseTime(descriptor.date_created), this.dateUpdated = parseTime(descriptor.date_updated), this.messagesCount = descriptor.messages_count, this.membersCount = descriptor.members_count, this.type = descriptor.type, this.isPrivate = "private" == descriptor.type, this.lastConsumedMessageIndex = descriptor.last_consumed_message_index, descriptor.status ? this.status = channel_1.filterStatus(descriptor.status) : this.status = "unknown"
                    }
                    return (0, _createClass3.default)(ChannelDescriptor, [{
                        key: "getChannel",
                        value: function() {
                            return this.client.getChannelBySid(this.sid)
                        }
                    }]), ChannelDescriptor
                }();
                exports.ChannelDescriptor = ChannelDescriptor
            }, {
                "./channel": 1,
                "./logger": 14,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            3: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    logger_1 = _dereq_("./logger"),
                    configuration_1 = _dereq_("./configuration"),
                    user_1 = _dereq_("./user");
                exports.User = user_1.User;
                var publicchannels_1 = _dereq_("./data/publicchannels"),
                    network_1 = _dereq_("./services/network"),
                    notificationtypes_1 = _dereq_("./interfaces/notificationtypes"),
                    synclist_1 = _dereq_("./synclist"),
                    TwilsockClient = _dereq_("twilsock"),
                    NotificationClient = _dereq_("twilio-notifications"),
                    twilio_transport_1 = _dereq_("twilio-transport"),
                    twilio_sync_1 = _dereq_("twilio-sync"),
                    twilio_ems_client_1 = _dereq_("twilio-ems-client"),
                    twilio_mcs_client_1 = _dereq_("twilio-mcs-client"),
                    session_1 = _dereq_("./session"),
                    channels_1 = _dereq_("./data/channels"),
                    users_1 = _dereq_("./data/users"),
                    typingindicator_1 = _dereq_("./services/typingindicator"),
                    consumptionhorizon_1 = _dereq_("./services/consumptionhorizon"),
                    userchannels_1 = _dereq_("./data/userchannels"),
                    pushnotification_1 = _dereq_("./pushnotification");
                exports.PushNotification = pushnotification_1.PushNotification;
                var util_1 = _dereq_("./util"),
                    log = logger_1.Logger.scope(""),
                    SDK_VERSION = _dereq_("./../package.json").version,
                    MSG_NO_TOKEN = "A valid Twilio token should be provided",
                    ClientServices = function ClientServices() {
                        (0, _classCallCheck3.default)(this, ClientServices)
                    },
                    Client = function(_events_1$EventEmitte) {
                        function Client(token, options) {
                            (0, _classCallCheck3.default)(this, Client);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (Client.__proto__ || (0, _getPrototypeOf2.default)(Client)).call(this));
                            if (_this.connectionState = "connecting", _this.initializePromise = null, _this.sessionPromise = null, _this.channelsPromise = null, _this.options = options || {}, _this.options.logLevel = _this.options.logLevel || "error", _this.options.productId = "ip_messaging", _this.options.Sync = _this.options.Sync || {}, _this.options.Sync.enableSessionStorage || (_this.options.Sync.enableSessionStorage = !1), !token) throw new Error(MSG_NO_TOKEN);
                            return log.setLevel(_this.options.logLevel), _this.services = new ClientServices, _this.config = new configuration_1.Configuration(null, _this.options), _this.options.twilsockClient = _this.options.twilsockClient || new TwilsockClient(token, _this.options), _this.options.transport = _this.options.transport || new twilio_transport_1.Transport(_this.options.twilsockClient, _this.options), _this.options.emsClient = _this.options.emsClient || new twilio_ems_client_1.EmsClient(_this.options), _this.options.notificationsClient = _this.options.notificationsClient || new NotificationClient(token, _this.options), _this.options.syncClient = _this.options.syncClient || new twilio_sync_1.SyncClient(token, _this.options), _this.services.emsClient = _this.options.emsClient, _this.services.syncClient = _this.options.syncClient, _this.services.transport = _this.options.transport, _this.services.twilsockClient = _this.options.twilsockClient, _this.services.notificationClient = _this.options.notificationsClient, _this.services.session = new session_1.Session(_this.services, _this.config), _this.sessionPromise = _this.services.session.initialize(token), _this.services.network = new network_1.Network(_this.config, _this.services), _this.services.users = new users_1.Users({
                                session: _this.services.session,
                                network: _this.services.network,
                                syncClient: _this.services.syncClient
                            }), _this.services.users.on("userSubscribed", _this.emit.bind(_this, "userSubscribed")), _this.services.users.on("userUpdated", _this.emit.bind(_this, "userUpdated")), _this.services.users.on("userUnsubscribed", _this.emit.bind(_this, "userUnsubscribed")), _this.services.consumptionHorizon = new consumptionhorizon_1.ConsumptionHorizon(_this.services), _this.services.typingIndicator = new typingindicator_1.TypingIndicator(_this.config, {
                                transport: _this.services.transport,
                                notificationClient: _this.services.notificationClient
                            }, _this.getChannelBySid.bind(_this)), _this.services.syncList = new synclist_1.SyncList(_this.services), _this.channels = new channels_1.Channels(_this.services), _this.channelsPromise = _this.sessionPromise.then(function() {
                                return _this.channels.on("channelAdded", _this.emit.bind(_this, "channelAdded")), _this.channels.on("channelRemoved", _this.emit.bind(_this, "channelRemoved")), _this.channels.on("channelInvited", _this.emit.bind(_this, "channelInvited")), _this.channels.on("channelJoined", _this.emit.bind(_this, "channelJoined")), _this.channels.on("channelLeft", _this.emit.bind(_this, "channelLeft")), _this.channels.on("channelUpdated", _this.emit.bind(_this, "channelUpdated")), _this.channels.on("memberJoined", _this.emit.bind(_this, "memberJoined")), _this.channels.on("memberLeft", _this.emit.bind(_this, "memberLeft")), _this.channels.on("memberUpdated", _this.emit.bind(_this, "memberUpdated")), _this.channels.on("messageAdded", _this.emit.bind(_this, "messageAdded")), _this.channels.on("messageUpdated", _this.emit.bind(_this, "messageUpdated")), _this.channels.on("messageRemoved", _this.emit.bind(_this, "messageRemoved")), _this.channels.on("typingStarted", _this.emit.bind(_this, "typingStarted")), _this.channels.on("typingEnded", _this.emit.bind(_this, "typingEnded")), _this.channels.fetchChannels()
                            }).then(function() {
                                return _this.channels
                            }), _this.services.notificationClient.on("transportReady", function(state) {
                                if (state) _this.connectionState = "connected", _this.services.session.syncToken().catch(function(err) {
                                    log.error("Failed to sync session token", err)
                                });
                                else switch (_this.services.twilsockClient.state) {
                                    case "rejected":
                                        _this.connectionState = "denied";
                                        break;
                                    default:
                                        _this.connectionState = "connecting"
                                }
                                _this.emit("connectionStateChanged", _this.connectionState)
                            }), _this.fpaToken = token, _this.initializePromise = _this._initialize(), _this
                        }
                        return (0, _inherits3.default)(Client, _events_1$EventEmitte), (0, _createClass3.default)(Client, [{
                            key: "_initialize",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var response, links, options, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.services.emsClient.setToken(this.fpaToken);
                                            case 2:
                                                return response = _context.sent, this.config.updateToken(response.token), _context.next = 6, this.sessionPromise;
                                            case 6:
                                                return Client.supportedPushChannels.forEach(function(channelType) {
                                                    return _this2.subscribeToPushNotifications(channelType)
                                                }), _context.next = 9, this.services.session.getSessionLinks();
                                            case 9:
                                                return links = _context.sent, this.services.publicChannels = new publicchannels_1.PublicChannels(this, this.services, links.publicChannelsUrl), this.services.userChannels = new userchannels_1.UserChannels(this, this.services, links.myChannelsUrl), (options = (0, _extends3.default)(this.options)).transport = null, this.services.mcsClient = new twilio_mcs_client_1.McsClient(this.config.token, links.mediaServiceUrl, options), _context.next = 17, this.services.typingIndicator.initialize();
                                            case 17:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "subscribeToPushNotifications",
                            value: function(channelType) {
                                var _this3 = this;
                                [notificationtypes_1.NotificationTypes.NEW_MESSAGE, notificationtypes_1.NotificationTypes.ADDED_TO_CHANNEL, notificationtypes_1.NotificationTypes.INVITED_TO_CHANNEL, notificationtypes_1.NotificationTypes.REMOVED_FROM_CHANNEL, notificationtypes_1.NotificationTypes.TYPING_INDICATOR, notificationtypes_1.NotificationTypes.CONSUMPTION_UPDATE].forEach(function(messageType) {
                                    _this3.services.notificationClient.subscribe(messageType, channelType)
                                })
                            }
                        }, {
                            key: "initialize",
                            value: function() {
                                var _this4 = this;
                                return this.initializePromise.then(function() {
                                    return _this4
                                })
                            }
                        }, {
                            key: "shutdown",
                            value: function() {
                                return this.services.twilsockClient.disconnect()
                            }
                        }, {
                            key: "updateToken",
                            value: function(token) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var _this5 = this;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                if (log.info("updateToken"), token) {
                                                    _context2.next = 3;
                                                    break
                                                }
                                                throw new Error(MSG_NO_TOKEN);
                                            case 3:
                                                if (token === this.fpaToken) return _context2.abrupt("return", this);
                                                _context2.next = 5;
                                                break;
                                            case 5:
                                                return _context2.abrupt("return", this.services.emsClient.setToken(token).then(function(response) {
                                                    if ("NEW" === response.status) throw log.error("Can't extend token:", response.reason), new Error("Can't extend token:" + response.reason);
                                                    return response.token
                                                }).then(function(rtdToken) {
                                                    return _this5.services.twilsockClient.updateToken(token).then(function() {
                                                        return _this5.services.syncClient.updateToken(token)
                                                    }).then(function() {
                                                        return _this5.services.notificationClient.updateToken(token)
                                                    }).then(function() {
                                                        return _this5.services.mcsClient.updateToken(token)
                                                    }).then(function() {
                                                        return _this5.sessionPromise
                                                    }).then(function() {
                                                        return _this5.services.session.updateToken(rtdToken)
                                                    }).then(function() {
                                                        return rtdToken
                                                    })
                                                }).then(function(rtdToken) {
                                                    return _this5.config.updateToken(rtdToken), _this5.fpaToken = token, _this5
                                                }));
                                            case 6:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "getChannelBySid",
                            value: function(channelSid) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var _this6 = this;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                if (channelSid && "string" == typeof channelSid) {
                                                    _context3.next = 2;
                                                    break
                                                }
                                                throw new Error("Client.getChannelBySid requires a <String>channelSid parameter");
                                            case 2:
                                                return _context3.abrupt("return", this.channels.getChannel(channelSid).then(function(channel) {
                                                    return channel || _this6.services.publicChannels.getChannelBySid(channelSid).then(function(x) {
                                                        return _this6.channels.pushChannel(x)
                                                    })
                                                }));
                                            case 3:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }, {
                            key: "getChannelByUniqueName",
                            value: function(uniqueName) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    var _this7 = this;
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                if (uniqueName && "string" == typeof uniqueName) {
                                                    _context4.next = 2;
                                                    break
                                                }
                                                throw new Error("Client.getChannelByUniqueName requires a <String>uniqueName parameter");
                                            case 2:
                                                return _context4.abrupt("return", this.services.publicChannels.getChannelByUniqueName(uniqueName).then(function(x) {
                                                    return _this7.channels.pushChannel(x)
                                                }));
                                            case 3:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }, {
                            key: "getSubscribedChannels",
                            value: function(args) {
                                return this.channelsPromise.then(function(channels) {
                                    return channels.getChannels(args)
                                })
                            }
                        }, {
                            key: "getPublicChannelDescriptors",
                            value: function() {
                                return this.services.publicChannels.getChannels()
                            }
                        }, {
                            key: "getUserChannelDescriptors",
                            value: function() {
                                return this.services.userChannels.getChannels()
                            }
                        }, {
                            key: "createChannel",
                            value: function(options) {
                                return options = options || {}, this.channelsPromise.then(function(channelsEntity) {
                                    return channelsEntity.addChannel(options)
                                })
                            }
                        }, {
                            key: "setPushRegistrationId",
                            value: function(channelType, registrationId) {
                                if (-1 === Client.supportedPushChannels.indexOf(channelType)) throw new Error("Invalid or unsupported channelType: " + channelType);
                                this.services.notificationClient.setPushRegistrationId(registrationId, channelType)
                            }
                        }, {
                            key: "handlePushNotification",
                            value: function(notificationPayload) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                    return _regenerator2.default.wrap(function(_context5) {
                                        for (;;) switch (_context5.prev = _context5.next) {
                                            case 0:
                                                log.debug("handlePushNotification, notificationPayload=", notificationPayload), this.emit("pushNotification", Client.parsePushNotification(notificationPayload));
                                            case 2:
                                            case "end":
                                                return _context5.stop()
                                        }
                                    }, _callee5, this)
                                }))
                            }
                        }, {
                            key: "getUser",
                            value: function(identity) {
                                return this.services.users.getUser(identity)
                            }
                        }, {
                            key: "getUserDescriptor",
                            value: function(identity) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                    return _regenerator2.default.wrap(function(_context6) {
                                        for (;;) switch (_context6.prev = _context6.next) {
                                            case 0:
                                                return _context6.abrupt("return", this.services.users.getUserDescriptor(identity));
                                            case 1:
                                            case "end":
                                                return _context6.stop()
                                        }
                                    }, _callee6, this)
                                }))
                            }
                        }, {
                            key: "getSubscribedUsers",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                    return _regenerator2.default.wrap(function(_context7) {
                                        for (;;) switch (_context7.prev = _context7.next) {
                                            case 0:
                                                return _context7.abrupt("return", this.services.users.getSubscribedUsers());
                                            case 1:
                                            case "end":
                                                return _context7.stop()
                                        }
                                    }, _callee7, this)
                                }))
                            }
                        }, {
                            key: "user",
                            get: function() {
                                return this.services.users.myself
                            }
                        }, {
                            key: "reachabilityEnabled",
                            get: function() {
                                return this.services.session.reachabilityEnabled
                            }
                        }, {
                            key: "token",
                            get: function() {
                                return this.config.token
                            }
                        }], [{
                            key: "create",
                            value: function(token, options) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {
                                    var client;
                                    return _regenerator2.default.wrap(function(_context8) {
                                        for (;;) switch (_context8.prev = _context8.next) {
                                            case 0:
                                                return client = new Client(token, options), _context8.next = 3, client.initialize();
                                            case 3:
                                                return _context8.abrupt("return", client);
                                            case 4:
                                            case "end":
                                                return _context8.stop()
                                        }
                                    }, _callee8, this)
                                }))
                            }
                        }, {
                            key: "parsePushNotificationChatData",
                            value: function(data) {
                                var result = {};
                                for (var key in Client.supportedPushDataFields) void 0 !== data[key] && null !== data[key] && ("message_index" === key ? null !== util_1.parseToNumber(data[key]) && (result[Client.supportedPushDataFields[key]] = Number(data[key])) : result[Client.supportedPushDataFields[key]] = data[key]);
                                return result
                            }
                        }, {
                            key: "parsePushNotification",
                            value: function(notificationPayload) {
                                if (log.debug("parsePushNotification, notificationPayload=", notificationPayload), null == notificationPayload) throw new Error("Push notification payload should be provided");
                                if (void 0 !== notificationPayload.aps) {
                                    var body = null,
                                        title = null,
                                        data = {};
                                    if (void 0 !== notificationPayload.data && (data = Client.parsePushNotificationChatData(notificationPayload.data)), !notificationPayload.type) throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");
                                    var apsPayload = notificationPayload.aps;
                                    "string" == typeof apsPayload.alert ? body = apsPayload.alert || null : (body = apsPayload.alert.body || null, title = apsPayload.alert.title || null);
                                    var badge = apsPayload.badge || null,
                                        sound = apsPayload.sound || null,
                                        action = apsPayload.category || null;
                                    return new pushnotification_1.PushNotification({
                                        title: title,
                                        body: body,
                                        sound: sound,
                                        badge: badge,
                                        action: action,
                                        type: notificationPayload.type,
                                        data: data
                                    })
                                }
                                if (void 0 === notificationPayload.data) throw new Error("Provided push notification payload is not Programmable Chat notification");
                                var dataPayload = notificationPayload.data;
                                if (dataPayload.twi_message_type) {
                                    var _data = Client.parsePushNotificationChatData(notificationPayload.data);
                                    return new pushnotification_1.PushNotification({
                                        title: dataPayload.twi_title || null,
                                        body: dataPayload.twi_body || null,
                                        sound: dataPayload.twi_sound || null,
                                        badge: null,
                                        action: dataPayload.twi_action || null,
                                        type: dataPayload.twi_message_type,
                                        data: _data
                                    })
                                }
                                throw new Error("Provided push notification payload does not contain Programmable Chat push notification type")
                            }
                        }]), Client
                    }(events_1.EventEmitter);
                Client.version = SDK_VERSION, Client.supportedPushChannels = ["fcm", "apn", "gcm"], Client.supportedPushDataFields = {
                    channel_sid: "channelSid",
                    message_sid: "messageSid",
                    message_index: "messageIndex"
                }, exports.Client = Client, exports.default = Client
            }, {
                "./../package.json": 291,
                "./configuration": 4,
                "./data/channels": 5,
                "./data/publicchannels": 8,
                "./data/userchannels": 9,
                "./data/users": 11,
                "./interfaces/notificationtypes": 12,
                "./logger": 14,
                "./pushnotification": 18,
                "./services/consumptionhorizon": 20,
                "./services/network": 21,
                "./services/typingindicator": 22,
                "./session": 23,
                "./synclist": 25,
                "./user": 27,
                "./util": 30,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214,
                "twilio-ems-client": 229,
                "twilio-mcs-client": 235,
                "twilio-notifications": 242,
                "twilio-sync": 253,
                "twilio-transport": 273,
                twilsock: 276
            }],
            4: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Configuration = function() {
                    function Configuration(token, options) {
                        (0, _classCallCheck3.default)(this, Configuration), options = options || {}, this.options = options.Chat || options.IPMessaging || options || {};
                        var baseUrl = this.options.apiUri || this.options.typingUri || "https://aim.twilio.com";
                        this.token = token, this.baseUrl = baseUrl
                    }
                    return (0, _createClass3.default)(Configuration, [{
                        key: "updateToken",
                        value: function(token) {
                            this.token = token
                        }
                    }, {
                        key: "typingIndicatorUri",
                        get: function() {
                            return this.baseUrl + "/v1/typing"
                        }
                    }, {
                        key: "typingIndicatorTimeoutDefault",
                        get: function() {
                            return 5e3
                        }
                    }, {
                        key: "httpCacheIntervalDefault",
                        get: function() {
                            return "PT5S"
                        }
                    }, {
                        key: "consumptionReportIntervalDefault",
                        get: function() {
                            return "PT5S"
                        }
                    }, {
                        key: "userInfosToSubscribeDefault",
                        get: function() {
                            return 100
                        }
                    }, {
                        key: "backoffConfigDefault",
                        get: function() {
                            return {
                                min: 1e3,
                                max: 4e3,
                                maxAttemptsCount: 3
                            }
                        }
                    }, {
                        key: "backoffConfigOverride",
                        get: function() {
                            return this.options.backoffConfigOverride
                        }
                    }, {
                        key: "retryWhenThrottledDefault",
                        get: function() {
                            return !0
                        }
                    }, {
                        key: "retryWhenThrottledOverride",
                        get: function() {
                            return this.options.retryWhenThrottledOverride
                        }
                    }, {
                        key: "typingIndicatorTimeoutOverride",
                        get: function() {
                            return this.options.typingIndicatorTimeoutOverride
                        }
                    }, {
                        key: "httpCacheIntervalOverride",
                        get: function() {
                            return this.options.httpCacheIntervalOverride
                        }
                    }, {
                        key: "consumptionReportIntervalOverride",
                        get: function() {
                            return this.options.consumptionReportIntervalOverride
                        }
                    }, {
                        key: "userInfosToSubscribeOverride",
                        get: function() {
                            return this.options.userInfosToSubscribeOverride
                        }
                    }]), Configuration
                }();
                exports.Configuration = Configuration
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            5: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _set2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/set")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    logger_1 = _dereq_("../logger"),
                    channel_1 = _dereq_("../channel");
                exports.Channel = channel_1.Channel;
                var log = logger_1.Logger.scope(""),
                    Channels = function(_events_1$EventEmitte) {
                        function Channels(services) {
                            (0, _classCallCheck3.default)(this, Channels);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (Channels.__proto__ || (0, _getPrototypeOf2.default)(Channels)).call(this));
                            return _this.services = services, _this.channels = new _map2.default, _this.thumbstones = new _set2.default, _this.syncListFetched = !1, _this
                        }
                        return (0, _inherits3.default)(Channels, _events_1$EventEmitte), (0, _createClass3.default)(Channels, [{
                            key: "getMap",
                            value: function() {
                                var _this2 = this;
                                return this.services.session.getMyChannelsId().then(function(name) {
                                    return _this2.services.syncClient.map({
                                        uniqueName: name,
                                        mode: "open"
                                    })
                                })
                            }
                        }, {
                            key: "addChannel",
                            value: function(options) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var response, channelSid, channelDocument, existingChannel, channel;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.services.session.addCommand("createChannel", {
                                                    friendlyName: options.friendlyName,
                                                    uniqueName: options.uniqueName,
                                                    type: options.isPrivate ? "private" : "public",
                                                    attributes: (0, _stringify2.default)(options.attributes)
                                                });
                                            case 2:
                                                if (response = _context.sent, channelSid = "channelSid" in response ? response.channelSid : null, channelDocument = "channel" in response ? response.channel : null, existingChannel = this.channels.get(channelSid)) return _context.next = 9, existingChannel._subscribe();
                                                _context.next = 10;
                                                break;
                                            case 9:
                                                return _context.abrupt("return", existingChannel);
                                            case 10:
                                                return channel = new channel_1.Channel(this.services, {
                                                    channel: channelDocument,
                                                    name: null,
                                                    entityName: null,
                                                    uniqueName: null,
                                                    attributes: null,
                                                    createdBy: null,
                                                    friendlyName: null,
                                                    lastConsumedMessageIndex: null,
                                                    type: options.isPrivate ? "private" : "public",
                                                    dateCreated: null,
                                                    dateUpdated: null
                                                }, channelSid), this.channels.set(channel.sid, channel), this.registerForEvents(channel), _context.next = 15, channel._subscribe();
                                            case 15:
                                                return this.emit("channelAdded", channel), _context.abrupt("return", channel);
                                            case 17:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "fetchChannels",
                            value: function() {
                                var _this3 = this;
                                this.getMap().then(function(map) {
                                    return __awaiter(_this3, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                        var upserts, paginator, _this4 = this;
                                        return _regenerator2.default.wrap(function(_context2) {
                                            for (;;) switch (_context2.prev = _context2.next) {
                                                case 0:
                                                    return map.on("itemAdded", function(item) {
                                                        _this4.upsertChannel("sync", item.key, item.value)
                                                    }), map.on("itemRemoved", function(sid) {
                                                        _this4.syncListFetched || _this4.thumbstones.add(sid);
                                                        var channel = _this4.channels.get(sid);
                                                        channel && ("joined" !== channel.status && "invited" !== channel.status || (channel._setStatus("known", "sync"), _this4.emit("channelLeft", channel)), channel.isPrivate && (_this4.channels.delete(sid), _this4.emit("channelRemoved", channel)))
                                                    }), map.on("itemUpdated", function(item) {
                                                        _this4.upsertChannel("sync", item.key, item.value)
                                                    }), upserts = [], _context2.next = 6, this.services.syncList.getPage();
                                                case 6:
                                                    paginator = _context2.sent, paginator.items.forEach(function(item) {
                                                        upserts.push(_this4.upsertChannel("chat", item.channel_sid, item.descriptor))
                                                    });
                                                case 9:
                                                    if (paginator.hasNextPage) return _context2.next = 12, paginator.nextPage();
                                                    _context2.next = 16;
                                                    break;
                                                case 12:
                                                    (paginator = _context2.sent).items.forEach(function(item) {
                                                        upserts.push(_this4.upsertChannel("chat", item.channel_sid, item.descriptor))
                                                    }), _context2.next = 9;
                                                    break;
                                                case 16:
                                                    return _context2.abrupt("return", _promise2.default.all(upserts));
                                                case 17:
                                                case "end":
                                                    return _context2.stop()
                                            }
                                        }, _callee2, this)
                                    }))
                                }).then(function() {
                                    _this3.syncListFetched = !0, _this3.thumbstones.clear(), log.debug("Channels list fetched")
                                }).then(function() {
                                    return _this3
                                }).catch(function(e) {
                                    throw log.error("Failed to get channels list", e), e
                                })
                            }
                        }, {
                            key: "_wrapPaginator",
                            value: function(page, op) {
                                var _this5 = this;
                                return op(page.items).then(function(items) {
                                    return {
                                        items: items,
                                        hasNextPage: page.hasNextPage,
                                        hasPrevPage: page.hasPrevPage,
                                        nextPage: function() {
                                            return page.nextPage().then(function(x) {
                                                return _this5._wrapPaginator(x, op)
                                            })
                                        },
                                        prevPage: function() {
                                            return page.prevPage().then(function(x) {
                                                return _this5._wrapPaginator(x, op)
                                            })
                                        }
                                    }
                                })
                            }
                        }, {
                            key: "getChannels",
                            value: function(args) {
                                var _this6 = this;
                                return this.getMap().then(function(channelsMap) {
                                    return channelsMap.getItems(args)
                                }).then(function(page) {
                                    return _this6._wrapPaginator(page, function(items) {
                                        return _promise2.default.all(items.map(function(item) {
                                            return _this6.upsertChannel("sync", item.key, item.value)
                                        }))
                                    })
                                })
                            }
                        }, {
                            key: "getChannel",
                            value: function(sid) {
                                var _this7 = this;
                                return this.getMap().then(function(channelsMap) {
                                    return channelsMap.getItems({
                                        key: sid
                                    })
                                }).then(function(page) {
                                    return page.items.map(function(item) {
                                        return _this7.upsertChannel("sync", item.key, item.value)
                                    })
                                }).then(function(items) {
                                    return 0 < items.length ? items[0] : null
                                })
                            }
                        }, {
                            key: "pushChannel",
                            value: function(descriptor) {
                                var sid = descriptor.sid,
                                    data = {
                                        name: null,
                                        entityName: null,
                                        lastConsumedMessageIndex: descriptor.lastConsumedMessageIndex,
                                        type: descriptor.type,
                                        status: descriptor.status,
                                        friendlyName: descriptor.friendlyName,
                                        dateUpdated: descriptor.dateUpdated,
                                        dateCreated: descriptor.dateCreated,
                                        uniqueName: descriptor.uniqueName,
                                        createdBy: descriptor.createdBy,
                                        attributes: descriptor.attributes,
                                        channel: descriptor.channel,
                                        sid: sid
                                    };
                                return this.upsertChannel("chat", sid, data)
                            }
                        }, {
                            key: "upsertChannel",
                            value: function(source, sid, data) {
                                var _this8 = this;
                                log.trace("upsertChannel(sid=" + sid + ", data=", data);
                                var channel = this.channels.get(sid);
                                return channel ? (log.trace("upsertChannel: channel " + sid + " is known and it's status is known from source " + channel._statusSource() + " and update came from source " + source, channel), void 0 === channel._statusSource() || source === channel._statusSource() || "sync" === source ? "joined" === data.status && "joined" !== channel.status ? (channel._setStatus("joined", source), void 0 !== data.lastConsumedMessageIndex && channel._update({
                                    lastConsumedMessageIndex: data.lastConsumedMessageIndex
                                }), channel._subscribe().then(function() {
                                    _this8.emit("channelJoined", channel)
                                })) : "invited" === data.status && "invited" !== channel.status ? (channel._setStatus("invited", source), channel._subscribe().then(function() {
                                    _this8.emit("channelInvited", channel)
                                })) : "known" !== data.status || "invited" !== channel.status && "joined" !== channel.status ? "notParticipating" !== data.status && "known" !== data.status || "private" !== data.type ? channel._update(data) : channel._subscribe() : (channel._setStatus("known", source), channel._update(data), channel._subscribe().then(function() {
                                    _this8.emit("channelLeft", channel)
                                })) : log.trace("upsertChannel: channel is known from sync and came from chat, ignoring", {
                                    sid: sid,
                                    data: data.status,
                                    channel: channel.status
                                }), channel._subscribe().then(function() {
                                    return channel
                                })) : "chat" === source && this.thumbstones.has(sid) ? void log.trace("upsertChannel: channel is deleted and came again from chat, ignoring", sid) : (log.trace("upsertChannel: creating local channel object with sid " + sid, data), channel = new channel_1.Channel(this.services, data, sid), this.registerForEvents(channel), this.channels.set(sid, channel), channel._subscribe().then(function() {
                                    return _this8.emit("channelAdded", channel), "joined" === data.status ? (channel._setStatus("joined", source), _this8.emit("channelJoined", channel)) : "invited" === data.status && (channel._setStatus("invited", source), _this8.emit("channelInvited", channel)), channel
                                }))
                            }
                        }, {
                            key: "onChannelRemoved",
                            value: function(sid) {
                                var channel = this.channels.get(sid);
                                channel && (this.channels.delete(sid), this.emit("channelRemoved", channel))
                            }
                        }, {
                            key: "registerForEvents",
                            value: function(channel) {
                                var _this9 = this;
                                channel.on("removed", function() {
                                    return _this9.onChannelRemoved(channel.sid)
                                }), channel.on("updated", function() {
                                    return _this9.emit("channelUpdated", channel)
                                }), channel.on("memberJoined", this.emit.bind(this, "memberJoined")), channel.on("memberLeft", this.emit.bind(this, "memberLeft")), channel.on("memberUpdated", this.emit.bind(this, "memberUpdated")), channel.on("messageAdded", this.emit.bind(this, "messageAdded")), channel.on("messageUpdated", this.emit.bind(this, "messageUpdated")), channel.on("messageRemoved", this.emit.bind(this, "messageRemoved")), channel.on("typingStarted", this.emit.bind(this, "typingStarted")), channel.on("typingEnded", this.emit.bind(this, "typingEnded"))
                            }
                        }]), Channels
                    }(events_1.EventEmitter);
                exports.Channels = Channels
            }, {
                "../channel": 1,
                "../logger": 14,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/core-js/set": 47,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            6: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    member_1 = _dereq_("../member"),
                    log = _dereq_("../logger").Logger.scope("Members"),
                    Members = function(_events_1$EventEmitte) {
                        function Members(channel, services, members) {
                            (0, _classCallCheck3.default)(this, Members);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (Members.__proto__ || (0, _getPrototypeOf2.default)(Members)).call(this));
                            return _this.services = services, _this.channel = channel, _this.members = members, _this
                        }
                        return (0, _inherits3.default)(Members, _events_1$EventEmitte), (0, _createClass3.default)(Members, [{
                            key: "unsubscribe",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                if (this.rosterEntityPromise) return _context.next = 3, this.rosterEntityPromise;
                                                _context.next = 6;
                                                break;
                                            case 3:
                                                _context.sent.close(), this.rosterEntityPromise = null;
                                            case 6:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "subscribe",
                            value: function(rosterObjectName) {
                                var _this2 = this;
                                return this.rosterEntityPromise = this.rosterEntityPromise || this.services.syncClient.map({
                                    uniqueName: rosterObjectName,
                                    mode: "open"
                                }).then(function(rosterMap) {
                                    rosterMap.on("itemAdded", function(item) {
                                        _this2.upsertMember(item.key, item.value).then(function(member) {
                                            _this2.emit("memberJoined", member)
                                        })
                                    }), rosterMap.on("itemRemoved", function(memberSid) {
                                        if (_this2.members.has(memberSid)) {
                                            var leftMember = _this2.members.get(memberSid);
                                            _this2.members.delete(memberSid), _this2.emit("memberLeft", leftMember)
                                        }
                                    }), rosterMap.on("itemUpdated", function(item) {
                                        _this2.upsertMember(item.key, item.value)
                                    });
                                    var membersPromises = [];
                                    return rosterMap.forEach(function(item) {
                                        membersPromises.push(_this2.upsertMember(item.key, item.value))
                                    }).then(function() {
                                        return _promise2.default.all(membersPromises)
                                    }).then(function() {
                                        return rosterMap
                                    })
                                }).catch(function(err) {
                                    throw _this2.rosterEntityPromise = null, log.error("Failed to get roster object for channel", _this2.channel.sid, err), err
                                })
                            }
                        }, {
                            key: "upsertMember",
                            value: function(memberSid, data) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var member, _this3 = this;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                if (member = this.members.get(memberSid)) return _context2.abrupt("return", member._update(data));
                                                _context2.next = 3;
                                                break;
                                            case 3:
                                                return member = new member_1.Member(this.services, this.channel, data, memberSid), this.members.set(memberSid, member), member.on("updated", function() {
                                                    return _this3.emit("memberUpdated", member)
                                                }), _context2.abrupt("return", member);
                                            case 7:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "getMembers",
                            value: function() {
                                var _this4 = this;
                                return this.rosterEntityPromise.then(function() {
                                    var members = [];
                                    return _this4.members.forEach(function(member) {
                                        return members.push(member)
                                    }), members
                                })
                            }
                        }, {
                            key: "add",
                            value: function(username) {
                                return this.services.session.addCommand("addMember", {
                                    channelSid: this.channel.sid,
                                    username: username
                                })
                            }
                        }, {
                            key: "invite",
                            value: function(username) {
                                return this.services.session.addCommand("inviteMember", {
                                    channelSid: this.channel.sid,
                                    username: username
                                })
                            }
                        }, {
                            key: "remove",
                            value: function(username) {
                                return this.services.session.addCommand("removeMember", {
                                    channelSid: this.channel.sid,
                                    username: username
                                })
                            }
                        }]), Members
                    }(events_1.EventEmitter);
                exports.Members = Members
            }, {
                "../logger": 14,
                "../member": 16,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            7: [function(_dereq_, module, exports) {
                "use strict";
                var _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    logger_1 = _dereq_("../logger"),
                    message_1 = _dereq_("../message"),
                    FormData = _dereq_("isomorphic-form-data"),
                    log = logger_1.Logger.scope(""),
                    Messages = function(_events_1$EventEmitte) {
                        function Messages(channel, services) {
                            (0, _classCallCheck3.default)(this, Messages);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (Messages.__proto__ || (0, _getPrototypeOf2.default)(Messages)).call(this));
                            return _this.channel = channel, _this.services = services, _this.messagesByIndex = new _map2.default, _this.messagesListPromise = null, _this
                        }
                        return (0, _inherits3.default)(Messages, _events_1$EventEmitte), (0, _createClass3.default)(Messages, [{
                            key: "subscribe",
                            value: function(name) {
                                var _this2 = this;
                                return this.messagesListPromise = this.messagesListPromise || this.services.syncClient.list({
                                    uniqueName: name,
                                    mode: "open"
                                }).then(function(list) {
                                    return list.on("itemAdded", function(item) {
                                        var message = new message_1.Message(_this2.channel, _this2.services, item.index, item.value);
                                        _this2.messagesByIndex.has(message.index) ? log.debug("Message arrived, but already known and ignored", _this2.channel.sid, message.index) : (_this2.messagesByIndex.set(message.index, message), message.on("updated", function() {
                                            return _this2.emit("messageUpdated", message)
                                        }), _this2.emit("messageAdded", message))
                                    }), list.on("itemRemoved", function(index) {
                                        if (_this2.messagesByIndex.has(index)) {
                                            var message = _this2.messagesByIndex.get(index);
                                            _this2.messagesByIndex.delete(message.index), message.removeAllListeners("updated"), _this2.emit("messageRemoved", message)
                                        }
                                    }), list.on("itemUpdated", function(item) {
                                        var message = _this2.messagesByIndex.get(item.index);
                                        message && message._update(item.value)
                                    }), list
                                }).catch(function(err) {
                                    throw _this2.messagesListPromise = null, log.error("Failed to get messages object for channel", _this2.channel.sid, err), err
                                })
                            }
                        }, {
                            key: "unsubscribe",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                if (this.messagesListPromise) return _context.next = 3, this.messagesListPromise;
                                                _context.next = 6;
                                                break;
                                            case 3:
                                                _context.sent.close(), this.messagesListPromise = null;
                                            case 6:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "send",
                            value: function(message) {
                                var attributes = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                if (log.debug("Sending text message", message, attributes), attributes.constructor !== Object) throw new Error("Attributes must be a valid JSON object");
                                                _context2.next = 3;
                                                break;
                                            case 3:
                                                return _context2.abrupt("return", this.services.session.addCommand("sendMessage", {
                                                    channelSid: this.channel.sid,
                                                    text: message,
                                                    attributes: (0, _stringify2.default)(attributes)
                                                }));
                                            case 4:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "sendMedia",
                            value: function(mediaContent) {
                                var attributes = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var media, mediaOptions;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                if (log.debug("Sending media message", mediaContent, attributes), attributes.constructor !== Object) throw new Error("Attributes must be a valid JSON object");
                                                _context3.next = 3;
                                                break;
                                            case 3:
                                                if (media = void 0, mediaContent instanceof FormData) return log.debug("Sending media message as FormData", mediaContent, attributes), _context3.next = 8, this.services.mcsClient.postFormData(mediaContent);
                                                _context3.next = 11;
                                                break;
                                            case 8:
                                                media = _context3.sent, _context3.next = 16;
                                                break;
                                            case 11:
                                                return log.debug("Sending media message as SendMediaOptions", mediaContent, attributes), mediaOptions = mediaContent, _context3.next = 15, this.services.mcsClient.post(mediaOptions.contentType, mediaOptions.media);
                                            case 15:
                                                media = _context3.sent;
                                            case 16:
                                                return _context3.abrupt("return", this.services.session.addCommand("sendMediaMessage", {
                                                    channelSid: this.channel.sid,
                                                    mediaSid: media.sid,
                                                    attributes: (0, _stringify2.default)(attributes)
                                                }));
                                            case 17:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }, {
                            key: "getMessages",
                            value: function(pageSize, anchor, direction) {
                                return anchor = void 0 !== anchor ? anchor : "end", direction = direction || "backwards", this._getMessages(pageSize, anchor, direction)
                            }
                        }, {
                            key: "wrapPaginator",
                            value: function(order, page, op) {
                                var _this3 = this,
                                    shouldReverse = "desc" === order,
                                    np = function() {
                                        return page.nextPage().then(function(x) {
                                            return _this3.wrapPaginator(order, x, op)
                                        })
                                    },
                                    pp = function() {
                                        return page.prevPage().then(function(x) {
                                            return _this3.wrapPaginator(order, x, op)
                                        })
                                    };
                                return op(page.items).then(function(items) {
                                    return {
                                        items: items.sort(function(x, y) {
                                            return x.index - y.index
                                        }),
                                        hasPrevPage: shouldReverse ? page.hasNextPage : page.hasPrevPage,
                                        hasNextPage: shouldReverse ? page.hasPrevPage : page.hasNextPage,
                                        prevPage: shouldReverse ? np : pp,
                                        nextPage: shouldReverse ? pp : np
                                    }
                                })
                            }
                        }, {
                            key: "_upsertMessage",
                            value: function(index, value) {
                                var _this4 = this,
                                    cachedMessage = this.messagesByIndex.get(index);
                                if (cachedMessage) return cachedMessage;
                                var message = new message_1.Message(this.channel, this.services, index, value);
                                return this.messagesByIndex.set(message.index, message), message.on("updated", function() {
                                    return _this4.emit("messageUpdated", message)
                                }), message
                            }
                        }, {
                            key: "_getMessages",
                            value: function(pageSize, anchor, direction) {
                                var _this5 = this;
                                anchor = void 0 !== anchor ? anchor : "end", pageSize = pageSize || 30;
                                var order = "backwards" === direction ? "desc" : "asc";
                                return this.messagesListPromise.then(function(messagesList) {
                                    return messagesList.getItems({
                                        from: "end" !== anchor ? anchor : void 0,
                                        pageSize: pageSize,
                                        order: order
                                    })
                                }).then(function(page) {
                                    return _this5.wrapPaginator(order, page, function(items) {
                                        return _promise2.default.all(items.map(function(item) {
                                            return _this5._upsertMessage(item.index, item.value)
                                        }))
                                    })
                                })
                            }
                        }]), Messages
                    }(events_1.EventEmitter);
                exports.Messages = Messages
            }, {
                "../logger": 14,
                "../message": 17,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214,
                "isomorphic-form-data": 216
            }],
            8: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var index_1 = _dereq_("../util/index"),
                    restpaginator_1 = _dereq_("../restpaginator"),
                    channeldescriptor_1 = _dereq_("../channeldescriptor"),
                    PublicChannels = function() {
                        function PublicChannels(client, services, url) {
                            (0, _classCallCheck3.default)(this, PublicChannels), this.client = client, this.services = services, this.url = url
                        }
                        return (0, _createClass3.default)(PublicChannels, [{
                            key: "getChannels",
                            value: function() {
                                var args = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var url, response, _this = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).arg("PageToken", args.pageToken).build(), _context.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context.sent, _context.abrupt("return", new restpaginator_1.RestPaginator(response.body.channels.map(function(x) {
                                                    return new channeldescriptor_1.ChannelDescriptor(_this.client, x)
                                                }), function(pageToken) {
                                                    return _this.getChannels({
                                                        pageToken: pageToken
                                                    })
                                                }, response.body.meta.previous_token, response.body.meta.next_token));
                                            case 5:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "getChannelBySid",
                            value: function(sid) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var url, response;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).path(sid).build(), _context2.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context2.sent, _context2.abrupt("return", new channeldescriptor_1.ChannelDescriptor(this.client, response.body));
                                            case 5:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "getChannelByUniqueName",
                            value: function(uniqueName) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var url, response;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).path(uniqueName).build(), _context3.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context3.sent, _context3.abrupt("return", new channeldescriptor_1.ChannelDescriptor(this.client, response.body));
                                            case 5:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }]), PublicChannels
                    }();
                exports.PublicChannels = PublicChannels
            }, {
                "../channeldescriptor": 2,
                "../restpaginator": 19,
                "../util/index": 30,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            9: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var index_1 = _dereq_("../util/index"),
                    restpaginator_1 = _dereq_("../restpaginator"),
                    channeldescriptor_1 = _dereq_("../channeldescriptor"),
                    UserChannels = function() {
                        function UserChannels(client, services, url) {
                            (0, _classCallCheck3.default)(this, UserChannels), this.client = client, this.services = services, this.url = url
                        }
                        return (0, _createClass3.default)(UserChannels, [{
                            key: "getChannels",
                            value: function() {
                                var args = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var url, response, _this = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).arg("PageToken", args.pageToken).build(), _context.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context.sent, _context.abrupt("return", new restpaginator_1.RestPaginator(response.body.channels.map(function(x) {
                                                    return new channeldescriptor_1.ChannelDescriptor(_this.client, x)
                                                }), function(pageToken) {
                                                    return _this.getChannels({
                                                        pageToken: pageToken
                                                    })
                                                }, response.body.meta.previous_token, response.body.meta.next_token));
                                            case 5:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }]), UserChannels
                    }();
                exports.UserChannels = UserChannels
            }, {
                "../channeldescriptor": 2,
                "../restpaginator": 19,
                "../util/index": 30,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            10: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var index_1 = _dereq_("../util/index"),
                    restpaginator_1 = _dereq_("../restpaginator"),
                    userdescriptor_1 = _dereq_("../userdescriptor"),
                    UserDescriptors = function() {
                        function UserDescriptors(services, url) {
                            (0, _classCallCheck3.default)(this, UserDescriptors), this.services = services, this.url = url
                        }
                        return (0, _createClass3.default)(UserDescriptors, [{
                            key: "getUserDescriptor",
                            value: function(identity) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var url, response;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).path(identity).build(), _context.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context.sent, _context.abrupt("return", new userdescriptor_1.UserDescriptor(this.services, response.body));
                                            case 5:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "getChannelUserDescriptors",
                            value: function(channelSid) {
                                var args = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var url, response, _this = this;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return url = new index_1.UriBuilder(this.url).arg("ChannelSid", channelSid).arg("PageToken", args.pageToken).build(), _context2.next = 3, this.services.network.get(url);
                                            case 3:
                                                return response = _context2.sent, _context2.abrupt("return", new restpaginator_1.RestPaginator(response.body.users.map(function(x) {
                                                    return new userdescriptor_1.UserDescriptor(_this.services, x)
                                                }), function(pageToken) {
                                                    return _this.getChannelUserDescriptors(channelSid, pageToken)
                                                }, response.body.meta.prev_token, response.body.meta.next_token));
                                            case 5:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }]), UserDescriptors
                    }();
                exports.UserDescriptors = UserDescriptors
            }, {
                "../restpaginator": 19,
                "../userdescriptor": 28,
                "../util/index": 30,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            11: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    user_1 = _dereq_("../user"),
                    userdescriptors_1 = _dereq_("./userdescriptors"),
                    Users = function(_events_1$EventEmitte) {
                        function Users(services) {
                            (0, _classCallCheck3.default)(this, Users);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (Users.__proto__ || (0, _getPrototypeOf2.default)(Users)).call(this));
                            return _this.services = services, _this.fifoStack = [], _this.fifoStackMaxLength = 100, _this.myself = new user_1.User(null, null, _this.services), _this.myself.on("updated", function() {
                                return _this.emit("userUpdated", _this.myself)
                            }), _this.myself.on("userSubscribed", function() {
                                return _this.emit("userSubscribed", _this.myself)
                            }), _this.myself.on("userUnsubscribed", function() {
                                _this.emit("userUnsubscribed", _this.myself), _this.myself._ensureFetched()
                            }), _this.services = services, _this.subscribedUsers = new _map2.default, _this.userDescriptorsPromise = _this.services.session.getSessionLinks().then(function(links) {
                                return _this.userDescriptors = new userdescriptors_1.UserDescriptors({
                                    users: _this,
                                    network: _this.services.network
                                }, links.usersUrl), _this.userDescriptors
                            }), _this.services.session.getMaxUserInfosToSubscribe().then(function(maxUserInfosToSubscribe) {
                                _this.fifoStackMaxLength = maxUserInfosToSubscribe
                            }), _this.services.session.getUsersData().then(function(data) {
                                return _this.myself.identity = data.identity, _this.myself.entityName = data.user, _this.myself._ensureFetched()
                            }), _this
                        }
                        return (0, _inherits3.default)(Users, _events_1$EventEmitte), (0, _createClass3.default)(Users, [{
                            key: "handleUnsubscribeUser",
                            value: function(user) {
                                this.subscribedUsers.has(user.identity) && this.subscribedUsers.delete(user.identity);
                                var foundItemIndex = -1;
                                this.fifoStack.find(function(item, index) {
                                    return item == user.identity && (foundItemIndex = index, !0)
                                }) && this.fifoStack.splice(foundItemIndex, 1), this.emit("userUnsubscribed", user)
                            }
                        }, {
                            key: "handleSubscribeUser",
                            value: function(user) {
                                this.subscribedUsers.has(user.identity) || (this.fifoStack.length >= this.fifoStackMaxLength && this.subscribedUsers.get(this.fifoStack.shift()).unsubscribe(), this.fifoStack.push(user.identity), this.subscribedUsers.set(user.identity, user), this.emit("userSubscribed", user))
                            }
                        }, {
                            key: "getUser",
                            value: function(identity) {
                                var entityName = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var user, userDescriptor, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.services.session.getUsersData();
                                            case 2:
                                                return _context.next = 4, this.myself._ensureFetched();
                                            case 4:
                                                if (identity == this.myself.identity) return _context.abrupt("return", this.myself);
                                                _context.next = 6;
                                                break;
                                            case 6:
                                                if (user = this.subscribedUsers.get(identity)) {
                                                    _context.next = 19;
                                                    break
                                                }
                                                if (entityName) {
                                                    _context.next = 13;
                                                    break
                                                }
                                                return _context.next = 11, this.getUserDescriptor(identity);
                                            case 11:
                                                userDescriptor = _context.sent, entityName = userDescriptor._getDescriptor().sync_unique_name;
                                            case 13:
                                                return (user = new user_1.User(identity, entityName, this.services)).on("updated", function() {
                                                    return _this2.emit("userUpdated", user)
                                                }), user.on("userSubscribed", function() {
                                                    return _this2.handleSubscribeUser(user)
                                                }), user.on("userUnsubscribed", function() {
                                                    return _this2.handleUnsubscribeUser(user)
                                                }), _context.next = 19, user._ensureFetched();
                                            case 19:
                                                return _context.abrupt("return", user);
                                            case 20:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "getUserDescriptor",
                            value: function(identity) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.next = 2, this.userDescriptorsPromise;
                                            case 2:
                                                return _context2.abrupt("return", this.userDescriptors.getUserDescriptor(identity));
                                            case 3:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "getChannelUserDescriptors",
                            value: function(channelSid) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return _context3.next = 2, this.userDescriptorsPromise;
                                            case 2:
                                                return _context3.abrupt("return", this.userDescriptors.getChannelUserDescriptors(channelSid));
                                            case 3:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }, {
                            key: "getSubscribedUsers",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    var users;
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                return _context4.next = 2, this.services.session.getUsersData();
                                            case 2:
                                                return _context4.next = 4, this.myself._ensureFetched();
                                            case 4:
                                                return users = [this.myself], this.subscribedUsers.forEach(function(user) {
                                                    return users.push(user)
                                                }), _context4.abrupt("return", users);
                                            case 7:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }]), Users
                    }(events_1.EventEmitter);
                exports.Users = Users
            }, {
                "../user": 27,
                "./userdescriptors": 10,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            12: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var NotificationTypes = function NotificationTypes() {
                    (0, _classCallCheck3.default)(this, NotificationTypes)
                };
                NotificationTypes.TYPING_INDICATOR = "twilio.ipmsg.typing_indicator", NotificationTypes.NEW_MESSAGE = "twilio.channel.new_message", NotificationTypes.ADDED_TO_CHANNEL = "twilio.channel.added_to_channel", NotificationTypes.INVITED_TO_CHANNEL = "twilio.channel.invited_to_channel", NotificationTypes.REMOVED_FROM_CHANNEL = "twilio.channel.removed_from_channel", NotificationTypes.CONSUMPTION_UPDATE = "twilio.channel.consumption_update", exports.NotificationTypes = NotificationTypes
            }, {
                "babel-runtime/helpers/classCallCheck": 50
            }],
            13: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var ResponseCodes = function ResponseCodes() {
                    (0, _classCallCheck3.default)(this, ResponseCodes)
                };
                ResponseCodes.HTTP_200_OK = 200, ResponseCodes.HTTP_400_BAD_REQUEST = 400, ResponseCodes.HTTP_404_NOT_FOUND = 404, ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY = 54007, ResponseCodes.LIST_NOT_FOUND = 54150, exports.ResponseCodes = ResponseCodes
            }, {
                "babel-runtime/helpers/classCallCheck": 50
            }],
            14: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _from2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/array/from"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var log = _dereq_("loglevel");

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                var Logger = function() {
                    function Logger() {
                        (0, _classCallCheck3.default)(this, Logger), this.prefix = ""
                    }
                    return (0, _createClass3.default)(Logger, [{
                        key: "setLevel",
                        value: function(level) {
                            log.setLevel(level)
                        }
                    }, {
                        key: "trace",
                        value: function() {
                            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];
                            log.trace.apply(null, prepareLine("Chat T:" + this.prefix, args))
                        }
                    }, {
                        key: "debug",
                        value: function() {
                            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];
                            log.debug.apply(null, prepareLine("Chat D:" + this.prefix, args))
                        }
                    }, {
                        key: "info",
                        value: function() {
                            for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];
                            log.info.apply(null, prepareLine("Chat I:" + this.prefix, args))
                        }
                    }, {
                        key: "warn",
                        value: function() {
                            for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];
                            log.warn.apply(null, prepareLine("Chat W:" + this.prefix, args))
                        }
                    }, {
                        key: "error",
                        value: function() {
                            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];
                            log.error.apply(null, prepareLine("Chat E:" + this.prefix, args))
                        }
                    }], [{
                        key: "scope",
                        value: function(prefix) {
                            return new Logger
                        }
                    }, {
                        key: "setLevel",
                        value: function(level) {
                            log.setLevel(level)
                        }
                    }, {
                        key: "trace",
                        value: function() {
                            for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) args[_key6] = arguments[_key6];
                            log.trace.apply(null, prepareLine("Chat T:", args))
                        }
                    }, {
                        key: "debug",
                        value: function() {
                            for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) args[_key7] = arguments[_key7];
                            log.debug.apply(null, prepareLine("Chat D:", args))
                        }
                    }, {
                        key: "info",
                        value: function() {
                            for (var _len8 = arguments.length, args = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) args[_key8] = arguments[_key8];
                            log.info.apply(null, prepareLine("Chat I:", args))
                        }
                    }, {
                        key: "warn",
                        value: function() {
                            for (var _len9 = arguments.length, args = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) args[_key9] = arguments[_key9];
                            log.warn.apply(null, prepareLine("Chat W:", args))
                        }
                    }, {
                        key: "error",
                        value: function() {
                            for (var _len10 = arguments.length, args = Array(_len10), _key10 = 0; _key10 < _len10; _key10++) args[_key10] = arguments[_key10];
                            log.error.apply(null, prepareLine("Chat E:", args))
                        }
                    }]), Logger
                }();
                exports.Logger = Logger
            }, {
                "babel-runtime/core-js/array/from": 31,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                loglevel: 219
            }],
            15: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Media = function() {
                    function Media(data, services) {
                        (0, _classCallCheck3.default)(this, Media), this.mcsMedia = null, this.services = services, this.state = {
                            sid: data.sid,
                            filename: data.filename,
                            contentType: data.contentType,
                            size: data.size
                        }
                    }
                    return (0, _createClass3.default)(Media, [{
                        key: "getContentUrl",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            if (this.mcsMedia) {
                                                _context.next = 8;
                                                break
                                            }
                                            if (this.services.mcsClient) return _context.next = 4, this.services.mcsClient.get(this.state.sid);
                                            _context.next = 7;
                                            break;
                                        case 4:
                                            this.mcsMedia = _context.sent, _context.next = 8;
                                            break;
                                        case 7:
                                            throw new Error("Media Content Service is unavailable");
                                        case 8:
                                            return _context.abrupt("return", this.mcsMedia.getContentUrl());
                                        case 9:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "sid",
                        get: function() {
                            return this.state.sid
                        }
                    }, {
                        key: "filename",
                        get: function() {
                            return this.state.filename
                        }
                    }, {
                        key: "contentType",
                        get: function() {
                            return this.state.contentType
                        }
                    }, {
                        key: "size",
                        get: function() {
                            return this.state.size
                        }
                    }]), Media
                }();
                exports.Media = Media
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            16: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _isInteger2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/number/is-integer")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Member = function(_events_1$EventEmitte) {
                    function Member(services, channel, data, sid) {
                        (0, _classCallCheck3.default)(this, Member);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (Member.__proto__ || (0, _getPrototypeOf2.default)(Member)).call(this));
                        if (_this.channel = channel, _this.services = services, _this.state = {
                                sid: sid,
                                typingTimeout: null,
                                isTyping: !1,
                                identity: data.identity,
                                roleSid: data.roleSid || null,
                                lastConsumedMessageIndex: (0, _isInteger2.default)(data.lastConsumedMessageIndex) ? data.lastConsumedMessageIndex : null,
                                lastConsumptionTimestamp: data.lastConsumptionTimestamp ? new Date(data.lastConsumptionTimestamp) : null,
                                userInfo: data.userInfo
                            }, !data.identity) throw new Error("Received invalid Member object from server: Missing identity.");
                        return _this
                    }
                    return (0, _inherits3.default)(Member, _events_1$EventEmitte), (0, _createClass3.default)(Member, [{
                        key: "sid",
                        get: function() {
                            return this.state.sid
                        }
                    }, {
                        key: "identity",
                        get: function() {
                            return this.state.identity
                        }
                    }, {
                        key: "isTyping",
                        get: function() {
                            return this.state.isTyping
                        }
                    }, {
                        key: "lastConsumedMessageIndex",
                        get: function() {
                            return this.state.lastConsumedMessageIndex
                        }
                    }, {
                        key: "lastConsumptionTimestamp",
                        get: function() {
                            return this.state.lastConsumptionTimestamp
                        }
                    }, {
                        key: "roleSid",
                        get: function() {
                            return this.state.roleSid
                        }
                    }]), (0, _createClass3.default)(Member, [{
                        key: "_startTyping",
                        value: function(timeout) {
                            var _this2 = this;
                            return clearTimeout(this.state.typingTimeout), this.state.isTyping = !0, this.emit("typingStarted", this), this.channel.emit("typingStarted", this), this.state.typingTimeout = setTimeout(function() {
                                return _this2._endTyping()
                            }, timeout), this
                        }
                    }, {
                        key: "_endTyping",
                        value: function() {
                            this.state.typingTimeout && (this.state.isTyping = !1, this.emit("typingEnded", this), this.channel.emit("typingEnded", this), clearInterval(this.state.typingTimeout), this.state.typingTimeout = null)
                        }
                    }, {
                        key: "_update",
                        value: function(data) {
                            var updated = !1;
                            if (data.roleSid && this.state.roleSid !== data.roleSid && (this.state.roleSid = data.roleSid, updated = !0), !(0, _isInteger2.default)(data.lastConsumedMessageIndex) && null !== data.lastConsumedMessageIndex || this.state.lastConsumedMessageIndex === data.lastConsumedMessageIndex || (this.state.lastConsumedMessageIndex = data.lastConsumedMessageIndex, updated = !0), data.lastConsumptionTimestamp) {
                                var lastConsumptionTimestamp = new Date(data.lastConsumptionTimestamp);
                                this.state.lastConsumptionTimestamp && this.state.lastConsumptionTimestamp.getTime() === lastConsumptionTimestamp.getTime() || (this.state.lastConsumptionTimestamp = lastConsumptionTimestamp, updated = !0)
                            }
                            return updated && this.emit("updated", this), this
                        }
                    }, {
                        key: "getUserDescriptor",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return _context.abrupt("return", this.services.users.getUserDescriptor(this.state.identity));
                                        case 1:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "getUser",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            return _context2.abrupt("return", this.services.users.getUser(this.state.identity, this.state.userInfo));
                                        case 1:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "remove",
                        value: function() {
                            return this.channel.removeMember(this)
                        }
                    }]), Member
                }(_dereq_("events").EventEmitter);
                exports.Member = Member
            }, {
                "babel-runtime/core-js/number/is-integer": 36,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            17: [function(_dereq_, module, exports) {
                "use strict";
                var _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    index_1 = _dereq_("./util/index"),
                    logger_1 = _dereq_("./logger"),
                    media_1 = _dereq_("./media"),
                    log = new logger_1.Logger;

                function parseAttributes(msgSid, attributes) {
                    try {
                        return attributes ? JSON.parse(attributes) : {}
                    } catch (e) {
                        return log.warn("Got malformed attributes for the message", msgSid), {}
                    }
                }
                var Message = function(_events_1$EventEmitte) {
                    function Message(channel, services, index, data) {
                        (0, _classCallCheck3.default)(this, Message);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (Message.__proto__ || (0, _getPrototypeOf2.default)(Message)).call(this));
                        _this.channel = channel, _this.services = services;
                        var timestamp = new Date(data.timestamp);
                        return _this.state = {
                            sid: data.sid,
                            index: index,
                            author: data.author,
                            body: data.text,
                            timestamp: timestamp,
                            dateUpdated: data.dateUpdated ? new Date(data.dateUpdated) : null,
                            lastUpdatedBy: data.lastUpdatedBy ? data.lastUpdatedBy : null,
                            attributes: parseAttributes(data.sid, data.attributes),
                            type: data.type ? data.type : "text",
                            media: data.type && "media" === data.type && data.media ? new media_1.Media(data.media, _this.services) : null
                        }, _this
                    }
                    return (0, _inherits3.default)(Message, _events_1$EventEmitte), (0, _createClass3.default)(Message, [{
                        key: "_update",
                        value: function(data) {
                            var updated = !1;
                            !data.text && "string" != typeof data.text || data.text === this.state.body || (this.state.body = data.text, updated = !0), data.lastUpdatedBy && data.lastUpdatedBy !== this.state.lastUpdatedBy && (this.state.lastUpdatedBy = data.lastUpdatedBy, updated = !0), data.dateUpdated && new Date(data.dateUpdated).getTime() !== (this.state.dateUpdated && this.state.dateUpdated.getTime()) && (this.state.dateUpdated = new Date(data.dateUpdated), updated = !0);
                            var updatedAttributes = parseAttributes(this.sid, data.attributes);
                            index_1.isDeepEqual(this.state.attributes, updatedAttributes) || (this.state.attributes = updatedAttributes, updated = !0), updated && this.emit("updated", this)
                        }
                    }, {
                        key: "remove",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return _context.next = 2, this.services.session.addCommand("deleteMessage", {
                                                channelSid: this.channel.sid,
                                                messageIdx: this.index.toString()
                                            });
                                        case 2:
                                            return _context.abrupt("return", this);
                                        case 3:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "updateBody",
                        value: function(body) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            if ("string" != typeof body) throw new Error("Body <String> is a required parameter for updateBody");
                                            _context2.next = 2;
                                            break;
                                        case 2:
                                            return _context2.next = 4, this.services.session.addCommand("editMessage", {
                                                channelSid: this.channel.sid,
                                                messageIdx: this.index.toString(),
                                                text: body
                                            });
                                        case 4:
                                            return _context2.abrupt("return", this);
                                        case 5:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "updateAttributes",
                        value: function(attributes) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                return _regenerator2.default.wrap(function(_context3) {
                                    for (;;) switch (_context3.prev = _context3.next) {
                                        case 0:
                                            if (void 0 === attributes) throw new Error("Attributes is a required parameter for updateAttributes");
                                            _context3.next = 4;
                                            break;
                                        case 4:
                                            if (attributes.constructor !== Object) throw new Error("Attributes must be a valid JSON object");
                                            _context3.next = 6;
                                            break;
                                        case 6:
                                            return _context3.next = 8, this.services.session.addCommand("editMessageAttributes", {
                                                channelSid: this.channel.sid,
                                                messageIdx: this.index,
                                                attributes: (0, _stringify2.default)(attributes)
                                            });
                                        case 8:
                                            return _context3.abrupt("return", this);
                                        case 9:
                                        case "end":
                                            return _context3.stop()
                                    }
                                }, _callee3, this)
                            }))
                        }
                    }, {
                        key: "sid",
                        get: function() {
                            return this.state.sid
                        }
                    }, {
                        key: "author",
                        get: function() {
                            return this.state.author
                        }
                    }, {
                        key: "body",
                        get: function() {
                            return this.state.body
                        }
                    }, {
                        key: "dateUpdated",
                        get: function() {
                            return this.state.dateUpdated
                        }
                    }, {
                        key: "index",
                        get: function() {
                            return this.state.index
                        }
                    }, {
                        key: "lastUpdatedBy",
                        get: function() {
                            return this.state.lastUpdatedBy
                        }
                    }, {
                        key: "timestamp",
                        get: function() {
                            return this.state.timestamp
                        }
                    }, {
                        key: "attributes",
                        get: function() {
                            return this.state.attributes
                        }
                    }, {
                        key: "type",
                        get: function() {
                            return this.state.type
                        }
                    }, {
                        key: "media",
                        get: function() {
                            return this.state.media
                        }
                    }]), Message
                }(events_1.EventEmitter);
                exports.Message = Message
            }, {
                "./logger": 14,
                "./media": 15,
                "./util/index": 30,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            18: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                exports.PushNotification = function PushNotification(data) {
                    (0, _classCallCheck3.default)(this, PushNotification), this.title = data.title || null, this.body = data.body || null, this.sound = data.sound || null, this.badge = data.badge || null, this.action = data.action || null, this.type = data.type || null, this.data = data.data || {}
                }
            }, {
                "babel-runtime/helpers/classCallCheck": 50
            }],
            19: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var RestPaginator = function() {
                    function RestPaginator(items, source, prevToken, nextToken) {
                        (0, _classCallCheck3.default)(this, RestPaginator), this.state = {
                            prevToken: prevToken,
                            nextToken: nextToken,
                            source: source,
                            items: items
                        }
                    }
                    return (0, _createClass3.default)(RestPaginator, [{
                        key: "nextPage",
                        value: function() {
                            return this.hasNextPage ? this.state.source(this.state.nextToken) : _promise2.default.reject(new Error("No next page"))
                        }
                    }, {
                        key: "prevPage",
                        value: function() {
                            return this.hasPrevPage ? this.state.source(this.state.prevToken) : _promise2.default.reject(new Error("No previous page"))
                        }
                    }, {
                        key: "hasNextPage",
                        get: function() {
                            return !!this.state.nextToken
                        }
                    }, {
                        key: "hasPrevPage",
                        get: function() {
                            return !!this.state.prevToken
                        }
                    }, {
                        key: "items",
                        get: function() {
                            return this.state.items
                        }
                    }]), RestPaginator
                }();
                exports.RestPaginator = RestPaginator
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            20: [function(_dereq_, module, exports) {
                "use strict";
                var _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var ConsumptionHorizon = function() {
                    function ConsumptionHorizon(services) {
                        (0, _classCallCheck3.default)(this, ConsumptionHorizon), this.services = services, this.consumptionHorizonReports = new _map2.default, this.consumptionHorizonUpdateTimer = null
                    }
                    return (0, _createClass3.default)(ConsumptionHorizon, [{
                        key: "getReportInterval",
                        value: function() {
                            return this.services.session.getConsumptionReportInterval().then(function(duration) {
                                return 1e3 * duration.seconds
                            })
                        }
                    }, {
                        key: "delayedSendConsumptionHorizon",
                        value: function(delay) {
                            var _this = this;
                            null === this.consumptionHorizonUpdateTimer && (this.consumptionHorizonUpdateTimer = setTimeout(function() {
                                var reports = [];
                                _this.consumptionHorizonReports.forEach(function(entry) {
                                    return reports.push(entry)
                                }), 0 < reports.length && _this.services.session.addCommand("consumptionReport", {
                                    report: reports
                                }), _this.consumptionHorizonUpdateTimer = null, _this.consumptionHorizonReports.clear()
                            }, delay))
                        }
                    }, {
                        key: "updateLastConsumedMessageIndexForChannel",
                        value: function(channelSid, messageIdx) {
                            var _this2 = this;
                            this.consumptionHorizonReports.set(channelSid, {
                                channelSid: channelSid,
                                messageIdx: messageIdx
                            }), this.getReportInterval().then(function(delay) {
                                return _this2.delayedSendConsumptionHorizon(delay)
                            })
                        }
                    }, {
                        key: "advanceLastConsumedMessageIndexForChannel",
                        value: function(channelSid, messageIdx) {
                            var _this3 = this,
                                currentHorizon = this.consumptionHorizonReports.get(channelSid);
                            currentHorizon && currentHorizon.messageIdx >= messageIdx || (this.consumptionHorizonReports.set(channelSid, {
                                channelSid: channelSid,
                                messageIdx: messageIdx
                            }), this.getReportInterval().then(function(delay) {
                                return _this3.delayedSendConsumptionHorizon(delay)
                            }))
                        }
                    }]), ConsumptionHorizon
                }();
                exports.ConsumptionHorizon = ConsumptionHorizon
            }, {
                "babel-runtime/core-js/map": 35,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            21: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _slicedToArray3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/slicedToArray")),
                    _getIterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/get-iterator")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var operation_retrier_1 = _dereq_("operation-retrier"),
                    Network = function() {
                        function Network(config, services) {
                            var _this = this;
                            (0, _classCallCheck3.default)(this, Network), this.config = config, this.services = services, this.cache = new _map2.default, this.cacheLifetime = 0, this.services.session.getHttpCacheInterval().then(function(duration) {
                                _this.cacheLifetime = 1e3 * duration.seconds, _this.cleanupCache()
                            })
                        }
                        return (0, _createClass3.default)(Network, [{
                            key: "backoffConfig",
                            value: function() {
                                return (0, _extends3.default)(this.config.backoffConfigDefault, this.config.backoffConfigOverride)
                            }
                        }, {
                            key: "retryWhenThrottled",
                            value: function() {
                                return void 0 !== this.config.retryWhenThrottledOverride ? this.config.retryWhenThrottledOverride : void 0 !== this.config.retryWhenThrottledDefault && this.config.retryWhenThrottledDefault
                            }
                        }, {
                            key: "isExpired",
                            value: function(timestamp) {
                                return !this.cacheLifetime || Date.now() - timestamp > this.cacheLifetime
                            }
                        }, {
                            key: "cleanupCache",
                            value: function() {
                                var _iteratorNormalCompletion = !0,
                                    _didIteratorError = !1,
                                    _iteratorError = void 0;
                                try {
                                    for (var _step, _iterator = (0, _getIterator3.default)(this.cache); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0) {
                                        var _step$value = (0, _slicedToArray3.default)(_step.value, 2),
                                            k = _step$value[0],
                                            v = _step$value[1];
                                        this.isExpired(v.timestamp) && this.cache.delete(k)
                                    }
                                } catch (err) {
                                    _didIteratorError = !0, _iteratorError = err
                                } finally {
                                    try {
                                        !_iteratorNormalCompletion && _iterator.return && _iterator.return()
                                    } finally {
                                        if (_didIteratorError) throw _iteratorError
                                    }
                                }
                                0 === this.cache.size && clearInterval(this.timer)
                            }
                        }, {
                            key: "pokeTimer",
                            value: function() {
                                var _this2 = this;
                                this.timer = this.timer || setInterval(function() {
                                    return _this2.cleanupCache()
                                }, 2 * this.cacheLifetime)
                            }
                        }, {
                            key: "executeWithRetry",
                            value: function(request) {
                                var _this3 = this,
                                    retryWhenThrottled = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                return new _promise2.default(function(resolve, reject) {
                                    var codesToRetryOn = [502, 503, 504];
                                    retryWhenThrottled && codesToRetryOn.push(429);
                                    var retrier = new operation_retrier_1.default(_this3.backoffConfig());
                                    retrier.on("attempt", function() {
                                        request().then(function(result) {
                                            return retrier.succeeded(result)
                                        }).catch(function(err) {
                                            -1 < codesToRetryOn.indexOf(err.status) ? retrier.failed(err) : "Twilsock disconnected" === err.message ? retrier.failed(err) : (retrier.removeAllListeners(), retrier.cancel(), reject(err))
                                        })
                                    }), retrier.on("succeeded", function(result) {
                                        resolve(result)
                                    }), retrier.on("cancelled", function(err) {
                                        return reject(err)
                                    }), retrier.on("failed", function(err) {
                                        return reject(err)
                                    }), retrier.start()
                                })
                            }
                        }, {
                            key: "get",
                            value: function(url) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var cacheEntry, headers, response, _this4 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                if ((cacheEntry = this.cache.get(url)) && !this.isExpired(cacheEntry.timestamp)) return _context.abrupt("return", cacheEntry.response);
                                                _context.next = 3;
                                                break;
                                            case 3:
                                                return headers = {
                                                    "X-Twilio-Token": this.config.token
                                                }, _context.next = 6, this.executeWithRetry(function() {
                                                    return _this4.services.transport.get(url, headers)
                                                }, this.retryWhenThrottled());
                                            case 6:
                                                return response = _context.sent, this.cache.set(url, {
                                                    response: response,
                                                    timestamp: Date.now()
                                                }), this.pokeTimer(), _context.abrupt("return", response);
                                            case 10:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }]), Network
                    }();
                exports.Network = Network
            }, {
                "babel-runtime/core-js/get-iterator": 32,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/slicedToArray": 55,
                "babel-runtime/regenerator": 57,
                "operation-retrier": 220
            }],
            22: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("../logger"),
                    notificationtypes_1 = _dereq_("../interfaces/notificationtypes"),
                    log = logger_1.Logger.scope("TypingIndicator"),
                    TypingIndicator = function() {
                        function TypingIndicator(config, services, getChannel) {
                            (0, _classCallCheck3.default)(this, TypingIndicator), this.config = config, this.services = services, this.getChannel = getChannel, this.serviceTypingTimeout = null, this.sentUpdates = new _map2.default
                        }
                        return (0, _createClass3.default)(TypingIndicator, [{
                            key: "initialize",
                            value: function() {
                                var _this = this;
                                this.services.notificationClient.subscribe(notificationtypes_1.NotificationTypes.TYPING_INDICATOR, "twilsock"), this.services.notificationClient.on("message", function(type, message) {
                                    type === notificationtypes_1.NotificationTypes.TYPING_INDICATOR && _this.handleRemoteTyping(message)
                                })
                            }
                        }, {
                            key: "handleRemoteTyping",
                            value: function(message) {
                                var _this2 = this;
                                log.trace("Got new typing indicator ", message), this.getChannel(message.channel_sid).then(function(channel) {
                                    channel && channel.members.forEach(function(member) {
                                        member.identity === message.identity && member._startTyping(_this2.typingTimeout)
                                    })
                                }).catch(function(err) {
                                    throw log.error(err), err
                                })
                            }
                        }, {
                            key: "send",
                            value: function(channelSid) {
                                var lastUpdate = this.sentUpdates.get(channelSid);
                                return lastUpdate && lastUpdate > Date.now() - this.typingTimeout ? _promise2.default.resolve() : (this.sentUpdates.set(channelSid, Date.now()), this._send(channelSid))
                            }
                        }, {
                            key: "_send",
                            value: function(channelSid) {
                                var _this3 = this;
                                log.trace("Sending typing indicator");
                                var url = this.config.typingIndicatorUri,
                                    headers = {
                                        "X-Twilio-Token": this.config.token,
                                        "Content-Type": "application/x-www-form-urlencoded"
                                    },
                                    body = "ChannelSid=" + channelSid;
                                return this.services.transport.post(url, headers, body).then(function(response) {
                                    response.body.hasOwnProperty("typing_timeout") && (_this3.serviceTypingTimeout = 1e3 * response.body.typing_timeout)
                                }).catch(function(err) {
                                    throw log.error("Failed to send typing indicator:", err), err
                                })
                            }
                        }, {
                            key: "typingTimeout",
                            get: function() {
                                return this.config.typingIndicatorTimeoutOverride || this.serviceTypingTimeout || this.config.typingIndicatorTimeoutDefault
                            }
                        }]), TypingIndicator
                    }();
                exports.TypingIndicator = TypingIndicator
            }, {
                "../interfaces/notificationtypes": 12,
                "../logger": 14,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            23: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var uuid = _dereq_("uuid"),
                    platform = _dereq_("platform"),
                    Durational = _dereq_("durational"),
                    responsecodes_1 = _dereq_("./interfaces/responsecodes"),
                    logger_1 = _dereq_("./logger"),
                    sessionerror_1 = _dereq_("./sessionerror"),
                    deferred_1 = _dereq_("./util/deferred"),
                    SDK_VERSION = _dereq_("./../package.json").version,
                    log = logger_1.Logger.scope("Session"),
                    Command = function Command() {
                        (0, _classCallCheck3.default)(this, Command)
                    };
                var Session = function() {
                    function Session(services, config) {
                        (0, _classCallCheck3.default)(this, Session);
                        var platformInfo = "undefined" != typeof navigator ? platform.parse(navigator.userAgent) : platform;
                        this.services = services, this.config = config, this.sessionInfo = new deferred_1.Deferred, this.currentContext = {}, this.token = null, this.tokenSynced = !0, this.pendingCommands = new _map2.default, this.sessionStreamPromise = null, this.endpointPlatform = ["js", SDK_VERSION, platformInfo.os, platformInfo.name, platformInfo.version].join("|")
                    }
                    return (0, _createClass3.default)(Session, [{
                        key: "handleContextUpdate",
                        value: function(updatedContext) {
                            var obj;
                            (log.info("Session context updated"), log.debug("new session context:", updatedContext), this.currentContext = updatedContext, obj = updatedContext, ["identity", "userInfo", "links", "myChannels", "channels"].some(function(prop) {
                                return !obj.hasOwnProperty(prop)
                            })) || (log.info("new session context accepted"), this.sessionInfo.set(updatedContext))
                        }
                    }, {
                        key: "initialize",
                        value: function(token) {
                            var _this = this;
                            this.token = token, this.tokenSynced = !1;
                            var context = {
                                type: "IpMsgSession",
                                apiVersion: "3",
                                endpointPlatform: this.endpointPlatform,
                                token: token
                            };
                            return this.sessionStreamPromise = this.services.syncClient.list({
                                purpose: "com.twilio.rtd.ipmsg",
                                context: context
                            }).then(function(list) {
                                return log.info("Session created", list.sid), _this.tokenSynced = !0, list.on("itemAdded", function(item) {
                                    return _this.processCommandResponse(item)
                                }), list.on("itemUpdated", function(item) {
                                    return _this.processCommandResponse(item)
                                }), list.on("contextUpdatedRemotely", function(updatedContext) {
                                    return _this.handleContextUpdate(updatedContext)
                                }), list
                            }).catch(function(err) {
                                throw log.error("Failed to create session", err), err
                            }), this.sessionStreamPromise
                        }
                    }, {
                        key: "addCommand",
                        value: function(action, params) {
                            return this.processCommand(action, params)
                        }
                    }, {
                        key: "processCommand",
                        value: function(action, params) {
                            var _this2 = this,
                                createSessionIfNotFound = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2],
                                command = new Command;
                            return command.request = params, command.request.action = action, command.commandId = uuid.v4(), log.info("Adding command: ", action, command.commandId), log.debug("command arguments:", params, createSessionIfNotFound), new _promise2.default(function(resolve, reject) {
                                _this2.sessionStreamPromise.then(function(list) {
                                    return _this2.pendingCommands.set(command.commandId, {
                                        resolve: resolve,
                                        reject: reject,
                                        commandId: command.commandId,
                                        request: command.request
                                    }), list.push(command)
                                }).then(function() {
                                    return log.debug("Command accepted by server", command.commandId)
                                }).catch(function(err) {
                                    _this2.pendingCommands.delete(command.commandId), log.error("Failed to add a command to the session", err), err.code != responsecodes_1.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY && err.code !== responsecodes_1.ResponseCodes.LIST_NOT_FOUND || !createSessionIfNotFound ? reject(new Error("Can't add command: " + err.message)) : (log.info("recreating session..."), _this2.initialize(_this2.token), resolve(_this2.processCommand(action, params, !1)))
                                })
                            })
                        }
                    }, {
                        key: "processCommandResponse",
                        value: function(entity) {
                            if (entity.value.hasOwnProperty("response") && entity.value.hasOwnProperty("commandId") && this.pendingCommands.has(entity.value.commandId)) {
                                var value = entity.value,
                                    commandId = entity.value.commandId;
                                if (value.response.status === responsecodes_1.ResponseCodes.HTTP_200_OK) {
                                    log.debug("Command succeeded: ", value);
                                    var resolve = this.pendingCommands.get(commandId).resolve;
                                    this.pendingCommands.delete(commandId), resolve(value.response)
                                } else {
                                    log.error("Command failed: ", value);
                                    var reject = this.pendingCommands.get(commandId).reject;
                                    this.pendingCommands.delete(commandId), reject(new sessionerror_1.SessionError(value.response.statusText, value.response.status))
                                }
                            }
                        }
                    }, {
                        key: "updateToken",
                        value: function(token) {
                            return this.token = token, this.tokenSynced = !1, this.syncToken()
                        }
                    }, {
                        key: "syncToken",
                        value: function() {
                            var createSessionIfNotFound = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0];
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                var context, list, message;
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            if (this.tokenSynced || this.tokenSyncInProgress) return log.trace("token is already synced or sync is in progress"), _context.abrupt("return");
                                            _context.next = 3;
                                            break;
                                        case 3:
                                            return this.tokenSyncInProgress = !0, _context.prev = 4, _context.next = 7, this.getSessionContext();
                                        case 7:
                                            return context = _context.sent, _context.next = 10, this.sessionStreamPromise;
                                        case 10:
                                            return list = _context.sent, _context.next = 13, list.updateContext((0, _extends3.default)(context, {
                                                token: this.token
                                            }));
                                        case 13:
                                            this.tokenSynced = !0, this.tokenSyncInProgress = !1, _context.next = 27;
                                            break;
                                        case 17:
                                            if (_context.prev = 17, _context.t0 = _context.catch(4), _context.t0.code != responsecodes_1.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY && _context.t0.code !== responsecodes_1.ResponseCodes.LIST_NOT_FOUND || !createSessionIfNotFound) {
                                                _context.next = 23;
                                                break
                                            }
                                            return log.info("recreating session..."), this.initialize(this.token), _context.abrupt("return", this.syncToken(!1));
                                        case 23:
                                            throw message = "Couldn't update the token in session context", log.error(message, _context.t0), this.tokenSyncInProgress = !1, new sessionerror_1.SessionError(message, _context.t0.code);
                                        case 27:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this, [
                                    [4, 17]
                                ])
                            }))
                        }
                    }, {
                        key: "getSessionContext",
                        value: function() {
                            return this.sessionStreamPromise.then(function(stream) {
                                return stream.getContext()
                            })
                        }
                    }, {
                        key: "getSessionLinks",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                var info;
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            return _context2.next = 2, this.sessionInfo.promise;
                                        case 2:
                                            return info = _context2.sent, _context2.abrupt("return", {
                                                publicChannelsUrl: this.config.baseUrl + info.links.publicChannelsUrl,
                                                myChannelsUrl: this.config.baseUrl + info.links.myChannelsUrl,
                                                typingUrl: this.config.baseUrl + info.links.typingUrl,
                                                syncListUrl: this.config.baseUrl + info.links.syncListUrl,
                                                usersUrl: this.config.baseUrl + info.links.usersUrl,
                                                mediaServiceUrl: info.links.mediaServiceUrl
                                            });
                                        case 4:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "getChannelsId",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                var info;
                                return _regenerator2.default.wrap(function(_context3) {
                                    for (;;) switch (_context3.prev = _context3.next) {
                                        case 0:
                                            return _context3.next = 2, this.sessionInfo.promise;
                                        case 2:
                                            return info = _context3.sent, _context3.abrupt("return", info.channels);
                                        case 4:
                                        case "end":
                                            return _context3.stop()
                                    }
                                }, _callee3, this)
                            }))
                        }
                    }, {
                        key: "getMyChannelsId",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                var info;
                                return _regenerator2.default.wrap(function(_context4) {
                                    for (;;) switch (_context4.prev = _context4.next) {
                                        case 0:
                                            return _context4.next = 2, this.sessionInfo.promise;
                                        case 2:
                                            return info = _context4.sent, _context4.abrupt("return", info.myChannels);
                                        case 4:
                                        case "end":
                                            return _context4.stop()
                                    }
                                }, _callee4, this)
                            }))
                        }
                    }, {
                        key: "getMaxUserInfosToSubscribe",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                var info;
                                return _regenerator2.default.wrap(function(_context5) {
                                    for (;;) switch (_context5.prev = _context5.next) {
                                        case 0:
                                            return _context5.next = 2, this.sessionInfo.promise;
                                        case 2:
                                            return info = _context5.sent, _context5.abrupt("return", this.config.userInfosToSubscribeOverride || info.userInfosToSubscribe || this.config.userInfosToSubscribeDefault);
                                        case 4:
                                        case "end":
                                            return _context5.stop()
                                    }
                                }, _callee5, this)
                            }))
                        }
                    }, {
                        key: "getUsersData",
                        value: function() {
                            return this.sessionInfo.promise.then(function(info) {
                                return {
                                    user: info.userInfo,
                                    identity: info.identity
                                }
                            })
                        }
                    }, {
                        key: "getConsumptionReportInterval",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                var context, consumptionIntervalToUse;
                                return _regenerator2.default.wrap(function(_context6) {
                                    for (;;) switch (_context6.prev = _context6.next) {
                                        case 0:
                                            return _context6.next = 2, this.getSessionContext();
                                        case 2:
                                            return context = _context6.sent, consumptionIntervalToUse = this.config.consumptionReportIntervalOverride || context.consumptionReportInterval || this.config.consumptionReportIntervalDefault, _context6.prev = 4, _context6.abrupt("return", Durational.fromString(consumptionIntervalToUse));
                                        case 8:
                                            return _context6.prev = 8, _context6.t0 = _context6.catch(4), log.error("Failed to parse consumption report interval", consumptionIntervalToUse, "using default value", this.config.consumptionReportIntervalDefault), _context6.abrupt("return", Durational.fromString(this.config.consumptionReportIntervalDefault));
                                        case 12:
                                        case "end":
                                            return _context6.stop()
                                    }
                                }, _callee6, this, [
                                    [4, 8]
                                ])
                            }))
                        }
                    }, {
                        key: "getHttpCacheInterval",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                var context, cacheIntervalToUse;
                                return _regenerator2.default.wrap(function(_context7) {
                                    for (;;) switch (_context7.prev = _context7.next) {
                                        case 0:
                                            return _context7.next = 2, this.getSessionContext();
                                        case 2:
                                            return context = _context7.sent, cacheIntervalToUse = this.config.httpCacheIntervalOverride || context.httpCacheInterval || this.config.httpCacheIntervalDefault, _context7.prev = 4, _context7.abrupt("return", Durational.fromString(cacheIntervalToUse));
                                        case 8:
                                            return _context7.prev = 8, _context7.t0 = _context7.catch(4), log.error("Failed to parse cache interval", cacheIntervalToUse, "using default value", this.config.httpCacheIntervalDefault), _context7.abrupt("return", Durational.fromString(this.config.httpCacheIntervalDefault));
                                        case 12:
                                        case "end":
                                            return _context7.stop()
                                    }
                                }, _callee7, this, [
                                    [4, 8]
                                ])
                            }))
                        }
                    }, {
                        key: "identity",
                        get: function() {
                            return this.sessionInfo.current.identity
                        }
                    }, {
                        key: "reachabilityEnabled",
                        get: function() {
                            return this.currentContext.reachabilityEnabled
                        }
                    }]), Session
                }();
                exports.Session = Session
            }, {
                "./../package.json": 291,
                "./interfaces/responsecodes": 13,
                "./logger": 14,
                "./sessionerror": 24,
                "./util/deferred": 29,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/regenerator": 57,
                durational: 212,
                platform: 221,
                uuid: 283
            }],
            24: [function(_dereq_, module, exports) {
                "use strict";
                var _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SessionError = function(_Error) {
                    function SessionError(message, code) {
                        (0, _classCallCheck3.default)(this, SessionError);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SessionError.__proto__ || (0, _getPrototypeOf2.default)(SessionError)).call(this));
                        return _this.name = _this.constructor.name, _this.message = message, _this.code = code, Error.captureStackTrace ? Error.captureStackTrace(_this, _this.constructor) : _this.stack = (new Error).stack, _this
                    }
                    return (0, _inherits3.default)(SessionError, _Error), SessionError
                }(Error);
                exports.SessionError = SessionError
            }, {
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54
            }],
            25: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var index_1 = _dereq_("./util/index"),
                    restpaginator_1 = _dereq_("./restpaginator"),
                    synclistdescriptor_1 = _dereq_("./synclistdescriptor"),
                    SyncList = function() {
                        function SyncList(services) {
                            (0, _classCallCheck3.default)(this, SyncList), this.services = services
                        }
                        return (0, _createClass3.default)(SyncList, [{
                            key: "getPage",
                            value: function(args) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var links, url, response, _this = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return args = args || {}, _context.next = 3, this.services.session.getSessionLinks();
                                            case 3:
                                                return links = _context.sent, url = new index_1.UriBuilder(links.syncListUrl).arg("PageToken", args.pageToken).build(), _context.next = 7, this.services.network.get(url);
                                            case 7:
                                                return response = _context.sent, _context.abrupt("return", new restpaginator_1.RestPaginator(response.body.channels.map(function(x) {
                                                    return new synclistdescriptor_1.SyncListDescriptor(x)
                                                }), function(pageToken) {
                                                    return _this.getPage({
                                                        pageToken: pageToken
                                                    })
                                                }, response.body.meta.previous_token, response.body.meta.next_token));
                                            case 9:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }]), SyncList
                    }();
                exports.SyncList = SyncList
            }, {
                "./restpaginator": 19,
                "./synclistdescriptor": 26,
                "./util/index": 30,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            26: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                exports.SyncListDescriptor = function SyncListDescriptor(descriptor) {
                    (0, _classCallCheck3.default)(this, SyncListDescriptor), this.descriptor = descriptor, this.channel_sid = descriptor.channel_sid, this.status = descriptor.status, this.channel = descriptor.channel, this.messages = descriptor.messages, this.roster = descriptor.roster, this.lastConsumedMessageIndex = descriptor.last_consumed_message_index, this.status = descriptor.status
                }
            }, {
                "babel-runtime/helpers/classCallCheck": 50
            }],
            27: [function(_dereq_, module, exports) {
                "use strict";
                var _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    log = _dereq_("./logger").Logger.scope("User"),
                    User = function(_events_1$EventEmitte) {
                        function User(identity, entityName, services) {
                            (0, _classCallCheck3.default)(this, User);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (User.__proto__ || (0, _getPrototypeOf2.default)(User)).call(this));
                            return _this.subscribed = "initializing", _this.setMaxListeners(0), _this.services = services, _this.state = {
                                identity: identity,
                                entityName: entityName,
                                friendlyName: null,
                                attributes: {},
                                online: null,
                                notifiable: null
                            }, _this
                        }
                        return (0, _inherits3.default)(User, _events_1$EventEmitte), (0, _createClass3.default)(User, [{
                            key: "_update",
                            value: function(key, value) {
                                switch (log.debug("User for", this.state.identity, "updated:", key, value), key) {
                                    case "friendlyName":
                                        this.state.friendlyName = value.value;
                                        break;
                                    case "attributes":
                                        try {
                                            this.state.attributes = JSON.parse(value.value)
                                        } catch (e) {
                                            this.state.attributes = {}
                                        }
                                        break;
                                    case "reachability":
                                        this.state.online = value.online, this.state.notifiable = value.notifiable;
                                        break;
                                    default:
                                        return
                                }
                                this.emit("updated", this)
                            }
                        }, {
                            key: "_updateReachabilityInfo",
                            value: function(map, update) {
                                var _this2 = this;
                                return this.services.session.reachabilityEnabled ? map.get("reachability").then(update).catch(function(err) {
                                    log.warn("Failed to get reachability info for ", _this2.state.identity, err)
                                }) : _promise2.default.resolve()
                            }
                        }, {
                            key: "_fetch",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var update, _this3 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                if (this.state.entityName) {
                                                    _context.next = 2;
                                                    break
                                                }
                                                return _context.abrupt("return", this);
                                            case 2:
                                                return update = function(item) {
                                                    return _this3._update(item.key, item.value)
                                                }, this.promiseToFetch = this.services.syncClient.map({
                                                    uniqueName: this.state.entityName,
                                                    mode: "open",
                                                    optimistic: !0
                                                }).then(function(map) {
                                                    return (_this3.entity = map).on("itemUpdated", update), _promise2.default.all([map.get("friendlyName").then(update), map.get("attributes").then(update), _this3._updateReachabilityInfo(map, update)])
                                                }).then(function() {
                                                    return log.debug("Fetched for", _this3.identity), _this3.subscribed = "subscribed", _this3.emit("userSubscribed", _this3), _this3
                                                }).catch(function(err) {
                                                    throw _this3.promiseToFetch = null, err
                                                }), _context.abrupt("return", this.promiseToFetch);
                                            case 5:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "_ensureFetched",
                            value: function() {
                                return this.promiseToFetch || this._fetch()
                            }
                        }, {
                            key: "updateAttributes",
                            value: function(attributes) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                if (attributes && attributes.constructor === Object) {
                                                    _context2.next = 2;
                                                    break
                                                }
                                                throw new Error("Attributes must be an object");
                                            case 2:
                                                if ("unsubscribed" == this.subscribed) throw new Error("Can't modify unsubscribed object");
                                                _context2.next = 4;
                                                break;
                                            case 4:
                                                return _context2.next = 6, this.services.session.addCommand("editUserAttributes", {
                                                    username: this.state.identity,
                                                    attributes: (0, _stringify2.default)(attributes)
                                                });
                                            case 6:
                                                return _context2.abrupt("return", this);
                                            case 7:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "updateFriendlyName",
                            value: function(friendlyName) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                if (friendlyName && "string" != typeof friendlyName) throw new Error("friendlyName must be string or empty");
                                                _context3.next = 2;
                                                break;
                                            case 2:
                                                if ("unsubscribed" == this.subscribed) throw new Error("Can't modify unsubscribed object");
                                                _context3.next = 4;
                                                break;
                                            case 4:
                                                return _context3.next = 6, this.services.session.addCommand("editUserFriendlyName", {
                                                    username: this.state.identity,
                                                    friendlyName: friendlyName
                                                });
                                            case 6:
                                                return _context3.abrupt("return", this);
                                            case 7:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }, {
                            key: "unsubscribe",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                if (this.promiseToFetch) return _context4.next = 3, this.promiseToFetch;
                                                _context4.next = 7;
                                                break;
                                            case 3:
                                                this.entity.close(), this.promiseToFetch = null, this.subscribed = "unsubscribed", this.emit("userUnsubscribed", this);
                                            case 7:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }, {
                            key: "identity",
                            get: function() {
                                return this.state.identity
                            },
                            set: function(identity) {
                                this.state.identity = identity
                            }
                        }, {
                            key: "entityName",
                            set: function(name) {
                                this.state.entityName = name
                            }
                        }, {
                            key: "attributes",
                            get: function() {
                                return this.state.attributes
                            }
                        }, {
                            key: "friendlyName",
                            get: function() {
                                return this.state.friendlyName
                            }
                        }, {
                            key: "online",
                            get: function() {
                                return this.state.online
                            }
                        }, {
                            key: "notifiable",
                            get: function() {
                                return this.state.notifiable
                            }
                        }, {
                            key: "isSubscribed",
                            get: function() {
                                return "subscribed" == this.subscribed
                            }
                        }]), User
                    }(events_1.EventEmitter);
                exports.User = User
            }, {
                "./logger": 14,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214
            }],
            28: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var log = _dereq_("./logger").Logger.scope("UserDescriptor");
                var UserDescriptor = function() {
                    function UserDescriptor(services, descriptor) {
                        (0, _classCallCheck3.default)(this, UserDescriptor), this.services = services, this.descriptor = descriptor, this.identity = descriptor.identity, this.friendlyName = descriptor.friendly_name, this.attributes = function(attrs) {
                            try {
                                return JSON.parse(attrs)
                            } catch (e) {
                                log.warn("Failed to parse user attributes", e)
                            }
                            return {}
                        }(descriptor.attributes), this.online = descriptor.is_online, this.notifiable = descriptor.is_notifiable
                    }
                    return (0, _createClass3.default)(UserDescriptor, [{
                        key: "subscribe",
                        value: function() {
                            return this.services.users.getUser(this.identity, this.descriptor.sync_unique_name)
                        }
                    }, {
                        key: "_getDescriptor",
                        value: function() {
                            return this.descriptor
                        }
                    }]), UserDescriptor
                }();
                exports.UserDescriptor = UserDescriptor
            }, {
                "./logger": 14,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            29: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Deferred = function() {
                    function Deferred() {
                        var _this = this;
                        (0, _classCallCheck3.default)(this, Deferred), this._promise = new _promise2.default(function(resolve, reject) {
                            _this._resolve = resolve, _this._reject = reject
                        })
                    }
                    return (0, _createClass3.default)(Deferred, [{
                        key: "update",
                        value: function(value) {
                            this._resolve(value)
                        }
                    }, {
                        key: "set",
                        value: function(value) {
                            this.current = value, this._resolve(value)
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            this._reject(e)
                        }
                    }, {
                        key: "promise",
                        get: function() {
                            return this._promise
                        }
                    }]), Deferred
                }();
                exports.Deferred = Deferred
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            30: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var JsonDiff = _dereq_("rfc6902");
                exports.isDeepEqual = function(o1, o2) {
                    return 0 === JsonDiff.createPatch(o1, o2).length
                }, exports.deepClone = function(obj) {
                    return JSON.parse((0, _stringify2.default)(obj))
                }, exports.parseToNumber = function(value) {
                    return void 0 === value || isNaN(Number(value)) ? null : Number(value)
                };
                var UriBuilder = function() {
                    function UriBuilder(base) {
                        (0, _classCallCheck3.default)(this, UriBuilder), this.base = base.replace(/\/$/, ""), this.args = [], this.paths = []
                    }
                    return (0, _createClass3.default)(UriBuilder, [{
                        key: "arg",
                        value: function(name, value) {
                            return void 0 !== value && this.args.push(encodeURIComponent(name) + "=" + encodeURIComponent(value)), this
                        }
                    }, {
                        key: "path",
                        value: function(name) {
                            return this.paths.push(encodeURIComponent(name)), this
                        }
                    }, {
                        key: "build",
                        value: function() {
                            var result = this.base;
                            return this.paths.length && (result += "/" + this.paths.join("/")), this.args.length && (result += "?" + this.args.join("&")), result
                        }
                    }]), UriBuilder
                }();
                exports.UriBuilder = UriBuilder
            }, {
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                rfc6902: 228
            }],
            31: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/array/from"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/array/from": 72
            }],
            32: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/get-iterator"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/get-iterator": 73
            }],
            33: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/is-iterable"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/is-iterable": 74
            }],
            34: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/json/stringify"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/json/stringify": 75
            }],
            35: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/map"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/map": 76
            }],
            36: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/number/is-integer"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/number/is-integer": 77
            }],
            37: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/assign"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/assign": 78
            }],
            38: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/create"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/create": 79
            }],
            39: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/define-properties"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/define-properties": 80
            }],
            40: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/define-property"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/define-property": 81
            }],
            41: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/freeze"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/freeze": 82
            }],
            42: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/get-prototype-of"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/get-prototype-of": 83
            }],
            43: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/keys"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/keys": 84
            }],
            44: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/object/set-prototype-of"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/object/set-prototype-of": 85
            }],
            45: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/promise"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/promise": 86
            }],
            46: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/reflect/construct"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/reflect/construct": 87
            }],
            47: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/set"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/set": 88
            }],
            48: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/symbol"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/symbol": 89
            }],
            49: [function(_dereq_, module, exports) {
                module.exports = {
                    default: _dereq_("core-js/library/fn/symbol/iterator"),
                    __esModule: !0
                }
            }, {
                "core-js/library/fn/symbol/iterator": 90
            }],
            50: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0, exports.default = function(instance, Constructor) {
                    if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                }
            }, {}],
            51: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var obj, _defineProperty = _dereq_("../core-js/object/define-property"),
                    _defineProperty2 = (obj = _defineProperty) && obj.__esModule ? obj : {
                        default: obj
                    };
                exports.default = function() {
                    function defineProperties(target, props) {
                        for (var i = 0; i < props.length; i++) {
                            var descriptor = props[i];
                            descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), (0, _defineProperty2.default)(target, descriptor.key, descriptor)
                        }
                    }
                    return function(Constructor, protoProps, staticProps) {
                        return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                    }
                }()
            }, {
                "../core-js/object/define-property": 40
            }],
            52: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var obj, _assign = _dereq_("../core-js/object/assign"),
                    _assign2 = (obj = _assign) && obj.__esModule ? obj : {
                        default: obj
                    };
                exports.default = _assign2.default || function(target) {
                    for (var i = 1; i < arguments.length; i++) {
                        var source = arguments[i];
                        for (var key in source) Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key])
                    }
                    return target
                }
            }, {
                "../core-js/object/assign": 37
            }],
            53: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var _setPrototypeOf2 = _interopRequireDefault(_dereq_("../core-js/object/set-prototype-of")),
                    _create2 = _interopRequireDefault(_dereq_("../core-js/object/create")),
                    _typeof3 = _interopRequireDefault(_dereq_("../helpers/typeof"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                exports.default = function(subClass, superClass) {
                    if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === superClass ? "undefined" : (0, _typeof3.default)(superClass)));
                    subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {
                        constructor: {
                            value: subClass,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), superClass && (_setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass)
                }
            }, {
                "../core-js/object/create": 38,
                "../core-js/object/set-prototype-of": 44,
                "../helpers/typeof": 56
            }],
            54: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var obj, _typeof2 = _dereq_("../helpers/typeof"),
                    _typeof3 = (obj = _typeof2) && obj.__esModule ? obj : {
                        default: obj
                    };
                exports.default = function(self, call) {
                    if (!self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !call || "object" !== (void 0 === call ? "undefined" : (0, _typeof3.default)(call)) && "function" != typeof call ? self : call
                }
            }, {
                "../helpers/typeof": 56
            }],
            55: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var _isIterable3 = _interopRequireDefault(_dereq_("../core-js/is-iterable")),
                    _getIterator3 = _interopRequireDefault(_dereq_("../core-js/get-iterator"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                exports.default = function(arr, i) {
                    if (Array.isArray(arr)) return arr;
                    if ((0, _isIterable3.default)(Object(arr))) return function(arr, i) {
                        var _arr = [],
                            _n = !0,
                            _d = !1,
                            _e = void 0;
                        try {
                            for (var _s, _i = (0, _getIterator3.default)(arr); !(_n = (_s = _i.next()).done) && (_arr.push(_s.value), !i || _arr.length !== i); _n = !0);
                        } catch (err) {
                            _d = !0, _e = err
                        } finally {
                            try {
                                !_n && _i.return && _i.return()
                            } finally {
                                if (_d) throw _e
                            }
                        }
                        return _arr
                    }(arr, i);
                    throw new TypeError("Invalid attempt to destructure non-iterable instance")
                }
            }, {
                "../core-js/get-iterator": 32,
                "../core-js/is-iterable": 33
            }],
            56: [function(_dereq_, module, exports) {
                "use strict";
                exports.__esModule = !0;
                var _iterator2 = _interopRequireDefault(_dereq_("../core-js/symbol/iterator")),
                    _symbol2 = _interopRequireDefault(_dereq_("../core-js/symbol")),
                    _typeof = "function" == typeof _symbol2.default && "symbol" === _typeof4(_iterator2.default) ? function(obj) {
                        return _typeof4(obj)
                    } : function(obj) {
                        return obj && "function" == typeof _symbol2.default && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : _typeof4(obj)
                    };

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                exports.default = "function" == typeof _symbol2.default && "symbol" === _typeof(_iterator2.default) ? function(obj) {
                    return void 0 === obj ? "undefined" : _typeof(obj)
                } : function(obj) {
                    return obj && "function" == typeof _symbol2.default && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : void 0 === obj ? "undefined" : _typeof(obj)
                }
            }, {
                "../core-js/symbol": 48,
                "../core-js/symbol/iterator": 49
            }],
            57: [function(_dereq_, module, exports) {
                module.exports = _dereq_("regenerator-runtime")
            }, {
                "regenerator-runtime": 226
            }],
            58: [function(_dereq_, module, exports) {
                var Backoff = _dereq_("./lib/backoff"),
                    ExponentialBackoffStrategy = _dereq_("./lib/strategy/exponential"),
                    FibonacciBackoffStrategy = _dereq_("./lib/strategy/fibonacci"),
                    FunctionCall = _dereq_("./lib/function_call.js");
                module.exports.Backoff = Backoff, module.exports.FunctionCall = FunctionCall, module.exports.FibonacciStrategy = FibonacciBackoffStrategy, module.exports.ExponentialStrategy = ExponentialBackoffStrategy, module.exports.fibonacci = function(options) {
                    return new Backoff(new FibonacciBackoffStrategy(options))
                }, module.exports.exponential = function(options) {
                    return new Backoff(new ExponentialBackoffStrategy(options))
                }, module.exports.call = function(fn, vargs, callback) {
                    var args = Array.prototype.slice.call(arguments);
                    return fn = args[0], vargs = args.slice(1, args.length - 1), callback = args[args.length - 1], new FunctionCall(fn, vargs, callback)
                }
            }, {
                "./lib/backoff": 59,
                "./lib/function_call.js": 60,
                "./lib/strategy/exponential": 61,
                "./lib/strategy/fibonacci": 62
            }],
            59: [function(_dereq_, module, exports) {
                var events = _dereq_("events"),
                    precond = _dereq_("precond");

                function Backoff(backoffStrategy) {
                    events.EventEmitter.call(this), this.backoffStrategy_ = backoffStrategy, this.maxNumberOfRetry_ = -1, this.backoffNumber_ = 0, this.backoffDelay_ = 0, this.timeoutID_ = -1, this.handlers = {
                        backoff: this.onBackoff_.bind(this)
                    }
                }
                _dereq_("util").inherits(Backoff, events.EventEmitter), Backoff.prototype.failAfter = function(maxNumberOfRetry) {
                    precond.checkArgument(0 < maxNumberOfRetry, "Expected a maximum number of retry greater than 0 but got %s.", maxNumberOfRetry), this.maxNumberOfRetry_ = maxNumberOfRetry
                }, Backoff.prototype.backoff = function(err) {
                    precond.checkState(-1 === this.timeoutID_, "Backoff in progress."), this.backoffNumber_ === this.maxNumberOfRetry_ ? (this.emit("fail", err), this.reset()) : (this.backoffDelay_ = this.backoffStrategy_.next(), this.timeoutID_ = setTimeout(this.handlers.backoff, this.backoffDelay_), this.emit("backoff", this.backoffNumber_, this.backoffDelay_, err))
                }, Backoff.prototype.onBackoff_ = function() {
                    this.timeoutID_ = -1, this.emit("ready", this.backoffNumber_, this.backoffDelay_), this.backoffNumber_++
                }, Backoff.prototype.reset = function() {
                    this.backoffNumber_ = 0, this.backoffStrategy_.reset(), clearTimeout(this.timeoutID_), this.timeoutID_ = -1
                }, module.exports = Backoff
            }, {
                events: 214,
                precond: 222,
                util: 282
            }],
            60: [function(_dereq_, module, exports) {
                var events = _dereq_("events"),
                    precond = _dereq_("precond"),
                    util = _dereq_("util"),
                    Backoff = _dereq_("./backoff"),
                    FibonacciBackoffStrategy = _dereq_("./strategy/fibonacci");

                function FunctionCall(fn, args, callback) {
                    events.EventEmitter.call(this), precond.checkIsFunction(fn, "Expected fn to be a function."), precond.checkIsArray(args, "Expected args to be an array."), precond.checkIsFunction(callback, "Expected callback to be a function."), this.function_ = fn, this.arguments_ = args, this.callback_ = callback, this.lastResult_ = [], this.numRetries_ = 0, this.backoff_ = null, this.strategy_ = null, this.failAfter_ = -1, this.retryPredicate_ = FunctionCall.DEFAULT_RETRY_PREDICATE_, this.state_ = FunctionCall.State_.PENDING
                }
                util.inherits(FunctionCall, events.EventEmitter), FunctionCall.State_ = {
                    PENDING: 0,
                    RUNNING: 1,
                    COMPLETED: 2,
                    ABORTED: 3
                }, FunctionCall.DEFAULT_RETRY_PREDICATE_ = function(err) {
                    return !0
                }, FunctionCall.prototype.isPending = function() {
                    return this.state_ == FunctionCall.State_.PENDING
                }, FunctionCall.prototype.isRunning = function() {
                    return this.state_ == FunctionCall.State_.RUNNING
                }, FunctionCall.prototype.isCompleted = function() {
                    return this.state_ == FunctionCall.State_.COMPLETED
                }, FunctionCall.prototype.isAborted = function() {
                    return this.state_ == FunctionCall.State_.ABORTED
                }, FunctionCall.prototype.setStrategy = function(strategy) {
                    return precond.checkState(this.isPending(), "FunctionCall in progress."), this.strategy_ = strategy, this
                }, FunctionCall.prototype.retryIf = function(retryPredicate) {
                    return precond.checkState(this.isPending(), "FunctionCall in progress."), this.retryPredicate_ = retryPredicate, this
                }, FunctionCall.prototype.getLastResult = function() {
                    return this.lastResult_.concat()
                }, FunctionCall.prototype.getNumRetries = function() {
                    return this.numRetries_
                }, FunctionCall.prototype.failAfter = function(maxNumberOfRetry) {
                    return precond.checkState(this.isPending(), "FunctionCall in progress."), this.failAfter_ = maxNumberOfRetry, this
                }, FunctionCall.prototype.abort = function() {
                    this.isCompleted() || this.isAborted() || (this.isRunning() && this.backoff_.reset(), this.state_ = FunctionCall.State_.ABORTED, this.lastResult_ = [new Error("Backoff aborted.")], this.emit("abort"), this.doCallback_())
                }, FunctionCall.prototype.start = function(backoffFactory) {
                    precond.checkState(!this.isAborted(), "FunctionCall is aborted."), precond.checkState(this.isPending(), "FunctionCall already started.");
                    var strategy = this.strategy_ || new FibonacciBackoffStrategy;
                    this.backoff_ = backoffFactory ? backoffFactory(strategy) : new Backoff(strategy), this.backoff_.on("ready", this.doCall_.bind(this, !0)), this.backoff_.on("fail", this.doCallback_.bind(this)), this.backoff_.on("backoff", this.handleBackoff_.bind(this)), 0 < this.failAfter_ && this.backoff_.failAfter(this.failAfter_), this.state_ = FunctionCall.State_.RUNNING, this.doCall_(!1)
                }, FunctionCall.prototype.doCall_ = function(isRetry) {
                    isRetry && this.numRetries_++;
                    var eventArgs = ["call"].concat(this.arguments_);
                    events.EventEmitter.prototype.emit.apply(this, eventArgs);
                    var callback = this.handleFunctionCallback_.bind(this);
                    this.function_.apply(null, this.arguments_.concat(callback))
                }, FunctionCall.prototype.doCallback_ = function() {
                    this.callback_.apply(null, this.lastResult_)
                }, FunctionCall.prototype.handleFunctionCallback_ = function() {
                    if (!this.isAborted()) {
                        var args = Array.prototype.slice.call(arguments);
                        this.lastResult_ = args, events.EventEmitter.prototype.emit.apply(this, ["callback"].concat(args));
                        var err = args[0];
                        err && this.retryPredicate_(err) ? this.backoff_.backoff(err) : (this.state_ = FunctionCall.State_.COMPLETED, this.doCallback_())
                    }
                }, FunctionCall.prototype.handleBackoff_ = function(number, delay, err) {
                    this.emit("backoff", number, delay, err)
                }, module.exports = FunctionCall
            }, {
                "./backoff": 59,
                "./strategy/fibonacci": 62,
                events: 214,
                precond: 222,
                util: 282
            }],
            61: [function(_dereq_, module, exports) {
                var util = _dereq_("util"),
                    precond = _dereq_("precond"),
                    BackoffStrategy = _dereq_("./strategy");

                function ExponentialBackoffStrategy(options) {
                    BackoffStrategy.call(this, options), this.backoffDelay_ = 0, this.nextBackoffDelay_ = this.getInitialDelay(), this.factor_ = ExponentialBackoffStrategy.DEFAULT_FACTOR, options && void 0 !== options.factor && (precond.checkArgument(1 < options.factor, "Exponential factor should be greater than 1 but got %s.", options.factor), this.factor_ = options.factor)
                }
                util.inherits(ExponentialBackoffStrategy, BackoffStrategy), ExponentialBackoffStrategy.DEFAULT_FACTOR = 2, ExponentialBackoffStrategy.prototype.next_ = function() {
                    return this.backoffDelay_ = Math.min(this.nextBackoffDelay_, this.getMaxDelay()), this.nextBackoffDelay_ = this.backoffDelay_ * this.factor_, this.backoffDelay_
                }, ExponentialBackoffStrategy.prototype.reset_ = function() {
                    this.backoffDelay_ = 0, this.nextBackoffDelay_ = this.getInitialDelay()
                }, module.exports = ExponentialBackoffStrategy
            }, {
                "./strategy": 63,
                precond: 222,
                util: 282
            }],
            62: [function(_dereq_, module, exports) {
                var util = _dereq_("util"),
                    BackoffStrategy = _dereq_("./strategy");

                function FibonacciBackoffStrategy(options) {
                    BackoffStrategy.call(this, options), this.backoffDelay_ = 0, this.nextBackoffDelay_ = this.getInitialDelay()
                }
                util.inherits(FibonacciBackoffStrategy, BackoffStrategy), FibonacciBackoffStrategy.prototype.next_ = function() {
                    var backoffDelay = Math.min(this.nextBackoffDelay_, this.getMaxDelay());
                    return this.nextBackoffDelay_ += this.backoffDelay_, this.backoffDelay_ = backoffDelay
                }, FibonacciBackoffStrategy.prototype.reset_ = function() {
                    this.nextBackoffDelay_ = this.getInitialDelay(), this.backoffDelay_ = 0
                }, module.exports = FibonacciBackoffStrategy
            }, {
                "./strategy": 63,
                util: 282
            }],
            63: [function(_dereq_, module, exports) {
                _dereq_("events"), _dereq_("util");

                function isDef(value) {
                    return null != value
                }

                function BackoffStrategy(options) {
                    if (isDef((options = options || {}).initialDelay) && options.initialDelay < 1) throw new Error("The initial timeout must be greater than 0.");
                    if (isDef(options.maxDelay) && options.maxDelay < 1) throw new Error("The maximal timeout must be greater than 0.");
                    if (this.initialDelay_ = options.initialDelay || 100, this.maxDelay_ = options.maxDelay || 1e4, this.maxDelay_ <= this.initialDelay_) throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");
                    if (isDef(options.randomisationFactor) && (options.randomisationFactor < 0 || 1 < options.randomisationFactor)) throw new Error("The randomisation factor must be between 0 and 1.");
                    this.randomisationFactor_ = options.randomisationFactor || 0
                }
                BackoffStrategy.prototype.getMaxDelay = function() {
                    return this.maxDelay_
                }, BackoffStrategy.prototype.getInitialDelay = function() {
                    return this.initialDelay_
                }, BackoffStrategy.prototype.next = function() {
                    var backoffDelay = this.next_(),
                        randomisationMultiple = 1 + Math.random() * this.randomisationFactor_;
                    return Math.round(backoffDelay * randomisationMultiple)
                }, BackoffStrategy.prototype.next_ = function() {
                    throw new Error("BackoffStrategy.next_() unimplemented.")
                }, BackoffStrategy.prototype.reset = function() {
                    this.reset_()
                }, BackoffStrategy.prototype.reset_ = function() {
                    throw new Error("BackoffStrategy.reset_() unimplemented.")
                }, module.exports = BackoffStrategy
            }, {
                events: 214,
                util: 282
            }],
            64: [function(_dereq_, module, exports) {
                "use strict";
                exports.byteLength = function(b64) {
                    return 3 * b64.length / 4 - placeHoldersCount(b64)
                }, exports.toByteArray = function(b64) {
                    var i, l, tmp, placeHolders, arr, len = b64.length;
                    placeHolders = placeHoldersCount(b64), arr = new Arr(3 * len / 4 - placeHolders), l = 0 < placeHolders ? len - 4 : len;
                    var L = 0;
                    for (i = 0; i < l; i += 4) tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)], arr[L++] = tmp >> 16 & 255, arr[L++] = tmp >> 8 & 255, arr[L++] = 255 & tmp;
                    2 === placeHolders ? (tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4, arr[L++] = 255 & tmp) : 1 === placeHolders && (tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2, arr[L++] = tmp >> 8 & 255, arr[L++] = 255 & tmp);
                    return arr
                }, exports.fromByteArray = function(uint8) {
                    for (var tmp, len = uint8.length, extraBytes = len % 3, output = "", parts = [], i = 0, len2 = len - extraBytes; i < len2; i += 16383) parts.push(encodeChunk(uint8, i, len2 < i + 16383 ? len2 : i + 16383));
                    1 === extraBytes ? (tmp = uint8[len - 1], output += lookup[tmp >> 2], output += lookup[tmp << 4 & 63], output += "==") : 2 === extraBytes && (tmp = (uint8[len - 2] << 8) + uint8[len - 1], output += lookup[tmp >> 10], output += lookup[tmp >> 4 & 63], output += lookup[tmp << 2 & 63], output += "=");
                    return parts.push(output), parts.join("")
                };
                for (var lookup = [], revLookup = [], Arr = "undefined" != typeof Uint8Array ? Uint8Array : Array, code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i = 0, len = code.length; i < len; ++i) lookup[i] = code[i], revLookup[code.charCodeAt(i)] = i;

                function placeHoldersCount(b64) {
                    var len = b64.length;
                    if (0 < len % 4) throw new Error("Invalid string. Length must be a multiple of 4");
                    return "=" === b64[len - 2] ? 2 : "=" === b64[len - 1] ? 1 : 0
                }

                function encodeChunk(uint8, start, end) {
                    for (var tmp, num, output = [], i = start; i < end; i += 3) tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2], output.push(lookup[(num = tmp) >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[63 & num]);
                    return output.join("")
                }
                revLookup["-".charCodeAt(0)] = 62, revLookup["_".charCodeAt(0)] = 63
            }, {}],
            65: [function(_dereq_, module, exports) {
                (function(process, global) {
                    ! function(e) {
                        if ("object" == _typeof4(exports) && void 0 !== module) module.exports = e();
                        else if ("function" == typeof define && define.amd) define([], e);
                        else {
                            var f;
                            "undefined" != typeof window ? f = window : void 0 !== global ? f = global : "undefined" != typeof self && (f = self), f.Promise = e()
                        }
                    }(function() {
                        var define, module, exports;
                        return function e(t, n, r) {
                            function s(o, u) {
                                if (!n[o]) {
                                    if (!t[o]) {
                                        var a = "function" == typeof _dereq_ && _dereq_;
                                        if (!u && a) return a(o, !0);
                                        if (i) return i(o, !0);
                                        var f = new Error("Cannot find module '" + o + "'");
                                        throw f.code = "MODULE_NOT_FOUND", f
                                    }
                                    var l = n[o] = {
                                        exports: {}
                                    };
                                    t[o][0].call(l.exports, function(e) {
                                        var n = t[o][1][e];
                                        return s(n || e)
                                    }, l, l.exports, e, t, n, r)
                                }
                                return n[o].exports
                            }
                            for (var i = "function" == typeof _dereq_ && _dereq_, o = 0; o < r.length; o++) s(r[o]);
                            return s
                        }({
                            1: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise) {
                                    var SomePromiseArray = Promise._SomePromiseArray;

                                    function any(promises) {
                                        var ret = new SomePromiseArray(promises),
                                            promise = ret.promise();
                                        return ret.setHowMany(1), ret.setUnwrap(), ret.init(), promise
                                    }
                                    Promise.any = function(promises) {
                                        return any(promises)
                                    }, Promise.prototype.any = function() {
                                        return any(this)
                                    }
                                }
                            }, {}],
                            2: [function(_dereq_, module, exports) {
                                "use strict";
                                var firstLineError;
                                try {
                                    throw new Error
                                } catch (e) {
                                    firstLineError = e
                                }
                                var schedule = _dereq_("./schedule.js"),
                                    Queue = _dereq_("./queue.js"),
                                    util = _dereq_("./util.js");

                                function Async() {
                                    this._isTickUsed = !1, this._lateQueue = new Queue(16), this._normalQueue = new Queue(16), this._trampolineEnabled = !0;
                                    var self = this;
                                    this.drainQueues = function() {
                                        self._drainQueues()
                                    }, this._schedule = schedule.isStatic ? schedule(this.drainQueues) : schedule
                                }

                                function AsyncInvokeLater(fn, receiver, arg) {
                                    this._lateQueue.push(fn, receiver, arg), this._queueTick()
                                }

                                function AsyncInvoke(fn, receiver, arg) {
                                    this._normalQueue.push(fn, receiver, arg), this._queueTick()
                                }

                                function AsyncSettlePromises(promise) {
                                    this._normalQueue._pushOne(promise), this._queueTick()
                                }
                                Async.prototype.disableTrampolineIfNecessary = function() {
                                    util.hasDevTools && (this._trampolineEnabled = !1)
                                }, Async.prototype.enableTrampoline = function() {
                                    this._trampolineEnabled || (this._trampolineEnabled = !0, this._schedule = function(fn) {
                                        setTimeout(fn, 0)
                                    })
                                }, Async.prototype.haveItemsQueued = function() {
                                    return 0 < this._normalQueue.length()
                                }, Async.prototype.throwLater = function(fn, arg) {
                                    if (1 === arguments.length && (arg = fn, fn = function() {
                                            throw arg
                                        }), "undefined" != typeof setTimeout) setTimeout(function() {
                                        fn(arg)
                                    }, 0);
                                    else try {
                                        this._schedule(function() {
                                            fn(arg)
                                        })
                                    } catch (e) {
                                        throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")
                                    }
                                }, Async.prototype.settlePromises = util.hasDevTools ? (schedule.isStatic && (schedule = function(fn) {
                                    setTimeout(fn, 0)
                                }), Async.prototype.invokeLater = function(fn, receiver, arg) {
                                    this._trampolineEnabled ? AsyncInvokeLater.call(this, fn, receiver, arg) : this._schedule(function() {
                                        setTimeout(function() {
                                            fn.call(receiver, arg)
                                        }, 100)
                                    })
                                }, Async.prototype.invoke = function(fn, receiver, arg) {
                                    this._trampolineEnabled ? AsyncInvoke.call(this, fn, receiver, arg) : this._schedule(function() {
                                        fn.call(receiver, arg)
                                    })
                                }, function(promise) {
                                    this._trampolineEnabled ? AsyncSettlePromises.call(this, promise) : this._schedule(function() {
                                        promise._settlePromises()
                                    })
                                }) : (Async.prototype.invokeLater = AsyncInvokeLater, Async.prototype.invoke = AsyncInvoke, AsyncSettlePromises), Async.prototype.invokeFirst = function(fn, receiver, arg) {
                                    this._normalQueue.unshift(fn, receiver, arg), this._queueTick()
                                }, Async.prototype._drainQueue = function(queue) {
                                    for (; 0 < queue.length();) {
                                        var fn = queue.shift();
                                        if ("function" == typeof fn) {
                                            var receiver = queue.shift(),
                                                arg = queue.shift();
                                            fn.call(receiver, arg)
                                        } else fn._settlePromises()
                                    }
                                }, Async.prototype._drainQueues = function() {
                                    this._drainQueue(this._normalQueue), this._reset(), this._drainQueue(this._lateQueue)
                                }, Async.prototype._queueTick = function() {
                                    this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues))
                                }, Async.prototype._reset = function() {
                                    this._isTickUsed = !1
                                }, module.exports = new Async, module.exports.firstLineError = firstLineError
                            }, {
                                "./queue.js": 28,
                                "./schedule.js": 31,
                                "./util.js": 38
                            }],
                            3: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL, tryConvertToPromise) {
                                    var rejectThis = function(_, e) {
                                            this._reject(e)
                                        },
                                        targetRejected = function(e, context) {
                                            context.promiseRejectionQueued = !0, context.bindingPromise._then(rejectThis, rejectThis, null, this, e)
                                        },
                                        bindingResolved = function(thisArg, context) {
                                            this._isPending() && this._resolveCallback(context.target)
                                        },
                                        bindingRejected = function(e, context) {
                                            context.promiseRejectionQueued || this._reject(e)
                                        };
                                    Promise.prototype.bind = function(thisArg) {
                                        var maybePromise = tryConvertToPromise(thisArg),
                                            ret = new Promise(INTERNAL);
                                        ret._propagateFrom(this, 1);
                                        var target = this._target();
                                        if (ret._setBoundTo(maybePromise), maybePromise instanceof Promise) {
                                            var context = {
                                                promiseRejectionQueued: !1,
                                                promise: ret,
                                                target: target,
                                                bindingPromise: maybePromise
                                            };
                                            target._then(INTERNAL, targetRejected, ret._progress, ret, context), maybePromise._then(bindingResolved, bindingRejected, ret._progress, ret, context)
                                        } else ret._resolveCallback(target);
                                        return ret
                                    }, Promise.prototype._setBoundTo = function(obj) {
                                        void 0 !== obj ? (this._bitField = 131072 | this._bitField, this._boundTo = obj) : this._bitField = -131073 & this._bitField
                                    }, Promise.prototype._isBound = function() {
                                        return 131072 == (131072 & this._bitField)
                                    }, Promise.bind = function(thisArg, value) {
                                        var maybePromise = tryConvertToPromise(thisArg),
                                            ret = new Promise(INTERNAL);
                                        return ret._setBoundTo(maybePromise), maybePromise instanceof Promise ? maybePromise._then(function() {
                                            ret._resolveCallback(value)
                                        }, ret._reject, ret._progress, ret, null) : ret._resolveCallback(value), ret
                                    }
                                }
                            }, {}],
                            4: [function(_dereq_, module, exports) {
                                "use strict";
                                var old;
                                "undefined" != typeof Promise && (old = Promise);
                                var bluebird = _dereq_("./promise.js")();
                                bluebird.noConflict = function() {
                                    try {
                                        Promise === bluebird && (Promise = old)
                                    } catch (e) {}
                                    return bluebird
                                }, module.exports = bluebird
                            }, {
                                "./promise.js": 23
                            }],
                            5: [function(_dereq_, module, exports) {
                                "use strict";
                                var cr = Object.create;
                                if (cr) {
                                    var callerCache = cr(null),
                                        getterCache = cr(null);
                                    callerCache[" size"] = getterCache[" size"] = 0
                                }
                                module.exports = function(Promise) {
                                    var getGetter, util = _dereq_("./util.js"),
                                        canEvaluate = util.canEvaluate;
                                    util.isIdentifier;

                                    function ensureMethod(obj, methodName) {
                                        var fn;
                                        if (null != obj && (fn = obj[methodName]), "function" == typeof fn) return fn;
                                        var message = "Object " + util.classString(obj) + " has no method '" + util.toString(methodName) + "'";
                                        throw new Promise.TypeError(message)
                                    }

                                    function caller(obj) {
                                        return ensureMethod(obj, this.pop()).apply(obj, this)
                                    }

                                    function namedGetter(obj) {
                                        return obj[this]
                                    }

                                    function indexedGetter(obj) {
                                        var index = +this;
                                        return index < 0 && (index = Math.max(0, index + obj.length)), obj[index]
                                    }
                                    Promise.prototype.call = function(methodName) {
                                        for (var $_len = arguments.length, args = new Array($_len - 1), $_i = 1; $_i < $_len; ++$_i) args[$_i - 1] = arguments[$_i];
                                        return args.push(methodName), this._then(caller, void 0, void 0, args, void 0)
                                    }, Promise.prototype.get = function(propertyName) {
                                        var getter;
                                        if ("number" == typeof propertyName) getter = indexedGetter;
                                        else if (canEvaluate) {
                                            var maybeGetter = getGetter(propertyName);
                                            getter = null !== maybeGetter ? maybeGetter : namedGetter
                                        } else getter = namedGetter;
                                        return this._then(getter, void 0, void 0, propertyName, void 0)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            6: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise) {
                                    var errors = _dereq_("./errors.js"),
                                        async = _dereq_("./async.js"), CancellationError = errors.CancellationError;
                                    Promise.prototype._cancel = function(reason) {
                                        if (!this.isCancellable()) return this;
                                        for (var parent, promiseToReject = this; void 0 !== (parent = promiseToReject._cancellationParent) && parent.isCancellable();) promiseToReject = parent;
                                        this._unsetCancellable(), promiseToReject._target()._rejectCallback(reason, !1, !0)
                                    }, Promise.prototype.cancel = function(reason) {
                                        return this.isCancellable() && (void 0 === reason && (reason = new CancellationError), async.invokeLater(this._cancel, this, reason)), this
                                    }, Promise.prototype.cancellable = function() {
                                        return this._cancellable() || (async.enableTrampoline(), this._setCancellable(), this._cancellationParent = void 0), this
                                    }, Promise.prototype.uncancellable = function() {
                                        var ret = this.then();
                                        return ret._unsetCancellable(), ret
                                    }, Promise.prototype.fork = function(didFulfill, didReject, didProgress) {
                                        var ret = this._then(didFulfill, didReject, didProgress, void 0, void 0);
                                        return ret._setCancellable(), ret._cancellationParent = void 0, ret
                                    }
                                }
                            }, {
                                "./async.js": 2,
                                "./errors.js": 13
                            }],
                            7: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function() {
                                    var warn, async = _dereq_("./async.js"), util = _dereq_("./util.js"), bluebirdFramePattern = /[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/, stackFramePattern = null, formatStack = null, indentStackFrames = !1;

                                    function CapturedTrace(parent) {
                                        this._parent = parent;
                                        var length = this._length = 1 + (void 0 === parent ? 0 : parent._length);
                                        captureStackTrace(this, CapturedTrace), 32 < length && this.uncycle()
                                    }

                                    function cleanStack(stack) {
                                        for (var ret = [], i = 0; i < stack.length; ++i) {
                                            var line = stack[i],
                                                isTraceLine = stackFramePattern.test(line) || "    (No stack trace)" === line,
                                                isInternalFrame = isTraceLine && shouldIgnore(line);
                                            isTraceLine && !isInternalFrame && (indentStackFrames && " " !== line.charAt(0) && (line = "    " + line), ret.push(line))
                                        }
                                        return ret
                                    }

                                    function formatNonError(obj) {
                                        var str;
                                        if ("function" == typeof obj) str = "[function " + (obj.name || "anonymous") + "]";
                                        else {
                                            str = obj.toString();
                                            if (/\[object [a-zA-Z0-9$_]+\]/.test(str)) try {
                                                str = JSON.stringify(obj)
                                            } catch (e) {}
                                            0 === str.length && (str = "(empty array)")
                                        }
                                        return "(<" + function(str) {
                                            if (str.length < 41) return str;
                                            return str.substr(0, 38) + "..."
                                        }(str) + ">, no stack trace)"
                                    }
                                    util.inherits(CapturedTrace, Error), CapturedTrace.prototype.uncycle = function() {
                                        var length = this._length;
                                        if (!(length < 2)) {
                                            for (var nodes = [], stackToIndex = {}, i = 0, node = this; void 0 !== node; ++i) nodes.push(node), node = node._parent;
                                            for (i = (length = this._length = i) - 1; 0 <= i; --i) {
                                                var stack = nodes[i].stack;
                                                void 0 === stackToIndex[stack] && (stackToIndex[stack] = i)
                                            }
                                            for (i = 0; i < length; ++i) {
                                                var index = stackToIndex[nodes[i].stack];
                                                if (void 0 !== index && index !== i) {
                                                    0 < index && (nodes[index - 1]._parent = void 0, nodes[index - 1]._length = 1), nodes[i]._parent = void 0, nodes[i]._length = 1;
                                                    var cycleEdgeNode = 0 < i ? nodes[i - 1] : this;
                                                    index < length - 1 ? (cycleEdgeNode._parent = nodes[index + 1], cycleEdgeNode._parent.uncycle(), cycleEdgeNode._length = cycleEdgeNode._parent._length + 1) : (cycleEdgeNode._parent = void 0, cycleEdgeNode._length = 1);
                                                    for (var currentChildLength = cycleEdgeNode._length + 1, j = i - 2; 0 <= j; --j) nodes[j]._length = currentChildLength, currentChildLength++;
                                                    return
                                                }
                                            }
                                        }
                                    }, CapturedTrace.prototype.parent = function() {
                                        return this._parent
                                    }, CapturedTrace.prototype.hasParent = function() {
                                        return void 0 !== this._parent
                                    }, CapturedTrace.prototype.attachExtraTrace = function(error) {
                                        if (!error.__stackCleaned__) {
                                            this.uncycle();
                                            for (var parsed = CapturedTrace.parseStackAndMessage(error), message = parsed.message, stacks = [parsed.stack], trace = this; void 0 !== trace;) stacks.push(cleanStack(trace.stack.split("\n"))), trace = trace._parent;
                                            ! function(stacks) {
                                                for (var current = stacks[0], i = 1; i < stacks.length; ++i) {
                                                    for (var prev = stacks[i], currentLastIndex = current.length - 1, currentLastLine = current[currentLastIndex], commonRootMeetPoint = -1, j = prev.length - 1; 0 <= j; --j)
                                                        if (prev[j] === currentLastLine) {
                                                            commonRootMeetPoint = j;
                                                            break
                                                        } for (var j = commonRootMeetPoint; 0 <= j; --j) {
                                                        var line = prev[j];
                                                        if (current[currentLastIndex] !== line) break;
                                                        current.pop(), currentLastIndex--
                                                    }
                                                    current = prev
                                                }
                                            }(stacks),
                                            function(stacks) {
                                                for (var i = 0; i < stacks.length; ++i)(0 === stacks[i].length || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) && (stacks.splice(i, 1), i--)
                                            }(stacks), util.notEnumerableProp(error, "stack", function(message, stacks) {
                                                for (var i = 0; i < stacks.length - 1; ++i) stacks[i].push("From previous event:"), stacks[i] = stacks[i].join("\n");
                                                i < stacks.length && (stacks[i] = stacks[i].join("\n"));
                                                return message + "\n" + stacks.join("\n")
                                            }(message, stacks)), util.notEnumerableProp(error, "__stackCleaned__", !0)
                                        }
                                    }, CapturedTrace.parseStackAndMessage = function(error) {
                                        var stack = error.stack;
                                        return {
                                            message: error.toString(),
                                            stack: cleanStack(stack = "string" == typeof stack && 0 < stack.length ? function(error) {
                                                for (var stack = error.stack.replace(/\s+$/g, "").split("\n"), i = 0; i < stack.length; ++i) {
                                                    var line = stack[i];
                                                    if ("    (No stack trace)" === line || stackFramePattern.test(line)) break
                                                }
                                                return 0 < i && (stack = stack.slice(i)), stack
                                            }(error) : ["    (No stack trace)"])
                                        }
                                    }, CapturedTrace.formatAndLogError = function(error, title) {
                                        if ("undefined" != typeof console) {
                                            var message;
                                            if ("object" === _typeof4(error) || "function" == typeof error) {
                                                var stack = error.stack;
                                                message = title + formatStack(stack, error)
                                            } else message = title + String(error);
                                            "function" == typeof warn ? warn(message) : "function" != typeof console.log && "object" !== _typeof4(console.log) || console.log(message)
                                        }
                                    }, CapturedTrace.unhandledRejection = function(reason) {
                                        CapturedTrace.formatAndLogError(reason, "^--- With additional stack trace: ")
                                    }, CapturedTrace.isSupported = function() {
                                        return "function" == typeof captureStackTrace
                                    }, CapturedTrace.fireRejectionEvent = function(name, localHandler, reason, promise) {
                                        var localEventFired = !1;
                                        try {
                                            "function" == typeof localHandler && (localEventFired = !0, "rejectionHandled" === name ? localHandler(promise) : localHandler(reason, promise))
                                        } catch (e) {
                                            async.throwLater(e)
                                        }
                                        var globalEventFired = !1;
                                        try {
                                            globalEventFired = fireGlobalEvent(name, reason, promise)
                                        } catch (e) {
                                            globalEventFired = !0, async.throwLater(e)
                                        }
                                        var domEventFired = !1;
                                        if (fireDomEvent) try {
                                            domEventFired = fireDomEvent(name.toLowerCase(), {
                                                reason: reason,
                                                promise: promise
                                            })
                                        } catch (e) {
                                            domEventFired = !0, async.throwLater(e)
                                        }
                                        globalEventFired || localEventFired || domEventFired || "unhandledRejection" !== name || CapturedTrace.formatAndLogError(reason, "Unhandled rejection ")
                                    };
                                    var shouldIgnore = function() {
                                            return !1
                                        },
                                        parseLineInfoRegex = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;

                                    function parseLineInfo(line) {
                                        var matches = line.match(parseLineInfoRegex);
                                        if (matches) return {
                                            fileName: matches[1],
                                            line: parseInt(matches[2], 10)
                                        }
                                    }
                                    CapturedTrace.setBounds = function(firstLineError, lastLineError) {
                                        if (CapturedTrace.isSupported()) {
                                            for (var firstFileName, lastFileName, firstStackLines = firstLineError.stack.split("\n"), lastStackLines = lastLineError.stack.split("\n"), firstIndex = -1, lastIndex = -1, i = 0; i < firstStackLines.length; ++i) {
                                                if (result = parseLineInfo(firstStackLines[i])) {
                                                    firstFileName = result.fileName, firstIndex = result.line;
                                                    break
                                                }
                                            }
                                            for (i = 0; i < lastStackLines.length; ++i) {
                                                var result;
                                                if (result = parseLineInfo(lastStackLines[i])) {
                                                    lastFileName = result.fileName, lastIndex = result.line;
                                                    break
                                                }
                                            }
                                            firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || lastIndex <= firstIndex || (shouldIgnore = function(line) {
                                                if (bluebirdFramePattern.test(line)) return !0;
                                                var info = parseLineInfo(line);
                                                return !!(info && info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex)
                                            })
                                        }
                                    };
                                    var fireDomEvent, captureStackTrace = function() {
                                            var v8stackFramePattern = /^\s*at\s*/,
                                                v8stackFormatter = function(stack, error) {
                                                    return "string" == typeof stack ? stack : void 0 !== error.name && void 0 !== error.message ? error.toString() : formatNonError(error)
                                                };
                                            if ("number" == typeof Error.stackTraceLimit && "function" == typeof Error.captureStackTrace) {
                                                Error.stackTraceLimit = Error.stackTraceLimit + 6, stackFramePattern = v8stackFramePattern, formatStack = v8stackFormatter;
                                                var captureStackTrace = Error.captureStackTrace;
                                                return shouldIgnore = function(line) {
                                                        return bluebirdFramePattern.test(line)
                                                    },
                                                    function(receiver, ignoreUntil) {
                                                        Error.stackTraceLimit = Error.stackTraceLimit + 6, captureStackTrace(receiver, ignoreUntil), Error.stackTraceLimit = Error.stackTraceLimit - 6
                                                    }
                                            }
                                            var hasStackAfterThrow, err = new Error;
                                            if ("string" == typeof err.stack && 0 <= err.stack.split("\n")[0].indexOf("stackDetection@")) return stackFramePattern = /@/, formatStack = v8stackFormatter, indentStackFrames = !0,
                                                function(o) {
                                                    o.stack = (new Error).stack
                                                };
                                            try {
                                                throw new Error
                                            } catch (e) {
                                                hasStackAfterThrow = "stack" in e
                                            }
                                            return "stack" in err || !hasStackAfterThrow || "number" != typeof Error.stackTraceLimit ? (formatStack = function(stack, error) {
                                                return "string" == typeof stack ? stack : "object" !== _typeof4(error) && "function" != typeof error || void 0 === error.name || void 0 === error.message ? formatNonError(error) : error.toString()
                                            }, null) : (stackFramePattern = v8stackFramePattern, formatStack = v8stackFormatter, function(o) {
                                                Error.stackTraceLimit = Error.stackTraceLimit + 6;
                                                try {
                                                    throw new Error
                                                } catch (e) {
                                                    o.stack = e.stack
                                                }
                                                Error.stackTraceLimit = Error.stackTraceLimit - 6
                                            })
                                        }(),
                                        fireGlobalEvent = function() {
                                            if (util.isNode) return function(name, reason, promise) {
                                                return "rejectionHandled" === name ? process.emit(name, promise) : process.emit(name, reason, promise)
                                            };
                                            var customEventWorks = !1,
                                                anyEventWorks = !0;
                                            try {
                                                var ev = new self.CustomEvent("test");
                                                customEventWorks = ev instanceof CustomEvent
                                            } catch (e) {}
                                            if (!customEventWorks) try {
                                                var event = document.createEvent("CustomEvent");
                                                event.initCustomEvent("testingtheevent", !1, !0, {}), self.dispatchEvent(event)
                                            } catch (e) {
                                                anyEventWorks = !1
                                            }
                                            anyEventWorks && (fireDomEvent = function(type, detail) {
                                                var event;
                                                return customEventWorks ? event = new self.CustomEvent(type, {
                                                    detail: detail,
                                                    bubbles: !1,
                                                    cancelable: !0
                                                }) : self.dispatchEvent && (event = document.createEvent("CustomEvent")).initCustomEvent(type, !1, !0, detail), !!event && !self.dispatchEvent(event)
                                            });
                                            var toWindowMethodNameMap = {};
                                            return toWindowMethodNameMap.unhandledRejection = "onunhandledRejection".toLowerCase(), toWindowMethodNameMap.rejectionHandled = "onrejectionHandled".toLowerCase(),
                                                function(name, reason, promise) {
                                                    var methodName = toWindowMethodNameMap[name],
                                                        method = self[methodName];
                                                    return !!method && ("rejectionHandled" === name ? method.call(self, promise) : method.call(self, reason, promise), !0)
                                                }
                                        }();
                                    return "undefined" != typeof console && void 0 !== console.warn && (warn = function(message) {
                                        console.warn(message)
                                    }, util.isNode && process.stderr.isTTY ? warn = function(message) {
                                        process.stderr.write("[31m" + message + "[39m\n")
                                    } : util.isNode || "string" != typeof(new Error).stack || (warn = function(message) {
                                        console.warn("%c" + message, "color: red")
                                    })), CapturedTrace
                                }
                            }, {
                                "./async.js": 2,
                                "./util.js": 38
                            }],
                            8: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(NEXT_FILTER) {
                                    var util = _dereq_("./util.js"),
                                        errors = _dereq_("./errors.js"),
                                        tryCatch = util.tryCatch,
                                        errorObj = util.errorObj,
                                        keys = _dereq_("./es5.js").keys,
                                        TypeError = errors.TypeError;

                                    function CatchFilter(instances, callback, promise) {
                                        this._instances = instances, this._callback = callback, this._promise = promise
                                    }

                                    function safePredicate(predicate, e) {
                                        var safeObject = {},
                                            retfilter = tryCatch(predicate).call(safeObject, e);
                                        return retfilter === errorObj ? retfilter : keys(safeObject).length ? (errorObj.e = new TypeError("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"), errorObj) : retfilter
                                    }
                                    return CatchFilter.prototype.doFilter = function(e) {
                                        for (var cb = this._callback, boundTo = this._promise._boundValue(), i = 0, len = this._instances.length; i < len; ++i) {
                                            var item = this._instances[i],
                                                itemIsErrorType = item === Error || null != item && item.prototype instanceof Error;
                                            if (itemIsErrorType && e instanceof item) return (ret = tryCatch(cb).call(boundTo, e)) === errorObj ? (NEXT_FILTER.e = ret.e, NEXT_FILTER) : ret;
                                            if ("function" == typeof item && !itemIsErrorType) {
                                                var ret, shouldHandle = safePredicate(item, e);
                                                if (shouldHandle === errorObj) {
                                                    e = errorObj.e;
                                                    break
                                                }
                                                if (shouldHandle) return (ret = tryCatch(cb).call(boundTo, e)) === errorObj ? (NEXT_FILTER.e = ret.e, NEXT_FILTER) : ret
                                            }
                                        }
                                        return NEXT_FILTER.e = e, NEXT_FILTER
                                    }, CatchFilter
                                }
                            }, {
                                "./errors.js": 13,
                                "./es5.js": 14,
                                "./util.js": 38
                            }],
                            9: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, CapturedTrace, isDebugging) {
                                    var contextStack = [];

                                    function Context() {
                                        this._trace = new CapturedTrace(peekContext())
                                    }

                                    function peekContext() {
                                        var lastIndex = contextStack.length - 1;
                                        if (0 <= lastIndex) return contextStack[lastIndex]
                                    }
                                    return Context.prototype._pushContext = function() {
                                            isDebugging() && void 0 !== this._trace && contextStack.push(this._trace)
                                        }, Context.prototype._popContext = function() {
                                            isDebugging() && void 0 !== this._trace && contextStack.pop()
                                        }, Promise.prototype._peekContext = peekContext, Promise.prototype._pushContext = Context.prototype._pushContext, Promise.prototype._popContext = Context.prototype._popContext,
                                        function() {
                                            if (isDebugging()) return new Context
                                        }
                                }
                            }, {}],
                            10: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, CapturedTrace) {
                                    var unhandledRejectionHandled, possiblyUnhandledRejection, getDomain = Promise._getDomain,
                                        async = _dereq_("./async.js"), Warning = _dereq_("./errors.js").Warning, util = _dereq_("./util.js"), canAttachTrace = util.canAttachTrace, debugging = util.isNode && (!!process.env.BLUEBIRD_DEBUG || "development" === process.env.NODE_ENV);
                                    return util.isNode && 0 == process.env.BLUEBIRD_DEBUG && (debugging = !1), debugging && async.disableTrampolineIfNecessary(), Promise.prototype._ignoreRejections = function() {
                                            this._unsetRejectionIsUnhandled(), this._bitField = 16777216 | this._bitField
                                        }, Promise.prototype._ensurePossibleRejectionHandled = function() {
                                            0 == (16777216 & this._bitField) && (this._setRejectionIsUnhandled(), async.invokeLater(this._notifyUnhandledRejection, this, void 0))
                                        }, Promise.prototype._notifyUnhandledRejectionIsHandled = function() {
                                            CapturedTrace.fireRejectionEvent("rejectionHandled", unhandledRejectionHandled, void 0, this)
                                        }, Promise.prototype._notifyUnhandledRejection = function() {
                                            if (this._isRejectionUnhandled()) {
                                                var reason = this._getCarriedStackTrace() || this._settledValue;
                                                this._setUnhandledRejectionIsNotified(), CapturedTrace.fireRejectionEvent("unhandledRejection", possiblyUnhandledRejection, reason, this)
                                            }
                                        }, Promise.prototype._setUnhandledRejectionIsNotified = function() {
                                            this._bitField = 524288 | this._bitField
                                        }, Promise.prototype._unsetUnhandledRejectionIsNotified = function() {
                                            this._bitField = -524289 & this._bitField
                                        }, Promise.prototype._isUnhandledRejectionNotified = function() {
                                            return 0 < (524288 & this._bitField)
                                        }, Promise.prototype._setRejectionIsUnhandled = function() {
                                            this._bitField = 2097152 | this._bitField
                                        }, Promise.prototype._unsetRejectionIsUnhandled = function() {
                                            this._bitField = -2097153 & this._bitField, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled())
                                        }, Promise.prototype._isRejectionUnhandled = function() {
                                            return 0 < (2097152 & this._bitField)
                                        }, Promise.prototype._setCarriedStackTrace = function(capturedTrace) {
                                            this._bitField = 1048576 | this._bitField, this._fulfillmentHandler0 = capturedTrace
                                        }, Promise.prototype._isCarryingStackTrace = function() {
                                            return 0 < (1048576 & this._bitField)
                                        }, Promise.prototype._getCarriedStackTrace = function() {
                                            return this._isCarryingStackTrace() ? this._fulfillmentHandler0 : void 0
                                        }, Promise.prototype._captureStackTrace = function() {
                                            return debugging && (this._trace = new CapturedTrace(this._peekContext())), this
                                        }, Promise.prototype._attachExtraTrace = function(error, ignoreSelf) {
                                            if (debugging && canAttachTrace(error)) {
                                                var trace = this._trace;
                                                if (void 0 !== trace && ignoreSelf && (trace = trace._parent), void 0 !== trace) trace.attachExtraTrace(error);
                                                else if (!error.__stackCleaned__) {
                                                    var parsed = CapturedTrace.parseStackAndMessage(error);
                                                    util.notEnumerableProp(error, "stack", parsed.message + "\n" + parsed.stack.join("\n")), util.notEnumerableProp(error, "__stackCleaned__", !0)
                                                }
                                            }
                                        }, Promise.prototype._warn = function(message) {
                                            var warning = new Warning(message),
                                                ctx = this._peekContext();
                                            if (ctx) ctx.attachExtraTrace(warning);
                                            else {
                                                var parsed = CapturedTrace.parseStackAndMessage(warning);
                                                warning.stack = parsed.message + "\n" + parsed.stack.join("\n")
                                            }
                                            CapturedTrace.formatAndLogError(warning, "")
                                        }, Promise.onPossiblyUnhandledRejection = function(fn) {
                                            var domain = getDomain();
                                            possiblyUnhandledRejection = "function" == typeof fn ? null === domain ? fn : domain.bind(fn) : void 0
                                        }, Promise.onUnhandledRejectionHandled = function(fn) {
                                            var domain = getDomain();
                                            unhandledRejectionHandled = "function" == typeof fn ? null === domain ? fn : domain.bind(fn) : void 0
                                        }, Promise.longStackTraces = function() {
                                            if (async.haveItemsQueued() && !1 === debugging) throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");
                                            (debugging = CapturedTrace.isSupported()) && async.disableTrampolineIfNecessary()
                                        }, Promise.hasLongStackTraces = function() {
                                            return debugging && CapturedTrace.isSupported()
                                        }, CapturedTrace.isSupported() || (Promise.longStackTraces = function() {}, debugging = !1),
                                        function() {
                                            return debugging
                                        }
                                }
                            }, {
                                "./async.js": 2,
                                "./errors.js": 13,
                                "./util.js": 38
                            }],
                            11: [function(_dereq_, module, exports) {
                                "use strict";
                                var isPrimitive = _dereq_("./util.js").isPrimitive;
                                module.exports = function(Promise) {
                                    var returner = function() {
                                            return this
                                        },
                                        thrower = function() {
                                            throw this
                                        },
                                        returnUndefined = function() {},
                                        throwUndefined = function() {
                                            throw void 0
                                        },
                                        wrapper = function(value, action) {
                                            return 1 === action ? function() {
                                                throw value
                                            } : 2 === action ? function() {
                                                return value
                                            } : void 0
                                        };
                                    Promise.prototype.return = Promise.prototype.thenReturn = function(value) {
                                        return void 0 === value ? this.then(returnUndefined) : isPrimitive(value) ? this._then(wrapper(value, 2), void 0, void 0, void 0, void 0) : (value instanceof Promise && value._ignoreRejections(), this._then(returner, void 0, void 0, value, void 0))
                                    }, Promise.prototype.throw = Promise.prototype.thenThrow = function(reason) {
                                        return void 0 === reason ? this.then(throwUndefined) : isPrimitive(reason) ? this._then(wrapper(reason, 1), void 0, void 0, void 0, void 0) : this._then(thrower, void 0, void 0, reason, void 0)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            12: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL) {
                                    var PromiseReduce = Promise.reduce;
                                    Promise.prototype.each = function(fn) {
                                        return PromiseReduce(this, fn, null, INTERNAL)
                                    }, Promise.each = function(promises, fn) {
                                        return PromiseReduce(promises, fn, null, INTERNAL)
                                    }
                                }
                            }, {}],
                            13: [function(_dereq_, module, exports) {
                                "use strict";
                                var _TypeError, _RangeError, es5 = _dereq_("./es5.js"),
                                    Objectfreeze = es5.freeze,
                                    util = _dereq_("./util.js"),
                                    inherits = util.inherits,
                                    notEnumerableProp = util.notEnumerableProp;

                                function subError(nameProperty, defaultMessage) {
                                    function SubError(message) {
                                        if (!(this instanceof SubError)) return new SubError(message);
                                        notEnumerableProp(this, "message", "string" == typeof message ? message : defaultMessage), notEnumerableProp(this, "name", nameProperty), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this)
                                    }
                                    return inherits(SubError, Error), SubError
                                }
                                var Warning = subError("Warning", "warning"),
                                    CancellationError = subError("CancellationError", "cancellation error"),
                                    TimeoutError = subError("TimeoutError", "timeout error"),
                                    AggregateError = subError("AggregateError", "aggregate error");
                                try {
                                    _TypeError = TypeError, _RangeError = RangeError
                                } catch (e) {
                                    _TypeError = subError("TypeError", "type error"), _RangeError = subError("RangeError", "range error")
                                }
                                for (var methods = "join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "), i = 0; i < methods.length; ++i) "function" == typeof Array.prototype[methods[i]] && (AggregateError.prototype[methods[i]] = Array.prototype[methods[i]]);
                                es5.defineProperty(AggregateError.prototype, "length", {
                                    value: 0,
                                    configurable: !1,
                                    writable: !0,
                                    enumerable: !0
                                }), AggregateError.prototype.isOperational = !0;
                                var level = 0;

                                function OperationalError(message) {
                                    if (!(this instanceof OperationalError)) return new OperationalError(message);
                                    notEnumerableProp(this, "name", "OperationalError"), notEnumerableProp(this, "message", message), this.cause = message, this.isOperational = !0, message instanceof Error ? (notEnumerableProp(this, "message", message.message), notEnumerableProp(this, "stack", message.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor)
                                }
                                AggregateError.prototype.toString = function() {
                                    var indent = Array(4 * level + 1).join(" "),
                                        ret = "\n" + indent + "AggregateError of:\n";
                                    level++, indent = Array(4 * level + 1).join(" ");
                                    for (var i = 0; i < this.length; ++i) {
                                        for (var str = this[i] === this ? "[Circular AggregateError]" : this[i] + "", lines = str.split("\n"), j = 0; j < lines.length; ++j) lines[j] = indent + lines[j];
                                        ret += (str = lines.join("\n")) + "\n"
                                    }
                                    return level--, ret
                                }, inherits(OperationalError, Error);
                                var errorTypes = Error.__BluebirdErrorTypes__;
                                errorTypes || (errorTypes = Objectfreeze({
                                    CancellationError: CancellationError,
                                    TimeoutError: TimeoutError,
                                    OperationalError: OperationalError,
                                    RejectionError: OperationalError,
                                    AggregateError: AggregateError
                                }), notEnumerableProp(Error, "__BluebirdErrorTypes__", errorTypes)), module.exports = {
                                    Error: Error,
                                    TypeError: _TypeError,
                                    RangeError: _RangeError,
                                    CancellationError: errorTypes.CancellationError,
                                    OperationalError: errorTypes.OperationalError,
                                    TimeoutError: errorTypes.TimeoutError,
                                    AggregateError: errorTypes.AggregateError,
                                    Warning: Warning
                                }
                            }, {
                                "./es5.js": 14,
                                "./util.js": 38
                            }],
                            14: [function(_dereq_, module, exports) {
                                var isES5 = function() {
                                    "use strict";
                                    return void 0 === this
                                }();
                                if (isES5) module.exports = {
                                    freeze: Object.freeze,
                                    defineProperty: Object.defineProperty,
                                    getDescriptor: Object.getOwnPropertyDescriptor,
                                    keys: Object.keys,
                                    names: Object.getOwnPropertyNames,
                                    getPrototypeOf: Object.getPrototypeOf,
                                    isArray: Array.isArray,
                                    isES5: isES5,
                                    propertyIsWritable: function(obj, prop) {
                                        var descriptor = Object.getOwnPropertyDescriptor(obj, prop);
                                        return !(descriptor && !descriptor.writable && !descriptor.set)
                                    }
                                };
                                else {
                                    var has = {}.hasOwnProperty,
                                        str = {}.toString,
                                        proto = {}.constructor.prototype,
                                        ObjectKeys = function(o) {
                                            var ret = [];
                                            for (var key in o) has.call(o, key) && ret.push(key);
                                            return ret
                                        };
                                    module.exports = {
                                        isArray: function(obj) {
                                            try {
                                                return "[object Array]" === str.call(obj)
                                            } catch (e) {
                                                return !1
                                            }
                                        },
                                        keys: ObjectKeys,
                                        names: ObjectKeys,
                                        defineProperty: function(o, key, desc) {
                                            return o[key] = desc.value, o
                                        },
                                        getDescriptor: function(o, key) {
                                            return {
                                                value: o[key]
                                            }
                                        },
                                        freeze: function(obj) {
                                            return obj
                                        },
                                        getPrototypeOf: function(obj) {
                                            try {
                                                return Object(obj).constructor.prototype
                                            } catch (e) {
                                                return proto
                                            }
                                        },
                                        isES5: isES5,
                                        propertyIsWritable: function() {
                                            return !0
                                        }
                                    }
                                }
                            }, {}],
                            15: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL) {
                                    var PromiseMap = Promise.map;
                                    Promise.prototype.filter = function(fn, options) {
                                        return PromiseMap(this, fn, options, INTERNAL)
                                    }, Promise.filter = function(promises, fn, options) {
                                        return PromiseMap(promises, fn, options, INTERNAL)
                                    }
                                }
                            }, {}],
                            16: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, NEXT_FILTER, tryConvertToPromise) {
                                    var util = _dereq_("./util.js"),
                                        isPrimitive = util.isPrimitive,
                                        thrower = util.thrower;

                                    function returnThis() {
                                        return this
                                    }

                                    function throwThis() {
                                        throw this
                                    }

                                    function promisedFinally(ret, reasonOrValue, isFulfilled) {
                                        var then, r;
                                        return then = isPrimitive(reasonOrValue) ? isFulfilled ? (r = reasonOrValue, function() {
                                            return r
                                        }) : function(r) {
                                            return function() {
                                                throw r
                                            }
                                        }(reasonOrValue) : isFulfilled ? returnThis : throwThis, ret._then(then, thrower, void 0, reasonOrValue, void 0)
                                    }

                                    function finallyHandler(reasonOrValue) {
                                        var promise = this.promise,
                                            handler = this.handler,
                                            ret = promise._isBound() ? handler.call(promise._boundValue()) : handler();
                                        if (void 0 !== ret) {
                                            var maybePromise = tryConvertToPromise(ret, promise);
                                            if (maybePromise instanceof Promise) return promisedFinally(maybePromise = maybePromise._target(), reasonOrValue, promise.isFulfilled())
                                        }
                                        return promise.isRejected() ? (NEXT_FILTER.e = reasonOrValue, NEXT_FILTER) : reasonOrValue
                                    }

                                    function tapHandler(value) {
                                        var promise = this.promise,
                                            handler = this.handler,
                                            ret = promise._isBound() ? handler.call(promise._boundValue(), value) : handler(value);
                                        if (void 0 !== ret) {
                                            var maybePromise = tryConvertToPromise(ret, promise);
                                            if (maybePromise instanceof Promise) return promisedFinally(maybePromise = maybePromise._target(), value, !0)
                                        }
                                        return value
                                    }
                                    Promise.prototype._passThroughHandler = function(handler, isFinally) {
                                        if ("function" != typeof handler) return this.then();
                                        var promiseAndHandler = {
                                            promise: this,
                                            handler: handler
                                        };
                                        return this._then(isFinally ? finallyHandler : tapHandler, isFinally ? finallyHandler : void 0, void 0, promiseAndHandler, void 0)
                                    }, Promise.prototype.lastly = Promise.prototype.finally = function(handler) {
                                        return this._passThroughHandler(handler, !0)
                                    }, Promise.prototype.tap = function(handler) {
                                        return this._passThroughHandler(handler, !1)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            17: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, apiRejection, INTERNAL, tryConvertToPromise) {
                                    var TypeError = _dereq_("./errors.js").TypeError,
                                        util = _dereq_("./util.js"),
                                        errorObj = util.errorObj,
                                        tryCatch = util.tryCatch,
                                        yieldHandlers = [];

                                    function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {
                                        (this._promise = new Promise(INTERNAL))._captureStackTrace(), this._stack = stack, this._generatorFunction = generatorFunction, this._receiver = receiver, this._generator = void 0, this._yieldHandlers = "function" == typeof yieldHandler ? [yieldHandler].concat(yieldHandlers) : yieldHandlers
                                    }
                                    PromiseSpawn.prototype.promise = function() {
                                        return this._promise
                                    }, PromiseSpawn.prototype._run = function() {
                                        this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0, this._next(void 0)
                                    }, PromiseSpawn.prototype._continue = function(result) {
                                        if (result === errorObj) return this._promise._rejectCallback(result.e, !1, !0);
                                        var value = result.value;
                                        if (!0 === result.done) this._promise._resolveCallback(value);
                                        else {
                                            var maybePromise = tryConvertToPromise(value, this._promise);
                                            if (!(maybePromise instanceof Promise) && null === (maybePromise = function(value, yieldHandlers, traceParent) {
                                                    for (var i = 0; i < yieldHandlers.length; ++i) {
                                                        traceParent._pushContext();
                                                        var result = tryCatch(yieldHandlers[i])(value);
                                                        if (traceParent._popContext(), result === errorObj) {
                                                            traceParent._pushContext();
                                                            var ret = Promise.reject(errorObj.e);
                                                            return traceParent._popContext(), ret
                                                        }
                                                        var maybePromise = tryConvertToPromise(result, traceParent);
                                                        if (maybePromise instanceof Promise) return maybePromise
                                                    }
                                                    return null
                                                }(maybePromise, this._yieldHandlers, this._promise))) return void this._throw(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s", value) + "From coroutine:\n" + this._stack.split("\n").slice(1, -7).join("\n")));
                                            maybePromise._then(this._next, this._throw, void 0, this, null)
                                        }
                                    }, PromiseSpawn.prototype._throw = function(reason) {
                                        this._promise._attachExtraTrace(reason), this._promise._pushContext();
                                        var result = tryCatch(this._generator.throw).call(this._generator, reason);
                                        this._promise._popContext(), this._continue(result)
                                    }, PromiseSpawn.prototype._next = function(value) {
                                        this._promise._pushContext();
                                        var result = tryCatch(this._generator.next).call(this._generator, value);
                                        this._promise._popContext(), this._continue(result)
                                    }, Promise.coroutine = function(generatorFunction, options) {
                                        if ("function" != typeof generatorFunction) throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");
                                        var yieldHandler = Object(options).yieldHandler,
                                            PromiseSpawn$ = PromiseSpawn,
                                            stack = (new Error).stack;
                                        return function() {
                                            var generator = generatorFunction.apply(this, arguments),
                                                spawn = new PromiseSpawn$(void 0, void 0, yieldHandler, stack);
                                            return spawn._generator = generator, spawn._next(void 0), spawn.promise()
                                        }
                                    }, Promise.coroutine.addYieldHandler = function(fn) {
                                        if ("function" != typeof fn) throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        yieldHandlers.push(fn)
                                    }, Promise.spawn = function(generatorFunction) {
                                        if ("function" != typeof generatorFunction) return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");
                                        var spawn = new PromiseSpawn(generatorFunction, this),
                                            ret = spawn.promise();
                                        return spawn._run(Promise.spawn), ret
                                    }
                                }
                            }, {
                                "./errors.js": 13,
                                "./util.js": 38
                            }],
                            18: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray, tryConvertToPromise, INTERNAL) {
                                    var util = _dereq_("./util.js");
                                    util.canEvaluate, util.tryCatch, util.errorObj;
                                    Promise.join = function() {
                                        var fn, last = arguments.length - 1;
                                        0 < last && "function" == typeof arguments[last] && (fn = arguments[last]);
                                        for (var $_len = arguments.length, args = new Array($_len), $_i = 0; $_i < $_len; ++$_i) args[$_i] = arguments[$_i];
                                        fn && args.pop();
                                        var ret = new PromiseArray(args).promise();
                                        return void 0 !== fn ? ret.spread(fn) : ret
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            19: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL) {
                                    var getDomain = Promise._getDomain,
                                        async = _dereq_("./async.js"), util = _dereq_("./util.js"), tryCatch = util.tryCatch, errorObj = util.errorObj, PENDING = {}, EMPTY_ARRAY = [];

                                    function MappingPromiseArray(promises, fn, limit, _filter) {
                                        this.constructor$(promises), this._promise._captureStackTrace();
                                        var domain = getDomain();
                                        this._callback = null === domain ? fn : domain.bind(fn), this._preservedValues = _filter === INTERNAL ? new Array(this.length()) : null, this._limit = limit, this._inFlight = 0, this._queue = 1 <= limit ? [] : EMPTY_ARRAY, async.invoke(init, this, void 0)
                                    }

                                    function init() {
                                        this._init$(void 0, -2)
                                    }

                                    function map(promises, fn, options, _filter) {
                                        var limit = "object" === _typeof4(options) && null !== options ? options.concurrency : 0;
                                        return new MappingPromiseArray(promises, fn, limit = "number" == typeof limit && isFinite(limit) && 1 <= limit ? limit : 0, _filter)
                                    }
                                    util.inherits(MappingPromiseArray, PromiseArray), MappingPromiseArray.prototype._init = function() {}, MappingPromiseArray.prototype._promiseFulfilled = function(value, index) {
                                        var values = this._values,
                                            length = this.length(),
                                            preservedValues = this._preservedValues,
                                            limit = this._limit;
                                        if (values[index] === PENDING) {
                                            if (values[index] = value, 1 <= limit && (this._inFlight--, this._drainQueue(), this._isResolved())) return
                                        } else {
                                            if (1 <= limit && this._inFlight >= limit) return values[index] = value, void this._queue.push(index);
                                            null !== preservedValues && (preservedValues[index] = value);
                                            var callback = this._callback,
                                                receiver = this._promise._boundValue();
                                            this._promise._pushContext();
                                            var ret = tryCatch(callback).call(receiver, value, index, length);
                                            if (this._promise._popContext(), ret === errorObj) return this._reject(ret.e);
                                            var maybePromise = tryConvertToPromise(ret, this._promise);
                                            if (maybePromise instanceof Promise) {
                                                if ((maybePromise = maybePromise._target())._isPending()) return 1 <= limit && this._inFlight++, values[index] = PENDING, maybePromise._proxyPromiseArray(this, index);
                                                if (!maybePromise._isFulfilled()) return this._reject(maybePromise._reason());
                                                ret = maybePromise._value()
                                            }
                                            values[index] = ret
                                        }
                                        length <= ++this._totalResolved && (null !== preservedValues ? this._filter(values, preservedValues) : this._resolve(values))
                                    }, MappingPromiseArray.prototype._drainQueue = function() {
                                        for (var queue = this._queue, limit = this._limit, values = this._values; 0 < queue.length && this._inFlight < limit;) {
                                            if (this._isResolved()) return;
                                            var index = queue.pop();
                                            this._promiseFulfilled(values[index], index)
                                        }
                                    }, MappingPromiseArray.prototype._filter = function(booleans, values) {
                                        for (var len = values.length, ret = new Array(len), j = 0, i = 0; i < len; ++i) booleans[i] && (ret[j++] = values[i]);
                                        ret.length = j, this._resolve(ret)
                                    }, MappingPromiseArray.prototype.preservedValues = function() {
                                        return this._preservedValues
                                    }, Promise.prototype.map = function(fn, options) {
                                        return "function" != typeof fn ? apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n") : map(this, fn, options, null).promise()
                                    }, Promise.map = function(promises, fn, options, _filter) {
                                        return "function" != typeof fn ? apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n") : map(promises, fn, options, _filter).promise()
                                    }
                                }
                            }, {
                                "./async.js": 2,
                                "./util.js": 38
                            }],
                            20: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL, tryConvertToPromise, apiRejection) {
                                    var util = _dereq_("./util.js"),
                                        tryCatch = util.tryCatch;
                                    Promise.method = function(fn) {
                                        if ("function" != typeof fn) throw new Promise.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        return function() {
                                            var ret = new Promise(INTERNAL);
                                            ret._captureStackTrace(), ret._pushContext();
                                            var value = tryCatch(fn).apply(this, arguments);
                                            return ret._popContext(), ret._resolveFromSyncValue(value), ret
                                        }
                                    }, Promise.attempt = Promise.try = function(fn, args, ctx) {
                                        if ("function" != typeof fn) return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        var ret = new Promise(INTERNAL);
                                        ret._captureStackTrace(), ret._pushContext();
                                        var value = util.isArray(args) ? tryCatch(fn).apply(ctx, args) : tryCatch(fn).call(ctx, args);
                                        return ret._popContext(), ret._resolveFromSyncValue(value), ret
                                    }, Promise.prototype._resolveFromSyncValue = function(value) {
                                        value === util.errorObj ? this._rejectCallback(value.e, !1, !0) : this._resolveCallback(value, !0)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            21: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise) {
                                    var util = _dereq_("./util.js"),
                                        async = _dereq_("./async.js"), tryCatch = util.tryCatch, errorObj = util.errorObj;

                                    function spreadAdapter(val, nodeback) {
                                        if (!util.isArray(val)) return successAdapter.call(this, val, nodeback);
                                        var ret = tryCatch(nodeback).apply(this._boundValue(), [null].concat(val));
                                        ret === errorObj && async.throwLater(ret.e)
                                    }

                                    function successAdapter(val, nodeback) {
                                        var receiver = this._boundValue(),
                                            ret = void 0 === val ? tryCatch(nodeback).call(receiver, null) : tryCatch(nodeback).call(receiver, null, val);
                                        ret === errorObj && async.throwLater(ret.e)
                                    }

                                    function errorAdapter(reason, nodeback) {
                                        if (!reason) {
                                            var newReason = this._target()._getCarriedStackTrace();
                                            newReason.cause = reason, reason = newReason
                                        }
                                        var ret = tryCatch(nodeback).call(this._boundValue(), reason);
                                        ret === errorObj && async.throwLater(ret.e)
                                    }
                                    Promise.prototype.asCallback = Promise.prototype.nodeify = function(nodeback, options) {
                                        if ("function" == typeof nodeback) {
                                            var adapter = successAdapter;
                                            void 0 !== options && Object(options).spread && (adapter = spreadAdapter), this._then(adapter, errorAdapter, void 0, this, nodeback)
                                        }
                                        return this
                                    }
                                }
                            }, {
                                "./async.js": 2,
                                "./util.js": 38
                            }],
                            22: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray) {
                                    var util = _dereq_("./util.js"),
                                        async = _dereq_("./async.js"), tryCatch = util.tryCatch, errorObj = util.errorObj;
                                    Promise.prototype.progressed = function(handler) {
                                        return this._then(void 0, void 0, handler, void 0, void 0)
                                    }, Promise.prototype._progress = function(progressValue) {
                                        this._isFollowingOrFulfilledOrRejected() || this._target()._progressUnchecked(progressValue)
                                    }, Promise.prototype._progressHandlerAt = function(index) {
                                        return 0 === index ? this._progressHandler0 : this[(index << 2) + index - 5 + 2]
                                    }, Promise.prototype._doProgressWith = function(progression) {
                                        var progressValue = progression.value,
                                            handler = progression.handler,
                                            promise = progression.promise,
                                            receiver = progression.receiver,
                                            ret = tryCatch(handler).call(receiver, progressValue);
                                        if (ret === errorObj) {
                                            if (null != ret.e && "StopProgressPropagation" !== ret.e.name) {
                                                var trace = util.canAttachTrace(ret.e) ? ret.e : new Error(util.toString(ret.e));
                                                promise._attachExtraTrace(trace), promise._progress(ret.e)
                                            }
                                        } else ret instanceof Promise ? ret._then(promise._progress, null, null, promise, void 0) : promise._progress(ret)
                                    }, Promise.prototype._progressUnchecked = function(progressValue) {
                                        for (var len = this._length(), progress = this._progress, i = 0; i < len; i++) {
                                            var handler = this._progressHandlerAt(i),
                                                promise = this._promiseAt(i);
                                            if (promise instanceof Promise) "function" == typeof handler ? async.invoke(this._doProgressWith, this, {
                                                handler: handler,
                                                promise: promise,
                                                receiver: this._receiverAt(i),
                                                value: progressValue
                                            }): async.invoke(progress, promise, progressValue);
                                            else {
                                                var receiver = this._receiverAt(i);
                                                "function" == typeof handler ? handler.call(receiver, progressValue, promise) : receiver instanceof PromiseArray && !receiver._isResolved() && receiver._promiseProgressed(progressValue, promise)
                                            }
                                        }
                                    }
                                }
                            }, {
                                "./async.js": 2,
                                "./util.js": 38
                            }],
                            23: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function() {
                                    var getDomain, makeSelfResolutionError = function() {
                                            return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")
                                        },
                                        reflect = function() {
                                            return new Promise.PromiseInspection(this._target())
                                        },
                                        apiRejection = function(msg) {
                                            return Promise.reject(new TypeError(msg))
                                        },
                                        util = _dereq_("./util.js");
                                    getDomain = util.isNode ? function() {
                                        var ret = process.domain;
                                        return void 0 === ret && (ret = null), ret
                                    } : function() {
                                        return null
                                    }, util.notEnumerableProp(Promise, "_getDomain", getDomain);
                                    var UNDEFINED_BINDING = {},
                                        async = _dereq_("./async.js"), errors = _dereq_("./errors.js"), TypeError = Promise.TypeError = errors.TypeError;
                                    Promise.RangeError = errors.RangeError, Promise.CancellationError = errors.CancellationError, Promise.TimeoutError = errors.TimeoutError, Promise.OperationalError = errors.OperationalError, Promise.RejectionError = errors.OperationalError, Promise.AggregateError = errors.AggregateError;
                                    var INTERNAL = function() {},
                                        APPLY = {},
                                        NEXT_FILTER = {
                                            e: null
                                        },
                                        tryConvertToPromise = _dereq_("./thenables.js")(Promise, INTERNAL),
                                        PromiseArray = _dereq_("./promise_array.js")(Promise, INTERNAL, tryConvertToPromise, apiRejection),
                                        CapturedTrace = _dereq_("./captured_trace.js")(),
                                        isDebugging = _dereq_("./debuggability.js")(Promise, CapturedTrace),
                                        createContext = _dereq_("./context.js")(Promise, CapturedTrace, isDebugging),
                                        CatchFilter = _dereq_("./catch_filter.js")(NEXT_FILTER),
                                        PromiseResolver = _dereq_("./promise_resolver.js"),
                                        nodebackForPromise = PromiseResolver._nodebackForPromise,
                                        errorObj = util.errorObj,
                                        tryCatch = util.tryCatch;

                                    function Promise(resolver) {
                                        if ("function" != typeof resolver) throw new TypeError("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");
                                        if (this.constructor !== Promise) throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");
                                        this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0, this._progressHandler0 = void 0, this._promise0 = void 0, this._receiver0 = void 0, this._settledValue = void 0, resolver !== INTERNAL && this._resolveFromResolver(resolver)
                                    }

                                    function fillTypes(value) {
                                        var p = new Promise(INTERNAL);
                                        p._fulfillmentHandler0 = value, p._rejectionHandler0 = value, p._progressHandler0 = value, p._promise0 = value, p._receiver0 = value, p._settledValue = value
                                    }
                                    return Promise.prototype.toString = function() {
                                        return "[object Promise]"
                                    }, Promise.prototype.caught = Promise.prototype.catch = function(fn) {
                                        var len = arguments.length;
                                        if (1 < len) {
                                            var i, catchInstances = new Array(len - 1),
                                                j = 0;
                                            for (i = 0; i < len - 1; ++i) {
                                                var item = arguments[i];
                                                if ("function" != typeof item) return Promise.reject(new TypeError("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));
                                                catchInstances[j++] = item
                                            }
                                            catchInstances.length = j, fn = arguments[i];
                                            var catchFilter = new CatchFilter(catchInstances, fn, this);
                                            return this._then(void 0, catchFilter.doFilter, void 0, catchFilter, void 0)
                                        }
                                        return this._then(void 0, fn, void 0, void 0, void 0)
                                    }, Promise.prototype.reflect = function() {
                                        return this._then(reflect, reflect, void 0, this, void 0)
                                    }, Promise.prototype.then = function(didFulfill, didReject, didProgress) {
                                        if (isDebugging() && 0 < arguments.length && "function" != typeof didFulfill && "function" != typeof didReject) {
                                            var msg = ".then() only accepts functions but was passed: " + util.classString(didFulfill);
                                            1 < arguments.length && (msg += ", " + util.classString(didReject)), this._warn(msg)
                                        }
                                        return this._then(didFulfill, didReject, didProgress, void 0, void 0)
                                    }, Promise.prototype.done = function(didFulfill, didReject, didProgress) {
                                        this._then(didFulfill, didReject, didProgress, void 0, void 0)._setIsFinal()
                                    }, Promise.prototype.spread = function(didFulfill, didReject) {
                                        return this.all()._then(didFulfill, didReject, void 0, APPLY, void 0)
                                    }, Promise.prototype.isCancellable = function() {
                                        return !this.isResolved() && this._cancellable()
                                    }, Promise.prototype.toJSON = function() {
                                        var ret = {
                                            isFulfilled: !1,
                                            isRejected: !1,
                                            fulfillmentValue: void 0,
                                            rejectionReason: void 0
                                        };
                                        return this.isFulfilled() ? (ret.fulfillmentValue = this.value(), ret.isFulfilled = !0) : this.isRejected() && (ret.rejectionReason = this.reason(), ret.isRejected = !0), ret
                                    }, Promise.prototype.all = function() {
                                        return new PromiseArray(this).promise()
                                    }, Promise.prototype.error = function(fn) {
                                        return this.caught(util.originatesFromRejection, fn)
                                    }, Promise.getNewLibraryCopy = module.exports, Promise.is = function(val) {
                                        return val instanceof Promise
                                    }, Promise.fromNode = function(fn) {
                                        var ret = new Promise(INTERNAL),
                                            result = tryCatch(fn)(nodebackForPromise(ret));
                                        return result === errorObj && ret._rejectCallback(result.e, !0, !0), ret
                                    }, Promise.all = function(promises) {
                                        return new PromiseArray(promises).promise()
                                    }, Promise.defer = Promise.pending = function() {
                                        var promise = new Promise(INTERNAL);
                                        return new PromiseResolver(promise)
                                    }, Promise.resolve = Promise.fulfilled = Promise.cast = function(obj) {
                                        var ret = tryConvertToPromise(obj);
                                        if (!(ret instanceof Promise)) {
                                            var val = ret;
                                            (ret = new Promise(INTERNAL))._fulfillUnchecked(val)
                                        }
                                        return ret
                                    }, Promise.reject = Promise.rejected = function(reason) {
                                        var ret = new Promise(INTERNAL);
                                        return ret._captureStackTrace(), ret._rejectCallback(reason, !0), ret
                                    }, Promise.setScheduler = function(fn) {
                                        if ("function" != typeof fn) throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        var prev = async._schedule;
                                        return async._schedule = fn, prev
                                    }, Promise.prototype._then = function(didFulfill, didReject, didProgress, receiver, internalData) {
                                        var haveInternalData = void 0 !== internalData,
                                            ret = haveInternalData ? internalData : new Promise(INTERNAL);
                                        haveInternalData || (ret._propagateFrom(this, 5), ret._captureStackTrace());
                                        var target = this._target();
                                        target !== this && (void 0 === receiver && (receiver = this._boundTo), haveInternalData || ret._setIsMigrated());
                                        var callbackIndex = target._addCallbacks(didFulfill, didReject, didProgress, ret, receiver, getDomain());
                                        return target._isResolved() && !target._isSettlePromisesQueued() && async.invoke(target._settlePromiseAtPostResolution, target, callbackIndex), ret
                                    }, Promise.prototype._settlePromiseAtPostResolution = function(index) {
                                        this._isRejectionUnhandled() && this._unsetRejectionIsUnhandled(), this._settlePromiseAt(index)
                                    }, Promise.prototype._length = function() {
                                        return 131071 & this._bitField
                                    }, Promise.prototype._isFollowingOrFulfilledOrRejected = function() {
                                        return 0 < (939524096 & this._bitField)
                                    }, Promise.prototype._isFollowing = function() {
                                        return 536870912 == (536870912 & this._bitField)
                                    }, Promise.prototype._setLength = function(len) {
                                        this._bitField = -131072 & this._bitField | 131071 & len
                                    }, Promise.prototype._setFulfilled = function() {
                                        this._bitField = 268435456 | this._bitField
                                    }, Promise.prototype._setRejected = function() {
                                        this._bitField = 134217728 | this._bitField
                                    }, Promise.prototype._setFollowing = function() {
                                        this._bitField = 536870912 | this._bitField
                                    }, Promise.prototype._setIsFinal = function() {
                                        this._bitField = 33554432 | this._bitField
                                    }, Promise.prototype._isFinal = function() {
                                        return 0 < (33554432 & this._bitField)
                                    }, Promise.prototype._cancellable = function() {
                                        return 0 < (67108864 & this._bitField)
                                    }, Promise.prototype._setCancellable = function() {
                                        this._bitField = 67108864 | this._bitField
                                    }, Promise.prototype._unsetCancellable = function() {
                                        this._bitField = -67108865 & this._bitField
                                    }, Promise.prototype._setIsMigrated = function() {
                                        this._bitField = 4194304 | this._bitField
                                    }, Promise.prototype._unsetIsMigrated = function() {
                                        this._bitField = -4194305 & this._bitField
                                    }, Promise.prototype._isMigrated = function() {
                                        return 0 < (4194304 & this._bitField)
                                    }, Promise.prototype._receiverAt = function(index) {
                                        var ret = 0 === index ? this._receiver0 : this[5 * index - 5 + 4];
                                        if (ret !== UNDEFINED_BINDING) return void 0 === ret && this._isBound() ? this._boundValue() : ret
                                    }, Promise.prototype._promiseAt = function(index) {
                                        return 0 === index ? this._promise0 : this[5 * index - 5 + 3]
                                    }, Promise.prototype._fulfillmentHandlerAt = function(index) {
                                        return 0 === index ? this._fulfillmentHandler0 : this[5 * index - 5 + 0]
                                    }, Promise.prototype._rejectionHandlerAt = function(index) {
                                        return 0 === index ? this._rejectionHandler0 : this[5 * index - 5 + 1]
                                    }, Promise.prototype._boundValue = function() {
                                        var ret = this._boundTo;
                                        return void 0 !== ret && ret instanceof Promise ? ret.isFulfilled() ? ret.value() : void 0 : ret
                                    }, Promise.prototype._migrateCallbacks = function(follower, index) {
                                        var fulfill = follower._fulfillmentHandlerAt(index),
                                            reject = follower._rejectionHandlerAt(index),
                                            progress = follower._progressHandlerAt(index),
                                            promise = follower._promiseAt(index),
                                            receiver = follower._receiverAt(index);
                                        promise instanceof Promise && promise._setIsMigrated(), void 0 === receiver && (receiver = UNDEFINED_BINDING), this._addCallbacks(fulfill, reject, progress, promise, receiver, null)
                                    }, Promise.prototype._addCallbacks = function(fulfill, reject, progress, promise, receiver, domain) {
                                        var index = this._length();
                                        if (131066 <= index && (index = 0, this._setLength(0)), 0 === index) this._promise0 = promise, void 0 !== receiver && (this._receiver0 = receiver), "function" != typeof fulfill || this._isCarryingStackTrace() || (this._fulfillmentHandler0 = null === domain ? fulfill : domain.bind(fulfill)), "function" == typeof reject && (this._rejectionHandler0 = null === domain ? reject : domain.bind(reject)), "function" == typeof progress && (this._progressHandler0 = null === domain ? progress : domain.bind(progress));
                                        else {
                                            var base = 5 * index - 5;
                                            this[base + 3] = promise, this[base + 4] = receiver, "function" == typeof fulfill && (this[base + 0] = null === domain ? fulfill : domain.bind(fulfill)), "function" == typeof reject && (this[base + 1] = null === domain ? reject : domain.bind(reject)), "function" == typeof progress && (this[base + 2] = null === domain ? progress : domain.bind(progress))
                                        }
                                        return this._setLength(index + 1), index
                                    }, Promise.prototype._setProxyHandlers = function(receiver, promiseSlotValue) {
                                        var index = this._length();
                                        if (131066 <= index && (index = 0, this._setLength(0)), 0 === index) this._promise0 = promiseSlotValue, this._receiver0 = receiver;
                                        else {
                                            var base = 5 * index - 5;
                                            this[base + 3] = promiseSlotValue, this[base + 4] = receiver
                                        }
                                        this._setLength(index + 1)
                                    }, Promise.prototype._proxyPromiseArray = function(promiseArray, index) {
                                        this._setProxyHandlers(promiseArray, index)
                                    }, Promise.prototype._resolveCallback = function(value, shouldBind) {
                                        if (!this._isFollowingOrFulfilledOrRejected()) {
                                            if (value === this) return this._rejectCallback(makeSelfResolutionError(), !1, !0);
                                            var maybePromise = tryConvertToPromise(value, this);
                                            if (!(maybePromise instanceof Promise)) return this._fulfill(value);
                                            var propagationFlags = 1 | (shouldBind ? 4 : 0);
                                            this._propagateFrom(maybePromise, propagationFlags);
                                            var promise = maybePromise._target();
                                            if (promise._isPending()) {
                                                for (var len = this._length(), i = 0; i < len; ++i) promise._migrateCallbacks(this, i);
                                                this._setFollowing(), this._setLength(0), this._setFollowee(promise)
                                            } else promise._isFulfilled() ? this._fulfillUnchecked(promise._value()) : this._rejectUnchecked(promise._reason(), promise._getCarriedStackTrace())
                                        }
                                    }, Promise.prototype._rejectCallback = function(reason, synchronous, shouldNotMarkOriginatingFromRejection) {
                                        shouldNotMarkOriginatingFromRejection || util.markAsOriginatingFromRejection(reason);
                                        var trace = util.ensureErrorObject(reason),
                                            hasStack = trace === reason;
                                        this._attachExtraTrace(trace, !!synchronous && hasStack), this._reject(reason, hasStack ? void 0 : trace)
                                    }, Promise.prototype._resolveFromResolver = function(resolver) {
                                        var promise = this;
                                        this._captureStackTrace(), this._pushContext();
                                        var synchronous = !0,
                                            r = tryCatch(resolver)(function(value) {
                                                null !== promise && (promise._resolveCallback(value), promise = null)
                                            }, function(reason) {
                                                null !== promise && (promise._rejectCallback(reason, synchronous), promise = null)
                                            });
                                        synchronous = !1, this._popContext(), void 0 !== r && r === errorObj && null !== promise && (promise._rejectCallback(r.e, !0, !0), promise = null)
                                    }, Promise.prototype._settlePromiseFromHandler = function(handler, receiver, value, promise) {
                                        var x;
                                        if (!promise._isRejected())
                                            if (promise._pushContext(), x = receiver !== APPLY || this._isRejected() ? tryCatch(handler).call(receiver, value) : tryCatch(handler).apply(this._boundValue(), value), promise._popContext(), x === errorObj || x === promise || x === NEXT_FILTER) {
                                                var err = x === promise ? makeSelfResolutionError() : x.e;
                                                promise._rejectCallback(err, !1, !0)
                                            } else promise._resolveCallback(x)
                                    }, Promise.prototype._target = function() {
                                        for (var ret = this; ret._isFollowing();) ret = ret._followee();
                                        return ret
                                    }, Promise.prototype._followee = function() {
                                        return this._rejectionHandler0
                                    }, Promise.prototype._setFollowee = function(promise) {
                                        this._rejectionHandler0 = promise
                                    }, Promise.prototype._cleanValues = function() {
                                        this._cancellable() && (this._cancellationParent = void 0)
                                    }, Promise.prototype._propagateFrom = function(parent, flags) {
                                        0 < (1 & flags) && parent._cancellable() && (this._setCancellable(), this._cancellationParent = parent), 0 < (4 & flags) && parent._isBound() && this._setBoundTo(parent._boundTo)
                                    }, Promise.prototype._fulfill = function(value) {
                                        this._isFollowingOrFulfilledOrRejected() || this._fulfillUnchecked(value)
                                    }, Promise.prototype._reject = function(reason, carriedStackTrace) {
                                        this._isFollowingOrFulfilledOrRejected() || this._rejectUnchecked(reason, carriedStackTrace)
                                    }, Promise.prototype._settlePromiseAt = function(index) {
                                        var promise = this._promiseAt(index),
                                            isPromise = promise instanceof Promise;
                                        if (isPromise && promise._isMigrated()) return promise._unsetIsMigrated(), async.invoke(this._settlePromiseAt, this, index);
                                        var handler = this._isFulfilled() ? this._fulfillmentHandlerAt(index) : this._rejectionHandlerAt(index),
                                            carriedStackTrace = this._isCarryingStackTrace() ? this._getCarriedStackTrace() : void 0,
                                            value = this._settledValue,
                                            receiver = this._receiverAt(index);
                                        this._clearCallbackDataAtIndex(index), "function" == typeof handler ? isPromise ? this._settlePromiseFromHandler(handler, receiver, value, promise) : handler.call(receiver, value, promise) : receiver instanceof PromiseArray ? receiver._isResolved() || (this._isFulfilled() ? receiver._promiseFulfilled(value, promise) : receiver._promiseRejected(value, promise)) : isPromise && (this._isFulfilled() ? promise._fulfill(value) : promise._reject(value, carriedStackTrace)), 4 <= index && 4 == (31 & index) && async.invokeLater(this._setLength, this, 0)
                                    }, Promise.prototype._clearCallbackDataAtIndex = function(index) {
                                        if (0 === index) this._isCarryingStackTrace() || (this._fulfillmentHandler0 = void 0), this._rejectionHandler0 = this._progressHandler0 = this._receiver0 = this._promise0 = void 0;
                                        else {
                                            var base = 5 * index - 5;
                                            this[base + 3] = this[base + 4] = this[base + 0] = this[base + 1] = this[base + 2] = void 0
                                        }
                                    }, Promise.prototype._isSettlePromisesQueued = function() {
                                        return -1073741824 == (-1073741824 & this._bitField)
                                    }, Promise.prototype._setSettlePromisesQueued = function() {
                                        this._bitField = -1073741824 | this._bitField
                                    }, Promise.prototype._unsetSettlePromisesQueued = function() {
                                        this._bitField = 1073741823 & this._bitField
                                    }, Promise.prototype._queueSettlePromises = function() {
                                        async.settlePromises(this), this._setSettlePromisesQueued()
                                    }, Promise.prototype._fulfillUnchecked = function(value) {
                                        if (value === this) {
                                            var err = makeSelfResolutionError();
                                            return this._attachExtraTrace(err), this._rejectUnchecked(err, void 0)
                                        }
                                        this._setFulfilled(), this._settledValue = value, this._cleanValues(), 0 < this._length() && this._queueSettlePromises()
                                    }, Promise.prototype._rejectUncheckedCheckError = function(reason) {
                                        var trace = util.ensureErrorObject(reason);
                                        this._rejectUnchecked(reason, trace === reason ? void 0 : trace)
                                    }, Promise.prototype._rejectUnchecked = function(reason, trace) {
                                        if (reason === this) {
                                            var err = makeSelfResolutionError();
                                            return this._attachExtraTrace(err), this._rejectUnchecked(err)
                                        }
                                        this._setRejected(), this._settledValue = reason, this._cleanValues(), this._isFinal() ? async.throwLater(function(e) {
                                            throw "stack" in e && async.invokeFirst(CapturedTrace.unhandledRejection, void 0, e), e
                                        }, void 0 === trace ? reason : trace): (void 0 !== trace && trace !== reason && this._setCarriedStackTrace(trace), 0 < this._length() ? this._queueSettlePromises() : this._ensurePossibleRejectionHandled())
                                    }, Promise.prototype._settlePromises = function() {
                                        this._unsetSettlePromisesQueued();
                                        for (var len = this._length(), i = 0; i < len; i++) this._settlePromiseAt(i)
                                    }, util.notEnumerableProp(Promise, "_makeSelfResolutionError", makeSelfResolutionError), _dereq_("./progress.js")(Promise, PromiseArray), _dereq_("./method.js")(Promise, INTERNAL, tryConvertToPromise, apiRejection), _dereq_("./bind.js")(Promise, INTERNAL, tryConvertToPromise), _dereq_("./finally.js")(Promise, NEXT_FILTER, tryConvertToPromise), _dereq_("./direct_resolve.js")(Promise), _dereq_("./synchronous_inspection.js")(Promise), _dereq_("./join.js")(Promise, PromiseArray, tryConvertToPromise, INTERNAL), Promise.version = "2.11.0", Promise.Promise = Promise, _dereq_("./map.js")(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL), _dereq_("./cancel.js")(Promise), _dereq_("./using.js")(Promise, apiRejection, tryConvertToPromise, createContext), _dereq_("./generators.js")(Promise, apiRejection, INTERNAL, tryConvertToPromise), _dereq_("./nodeify.js")(Promise), _dereq_("./call_get.js")(Promise), _dereq_("./props.js")(Promise, PromiseArray, tryConvertToPromise, apiRejection), _dereq_("./race.js")(Promise, INTERNAL, tryConvertToPromise, apiRejection), _dereq_("./reduce.js")(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL), _dereq_("./settle.js")(Promise, PromiseArray), _dereq_("./some.js")(Promise, PromiseArray, apiRejection), _dereq_("./promisify.js")(Promise, INTERNAL), _dereq_("./any.js")(Promise), _dereq_("./each.js")(Promise, INTERNAL), _dereq_("./timers.js")(Promise, INTERNAL), _dereq_("./filter.js")(Promise, INTERNAL), util.toFastProperties(Promise), util.toFastProperties(Promise.prototype), fillTypes({
                                        a: 1
                                    }), fillTypes({
                                        b: 2
                                    }), fillTypes({
                                        c: 3
                                    }), fillTypes(1), fillTypes(function() {}), fillTypes(void 0), fillTypes(!1), fillTypes(new Promise(INTERNAL)), CapturedTrace.setBounds(async.firstLineError, util.lastLineError), Promise
                                }
                            }, {
                                "./any.js": 1,
                                "./async.js": 2,
                                "./bind.js": 3,
                                "./call_get.js": 5,
                                "./cancel.js": 6,
                                "./captured_trace.js": 7,
                                "./catch_filter.js": 8,
                                "./context.js": 9,
                                "./debuggability.js": 10,
                                "./direct_resolve.js": 11,
                                "./each.js": 12,
                                "./errors.js": 13,
                                "./filter.js": 15,
                                "./finally.js": 16,
                                "./generators.js": 17,
                                "./join.js": 18,
                                "./map.js": 19,
                                "./method.js": 20,
                                "./nodeify.js": 21,
                                "./progress.js": 22,
                                "./promise_array.js": 24,
                                "./promise_resolver.js": 25,
                                "./promisify.js": 26,
                                "./props.js": 27,
                                "./race.js": 29,
                                "./reduce.js": 30,
                                "./settle.js": 32,
                                "./some.js": 33,
                                "./synchronous_inspection.js": 34,
                                "./thenables.js": 35,
                                "./timers.js": 36,
                                "./using.js": 37,
                                "./util.js": 38
                            }],
                            24: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL, tryConvertToPromise, apiRejection) {
                                    var isArray = _dereq_("./util.js").isArray;

                                    function PromiseArray(values) {
                                        var parent, promise = this._promise = new Promise(INTERNAL);
                                        values instanceof Promise && (parent = values, promise._propagateFrom(parent, 5)), this._values = values, this._length = 0, this._totalResolved = 0, this._init(void 0, -2)
                                    }
                                    return PromiseArray.prototype.length = function() {
                                        return this._length
                                    }, PromiseArray.prototype.promise = function() {
                                        return this._promise
                                    }, PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {
                                        var values = tryConvertToPromise(this._values, this._promise);
                                        if (values instanceof Promise) {
                                            if (values = values._target(), !(this._values = values)._isFulfilled()) return values._isPending() ? void values._then(init, this._reject, void 0, this, resolveValueIfEmpty) : void this._reject(values._reason());
                                            if (values = values._value(), !isArray(values)) {
                                                var err = new Promise.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");
                                                return void this.__hardReject__(err)
                                            }
                                        } else if (!isArray(values)) return void this._promise._reject(apiRejection("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());
                                        if (0 !== values.length) {
                                            var len = this.getActualLength(values.length);
                                            this._length = len, this._values = this.shouldCopyValues() ? new Array(len) : this._values;
                                            for (var promise = this._promise, i = 0; i < len; ++i) {
                                                var isResolved = this._isResolved(),
                                                    maybePromise = tryConvertToPromise(values[i], promise);
                                                maybePromise instanceof Promise ? (maybePromise = maybePromise._target(), isResolved ? maybePromise._ignoreRejections() : maybePromise._isPending() ? maybePromise._proxyPromiseArray(this, i) : maybePromise._isFulfilled() ? this._promiseFulfilled(maybePromise._value(), i) : this._promiseRejected(maybePromise._reason(), i)) : isResolved || this._promiseFulfilled(maybePromise, i)
                                            }
                                        } else - 5 === resolveValueIfEmpty ? this._resolveEmptyArray() : this._resolve(function(val) {
                                            switch (val) {
                                                case -2:
                                                    return [];
                                                case -3:
                                                    return {}
                                            }
                                        }(resolveValueIfEmpty))
                                    }, PromiseArray.prototype._isResolved = function() {
                                        return null === this._values
                                    }, PromiseArray.prototype._resolve = function(value) {
                                        this._values = null, this._promise._fulfill(value)
                                    }, PromiseArray.prototype.__hardReject__ = PromiseArray.prototype._reject = function(reason) {
                                        this._values = null, this._promise._rejectCallback(reason, !1, !0)
                                    }, PromiseArray.prototype._promiseProgressed = function(progressValue, index) {
                                        this._promise._progress({
                                            index: index,
                                            value: progressValue
                                        })
                                    }, PromiseArray.prototype._promiseFulfilled = function(value, index) {
                                        this._values[index] = value, ++this._totalResolved >= this._length && this._resolve(this._values)
                                    }, PromiseArray.prototype._promiseRejected = function(reason, index) {
                                        this._totalResolved++, this._reject(reason)
                                    }, PromiseArray.prototype.shouldCopyValues = function() {
                                        return !0
                                    }, PromiseArray.prototype.getActualLength = function(len) {
                                        return len
                                    }, PromiseArray
                                }
                            }, {
                                "./util.js": 38
                            }],
                            25: [function(_dereq_, module, exports) {
                                "use strict";
                                var util = _dereq_("./util.js"),
                                    maybeWrapAsError = util.maybeWrapAsError,
                                    errors = _dereq_("./errors.js"),
                                    TimeoutError = errors.TimeoutError,
                                    OperationalError = errors.OperationalError,
                                    haveGetters = util.haveGetters,
                                    es5 = _dereq_("./es5.js");
                                var PromiseResolver, rErrorKey = /^(?:name|message|stack|cause)$/;

                                function wrapAsOperationalError(obj) {
                                    var ret;
                                    if (function(obj) {
                                            return obj instanceof Error && es5.getPrototypeOf(obj) === Error.prototype
                                        }(obj)) {
                                        (ret = new OperationalError(obj)).name = obj.name, ret.message = obj.message, ret.stack = obj.stack;
                                        for (var keys = es5.keys(obj), i = 0; i < keys.length; ++i) {
                                            var key = keys[i];
                                            rErrorKey.test(key) || (ret[key] = obj[key])
                                        }
                                        return ret
                                    }
                                    return util.markAsOriginatingFromRejection(obj), obj
                                }

                                function nodebackForPromise(promise) {
                                    return function(err, value) {
                                        if (null !== promise) {
                                            if (err) {
                                                var wrapped = wrapAsOperationalError(maybeWrapAsError(err));
                                                promise._attachExtraTrace(wrapped), promise._reject(wrapped)
                                            } else if (2 < arguments.length) {
                                                for (var $_len = arguments.length, args = new Array($_len - 1), $_i = 1; $_i < $_len; ++$_i) args[$_i - 1] = arguments[$_i];
                                                promise._fulfill(args)
                                            } else promise._fulfill(value);
                                            promise = null
                                        }
                                    }
                                }
                                if (PromiseResolver = haveGetters ? function(promise) {
                                        this.promise = promise
                                    } : function(promise) {
                                        this.promise = promise, this.asCallback = nodebackForPromise(promise), this.callback = this.asCallback
                                    }, haveGetters) {
                                    var prop = {
                                        get: function() {
                                            return nodebackForPromise(this.promise)
                                        }
                                    };
                                    es5.defineProperty(PromiseResolver.prototype, "asCallback", prop), es5.defineProperty(PromiseResolver.prototype, "callback", prop)
                                }
                                PromiseResolver._nodebackForPromise = nodebackForPromise, PromiseResolver.prototype.toString = function() {
                                    return "[object PromiseResolver]"
                                }, PromiseResolver.prototype.resolve = PromiseResolver.prototype.fulfill = function(value) {
                                    if (!(this instanceof PromiseResolver)) throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");
                                    this.promise._resolveCallback(value)
                                }, PromiseResolver.prototype.reject = function(reason) {
                                    if (!(this instanceof PromiseResolver)) throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");
                                    this.promise._rejectCallback(reason)
                                }, PromiseResolver.prototype.progress = function(value) {
                                    if (!(this instanceof PromiseResolver)) throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");
                                    this.promise._progress(value)
                                }, PromiseResolver.prototype.cancel = function(err) {
                                    this.promise.cancel(err)
                                }, PromiseResolver.prototype.timeout = function() {
                                    this.reject(new TimeoutError("timeout"))
                                }, PromiseResolver.prototype.isResolved = function() {
                                    return this.promise.isResolved()
                                }, PromiseResolver.prototype.toJSON = function() {
                                    return this.promise.toJSON()
                                }, module.exports = PromiseResolver
                            }, {
                                "./errors.js": 13,
                                "./es5.js": 14,
                                "./util.js": 38
                            }],
                            26: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL) {
                                    var THIS = {},
                                        util = _dereq_("./util.js"),
                                        nodebackForPromise = _dereq_("./promise_resolver.js")._nodebackForPromise,
                                        withAppended = util.withAppended,
                                        maybeWrapAsError = util.maybeWrapAsError,
                                        canEvaluate = util.canEvaluate,
                                        TypeError = _dereq_("./errors").TypeError,
                                        defaultPromisified = {
                                            __isPromisified__: !0
                                        },
                                        noCopyPropsPattern = new RegExp("^(?:" + ["arity", "length", "name", "arguments", "caller", "callee", "prototype", "__isPromisified__"].join("|") + ")$"),
                                        defaultFilter = function(name) {
                                            return util.isIdentifier(name) && "_" !== name.charAt(0) && "constructor" !== name
                                        };

                                    function propsFilter(key) {
                                        return !noCopyPropsPattern.test(key)
                                    }

                                    function isPromisified(fn) {
                                        try {
                                            return !0 === fn.__isPromisified__
                                        } catch (e) {
                                            return !1
                                        }
                                    }

                                    function hasPromisified(obj, key, suffix) {
                                        var val = util.getDataPropertyOrDefault(obj, key + suffix, defaultPromisified);
                                        return !!val && isPromisified(val)
                                    }

                                    function promisifiableMethods(obj, suffix, suffixRegexp, filter) {
                                        for (var keys = util.inheritedDataKeys(obj), ret = [], i = 0; i < keys.length; ++i) {
                                            var key = keys[i],
                                                value = obj[key],
                                                passesDefaultFilter = filter === defaultFilter || defaultFilter(key, value, obj);
                                            "function" != typeof value || isPromisified(value) || hasPromisified(obj, key, suffix) || !filter(key, value, obj, passesDefaultFilter) || ret.push(key, value)
                                        }
                                        return function(ret, suffix, suffixRegexp) {
                                            for (var i = 0; i < ret.length; i += 2) {
                                                var key = ret[i];
                                                if (suffixRegexp.test(key))
                                                    for (var keyWithoutAsyncSuffix = key.replace(suffixRegexp, ""), j = 0; j < ret.length; j += 2)
                                                        if (ret[j] === keyWithoutAsyncSuffix) throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s", suffix))
                                            }
                                        }(ret, suffix, suffixRegexp), ret
                                    }
                                    var makeNodePromisifiedEval, escapeIdentRegex = function(str) {
                                        return str.replace(/([$])/, "\\$")
                                    };
                                    var makeNodePromisified = canEvaluate ? makeNodePromisifiedEval : function(callback, receiver, _, fn) {
                                        var defaultThis = function() {
                                                return this
                                            }(),
                                            method = callback;

                                        function promisified() {
                                            var _receiver = receiver;
                                            receiver === THIS && (_receiver = this);
                                            var promise = new Promise(INTERNAL);
                                            promise._captureStackTrace();
                                            var cb = "string" == typeof method && this !== defaultThis ? this[method] : callback,
                                                fn = nodebackForPromise(promise);
                                            try {
                                                cb.apply(_receiver, withAppended(arguments, fn))
                                            } catch (e) {
                                                promise._rejectCallback(maybeWrapAsError(e), !0, !0)
                                            }
                                            return promise
                                        }
                                        return "string" == typeof method && (callback = fn), util.notEnumerableProp(promisified, "__isPromisified__", !0), promisified
                                    };

                                    function promisifyAll(obj, suffix, filter, promisifier) {
                                        for (var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + "$"), methods = promisifiableMethods(obj, suffix, suffixRegexp, filter), i = 0, len = methods.length; i < len; i += 2) {
                                            var key = methods[i],
                                                fn = methods[i + 1],
                                                promisifiedKey = key + suffix;
                                            if (promisifier === makeNodePromisified) obj[promisifiedKey] = makeNodePromisified(key, THIS, key, fn, suffix);
                                            else {
                                                var promisified = promisifier(fn, function() {
                                                    return makeNodePromisified(key, THIS, key, fn, suffix)
                                                });
                                                util.notEnumerableProp(promisified, "__isPromisified__", !0), obj[promisifiedKey] = promisified
                                            }
                                        }
                                        return util.toFastProperties(obj), obj
                                    }
                                    Promise.promisify = function(fn, receiver) {
                                        if ("function" != typeof fn) throw new TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        if (isPromisified(fn)) return fn;
                                        var ret = function(callback, receiver) {
                                            return makeNodePromisified(callback, receiver, void 0, callback)
                                        }(fn, arguments.length < 2 ? THIS : receiver);
                                        return util.copyDescriptors(fn, ret, propsFilter), ret
                                    }, Promise.promisifyAll = function(target, options) {
                                        if ("function" != typeof target && "object" !== _typeof4(target)) throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");
                                        var suffix = (options = Object(options)).suffix;
                                        "string" != typeof suffix && (suffix = "Async");
                                        var filter = options.filter;
                                        "function" != typeof filter && (filter = defaultFilter);
                                        var promisifier = options.promisifier;
                                        if ("function" != typeof promisifier && (promisifier = makeNodePromisified), !util.isIdentifier(suffix)) throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");
                                        for (var keys = util.inheritedDataKeys(target), i = 0; i < keys.length; ++i) {
                                            var value = target[keys[i]];
                                            "constructor" !== keys[i] && util.isClass(value) && (promisifyAll(value.prototype, suffix, filter, promisifier), promisifyAll(value, suffix, filter, promisifier))
                                        }
                                        return promisifyAll(target, suffix, filter, promisifier)
                                    }
                                }
                            }, {
                                "./errors": 13,
                                "./promise_resolver.js": 25,
                                "./util.js": 38
                            }],
                            27: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray, tryConvertToPromise, apiRejection) {
                                    var util = _dereq_("./util.js"),
                                        isObject = util.isObject,
                                        es5 = _dereq_("./es5.js");

                                    function PropertiesPromiseArray(obj) {
                                        for (var keys = es5.keys(obj), len = keys.length, values = new Array(2 * len), i = 0; i < len; ++i) {
                                            var key = keys[i];
                                            values[i] = obj[key], values[i + len] = key
                                        }
                                        this.constructor$(values)
                                    }

                                    function props(promises) {
                                        var ret, castValue = tryConvertToPromise(promises);
                                        return isObject(castValue) ? (ret = castValue instanceof Promise ? castValue._then(Promise.props, void 0, void 0, void 0, void 0) : new PropertiesPromiseArray(castValue).promise(), castValue instanceof Promise && ret._propagateFrom(castValue, 4), ret) : apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")
                                    }
                                    util.inherits(PropertiesPromiseArray, PromiseArray), PropertiesPromiseArray.prototype._init = function() {
                                        this._init$(void 0, -3)
                                    }, PropertiesPromiseArray.prototype._promiseFulfilled = function(value, index) {
                                        if (this._values[index] = value, ++this._totalResolved >= this._length) {
                                            for (var val = {}, keyOffset = this.length(), i = 0, len = this.length(); i < len; ++i) val[this._values[i + keyOffset]] = this._values[i];
                                            this._resolve(val)
                                        }
                                    }, PropertiesPromiseArray.prototype._promiseProgressed = function(value, index) {
                                        this._promise._progress({
                                            key: this._values[index + this.length()],
                                            value: value
                                        })
                                    }, PropertiesPromiseArray.prototype.shouldCopyValues = function() {
                                        return !1
                                    }, PropertiesPromiseArray.prototype.getActualLength = function(len) {
                                        return len >> 1
                                    }, Promise.prototype.props = function() {
                                        return props(this)
                                    }, Promise.props = function(promises) {
                                        return props(promises)
                                    }
                                }
                            }, {
                                "./es5.js": 14,
                                "./util.js": 38
                            }],
                            28: [function(_dereq_, module, exports) {
                                "use strict";

                                function Queue(capacity) {
                                    this._capacity = capacity, this._length = 0, this._front = 0
                                }
                                Queue.prototype._willBeOverCapacity = function(size) {
                                    return this._capacity < size
                                }, Queue.prototype._pushOne = function(arg) {
                                    var length = this.length();
                                    this._checkCapacity(length + 1), this[this._front + length & this._capacity - 1] = arg, this._length = length + 1
                                }, Queue.prototype._unshiftOne = function(value) {
                                    var capacity = this._capacity;
                                    this._checkCapacity(this.length() + 1);
                                    var i = (this._front - 1 & capacity - 1 ^ capacity) - capacity;
                                    this[i] = value, this._front = i, this._length = this.length() + 1
                                }, Queue.prototype.unshift = function(fn, receiver, arg) {
                                    this._unshiftOne(arg), this._unshiftOne(receiver), this._unshiftOne(fn)
                                }, Queue.prototype.push = function(fn, receiver, arg) {
                                    var length = this.length() + 3;
                                    if (this._willBeOverCapacity(length)) return this._pushOne(fn), this._pushOne(receiver), void this._pushOne(arg);
                                    var j = this._front + length - 3;
                                    this._checkCapacity(length);
                                    var wrapMask = this._capacity - 1;
                                    this[j + 0 & wrapMask] = fn, this[j + 1 & wrapMask] = receiver, this[j + 2 & wrapMask] = arg, this._length = length
                                }, Queue.prototype.shift = function() {
                                    var front = this._front,
                                        ret = this[front];
                                    return this[front] = void 0, this._front = front + 1 & this._capacity - 1, this._length--, ret
                                }, Queue.prototype.length = function() {
                                    return this._length
                                }, Queue.prototype._checkCapacity = function(size) {
                                    this._capacity < size && this._resizeTo(this._capacity << 1)
                                }, Queue.prototype._resizeTo = function(capacity) {
                                    var oldCapacity = this._capacity;
                                    this._capacity = capacity,
                                        function(src, srcIndex, dst, dstIndex, len) {
                                            for (var j = 0; j < len; ++j) dst[j + dstIndex] = src[j + srcIndex], src[j + srcIndex] = void 0
                                        }(this, 0, this, oldCapacity, this._front + this._length & oldCapacity - 1)
                                }, module.exports = Queue
                            }, {}],
                            29: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL, tryConvertToPromise, apiRejection) {
                                    var isArray = _dereq_("./util.js").isArray,
                                        raceLater = function(promise) {
                                            return promise.then(function(array) {
                                                return race(array, promise)
                                            })
                                        };

                                    function race(promises, parent) {
                                        var maybePromise = tryConvertToPromise(promises);
                                        if (maybePromise instanceof Promise) return raceLater(maybePromise);
                                        if (!isArray(promises)) return apiRejection("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");
                                        var ret = new Promise(INTERNAL);
                                        void 0 !== parent && ret._propagateFrom(parent, 5);
                                        for (var fulfill = ret._fulfill, reject = ret._reject, i = 0, len = promises.length; i < len; ++i) {
                                            var val = promises[i];
                                            (void 0 !== val || i in promises) && Promise.cast(val)._then(fulfill, reject, void 0, ret, null)
                                        }
                                        return ret
                                    }
                                    Promise.race = function(promises) {
                                        return race(promises, void 0)
                                    }, Promise.prototype.race = function() {
                                        return race(this, void 0)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            30: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL) {
                                    var getDomain = Promise._getDomain,
                                        async = _dereq_("./async.js"), util = _dereq_("./util.js"), tryCatch = util.tryCatch, errorObj = util.errorObj;

                                    function ReductionPromiseArray(promises, fn, accum, _each) {
                                        this.constructor$(promises), this._promise._captureStackTrace(), this._preservedValues = _each === INTERNAL ? [] : null, this._zerothIsAccum = void 0 === accum, this._gotAccum = !1, this._reducingIndex = this._zerothIsAccum ? 1 : 0, this._valuesPhase = void 0;
                                        var maybePromise = tryConvertToPromise(accum, this._promise),
                                            rejected = !1,
                                            isPromise = maybePromise instanceof Promise;
                                        isPromise && ((maybePromise = maybePromise._target())._isPending() ? maybePromise._proxyPromiseArray(this, -1) : maybePromise._isFulfilled() ? (accum = maybePromise._value(), this._gotAccum = !0) : (this._reject(maybePromise._reason()), rejected = !0)), isPromise || this._zerothIsAccum || (this._gotAccum = !0);
                                        var domain = getDomain();
                                        this._callback = null === domain ? fn : domain.bind(fn), this._accum = accum, rejected || async.invoke(init, this, void 0)
                                    }

                                    function init() {
                                        this._init$(void 0, -5)
                                    }

                                    function reduce(promises, fn, initialValue, _each) {
                                        return "function" != typeof fn ? apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n") : new ReductionPromiseArray(promises, fn, initialValue, _each).promise()
                                    }
                                    util.inherits(ReductionPromiseArray, PromiseArray), ReductionPromiseArray.prototype._init = function() {}, ReductionPromiseArray.prototype._resolveEmptyArray = function() {
                                        (this._gotAccum || this._zerothIsAccum) && this._resolve(null !== this._preservedValues ? [] : this._accum)
                                    }, ReductionPromiseArray.prototype._promiseFulfilled = function(value, index) {
                                        var values = this._values;
                                        values[index] = value;
                                        var valuesPhaseIndex, length = this.length(),
                                            preservedValues = this._preservedValues,
                                            isEach = null !== preservedValues,
                                            gotAccum = this._gotAccum,
                                            valuesPhase = this._valuesPhase;
                                        if (!valuesPhase)
                                            for (valuesPhase = this._valuesPhase = new Array(length), valuesPhaseIndex = 0; valuesPhaseIndex < length; ++valuesPhaseIndex) valuesPhase[valuesPhaseIndex] = 0;
                                        if (valuesPhaseIndex = valuesPhase[index], 0 === index && this._zerothIsAccum ? (this._accum = value, this._gotAccum = gotAccum = !0, valuesPhase[index] = 0 === valuesPhaseIndex ? 1 : 2) : -1 === index ? (this._accum = value, this._gotAccum = gotAccum = !0) : 0 === valuesPhaseIndex ? valuesPhase[index] = 1 : (valuesPhase[index] = 2, this._accum = value), gotAccum) {
                                            for (var ret, callback = this._callback, receiver = this._promise._boundValue(), i = this._reducingIndex; i < length; ++i)
                                                if (2 !== (valuesPhaseIndex = valuesPhase[i])) {
                                                    if (1 !== valuesPhaseIndex) return;
                                                    if (value = values[i], this._promise._pushContext(), ret = isEach ? (preservedValues.push(value), tryCatch(callback).call(receiver, value, i, length)) : tryCatch(callback).call(receiver, this._accum, value, i, length), this._promise._popContext(), ret === errorObj) return this._reject(ret.e);
                                                    var maybePromise = tryConvertToPromise(ret, this._promise);
                                                    if (maybePromise instanceof Promise) {
                                                        if ((maybePromise = maybePromise._target())._isPending()) return valuesPhase[i] = 4, maybePromise._proxyPromiseArray(this, i);
                                                        if (!maybePromise._isFulfilled()) return this._reject(maybePromise._reason());
                                                        ret = maybePromise._value()
                                                    }
                                                    this._reducingIndex = i + 1, this._accum = ret
                                                } else this._reducingIndex = i + 1;
                                            this._resolve(isEach ? preservedValues : this._accum)
                                        }
                                    }, Promise.prototype.reduce = function(fn, initialValue) {
                                        return reduce(this, fn, initialValue, null)
                                    }, Promise.reduce = function(promises, fn, initialValue, _each) {
                                        return reduce(promises, fn, initialValue, _each)
                                    }
                                }
                            }, {
                                "./async.js": 2,
                                "./util.js": 38
                            }],
                            31: [function(_dereq_, module, exports) {
                                "use strict";
                                var schedule, util = _dereq_("./util");
                                if (util.isNode && "undefined" == typeof MutationObserver) {
                                    var GlobalSetImmediate = global.setImmediate,
                                        ProcessNextTick = process.nextTick;
                                    schedule = util.isRecentNode ? function(fn) {
                                        GlobalSetImmediate.call(global, fn)
                                    } : function(fn) {
                                        ProcessNextTick.call(process, fn)
                                    }
                                } else "undefined" == typeof MutationObserver || "undefined" != typeof window && window.navigator && window.navigator.standalone ? schedule = "undefined" != typeof setImmediate ? function(fn) {
                                    setImmediate(fn)
                                } : "undefined" != typeof setTimeout ? function(fn) {
                                    setTimeout(fn, 0)
                                } : function() {
                                    throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")
                                } : (schedule = function(fn) {
                                    var div = document.createElement("div");
                                    return new MutationObserver(fn).observe(div, {
                                            attributes: !0
                                        }),
                                        function() {
                                            div.classList.toggle("foo")
                                        }
                                }).isStatic = !0;
                                module.exports = schedule
                            }, {
                                "./util": 38
                            }],
                            32: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray) {
                                    var PromiseInspection = Promise.PromiseInspection;

                                    function SettledPromiseArray(values) {
                                        this.constructor$(values)
                                    }
                                    _dereq_("./util.js").inherits(SettledPromiseArray, PromiseArray), SettledPromiseArray.prototype._promiseResolved = function(index, inspection) {
                                        this._values[index] = inspection, ++this._totalResolved >= this._length && this._resolve(this._values)
                                    }, SettledPromiseArray.prototype._promiseFulfilled = function(value, index) {
                                        var ret = new PromiseInspection;
                                        ret._bitField = 268435456, ret._settledValue = value, this._promiseResolved(index, ret)
                                    }, SettledPromiseArray.prototype._promiseRejected = function(reason, index) {
                                        var ret = new PromiseInspection;
                                        ret._bitField = 134217728, ret._settledValue = reason, this._promiseResolved(index, ret)
                                    }, Promise.settle = function(promises) {
                                        return new SettledPromiseArray(promises).promise()
                                    }, Promise.prototype.settle = function() {
                                        return new SettledPromiseArray(this).promise()
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            33: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, PromiseArray, apiRejection) {
                                    var util = _dereq_("./util.js"),
                                        RangeError = _dereq_("./errors.js").RangeError,
                                        AggregateError = _dereq_("./errors.js").AggregateError,
                                        isArray = util.isArray;

                                    function SomePromiseArray(values) {
                                        this.constructor$(values), this._howMany = 0, this._unwrap = !1, this._initialized = !1
                                    }

                                    function some(promises, howMany) {
                                        if ((0 | howMany) !== howMany || howMany < 0) return apiRejection("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");
                                        var ret = new SomePromiseArray(promises),
                                            promise = ret.promise();
                                        return ret.setHowMany(howMany), ret.init(), promise
                                    }
                                    util.inherits(SomePromiseArray, PromiseArray), SomePromiseArray.prototype._init = function() {
                                        if (this._initialized)
                                            if (0 !== this._howMany) {
                                                this._init$(void 0, -5);
                                                var isArrayResolved = isArray(this._values);
                                                !this._isResolved() && isArrayResolved && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()))
                                            } else this._resolve([])
                                    }, SomePromiseArray.prototype.init = function() {
                                        this._initialized = !0, this._init()
                                    }, SomePromiseArray.prototype.setUnwrap = function() {
                                        this._unwrap = !0
                                    }, SomePromiseArray.prototype.howMany = function() {
                                        return this._howMany
                                    }, SomePromiseArray.prototype.setHowMany = function(count) {
                                        this._howMany = count
                                    }, SomePromiseArray.prototype._promiseFulfilled = function(value) {
                                        this._addFulfilled(value), this._fulfilled() === this.howMany() && (this._values.length = this.howMany(), 1 === this.howMany() && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values))
                                    }, SomePromiseArray.prototype._promiseRejected = function(reason) {
                                        if (this._addRejected(reason), this.howMany() > this._canPossiblyFulfill()) {
                                            for (var e = new AggregateError, i = this.length(); i < this._values.length; ++i) e.push(this._values[i]);
                                            this._reject(e)
                                        }
                                    }, SomePromiseArray.prototype._fulfilled = function() {
                                        return this._totalResolved
                                    }, SomePromiseArray.prototype._rejected = function() {
                                        return this._values.length - this.length()
                                    }, SomePromiseArray.prototype._addRejected = function(reason) {
                                        this._values.push(reason)
                                    }, SomePromiseArray.prototype._addFulfilled = function(value) {
                                        this._values[this._totalResolved++] = value
                                    }, SomePromiseArray.prototype._canPossiblyFulfill = function() {
                                        return this.length() - this._rejected()
                                    }, SomePromiseArray.prototype._getRangeError = function(count) {
                                        var message = "Input array must contain at least " + this._howMany + " items but contains only " + count + " items";
                                        return new RangeError(message)
                                    }, SomePromiseArray.prototype._resolveEmptyArray = function() {
                                        this._reject(this._getRangeError(0))
                                    }, Promise.some = function(promises, howMany) {
                                        return some(promises, howMany)
                                    }, Promise.prototype.some = function(howMany) {
                                        return some(this, howMany)
                                    }, Promise._SomePromiseArray = SomePromiseArray
                                }
                            }, {
                                "./errors.js": 13,
                                "./util.js": 38
                            }],
                            34: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise) {
                                    function PromiseInspection(promise) {
                                        void 0 !== promise ? (promise = promise._target(), this._bitField = promise._bitField, this._settledValue = promise._settledValue) : (this._bitField = 0, this._settledValue = void 0)
                                    }
                                    PromiseInspection.prototype.value = function() {
                                        if (!this.isFulfilled()) throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");
                                        return this._settledValue
                                    }, PromiseInspection.prototype.error = PromiseInspection.prototype.reason = function() {
                                        if (!this.isRejected()) throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");
                                        return this._settledValue
                                    }, PromiseInspection.prototype.isFulfilled = Promise.prototype._isFulfilled = function() {
                                        return 0 < (268435456 & this._bitField)
                                    }, PromiseInspection.prototype.isRejected = Promise.prototype._isRejected = function() {
                                        return 0 < (134217728 & this._bitField)
                                    }, PromiseInspection.prototype.isPending = Promise.prototype._isPending = function() {
                                        return 0 == (402653184 & this._bitField)
                                    }, PromiseInspection.prototype.isResolved = Promise.prototype._isResolved = function() {
                                        return 0 < (402653184 & this._bitField)
                                    }, Promise.prototype.isPending = function() {
                                        return this._target()._isPending()
                                    }, Promise.prototype.isRejected = function() {
                                        return this._target()._isRejected()
                                    }, Promise.prototype.isFulfilled = function() {
                                        return this._target()._isFulfilled()
                                    }, Promise.prototype.isResolved = function() {
                                        return this._target()._isResolved()
                                    }, Promise.prototype._value = function() {
                                        return this._settledValue
                                    }, Promise.prototype._reason = function() {
                                        return this._unsetRejectionIsUnhandled(), this._settledValue
                                    }, Promise.prototype.value = function() {
                                        var target = this._target();
                                        if (!target.isFulfilled()) throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");
                                        return target._settledValue
                                    }, Promise.prototype.reason = function() {
                                        var target = this._target();
                                        if (!target.isRejected()) throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");
                                        return target._unsetRejectionIsUnhandled(), target._settledValue
                                    }, Promise.PromiseInspection = PromiseInspection
                                }
                            }, {}],
                            35: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL) {
                                    var util = _dereq_("./util.js"),
                                        errorObj = util.errorObj,
                                        isObject = util.isObject;

                                    function getThen(obj) {
                                        return obj.then
                                    }
                                    var hasProp = {}.hasOwnProperty;
                                    return function(obj, context) {
                                        if (isObject(obj)) {
                                            if (obj instanceof Promise) return obj;
                                            if (function(obj) {
                                                    return hasProp.call(obj, "_promise0")
                                                }(obj)) {
                                                var ret = new Promise(INTERNAL);
                                                return obj._then(ret._fulfillUnchecked, ret._rejectUncheckedCheckError, ret._progressUnchecked, ret, null), ret
                                            }
                                            var then = util.tryCatch(getThen)(obj);
                                            if (then === errorObj) return context && context._pushContext(), ret = Promise.reject(then.e), context && context._popContext(), ret;
                                            if ("function" == typeof then) return function(x, then, context) {
                                                var promise = new Promise(INTERNAL),
                                                    ret = promise;
                                                context && context._pushContext(), promise._captureStackTrace(), context && context._popContext();
                                                var synchronous = !0,
                                                    result = util.tryCatch(then).call(x, function(value) {
                                                        promise && (promise._resolveCallback(value), promise = null)
                                                    }, function(reason) {
                                                        promise && (promise._rejectCallback(reason, synchronous, !0), promise = null)
                                                    }, function(value) {
                                                        promise && "function" == typeof promise._progress && promise._progress(value)
                                                    });
                                                return synchronous = !1, promise && result === errorObj && (promise._rejectCallback(result.e, !0, !0), promise = null), ret
                                            }(obj, then, context)
                                        }
                                        return obj
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            36: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, INTERNAL) {
                                    var util = _dereq_("./util.js"),
                                        TimeoutError = Promise.TimeoutError,
                                        afterValue = function(value) {
                                            return delay(+this).thenReturn(value)
                                        },
                                        delay = Promise.delay = function(value, ms) {
                                            if (void 0 !== ms) return ms = +ms, Promise.resolve(value)._then(afterValue, null, null, ms, void 0);
                                            ms = value, value = void 0;
                                            var ret = new Promise(INTERNAL);
                                            return setTimeout(function() {
                                                ret._fulfill()
                                            }, ms), ret
                                        };

                                    function successClear(value) {
                                        var handle = this;
                                        return handle instanceof Number && (handle = +handle), clearTimeout(handle), value
                                    }

                                    function failureClear(reason) {
                                        var handle = this;
                                        throw handle instanceof Number && (handle = +handle), clearTimeout(handle), reason
                                    }
                                    Promise.prototype.delay = function(ms) {
                                        return delay(this, ms)
                                    }, Promise.prototype.timeout = function(ms, message) {
                                        ms = +ms;
                                        var ret = this.then().cancellable();
                                        ret._cancellationParent = this;
                                        var handle = setTimeout(function() {
                                            ! function(promise, message) {
                                                var err;
                                                promise.isPending() && (err = !util.isPrimitive(message) && message instanceof Error ? message : ("string" != typeof message && (message = "operation timed out"), new TimeoutError(message)), util.markAsOriginatingFromRejection(err), promise._attachExtraTrace(err), promise._cancel(err))
                                            }(ret, message)
                                        }, ms);
                                        return ret._then(successClear, failureClear, void 0, handle, void 0)
                                    }
                                }
                            }, {
                                "./util.js": 38
                            }],
                            37: [function(_dereq_, module, exports) {
                                "use strict";
                                module.exports = function(Promise, apiRejection, tryConvertToPromise, createContext) {
                                    var TypeError = _dereq_("./errors.js").TypeError,
                                        inherits = _dereq_("./util.js").inherits,
                                        PromiseInspection = Promise.PromiseInspection;

                                    function inspectionMapper(inspections) {
                                        for (var len = inspections.length, i = 0; i < len; ++i) {
                                            var inspection = inspections[i];
                                            if (inspection.isRejected()) return Promise.reject(inspection.error());
                                            inspections[i] = inspection._settledValue
                                        }
                                        return inspections
                                    }

                                    function thrower(e) {
                                        setTimeout(function() {
                                            throw e
                                        }, 0)
                                    }

                                    function dispose(resources, inspection) {
                                        var i = 0,
                                            len = resources.length,
                                            ret = Promise.defer();
                                        return function iterator() {
                                            if (len <= i) return ret.resolve();
                                            var maybePromise = function(thenable) {
                                                var maybePromise = tryConvertToPromise(thenable);
                                                return maybePromise !== thenable && "function" == typeof thenable._isDisposable && "function" == typeof thenable._getDisposer && thenable._isDisposable() && maybePromise._setDisposable(thenable._getDisposer()), maybePromise
                                            }(resources[i++]);
                                            if (maybePromise instanceof Promise && maybePromise._isDisposable()) {
                                                try {
                                                    maybePromise = tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection), resources.promise)
                                                } catch (e) {
                                                    return thrower(e)
                                                }
                                                if (maybePromise instanceof Promise) return maybePromise._then(iterator, thrower, null, null, null)
                                            }
                                            iterator()
                                        }(), ret.promise
                                    }

                                    function disposerSuccess(value) {
                                        var inspection = new PromiseInspection;
                                        return inspection._settledValue = value, inspection._bitField = 268435456, dispose(this, inspection).thenReturn(value)
                                    }

                                    function disposerFail(reason) {
                                        var inspection = new PromiseInspection;
                                        return inspection._settledValue = reason, inspection._bitField = 134217728, dispose(this, inspection).thenThrow(reason)
                                    }

                                    function Disposer(data, promise, context) {
                                        this._data = data, this._promise = promise, this._context = context
                                    }

                                    function FunctionDisposer(fn, promise, context) {
                                        this.constructor$(fn, promise, context)
                                    }

                                    function maybeUnwrapDisposer(value) {
                                        return Disposer.isDisposer(value) ? (this.resources[this.index]._setDisposable(value), value.promise()) : value
                                    }
                                    Disposer.prototype.data = function() {
                                        return this._data
                                    }, Disposer.prototype.promise = function() {
                                        return this._promise
                                    }, Disposer.prototype.resource = function() {
                                        return this.promise().isFulfilled() ? this.promise().value() : null
                                    }, Disposer.prototype.tryDispose = function(inspection) {
                                        var resource = this.resource(),
                                            context = this._context;
                                        void 0 !== context && context._pushContext();
                                        var ret = null !== resource ? this.doDispose(resource, inspection) : null;
                                        return void 0 !== context && context._popContext(), this._promise._unsetDisposable(), this._data = null, ret
                                    }, Disposer.isDisposer = function(d) {
                                        return null != d && "function" == typeof d.resource && "function" == typeof d.tryDispose
                                    }, inherits(FunctionDisposer, Disposer), FunctionDisposer.prototype.doDispose = function(resource, inspection) {
                                        return this.data().call(resource, resource, inspection)
                                    }, Promise.using = function() {
                                        var len = arguments.length;
                                        if (len < 2) return apiRejection("you must pass at least 2 arguments to Promise.using");
                                        var input, fn = arguments[len - 1];
                                        if ("function" != typeof fn) return apiRejection("fn must be a function\n\n    See http://goo.gl/916lJJ\n");
                                        var spreadArgs = !0;
                                        2 === len && Array.isArray(arguments[0]) ? (len = (input = arguments[0]).length, spreadArgs = !1) : (input = arguments, len--);
                                        for (var resources = new Array(len), i = 0; i < len; ++i) {
                                            var resource = input[i];
                                            if (Disposer.isDisposer(resource)) {
                                                var disposer = resource;
                                                (resource = resource.promise())._setDisposable(disposer)
                                            } else {
                                                var maybePromise = tryConvertToPromise(resource);
                                                maybePromise instanceof Promise && (resource = maybePromise._then(maybeUnwrapDisposer, null, null, {
                                                    resources: resources,
                                                    index: i
                                                }, void 0))
                                            }
                                            resources[i] = resource
                                        }
                                        var promise = Promise.settle(resources).then(inspectionMapper).then(function(vals) {
                                            var ret;
                                            promise._pushContext();
                                            try {
                                                ret = spreadArgs ? fn.apply(void 0, vals) : fn.call(void 0, vals)
                                            } finally {
                                                promise._popContext()
                                            }
                                            return ret
                                        })._then(disposerSuccess, disposerFail, void 0, resources, void 0);
                                        return resources.promise = promise
                                    }, Promise.prototype._setDisposable = function(disposer) {
                                        this._bitField = 262144 | this._bitField, this._disposer = disposer
                                    }, Promise.prototype._isDisposable = function() {
                                        return 0 < (262144 & this._bitField)
                                    }, Promise.prototype._getDisposer = function() {
                                        return this._disposer
                                    }, Promise.prototype._unsetDisposable = function() {
                                        this._bitField = -262145 & this._bitField, this._disposer = void 0
                                    }, Promise.prototype.disposer = function(fn) {
                                        if ("function" == typeof fn) return new FunctionDisposer(fn, this, createContext());
                                        throw new TypeError
                                    }
                                }
                            }, {
                                "./errors.js": 13,
                                "./util.js": 38
                            }],
                            38: [function(_dereq_, module, exports) {
                                "use strict";
                                var es5 = _dereq_("./es5.js"),
                                    canEvaluate = "undefined" == typeof navigator,
                                    haveGetters = function() {
                                        try {
                                            var o = {};
                                            return es5.defineProperty(o, "f", {
                                                get: function() {
                                                    return 3
                                                }
                                            }), 3 === o.f
                                        } catch (e) {
                                            return !1
                                        }
                                    }(),
                                    errorObj = {
                                        e: {}
                                    },
                                    tryCatchTarget;

                                function tryCatcher() {
                                    try {
                                        var target = tryCatchTarget;
                                        return tryCatchTarget = null, target.apply(this, arguments)
                                    } catch (e) {
                                        return errorObj.e = e, errorObj
                                    }
                                }

                                function tryCatch(fn) {
                                    return tryCatchTarget = fn, tryCatcher
                                }
                                var inherits = function(Child, Parent) {
                                    var hasProp = {}.hasOwnProperty;

                                    function T() {
                                        for (var propertyName in this.constructor = Child, (this.constructor$ = Parent).prototype) hasProp.call(Parent.prototype, propertyName) && "$" !== propertyName.charAt(propertyName.length - 1) && (this[propertyName + "$"] = Parent.prototype[propertyName])
                                    }
                                    return T.prototype = Parent.prototype, Child.prototype = new T, Child.prototype
                                };

                                function isPrimitive(val) {
                                    return null == val || !0 === val || !1 === val || "string" == typeof val || "number" == typeof val
                                }

                                function isObject(value) {
                                    return !isPrimitive(value)
                                }

                                function maybeWrapAsError(maybeError) {
                                    return isPrimitive(maybeError) ? new Error(safeToString(maybeError)) : maybeError
                                }

                                function withAppended(target, appendee) {
                                    var i, len = target.length,
                                        ret = new Array(len + 1);
                                    for (i = 0; i < len; ++i) ret[i] = target[i];
                                    return ret[i] = appendee, ret
                                }

                                function getDataPropertyOrDefault(obj, key, defaultValue) {
                                    if (!es5.isES5) return {}.hasOwnProperty.call(obj, key) ? obj[key] : void 0;
                                    var desc = Object.getOwnPropertyDescriptor(obj, key);
                                    return null != desc ? null == desc.get && null == desc.set ? desc.value : defaultValue : void 0
                                }

                                function notEnumerableProp(obj, name, value) {
                                    if (isPrimitive(obj)) return obj;
                                    var descriptor = {
                                        value: value,
                                        configurable: !0,
                                        enumerable: !1,
                                        writable: !0
                                    };
                                    return es5.defineProperty(obj, name, descriptor), obj
                                }

                                function thrower(r) {
                                    throw r
                                }
                                var inheritedDataKeys = function() {
                                        var excludedPrototypes = [Array.prototype, Object.prototype, Function.prototype],
                                            isExcludedProto = function(val) {
                                                for (var i = 0; i < excludedPrototypes.length; ++i)
                                                    if (excludedPrototypes[i] === val) return !0;
                                                return !1
                                            };
                                        if (es5.isES5) {
                                            var getKeys = Object.getOwnPropertyNames;
                                            return function(obj) {
                                                for (var ret = [], visitedKeys = Object.create(null); null != obj && !isExcludedProto(obj);) {
                                                    var keys;
                                                    try {
                                                        keys = getKeys(obj)
                                                    } catch (e) {
                                                        return ret
                                                    }
                                                    for (var i = 0; i < keys.length; ++i) {
                                                        var key = keys[i];
                                                        if (!visitedKeys[key]) {
                                                            visitedKeys[key] = !0;
                                                            var desc = Object.getOwnPropertyDescriptor(obj, key);
                                                            null != desc && null == desc.get && null == desc.set && ret.push(key)
                                                        }
                                                    }
                                                    obj = es5.getPrototypeOf(obj)
                                                }
                                                return ret
                                            }
                                        }
                                        var hasProp = {}.hasOwnProperty;
                                        return function(obj) {
                                            if (isExcludedProto(obj)) return [];
                                            var ret = [];
                                            enumeration: for (var key in obj)
                                                if (hasProp.call(obj, key)) ret.push(key);
                                                else {
                                                    for (var i = 0; i < excludedPrototypes.length; ++i)
                                                        if (hasProp.call(excludedPrototypes[i], key)) continue enumeration;
                                                    ret.push(key)
                                                }
                                            return ret
                                        }
                                    }(),
                                    thisAssignmentPattern = /this\s*\.\s*\S+\s*=/;

                                function isClass(fn) {
                                    try {
                                        if ("function" == typeof fn) {
                                            var keys = es5.names(fn.prototype),
                                                hasMethods = es5.isES5 && 1 < keys.length,
                                                hasMethodsOtherThanConstructor = 0 < keys.length && !(1 === keys.length && "constructor" === keys[0]),
                                                hasThisAssignmentAndStaticMethods = thisAssignmentPattern.test(fn + "") && 0 < es5.names(fn).length;
                                            if (hasMethods || hasMethodsOtherThanConstructor || hasThisAssignmentAndStaticMethods) return !0
                                        }
                                        return !1
                                    } catch (e) {
                                        return !1
                                    }
                                }

                                function toFastProperties(obj) {
                                    function f() {}
                                    f.prototype = obj;
                                    for (var l = 8; l--;) new f;
                                    return obj
                                }
                                var rident = /^[a-z$_][a-z$_0-9]*$/i;

                                function isIdentifier(str) {
                                    return rident.test(str)
                                }

                                function filledRange(count, prefix, suffix) {
                                    for (var ret = new Array(count), i = 0; i < count; ++i) ret[i] = prefix + i + suffix;
                                    return ret
                                }

                                function safeToString(obj) {
                                    try {
                                        return obj + ""
                                    } catch (e) {
                                        return "[no string representation]"
                                    }
                                }

                                function markAsOriginatingFromRejection(e) {
                                    try {
                                        notEnumerableProp(e, "isOperational", !0)
                                    } catch (ignore) {}
                                }

                                function originatesFromRejection(e) {
                                    return null != e && (e instanceof Error.__BluebirdErrorTypes__.OperationalError || !0 === e.isOperational)
                                }

                                function canAttachTrace(obj) {
                                    return obj instanceof Error && es5.propertyIsWritable(obj, "stack")
                                }
                                var ensureErrorObject = "stack" in new Error ? function(value) {
                                    return canAttachTrace(value) ? value : new Error(safeToString(value))
                                } : function(value) {
                                    if (canAttachTrace(value)) return value;
                                    try {
                                        throw new Error(safeToString(value))
                                    } catch (err) {
                                        return err
                                    }
                                };

                                function classString(obj) {
                                    return {}.toString.call(obj)
                                }

                                function copyDescriptors(from, to, filter) {
                                    for (var keys = es5.names(from), i = 0; i < keys.length; ++i) {
                                        var key = keys[i];
                                        if (filter(key)) try {
                                            es5.defineProperty(to, key, es5.getDescriptor(from, key))
                                        } catch (ignore) {}
                                    }
                                }
                                var ret = {
                                        isClass: isClass,
                                        isIdentifier: isIdentifier,
                                        inheritedDataKeys: inheritedDataKeys,
                                        getDataPropertyOrDefault: getDataPropertyOrDefault,
                                        thrower: thrower,
                                        isArray: es5.isArray,
                                        haveGetters: haveGetters,
                                        notEnumerableProp: notEnumerableProp,
                                        isPrimitive: isPrimitive,
                                        isObject: isObject,
                                        canEvaluate: canEvaluate,
                                        errorObj: errorObj,
                                        tryCatch: tryCatch,
                                        inherits: inherits,
                                        withAppended: withAppended,
                                        maybeWrapAsError: maybeWrapAsError,
                                        toFastProperties: toFastProperties,
                                        filledRange: filledRange,
                                        toString: safeToString,
                                        canAttachTrace: canAttachTrace,
                                        ensureErrorObject: ensureErrorObject,
                                        originatesFromRejection: originatesFromRejection,
                                        markAsOriginatingFromRejection: markAsOriginatingFromRejection,
                                        classString: classString,
                                        copyDescriptors: copyDescriptors,
                                        hasDevTools: "undefined" != typeof chrome && chrome && "function" == typeof chrome.loadTimes,
                                        isNode: void 0 !== process && "[object process]" === classString(process).toLowerCase()
                                    },
                                    version;
                                ret.isRecentNode = ret.isNode && (version = process.versions.node.split(".").map(Number), 0 === version[0] && 10 < version[1] || 0 < version[0]), ret.isNode && ret.toFastProperties(process);
                                try {
                                    throw new Error
                                } catch (e) {
                                    ret.lastLineError = e
                                }
                                module.exports = ret
                            }, {
                                "./es5.js": 14
                            }]
                        }, {}, [4])(4)
                    }), "undefined" != typeof window && null !== window ? window.P = window.Promise : "undefined" != typeof self && null !== self && (self.P = self.Promise)
                }).call(this, _dereq_("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {
                _process: 225
            }],
            66: [function(_dereq_, module, exports) {
                (function() {
                    var Bottleneck, bind = function(fn, me) {
                            return function() {
                                return fn.apply(me, arguments)
                            }
                        },
                        slice = [].slice;
                    Bottleneck = function() {
                        function Bottleneck(maxNb, minTime, highWater, strategy, rejectOnDrop) {
                            this.maxNb = null != maxNb ? maxNb : 0, this.minTime = null != minTime ? minTime : 0, this.highWater = null != highWater ? highWater : -1, this.strategy = null != strategy ? strategy : Bottleneck.prototype.strategy.LEAK, this.rejectOnDrop = null != rejectOnDrop && rejectOnDrop, this.schedulePriority = bind(this.schedulePriority, this), this.submitPriority = bind(this.submitPriority, this), this.submit = bind(this.submit, this), this._nextRequest = Date.now(), this._nbRunning = 0, this._queues = this._makeQueues(), this._running = {}, this._nextIndex = 0, this._unblockTime = 0, this.penalty = 15 * this.minTime || 5e3, this.interrupt = !1, this.reservoir = null, this.limiter = null, this.events = {}
                        }
                        return (Bottleneck.default = Bottleneck).strategy = Bottleneck.prototype.strategy = {
                            LEAK: 1,
                            OVERFLOW: 2,
                            OVERFLOW_PRIORITY: 4,
                            BLOCK: 3
                        }, Bottleneck.Cluster = Bottleneck.prototype.Cluster = _dereq_("./Cluster"), Bottleneck.DLList = Bottleneck.prototype.DLList = _dereq_("./DLList"), Bottleneck.Promise = Bottleneck.prototype.Promise = function() {
                            try {
                                return _dereq_("bluebird")
                            } catch (error) {
                                return error, "undefined" != typeof Promise && null !== Promise ? Promise : function() {
                                    throw new Error("Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support")
                                }
                            }
                        }(), Bottleneck.prototype._trigger = function(name, args) {
                            return this.rejectOnDrop && "dropped" === name && args[0].cb.apply({}, [new Error("This job has been dropped by Bottleneck")]), setTimeout((_this = this, function() {
                                var ref;
                                return null != (ref = _this.events[name]) ? ref.forEach(function(e) {
                                    return e.apply({}, args)
                                }) : void 0
                            }), 0);
                            var _this
                        }, Bottleneck.prototype._makeQueues = function() {
                            var j, results;
                            for (results = [], j = 1, 10; j <= 10; ++j) results.push(new Bottleneck.prototype.DLList);
                            return results
                        }, Bottleneck.prototype.chain = function(limiter) {
                            return this.limiter = limiter, this
                        }, Bottleneck.prototype.isBlocked = function() {
                            return this._unblockTime >= Date.now()
                        }, Bottleneck.prototype._sanitizePriority = function(priority) {
                            var sProperty;
                            return (sProperty = ~~priority !== priority ? 5 : priority) < 0 ? 0 : 9 < sProperty ? 9 : sProperty
                        }, Bottleneck.prototype._find = function(arr, fn) {
                            var i, j, len, x;
                            for (i = j = 0, len = arr.length; j < len; i = ++j)
                                if (fn(x = arr[i])) return x;
                            return []
                        }, Bottleneck.prototype.nbQueued = function(priority) {
                            return null != priority ? this._queues[this._sanitizePriority(priority)].length : this._queues.reduce(function(a, b) {
                                return a + b.length
                            }, 0)
                        }, Bottleneck.prototype.nbRunning = function() {
                            return this._nbRunning
                        }, Bottleneck.prototype._getFirst = function(arr) {
                            return this._find(arr, function(x) {
                                return 0 < x.length
                            })
                        }, Bottleneck.prototype._conditionsCheck = function() {
                            return (this.nbRunning() < this.maxNb || this.maxNb <= 0) && (null == this.reservoir || 0 < this.reservoir)
                        }, Bottleneck.prototype.check = function() {
                            return this._conditionsCheck() && this._nextRequest - Date.now() <= 0
                        }, Bottleneck.prototype._tryToRun = function() {
                            var done, index, next, queued, wait, _this;
                            return !!(this._conditionsCheck() && 0 < (queued = this.nbQueued())) && (this._nbRunning++, null != this.reservoir && this.reservoir--, wait = Math.max(this._nextRequest - Date.now(), 0), this._nextRequest = Date.now() + wait + this.minTime, next = this._getFirst(this._queues).shift(), 1 === queued && this._trigger("empty", []), done = !1, index = this._nextIndex++, this._running[index] = {
                                timeout: setTimeout((_this = this, function() {
                                    var completed;
                                    return completed = function() {
                                        var ref;
                                        if (!done && (done = !0, delete _this._running[index], _this._nbRunning--, _this._tryToRun(), 0 === _this.nbRunning() && 0 === _this.nbQueued() && _this._trigger("idle", []), !_this.interrupt)) return null != (ref = next.cb) ? ref.apply({}, Array.prototype.slice.call(arguments, 0)) : void 0
                                    }, null != _this.limiter ? _this.limiter.submit.apply(_this.limiter, Array.prototype.concat(next.task, next.args, completed)) : next.task.apply({}, next.args.concat(completed))
                                }), wait),
                                job: next
                            }, !0)
                        }, Bottleneck.prototype.submit = function() {
                            var args;
                            return args = 1 <= arguments.length ? slice.call(arguments, 0) : [], this.submitPriority.apply({}, Array.prototype.concat(5, args))
                        }, Bottleneck.prototype.submitPriority = function() {
                            var j, job, priority, reachedHighWaterMark, shifted;
                            return priority = arguments[0], job = {
                                task: arguments[1],
                                args: 4 <= arguments.length ? slice.call(arguments, 2, j = arguments.length - 1) : (j = 2, []),
                                cb: arguments[j++]
                            }, priority = this._sanitizePriority(priority), reachedHighWaterMark = 0 <= this.highWater && this.nbQueued() === this.highWater && !this.check(), this.strategy === Bottleneck.prototype.strategy.BLOCK && (reachedHighWaterMark || this.isBlocked()) ? (this._unblockTime = Date.now() + this.penalty, this._nextRequest = this._unblockTime + this.minTime, this._queues = this._makeQueues(), this._trigger("dropped", [job]), !0) : (reachedHighWaterMark && (null != (shifted = this.strategy === Bottleneck.prototype.strategy.LEAK ? this._getFirst(this._queues.slice(priority).reverse()).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW_PRIORITY ? this._getFirst(this._queues.slice(priority + 1).reverse()).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW ? job : void 0) && this._trigger("dropped", [shifted]), null == shifted || this.strategy === Bottleneck.prototype.strategy.OVERFLOW) || (this._queues[priority].push(job), this._tryToRun()), reachedHighWaterMark)
                        }, Bottleneck.prototype.schedule = function() {
                            var args;
                            return args = 1 <= arguments.length ? slice.call(arguments, 0) : [], this.schedulePriority.apply({}, Array.prototype.concat(5, args))
                        }, Bottleneck.prototype.schedulePriority = function() {
                            var args, priority, task, wrapped, _this;
                            return priority = arguments[0], task = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [], wrapped = function() {
                                var args, cb, j;
                                return args = 2 <= arguments.length ? slice.call(arguments, 0, j = arguments.length - 1) : (j = 0, []), cb = arguments[j++], task.apply({}, args).then(function() {
                                    var args;
                                    return args = 1 <= arguments.length ? slice.call(arguments, 0) : [], cb.apply({}, Array.prototype.concat(null, args))
                                }).catch(function() {
                                    var args;
                                    return args = 1 <= arguments.length ? slice.call(arguments, 0) : [], cb.apply({}, args)
                                })
                            }, new Bottleneck.prototype.Promise((_this = this, function(resolve, reject) {
                                return _this.submitPriority.apply({}, Array.prototype.concat(priority, wrapped, args, function() {
                                    var args;
                                    return (null != (args = 1 <= arguments.length ? slice.call(arguments, 0) : [])[0] ? reject : (args.shift(), resolve)).apply({}, args)
                                }))
                            }))
                        }, Bottleneck.prototype.changeSettings = function(maxNb, minTime, highWater, strategy, rejectOnDrop) {
                            for (this.maxNb = null != maxNb ? maxNb : this.maxNb, this.minTime = null != minTime ? minTime : this.minTime, this.highWater = null != highWater ? highWater : this.highWater, this.strategy = null != strategy ? strategy : this.strategy, this.rejectOnDrop = null != rejectOnDrop ? rejectOnDrop : this.rejectOnDrop; this._tryToRun(););
                            return this
                        }, Bottleneck.prototype.changePenalty = function(penalty) {
                            return this.penalty = null != penalty ? penalty : this.penalty, this
                        }, Bottleneck.prototype.changeReservoir = function(reservoir) {
                            for (this.reservoir = reservoir; this._tryToRun(););
                            return this
                        }, Bottleneck.prototype.incrementReservoir = function(incr) {
                            return null == incr && (incr = 0), this.changeReservoir(this.reservoir + incr), this
                        }, Bottleneck.prototype.on = function(name, cb) {
                            return null != this.events[name] ? this.events[name].push(cb) : this.events[name] = [cb], this
                        }, Bottleneck.prototype.removeAllListeners = function(name) {
                            return null == name && (name = null), null != name ? delete this.events[name] : this.events = {}, this
                        }, Bottleneck.prototype.stopAll = function(interrupt) {
                            var j, job, k, keys, l, len, len1;
                            for (this.interrupt = null != interrupt ? interrupt : this.interrupt, j = 0, len = (keys = Object.keys(this._running)).length; j < len; j++) k = keys[j], clearTimeout(this._running[k].timeout);
                            if (this._tryToRun = function() {}, this.check = function() {
                                    return !1
                                }, this.submit = this.submitPriority = function() {
                                    var l;
                                    return 2 <= arguments.length ? slice.call(arguments, 0, l = arguments.length - 1) : (l = 0, []), (0, arguments[l++])(new Error("This limiter is stopped"))
                                }, this.schedule = this.schedulePriority = function() {
                                    return Promise.reject(new Error("This limiter is stopped"))
                                }, this.interrupt)
                                for (l = 0, len1 = keys.length; l < len1; l++) k = keys[l], this._trigger("dropped", [this._running[k].job]);
                            for (; job = this._getFirst(this._queues).shift();) this._trigger("dropped", [job]);
                            return this._trigger("empty", []), 0 === this.nbRunning() && this._trigger("idle", []), this
                        }, Bottleneck
                    }(), module.exports = Bottleneck
                }).call(this)
            }, {
                "./Cluster": 67,
                "./DLList": 68,
                bluebird: 65
            }],
            67: [function(_dereq_, module, exports) {
                (function() {
                    var Cluster, hasProp = {}.hasOwnProperty;
                    Cluster = function() {
                        function Cluster(maxNb, minTime, highWater, strategy, rejectOnDrop) {
                            this.maxNb = maxNb, this.minTime = minTime, this.highWater = highWater, this.strategy = strategy, this.rejectOnDrop = rejectOnDrop, this.limiters = {}, this.Bottleneck = _dereq_("./Bottleneck"), this.timeout = 3e5, this.startAutoCleanup()
                        }
                        return Cluster.prototype.key = function(key) {
                            var ref;
                            return null == key && (key = ""), null != (ref = this.limiters[key]) ? ref : this.limiters[key] = new this.Bottleneck(this.maxNb, this.minTime, this.highWater, this.strategy, this.rejectOnDrop)
                        }, Cluster.prototype.deleteKey = function(key) {
                            return null == key && (key = ""), delete this.limiters[key]
                        }, Cluster.prototype.all = function(cb) {
                            var k, ref, results, v;
                            for (k in results = [], ref = this.limiters) hasProp.call(ref, k) && (v = ref[k], results.push(cb(v)));
                            return results
                        }, Cluster.prototype.keys = function() {
                            return Object.keys(this.limiters)
                        }, Cluster.prototype.startAutoCleanup = function() {
                            var base, _this;
                            return this.stopAutoCleanup(), "function" == typeof(base = this.interval = setInterval((_this = this, function() {
                                var k, ref, results, time;
                                for (k in time = Date.now(), results = [], ref = _this.limiters) ref[k]._nextRequest + _this.timeout < time ? results.push(_this.deleteKey(k)) : results.push(void 0);
                                return results
                            }), this.timeout / 10)).unref ? base.unref() : void 0
                        }, Cluster.prototype.stopAutoCleanup = function() {
                            return clearInterval(this.interval)
                        }, Cluster.prototype.changeTimeout = function(timeout) {
                            return this.timeout = timeout, this.startAutoCleanup()
                        }, Cluster
                    }(), module.exports = Cluster
                }).call(this)
            }, {
                "./Bottleneck": 66
            }],
            68: [function(_dereq_, module, exports) {
                (function() {
                    var DLList;
                    DLList = function() {
                        function DLList() {
                            this._first = null, this._last = null, this.length = 0
                        }
                        return DLList.prototype.push = function(value) {
                            var node;
                            this.length++, node = {
                                value: value,
                                next: null
                            }, null != this._last ? (this._last.next = node, this._last = node) : this._first = this._last = node
                        }, DLList.prototype.shift = function() {
                            var ref1, value;
                            if (null != this._first) return this.length--, value = this._first.value, this._first = null != (ref1 = this._first.next) ? ref1 : this._last = null, value
                        }, DLList.prototype.getArray = function() {
                            var node, ref, results;
                            for (node = this._first, results = []; null != node;) results.push((node = (ref = node).next, ref.value));
                            return results
                        }, DLList
                    }(), module.exports = DLList
                }).call(this)
            }, {}],
            69: [function(_dereq_, module, exports) {
                (function(global) {
                    (function() {
                        module.exports = _dereq_("./Bottleneck"), null != global.window && (global.window.Bottleneck = module.exports)
                    }).call(this)
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {
                "./Bottleneck": 66
            }],
            70: [function(_dereq_, module, exports) {}, {}],
            71: [function(_dereq_, module, exports) {
                "use strict";
                var base64 = _dereq_("base64-js"),
                    ieee754 = _dereq_("ieee754");
                exports.Buffer = Buffer, exports.SlowBuffer = function(length) {
                    +length != length && (length = 0);
                    return Buffer.alloc(+length)
                }, exports.INSPECT_MAX_BYTES = 50;
                var K_MAX_LENGTH = 2147483647;

                function createBuffer(length) {
                    if (K_MAX_LENGTH < length) throw new RangeError("Invalid typed array length");
                    var buf = new Uint8Array(length);
                    return buf.__proto__ = Buffer.prototype, buf
                }

                function Buffer(arg, encodingOrOffset, length) {
                    if ("number" != typeof arg) return from(arg, encodingOrOffset, length);
                    if ("string" == typeof encodingOrOffset) throw new Error("If encoding is specified then the first argument must be a string");
                    return allocUnsafe(arg)
                }

                function from(value, encodingOrOffset, length) {
                    if ("number" == typeof value) throw new TypeError('"value" argument must not be a number');
                    return isArrayBuffer(value) ? function(array, byteOffset, length) {
                        if (byteOffset < 0 || array.byteLength < byteOffset) throw new RangeError("'offset' is out of bounds");
                        if (array.byteLength < byteOffset + (length || 0)) throw new RangeError("'length' is out of bounds");
                        var buf;
                        buf = void 0 === byteOffset && void 0 === length ? new Uint8Array(array) : void 0 === length ? new Uint8Array(array, byteOffset) : new Uint8Array(array, byteOffset, length);
                        return buf.__proto__ = Buffer.prototype, buf
                    }(value, encodingOrOffset, length) : "string" == typeof value ? function(string, encoding) {
                        "string" == typeof encoding && "" !== encoding || (encoding = "utf8");
                        if (!Buffer.isEncoding(encoding)) throw new TypeError('"encoding" must be a valid string encoding');
                        var length = 0 | byteLength(string, encoding),
                            buf = createBuffer(length),
                            actual = buf.write(string, encoding);
                        actual !== length && (buf = buf.slice(0, actual));
                        return buf
                    }(value, encodingOrOffset) : function(obj) {
                        if (Buffer.isBuffer(obj)) {
                            var len = 0 | checked(obj.length),
                                buf = createBuffer(len);
                            return 0 === buf.length || obj.copy(buf, 0, 0, len), buf
                        }
                        if (obj) {
                            if (isArrayBufferView(obj) || "length" in obj) return "number" != typeof obj.length || numberIsNaN(obj.length) ? createBuffer(0) : fromArrayLike(obj);
                            if ("Buffer" === obj.type && Array.isArray(obj.data)) return fromArrayLike(obj.data)
                        }
                        throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
                    }(value)
                }

                function assertSize(size) {
                    if ("number" != typeof size) throw new TypeError('"size" argument must be a number');
                    if (size < 0) throw new RangeError('"size" argument must not be negative')
                }

                function allocUnsafe(size) {
                    return assertSize(size), createBuffer(size < 0 ? 0 : 0 | checked(size))
                }

                function fromArrayLike(array) {
                    for (var length = array.length < 0 ? 0 : 0 | checked(array.length), buf = createBuffer(length), i = 0; i < length; i += 1) buf[i] = 255 & array[i];
                    return buf
                }

                function checked(length) {
                    if (K_MAX_LENGTH <= length) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + K_MAX_LENGTH.toString(16) + " bytes");
                    return 0 | length
                }

                function byteLength(string, encoding) {
                    if (Buffer.isBuffer(string)) return string.length;
                    if (isArrayBufferView(string) || isArrayBuffer(string)) return string.byteLength;
                    "string" != typeof string && (string = "" + string);
                    var len = string.length;
                    if (0 === len) return 0;
                    for (var loweredCase = !1;;) switch (encoding) {
                        case "ascii":
                        case "latin1":
                        case "binary":
                            return len;
                        case "utf8":
                        case "utf-8":
                        case void 0:
                            return utf8ToBytes(string).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return 2 * len;
                        case "hex":
                            return len >>> 1;
                        case "base64":
                            return base64ToBytes(string).length;
                        default:
                            if (loweredCase) return utf8ToBytes(string).length;
                            encoding = ("" + encoding).toLowerCase(), loweredCase = !0
                    }
                }

                function swap(b, n, m) {
                    var i = b[n];
                    b[n] = b[m], b[m] = i
                }

                function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
                    if (0 === buffer.length) return -1;
                    if ("string" == typeof byteOffset ? (encoding = byteOffset, byteOffset = 0) : 2147483647 < byteOffset ? byteOffset = 2147483647 : byteOffset < -2147483648 && (byteOffset = -2147483648), numberIsNaN(byteOffset = +byteOffset) && (byteOffset = dir ? 0 : buffer.length - 1), byteOffset < 0 && (byteOffset = buffer.length + byteOffset), byteOffset >= buffer.length) {
                        if (dir) return -1;
                        byteOffset = buffer.length - 1
                    } else if (byteOffset < 0) {
                        if (!dir) return -1;
                        byteOffset = 0
                    }
                    if ("string" == typeof val && (val = Buffer.from(val, encoding)), Buffer.isBuffer(val)) return 0 === val.length ? -1 : arrayIndexOf(buffer, val, byteOffset, encoding, dir);
                    if ("number" == typeof val) return val &= 255, "function" == typeof Uint8Array.prototype.indexOf ? dir ? Uint8Array.prototype.indexOf.call(buffer, val, byteOffset) : Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset) : arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
                    throw new TypeError("val must be string, number or Buffer")
                }

                function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
                    var i, indexSize = 1,
                        arrLength = arr.length,
                        valLength = val.length;
                    if (void 0 !== encoding && ("ucs2" === (encoding = String(encoding).toLowerCase()) || "ucs-2" === encoding || "utf16le" === encoding || "utf-16le" === encoding)) {
                        if (arr.length < 2 || val.length < 2) return -1;
                        arrLength /= indexSize = 2, valLength /= 2, byteOffset /= 2
                    }

                    function read(buf, i) {
                        return 1 === indexSize ? buf[i] : buf.readUInt16BE(i * indexSize)
                    }
                    if (dir) {
                        var foundIndex = -1;
                        for (i = byteOffset; i < arrLength; i++)
                            if (read(arr, i) === read(val, -1 === foundIndex ? 0 : i - foundIndex)) {
                                if (-1 === foundIndex && (foundIndex = i), i - foundIndex + 1 === valLength) return foundIndex * indexSize
                            } else - 1 !== foundIndex && (i -= i - foundIndex), foundIndex = -1
                    } else
                        for (arrLength < byteOffset + valLength && (byteOffset = arrLength - valLength), i = byteOffset; 0 <= i; i--) {
                            for (var found = !0, j = 0; j < valLength; j++)
                                if (read(arr, i + j) !== read(val, j)) {
                                    found = !1;
                                    break
                                } if (found) return i
                        }
                    return -1
                }

                function hexWrite(buf, string, offset, length) {
                    offset = Number(offset) || 0;
                    var remaining = buf.length - offset;
                    length ? remaining < (length = Number(length)) && (length = remaining) : length = remaining;
                    var strLen = string.length;
                    if (strLen % 2 != 0) throw new TypeError("Invalid hex string");
                    strLen / 2 < length && (length = strLen / 2);
                    for (var i = 0; i < length; ++i) {
                        var parsed = parseInt(string.substr(2 * i, 2), 16);
                        if (numberIsNaN(parsed)) return i;
                        buf[offset + i] = parsed
                    }
                    return i
                }

                function utf8Write(buf, string, offset, length) {
                    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
                }

                function asciiWrite(buf, string, offset, length) {
                    return blitBuffer(function(str) {
                        for (var byteArray = [], i = 0; i < str.length; ++i) byteArray.push(255 & str.charCodeAt(i));
                        return byteArray
                    }(string), buf, offset, length)
                }

                function latin1Write(buf, string, offset, length) {
                    return asciiWrite(buf, string, offset, length)
                }

                function base64Write(buf, string, offset, length) {
                    return blitBuffer(base64ToBytes(string), buf, offset, length)
                }

                function ucs2Write(buf, string, offset, length) {
                    return blitBuffer(function(str, units) {
                        for (var c, hi, lo, byteArray = [], i = 0; i < str.length && !((units -= 2) < 0); ++i) c = str.charCodeAt(i), hi = c >> 8, lo = c % 256, byteArray.push(lo), byteArray.push(hi);
                        return byteArray
                    }(string, buf.length - offset), buf, offset, length)
                }

                function base64Slice(buf, start, end) {
                    return 0 === start && end === buf.length ? base64.fromByteArray(buf) : base64.fromByteArray(buf.slice(start, end))
                }

                function utf8Slice(buf, start, end) {
                    end = Math.min(buf.length, end);
                    for (var res = [], i = start; i < end;) {
                        var secondByte, thirdByte, fourthByte, tempCodePoint, firstByte = buf[i],
                            codePoint = null,
                            bytesPerSequence = 239 < firstByte ? 4 : 223 < firstByte ? 3 : 191 < firstByte ? 2 : 1;
                        if (i + bytesPerSequence <= end) switch (bytesPerSequence) {
                            case 1:
                                firstByte < 128 && (codePoint = firstByte);
                                break;
                            case 2:
                                128 == (192 & (secondByte = buf[i + 1])) && 127 < (tempCodePoint = (31 & firstByte) << 6 | 63 & secondByte) && (codePoint = tempCodePoint);
                                break;
                            case 3:
                                secondByte = buf[i + 1], thirdByte = buf[i + 2], 128 == (192 & secondByte) && 128 == (192 & thirdByte) && 2047 < (tempCodePoint = (15 & firstByte) << 12 | (63 & secondByte) << 6 | 63 & thirdByte) && (tempCodePoint < 55296 || 57343 < tempCodePoint) && (codePoint = tempCodePoint);
                                break;
                            case 4:
                                secondByte = buf[i + 1], thirdByte = buf[i + 2], fourthByte = buf[i + 3], 128 == (192 & secondByte) && 128 == (192 & thirdByte) && 128 == (192 & fourthByte) && 65535 < (tempCodePoint = (15 & firstByte) << 18 | (63 & secondByte) << 12 | (63 & thirdByte) << 6 | 63 & fourthByte) && tempCodePoint < 1114112 && (codePoint = tempCodePoint)
                        }
                        null === codePoint ? (codePoint = 65533, bytesPerSequence = 1) : 65535 < codePoint && (codePoint -= 65536, res.push(codePoint >>> 10 & 1023 | 55296), codePoint = 56320 | 1023 & codePoint), res.push(codePoint), i += bytesPerSequence
                    }
                    return function(codePoints) {
                        var len = codePoints.length;
                        if (len <= MAX_ARGUMENTS_LENGTH) return String.fromCharCode.apply(String, codePoints);
                        var res = "",
                            i = 0;
                        for (; i < len;) res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));
                        return res
                    }(res)
                }
                exports.kMaxLength = K_MAX_LENGTH, (Buffer.TYPED_ARRAY_SUPPORT = function() {
                    try {
                        var arr = new Uint8Array(1);
                        return arr.__proto__ = {
                            __proto__: Uint8Array.prototype,
                            foo: function() {
                                return 42
                            }
                        }, 42 === arr.foo()
                    } catch (e) {
                        return !1
                    }
                }()) || "undefined" == typeof console || "function" != typeof console.error || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), "undefined" != typeof Symbol && Symbol.species && Buffer[Symbol.species] === Buffer && Object.defineProperty(Buffer, Symbol.species, {
                    value: null,
                    configurable: !0,
                    enumerable: !1,
                    writable: !1
                }), Buffer.poolSize = 8192, Buffer.from = function(value, encodingOrOffset, length) {
                    return from(value, encodingOrOffset, length)
                }, Buffer.prototype.__proto__ = Uint8Array.prototype, Buffer.__proto__ = Uint8Array, Buffer.alloc = function(size, fill, encoding) {
                    return function(size, fill, encoding) {
                        return assertSize(size), size <= 0 ? createBuffer(size) : void 0 !== fill ? "string" == typeof encoding ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill) : createBuffer(size)
                    }(size, fill, encoding)
                }, Buffer.allocUnsafe = function(size) {
                    return allocUnsafe(size)
                }, Buffer.allocUnsafeSlow = function(size) {
                    return allocUnsafe(size)
                }, Buffer.isBuffer = function(b) {
                    return null != b && !0 === b._isBuffer
                }, Buffer.compare = function(a, b) {
                    if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) throw new TypeError("Arguments must be Buffers");
                    if (a === b) return 0;
                    for (var x = a.length, y = b.length, i = 0, len = Math.min(x, y); i < len; ++i)
                        if (a[i] !== b[i]) {
                            x = a[i], y = b[i];
                            break
                        } return x < y ? -1 : y < x ? 1 : 0
                }, Buffer.isEncoding = function(encoding) {
                    switch (String(encoding).toLowerCase()) {
                        case "hex":
                        case "utf8":
                        case "utf-8":
                        case "ascii":
                        case "latin1":
                        case "binary":
                        case "base64":
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return !0;
                        default:
                            return !1
                    }
                }, Buffer.concat = function(list, length) {
                    if (!Array.isArray(list)) throw new TypeError('"list" argument must be an Array of Buffers');
                    if (0 === list.length) return Buffer.alloc(0);
                    var i;
                    if (void 0 === length)
                        for (i = length = 0; i < list.length; ++i) length += list[i].length;
                    var buffer = Buffer.allocUnsafe(length),
                        pos = 0;
                    for (i = 0; i < list.length; ++i) {
                        var buf = list[i];
                        if (!Buffer.isBuffer(buf)) throw new TypeError('"list" argument must be an Array of Buffers');
                        buf.copy(buffer, pos), pos += buf.length
                    }
                    return buffer
                }, Buffer.byteLength = byteLength, Buffer.prototype._isBuffer = !0, Buffer.prototype.swap16 = function() {
                    var len = this.length;
                    if (len % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                    for (var i = 0; i < len; i += 2) swap(this, i, i + 1);
                    return this
                }, Buffer.prototype.swap32 = function() {
                    var len = this.length;
                    if (len % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                    for (var i = 0; i < len; i += 4) swap(this, i, i + 3), swap(this, i + 1, i + 2);
                    return this
                }, Buffer.prototype.swap64 = function() {
                    var len = this.length;
                    if (len % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                    for (var i = 0; i < len; i += 8) swap(this, i, i + 7), swap(this, i + 1, i + 6), swap(this, i + 2, i + 5), swap(this, i + 3, i + 4);
                    return this
                }, Buffer.prototype.toString = function() {
                    var length = this.length;
                    return 0 === length ? "" : 0 === arguments.length ? utf8Slice(this, 0, length) : function(encoding, start, end) {
                        var loweredCase = !1;
                        if ((void 0 === start || start < 0) && (start = 0), start > this.length) return "";
                        if ((void 0 === end || end > this.length) && (end = this.length), end <= 0) return "";
                        if ((end >>>= 0) <= (start >>>= 0)) return "";
                        for (encoding || (encoding = "utf8");;) switch (encoding) {
                            case "hex":
                                return hexSlice(this, start, end);
                            case "utf8":
                            case "utf-8":
                                return utf8Slice(this, start, end);
                            case "ascii":
                                return asciiSlice(this, start, end);
                            case "latin1":
                            case "binary":
                                return latin1Slice(this, start, end);
                            case "base64":
                                return base64Slice(this, start, end);
                            case "ucs2":
                            case "ucs-2":
                            case "utf16le":
                            case "utf-16le":
                                return utf16leSlice(this, start, end);
                            default:
                                if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                                encoding = (encoding + "").toLowerCase(), loweredCase = !0
                        }
                    }.apply(this, arguments)
                }, Buffer.prototype.equals = function(b) {
                    if (!Buffer.isBuffer(b)) throw new TypeError("Argument must be a Buffer");
                    return this === b || 0 === Buffer.compare(this, b)
                }, Buffer.prototype.inspect = function() {
                    var str = "",
                        max = exports.INSPECT_MAX_BYTES;
                    return 0 < this.length && (str = this.toString("hex", 0, max).match(/.{2}/g).join(" "), this.length > max && (str += " ... ")), "<Buffer " + str + ">"
                }, Buffer.prototype.compare = function(target, start, end, thisStart, thisEnd) {
                    if (!Buffer.isBuffer(target)) throw new TypeError("Argument must be a Buffer");
                    if (void 0 === start && (start = 0), void 0 === end && (end = target ? target.length : 0), void 0 === thisStart && (thisStart = 0), void 0 === thisEnd && (thisEnd = this.length), start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) throw new RangeError("out of range index");
                    if (thisEnd <= thisStart && end <= start) return 0;
                    if (thisEnd <= thisStart) return -1;
                    if (end <= start) return 1;
                    if (this === target) return 0;
                    for (var x = (thisEnd >>>= 0) - (thisStart >>>= 0), y = (end >>>= 0) - (start >>>= 0), len = Math.min(x, y), thisCopy = this.slice(thisStart, thisEnd), targetCopy = target.slice(start, end), i = 0; i < len; ++i)
                        if (thisCopy[i] !== targetCopy[i]) {
                            x = thisCopy[i], y = targetCopy[i];
                            break
                        } return x < y ? -1 : y < x ? 1 : 0
                }, Buffer.prototype.includes = function(val, byteOffset, encoding) {
                    return -1 !== this.indexOf(val, byteOffset, encoding)
                }, Buffer.prototype.indexOf = function(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, !0)
                }, Buffer.prototype.lastIndexOf = function(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, !1)
                }, Buffer.prototype.write = function(string, offset, length, encoding) {
                    if (void 0 === offset) encoding = "utf8", length = this.length, offset = 0;
                    else if (void 0 === length && "string" == typeof offset) encoding = offset, length = this.length, offset = 0;
                    else {
                        if (!isFinite(offset)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                        offset >>>= 0, isFinite(length) ? (length >>>= 0, void 0 === encoding && (encoding = "utf8")) : (encoding = length, length = void 0)
                    }
                    var remaining = this.length - offset;
                    if ((void 0 === length || remaining < length) && (length = remaining), 0 < string.length && (length < 0 || offset < 0) || offset > this.length) throw new RangeError("Attempt to write outside buffer bounds");
                    encoding || (encoding = "utf8");
                    for (var loweredCase = !1;;) switch (encoding) {
                        case "hex":
                            return hexWrite(this, string, offset, length);
                        case "utf8":
                        case "utf-8":
                            return utf8Write(this, string, offset, length);
                        case "ascii":
                            return asciiWrite(this, string, offset, length);
                        case "latin1":
                        case "binary":
                            return latin1Write(this, string, offset, length);
                        case "base64":
                            return base64Write(this, string, offset, length);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return ucs2Write(this, string, offset, length);
                        default:
                            if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                            encoding = ("" + encoding).toLowerCase(), loweredCase = !0
                    }
                }, Buffer.prototype.toJSON = function() {
                    return {
                        type: "Buffer",
                        data: Array.prototype.slice.call(this._arr || this, 0)
                    }
                };
                var MAX_ARGUMENTS_LENGTH = 4096;

                function asciiSlice(buf, start, end) {
                    var ret = "";
                    end = Math.min(buf.length, end);
                    for (var i = start; i < end; ++i) ret += String.fromCharCode(127 & buf[i]);
                    return ret
                }

                function latin1Slice(buf, start, end) {
                    var ret = "";
                    end = Math.min(buf.length, end);
                    for (var i = start; i < end; ++i) ret += String.fromCharCode(buf[i]);
                    return ret
                }

                function hexSlice(buf, start, end) {
                    var len = buf.length;
                    (!start || start < 0) && (start = 0), (!end || end < 0 || len < end) && (end = len);
                    for (var out = "", i = start; i < end; ++i) out += toHex(buf[i]);
                    return out
                }

                function utf16leSlice(buf, start, end) {
                    for (var bytes = buf.slice(start, end), res = "", i = 0; i < bytes.length; i += 2) res += String.fromCharCode(bytes[i] + 256 * bytes[i + 1]);
                    return res
                }

                function checkOffset(offset, ext, length) {
                    if (offset % 1 != 0 || offset < 0) throw new RangeError("offset is not uint");
                    if (length < offset + ext) throw new RangeError("Trying to access beyond buffer length")
                }

                function checkInt(buf, value, offset, ext, max, min) {
                    if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (max < value || value < min) throw new RangeError('"value" argument is out of bounds');
                    if (offset + ext > buf.length) throw new RangeError("Index out of range")
                }

                function checkIEEE754(buf, value, offset, ext, max, min) {
                    if (offset + ext > buf.length) throw new RangeError("Index out of range");
                    if (offset < 0) throw new RangeError("Index out of range")
                }

                function writeFloat(buf, value, offset, littleEndian, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkIEEE754(buf, 0, offset, 4), ieee754.write(buf, value, offset, littleEndian, 23, 4), offset + 4
                }

                function writeDouble(buf, value, offset, littleEndian, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkIEEE754(buf, 0, offset, 8), ieee754.write(buf, value, offset, littleEndian, 52, 8), offset + 8
                }
                Buffer.prototype.slice = function(start, end) {
                    var len = this.length;
                    (start = ~~start) < 0 ? (start += len) < 0 && (start = 0) : len < start && (start = len), (end = void 0 === end ? len : ~~end) < 0 ? (end += len) < 0 && (end = 0) : len < end && (end = len), end < start && (end = start);
                    var newBuf = this.subarray(start, end);
                    return newBuf.__proto__ = Buffer.prototype, newBuf
                }, Buffer.prototype.readUIntLE = function(offset, byteLength, noAssert) {
                    offset >>>= 0, byteLength >>>= 0, noAssert || checkOffset(offset, byteLength, this.length);
                    for (var val = this[offset], mul = 1, i = 0; ++i < byteLength && (mul *= 256);) val += this[offset + i] * mul;
                    return val
                }, Buffer.prototype.readUIntBE = function(offset, byteLength, noAssert) {
                    offset >>>= 0, byteLength >>>= 0, noAssert || checkOffset(offset, byteLength, this.length);
                    for (var val = this[offset + --byteLength], mul = 1; 0 < byteLength && (mul *= 256);) val += this[offset + --byteLength] * mul;
                    return val
                }, Buffer.prototype.readUInt8 = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 1, this.length), this[offset]
                }, Buffer.prototype.readUInt16LE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 2, this.length), this[offset] | this[offset + 1] << 8
                }, Buffer.prototype.readUInt16BE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 2, this.length), this[offset] << 8 | this[offset + 1]
                }, Buffer.prototype.readUInt32LE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + 16777216 * this[offset + 3]
                }, Buffer.prototype.readUInt32BE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), 16777216 * this[offset] + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3])
                }, Buffer.prototype.readIntLE = function(offset, byteLength, noAssert) {
                    offset >>>= 0, byteLength >>>= 0, noAssert || checkOffset(offset, byteLength, this.length);
                    for (var val = this[offset], mul = 1, i = 0; ++i < byteLength && (mul *= 256);) val += this[offset + i] * mul;
                    return (mul *= 128) <= val && (val -= Math.pow(2, 8 * byteLength)), val
                }, Buffer.prototype.readIntBE = function(offset, byteLength, noAssert) {
                    offset >>>= 0, byteLength >>>= 0, noAssert || checkOffset(offset, byteLength, this.length);
                    for (var i = byteLength, mul = 1, val = this[offset + --i]; 0 < i && (mul *= 256);) val += this[offset + --i] * mul;
                    return (mul *= 128) <= val && (val -= Math.pow(2, 8 * byteLength)), val
                }, Buffer.prototype.readInt8 = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 1, this.length), 128 & this[offset] ? -1 * (255 - this[offset] + 1) : this[offset]
                }, Buffer.prototype.readInt16LE = function(offset, noAssert) {
                    offset >>>= 0, noAssert || checkOffset(offset, 2, this.length);
                    var val = this[offset] | this[offset + 1] << 8;
                    return 32768 & val ? 4294901760 | val : val
                }, Buffer.prototype.readInt16BE = function(offset, noAssert) {
                    offset >>>= 0, noAssert || checkOffset(offset, 2, this.length);
                    var val = this[offset + 1] | this[offset] << 8;
                    return 32768 & val ? 4294901760 | val : val
                }, Buffer.prototype.readInt32LE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24
                }, Buffer.prototype.readInt32BE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]
                }, Buffer.prototype.readFloatLE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), ieee754.read(this, offset, !0, 23, 4)
                }, Buffer.prototype.readFloatBE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 4, this.length), ieee754.read(this, offset, !1, 23, 4)
                }, Buffer.prototype.readDoubleLE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 8, this.length), ieee754.read(this, offset, !0, 52, 8)
                }, Buffer.prototype.readDoubleBE = function(offset, noAssert) {
                    return offset >>>= 0, noAssert || checkOffset(offset, 8, this.length), ieee754.read(this, offset, !1, 52, 8)
                }, Buffer.prototype.writeUIntLE = function(value, offset, byteLength, noAssert) {
                    (value = +value, offset >>>= 0, byteLength >>>= 0, noAssert) || checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength) - 1, 0);
                    var mul = 1,
                        i = 0;
                    for (this[offset] = 255 & value; ++i < byteLength && (mul *= 256);) this[offset + i] = value / mul & 255;
                    return offset + byteLength
                }, Buffer.prototype.writeUIntBE = function(value, offset, byteLength, noAssert) {
                    (value = +value, offset >>>= 0, byteLength >>>= 0, noAssert) || checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength) - 1, 0);
                    var i = byteLength - 1,
                        mul = 1;
                    for (this[offset + i] = 255 & value; 0 <= --i && (mul *= 256);) this[offset + i] = value / mul & 255;
                    return offset + byteLength
                }, Buffer.prototype.writeUInt8 = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 1, 255, 0), this[offset] = 255 & value, offset + 1
                }, Buffer.prototype.writeUInt16LE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 2, 65535, 0), this[offset] = 255 & value, this[offset + 1] = value >>> 8, offset + 2
                }, Buffer.prototype.writeUInt16BE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 2, 65535, 0), this[offset] = value >>> 8, this[offset + 1] = 255 & value, offset + 2
                }, Buffer.prototype.writeUInt32LE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 4, 4294967295, 0), this[offset + 3] = value >>> 24, this[offset + 2] = value >>> 16, this[offset + 1] = value >>> 8, this[offset] = 255 & value, offset + 4
                }, Buffer.prototype.writeUInt32BE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 4, 4294967295, 0), this[offset] = value >>> 24, this[offset + 1] = value >>> 16, this[offset + 2] = value >>> 8, this[offset + 3] = 255 & value, offset + 4
                }, Buffer.prototype.writeIntLE = function(value, offset, byteLength, noAssert) {
                    if (value = +value, offset >>>= 0, !noAssert) {
                        var limit = Math.pow(2, 8 * byteLength - 1);
                        checkInt(this, value, offset, byteLength, limit - 1, -limit)
                    }
                    var i = 0,
                        mul = 1,
                        sub = 0;
                    for (this[offset] = 255 & value; ++i < byteLength && (mul *= 256);) value < 0 && 0 === sub && 0 !== this[offset + i - 1] && (sub = 1), this[offset + i] = (value / mul >> 0) - sub & 255;
                    return offset + byteLength
                }, Buffer.prototype.writeIntBE = function(value, offset, byteLength, noAssert) {
                    if (value = +value, offset >>>= 0, !noAssert) {
                        var limit = Math.pow(2, 8 * byteLength - 1);
                        checkInt(this, value, offset, byteLength, limit - 1, -limit)
                    }
                    var i = byteLength - 1,
                        mul = 1,
                        sub = 0;
                    for (this[offset + i] = 255 & value; 0 <= --i && (mul *= 256);) value < 0 && 0 === sub && 0 !== this[offset + i + 1] && (sub = 1), this[offset + i] = (value / mul >> 0) - sub & 255;
                    return offset + byteLength
                }, Buffer.prototype.writeInt8 = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 1, 127, -128), value < 0 && (value = 255 + value + 1), this[offset] = 255 & value, offset + 1
                }, Buffer.prototype.writeInt16LE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 2, 32767, -32768), this[offset] = 255 & value, this[offset + 1] = value >>> 8, offset + 2
                }, Buffer.prototype.writeInt16BE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 2, 32767, -32768), this[offset] = value >>> 8, this[offset + 1] = 255 & value, offset + 2
                }, Buffer.prototype.writeInt32LE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 4, 2147483647, -2147483648), this[offset] = 255 & value, this[offset + 1] = value >>> 8, this[offset + 2] = value >>> 16, this[offset + 3] = value >>> 24, offset + 4
                }, Buffer.prototype.writeInt32BE = function(value, offset, noAssert) {
                    return value = +value, offset >>>= 0, noAssert || checkInt(this, value, offset, 4, 2147483647, -2147483648), value < 0 && (value = 4294967295 + value + 1), this[offset] = value >>> 24, this[offset + 1] = value >>> 16, this[offset + 2] = value >>> 8, this[offset + 3] = 255 & value, offset + 4
                }, Buffer.prototype.writeFloatLE = function(value, offset, noAssert) {
                    return writeFloat(this, value, offset, !0, noAssert)
                }, Buffer.prototype.writeFloatBE = function(value, offset, noAssert) {
                    return writeFloat(this, value, offset, !1, noAssert)
                }, Buffer.prototype.writeDoubleLE = function(value, offset, noAssert) {
                    return writeDouble(this, value, offset, !0, noAssert)
                }, Buffer.prototype.writeDoubleBE = function(value, offset, noAssert) {
                    return writeDouble(this, value, offset, !1, noAssert)
                }, Buffer.prototype.copy = function(target, targetStart, start, end) {
                    if (start || (start = 0), end || 0 === end || (end = this.length), targetStart >= target.length && (targetStart = target.length), targetStart || (targetStart = 0), 0 < end && end < start && (end = start), end === start) return 0;
                    if (0 === target.length || 0 === this.length) return 0;
                    if (targetStart < 0) throw new RangeError("targetStart out of bounds");
                    if (start < 0 || start >= this.length) throw new RangeError("sourceStart out of bounds");
                    if (end < 0) throw new RangeError("sourceEnd out of bounds");
                    end > this.length && (end = this.length), target.length - targetStart < end - start && (end = target.length - targetStart + start);
                    var i, len = end - start;
                    if (this === target && start < targetStart && targetStart < end)
                        for (i = len - 1; 0 <= i; --i) target[i + targetStart] = this[i + start];
                    else if (len < 1e3)
                        for (i = 0; i < len; ++i) target[i + targetStart] = this[i + start];
                    else Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);
                    return len
                }, Buffer.prototype.fill = function(val, start, end, encoding) {
                    if ("string" == typeof val) {
                        if ("string" == typeof start ? (encoding = start, start = 0, end = this.length) : "string" == typeof end && (encoding = end, end = this.length), 1 === val.length) {
                            var code = val.charCodeAt(0);
                            code < 256 && (val = code)
                        }
                        if (void 0 !== encoding && "string" != typeof encoding) throw new TypeError("encoding must be a string");
                        if ("string" == typeof encoding && !Buffer.isEncoding(encoding)) throw new TypeError("Unknown encoding: " + encoding)
                    } else "number" == typeof val && (val &= 255);
                    if (start < 0 || this.length < start || this.length < end) throw new RangeError("Out of range index");
                    if (end <= start) return this;
                    var i;
                    if (start >>>= 0, end = void 0 === end ? this.length : end >>> 0, val || (val = 0), "number" == typeof val)
                        for (i = start; i < end; ++i) this[i] = val;
                    else {
                        var bytes = Buffer.isBuffer(val) ? val : new Buffer(val, encoding),
                            len = bytes.length;
                        for (i = 0; i < end - start; ++i) this[i + start] = bytes[i % len]
                    }
                    return this
                };
                var INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;

                function toHex(n) {
                    return n < 16 ? "0" + n.toString(16) : n.toString(16)
                }

                function utf8ToBytes(string, units) {
                    var codePoint;
                    units = units || 1 / 0;
                    for (var length = string.length, leadSurrogate = null, bytes = [], i = 0; i < length; ++i) {
                        if (55295 < (codePoint = string.charCodeAt(i)) && codePoint < 57344) {
                            if (!leadSurrogate) {
                                if (56319 < codePoint) {
                                    -1 < (units -= 3) && bytes.push(239, 191, 189);
                                    continue
                                }
                                if (i + 1 === length) {
                                    -1 < (units -= 3) && bytes.push(239, 191, 189);
                                    continue
                                }
                                leadSurrogate = codePoint;
                                continue
                            }
                            if (codePoint < 56320) {
                                -1 < (units -= 3) && bytes.push(239, 191, 189), leadSurrogate = codePoint;
                                continue
                            }
                            codePoint = 65536 + (leadSurrogate - 55296 << 10 | codePoint - 56320)
                        } else leadSurrogate && -1 < (units -= 3) && bytes.push(239, 191, 189);
                        if (leadSurrogate = null, codePoint < 128) {
                            if ((units -= 1) < 0) break;
                            bytes.push(codePoint)
                        } else if (codePoint < 2048) {
                            if ((units -= 2) < 0) break;
                            bytes.push(codePoint >> 6 | 192, 63 & codePoint | 128)
                        } else if (codePoint < 65536) {
                            if ((units -= 3) < 0) break;
                            bytes.push(codePoint >> 12 | 224, codePoint >> 6 & 63 | 128, 63 & codePoint | 128)
                        } else {
                            if (!(codePoint < 1114112)) throw new Error("Invalid code point");
                            if ((units -= 4) < 0) break;
                            bytes.push(codePoint >> 18 | 240, codePoint >> 12 & 63 | 128, codePoint >> 6 & 63 | 128, 63 & codePoint | 128)
                        }
                    }
                    return bytes
                }

                function base64ToBytes(str) {
                    return base64.toByteArray(function(str) {
                        if ((str = str.trim().replace(INVALID_BASE64_RE, "")).length < 2) return "";
                        for (; str.length % 4 != 0;) str += "=";
                        return str
                    }(str))
                }

                function blitBuffer(src, dst, offset, length) {
                    for (var i = 0; i < length && !(i + offset >= dst.length || i >= src.length); ++i) dst[i + offset] = src[i];
                    return i
                }

                function isArrayBuffer(obj) {
                    return obj instanceof ArrayBuffer || null != obj && null != obj.constructor && "ArrayBuffer" === obj.constructor.name && "number" == typeof obj.byteLength
                }

                function isArrayBufferView(obj) {
                    return "function" == typeof ArrayBuffer.isView && ArrayBuffer.isView(obj)
                }

                function numberIsNaN(obj) {
                    return obj != obj
                }
            }, {
                "base64-js": 64,
                ieee754: 215
            }],
            72: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.string.iterator"), _dereq_("../../modules/es6.array.from"), module.exports = _dereq_("../../modules/_core").Array.from
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.array.from": 180,
                "../../modules/es6.string.iterator": 196
            }],
            73: [function(_dereq_, module, exports) {
                _dereq_("../modules/web.dom.iterable"), _dereq_("../modules/es6.string.iterator"), module.exports = _dereq_("../modules/core.get-iterator")
            }, {
                "../modules/core.get-iterator": 178,
                "../modules/es6.string.iterator": 196,
                "../modules/web.dom.iterable": 208
            }],
            74: [function(_dereq_, module, exports) {
                _dereq_("../modules/web.dom.iterable"), _dereq_("../modules/es6.string.iterator"), module.exports = _dereq_("../modules/core.is-iterable")
            }, {
                "../modules/core.is-iterable": 179,
                "../modules/es6.string.iterator": 196,
                "../modules/web.dom.iterable": 208
            }],
            75: [function(_dereq_, module, exports) {
                var core = _dereq_("../../modules/_core"),
                    $JSON = core.JSON || (core.JSON = {
                        stringify: JSON.stringify
                    });
                module.exports = function(it) {
                    return $JSON.stringify.apply($JSON, arguments)
                }
            }, {
                "../../modules/_core": 106
            }],
            76: [function(_dereq_, module, exports) {
                _dereq_("../modules/es6.object.to-string"), _dereq_("../modules/es6.string.iterator"), _dereq_("../modules/web.dom.iterable"), _dereq_("../modules/es6.map"), _dereq_("../modules/es7.map.to-json"), _dereq_("../modules/es7.map.of"), _dereq_("../modules/es7.map.from"), module.exports = _dereq_("../modules/_core").Map
            }, {
                "../modules/_core": 106,
                "../modules/es6.map": 182,
                "../modules/es6.object.to-string": 192,
                "../modules/es6.string.iterator": 196,
                "../modules/es7.map.from": 198,
                "../modules/es7.map.of": 199,
                "../modules/es7.map.to-json": 200,
                "../modules/web.dom.iterable": 208
            }],
            77: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.number.is-integer"), module.exports = _dereq_("../../modules/_core").Number.isInteger
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.number.is-integer": 183
            }],
            78: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.assign"), module.exports = _dereq_("../../modules/_core").Object.assign
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.assign": 184
            }],
            79: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.create");
                var $Object = _dereq_("../../modules/_core").Object;
                module.exports = function(P, D) {
                    return $Object.create(P, D)
                }
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.create": 185
            }],
            80: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.define-properties");
                var $Object = _dereq_("../../modules/_core").Object;
                module.exports = function(T, D) {
                    return $Object.defineProperties(T, D)
                }
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.define-properties": 186
            }],
            81: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.define-property");
                var $Object = _dereq_("../../modules/_core").Object;
                module.exports = function(it, key, desc) {
                    return $Object.defineProperty(it, key, desc)
                }
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.define-property": 187
            }],
            82: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.freeze"), module.exports = _dereq_("../../modules/_core").Object.freeze
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.freeze": 188
            }],
            83: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.get-prototype-of"), module.exports = _dereq_("../../modules/_core").Object.getPrototypeOf
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.get-prototype-of": 189
            }],
            84: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.keys"), module.exports = _dereq_("../../modules/_core").Object.keys
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.keys": 190
            }],
            85: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.object.set-prototype-of"), module.exports = _dereq_("../../modules/_core").Object.setPrototypeOf
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.set-prototype-of": 191
            }],
            86: [function(_dereq_, module, exports) {
                _dereq_("../modules/es6.object.to-string"), _dereq_("../modules/es6.string.iterator"), _dereq_("../modules/web.dom.iterable"), _dereq_("../modules/es6.promise"), _dereq_("../modules/es7.promise.finally"), _dereq_("../modules/es7.promise.try"), module.exports = _dereq_("../modules/_core").Promise
            }, {
                "../modules/_core": 106,
                "../modules/es6.object.to-string": 192,
                "../modules/es6.promise": 193,
                "../modules/es6.string.iterator": 196,
                "../modules/es7.promise.finally": 201,
                "../modules/es7.promise.try": 202,
                "../modules/web.dom.iterable": 208
            }],
            87: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.reflect.construct"), module.exports = _dereq_("../../modules/_core").Reflect.construct
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.reflect.construct": 194
            }],
            88: [function(_dereq_, module, exports) {
                _dereq_("../modules/es6.object.to-string"), _dereq_("../modules/es6.string.iterator"), _dereq_("../modules/web.dom.iterable"), _dereq_("../modules/es6.set"), _dereq_("../modules/es7.set.to-json"), _dereq_("../modules/es7.set.of"), _dereq_("../modules/es7.set.from"), module.exports = _dereq_("../modules/_core").Set
            }, {
                "../modules/_core": 106,
                "../modules/es6.object.to-string": 192,
                "../modules/es6.set": 195,
                "../modules/es6.string.iterator": 196,
                "../modules/es7.set.from": 203,
                "../modules/es7.set.of": 204,
                "../modules/es7.set.to-json": 205,
                "../modules/web.dom.iterable": 208
            }],
            89: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.symbol"), _dereq_("../../modules/es6.object.to-string"), _dereq_("../../modules/es7.symbol.async-iterator"), _dereq_("../../modules/es7.symbol.observable"), module.exports = _dereq_("../../modules/_core").Symbol
            }, {
                "../../modules/_core": 106,
                "../../modules/es6.object.to-string": 192,
                "../../modules/es6.symbol": 197,
                "../../modules/es7.symbol.async-iterator": 206,
                "../../modules/es7.symbol.observable": 207
            }],
            90: [function(_dereq_, module, exports) {
                _dereq_("../../modules/es6.string.iterator"), _dereq_("../../modules/web.dom.iterable"), module.exports = _dereq_("../../modules/_wks-ext").f("iterator")
            }, {
                "../../modules/_wks-ext": 175,
                "../../modules/es6.string.iterator": 196,
                "../../modules/web.dom.iterable": 208
            }],
            91: [function(_dereq_, module, exports) {
                module.exports = function(it) {
                    if ("function" != typeof it) throw TypeError(it + " is not a function!");
                    return it
                }
            }, {}],
            92: [function(_dereq_, module, exports) {
                module.exports = function() {}
            }, {}],
            93: [function(_dereq_, module, exports) {
                module.exports = function(it, Constructor, name, forbiddenField) {
                    if (!(it instanceof Constructor) || void 0 !== forbiddenField && forbiddenField in it) throw TypeError(name + ": incorrect invocation!");
                    return it
                }
            }, {}],
            94: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object");
                module.exports = function(it) {
                    if (!isObject(it)) throw TypeError(it + " is not an object!");
                    return it
                }
            }, {
                "./_is-object": 127
            }],
            95: [function(_dereq_, module, exports) {
                var forOf = _dereq_("./_for-of");
                module.exports = function(iter, ITERATOR) {
                    var result = [];
                    return forOf(iter, !1, result.push, result, ITERATOR), result
                }
            }, {
                "./_for-of": 116
            }],
            96: [function(_dereq_, module, exports) {
                var toIObject = _dereq_("./_to-iobject"),
                    toLength = _dereq_("./_to-length"),
                    toAbsoluteIndex = _dereq_("./_to-absolute-index");
                module.exports = function(IS_INCLUDES) {
                    return function($this, el, fromIndex) {
                        var value, O = toIObject($this),
                            length = toLength(O.length),
                            index = toAbsoluteIndex(fromIndex, length);
                        if (IS_INCLUDES && el != el) {
                            for (; index < length;)
                                if ((value = O[index++]) != value) return !0
                        } else
                            for (; index < length; index++)
                                if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
                        return !IS_INCLUDES && -1
                    }
                }
            }, {
                "./_to-absolute-index": 166,
                "./_to-iobject": 168,
                "./_to-length": 169
            }],
            97: [function(_dereq_, module, exports) {
                var ctx = _dereq_("./_ctx"),
                    IObject = _dereq_("./_iobject"),
                    toObject = _dereq_("./_to-object"),
                    toLength = _dereq_("./_to-length"),
                    asc = _dereq_("./_array-species-create");
                module.exports = function(TYPE, $create) {
                    var IS_MAP = 1 == TYPE,
                        IS_FILTER = 2 == TYPE,
                        IS_SOME = 3 == TYPE,
                        IS_EVERY = 4 == TYPE,
                        IS_FIND_INDEX = 6 == TYPE,
                        NO_HOLES = 5 == TYPE || IS_FIND_INDEX,
                        create = $create || asc;
                    return function($this, callbackfn, that) {
                        for (var val, res, O = toObject($this), self = IObject(O), f = ctx(callbackfn, that, 3), length = toLength(self.length), index = 0, result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : void 0; index < length; index++)
                            if ((NO_HOLES || index in self) && (res = f(val = self[index], index, O), TYPE))
                                if (IS_MAP) result[index] = res;
                                else if (res) switch (TYPE) {
                            case 3:
                                return !0;
                            case 5:
                                return val;
                            case 6:
                                return index;
                            case 2:
                                result.push(val)
                        } else if (IS_EVERY) return !1;
                        return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result
                    }
                }
            }, {
                "./_array-species-create": 99,
                "./_ctx": 108,
                "./_iobject": 123,
                "./_to-length": 169,
                "./_to-object": 170
            }],
            98: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object"),
                    isArray = _dereq_("./_is-array"),
                    SPECIES = _dereq_("./_wks")("species");
                module.exports = function(original) {
                    var C;
                    return isArray(original) && ("function" != typeof(C = original.constructor) || C !== Array && !isArray(C.prototype) || (C = void 0), isObject(C) && null === (C = C[SPECIES]) && (C = void 0)), void 0 === C ? Array : C
                }
            }, {
                "./_is-array": 125,
                "./_is-object": 127,
                "./_wks": 176
            }],
            99: [function(_dereq_, module, exports) {
                var speciesConstructor = _dereq_("./_array-species-constructor");
                module.exports = function(original, length) {
                    return new(speciesConstructor(original))(length)
                }
            }, {
                "./_array-species-constructor": 98
            }],
            100: [function(_dereq_, module, exports) {
                "use strict";
                var aFunction = _dereq_("./_a-function"),
                    isObject = _dereq_("./_is-object"),
                    invoke = _dereq_("./_invoke"),
                    arraySlice = [].slice,
                    factories = {};
                module.exports = Function.bind || function(that) {
                    var fn = aFunction(this),
                        partArgs = arraySlice.call(arguments, 1),
                        bound = function bound() {
                            var args = partArgs.concat(arraySlice.call(arguments));
                            return this instanceof bound ? function(F, len, args) {
                                if (!(len in factories)) {
                                    for (var n = [], i = 0; i < len; i++) n[i] = "a[" + i + "]";
                                    factories[len] = Function("F,a", "return new F(" + n.join(",") + ")")
                                }
                                return factories[len](F, args)
                            }(fn, args.length, args) : invoke(fn, args, that)
                        };
                    return isObject(fn.prototype) && (bound.prototype = fn.prototype), bound
                }
            }, {
                "./_a-function": 91,
                "./_invoke": 122,
                "./_is-object": 127
            }],
            101: [function(_dereq_, module, exports) {
                var cof = _dereq_("./_cof"),
                    TAG = _dereq_("./_wks")("toStringTag"),
                    ARG = "Arguments" == cof(function() {
                        return arguments
                    }());
                module.exports = function(it) {
                    var O, T, B;
                    return void 0 === it ? "Undefined" : null === it ? "Null" : "string" == typeof(T = function(it, key) {
                        try {
                            return it[key]
                        } catch (e) {}
                    }(O = Object(it), TAG)) ? T : ARG ? cof(O) : "Object" == (B = cof(O)) && "function" == typeof O.callee ? "Arguments" : B
                }
            }, {
                "./_cof": 102,
                "./_wks": 176
            }],
            102: [function(_dereq_, module, exports) {
                var toString = {}.toString;
                module.exports = function(it) {
                    return toString.call(it).slice(8, -1)
                }
            }, {}],
            103: [function(_dereq_, module, exports) {
                "use strict";
                var dP = _dereq_("./_object-dp").f,
                    create = _dereq_("./_object-create"),
                    redefineAll = _dereq_("./_redefine-all"),
                    ctx = _dereq_("./_ctx"),
                    anInstance = _dereq_("./_an-instance"),
                    forOf = _dereq_("./_for-of"),
                    $iterDefine = _dereq_("./_iter-define"),
                    step = _dereq_("./_iter-step"),
                    setSpecies = _dereq_("./_set-species"),
                    DESCRIPTORS = _dereq_("./_descriptors"),
                    fastKey = _dereq_("./_meta").fastKey,
                    validate = _dereq_("./_validate-collection"),
                    SIZE = DESCRIPTORS ? "_s" : "size",
                    getEntry = function(that, key) {
                        var entry, index = fastKey(key);
                        if ("F" !== index) return that._i[index];
                        for (entry = that._f; entry; entry = entry.n)
                            if (entry.k == key) return entry
                    };
                module.exports = {
                    getConstructor: function(wrapper, NAME, IS_MAP, ADDER) {
                        var C = wrapper(function(that, iterable) {
                            anInstance(that, C, NAME, "_i"), that._t = NAME, that._i = create(null), that._f = void 0, that._l = void 0, that[SIZE] = 0, null != iterable && forOf(iterable, IS_MAP, that[ADDER], that)
                        });
                        return redefineAll(C.prototype, {
                            clear: function() {
                                for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) entry.r = !0, entry.p && (entry.p = entry.p.n = void 0), delete data[entry.i];
                                that._f = that._l = void 0, that[SIZE] = 0
                            },
                            delete: function(key) {
                                var that = validate(this, NAME),
                                    entry = getEntry(that, key);
                                if (entry) {
                                    var next = entry.n,
                                        prev = entry.p;
                                    delete that._i[entry.i], entry.r = !0, prev && (prev.n = next), next && (next.p = prev), that._f == entry && (that._f = next), that._l == entry && (that._l = prev), that[SIZE]--
                                }
                                return !!entry
                            },
                            forEach: function(callbackfn) {
                                validate(this, NAME);
                                for (var entry, f = ctx(callbackfn, 1 < arguments.length ? arguments[1] : void 0, 3); entry = entry ? entry.n : this._f;)
                                    for (f(entry.v, entry.k, this); entry && entry.r;) entry = entry.p
                            },
                            has: function(key) {
                                return !!getEntry(validate(this, NAME), key)
                            }
                        }), DESCRIPTORS && dP(C.prototype, "size", {
                            get: function() {
                                return validate(this, NAME)[SIZE]
                            }
                        }), C
                    },
                    def: function(that, key, value) {
                        var prev, index, entry = getEntry(that, key);
                        return entry ? entry.v = value : (that._l = entry = {
                            i: index = fastKey(key, !0),
                            k: key,
                            v: value,
                            p: prev = that._l,
                            n: void 0,
                            r: !1
                        }, that._f || (that._f = entry), prev && (prev.n = entry), that[SIZE]++, "F" !== index && (that._i[index] = entry)), that
                    },
                    getEntry: getEntry,
                    setStrong: function(C, NAME, IS_MAP) {
                        $iterDefine(C, NAME, function(iterated, kind) {
                            this._t = validate(iterated, NAME), this._k = kind, this._l = void 0
                        }, function() {
                            for (var kind = this._k, entry = this._l; entry && entry.r;) entry = entry.p;
                            return this._t && (this._l = entry = entry ? entry.n : this._t._f) ? step(0, "keys" == kind ? entry.k : "values" == kind ? entry.v : [entry.k, entry.v]) : (this._t = void 0, step(1))
                        }, IS_MAP ? "entries" : "values", !IS_MAP, !0), setSpecies(NAME)
                    }
                }
            }, {
                "./_an-instance": 93,
                "./_ctx": 108,
                "./_descriptors": 110,
                "./_for-of": 116,
                "./_iter-define": 130,
                "./_iter-step": 132,
                "./_meta": 135,
                "./_object-create": 139,
                "./_object-dp": 140,
                "./_redefine-all": 154,
                "./_set-species": 159,
                "./_validate-collection": 173
            }],
            104: [function(_dereq_, module, exports) {
                var classof = _dereq_("./_classof"),
                    from = _dereq_("./_array-from-iterable");
                module.exports = function(NAME) {
                    return function() {
                        if (classof(this) != NAME) throw TypeError(NAME + "#toJSON isn't generic");
                        return from(this)
                    }
                }
            }, {
                "./_array-from-iterable": 95,
                "./_classof": 101
            }],
            105: [function(_dereq_, module, exports) {
                "use strict";
                var global = _dereq_("./_global"),
                    $export = _dereq_("./_export"),
                    meta = _dereq_("./_meta"),
                    fails = _dereq_("./_fails"),
                    hide = _dereq_("./_hide"),
                    redefineAll = _dereq_("./_redefine-all"),
                    forOf = _dereq_("./_for-of"),
                    anInstance = _dereq_("./_an-instance"),
                    isObject = _dereq_("./_is-object"),
                    setToStringTag = _dereq_("./_set-to-string-tag"),
                    dP = _dereq_("./_object-dp").f,
                    each = _dereq_("./_array-methods")(0),
                    DESCRIPTORS = _dereq_("./_descriptors");
                module.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {
                    var Base = global[NAME],
                        C = Base,
                        ADDER = IS_MAP ? "set" : "add",
                        proto = C && C.prototype,
                        O = {};
                    return DESCRIPTORS && "function" == typeof C && (IS_WEAK || proto.forEach && !fails(function() {
                        (new C).entries().next()
                    })) ? (C = wrapper(function(target, iterable) {
                        anInstance(target, C, NAME, "_c"), target._c = new Base, null != iterable && forOf(iterable, IS_MAP, target[ADDER], target)
                    }), each("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","), function(KEY) {
                        var IS_ADDER = "add" == KEY || "set" == KEY;
                        KEY in proto && (!IS_WEAK || "clear" != KEY) && hide(C.prototype, KEY, function(a, b) {
                            if (anInstance(this, C, KEY), !IS_ADDER && IS_WEAK && !isObject(a)) return "get" == KEY && void 0;
                            var result = this._c[KEY](0 === a ? 0 : a, b);
                            return IS_ADDER ? this : result
                        })
                    }), IS_WEAK || dP(C.prototype, "size", {
                        get: function() {
                            return this._c.size
                        }
                    })) : (C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER), redefineAll(C.prototype, methods), meta.NEED = !0), setToStringTag(C, NAME), O[NAME] = C, $export($export.G + $export.W + $export.F, O), IS_WEAK || common.setStrong(C, NAME, IS_MAP), C
                }
            }, {
                "./_an-instance": 93,
                "./_array-methods": 97,
                "./_descriptors": 110,
                "./_export": 114,
                "./_fails": 115,
                "./_for-of": 116,
                "./_global": 117,
                "./_hide": 119,
                "./_is-object": 127,
                "./_meta": 135,
                "./_object-dp": 140,
                "./_redefine-all": 154,
                "./_set-to-string-tag": 160
            }],
            106: [function(_dereq_, module, exports) {
                var core = module.exports = {
                    version: "2.5.1"
                };
                "number" == typeof __e && (__e = core)
            }, {}],
            107: [function(_dereq_, module, exports) {
                "use strict";
                var $defineProperty = _dereq_("./_object-dp"),
                    createDesc = _dereq_("./_property-desc");
                module.exports = function(object, index, value) {
                    index in object ? $defineProperty.f(object, index, createDesc(0, value)) : object[index] = value
                }
            }, {
                "./_object-dp": 140,
                "./_property-desc": 153
            }],
            108: [function(_dereq_, module, exports) {
                var aFunction = _dereq_("./_a-function");
                module.exports = function(fn, that, length) {
                    if (aFunction(fn), void 0 === that) return fn;
                    switch (length) {
                        case 1:
                            return function(a) {
                                return fn.call(that, a)
                            };
                        case 2:
                            return function(a, b) {
                                return fn.call(that, a, b)
                            };
                        case 3:
                            return function(a, b, c) {
                                return fn.call(that, a, b, c)
                            }
                    }
                    return function() {
                        return fn.apply(that, arguments)
                    }
                }
            }, {
                "./_a-function": 91
            }],
            109: [function(_dereq_, module, exports) {
                module.exports = function(it) {
                    if (null == it) throw TypeError("Can't call method on  " + it);
                    return it
                }
            }, {}],
            110: [function(_dereq_, module, exports) {
                module.exports = !_dereq_("./_fails")(function() {
                    return 7 != Object.defineProperty({}, "a", {
                        get: function() {
                            return 7
                        }
                    }).a
                })
            }, {
                "./_fails": 115
            }],
            111: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object"),
                    document = _dereq_("./_global").document,
                    is = isObject(document) && isObject(document.createElement);
                module.exports = function(it) {
                    return is ? document.createElement(it) : {}
                }
            }, {
                "./_global": 117,
                "./_is-object": 127
            }],
            112: [function(_dereq_, module, exports) {
                module.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
            }, {}],
            113: [function(_dereq_, module, exports) {
                var getKeys = _dereq_("./_object-keys"),
                    gOPS = _dereq_("./_object-gops"),
                    pIE = _dereq_("./_object-pie");
                module.exports = function(it) {
                    var result = getKeys(it),
                        getSymbols = gOPS.f;
                    if (getSymbols)
                        for (var key, symbols = getSymbols(it), isEnum = pIE.f, i = 0; symbols.length > i;) isEnum.call(it, key = symbols[i++]) && result.push(key);
                    return result
                }
            }, {
                "./_object-gops": 145,
                "./_object-keys": 148,
                "./_object-pie": 149
            }],
            114: [function(_dereq_, module, exports) {
                var global = _dereq_("./_global"),
                    core = _dereq_("./_core"),
                    ctx = _dereq_("./_ctx"),
                    hide = _dereq_("./_hide"),
                    $export = function $export(type, name, source) {
                        var key, own, out, IS_FORCED = type & $export.F,
                            IS_GLOBAL = type & $export.G,
                            IS_STATIC = type & $export.S,
                            IS_PROTO = type & $export.P,
                            IS_BIND = type & $export.B,
                            IS_WRAP = type & $export.W,
                            exports = IS_GLOBAL ? core : core[name] || (core[name] = {}),
                            expProto = exports.prototype,
                            target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {}).prototype;
                        for (key in IS_GLOBAL && (source = name), source)(own = !IS_FORCED && target && void 0 !== target[key]) && key in exports || (out = own ? target[key] : source[key], exports[key] = IS_GLOBAL && "function" != typeof target[key] ? source[key] : IS_BIND && own ? ctx(out, global) : IS_WRAP && target[key] == out ? function(C) {
                            var F = function(a, b, c) {
                                if (this instanceof C) {
                                    switch (arguments.length) {
                                        case 0:
                                            return new C;
                                        case 1:
                                            return new C(a);
                                        case 2:
                                            return new C(a, b)
                                    }
                                    return new C(a, b, c)
                                }
                                return C.apply(this, arguments)
                            };
                            return F.prototype = C.prototype, F
                        }(out) : IS_PROTO && "function" == typeof out ? ctx(Function.call, out) : out, IS_PROTO && ((exports.virtual || (exports.virtual = {}))[key] = out, type & $export.R && expProto && !expProto[key] && hide(expProto, key, out)))
                    };
                $export.F = 1, $export.G = 2, $export.S = 4, $export.P = 8, $export.B = 16, $export.W = 32, $export.U = 64, $export.R = 128, module.exports = $export
            }, {
                "./_core": 106,
                "./_ctx": 108,
                "./_global": 117,
                "./_hide": 119
            }],
            115: [function(_dereq_, module, exports) {
                module.exports = function(exec) {
                    try {
                        return !!exec()
                    } catch (e) {
                        return !0
                    }
                }
            }, {}],
            116: [function(_dereq_, module, exports) {
                var ctx = _dereq_("./_ctx"),
                    call = _dereq_("./_iter-call"),
                    isArrayIter = _dereq_("./_is-array-iter"),
                    anObject = _dereq_("./_an-object"),
                    toLength = _dereq_("./_to-length"),
                    getIterFn = _dereq_("./core.get-iterator-method"),
                    BREAK = {},
                    RETURN = {};
                (exports = module.exports = function(iterable, entries, fn, that, ITERATOR) {
                    var length, step, iterator, result, iterFn = ITERATOR ? function() {
                            return iterable
                        } : getIterFn(iterable),
                        f = ctx(fn, that, entries ? 2 : 1),
                        index = 0;
                    if ("function" != typeof iterFn) throw TypeError(iterable + " is not iterable!");
                    if (isArrayIter(iterFn)) {
                        for (length = toLength(iterable.length); index < length; index++)
                            if ((result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index])) === BREAK || result === RETURN) return result
                    } else
                        for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;)
                            if ((result = call(iterator, f, step.value, entries)) === BREAK || result === RETURN) return result
                }).BREAK = BREAK, exports.RETURN = RETURN
            }, {
                "./_an-object": 94,
                "./_ctx": 108,
                "./_is-array-iter": 124,
                "./_iter-call": 128,
                "./_to-length": 169,
                "./core.get-iterator-method": 177
            }],
            117: [function(_dereq_, module, exports) {
                var global = module.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
                "number" == typeof __g && (__g = global)
            }, {}],
            118: [function(_dereq_, module, exports) {
                var hasOwnProperty = {}.hasOwnProperty;
                module.exports = function(it, key) {
                    return hasOwnProperty.call(it, key)
                }
            }, {}],
            119: [function(_dereq_, module, exports) {
                var dP = _dereq_("./_object-dp"),
                    createDesc = _dereq_("./_property-desc");
                module.exports = _dereq_("./_descriptors") ? function(object, key, value) {
                    return dP.f(object, key, createDesc(1, value))
                } : function(object, key, value) {
                    return object[key] = value, object
                }
            }, {
                "./_descriptors": 110,
                "./_object-dp": 140,
                "./_property-desc": 153
            }],
            120: [function(_dereq_, module, exports) {
                var document = _dereq_("./_global").document;
                module.exports = document && document.documentElement
            }, {
                "./_global": 117
            }],
            121: [function(_dereq_, module, exports) {
                module.exports = !_dereq_("./_descriptors") && !_dereq_("./_fails")(function() {
                    return 7 != Object.defineProperty(_dereq_("./_dom-create")("div"), "a", {
                        get: function() {
                            return 7
                        }
                    }).a
                })
            }, {
                "./_descriptors": 110,
                "./_dom-create": 111,
                "./_fails": 115
            }],
            122: [function(_dereq_, module, exports) {
                module.exports = function(fn, args, that) {
                    var un = void 0 === that;
                    switch (args.length) {
                        case 0:
                            return un ? fn() : fn.call(that);
                        case 1:
                            return un ? fn(args[0]) : fn.call(that, args[0]);
                        case 2:
                            return un ? fn(args[0], args[1]) : fn.call(that, args[0], args[1]);
                        case 3:
                            return un ? fn(args[0], args[1], args[2]) : fn.call(that, args[0], args[1], args[2]);
                        case 4:
                            return un ? fn(args[0], args[1], args[2], args[3]) : fn.call(that, args[0], args[1], args[2], args[3])
                    }
                    return fn.apply(that, args)
                }
            }, {}],
            123: [function(_dereq_, module, exports) {
                var cof = _dereq_("./_cof");
                module.exports = Object("z").propertyIsEnumerable(0) ? Object : function(it) {
                    return "String" == cof(it) ? it.split("") : Object(it)
                }
            }, {
                "./_cof": 102
            }],
            124: [function(_dereq_, module, exports) {
                var Iterators = _dereq_("./_iterators"),
                    ITERATOR = _dereq_("./_wks")("iterator"),
                    ArrayProto = Array.prototype;
                module.exports = function(it) {
                    return void 0 !== it && (Iterators.Array === it || ArrayProto[ITERATOR] === it)
                }
            }, {
                "./_iterators": 133,
                "./_wks": 176
            }],
            125: [function(_dereq_, module, exports) {
                var cof = _dereq_("./_cof");
                module.exports = Array.isArray || function(arg) {
                    return "Array" == cof(arg)
                }
            }, {
                "./_cof": 102
            }],
            126: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object"),
                    floor = Math.floor;
                module.exports = function(it) {
                    return !isObject(it) && isFinite(it) && floor(it) === it
                }
            }, {
                "./_is-object": 127
            }],
            127: [function(_dereq_, module, exports) {
                module.exports = function(it) {
                    return "object" === _typeof4(it) ? null !== it : "function" == typeof it
                }
            }, {}],
            128: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object");
                module.exports = function(iterator, fn, value, entries) {
                    try {
                        return entries ? fn(anObject(value)[0], value[1]) : fn(value)
                    } catch (e) {
                        var ret = iterator.return;
                        throw void 0 !== ret && anObject(ret.call(iterator)), e
                    }
                }
            }, {
                "./_an-object": 94
            }],
            129: [function(_dereq_, module, exports) {
                "use strict";
                var create = _dereq_("./_object-create"),
                    descriptor = _dereq_("./_property-desc"),
                    setToStringTag = _dereq_("./_set-to-string-tag"),
                    IteratorPrototype = {};
                _dereq_("./_hide")(IteratorPrototype, _dereq_("./_wks")("iterator"), function() {
                    return this
                }), module.exports = function(Constructor, NAME, next) {
                    Constructor.prototype = create(IteratorPrototype, {
                        next: descriptor(1, next)
                    }), setToStringTag(Constructor, NAME + " Iterator")
                }
            }, {
                "./_hide": 119,
                "./_object-create": 139,
                "./_property-desc": 153,
                "./_set-to-string-tag": 160,
                "./_wks": 176
            }],
            130: [function(_dereq_, module, exports) {
                "use strict";
                var LIBRARY = _dereq_("./_library"),
                    $export = _dereq_("./_export"),
                    redefine = _dereq_("./_redefine"),
                    hide = _dereq_("./_hide"),
                    has = _dereq_("./_has"),
                    Iterators = _dereq_("./_iterators"),
                    $iterCreate = _dereq_("./_iter-create"),
                    setToStringTag = _dereq_("./_set-to-string-tag"),
                    getPrototypeOf = _dereq_("./_object-gpo"),
                    ITERATOR = _dereq_("./_wks")("iterator"),
                    BUGGY = !([].keys && "next" in [].keys()),
                    returnThis = function() {
                        return this
                    };
                module.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
                    $iterCreate(Constructor, NAME, next);
                    var methods, key, IteratorPrototype, getMethod = function(kind) {
                            if (!BUGGY && kind in proto) return proto[kind];
                            switch (kind) {
                                case "keys":
                                case "values":
                                    return function() {
                                        return new Constructor(this, kind)
                                    }
                            }
                            return function() {
                                return new Constructor(this, kind)
                            }
                        },
                        TAG = NAME + " Iterator",
                        DEF_VALUES = "values" == DEFAULT,
                        VALUES_BUG = !1,
                        proto = Base.prototype,
                        $native = proto[ITERATOR] || proto["@@iterator"] || DEFAULT && proto[DEFAULT],
                        $default = $native || getMethod(DEFAULT),
                        $entries = DEFAULT ? DEF_VALUES ? getMethod("entries") : $default : void 0,
                        $anyNative = "Array" == NAME && proto.entries || $native;
                    if ($anyNative && (IteratorPrototype = getPrototypeOf($anyNative.call(new Base))) !== Object.prototype && IteratorPrototype.next && (setToStringTag(IteratorPrototype, TAG, !0), LIBRARY || has(IteratorPrototype, ITERATOR) || hide(IteratorPrototype, ITERATOR, returnThis)), DEF_VALUES && $native && "values" !== $native.name && (VALUES_BUG = !0, $default = function() {
                            return $native.call(this)
                        }), LIBRARY && !FORCED || !BUGGY && !VALUES_BUG && proto[ITERATOR] || hide(proto, ITERATOR, $default), Iterators[NAME] = $default, Iterators[TAG] = returnThis, DEFAULT)
                        if (methods = {
                                values: DEF_VALUES ? $default : getMethod("values"),
                                keys: IS_SET ? $default : getMethod("keys"),
                                entries: $entries
                            }, FORCED)
                            for (key in methods) key in proto || redefine(proto, key, methods[key]);
                        else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
                    return methods
                }
            }, {
                "./_export": 114,
                "./_has": 118,
                "./_hide": 119,
                "./_iter-create": 129,
                "./_iterators": 133,
                "./_library": 134,
                "./_object-gpo": 146,
                "./_redefine": 155,
                "./_set-to-string-tag": 160,
                "./_wks": 176
            }],
            131: [function(_dereq_, module, exports) {
                var ITERATOR = _dereq_("./_wks")("iterator"),
                    SAFE_CLOSING = !1;
                try {
                    var riter = [7][ITERATOR]();
                    riter.return = function() {
                        SAFE_CLOSING = !0
                    }, Array.from(riter, function() {
                        throw 2
                    })
                } catch (e) {}
                module.exports = function(exec, skipClosing) {
                    if (!skipClosing && !SAFE_CLOSING) return !1;
                    var safe = !1;
                    try {
                        var arr = [7],
                            iter = arr[ITERATOR]();
                        iter.next = function() {
                            return {
                                done: safe = !0
                            }
                        }, arr[ITERATOR] = function() {
                            return iter
                        }, exec(arr)
                    } catch (e) {}
                    return safe
                }
            }, {
                "./_wks": 176
            }],
            132: [function(_dereq_, module, exports) {
                module.exports = function(done, value) {
                    return {
                        value: value,
                        done: !!done
                    }
                }
            }, {}],
            133: [function(_dereq_, module, exports) {
                module.exports = {}
            }, {}],
            134: [function(_dereq_, module, exports) {
                module.exports = !0
            }, {}],
            135: [function(_dereq_, module, exports) {
                var META = _dereq_("./_uid")("meta"),
                    isObject = _dereq_("./_is-object"),
                    has = _dereq_("./_has"),
                    setDesc = _dereq_("./_object-dp").f,
                    id = 0,
                    isExtensible = Object.isExtensible || function() {
                        return !0
                    },
                    FREEZE = !_dereq_("./_fails")(function() {
                        return isExtensible(Object.preventExtensions({}))
                    }),
                    setMeta = function(it) {
                        setDesc(it, META, {
                            value: {
                                i: "O" + ++id,
                                w: {}
                            }
                        })
                    },
                    meta = module.exports = {
                        KEY: META,
                        NEED: !1,
                        fastKey: function(it, create) {
                            if (!isObject(it)) return "symbol" == _typeof4(it) ? it : ("string" == typeof it ? "S" : "P") + it;
                            if (!has(it, META)) {
                                if (!isExtensible(it)) return "F";
                                if (!create) return "E";
                                setMeta(it)
                            }
                            return it[META].i
                        },
                        getWeak: function(it, create) {
                            if (!has(it, META)) {
                                if (!isExtensible(it)) return !0;
                                if (!create) return !1;
                                setMeta(it)
                            }
                            return it[META].w
                        },
                        onFreeze: function(it) {
                            return FREEZE && meta.NEED && isExtensible(it) && !has(it, META) && setMeta(it), it
                        }
                    }
            }, {
                "./_fails": 115,
                "./_has": 118,
                "./_is-object": 127,
                "./_object-dp": 140,
                "./_uid": 172
            }],
            136: [function(_dereq_, module, exports) {
                var global = _dereq_("./_global"),
                    macrotask = _dereq_("./_task").set,
                    Observer = global.MutationObserver || global.WebKitMutationObserver,
                    process = global.process,
                    Promise = global.Promise,
                    isNode = "process" == _dereq_("./_cof")(process);
                module.exports = function() {
                    var head, last, notify, flush = function() {
                        var parent, fn;
                        for (isNode && (parent = process.domain) && parent.exit(); head;) {
                            fn = head.fn, head = head.next;
                            try {
                                fn()
                            } catch (e) {
                                throw head ? notify() : last = void 0, e
                            }
                        }
                        last = void 0, parent && parent.enter()
                    };
                    if (isNode) notify = function() {
                        process.nextTick(flush)
                    };
                    else if (Observer) {
                        var toggle = !0,
                            node = document.createTextNode("");
                        new Observer(flush).observe(node, {
                            characterData: !0
                        }), notify = function() {
                            node.data = toggle = !toggle
                        }
                    } else if (Promise && Promise.resolve) {
                        var promise = Promise.resolve();
                        notify = function() {
                            promise.then(flush)
                        }
                    } else notify = function() {
                        macrotask.call(global, flush)
                    };
                    return function(fn) {
                        var task = {
                            fn: fn,
                            next: void 0
                        };
                        last && (last.next = task), head || (head = task, notify()), last = task
                    }
                }
            }, {
                "./_cof": 102,
                "./_global": 117,
                "./_task": 165
            }],
            137: [function(_dereq_, module, exports) {
                "use strict";
                var aFunction = _dereq_("./_a-function");

                function PromiseCapability(C) {
                    var resolve, reject;
                    this.promise = new C(function($$resolve, $$reject) {
                        if (void 0 !== resolve || void 0 !== reject) throw TypeError("Bad Promise constructor");
                        resolve = $$resolve, reject = $$reject
                    }), this.resolve = aFunction(resolve), this.reject = aFunction(reject)
                }
                module.exports.f = function(C) {
                    return new PromiseCapability(C)
                }
            }, {
                "./_a-function": 91
            }],
            138: [function(_dereq_, module, exports) {
                "use strict";
                var getKeys = _dereq_("./_object-keys"),
                    gOPS = _dereq_("./_object-gops"),
                    pIE = _dereq_("./_object-pie"),
                    toObject = _dereq_("./_to-object"),
                    IObject = _dereq_("./_iobject"),
                    $assign = Object.assign;
                module.exports = !$assign || _dereq_("./_fails")(function() {
                    var A = {},
                        B = {},
                        S = Symbol(),
                        K = "abcdefghijklmnopqrst";
                    return A[S] = 7, K.split("").forEach(function(k) {
                        B[k] = k
                    }), 7 != $assign({}, A)[S] || Object.keys($assign({}, B)).join("") != K
                }) ? function(target, source) {
                    for (var T = toObject(target), aLen = arguments.length, index = 1, getSymbols = gOPS.f, isEnum = pIE.f; index < aLen;)
                        for (var key, S = IObject(arguments[index++]), keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S), length = keys.length, j = 0; j < length;) isEnum.call(S, key = keys[j++]) && (T[key] = S[key]);
                    return T
                } : $assign
            }, {
                "./_fails": 115,
                "./_iobject": 123,
                "./_object-gops": 145,
                "./_object-keys": 148,
                "./_object-pie": 149,
                "./_to-object": 170
            }],
            139: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object"),
                    dPs = _dereq_("./_object-dps"),
                    enumBugKeys = _dereq_("./_enum-bug-keys"),
                    IE_PROTO = _dereq_("./_shared-key")("IE_PROTO"),
                    Empty = function() {},
                    _createDict = function() {
                        var iframeDocument, iframe = _dereq_("./_dom-create")("iframe"),
                            i = enumBugKeys.length;
                        for (iframe.style.display = "none", _dereq_("./_html").appendChild(iframe), iframe.src = "javascript:", (iframeDocument = iframe.contentWindow.document).open(), iframeDocument.write("<script>document.F=Object<\/script>"), iframeDocument.close(), _createDict = iframeDocument.F; i--;) delete _createDict.prototype[enumBugKeys[i]];
                        return _createDict()
                    };
                module.exports = Object.create || function(O, Properties) {
                    var result;
                    return null !== O ? (Empty.prototype = anObject(O), result = new Empty, Empty.prototype = null, result[IE_PROTO] = O) : result = _createDict(), void 0 === Properties ? result : dPs(result, Properties)
                }
            }, {
                "./_an-object": 94,
                "./_dom-create": 111,
                "./_enum-bug-keys": 112,
                "./_html": 120,
                "./_object-dps": 141,
                "./_shared-key": 161
            }],
            140: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object"),
                    IE8_DOM_DEFINE = _dereq_("./_ie8-dom-define"),
                    toPrimitive = _dereq_("./_to-primitive"),
                    dP = Object.defineProperty;
                exports.f = _dereq_("./_descriptors") ? Object.defineProperty : function(O, P, Attributes) {
                    if (anObject(O), P = toPrimitive(P, !0), anObject(Attributes), IE8_DOM_DEFINE) try {
                        return dP(O, P, Attributes)
                    } catch (e) {}
                    if ("get" in Attributes || "set" in Attributes) throw TypeError("Accessors not supported!");
                    return "value" in Attributes && (O[P] = Attributes.value), O
                }
            }, {
                "./_an-object": 94,
                "./_descriptors": 110,
                "./_ie8-dom-define": 121,
                "./_to-primitive": 171
            }],
            141: [function(_dereq_, module, exports) {
                var dP = _dereq_("./_object-dp"),
                    anObject = _dereq_("./_an-object"),
                    getKeys = _dereq_("./_object-keys");
                module.exports = _dereq_("./_descriptors") ? Object.defineProperties : function(O, Properties) {
                    anObject(O);
                    for (var P, keys = getKeys(Properties), length = keys.length, i = 0; i < length;) dP.f(O, P = keys[i++], Properties[P]);
                    return O
                }
            }, {
                "./_an-object": 94,
                "./_descriptors": 110,
                "./_object-dp": 140,
                "./_object-keys": 148
            }],
            142: [function(_dereq_, module, exports) {
                var pIE = _dereq_("./_object-pie"),
                    createDesc = _dereq_("./_property-desc"),
                    toIObject = _dereq_("./_to-iobject"),
                    toPrimitive = _dereq_("./_to-primitive"),
                    has = _dereq_("./_has"),
                    IE8_DOM_DEFINE = _dereq_("./_ie8-dom-define"),
                    gOPD = Object.getOwnPropertyDescriptor;
                exports.f = _dereq_("./_descriptors") ? gOPD : function(O, P) {
                    if (O = toIObject(O), P = toPrimitive(P, !0), IE8_DOM_DEFINE) try {
                        return gOPD(O, P)
                    } catch (e) {}
                    if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P])
                }
            }, {
                "./_descriptors": 110,
                "./_has": 118,
                "./_ie8-dom-define": 121,
                "./_object-pie": 149,
                "./_property-desc": 153,
                "./_to-iobject": 168,
                "./_to-primitive": 171
            }],
            143: [function(_dereq_, module, exports) {
                var toIObject = _dereq_("./_to-iobject"),
                    gOPN = _dereq_("./_object-gopn").f,
                    toString = {}.toString,
                    windowNames = "object" == ("undefined" == typeof window ? "undefined" : _typeof4(window)) && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
                module.exports.f = function(it) {
                    return windowNames && "[object Window]" == toString.call(it) ? function(it) {
                        try {
                            return gOPN(it)
                        } catch (e) {
                            return windowNames.slice()
                        }
                    }(it) : gOPN(toIObject(it))
                }
            }, {
                "./_object-gopn": 144,
                "./_to-iobject": 168
            }],
            144: [function(_dereq_, module, exports) {
                var $keys = _dereq_("./_object-keys-internal"),
                    hiddenKeys = _dereq_("./_enum-bug-keys").concat("length", "prototype");
                exports.f = Object.getOwnPropertyNames || function(O) {
                    return $keys(O, hiddenKeys)
                }
            }, {
                "./_enum-bug-keys": 112,
                "./_object-keys-internal": 147
            }],
            145: [function(_dereq_, module, exports) {
                exports.f = Object.getOwnPropertySymbols
            }, {}],
            146: [function(_dereq_, module, exports) {
                var has = _dereq_("./_has"),
                    toObject = _dereq_("./_to-object"),
                    IE_PROTO = _dereq_("./_shared-key")("IE_PROTO"),
                    ObjectProto = Object.prototype;
                module.exports = Object.getPrototypeOf || function(O) {
                    return O = toObject(O), has(O, IE_PROTO) ? O[IE_PROTO] : "function" == typeof O.constructor && O instanceof O.constructor ? O.constructor.prototype : O instanceof Object ? ObjectProto : null
                }
            }, {
                "./_has": 118,
                "./_shared-key": 161,
                "./_to-object": 170
            }],
            147: [function(_dereq_, module, exports) {
                var has = _dereq_("./_has"),
                    toIObject = _dereq_("./_to-iobject"),
                    arrayIndexOf = _dereq_("./_array-includes")(!1),
                    IE_PROTO = _dereq_("./_shared-key")("IE_PROTO");
                module.exports = function(object, names) {
                    var key, O = toIObject(object),
                        i = 0,
                        result = [];
                    for (key in O) key != IE_PROTO && has(O, key) && result.push(key);
                    for (; names.length > i;) has(O, key = names[i++]) && (~arrayIndexOf(result, key) || result.push(key));
                    return result
                }
            }, {
                "./_array-includes": 96,
                "./_has": 118,
                "./_shared-key": 161,
                "./_to-iobject": 168
            }],
            148: [function(_dereq_, module, exports) {
                var $keys = _dereq_("./_object-keys-internal"),
                    enumBugKeys = _dereq_("./_enum-bug-keys");
                module.exports = Object.keys || function(O) {
                    return $keys(O, enumBugKeys)
                }
            }, {
                "./_enum-bug-keys": 112,
                "./_object-keys-internal": 147
            }],
            149: [function(_dereq_, module, exports) {
                exports.f = {}.propertyIsEnumerable
            }, {}],
            150: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export"),
                    core = _dereq_("./_core"),
                    fails = _dereq_("./_fails");
                module.exports = function(KEY, exec) {
                    var fn = (core.Object || {})[KEY] || Object[KEY],
                        exp = {};
                    exp[KEY] = exec(fn), $export($export.S + $export.F * fails(function() {
                        fn(1)
                    }), "Object", exp)
                }
            }, {
                "./_core": 106,
                "./_export": 114,
                "./_fails": 115
            }],
            151: [function(_dereq_, module, exports) {
                module.exports = function(exec) {
                    try {
                        return {
                            e: !1,
                            v: exec()
                        }
                    } catch (e) {
                        return {
                            e: !0,
                            v: e
                        }
                    }
                }
            }, {}],
            152: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object"),
                    isObject = _dereq_("./_is-object"),
                    newPromiseCapability = _dereq_("./_new-promise-capability");
                module.exports = function(C, x) {
                    if (anObject(C), isObject(x) && x.constructor === C) return x;
                    var promiseCapability = newPromiseCapability.f(C);
                    return (0, promiseCapability.resolve)(x), promiseCapability.promise
                }
            }, {
                "./_an-object": 94,
                "./_is-object": 127,
                "./_new-promise-capability": 137
            }],
            153: [function(_dereq_, module, exports) {
                module.exports = function(bitmap, value) {
                    return {
                        enumerable: !(1 & bitmap),
                        configurable: !(2 & bitmap),
                        writable: !(4 & bitmap),
                        value: value
                    }
                }
            }, {}],
            154: [function(_dereq_, module, exports) {
                var hide = _dereq_("./_hide");
                module.exports = function(target, src, safe) {
                    for (var key in src) safe && target[key] ? target[key] = src[key] : hide(target, key, src[key]);
                    return target
                }
            }, {
                "./_hide": 119
            }],
            155: [function(_dereq_, module, exports) {
                module.exports = _dereq_("./_hide")
            }, {
                "./_hide": 119
            }],
            156: [function(_dereq_, module, exports) {
                "use strict";
                var $export = _dereq_("./_export"),
                    aFunction = _dereq_("./_a-function"),
                    ctx = _dereq_("./_ctx"),
                    forOf = _dereq_("./_for-of");
                module.exports = function(COLLECTION) {
                    $export($export.S, COLLECTION, {
                        from: function(source) {
                            var mapping, A, n, cb, mapFn = arguments[1];
                            return aFunction(this), (mapping = void 0 !== mapFn) && aFunction(mapFn), null == source ? new this : (A = [], mapping ? (n = 0, cb = ctx(mapFn, arguments[2], 2), forOf(source, !1, function(nextItem) {
                                A.push(cb(nextItem, n++))
                            })) : forOf(source, !1, A.push, A), new this(A))
                        }
                    })
                }
            }, {
                "./_a-function": 91,
                "./_ctx": 108,
                "./_export": 114,
                "./_for-of": 116
            }],
            157: [function(_dereq_, module, exports) {
                "use strict";
                var $export = _dereq_("./_export");
                module.exports = function(COLLECTION) {
                    $export($export.S, COLLECTION, {
                        of: function() {
                            for (var length = arguments.length, A = Array(length); length--;) A[length] = arguments[length];
                            return new this(A)
                        }
                    })
                }
            }, {
                "./_export": 114
            }],
            158: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object"),
                    anObject = _dereq_("./_an-object"),
                    check = function(O, proto) {
                        if (anObject(O), !isObject(proto) && null !== proto) throw TypeError(proto + ": can't set as prototype!")
                    };
                module.exports = {
                    set: Object.setPrototypeOf || ("__proto__" in {} ? function(test, buggy, set) {
                        try {
                            (set = _dereq_("./_ctx")(Function.call, _dereq_("./_object-gopd").f(Object.prototype, "__proto__").set, 2))(test, []), buggy = !(test instanceof Array)
                        } catch (e) {
                            buggy = !0
                        }
                        return function(O, proto) {
                            return check(O, proto), buggy ? O.__proto__ = proto : set(O, proto), O
                        }
                    }({}, !1) : void 0),
                    check: check
                }
            }, {
                "./_an-object": 94,
                "./_ctx": 108,
                "./_is-object": 127,
                "./_object-gopd": 142
            }],
            159: [function(_dereq_, module, exports) {
                "use strict";
                var global = _dereq_("./_global"),
                    core = _dereq_("./_core"),
                    dP = _dereq_("./_object-dp"),
                    DESCRIPTORS = _dereq_("./_descriptors"),
                    SPECIES = _dereq_("./_wks")("species");
                module.exports = function(KEY) {
                    var C = "function" == typeof core[KEY] ? core[KEY] : global[KEY];
                    DESCRIPTORS && C && !C[SPECIES] && dP.f(C, SPECIES, {
                        configurable: !0,
                        get: function() {
                            return this
                        }
                    })
                }
            }, {
                "./_core": 106,
                "./_descriptors": 110,
                "./_global": 117,
                "./_object-dp": 140,
                "./_wks": 176
            }],
            160: [function(_dereq_, module, exports) {
                var def = _dereq_("./_object-dp").f,
                    has = _dereq_("./_has"),
                    TAG = _dereq_("./_wks")("toStringTag");
                module.exports = function(it, tag, stat) {
                    it && !has(it = stat ? it : it.prototype, TAG) && def(it, TAG, {
                        configurable: !0,
                        value: tag
                    })
                }
            }, {
                "./_has": 118,
                "./_object-dp": 140,
                "./_wks": 176
            }],
            161: [function(_dereq_, module, exports) {
                var shared = _dereq_("./_shared")("keys"),
                    uid = _dereq_("./_uid");
                module.exports = function(key) {
                    return shared[key] || (shared[key] = uid(key))
                }
            }, {
                "./_shared": 162,
                "./_uid": 172
            }],
            162: [function(_dereq_, module, exports) {
                var global = _dereq_("./_global"),
                    store = global["__core-js_shared__"] || (global["__core-js_shared__"] = {});
                module.exports = function(key) {
                    return store[key] || (store[key] = {})
                }
            }, {
                "./_global": 117
            }],
            163: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object"),
                    aFunction = _dereq_("./_a-function"),
                    SPECIES = _dereq_("./_wks")("species");
                module.exports = function(O, D) {
                    var S, C = anObject(O).constructor;
                    return void 0 === C || null == (S = anObject(C)[SPECIES]) ? D : aFunction(S)
                }
            }, {
                "./_a-function": 91,
                "./_an-object": 94,
                "./_wks": 176
            }],
            164: [function(_dereq_, module, exports) {
                var toInteger = _dereq_("./_to-integer"),
                    defined = _dereq_("./_defined");
                module.exports = function(TO_STRING) {
                    return function(that, pos) {
                        var a, b, s = String(defined(that)),
                            i = toInteger(pos),
                            l = s.length;
                        return i < 0 || l <= i ? TO_STRING ? "" : void 0 : (a = s.charCodeAt(i)) < 55296 || 56319 < a || i + 1 === l || (b = s.charCodeAt(i + 1)) < 56320 || 57343 < b ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : b - 56320 + (a - 55296 << 10) + 65536
                    }
                }
            }, {
                "./_defined": 109,
                "./_to-integer": 167
            }],
            165: [function(_dereq_, module, exports) {
                var defer, channel, port, ctx = _dereq_("./_ctx"),
                    invoke = _dereq_("./_invoke"),
                    html = _dereq_("./_html"),
                    cel = _dereq_("./_dom-create"),
                    global = _dereq_("./_global"),
                    process = global.process,
                    setTask = global.setImmediate,
                    clearTask = global.clearImmediate,
                    MessageChannel = global.MessageChannel,
                    Dispatch = global.Dispatch,
                    counter = 0,
                    queue = {},
                    run = function() {
                        var id = +this;
                        if (queue.hasOwnProperty(id)) {
                            var fn = queue[id];
                            delete queue[id], fn()
                        }
                    },
                    listener = function(event) {
                        run.call(event.data)
                    };
                setTask && clearTask || (setTask = function(fn) {
                    for (var args = [], i = 1; arguments.length > i;) args.push(arguments[i++]);
                    return queue[++counter] = function() {
                        invoke("function" == typeof fn ? fn : Function(fn), args)
                    }, defer(counter), counter
                }, clearTask = function(id) {
                    delete queue[id]
                }, "process" == _dereq_("./_cof")(process) ? defer = function(id) {
                    process.nextTick(ctx(run, id, 1))
                } : Dispatch && Dispatch.now ? defer = function(id) {
                    Dispatch.now(ctx(run, id, 1))
                } : MessageChannel ? (port = (channel = new MessageChannel).port2, channel.port1.onmessage = listener, defer = ctx(port.postMessage, port, 1)) : global.addEventListener && "function" == typeof postMessage && !global.importScripts ? (defer = function(id) {
                    global.postMessage(id + "", "*")
                }, global.addEventListener("message", listener, !1)) : defer = "onreadystatechange" in cel("script") ? function(id) {
                    html.appendChild(cel("script")).onreadystatechange = function() {
                        html.removeChild(this), run.call(id)
                    }
                } : function(id) {
                    setTimeout(ctx(run, id, 1), 0)
                }), module.exports = {
                    set: setTask,
                    clear: clearTask
                }
            }, {
                "./_cof": 102,
                "./_ctx": 108,
                "./_dom-create": 111,
                "./_global": 117,
                "./_html": 120,
                "./_invoke": 122
            }],
            166: [function(_dereq_, module, exports) {
                var toInteger = _dereq_("./_to-integer"),
                    max = Math.max,
                    min = Math.min;
                module.exports = function(index, length) {
                    return (index = toInteger(index)) < 0 ? max(index + length, 0) : min(index, length)
                }
            }, {
                "./_to-integer": 167
            }],
            167: [function(_dereq_, module, exports) {
                var ceil = Math.ceil,
                    floor = Math.floor;
                module.exports = function(it) {
                    return isNaN(it = +it) ? 0 : (0 < it ? floor : ceil)(it)
                }
            }, {}],
            168: [function(_dereq_, module, exports) {
                var IObject = _dereq_("./_iobject"),
                    defined = _dereq_("./_defined");
                module.exports = function(it) {
                    return IObject(defined(it))
                }
            }, {
                "./_defined": 109,
                "./_iobject": 123
            }],
            169: [function(_dereq_, module, exports) {
                var toInteger = _dereq_("./_to-integer"),
                    min = Math.min;
                module.exports = function(it) {
                    return 0 < it ? min(toInteger(it), 9007199254740991) : 0
                }
            }, {
                "./_to-integer": 167
            }],
            170: [function(_dereq_, module, exports) {
                var defined = _dereq_("./_defined");
                module.exports = function(it) {
                    return Object(defined(it))
                }
            }, {
                "./_defined": 109
            }],
            171: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object");
                module.exports = function(it, S) {
                    if (!isObject(it)) return it;
                    var fn, val;
                    if (S && "function" == typeof(fn = it.toString) && !isObject(val = fn.call(it))) return val;
                    if ("function" == typeof(fn = it.valueOf) && !isObject(val = fn.call(it))) return val;
                    if (!S && "function" == typeof(fn = it.toString) && !isObject(val = fn.call(it))) return val;
                    throw TypeError("Can't convert object to primitive value")
                }
            }, {
                "./_is-object": 127
            }],
            172: [function(_dereq_, module, exports) {
                var id = 0,
                    px = Math.random();
                module.exports = function(key) {
                    return "Symbol(".concat(void 0 === key ? "" : key, ")_", (++id + px).toString(36))
                }
            }, {}],
            173: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object");
                module.exports = function(it, TYPE) {
                    if (!isObject(it) || it._t !== TYPE) throw TypeError("Incompatible receiver, " + TYPE + " required!");
                    return it
                }
            }, {
                "./_is-object": 127
            }],
            174: [function(_dereq_, module, exports) {
                var global = _dereq_("./_global"),
                    core = _dereq_("./_core"),
                    LIBRARY = _dereq_("./_library"),
                    wksExt = _dereq_("./_wks-ext"),
                    defineProperty = _dereq_("./_object-dp").f;
                module.exports = function(name) {
                    var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
                    "_" == name.charAt(0) || name in $Symbol || defineProperty($Symbol, name, {
                        value: wksExt.f(name)
                    })
                }
            }, {
                "./_core": 106,
                "./_global": 117,
                "./_library": 134,
                "./_object-dp": 140,
                "./_wks-ext": 175
            }],
            175: [function(_dereq_, module, exports) {
                exports.f = _dereq_("./_wks")
            }, {
                "./_wks": 176
            }],
            176: [function(_dereq_, module, exports) {
                var store = _dereq_("./_shared")("wks"),
                    uid = _dereq_("./_uid"),
                    _Symbol = _dereq_("./_global").Symbol,
                    USE_SYMBOL = "function" == typeof _Symbol;
                (module.exports = function(name) {
                    return store[name] || (store[name] = USE_SYMBOL && _Symbol[name] || (USE_SYMBOL ? _Symbol : uid)("Symbol." + name))
                }).store = store
            }, {
                "./_global": 117,
                "./_shared": 162,
                "./_uid": 172
            }],
            177: [function(_dereq_, module, exports) {
                var classof = _dereq_("./_classof"),
                    ITERATOR = _dereq_("./_wks")("iterator"),
                    Iterators = _dereq_("./_iterators");
                module.exports = _dereq_("./_core").getIteratorMethod = function(it) {
                    if (null != it) return it[ITERATOR] || it["@@iterator"] || Iterators[classof(it)]
                }
            }, {
                "./_classof": 101,
                "./_core": 106,
                "./_iterators": 133,
                "./_wks": 176
            }],
            178: [function(_dereq_, module, exports) {
                var anObject = _dereq_("./_an-object"),
                    get = _dereq_("./core.get-iterator-method");
                module.exports = _dereq_("./_core").getIterator = function(it) {
                    var iterFn = get(it);
                    if ("function" != typeof iterFn) throw TypeError(it + " is not iterable!");
                    return anObject(iterFn.call(it))
                }
            }, {
                "./_an-object": 94,
                "./_core": 106,
                "./core.get-iterator-method": 177
            }],
            179: [function(_dereq_, module, exports) {
                var classof = _dereq_("./_classof"),
                    ITERATOR = _dereq_("./_wks")("iterator"),
                    Iterators = _dereq_("./_iterators");
                module.exports = _dereq_("./_core").isIterable = function(it) {
                    var O = Object(it);
                    return void 0 !== O[ITERATOR] || "@@iterator" in O || Iterators.hasOwnProperty(classof(O))
                }
            }, {
                "./_classof": 101,
                "./_core": 106,
                "./_iterators": 133,
                "./_wks": 176
            }],
            180: [function(_dereq_, module, exports) {
                "use strict";
                var ctx = _dereq_("./_ctx"),
                    $export = _dereq_("./_export"),
                    toObject = _dereq_("./_to-object"),
                    call = _dereq_("./_iter-call"),
                    isArrayIter = _dereq_("./_is-array-iter"),
                    toLength = _dereq_("./_to-length"),
                    createProperty = _dereq_("./_create-property"),
                    getIterFn = _dereq_("./core.get-iterator-method");
                $export($export.S + $export.F * !_dereq_("./_iter-detect")(function(iter) {
                    Array.from(iter)
                }), "Array", {
                    from: function(arrayLike) {
                        var length, result, step, iterator, O = toObject(arrayLike),
                            C = "function" == typeof this ? this : Array,
                            aLen = arguments.length,
                            mapfn = 1 < aLen ? arguments[1] : void 0,
                            mapping = void 0 !== mapfn,
                            index = 0,
                            iterFn = getIterFn(O);
                        if (mapping && (mapfn = ctx(mapfn, 2 < aLen ? arguments[2] : void 0, 2)), null == iterFn || C == Array && isArrayIter(iterFn))
                            for (result = new C(length = toLength(O.length)); index < length; index++) createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
                        else
                            for (iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++) createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], !0) : step.value);
                        return result.length = index, result
                    }
                })
            }, {
                "./_create-property": 107,
                "./_ctx": 108,
                "./_export": 114,
                "./_is-array-iter": 124,
                "./_iter-call": 128,
                "./_iter-detect": 131,
                "./_to-length": 169,
                "./_to-object": 170,
                "./core.get-iterator-method": 177
            }],
            181: [function(_dereq_, module, exports) {
                "use strict";
                var addToUnscopables = _dereq_("./_add-to-unscopables"),
                    step = _dereq_("./_iter-step"),
                    Iterators = _dereq_("./_iterators"),
                    toIObject = _dereq_("./_to-iobject");
                module.exports = _dereq_("./_iter-define")(Array, "Array", function(iterated, kind) {
                    this._t = toIObject(iterated), this._i = 0, this._k = kind
                }, function() {
                    var O = this._t,
                        kind = this._k,
                        index = this._i++;
                    return !O || index >= O.length ? (this._t = void 0, step(1)) : step(0, "keys" == kind ? index : "values" == kind ? O[index] : [index, O[index]])
                }, "values"), Iterators.Arguments = Iterators.Array, addToUnscopables("keys"), addToUnscopables("values"), addToUnscopables("entries")
            }, {
                "./_add-to-unscopables": 92,
                "./_iter-define": 130,
                "./_iter-step": 132,
                "./_iterators": 133,
                "./_to-iobject": 168
            }],
            182: [function(_dereq_, module, exports) {
                "use strict";
                var strong = _dereq_("./_collection-strong"),
                    validate = _dereq_("./_validate-collection");
                module.exports = _dereq_("./_collection")("Map", function(get) {
                    return function() {
                        return get(this, 0 < arguments.length ? arguments[0] : void 0)
                    }
                }, {
                    get: function(key) {
                        var entry = strong.getEntry(validate(this, "Map"), key);
                        return entry && entry.v
                    },
                    set: function(key, value) {
                        return strong.def(validate(this, "Map"), 0 === key ? 0 : key, value)
                    }
                }, strong, !0)
            }, {
                "./_collection": 105,
                "./_collection-strong": 103,
                "./_validate-collection": 173
            }],
            183: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S, "Number", {
                    isInteger: _dereq_("./_is-integer")
                })
            }, {
                "./_export": 114,
                "./_is-integer": 126
            }],
            184: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S + $export.F, "Object", {
                    assign: _dereq_("./_object-assign")
                })
            }, {
                "./_export": 114,
                "./_object-assign": 138
            }],
            185: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S, "Object", {
                    create: _dereq_("./_object-create")
                })
            }, {
                "./_export": 114,
                "./_object-create": 139
            }],
            186: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S + $export.F * !_dereq_("./_descriptors"), "Object", {
                    defineProperties: _dereq_("./_object-dps")
                })
            }, {
                "./_descriptors": 110,
                "./_export": 114,
                "./_object-dps": 141
            }],
            187: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S + $export.F * !_dereq_("./_descriptors"), "Object", {
                    defineProperty: _dereq_("./_object-dp").f
                })
            }, {
                "./_descriptors": 110,
                "./_export": 114,
                "./_object-dp": 140
            }],
            188: [function(_dereq_, module, exports) {
                var isObject = _dereq_("./_is-object"),
                    meta = _dereq_("./_meta").onFreeze;
                _dereq_("./_object-sap")("freeze", function($freeze) {
                    return function(it) {
                        return $freeze && isObject(it) ? $freeze(meta(it)) : it
                    }
                })
            }, {
                "./_is-object": 127,
                "./_meta": 135,
                "./_object-sap": 150
            }],
            189: [function(_dereq_, module, exports) {
                var toObject = _dereq_("./_to-object"),
                    $getPrototypeOf = _dereq_("./_object-gpo");
                _dereq_("./_object-sap")("getPrototypeOf", function() {
                    return function(it) {
                        return $getPrototypeOf(toObject(it))
                    }
                })
            }, {
                "./_object-gpo": 146,
                "./_object-sap": 150,
                "./_to-object": 170
            }],
            190: [function(_dereq_, module, exports) {
                var toObject = _dereq_("./_to-object"),
                    $keys = _dereq_("./_object-keys");
                _dereq_("./_object-sap")("keys", function() {
                    return function(it) {
                        return $keys(toObject(it))
                    }
                })
            }, {
                "./_object-keys": 148,
                "./_object-sap": 150,
                "./_to-object": 170
            }],
            191: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.S, "Object", {
                    setPrototypeOf: _dereq_("./_set-proto").set
                })
            }, {
                "./_export": 114,
                "./_set-proto": 158
            }],
            192: [function(_dereq_, module, exports) {
                arguments[4][70][0].apply(exports, arguments)
            }, {
                dup: 70
            }],
            193: [function(_dereq_, module, exports) {
                "use strict";
                var Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper, LIBRARY = _dereq_("./_library"),
                    global = _dereq_("./_global"),
                    ctx = _dereq_("./_ctx"),
                    classof = _dereq_("./_classof"),
                    $export = _dereq_("./_export"),
                    isObject = _dereq_("./_is-object"),
                    aFunction = _dereq_("./_a-function"),
                    anInstance = _dereq_("./_an-instance"),
                    forOf = _dereq_("./_for-of"),
                    speciesConstructor = _dereq_("./_species-constructor"),
                    task = _dereq_("./_task").set,
                    microtask = _dereq_("./_microtask")(),
                    newPromiseCapabilityModule = _dereq_("./_new-promise-capability"),
                    perform = _dereq_("./_perform"),
                    promiseResolve = _dereq_("./_promise-resolve"),
                    TypeError = global.TypeError,
                    process = global.process,
                    $Promise = global.Promise,
                    isNode = "process" == classof(process),
                    empty = function() {},
                    newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f,
                    USE_NATIVE = !! function() {
                        try {
                            var promise = $Promise.resolve(1),
                                FakePromise = (promise.constructor = {})[_dereq_("./_wks")("species")] = function(exec) {
                                    exec(empty, empty)
                                };
                            return (isNode || "function" == typeof PromiseRejectionEvent) && promise.then(empty) instanceof FakePromise
                        } catch (e) {}
                    }(),
                    isThenable = function(it) {
                        var then;
                        return !(!isObject(it) || "function" != typeof(then = it.then)) && then
                    },
                    notify = function(promise, isReject) {
                        if (!promise._n) {
                            promise._n = !0;
                            var chain = promise._c;
                            microtask(function() {
                                for (var value = promise._v, ok = 1 == promise._s, i = 0, run = function(reaction) {
                                        var result, then, handler = ok ? reaction.ok : reaction.fail,
                                            resolve = reaction.resolve,
                                            reject = reaction.reject,
                                            domain = reaction.domain;
                                        try {
                                            handler ? (ok || (2 == promise._h && onHandleUnhandled(promise), promise._h = 1), !0 === handler ? result = value : (domain && domain.enter(), result = handler(value), domain && domain.exit()), result === reaction.promise ? reject(TypeError("Promise-chain cycle")) : (then = isThenable(result)) ? then.call(result, resolve, reject) : resolve(result)) : reject(value)
                                        } catch (e) {
                                            reject(e)
                                        }
                                    }; chain.length > i;) run(chain[i++]);
                                promise._c = [], promise._n = !1, isReject && !promise._h && onUnhandled(promise)
                            })
                        }
                    },
                    onUnhandled = function(promise) {
                        task.call(global, function() {
                            var result, handler, console, value = promise._v,
                                unhandled = isUnhandled(promise);
                            if (unhandled && (result = perform(function() {
                                    isNode ? process.emit("unhandledRejection", value, promise) : (handler = global.onunhandledrejection) ? handler({
                                        promise: promise,
                                        reason: value
                                    }) : (console = global.console) && console.error && console.error("Unhandled promise rejection", value)
                                }), promise._h = isNode || isUnhandled(promise) ? 2 : 1), promise._a = void 0, unhandled && result.e) throw result.v
                        })
                    },
                    isUnhandled = function isUnhandled(promise) {
                        if (1 == promise._h) return !1;
                        for (var reaction, chain = promise._a || promise._c, i = 0; chain.length > i;)
                            if ((reaction = chain[i++]).fail || !isUnhandled(reaction.promise)) return !1;
                        return !0
                    },
                    onHandleUnhandled = function(promise) {
                        task.call(global, function() {
                            var handler;
                            isNode ? process.emit("rejectionHandled", promise) : (handler = global.onrejectionhandled) && handler({
                                promise: promise,
                                reason: promise._v
                            })
                        })
                    },
                    $reject = function(value) {
                        var promise = this;
                        promise._d || (promise._d = !0, (promise = promise._w || promise)._v = value, promise._s = 2, promise._a || (promise._a = promise._c.slice()), notify(promise, !0))
                    },
                    $resolve = function $resolve(value) {
                        var then, promise = this;
                        if (!promise._d) {
                            promise._d = !0, promise = promise._w || promise;
                            try {
                                if (promise === value) throw TypeError("Promise can't be resolved itself");
                                (then = isThenable(value)) ? microtask(function() {
                                    var wrapper = {
                                        _w: promise,
                                        _d: !1
                                    };
                                    try {
                                        then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1))
                                    } catch (e) {
                                        $reject.call(wrapper, e)
                                    }
                                }): (promise._v = value, promise._s = 1, notify(promise, !1))
                            } catch (e) {
                                $reject.call({
                                    _w: promise,
                                    _d: !1
                                }, e)
                            }
                        }
                    };
                USE_NATIVE || ($Promise = function(executor) {
                    anInstance(this, $Promise, "Promise", "_h"), aFunction(executor), Internal.call(this);
                    try {
                        executor(ctx($resolve, this, 1), ctx($reject, this, 1))
                    } catch (err) {
                        $reject.call(this, err)
                    }
                }, (Internal = function(executor) {
                    this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
                }).prototype = _dereq_("./_redefine-all")($Promise.prototype, {
                    then: function(onFulfilled, onRejected) {
                        var reaction = newPromiseCapability(speciesConstructor(this, $Promise));
                        return reaction.ok = "function" != typeof onFulfilled || onFulfilled, reaction.fail = "function" == typeof onRejected && onRejected, reaction.domain = isNode ? process.domain : void 0, this._c.push(reaction), this._a && this._a.push(reaction), this._s && notify(this, !1), reaction.promise
                    },
                    catch: function(onRejected) {
                        return this.then(void 0, onRejected)
                    }
                }), OwnPromiseCapability = function() {
                    var promise = new Internal;
                    this.promise = promise, this.resolve = ctx($resolve, promise, 1), this.reject = ctx($reject, promise, 1)
                }, newPromiseCapabilityModule.f = newPromiseCapability = function(C) {
                    return C === $Promise || C === Wrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C)
                }), $export($export.G + $export.W + $export.F * !USE_NATIVE, {
                    Promise: $Promise
                }), _dereq_("./_set-to-string-tag")($Promise, "Promise"), _dereq_("./_set-species")("Promise"), Wrapper = _dereq_("./_core").Promise, $export($export.S + $export.F * !USE_NATIVE, "Promise", {
                    reject: function(r) {
                        var capability = newPromiseCapability(this);
                        return (0, capability.reject)(r), capability.promise
                    }
                }), $export($export.S + $export.F * (LIBRARY || !USE_NATIVE), "Promise", {
                    resolve: function(x) {
                        return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x)
                    }
                }), $export($export.S + $export.F * !(USE_NATIVE && _dereq_("./_iter-detect")(function(iter) {
                    $Promise.all(iter).catch(empty)
                })), "Promise", {
                    all: function(iterable) {
                        var C = this,
                            capability = newPromiseCapability(C),
                            resolve = capability.resolve,
                            reject = capability.reject,
                            result = perform(function() {
                                var values = [],
                                    index = 0,
                                    remaining = 1;
                                forOf(iterable, !1, function(promise) {
                                    var $index = index++,
                                        alreadyCalled = !1;
                                    values.push(void 0), remaining++, C.resolve(promise).then(function(value) {
                                        alreadyCalled || (alreadyCalled = !0, values[$index] = value, --remaining || resolve(values))
                                    }, reject)
                                }), --remaining || resolve(values)
                            });
                        return result.e && reject(result.v), capability.promise
                    },
                    race: function(iterable) {
                        var C = this,
                            capability = newPromiseCapability(C),
                            reject = capability.reject,
                            result = perform(function() {
                                forOf(iterable, !1, function(promise) {
                                    C.resolve(promise).then(capability.resolve, reject)
                                })
                            });
                        return result.e && reject(result.v), capability.promise
                    }
                })
            }, {
                "./_a-function": 91,
                "./_an-instance": 93,
                "./_classof": 101,
                "./_core": 106,
                "./_ctx": 108,
                "./_export": 114,
                "./_for-of": 116,
                "./_global": 117,
                "./_is-object": 127,
                "./_iter-detect": 131,
                "./_library": 134,
                "./_microtask": 136,
                "./_new-promise-capability": 137,
                "./_perform": 151,
                "./_promise-resolve": 152,
                "./_redefine-all": 154,
                "./_set-species": 159,
                "./_set-to-string-tag": 160,
                "./_species-constructor": 163,
                "./_task": 165,
                "./_wks": 176
            }],
            194: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export"),
                    create = _dereq_("./_object-create"),
                    aFunction = _dereq_("./_a-function"),
                    anObject = _dereq_("./_an-object"),
                    isObject = _dereq_("./_is-object"),
                    fails = _dereq_("./_fails"),
                    bind = _dereq_("./_bind"),
                    rConstruct = (_dereq_("./_global").Reflect || {}).construct,
                    NEW_TARGET_BUG = fails(function() {
                        function F() {}
                        return !(rConstruct(function() {}, [], F) instanceof F)
                    }),
                    ARGS_BUG = !fails(function() {
                        rConstruct(function() {})
                    });
                $export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), "Reflect", {
                    construct: function(Target, args) {
                        aFunction(Target), anObject(args);
                        var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);
                        if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);
                        if (Target == newTarget) {
                            switch (args.length) {
                                case 0:
                                    return new Target;
                                case 1:
                                    return new Target(args[0]);
                                case 2:
                                    return new Target(args[0], args[1]);
                                case 3:
                                    return new Target(args[0], args[1], args[2]);
                                case 4:
                                    return new Target(args[0], args[1], args[2], args[3])
                            }
                            var $args = [null];
                            return $args.push.apply($args, args), new(bind.apply(Target, $args))
                        }
                        var proto = newTarget.prototype,
                            instance = create(isObject(proto) ? proto : Object.prototype),
                            result = Function.apply.call(Target, instance, args);
                        return isObject(result) ? result : instance
                    }
                })
            }, {
                "./_a-function": 91,
                "./_an-object": 94,
                "./_bind": 100,
                "./_export": 114,
                "./_fails": 115,
                "./_global": 117,
                "./_is-object": 127,
                "./_object-create": 139
            }],
            195: [function(_dereq_, module, exports) {
                "use strict";
                var strong = _dereq_("./_collection-strong"),
                    validate = _dereq_("./_validate-collection");
                module.exports = _dereq_("./_collection")("Set", function(get) {
                    return function() {
                        return get(this, 0 < arguments.length ? arguments[0] : void 0)
                    }
                }, {
                    add: function(value) {
                        return strong.def(validate(this, "Set"), value = 0 === value ? 0 : value, value)
                    }
                }, strong)
            }, {
                "./_collection": 105,
                "./_collection-strong": 103,
                "./_validate-collection": 173
            }],
            196: [function(_dereq_, module, exports) {
                "use strict";
                var $at = _dereq_("./_string-at")(!0);
                _dereq_("./_iter-define")(String, "String", function(iterated) {
                    this._t = String(iterated), this._i = 0
                }, function() {
                    var point, O = this._t,
                        index = this._i;
                    return index >= O.length ? {
                        value: void 0,
                        done: !0
                    } : (point = $at(O, index), this._i += point.length, {
                        value: point,
                        done: !1
                    })
                })
            }, {
                "./_iter-define": 130,
                "./_string-at": 164
            }],
            197: [function(_dereq_, module, exports) {
                "use strict";
                var global = _dereq_("./_global"),
                    has = _dereq_("./_has"),
                    DESCRIPTORS = _dereq_("./_descriptors"),
                    $export = _dereq_("./_export"),
                    redefine = _dereq_("./_redefine"),
                    META = _dereq_("./_meta").KEY,
                    $fails = _dereq_("./_fails"),
                    shared = _dereq_("./_shared"),
                    setToStringTag = _dereq_("./_set-to-string-tag"),
                    uid = _dereq_("./_uid"),
                    wks = _dereq_("./_wks"),
                    wksExt = _dereq_("./_wks-ext"),
                    wksDefine = _dereq_("./_wks-define"),
                    enumKeys = _dereq_("./_enum-keys"),
                    isArray = _dereq_("./_is-array"),
                    anObject = _dereq_("./_an-object"),
                    toIObject = _dereq_("./_to-iobject"),
                    toPrimitive = _dereq_("./_to-primitive"),
                    createDesc = _dereq_("./_property-desc"),
                    _create = _dereq_("./_object-create"),
                    gOPNExt = _dereq_("./_object-gopn-ext"),
                    $GOPD = _dereq_("./_object-gopd"),
                    $DP = _dereq_("./_object-dp"),
                    $keys = _dereq_("./_object-keys"),
                    gOPD = $GOPD.f,
                    dP = $DP.f,
                    gOPN = gOPNExt.f,
                    $Symbol = global.Symbol,
                    $JSON = global.JSON,
                    _stringify = $JSON && $JSON.stringify,
                    HIDDEN = wks("_hidden"),
                    TO_PRIMITIVE = wks("toPrimitive"),
                    isEnum = {}.propertyIsEnumerable,
                    SymbolRegistry = shared("symbol-registry"),
                    AllSymbols = shared("symbols"),
                    OPSymbols = shared("op-symbols"),
                    ObjectProto = Object.prototype,
                    USE_NATIVE = "function" == typeof $Symbol,
                    QObject = global.QObject,
                    setter = !QObject || !QObject.prototype || !QObject.prototype.findChild,
                    setSymbolDesc = DESCRIPTORS && $fails(function() {
                        return 7 != _create(dP({}, "a", {
                            get: function() {
                                return dP(this, "a", {
                                    value: 7
                                }).a
                            }
                        })).a
                    }) ? function(it, key, D) {
                        var protoDesc = gOPD(ObjectProto, key);
                        protoDesc && delete ObjectProto[key], dP(it, key, D), protoDesc && it !== ObjectProto && dP(ObjectProto, key, protoDesc)
                    } : dP,
                    wrap = function(tag) {
                        var sym = AllSymbols[tag] = _create($Symbol.prototype);
                        return sym._k = tag, sym
                    },
                    isSymbol = USE_NATIVE && "symbol" == _typeof4($Symbol.iterator) ? function(it) {
                        return "symbol" == _typeof4(it)
                    } : function(it) {
                        return it instanceof $Symbol
                    },
                    $defineProperty = function(it, key, D) {
                        return it === ObjectProto && $defineProperty(OPSymbols, key, D), anObject(it), key = toPrimitive(key, !0), anObject(D), has(AllSymbols, key) ? (D.enumerable ? (has(it, HIDDEN) && it[HIDDEN][key] && (it[HIDDEN][key] = !1), D = _create(D, {
                            enumerable: createDesc(0, !1)
                        })) : (has(it, HIDDEN) || dP(it, HIDDEN, createDesc(1, {})), it[HIDDEN][key] = !0), setSymbolDesc(it, key, D)) : dP(it, key, D)
                    },
                    $defineProperties = function(it, P) {
                        anObject(it);
                        for (var key, keys = enumKeys(P = toIObject(P)), i = 0, l = keys.length; i < l;) $defineProperty(it, key = keys[i++], P[key]);
                        return it
                    },
                    $propertyIsEnumerable = function(key) {
                        var E = isEnum.call(this, key = toPrimitive(key, !0));
                        return !(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) && (!(E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]) || E)
                    },
                    $getOwnPropertyDescriptor = function(it, key) {
                        if (it = toIObject(it), key = toPrimitive(key, !0), it !== ObjectProto || !has(AllSymbols, key) || has(OPSymbols, key)) {
                            var D = gOPD(it, key);
                            return !D || !has(AllSymbols, key) || has(it, HIDDEN) && it[HIDDEN][key] || (D.enumerable = !0), D
                        }
                    },
                    $getOwnPropertyNames = function(it) {
                        for (var key, names = gOPN(toIObject(it)), result = [], i = 0; names.length > i;) has(AllSymbols, key = names[i++]) || key == HIDDEN || key == META || result.push(key);
                        return result
                    },
                    $getOwnPropertySymbols = function(it) {
                        for (var key, IS_OP = it === ObjectProto, names = gOPN(IS_OP ? OPSymbols : toIObject(it)), result = [], i = 0; names.length > i;) !has(AllSymbols, key = names[i++]) || IS_OP && !has(ObjectProto, key) || result.push(AllSymbols[key]);
                        return result
                    };
                USE_NATIVE || (redefine(($Symbol = function() {
                    if (this instanceof $Symbol) throw TypeError("Symbol is not a constructor!");
                    var tag = uid(0 < arguments.length ? arguments[0] : void 0);
                    return DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {
                        configurable: !0,
                        set: function $set(value) {
                            this === ObjectProto && $set.call(OPSymbols, value), has(this, HIDDEN) && has(this[HIDDEN], tag) && (this[HIDDEN][tag] = !1), setSymbolDesc(this, tag, createDesc(1, value))
                        }
                    }), wrap(tag)
                }).prototype, "toString", function() {
                    return this._k
                }), $GOPD.f = $getOwnPropertyDescriptor, $DP.f = $defineProperty, _dereq_("./_object-gopn").f = gOPNExt.f = $getOwnPropertyNames, _dereq_("./_object-pie").f = $propertyIsEnumerable, _dereq_("./_object-gops").f = $getOwnPropertySymbols, DESCRIPTORS && !_dereq_("./_library") && redefine(ObjectProto, "propertyIsEnumerable", $propertyIsEnumerable, !0), wksExt.f = function(name) {
                    return wrap(wks(name))
                }), $export($export.G + $export.W + $export.F * !USE_NATIVE, {
                    Symbol: $Symbol
                });
                for (var es6Symbols = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), j = 0; es6Symbols.length > j;) wks(es6Symbols[j++]);
                for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);
                $export($export.S + $export.F * !USE_NATIVE, "Symbol", {
                    for: function(key) {
                        return has(SymbolRegistry, key += "") ? SymbolRegistry[key] : SymbolRegistry[key] = $Symbol(key)
                    },
                    keyFor: function(sym) {
                        if (!isSymbol(sym)) throw TypeError(sym + " is not a symbol!");
                        for (var key in SymbolRegistry)
                            if (SymbolRegistry[key] === sym) return key
                    },
                    useSetter: function() {
                        setter = !0
                    },
                    useSimple: function() {
                        setter = !1
                    }
                }), $export($export.S + $export.F * !USE_NATIVE, "Object", {
                    create: function(it, P) {
                        return void 0 === P ? _create(it) : $defineProperties(_create(it), P)
                    },
                    defineProperty: $defineProperty,
                    defineProperties: $defineProperties,
                    getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
                    getOwnPropertyNames: $getOwnPropertyNames,
                    getOwnPropertySymbols: $getOwnPropertySymbols
                }), $JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function() {
                    var S = $Symbol();
                    return "[null]" != _stringify([S]) || "{}" != _stringify({
                        a: S
                    }) || "{}" != _stringify(Object(S))
                })), "JSON", {
                    stringify: function(it) {
                        if (void 0 !== it && !isSymbol(it)) {
                            for (var replacer, $replacer, args = [it], i = 1; arguments.length > i;) args.push(arguments[i++]);
                            return "function" == typeof(replacer = args[1]) && ($replacer = replacer), !$replacer && isArray(replacer) || (replacer = function(key, value) {
                                if ($replacer && (value = $replacer.call(this, key, value)), !isSymbol(value)) return value
                            }), args[1] = replacer, _stringify.apply($JSON, args)
                        }
                    }
                }), $Symbol.prototype[TO_PRIMITIVE] || _dereq_("./_hide")($Symbol.prototype, TO_PRIMITIVE, $Symbol.prototype.valueOf), setToStringTag($Symbol, "Symbol"), setToStringTag(Math, "Math", !0), setToStringTag(global.JSON, "JSON", !0)
            }, {
                "./_an-object": 94,
                "./_descriptors": 110,
                "./_enum-keys": 113,
                "./_export": 114,
                "./_fails": 115,
                "./_global": 117,
                "./_has": 118,
                "./_hide": 119,
                "./_is-array": 125,
                "./_library": 134,
                "./_meta": 135,
                "./_object-create": 139,
                "./_object-dp": 140,
                "./_object-gopd": 142,
                "./_object-gopn": 144,
                "./_object-gopn-ext": 143,
                "./_object-gops": 145,
                "./_object-keys": 148,
                "./_object-pie": 149,
                "./_property-desc": 153,
                "./_redefine": 155,
                "./_set-to-string-tag": 160,
                "./_shared": 162,
                "./_to-iobject": 168,
                "./_to-primitive": 171,
                "./_uid": 172,
                "./_wks": 176,
                "./_wks-define": 174,
                "./_wks-ext": 175
            }],
            198: [function(_dereq_, module, exports) {
                _dereq_("./_set-collection-from")("Map")
            }, {
                "./_set-collection-from": 156
            }],
            199: [function(_dereq_, module, exports) {
                _dereq_("./_set-collection-of")("Map")
            }, {
                "./_set-collection-of": 157
            }],
            200: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.P + $export.R, "Map", {
                    toJSON: _dereq_("./_collection-to-json")("Map")
                })
            }, {
                "./_collection-to-json": 104,
                "./_export": 114
            }],
            201: [function(_dereq_, module, exports) {
                "use strict";
                var $export = _dereq_("./_export"),
                    core = _dereq_("./_core"),
                    global = _dereq_("./_global"),
                    speciesConstructor = _dereq_("./_species-constructor"),
                    promiseResolve = _dereq_("./_promise-resolve");
                $export($export.P + $export.R, "Promise", {
                    finally: function(onFinally) {
                        var C = speciesConstructor(this, core.Promise || global.Promise),
                            isFunction = "function" == typeof onFinally;
                        return this.then(isFunction ? function(x) {
                            return promiseResolve(C, onFinally()).then(function() {
                                return x
                            })
                        } : onFinally, isFunction ? function(e) {
                            return promiseResolve(C, onFinally()).then(function() {
                                throw e
                            })
                        } : onFinally)
                    }
                })
            }, {
                "./_core": 106,
                "./_export": 114,
                "./_global": 117,
                "./_promise-resolve": 152,
                "./_species-constructor": 163
            }],
            202: [function(_dereq_, module, exports) {
                "use strict";
                var $export = _dereq_("./_export"),
                    newPromiseCapability = _dereq_("./_new-promise-capability"),
                    perform = _dereq_("./_perform");
                $export($export.S, "Promise", {
                    try: function(callbackfn) {
                        var promiseCapability = newPromiseCapability.f(this),
                            result = perform(callbackfn);
                        return (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v), promiseCapability.promise
                    }
                })
            }, {
                "./_export": 114,
                "./_new-promise-capability": 137,
                "./_perform": 151
            }],
            203: [function(_dereq_, module, exports) {
                _dereq_("./_set-collection-from")("Set")
            }, {
                "./_set-collection-from": 156
            }],
            204: [function(_dereq_, module, exports) {
                _dereq_("./_set-collection-of")("Set")
            }, {
                "./_set-collection-of": 157
            }],
            205: [function(_dereq_, module, exports) {
                var $export = _dereq_("./_export");
                $export($export.P + $export.R, "Set", {
                    toJSON: _dereq_("./_collection-to-json")("Set")
                })
            }, {
                "./_collection-to-json": 104,
                "./_export": 114
            }],
            206: [function(_dereq_, module, exports) {
                _dereq_("./_wks-define")("asyncIterator")
            }, {
                "./_wks-define": 174
            }],
            207: [function(_dereq_, module, exports) {
                _dereq_("./_wks-define")("observable")
            }, {
                "./_wks-define": 174
            }],
            208: [function(_dereq_, module, exports) {
                _dereq_("./es6.array.iterator");
                for (var global = _dereq_("./_global"), hide = _dereq_("./_hide"), Iterators = _dereq_("./_iterators"), TO_STRING_TAG = _dereq_("./_wks")("toStringTag"), DOMIterables = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), i = 0; i < DOMIterables.length; i++) {
                    var NAME = DOMIterables[i],
                        Collection = global[NAME],
                        proto = Collection && Collection.prototype;
                    proto && !proto[TO_STRING_TAG] && hide(proto, TO_STRING_TAG, NAME), Iterators[NAME] = Iterators.Array
                }
            }, {
                "./_global": 117,
                "./_hide": 119,
                "./_iterators": 133,
                "./_wks": 176,
                "./es6.array.iterator": 181
            }],
            209: [function(_dereq_, module, exports) {
                exports.UINT32 = _dereq_("./lib/uint32"), exports.UINT64 = _dereq_("./lib/uint64")
            }, {
                "./lib/uint32": 210,
                "./lib/uint64": 211
            }],
            210: [function(_dereq_, module, exports) {
                ! function(root) {
                    UINT32(Math.pow(36, 5)), UINT32(Math.pow(16, 7)), UINT32(Math.pow(10, 9)), UINT32(Math.pow(2, 30)), UINT32(36), UINT32(16), UINT32(10), UINT32(2);

                    function UINT32(l, h) {
                        return this instanceof UINT32 ? (this._low = 0, this._high = 0, this.remainder = null, void 0 === h ? fromNumber.call(this, l) : "string" == typeof l ? fromString.call(this, l, h) : void fromBits.call(this, l, h)) : new UINT32(l, h)
                    }

                    function fromBits(l, h) {
                        return this._low = 0 | l, this._high = 0 | h, this
                    }

                    function fromNumber(value) {
                        return this._low = 65535 & value, this._high = value >>> 16, this
                    }

                    function fromString(s, radix) {
                        var value = parseInt(s, radix || 10);
                        return this._low = 65535 & value, this._high = value >>> 16, this
                    }
                    UINT32.prototype.fromBits = fromBits, UINT32.prototype.fromNumber = fromNumber, UINT32.prototype.fromString = fromString, UINT32.prototype.toNumber = function() {
                        return 65536 * this._high + this._low
                    }, UINT32.prototype.toString = function(radix) {
                        return this.toNumber().toString(radix || 10)
                    }, UINT32.prototype.add = function(other) {
                        var a00 = this._low + other._low,
                            a16 = a00 >>> 16;
                        return a16 += this._high + other._high, this._low = 65535 & a00, this._high = 65535 & a16, this
                    }, UINT32.prototype.subtract = function(other) {
                        return this.add(other.clone().negate())
                    }, UINT32.prototype.multiply = function(other) {
                        var c16, c00, a16 = this._high,
                            a00 = this._low,
                            b16 = other._high,
                            b00 = other._low;
                        return c16 = (c00 = a00 * b00) >>> 16, c16 += a16 * b00, c16 &= 65535, c16 += a00 * b16, this._low = 65535 & c00, this._high = 65535 & c16, this
                    }, UINT32.prototype.div = function(other) {
                        if (0 == other._low && 0 == other._high) throw Error("division by zero");
                        if (0 == other._high && 1 == other._low) return this.remainder = new UINT32(0), this;
                        if (other.gt(this)) return this.remainder = this.clone(), this._low = 0, this._high = 0, this;
                        if (this.eq(other)) return this.remainder = new UINT32(0), this._low = 1, this._high = 0, this;
                        for (var _other = other.clone(), i = -1; !this.lt(_other);) _other.shiftLeft(1, !0), i++;
                        for (this.remainder = this.clone(), this._low = 0, this._high = 0; 0 <= i; i--) _other.shiftRight(1), this.remainder.lt(_other) || (this.remainder.subtract(_other), 16 <= i ? this._high |= 1 << i - 16 : this._low |= 1 << i);
                        return this
                    }, UINT32.prototype.negate = function() {
                        var v = 1 + (65535 & ~this._low);
                        return this._low = 65535 & v, this._high = ~this._high + (v >>> 16) & 65535, this
                    }, UINT32.prototype.equals = UINT32.prototype.eq = function(other) {
                        return this._low == other._low && this._high == other._high
                    }, UINT32.prototype.greaterThan = UINT32.prototype.gt = function(other) {
                        return this._high > other._high || !(this._high < other._high) && this._low > other._low
                    }, UINT32.prototype.lessThan = UINT32.prototype.lt = function(other) {
                        return this._high < other._high || !(this._high > other._high) && this._low < other._low
                    }, UINT32.prototype.or = function(other) {
                        return this._low |= other._low, this._high |= other._high, this
                    }, UINT32.prototype.and = function(other) {
                        return this._low &= other._low, this._high &= other._high, this
                    }, UINT32.prototype.not = function() {
                        return this._low = 65535 & ~this._low, this._high = 65535 & ~this._high, this
                    }, UINT32.prototype.xor = function(other) {
                        return this._low ^= other._low, this._high ^= other._high, this
                    }, UINT32.prototype.shiftRight = UINT32.prototype.shiftr = function(n) {
                        return 16 < n ? (this._low = this._high >> n - 16, this._high = 0) : 16 == n ? (this._low = this._high, this._high = 0) : (this._low = this._low >> n | this._high << 16 - n & 65535, this._high >>= n), this
                    }, UINT32.prototype.shiftLeft = UINT32.prototype.shiftl = function(n, allowOverflow) {
                        return 16 < n ? (this._high = this._low << n - 16, this._low = 0, allowOverflow || (this._high &= 65535)) : 16 == n ? (this._high = this._low, this._low = 0) : (this._high = this._high << n | this._low >> 16 - n, this._low = this._low << n & 65535, allowOverflow || (this._high &= 65535)), this
                    }, UINT32.prototype.rotateLeft = UINT32.prototype.rotl = function(n) {
                        var v = this._high << 16 | this._low;
                        return v = v << n | v >>> 32 - n, this._low = 65535 & v, this._high = v >>> 16, this
                    }, UINT32.prototype.rotateRight = UINT32.prototype.rotr = function(n) {
                        var v = this._high << 16 | this._low;
                        return v = v >>> n | v << 32 - n, this._low = 65535 & v, this._high = v >>> 16, this
                    }, UINT32.prototype.clone = function() {
                        return new UINT32(this._low, this._high)
                    }, void 0 !== define && define.amd ? define([], function() {
                        return UINT32
                    }) : void 0 !== module && module.exports ? module.exports = UINT32 : root.UINT32 = UINT32
                }(this)
            }, {}],
            211: [function(_dereq_, module, exports) {
                ! function(root) {
                    var radixPowerCache = {
                            16: UINT64(Math.pow(16, 5)),
                            10: UINT64(Math.pow(10, 5)),
                            2: UINT64(Math.pow(2, 5))
                        },
                        radixCache = {
                            16: UINT64(16),
                            10: UINT64(10),
                            2: UINT64(2)
                        };

                    function UINT64(a00, a16, a32, a48) {
                        return this instanceof UINT64 ? (this.remainder = null, "string" == typeof a00 ? fromString.call(this, a00, a16) : void 0 === a16 ? fromNumber.call(this, a00) : void fromBits.apply(this, arguments)) : new UINT64(a00, a16, a32, a48)
                    }

                    function fromBits(a00, a16, a32, a48) {
                        return void 0 === a32 ? (this._a00 = 65535 & a00, this._a16 = a00 >>> 16, this._a32 = 65535 & a16, this._a48 = a16 >>> 16) : (this._a00 = 0 | a00, this._a16 = 0 | a16, this._a32 = 0 | a32, this._a48 = 0 | a48), this
                    }

                    function fromNumber(value) {
                        return this._a00 = 65535 & value, this._a16 = value >>> 16, this._a32 = 0, this._a48 = 0, this
                    }

                    function fromString(s, radix) {
                        radix = radix || 10, this._a00 = 0, this._a16 = 0, this._a32 = 0, this._a48 = 0;
                        for (var radixUint = radixPowerCache[radix] || new UINT64(Math.pow(radix, 5)), i = 0, len = s.length; i < len; i += 5) {
                            var size = Math.min(5, len - i),
                                value = parseInt(s.slice(i, i + size), radix);
                            this.multiply(size < 5 ? new UINT64(Math.pow(radix, size)) : radixUint).add(new UINT64(value))
                        }
                        return this
                    }
                    UINT64.prototype.fromBits = fromBits, UINT64.prototype.fromNumber = fromNumber, UINT64.prototype.fromString = fromString, UINT64.prototype.toNumber = function() {
                        return 65536 * this._a16 + this._a00
                    }, UINT64.prototype.toString = function(radix) {
                        var radixUint = radixCache[radix = radix || 10] || new UINT64(radix);
                        if (!this.gt(radixUint)) return this.toNumber().toString(radix);
                        for (var self = this.clone(), res = new Array(64), i = 63; 0 <= i && (self.div(radixUint), res[i] = self.remainder.toNumber().toString(radix), self.gt(radixUint)); i--);
                        return res[i - 1] = self.toNumber().toString(radix), res.join("")
                    }, UINT64.prototype.add = function(other) {
                        var a00 = this._a00 + other._a00,
                            a16 = a00 >>> 16,
                            a32 = (a16 += this._a16 + other._a16) >>> 16,
                            a48 = (a32 += this._a32 + other._a32) >>> 16;
                        return a48 += this._a48 + other._a48, this._a00 = 65535 & a00, this._a16 = 65535 & a16, this._a32 = 65535 & a32, this._a48 = 65535 & a48, this
                    }, UINT64.prototype.subtract = function(other) {
                        return this.add(other.clone().negate())
                    }, UINT64.prototype.multiply = function(other) {
                        var a00 = this._a00,
                            a16 = this._a16,
                            a32 = this._a32,
                            a48 = this._a48,
                            b00 = other._a00,
                            b16 = other._a16,
                            b32 = other._a32,
                            c00 = a00 * b00,
                            c16 = c00 >>> 16,
                            c32 = (c16 += a00 * b16) >>> 16;
                        c16 &= 65535, c32 += (c16 += a16 * b00) >>> 16;
                        var c48 = (c32 += a00 * b32) >>> 16;
                        return c32 &= 65535, c48 += (c32 += a16 * b16) >>> 16, c32 &= 65535, c48 += (c32 += a32 * b00) >>> 16, c48 += a00 * other._a48, c48 &= 65535, c48 += a16 * b32, c48 &= 65535, c48 += a32 * b16, c48 &= 65535, c48 += a48 * b00, this._a00 = 65535 & c00, this._a16 = 65535 & c16, this._a32 = 65535 & c32, this._a48 = 65535 & c48, this
                    }, UINT64.prototype.div = function(other) {
                        if (0 == other._a16 && 0 == other._a32 && 0 == other._a48) {
                            if (0 == other._a00) throw Error("division by zero");
                            if (1 == other._a00) return this.remainder = new UINT64(0), this
                        }
                        if (other.gt(this)) return this.remainder = this.clone(), this._a00 = 0, this._a16 = 0, this._a32 = 0, this._a48 = 0, this;
                        if (this.eq(other)) return this.remainder = new UINT64(0), this._a00 = 1, this._a16 = 0, this._a32 = 0, this._a48 = 0, this;
                        for (var _other = other.clone(), i = -1; !this.lt(_other);) _other.shiftLeft(1, !0), i++;
                        for (this.remainder = this.clone(), this._a00 = 0, this._a16 = 0, this._a32 = 0, this._a48 = 0; 0 <= i; i--) _other.shiftRight(1), this.remainder.lt(_other) || (this.remainder.subtract(_other), 48 <= i ? this._a48 |= 1 << i - 48 : 32 <= i ? this._a32 |= 1 << i - 32 : 16 <= i ? this._a16 |= 1 << i - 16 : this._a00 |= 1 << i);
                        return this
                    }, UINT64.prototype.negate = function() {
                        var v = 1 + (65535 & ~this._a00);
                        return this._a00 = 65535 & v, v = (65535 & ~this._a16) + (v >>> 16), this._a16 = 65535 & v, v = (65535 & ~this._a32) + (v >>> 16), this._a32 = 65535 & v, this._a48 = ~this._a48 + (v >>> 16) & 65535, this
                    }, UINT64.prototype.equals = UINT64.prototype.eq = function(other) {
                        return this._a48 == other._a48 && this._a00 == other._a00 && this._a32 == other._a32 && this._a16 == other._a16
                    }, UINT64.prototype.greaterThan = UINT64.prototype.gt = function(other) {
                        return this._a48 > other._a48 || !(this._a48 < other._a48) && (this._a32 > other._a32 || !(this._a32 < other._a32) && (this._a16 > other._a16 || !(this._a16 < other._a16) && this._a00 > other._a00))
                    }, UINT64.prototype.lessThan = UINT64.prototype.lt = function(other) {
                        return this._a48 < other._a48 || !(this._a48 > other._a48) && (this._a32 < other._a32 || !(this._a32 > other._a32) && (this._a16 < other._a16 || !(this._a16 > other._a16) && this._a00 < other._a00))
                    }, UINT64.prototype.or = function(other) {
                        return this._a00 |= other._a00, this._a16 |= other._a16, this._a32 |= other._a32, this._a48 |= other._a48, this
                    }, UINT64.prototype.and = function(other) {
                        return this._a00 &= other._a00, this._a16 &= other._a16, this._a32 &= other._a32, this._a48 &= other._a48, this
                    }, UINT64.prototype.xor = function(other) {
                        return this._a00 ^= other._a00, this._a16 ^= other._a16, this._a32 ^= other._a32, this._a48 ^= other._a48, this
                    }, UINT64.prototype.not = function() {
                        return this._a00 = 65535 & ~this._a00, this._a16 = 65535 & ~this._a16, this._a32 = 65535 & ~this._a32, this._a48 = 65535 & ~this._a48, this
                    }, UINT64.prototype.shiftRight = UINT64.prototype.shiftr = function(n) {
                        return 48 <= (n %= 64) ? (this._a00 = this._a48 >> n - 48, this._a16 = 0, this._a32 = 0, this._a48 = 0) : 32 <= n ? (n -= 32, this._a00 = 65535 & (this._a32 >> n | this._a48 << 16 - n), this._a16 = this._a48 >> n & 65535, this._a32 = 0, this._a48 = 0) : 16 <= n ? (n -= 16, this._a00 = 65535 & (this._a16 >> n | this._a32 << 16 - n), this._a16 = 65535 & (this._a32 >> n | this._a48 << 16 - n), this._a32 = this._a48 >> n & 65535, this._a48 = 0) : (this._a00 = 65535 & (this._a00 >> n | this._a16 << 16 - n), this._a16 = 65535 & (this._a16 >> n | this._a32 << 16 - n), this._a32 = 65535 & (this._a32 >> n | this._a48 << 16 - n), this._a48 = this._a48 >> n & 65535), this
                    }, UINT64.prototype.shiftLeft = UINT64.prototype.shiftl = function(n, allowOverflow) {
                        return 48 <= (n %= 64) ? (this._a48 = this._a00 << n - 48, this._a32 = 0, this._a16 = 0, this._a00 = 0) : 32 <= n ? (n -= 32, this._a48 = this._a16 << n | this._a00 >> 16 - n, this._a32 = this._a00 << n & 65535, this._a16 = 0, this._a00 = 0) : 16 <= n ? (n -= 16, this._a48 = this._a32 << n | this._a16 >> 16 - n, this._a32 = 65535 & (this._a16 << n | this._a00 >> 16 - n), this._a16 = this._a00 << n & 65535, this._a00 = 0) : (this._a48 = this._a48 << n | this._a32 >> 16 - n, this._a32 = 65535 & (this._a32 << n | this._a16 >> 16 - n), this._a16 = 65535 & (this._a16 << n | this._a00 >> 16 - n), this._a00 = this._a00 << n & 65535), allowOverflow || (this._a48 &= 65535), this
                    }, UINT64.prototype.rotateLeft = UINT64.prototype.rotl = function(n) {
                        if (0 == (n %= 64)) return this;
                        if (32 <= n) {
                            var v = this._a00;
                            if (this._a00 = this._a32, this._a32 = v, v = this._a48, this._a48 = this._a16, this._a16 = v, 32 == n) return this;
                            n -= 32
                        }
                        var high = this._a48 << 16 | this._a32,
                            low = this._a16 << 16 | this._a00,
                            _high = high << n | low >>> 32 - n,
                            _low = low << n | high >>> 32 - n;
                        return this._a00 = 65535 & _low, this._a16 = _low >>> 16, this._a32 = 65535 & _high, this._a48 = _high >>> 16, this
                    }, UINT64.prototype.rotateRight = UINT64.prototype.rotr = function(n) {
                        if (0 == (n %= 64)) return this;
                        if (32 <= n) {
                            var v = this._a00;
                            if (this._a00 = this._a32, this._a32 = v, v = this._a48, this._a48 = this._a16, this._a16 = v, 32 == n) return this;
                            n -= 32
                        }
                        var high = this._a48 << 16 | this._a32,
                            low = this._a16 << 16 | this._a00,
                            _high = high >>> n | low << 32 - n,
                            _low = low >>> n | high << 32 - n;
                        return this._a00 = 65535 & _low, this._a16 = _low >>> 16, this._a32 = 65535 & _high, this._a48 = _high >>> 16, this
                    }, UINT64.prototype.clone = function() {
                        return new UINT64(this._a00, this._a16, this._a32, this._a48)
                    }, void 0 !== define && define.amd ? define([], function() {
                        return UINT64
                    }) : void 0 !== module && module.exports ? module.exports = UINT64 : root.UINT64 = UINT64
                }(this)
            }, {}],
            212: [function(_dereq_, module, exports) {
                module.exports = _dereq_("./lib")
            }, {
                "./lib": 213
            }],
            213: [function(_dereq_, module, exports) {
                var FORMAT_REGEXP = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;

                function matchToInteger(match) {
                    return void 0 === match ? 0 : parseInt(match, 10)
                }
                exports.fromSeconds = function(seconds) {
                    if ("number" != typeof seconds) throw new TypeError("Argument `seconds` must be a number");
                    var fullSeconds = seconds % 60,
                        fullMinutesInSeconds = (seconds - fullSeconds) % 3600;
                    return {
                        hours: (seconds - fullSeconds - fullMinutesInSeconds) / 3600,
                        minutes: fullMinutesInSeconds / 60,
                        seconds: fullSeconds
                    }
                }, exports.fromString = function(string) {
                    if ("string" != typeof string) throw new TypeError("Argument `string` must be a string");
                    var matches = string.match(FORMAT_REGEXP);
                    if (null === matches || void 0 === matches[1] && void 0 === matches[2] && void 0 === matches[3]) throw new Error('Could not parse "' + string + '" as a duration.');
                    return {
                        hours: matchToInteger(matches[1]),
                        minutes: matchToInteger(matches[2]),
                        seconds: matchToInteger(matches[3])
                    }
                }, exports.toString = function(duration) {
                    "number" == typeof duration && (duration = exports.fromSeconds(duration));
                    var result = "PT";
                    return 0 < duration.hours && (result += duration.hours + "H"), 0 < duration.minutes && (result += duration.minutes + "M"), 0 < duration.seconds && (result += duration.seconds + "S"), "PT" === result && (result += "0S"), result
                }, exports.toSeconds = function(stringOrDuration) {
                    var duration = stringOrDuration;
                    return "string" == typeof stringOrDuration && (duration = exports.fromString(stringOrDuration)), 3600 * duration.hours + 60 * duration.minutes + duration.seconds
                }
            }, {}],
            214: [function(_dereq_, module, exports) {
                function EventEmitter() {
                    this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0
                }

                function isFunction(arg) {
                    return "function" == typeof arg
                }

                function isObject(arg) {
                    return "object" === _typeof4(arg) && null !== arg
                }

                function isUndefined(arg) {
                    return void 0 === arg
                }((module.exports = EventEmitter).EventEmitter = EventEmitter).prototype._events = void 0, EventEmitter.prototype._maxListeners = void 0, EventEmitter.defaultMaxListeners = 10, EventEmitter.prototype.setMaxListeners = function(n) {
                    if ("number" != typeof n || n < 0 || isNaN(n)) throw TypeError("n must be a positive number");
                    return this._maxListeners = n, this
                }, EventEmitter.prototype.emit = function(type) {
                    var er, handler, len, args, i, listeners;
                    if (this._events || (this._events = {}), "error" === type && (!this._events.error || isObject(this._events.error) && !this._events.error.length)) {
                        if ((er = arguments[1]) instanceof Error) throw er;
                        var err = new Error('Uncaught, unspecified "error" event. (' + er + ")");
                        throw err.context = er, err
                    }
                    if (isUndefined(handler = this._events[type])) return !1;
                    if (isFunction(handler)) switch (arguments.length) {
                        case 1:
                            handler.call(this);
                            break;
                        case 2:
                            handler.call(this, arguments[1]);
                            break;
                        case 3:
                            handler.call(this, arguments[1], arguments[2]);
                            break;
                        default:
                            args = Array.prototype.slice.call(arguments, 1), handler.apply(this, args)
                    } else if (isObject(handler))
                        for (args = Array.prototype.slice.call(arguments, 1), len = (listeners = handler.slice()).length, i = 0; i < len; i++) listeners[i].apply(this, args);
                    return !0
                }, EventEmitter.prototype.on = EventEmitter.prototype.addListener = function(type, listener) {
                    var m;
                    if (!isFunction(listener)) throw TypeError("listener must be a function");
                    return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", type, isFunction(listener.listener) ? listener.listener : listener), this._events[type] ? isObject(this._events[type]) ? this._events[type].push(listener) : this._events[type] = [this._events[type], listener] : this._events[type] = listener, isObject(this._events[type]) && !this._events[type].warned && (m = isUndefined(this._maxListeners) ? EventEmitter.defaultMaxListeners : this._maxListeners) && 0 < m && this._events[type].length > m && (this._events[type].warned = !0, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[type].length), "function" == typeof console.trace && console.trace()), this
                }, EventEmitter.prototype.once = function(type, listener) {
                    if (!isFunction(listener)) throw TypeError("listener must be a function");
                    var fired = !1;

                    function g() {
                        this.removeListener(type, g), fired || (fired = !0, listener.apply(this, arguments))
                    }
                    return g.listener = listener, this.on(type, g), this
                }, EventEmitter.prototype.removeListener = function(type, listener) {
                    var list, position, length, i;
                    if (!isFunction(listener)) throw TypeError("listener must be a function");
                    if (!this._events || !this._events[type]) return this;
                    if (length = (list = this._events[type]).length, position = -1, list === listener || isFunction(list.listener) && list.listener === listener) delete this._events[type], this._events.removeListener && this.emit("removeListener", type, listener);
                    else if (isObject(list)) {
                        for (i = length; 0 < i--;)
                            if (list[i] === listener || list[i].listener && list[i].listener === listener) {
                                position = i;
                                break
                            } if (position < 0) return this;
                        1 === list.length ? (list.length = 0, delete this._events[type]) : list.splice(position, 1), this._events.removeListener && this.emit("removeListener", type, listener)
                    }
                    return this
                }, EventEmitter.prototype.removeAllListeners = function(type) {
                    var key, listeners;
                    if (!this._events) return this;
                    if (!this._events.removeListener) return 0 === arguments.length ? this._events = {} : this._events[type] && delete this._events[type], this;
                    if (0 === arguments.length) {
                        for (key in this._events) "removeListener" !== key && this.removeAllListeners(key);
                        return this.removeAllListeners("removeListener"), this._events = {}, this
                    }
                    if (isFunction(listeners = this._events[type])) this.removeListener(type, listeners);
                    else if (listeners)
                        for (; listeners.length;) this.removeListener(type, listeners[listeners.length - 1]);
                    return delete this._events[type], this
                }, EventEmitter.prototype.listeners = function(type) {
                    return this._events && this._events[type] ? isFunction(this._events[type]) ? [this._events[type]] : this._events[type].slice() : []
                }, EventEmitter.prototype.listenerCount = function(type) {
                    if (this._events) {
                        var evlistener = this._events[type];
                        if (isFunction(evlistener)) return 1;
                        if (evlistener) return evlistener.length
                    }
                    return 0
                }, EventEmitter.listenerCount = function(emitter, type) {
                    return emitter.listenerCount(type)
                }
            }, {}],
            215: [function(_dereq_, module, exports) {
                exports.read = function(buffer, offset, isLE, mLen, nBytes) {
                    var e, m, eLen = 8 * nBytes - mLen - 1,
                        eMax = (1 << eLen) - 1,
                        eBias = eMax >> 1,
                        nBits = -7,
                        i = isLE ? nBytes - 1 : 0,
                        d = isLE ? -1 : 1,
                        s = buffer[offset + i];
                    for (i += d, e = s & (1 << -nBits) - 1, s >>= -nBits, nBits += eLen; 0 < nBits; e = 256 * e + buffer[offset + i], i += d, nBits -= 8);
                    for (m = e & (1 << -nBits) - 1, e >>= -nBits, nBits += mLen; 0 < nBits; m = 256 * m + buffer[offset + i], i += d, nBits -= 8);
                    if (0 === e) e = 1 - eBias;
                    else {
                        if (e === eMax) return m ? NaN : 1 / 0 * (s ? -1 : 1);
                        m += Math.pow(2, mLen), e -= eBias
                    }
                    return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
                }, exports.write = function(buffer, value, offset, isLE, mLen, nBytes) {
                    var e, m, c, eLen = 8 * nBytes - mLen - 1,
                        eMax = (1 << eLen) - 1,
                        eBias = eMax >> 1,
                        rt = 23 === mLen ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                        i = isLE ? 0 : nBytes - 1,
                        d = isLE ? 1 : -1,
                        s = value < 0 || 0 === value && 1 / value < 0 ? 1 : 0;
                    for (value = Math.abs(value), isNaN(value) || value === 1 / 0 ? (m = isNaN(value) ? 1 : 0, e = eMax) : (e = Math.floor(Math.log(value) / Math.LN2), value * (c = Math.pow(2, -e)) < 1 && (e--, c *= 2), 2 <= (value += 1 <= e + eBias ? rt / c : rt * Math.pow(2, 1 - eBias)) * c && (e++, c /= 2), eMax <= e + eBias ? (m = 0, e = eMax) : 1 <= e + eBias ? (m = (value * c - 1) * Math.pow(2, mLen), e += eBias) : (m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen), e = 0)); 8 <= mLen; buffer[offset + i] = 255 & m, i += d, m /= 256, mLen -= 8);
                    for (e = e << mLen | m, eLen += mLen; 0 < eLen; buffer[offset + i] = 255 & e, i += d, e /= 256, eLen -= 8);
                    buffer[offset + i - d] |= 128 * s
                }
            }, {}],
            216: [function(_dereq_, module, exports) {
                module.exports = window.FormData
            }, {}],
            217: [function(_dereq_, module, exports) {
                var StateMachine;
                StateMachine = {
                    VERSION: "2.4.0",
                    Result: {
                        SUCCEEDED: 1,
                        NOTRANSITION: 2,
                        CANCELLED: 3,
                        PENDING: 4
                    },
                    Error: {
                        INVALID_TRANSITION: 100,
                        PENDING_TRANSITION: 200,
                        INVALID_CALLBACK: 300
                    },
                    WILDCARD: "*",
                    ASYNC: "async",
                    create: function(cfg, target) {
                        var initial = "string" == typeof cfg.initial ? {
                                state: cfg.initial
                            } : cfg.initial,
                            terminal = cfg.terminal || cfg.final,
                            fsm = target || cfg.target || {},
                            events = cfg.events || [],
                            callbacks = cfg.callbacks || {},
                            map = {},
                            transitions = {},
                            add = function(e) {
                                var from = Array.isArray(e.from) ? e.from : e.from ? [e.from] : [StateMachine.WILDCARD];
                                map[e.name] = map[e.name] || {};
                                for (var n = 0; n < from.length; n++) transitions[from[n]] = transitions[from[n]] || [], transitions[from[n]].push(e.name), map[e.name][from[n]] = e.to || from[n];
                                e.to && (transitions[e.to] = transitions[e.to] || [])
                            };
                        initial && (initial.event = initial.event || "startup", add({
                            name: initial.event,
                            from: "none",
                            to: initial.state
                        }));
                        for (var n = 0; n < events.length; n++) add(events[n]);
                        for (var name in map) map.hasOwnProperty(name) && (fsm[name] = StateMachine.buildEvent(name, map[name]));
                        for (var name in callbacks) callbacks.hasOwnProperty(name) && (fsm[name] = callbacks[name]);
                        return fsm.current = "none", fsm.is = function(state) {
                            return Array.isArray(state) ? 0 <= state.indexOf(this.current) : this.current === state
                        }, fsm.can = function(event) {
                            return !this.transition && void 0 !== map[event] && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD))
                        }, fsm.cannot = function(event) {
                            return !this.can(event)
                        }, fsm.transitions = function() {
                            return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || [])
                        }, fsm.isFinished = function() {
                            return this.is(terminal)
                        }, fsm.error = cfg.error || function(name, from, to, args, error, msg, e) {
                            throw e || msg
                        }, fsm.states = function() {
                            return Object.keys(transitions).sort()
                        }, initial && !initial.defer && fsm[initial.event](), fsm
                    },
                    doCallback: function(fsm, func, name, from, to, args) {
                        if (func) try {
                            return func.apply(fsm, [name, from, to].concat(args))
                        } catch (e) {
                            return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, "an exception occurred in a caller-provided callback function", e)
                        }
                    },
                    beforeAnyEvent: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm.onbeforeevent, name, from, to, args)
                    },
                    afterAnyEvent: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm.onafterevent || fsm.onevent, name, from, to, args)
                    },
                    leaveAnyState: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm.onleavestate, name, from, to, args)
                    },
                    enterAnyState: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm.onenterstate || fsm.onstate, name, from, to, args)
                    },
                    changeState: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm.onchangestate, name, from, to, args)
                    },
                    beforeThisEvent: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm["onbefore" + name], name, from, to, args)
                    },
                    afterThisEvent: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm["onafter" + name] || fsm["on" + name], name, from, to, args)
                    },
                    leaveThisState: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm["onleave" + from], name, from, to, args)
                    },
                    enterThisState: function(fsm, name, from, to, args) {
                        return StateMachine.doCallback(fsm, fsm["onenter" + to] || fsm["on" + to], name, from, to, args)
                    },
                    beforeEvent: function(fsm, name, from, to, args) {
                        if (!1 === StateMachine.beforeThisEvent(fsm, name, from, to, args) || !1 === StateMachine.beforeAnyEvent(fsm, name, from, to, args)) return !1
                    },
                    afterEvent: function(fsm, name, from, to, args) {
                        StateMachine.afterThisEvent(fsm, name, from, to, args), StateMachine.afterAnyEvent(fsm, name, from, to, args)
                    },
                    leaveState: function(fsm, name, from, to, args) {
                        var specific = StateMachine.leaveThisState(fsm, name, from, to, args),
                            general = StateMachine.leaveAnyState(fsm, name, from, to, args);
                        return !1 !== specific && !1 !== general && (StateMachine.ASYNC === specific || StateMachine.ASYNC === general ? StateMachine.ASYNC : void 0)
                    },
                    enterState: function(fsm, name, from, to, args) {
                        StateMachine.enterThisState(fsm, name, from, to, args), StateMachine.enterAnyState(fsm, name, from, to, args)
                    },
                    buildEvent: function(name, map) {
                        return function() {
                            var from = this.current,
                                to = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from,
                                args = Array.prototype.slice.call(arguments);
                            if (this.transition) return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, "event " + name + " inappropriate because previous transition did not complete");
                            if (this.cannot(name)) return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, "event " + name + " inappropriate in current state " + this.current);
                            if (!1 === StateMachine.beforeEvent(this, name, from, to, args)) return StateMachine.Result.CANCELLED;
                            if (from === to) return StateMachine.afterEvent(this, name, from, to, args), StateMachine.Result.NOTRANSITION;
                            var fsm = this;
                            this.transition = function() {
                                return fsm.transition = null, fsm.current = to, StateMachine.enterState(fsm, name, from, to, args), StateMachine.changeState(fsm, name, from, to, args), StateMachine.afterEvent(fsm, name, from, to, args), StateMachine.Result.SUCCEEDED
                            }, this.transition.cancel = function() {
                                fsm.transition = null, StateMachine.afterEvent(fsm, name, from, to, args)
                            };
                            var leave = StateMachine.leaveState(this, name, from, to, args);
                            return !1 === leave ? (this.transition = null, StateMachine.Result.CANCELLED) : StateMachine.ASYNC === leave ? StateMachine.Result.PENDING : this.transition ? this.transition() : void 0
                        }
                    }
                }, void 0 !== exports ? (void 0 !== module && module.exports && (exports = module.exports = StateMachine), exports.StateMachine = StateMachine) : "function" == typeof define && define.amd ? define(function(_dereq_) {
                    return StateMachine
                }) : "undefined" != typeof window ? window.StateMachine = StateMachine : "undefined" != typeof self && (self.StateMachine = StateMachine)
            }, {}],
            218: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getIterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/get-iterator")),
                    _iterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/symbol/iterator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Node = function() {
                        function Node(key, value) {
                            (0, _classCallCheck3.default)(this, Node), this.balanceFactor = 0, this.key = key, this.value = value, this.parent = null, this.left = null, this.right = null
                        }
                        return (0, _createClass3.default)(Node, [{
                            key: "update",
                            value: function(value) {
                                this.value = value
                            }
                        }, {
                            key: "replace",
                            value: function(target, replacement) {
                                target && (this.left === replacement ? this.left = replacement : this.right === replacement && (this.right = replacement))
                            }
                        }, {
                            key: "isRoot",
                            get: function() {
                                return null === this.parent
                            }
                        }, {
                            key: "isLeaf",
                            get: function() {
                                return null === this.left && null === this.right
                            }
                        }, {
                            key: "isLeftChild",
                            get: function() {
                                return this.parent.left === this
                            }
                        }]), Node
                    }(),
                    TreeMap = function() {
                        function TreeMap(less, equal) {
                            (0, _classCallCheck3.default)(this, TreeMap), this.isLessThan = less || function(x, y) {
                                return x < y
                            }, this.isEqual = equal || function(x, y) {
                                return x === y
                            }, this.root = null, this.count = null
                        }
                        return (0, _createClass3.default)(TreeMap, [{
                            key: "clear",
                            value: function() {
                                this.root = null, this.count = 0
                            }
                        }, {
                            key: "set",
                            value: function(key, value) {
                                var node = this.getNode(key);
                                node ? node.update(value) : this.insert(key, value)
                            }
                        }, {
                            key: "insert",
                            value: function(key, value) {
                                var node = new Node(key, value);
                                if (this.count++, this.root) {
                                    for (var currNode = this.root;;)
                                        if (this.isLessThan(key, currNode.key)) {
                                            if (!currNode.left) {
                                                currNode.left = node;
                                                break
                                            }
                                            currNode = currNode.left
                                        } else {
                                            if (!currNode.right) {
                                                currNode.right = node;
                                                break
                                            }
                                            currNode = currNode.right
                                        } for (node.parent = currNode, currNode = node; currNode.parent;) {
                                        var parent = currNode.parent,
                                            prevBalanceFactor = parent.balanceFactor;
                                        if (currNode.isLeftChild ? parent.balanceFactor++ : parent.balanceFactor--, Math.abs(parent.balanceFactor) < Math.abs(prevBalanceFactor)) break;
                                        if (parent.balanceFactor < -1 || 1 < parent.balanceFactor) {
                                            this.rebalance(parent);
                                            break
                                        }
                                        currNode = parent
                                    }
                                } else this.root = node
                            }
                        }, {
                            key: "get",
                            value: function(key) {
                                for (var currentNode = this.root; currentNode;) {
                                    if (this.isEqual(key, currentNode.key)) return currentNode.value;
                                    currentNode = this.isLessThan(key, currentNode.key) ? currentNode.left : currentNode.right
                                }
                                return null
                            }
                        }, {
                            key: "delete",
                            value: function(key) {
                                var node = this.getNode(key);
                                if (!node || node.key !== key) return null;
                                var parent = node.parent,
                                    left = node.left,
                                    right = node.right;
                                if (!!left != !!right) {
                                    var child = left || right;
                                    parent || child ? parent && !child ? this.root = child : (parent.replace(node, null), this.rebalance(parent)) : this.root = null
                                } else {
                                    for (var maxLeft = node.left; maxLeft.right;) maxLeft = maxLeft.right;
                                    if (node.left === maxLeft) node.isRoot ? (this.root = maxLeft).parent = null : (node.isLeftChild ? node.parent.left = maxLeft : node.parent.right = maxLeft, maxLeft.parent = node.parent), maxLeft.right = node.right, (maxLeft.right.parent = maxLeft).balanceFactor = node.balanceFactor, node = {
                                        parent: maxLeft,
                                        isLeftChild: !0
                                    };
                                    else {
                                        var mlParent = maxLeft.parent,
                                            mlLeft = maxLeft.left;
                                        (mlParent.right = mlLeft) && (mlLeft.parent = mlParent), node.isRoot ? (this.root = maxLeft).parent = null : (node.isLeftChild ? node.parent.left = maxLeft : node.parent.right = maxLeft, maxLeft.parent = node.parent), maxLeft.right = node.right, (maxLeft.right.parent = maxLeft).left = node.left, (maxLeft.left.parent = maxLeft).balanceFactor = node.balanceFactor, node = {
                                            parent: mlParent,
                                            isLeftChild: !1
                                        }
                                    }
                                }
                                for (this.count--; node.parent;) {
                                    var _parent = node.parent,
                                        prevBalanceFactor = _parent.balanceFactor;
                                    if (node.isLeftChild ? _parent.balanceFactor -= 1 : _parent.balanceFactor += 1, Math.abs(_parent.balanceFactor) > Math.abs(prevBalanceFactor)) {
                                        if (!(_parent.balanceFactor < -1 || 1 < _parent.balanceFactor)) break;
                                        if (this.rebalance(_parent), 0 !== _parent.parent.balanceFactor) break;
                                        node = _parent.parent
                                    } else node = _parent
                                }
                                return null
                            }
                        }, {
                            key: "getNode",
                            value: function(key) {
                                for (var currentNode = this.root; currentNode;) {
                                    if (this.isEqual(key, currentNode.key)) return currentNode;
                                    currentNode = this.isLessThan(key, currentNode.key) ? currentNode.left : currentNode.right
                                }
                                return null
                            }
                        }, {
                            key: "rebalance",
                            value: function(node) {
                                node.balanceFactor < 0 ? (0 < node.right.balanceFactor && this.rotateRight(node.right), this.rotateLeft(node)) : 0 < node.balanceFactor && (node.left.balanceFactor < 0 && this.rotateLeft(node.left), this.rotateRight(node))
                            }
                        }, {
                            key: "rotateLeft",
                            value: function(pivot) {
                                var root = pivot.right;
                                pivot.right = root.left, null !== root.left && (root.left.parent = pivot), root.parent = pivot.parent, null === root.parent ? this.root = root : pivot.isLeftChild ? root.parent.left = root : root.parent.right = root, (root.left = pivot).parent = root, pivot.balanceFactor = pivot.balanceFactor + 1 - Math.min(root.balanceFactor, 0), root.balanceFactor = root.balanceFactor + 1 - Math.max(pivot.balanceFactor, 0)
                            }
                        }, {
                            key: "rotateRight",
                            value: function(pivot) {
                                var root = pivot.left;
                                pivot.left = root.right, null !== root.right && (root.right.parent = pivot), root.parent = pivot.parent, null === root.parent ? this.root = root : pivot.isLeftChild ? root.parent.left = root : root.parent.right = root, (root.right = pivot).parent = root, pivot.balanceFactor = pivot.balanceFactor - 1 - Math.min(root.balanceFactor, 0), root.balanceFactor = root.balanceFactor - 1 - Math.max(pivot.balanceFactor, 0)
                            }
                        }, {
                            key: _iterator3.default,
                            value: _regenerator2.default.mark(function value() {
                                var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, iter;
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            _didIteratorError = !(_iteratorNormalCompletion = !0), _iteratorError = void 0, _context.prev = 3, _iterator = (0, _getIterator3.default)(this.getIterator());
                                        case 5:
                                            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                                                _context.next = 12;
                                                break
                                            }
                                            return iter = _step.value, _context.next = 9, iter;
                                        case 9:
                                            _iteratorNormalCompletion = !0, _context.next = 5;
                                            break;
                                        case 12:
                                            _context.next = 18;
                                            break;
                                        case 14:
                                            _context.prev = 14, _context.t0 = _context.catch(3), _didIteratorError = !0, _iteratorError = _context.t0;
                                        case 18:
                                            _context.prev = 18, _context.prev = 19, !_iteratorNormalCompletion && _iterator.return && _iterator.return();
                                        case 21:
                                            if (_context.prev = 21, _didIteratorError) throw _iteratorError;
                                            _context.next = 24;
                                            break;
                                        case 24:
                                            return _context.finish(21);
                                        case 25:
                                            return _context.finish(18);
                                        case 26:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, value, this, [
                                    [3, 14, 18, 26],
                                    [19, , 21, 25]
                                ])
                            })
                        }, {
                            key: "getIterator",
                            value: _regenerator2.default.mark(function getIterator() {
                                var currentNode, fromleft, key = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : null;
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            currentNode = this.root;
                                        case 1:
                                            if (!currentNode) {
                                                _context2.next = 7;
                                                break
                                            }
                                            if (this.isEqual(key, currentNode.key) || null === key && !currentNode.left) return _context2.abrupt("break", 7);
                                            _context2.next = 4;
                                            break;
                                        case 4:
                                            currentNode = this.isLessThan(key, currentNode.key) || null === key ? currentNode.left : currentNode.right, _context2.next = 1;
                                            break;
                                        case 7:
                                            if (currentNode) {
                                                _context2.next = 9;
                                                break
                                            }
                                            return _context2.abrupt("return", null);
                                        case 9:
                                            fromleft = !0;
                                        case 10:
                                            if (fromleft) return _context2.next = 13, [currentNode.key, currentNode.value];
                                            _context2.next = 28;
                                            break;
                                        case 13:
                                            if (fromleft = !1, !currentNode.right) {
                                                _context2.next = 20;
                                                break
                                            }
                                            for (currentNode = currentNode.right; currentNode.left;) currentNode = currentNode.left;
                                            fromleft = !0, _context2.next = 26;
                                            break;
                                        case 20:
                                            if (!currentNode.parent) {
                                                _context2.next = 25;
                                                break
                                            }
                                            fromleft = currentNode.parent.left === currentNode, currentNode = currentNode.parent, _context2.next = 26;
                                            break;
                                        case 25:
                                            return _context2.abrupt("break", 36);
                                        case 26:
                                            _context2.next = 34;
                                            break;
                                        case 28:
                                            if (!currentNode.parent) {
                                                _context2.next = 33;
                                                break
                                            }
                                            fromleft = currentNode.parent.left === currentNode, currentNode = currentNode.parent, _context2.next = 34;
                                            break;
                                        case 33:
                                            return _context2.abrupt("break", 36);
                                        case 34:
                                            _context2.next = 10;
                                            break;
                                        case 36:
                                            return _context2.abrupt("return", null);
                                        case 37:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, getIterator, this)
                            })
                        }, {
                            key: "getReverseIterator",
                            value: _regenerator2.default.mark(function getReverseIterator() {
                                var currentNode, fromright, key = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : null;
                                return _regenerator2.default.wrap(function(_context3) {
                                    for (;;) switch (_context3.prev = _context3.next) {
                                        case 0:
                                            currentNode = this.root;
                                        case 1:
                                            if (!currentNode) {
                                                _context3.next = 7;
                                                break
                                            }
                                            if (this.isEqual(key, currentNode.key) || null === key && !currentNode.right) return _context3.abrupt("break", 7);
                                            _context3.next = 4;
                                            break;
                                        case 4:
                                            currentNode = this.isLessThan(key, currentNode.key) && null !== key ? currentNode.left : currentNode.right, _context3.next = 1;
                                            break;
                                        case 7:
                                            if (currentNode) {
                                                _context3.next = 9;
                                                break
                                            }
                                            return _context3.abrupt("return", null);
                                        case 9:
                                            fromright = !0;
                                        case 10:
                                            if (fromright) return _context3.next = 13, [currentNode.key, currentNode.value];
                                            _context3.next = 28;
                                            break;
                                        case 13:
                                            if (fromright = !1, !currentNode.left) {
                                                _context3.next = 20;
                                                break
                                            }
                                            for (currentNode = currentNode.left; currentNode.right;) currentNode = currentNode.right;
                                            fromright = !0, _context3.next = 26;
                                            break;
                                        case 20:
                                            if (!currentNode.parent) {
                                                _context3.next = 25;
                                                break
                                            }
                                            fromright = currentNode.parent.right === currentNode, currentNode = currentNode.parent, _context3.next = 26;
                                            break;
                                        case 25:
                                            return _context3.abrupt("break", 36);
                                        case 26:
                                            _context3.next = 34;
                                            break;
                                        case 28:
                                            if (!currentNode.parent) {
                                                _context3.next = 33;
                                                break
                                            }
                                            fromright = currentNode.parent.right === currentNode, currentNode = currentNode.parent, _context3.next = 34;
                                            break;
                                        case 33:
                                            return _context3.abrupt("break", 36);
                                        case 34:
                                            _context3.next = 10;
                                            break;
                                        case 36:
                                            return _context3.abrupt("return", null);
                                        case 37:
                                        case "end":
                                            return _context3.stop()
                                    }
                                }, getReverseIterator, this)
                            })
                        }, {
                            key: "size",
                            get: function() {
                                return this.count
                            }
                        }]), TreeMap
                    }();
                exports.TreeMap = TreeMap
            }, {
                "babel-runtime/core-js/get-iterator": 32,
                "babel-runtime/core-js/symbol/iterator": 49,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            219: [function(_dereq_, module, exports) {
                ! function(root, definition) {
                    "use strict";
                    "function" == typeof define && define.amd ? define(definition) : "object" === _typeof4(module) && module.exports ? module.exports = definition() : root.log = definition()
                }(this, function() {
                    "use strict";
                    var noop = function() {},
                        undefinedType = "undefined",
                        logMethods = ["trace", "debug", "info", "warn", "error"];

                    function bindMethod(obj, methodName) {
                        var method = obj[methodName];
                        if ("function" == typeof method.bind) return method.bind(obj);
                        try {
                            return Function.prototype.bind.call(method, obj)
                        } catch (e) {
                            return function() {
                                return Function.prototype.apply.apply(method, [obj, arguments])
                            }
                        }
                    }

                    function replaceLoggingMethods(level, loggerName) {
                        for (var i = 0; i < logMethods.length; i++) {
                            var methodName = logMethods[i];
                            this[methodName] = i < level ? noop : this.methodFactory(methodName, level, loggerName)
                        }
                        this.log = this.debug
                    }

                    function defaultMethodFactory(methodName, level, loggerName) {
                        return function(methodName) {
                            return "debug" === methodName && (methodName = "log"), ("undefined" == typeof console ? "undefined" : _typeof4(console)) !== undefinedType && (void 0 !== console[methodName] ? bindMethod(console, methodName) : void 0 !== console.log ? bindMethod(console, "log") : noop)
                        }(methodName) || function(methodName, level, loggerName) {
                            return function() {
                                ("undefined" == typeof console ? "undefined" : _typeof4(console)) !== undefinedType && (replaceLoggingMethods.call(this, level, loggerName), this[methodName].apply(this, arguments))
                            }
                        }.apply(this, arguments)
                    }

                    function Logger(name, defaultLevel, factory) {
                        var currentLevel, self = this,
                            storageKey = "loglevel";

                        function getPersistedLevel() {
                            var storedLevel;
                            if (("undefined" == typeof window ? "undefined" : _typeof4(window)) !== undefinedType) {
                                try {
                                    storedLevel = window.localStorage[storageKey]
                                } catch (ignore) {}
                                if (_typeof4(storedLevel) === undefinedType) try {
                                    var cookie = window.document.cookie,
                                        location = cookie.indexOf(encodeURIComponent(storageKey) + "="); - 1 !== location && (storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1])
                                } catch (ignore) {}
                                return void 0 === self.levels[storedLevel] && (storedLevel = void 0), storedLevel
                            }
                        }
                        name && (storageKey += ":" + name), self.levels = {
                            TRACE: 0,
                            DEBUG: 1,
                            INFO: 2,
                            WARN: 3,
                            ERROR: 4,
                            SILENT: 5
                        }, self.methodFactory = factory || defaultMethodFactory, self.getLevel = function() {
                            return currentLevel
                        }, self.setLevel = function(level, persist) {
                            if ("string" == typeof level && void 0 !== self.levels[level.toUpperCase()] && (level = self.levels[level.toUpperCase()]), !("number" == typeof level && 0 <= level && level <= self.levels.SILENT)) throw "log.setLevel() called with invalid level: " + level;
                            if (currentLevel = level, !1 !== persist && function(levelNum) {
                                    var levelName = (logMethods[levelNum] || "silent").toUpperCase();
                                    if (("undefined" == typeof window ? "undefined" : _typeof4(window)) !== undefinedType) {
                                        try {
                                            return window.localStorage[storageKey] = levelName
                                        } catch (ignore) {}
                                        try {
                                            window.document.cookie = encodeURIComponent(storageKey) + "=" + levelName + ";"
                                        } catch (ignore) {}
                                    }
                                }(level), replaceLoggingMethods.call(self, level, name), ("undefined" == typeof console ? "undefined" : _typeof4(console)) === undefinedType && level < self.levels.SILENT) return "No console available for logging"
                        }, self.setDefaultLevel = function(level) {
                            getPersistedLevel() || self.setLevel(level, !1)
                        }, self.enableAll = function(persist) {
                            self.setLevel(self.levels.TRACE, persist)
                        }, self.disableAll = function(persist) {
                            self.setLevel(self.levels.SILENT, persist)
                        };
                        var initialLevel = getPersistedLevel();
                        null == initialLevel && (initialLevel = null == defaultLevel ? "WARN" : defaultLevel), self.setLevel(initialLevel, !1)
                    }
                    var defaultLogger = new Logger,
                        _loggersByName = {};
                    defaultLogger.getLogger = function(name) {
                        if ("string" != typeof name || "" === name) throw new TypeError("You must supply a name when creating a logger.");
                        var logger = _loggersByName[name];
                        return logger || (logger = _loggersByName[name] = new Logger(name, defaultLogger.getLevel(), defaultLogger.methodFactory)), logger
                    };
                    var _log = ("undefined" == typeof window ? "undefined" : _typeof4(window)) !== undefinedType ? window.log : void 0;
                    return defaultLogger.noConflict = function() {
                        return ("undefined" == typeof window ? "undefined" : _typeof4(window)) !== undefinedType && window.log === defaultLogger && (window.log = _log), defaultLogger
                    }, defaultLogger
                })
            }, {}],
            220: [function(_dereq_, module, exports) {
                "use strict";
                var extendStatics, __extends = this && this.__extends || (extendStatics = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(d, b) {
                        d.__proto__ = b
                    } || function(d, b) {
                        for (var p in b) b.hasOwnProperty(p) && (d[p] = b[p])
                    },
                    function(d, b) {
                        function __() {
                            this.constructor = d
                        }
                        extendStatics(d, b), d.prototype = null === b ? Object.create(b) : (__.prototype = b.prototype, new __)
                    });
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Retrier = function(_super) {
                    function Retrier(options) {
                        var _this = _super.call(this) || this;
                        return _this.minDelay = options.min, _this.maxDelay = options.max, _this.initialDelay = options.initial || 0, _this.maxAttemptsCount = options.maxAttemptsCount || 0, _this.maxAttemptsTime = options.maxAttemptsTime || 0, _this.randomness = options.randomness || 0, _this.inProgress = !1, _this.attemptNum = 0, _this.prevDelay = 0, _this.currDelay = 0, _this
                    }
                    return __extends(Retrier, _super), Retrier.prototype.attempt = function() {
                        clearTimeout(this.timeout), this.attemptNum++, this.timeout = null, this.emit("attempt", this)
                    }, Retrier.prototype.nextDelay = function(delayOverride) {
                        if ("number" == typeof delayOverride) return this.prevDelay = 0, this.currDelay = delayOverride;
                        if (0 == this.attemptNum) return this.initialDelay;
                        if (1 == this.attemptNum) return this.currDelay = this.minDelay, this.currDelay;
                        var delay = this.currDelay + this.prevDelay;
                        return this.prevDelay = this.currDelay, this.currDelay = delay
                    }, Retrier.prototype.randomize = function(delay) {
                        var area = delay * this.randomness,
                            corr = Math.round(Math.random() * area * 2 - area);
                        return Math.max(0, delay + corr)
                    }, Retrier.prototype.scheduleAttempt = function(delayOverride) {
                        var _this = this;
                        if (this.maxAttemptsCount && this.attemptNum >= this.maxAttemptsCount) return this.cleanup(), this.emit("failed", new Error("Maximum attempt count limit reached")), void this.reject(new Error("Maximum attempt count reached"));
                        var delay = this.nextDelay(delayOverride);
                        delay = this.randomize(delay), this.maxAttemptsTime && this.startTimestamp + this.maxAttemptsTime < Date.now() + delay && (this.cleanup(), this.emit("failed", new Error("Maximum attempt time limit reached")), this.reject(new Error("Maximum attempt time limit reached"))), this.timeout = setTimeout(function() {
                            return _this.attempt()
                        }, delay)
                    }, Retrier.prototype.cleanup = function() {
                        clearTimeout(this.timeout), this.timeout = null, this.inProgress = !1, this.attemptNum = 0, this.prevDelay = 0, this.currDelay = 0
                    }, Retrier.prototype.start = function() {
                        var _this = this;
                        if (this.inProgress) throw new Error("Retrier is already in progress");
                        return this.inProgress = !0, new Promise(function(resolve, reject) {
                            _this.resolve = resolve, _this.reject = reject, _this.startTimestamp = Date.now(), _this.scheduleAttempt(_this.initialDelay)
                        })
                    }, Retrier.prototype.cancel = function() {
                        this.timeout && (clearTimeout(this.timeout), this.timeout = null, this.inProgress = !1, this.emit("cancelled"), this.reject(new Error("Cancelled")))
                    }, Retrier.prototype.succeeded = function(arg) {
                        this.emit("succeeded", arg), this.resolve(arg)
                    }, Retrier.prototype.failed = function(err, nextAttemptDelayOverride) {
                        if (this.timeout) throw new Error("Retrier attempt is already in progress");
                        this.scheduleAttempt(nextAttemptDelayOverride)
                    }, Retrier.prototype.run = function(handler) {
                        var _this = this;
                        return this.on("attempt", function() {
                            handler().then(function(v) {
                                return _this.succeeded(v)
                            }).catch(function(e) {
                                return _this.failed(e)
                            })
                        }), this.start()
                    }, Retrier
                }(_dereq_("events").EventEmitter);
                exports.Retrier = Retrier, exports.default = Retrier
            }, {
                events: 214
            }],
            221: [function(_dereq_, module, exports) {
                (function(global) {
                    (function() {
                        "use strict";
                        var objectTypes = {
                                function: !0,
                                object: !0
                            },
                            root = objectTypes["undefined" == typeof window ? "undefined" : _typeof4(window)] && window || this,
                            oldRoot = root,
                            freeExports = objectTypes[_typeof4(exports)] && exports,
                            freeModule = objectTypes[_typeof4(module)] && module && !module.nodeType && module,
                            freeGlobal = freeExports && freeModule && "object" == _typeof4(global) && global;
                        !freeGlobal || freeGlobal.global !== freeGlobal && freeGlobal.window !== freeGlobal && freeGlobal.self !== freeGlobal || (root = freeGlobal);
                        var maxSafeInteger = Math.pow(2, 53) - 1,
                            reOpera = /\bOpera/,
                            thisBinding = this,
                            objectProto = Object.prototype,
                            hasOwnProperty = objectProto.hasOwnProperty,
                            toString = objectProto.toString;

                        function capitalize(string) {
                            return (string = String(string)).charAt(0).toUpperCase() + string.slice(1)
                        }

                        function format(string) {
                            return string = trim(string), /^(?:webOS|i(?:OS|P))/.test(string) ? string : capitalize(string)
                        }

                        function forOwn(object, callback) {
                            for (var key in object) hasOwnProperty.call(object, key) && callback(object[key], key, object)
                        }

                        function getClassOf(value) {
                            return null == value ? capitalize(value) : toString.call(value).slice(8, -1)
                        }

                        function isHostType(object, property) {
                            var type = null != object ? _typeof4(object[property]) : "number";
                            return !(/^(?:boolean|number|string|undefined)$/.test(type) || "object" == type && !object[property])
                        }

                        function qualify(string) {
                            return String(string).replace(/([ -])(?!$)/g, "$1?")
                        }

                        function reduce(array, callback) {
                            var accumulator = null;
                            return function(object, callback) {
                                var index = -1,
                                    length = object ? object.length : 0;
                                if ("number" == typeof length && -1 < length && length <= maxSafeInteger)
                                    for (; ++index < length;) callback(object[index], index, object);
                                else forOwn(object, callback)
                            }(array, function(value, index) {
                                accumulator = callback(accumulator, value, index, array)
                            }), accumulator
                        }

                        function trim(string) {
                            return String(string).replace(/^ +| +$/g, "")
                        }
                        var platform = function parse(ua) {
                            var context = root,
                                isCustomContext = ua && "object" == _typeof4(ua) && "String" != getClassOf(ua);
                            isCustomContext && (context = ua, ua = null);
                            var nav = context.navigator || {},
                                userAgent = nav.userAgent || "";
                            ua || (ua = userAgent);
                            var data, isSpecialCasedOS, isModuleScope = isCustomContext || thisBinding == oldRoot,
                                likeChrome = isCustomContext ? !!nav.likeChrome : /\bChrome\b/.test(ua) && !/internal|\n/i.test(toString.toString()),
                                airRuntimeClass = isCustomContext ? "Object" : "ScriptBridgingProxyObject",
                                enviroClass = isCustomContext ? "Object" : "Environment",
                                javaClass = isCustomContext && context.java ? "JavaPackage" : getClassOf(context.java),
                                phantomClass = isCustomContext ? "Object" : "RuntimeObject",
                                java = /\bJava/.test(javaClass) && context.java,
                                rhino = java && getClassOf(context.environment) == enviroClass,
                                alpha = java ? "a" : "α",
                                beta = java ? "b" : "β",
                                doc = context.document || {},
                                opera = context.operamini || context.opera,
                                operaClass = reOpera.test(operaClass = isCustomContext && opera ? opera["[[Class]]"] : getClassOf(opera)) ? operaClass : opera = null,
                                arch = ua,
                                description = [],
                                prerelease = null,
                                useFeatures = ua == userAgent,
                                version = useFeatures && opera && "function" == typeof opera.version && opera.version(),
                                layout = reduce([{
                                    label: "EdgeHTML",
                                    pattern: "Edge"
                                }, "Trident", {
                                    label: "WebKit",
                                    pattern: "AppleWebKit"
                                }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"], function(result, guess) {
                                    return result || RegExp("\\b" + (guess.pattern || qualify(guess)) + "\\b", "i").exec(ua) && (guess.label || guess)
                                }),
                                name = function(guesses) {
                                    return reduce(guesses, function(result, guess) {
                                        return result || RegExp("\\b" + (guess.pattern || qualify(guess)) + "\\b", "i").exec(ua) && (guess.label || guess)
                                    })
                                }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", {
                                    label: "Microsoft Edge",
                                    pattern: "Edge"
                                }, "Midori", "Nook Browser", "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", {
                                    label: "Samsung Internet",
                                    pattern: "SamsungBrowser"
                                }, "SeaMonkey", {
                                    label: "Silk",
                                    pattern: "(?:Cloud9|Silk-Accelerated)"
                                }, "Sleipnir", "SlimBrowser", {
                                    label: "SRWare Iron",
                                    pattern: "Iron"
                                }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", {
                                    label: "Opera Mini",
                                    pattern: "OPiOS"
                                }, "Opera", {
                                    label: "Opera",
                                    pattern: "OPR"
                                }, "Chrome", {
                                    label: "Chrome Mobile",
                                    pattern: "(?:CriOS|CrMo)"
                                }, {
                                    label: "Firefox",
                                    pattern: "(?:Firefox|Minefield)"
                                }, {
                                    label: "Firefox for iOS",
                                    pattern: "FxiOS"
                                }, {
                                    label: "IE",
                                    pattern: "IEMobile"
                                }, {
                                    label: "IE",
                                    pattern: "MSIE"
                                }, "Safari"]),
                                product = getProduct([{
                                    label: "BlackBerry",
                                    pattern: "BB10"
                                }, "BlackBerry", {
                                    label: "Galaxy S",
                                    pattern: "GT-I9000"
                                }, {
                                    label: "Galaxy S2",
                                    pattern: "GT-I9100"
                                }, {
                                    label: "Galaxy S3",
                                    pattern: "GT-I9300"
                                }, {
                                    label: "Galaxy S4",
                                    pattern: "GT-I9500"
                                }, {
                                    label: "Galaxy S5",
                                    pattern: "SM-G900"
                                }, {
                                    label: "Galaxy S6",
                                    pattern: "SM-G920"
                                }, {
                                    label: "Galaxy S6 Edge",
                                    pattern: "SM-G925"
                                }, {
                                    label: "Galaxy S7",
                                    pattern: "SM-G930"
                                }, {
                                    label: "Galaxy S7 Edge",
                                    pattern: "SM-G935"
                                }, "Google TV", "Lumia", "iPad", "iPod", "iPhone", "Kindle", {
                                    label: "Kindle Fire",
                                    pattern: "(?:Cloud9|Silk-Accelerated)"
                                }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", {
                                    label: "Wii U",
                                    pattern: "WiiU"
                                }, "Wii", "Xbox One", {
                                    label: "Xbox 360",
                                    pattern: "Xbox"
                                }, "Xoom"]),
                                manufacturer = function(guesses) {
                                    return reduce(guesses, function(result, value, key) {
                                        return result || (value[product] || value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)] || RegExp("\\b" + qualify(key) + "(?:\\b|\\w*\\d)", "i").exec(ua)) && key
                                    })
                                }({
                                    Apple: {
                                        iPad: 1,
                                        iPhone: 1,
                                        iPod: 1
                                    },
                                    Archos: {},
                                    Amazon: {
                                        Kindle: 1,
                                        "Kindle Fire": 1
                                    },
                                    Asus: {
                                        Transformer: 1
                                    },
                                    "Barnes & Noble": {
                                        Nook: 1
                                    },
                                    BlackBerry: {
                                        PlayBook: 1
                                    },
                                    Google: {
                                        "Google TV": 1,
                                        Nexus: 1
                                    },
                                    HP: {
                                        TouchPad: 1
                                    },
                                    HTC: {},
                                    LG: {},
                                    Microsoft: {
                                        Xbox: 1,
                                        "Xbox One": 1
                                    },
                                    Motorola: {
                                        Xoom: 1
                                    },
                                    Nintendo: {
                                        "Wii U": 1,
                                        Wii: 1
                                    },
                                    Nokia: {
                                        Lumia: 1
                                    },
                                    Samsung: {
                                        "Galaxy S": 1,
                                        "Galaxy S2": 1,
                                        "Galaxy S3": 1,
                                        "Galaxy S4": 1
                                    },
                                    Sony: {
                                        PlayStation: 1,
                                        "PlayStation Vita": 1
                                    }
                                }),
                                os = function(guesses) {
                                    return reduce(guesses, function(result, guess) {
                                        var pattern = guess.pattern || qualify(guess);
                                        return !result && (result = RegExp("\\b" + pattern + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(ua)) && (result = function(os, pattern, label) {
                                            var data = {
                                                "10.0": "10",
                                                6.4: "10 Technical Preview",
                                                6.3: "8.1",
                                                6.2: "8",
                                                6.1: "Server 2008 R2 / 7",
                                                "6.0": "Server 2008 / Vista",
                                                5.2: "Server 2003 / XP 64-bit",
                                                5.1: "XP",
                                                5.01: "2000 SP1",
                                                "5.0": "2000",
                                                "4.0": "NT",
                                                "4.90": "ME"
                                            };
                                            return pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) && (data = data[/[\d.]+$/.exec(os)]) && (os = "Windows " + data), os = String(os), pattern && label && (os = os.replace(RegExp(pattern, "i"), label)), os = format(os.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/, " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0])
                                        }(result, pattern, guess.label || guess)), result
                                    })
                                }(["Windows Phone", "Android", "CentOS", {
                                    label: "Chrome OS",
                                    pattern: "CrOS"
                                }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X", "Macintosh", "Mac", "Windows 98;", "Windows "]);

                            function getProduct(guesses) {
                                return reduce(guesses, function(result, guess) {
                                    var pattern = guess.pattern || qualify(guess);
                                    return !result && (result = RegExp("\\b" + pattern + " *\\d+[.\\w_]*", "i").exec(ua) || RegExp("\\b" + pattern + " *\\w+-[\\w]*", "i").exec(ua) || RegExp("\\b" + pattern + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(ua)) && ((result = String(guess.label && !RegExp(pattern, "i").test(guess.label) ? guess.label : result).split("/"))[1] && !/[\d.]+/.test(result[0]) && (result[0] += " " + result[1]), guess = guess.label || guess, result = format(result[0].replace(RegExp(pattern, "i"), guess).replace(RegExp("; *(?:" + guess + "[_-])?", "i"), " ").replace(RegExp("(" + guess + ")[-_.]?(\\w)", "i"), "$1 $2"))), result
                                })
                            }
                            if (layout && (layout = [layout]), manufacturer && !product && (product = getProduct([manufacturer])), (data = /\bGoogle TV\b/.exec(product)) && (product = data[0]), /\bSimulator\b/i.test(ua) && (product = (product ? product + " " : "") + "Simulator"), "Opera Mini" == name && /\bOPiOS\b/.test(ua) && description.push("running in Turbo/Uncompressed mode"), "IE" == name && /\blike iPhone OS\b/.test(ua) ? (manufacturer = (data = parse(ua.replace(/like iPhone OS/, ""))).manufacturer, product = data.product) : /^iP/.test(product) ? (name || (name = "Safari"), os = "iOS" + ((data = / OS ([\d_]+)/i.exec(ua)) ? " " + data[1].replace(/_/g, ".") : "")) : "Konqueror" != name || /buntu/i.test(os) ? manufacturer && "Google" != manufacturer && (/Chrome/.test(name) && !/\bMobile Safari\b/i.test(ua) || /\bVita\b/.test(product)) || /\bAndroid\b/.test(os) && /^Chrome/.test(name) && /\bVersion\//i.test(ua) ? (name = "Android Browser", os = /\bAndroid\b/.test(os) ? os : "Android") : "Silk" == name ? (/\bMobi/i.test(ua) || (os = "Android", description.unshift("desktop mode")), /Accelerated *= *true/i.test(ua) && description.unshift("accelerated")) : "PaleMoon" == name && (data = /\bFirefox\/([\d.]+)\b/.exec(ua)) ? description.push("identifying as Firefox " + data[1]) : "Firefox" == name && (data = /\b(Mobile|Tablet|TV)\b/i.exec(ua)) ? (os || (os = "Firefox OS"), product || (product = data[1])) : !name || (data = !/\bMinefield\b/i.test(ua) && /\b(?:Firefox|Safari)\b/.exec(name)) ? (name && !product && /[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data + "/") + 8)) && (name = null), (data = product || manufacturer || os) && (product || manufacturer || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os)) && (name = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os) ? os : data) + " Browser")) : "Electron" == name && (data = (/\bChrome\/([\d.]+)\b/.exec(ua) || 0)[1]) && description.push("Chromium " + data) : os = "Kubuntu", version || (version = reduce(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", qualify(name), "(?:Firefox|Minefield|NetFront)"], function(result, pattern) {
                                    return result || (RegExp(pattern + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(ua) || 0)[1] || null
                                })), (data = ("iCab" == layout && 3 < parseFloat(version) ? "WebKit" : /\bOpera\b/.test(name) && (/\bOPR\b/.test(ua) ? "Blink" : "Presto")) || /\b(?:Midori|Nook|Safari)\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && "WebKit" || !layout && /\bMSIE\b/i.test(ua) && ("Mac OS" == os ? "Tasman" : "Trident") || "WebKit" == layout && /\bPlayStation\b(?! Vita\b)/i.test(name) && "NetFront") && (layout = [data]), "IE" == name && (data = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua) || 0)[1]) ? (name += " Mobile", os = "Windows Phone " + (/\+$/.test(data) ? data : data + ".x"), description.unshift("desktop mode")) : /\bWPDesktop\b/i.test(ua) ? (name = "IE Mobile", os = "Windows Phone 8.x", description.unshift("desktop mode"), version || (version = (/\brv:([\d.]+)/.exec(ua) || 0)[1])) : "IE" != name && "Trident" == layout && (data = /\brv:([\d.]+)/.exec(ua)) && (name && description.push("identifying as " + name + (version ? " " + version : "")), name = "IE", version = data[1]), useFeatures) {
                                if (isHostType(context, "global"))
                                    if (java && (arch = (data = java.lang.System).getProperty("os.arch"), os = os || data.getProperty("os.name") + " " + data.getProperty("os.version")), isModuleScope && isHostType(context, "system") && (data = [context.system])[0]) {
                                        os || (os = data[0].os || null);
                                        try {
                                            data[1] = context.require("ringo/engine").version, version = data[1].join("."), name = "RingoJS"
                                        } catch (e) {
                                            data[0].global.system == context.system && (name = "Narwhal")
                                        }
                                    } else "object" == _typeof4(context.process) && !context.process.browser && (data = context.process) ? "object" == _typeof4(data.versions) ? "string" == typeof data.versions.electron ? (description.push("Node " + data.versions.node), name = "Electron", version = data.versions.electron) : "string" == typeof data.versions.nw && (description.push("Chromium " + version, "Node " + data.versions.node), name = "NW.js", version = data.versions.nw) : (name = "Node.js", arch = data.arch, os = data.platform, version = (version = /[\d.]+/.exec(data.version)) ? version[0] : "unknown") : rhino && (name = "Rhino");
                                else getClassOf(data = context.runtime) == airRuntimeClass ? (name = "Adobe AIR", os = data.flash.system.Capabilities.os) : getClassOf(data = context.phantom) == phantomClass ? (name = "PhantomJS", version = (data = data.version || null) && data.major + "." + data.minor + "." + data.patch) : "number" == typeof doc.documentMode && (data = /\bTrident\/(\d+)/i.exec(ua)) ? (version = [version, doc.documentMode], (data = +data[1] + 4) != version[1] && (description.push("IE " + version[1] + " mode"), layout && (layout[1] = ""), version[1] = data), version = "IE" == name ? String(version[1].toFixed(1)) : version[0]) : "number" == typeof doc.documentMode && /^(?:Chrome|Firefox)\b/.test(name) && (description.push("masking as " + name + " " + version), name = "IE", version = "11.0", layout = ["Trident"], os = "Windows");
                                os = os && format(os)
                            }
                            if (version && (data = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version) || /(?:alpha|beta)(?: ?\d)?/i.exec(ua + ";" + (useFeatures && nav.appMinorVersion)) || /\bMinefield\b/i.test(ua) && "a") && (prerelease = /b/i.test(data) ? "beta" : "alpha", version = version.replace(RegExp(data + "\\+?$"), "") + ("beta" == prerelease ? beta : alpha) + (/\d+\+?/.exec(data) || "")), "Fennec" == name || "Firefox" == name && /\b(?:Android|Firefox OS)\b/.test(os)) name = "Firefox Mobile";
                            else if ("Maxthon" == name && version) version = version.replace(/\.[\d.]+/, ".x");
                            else if (/\bXbox\b/i.test(product)) "Xbox 360" == product && (os = null), "Xbox 360" == product && /\bIEMobile\b/.test(ua) && description.unshift("mobile mode");
                            else if (!/^(?:Chrome|IE|Opera)$/.test(name) && (!name || product || /Browser|Mobi/.test(name)) || "Windows CE" != os && !/Mobi/i.test(ua))
                                if ("IE" == name && useFeatures) try {
                                    null === context.external && description.unshift("platform preview")
                                } catch (e) {
                                    description.unshift("embedded")
                                } else(/\bBlackBerry\b/.test(product) || /\bBB10\b/.test(ua)) && (data = (RegExp(product.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(ua) || 0)[1] || version) ? (os = ((data = [data, /BB10/.test(ua)])[1] ? (product = null, manufacturer = "BlackBerry") : "Device Software") + " " + data[0], version = null) : this != forOwn && "Wii" != product && (useFeatures && opera || /Opera/.test(name) && /\b(?:MSIE|Firefox)\b/i.test(ua) || "Firefox" == name && /\bOS X (?:\d+\.){2,}/.test(os) || "IE" == name && (os && !/^Win/.test(os) && 5.5 < version || /\bWindows XP\b/.test(os) && 8 < version || 8 == version && !/\bTrident\b/.test(ua))) && !reOpera.test(data = parse.call(forOwn, ua.replace(reOpera, "") + ";")) && data.name && (data = "ing as " + data.name + ((data = data.version) ? " " + data : ""), reOpera.test(name) ? (/\bIE\b/.test(data) && "Mac OS" == os && (os = null), data = "identify" + data) : (data = "mask" + data, name = operaClass ? format(operaClass.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(data) && (os = null), useFeatures || (version = null)), layout = ["Presto"], description.push(data));
                                else name += " Mobile";
                            (data = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua) || 0)[1]) && (data = [parseFloat(data.replace(/\.(\d)$/, ".0$1")), data], "Safari" == name && "+" == data[1].slice(-1) ? (name = "WebKit Nightly", prerelease = "alpha", version = data[1].slice(0, -1)) : version != data[1] && version != (data[2] = (/\bSafari\/([\d.]+\+?)/i.exec(ua) || 0)[1]) || (version = null), data[1] = (/\bChrome\/([\d.]+)/i.exec(ua) || 0)[1], 537.36 == data[0] && 537.36 == data[2] && 28 <= parseFloat(data[1]) && "WebKit" == layout && (layout = ["Blink"]), data = useFeatures && (likeChrome || data[1]) ? (layout && (layout[1] = "like Chrome"), data[1] || ((data = data[0]) < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.1 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.3 ? 11 : data < 535.01 ? 12 : data < 535.02 ? "13+" : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.1 ? 19 : data < 537.01 ? 20 : data < 537.11 ? "21+" : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : "Blink" != layout ? "27" : "28")) : (layout && (layout[1] = "like Safari"), (data = data[0]) < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? "4+" : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : "8"), layout && (layout[1] += " " + (data += "number" == typeof data ? ".x" : /[.+]/.test(data) ? "" : "+")), "Safari" == name && (!version || 45 < parseInt(version)) && (version = data)), "Opera" == name && (data = /\bzbov|zvav$/.exec(os)) ? (name += " ", description.unshift("desktop mode"), "zvav" == data ? (name += "Mini", version = null) : name += "Mobile", os = os.replace(RegExp(" *" + data + "$"), "")) : "Safari" == name && /\bChrome\b/.exec(layout && layout[1]) && (description.unshift("desktop mode"), name = "Chrome Mobile", version = null, os = /\bOS X\b/.test(os) ? (manufacturer = "Apple", "iOS 4.3+") : null), version && 0 == version.indexOf(data = /[\d.]+$/.exec(os)) && -1 < ua.indexOf("/" + data + "-") && (os = trim(os.replace(data, ""))), layout && !/\b(?:Avant|Nook)\b/.test(name) && (/Browser|Lunascape|Maxthon/.test(name) || "Safari" != name && /^iOS/.test(os) && /\bSafari\b/.test(layout[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1]) && (data = layout[layout.length - 1]) && description.push(data), description.length && (description = ["(" + description.join("; ") + ")"]), manufacturer && product && product.indexOf(manufacturer) < 0 && description.push("on " + manufacturer), product && description.push((/^on /.test(description[description.length - 1]) ? "" : "on ") + product), os && (data = / ([\d.+]+)$/.exec(os), isSpecialCasedOS = data && "/" == os.charAt(os.length - data[0].length - 1), os = {
                                architecture: 32,
                                family: data && !isSpecialCasedOS ? os.replace(data[0], "") : os,
                                version: data ? data[1] : null,
                                toString: function() {
                                    var version = this.version;
                                    return this.family + (version && !isSpecialCasedOS ? " " + version : "") + (64 == this.architecture ? " 64-bit" : "")
                                }
                            }), (data = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch)) && !/\bi686\b/i.test(arch) ? (os && (os.architecture = 64, os.family = os.family.replace(RegExp(" *" + data), "")), name && (/\bWOW64\b/i.test(ua) || useFeatures && /\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\bWin64; x64\b/i.test(ua)) && description.unshift("32-bit")) : os && /^OS X/.test(os.family) && "Chrome" == name && 39 <= parseFloat(version) && (os.architecture = 64), ua || (ua = null);
                            var platform = {};
                            return platform.description = ua, platform.layout = layout && layout[0], platform.manufacturer = manufacturer, platform.name = name, platform.prerelease = prerelease, platform.product = product, platform.ua = ua, platform.version = name && version, platform.os = os || {
                                architecture: null,
                                family: null,
                                version: null,
                                toString: function() {
                                    return "null"
                                }
                            }, platform.parse = parse, platform.toString = function() {
                                return this.description || ""
                            }, platform.version && description.unshift(version), platform.name && description.unshift(name), os && name && (os != String(os).split(" ")[0] || os != name.split(" ")[0] && !product) && description.push(product ? "(" + os + ")" : "on " + os), description.length && (platform.description = description.join(" ")), platform
                        }();
                        "function" == typeof define && "object" == _typeof4(define.amd) && define.amd ? (root.platform = platform, define(function() {
                            return platform
                        })) : freeExports && freeModule ? forOwn(platform, function(value, key) {
                            freeExports[key] = value
                        }) : root.platform = platform
                    }).call(this)
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {}],
            222: [function(_dereq_, module, exports) {
                module.exports = _dereq_("./lib/checks")
            }, {
                "./lib/checks": 223
            }],
            223: [function(_dereq_, module, exports) {
                var util = _dereq_("util"),
                    errors = module.exports = _dereq_("./errors");

                function failCheck(ExceptionConstructor, callee, messageFormat, formatArgs) {
                    messageFormat = messageFormat || "";
                    var error = new ExceptionConstructor(util.format.apply(this, [messageFormat].concat(formatArgs)));
                    throw Error.captureStackTrace(error, callee), error
                }

                function failArgumentCheck(callee, message, formatArgs) {
                    failCheck(errors.IllegalArgumentError, callee, message, formatArgs)
                }

                function typeOf(value) {
                    var s = _typeof4(value);
                    if ("object" == s) {
                        if (!value) return "null";
                        if (value instanceof Array) return "array"
                    }
                    return s
                }

                function typeCheck(expect) {
                    return function(value, message) {
                        var type = typeOf(value);
                        if (type == expect) return value;
                        failArgumentCheck(arguments.callee, message || 'Expected "' + expect + '" but got "' + type + '".', Array.prototype.slice.call(arguments, 2))
                    }
                }
                module.exports.checkArgument = function(value, message) {
                    value || failArgumentCheck(arguments.callee, message, Array.prototype.slice.call(arguments, 2))
                }, module.exports.checkState = function(value, message) {
                    value || function(callee, message, formatArgs) {
                        failCheck(errors.IllegalStateError, callee, message, formatArgs)
                    }(arguments.callee, message, Array.prototype.slice.call(arguments, 2))
                }, module.exports.checkIsDef = function(value, message) {
                    if (void 0 !== value) return value;
                    failArgumentCheck(arguments.callee, message || "Expected value to be defined but was undefined.", Array.prototype.slice.call(arguments, 2))
                }, module.exports.checkIsDefAndNotNull = function(value, message) {
                    if (null != value) return value;
                    failArgumentCheck(arguments.callee, message || 'Expected value to be defined and not null but got "' + typeOf(value) + '".', Array.prototype.slice.call(arguments, 2))
                }, module.exports.checkIsString = typeCheck("string"), module.exports.checkIsArray = typeCheck("array"), module.exports.checkIsNumber = typeCheck("number"), module.exports.checkIsBoolean = typeCheck("boolean"), module.exports.checkIsFunction = typeCheck("function"), module.exports.checkIsObject = typeCheck("object")
            }, {
                "./errors": 224,
                util: 282
            }],
            224: [function(_dereq_, module, exports) {
                var util = _dereq_("util");

                function IllegalArgumentError(message) {
                    Error.call(this, message), this.message = message
                }

                function IllegalStateError(message) {
                    Error.call(this, message), this.message = message
                }
                util.inherits(IllegalArgumentError, Error), IllegalArgumentError.prototype.name = "IllegalArgumentError", util.inherits(IllegalStateError, Error), IllegalStateError.prototype.name = "IllegalStateError", module.exports.IllegalStateError = IllegalStateError, module.exports.IllegalArgumentError = IllegalArgumentError
            }, {
                util: 282
            }],
            225: [function(_dereq_, module, exports) {
                var cachedSetTimeout, cachedClearTimeout, process = module.exports = {};

                function defaultSetTimout() {
                    throw new Error("setTimeout has not been defined")
                }

                function defaultClearTimeout() {
                    throw new Error("clearTimeout has not been defined")
                }

                function runTimeout(fun) {
                    if (cachedSetTimeout === setTimeout) return setTimeout(fun, 0);
                    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) return cachedSetTimeout = setTimeout, setTimeout(fun, 0);
                    try {
                        return cachedSetTimeout(fun, 0)
                    } catch (e) {
                        try {
                            return cachedSetTimeout.call(null, fun, 0)
                        } catch (e) {
                            return cachedSetTimeout.call(this, fun, 0)
                        }
                    }
                }! function() {
                    try {
                        cachedSetTimeout = "function" == typeof setTimeout ? setTimeout : defaultSetTimout
                    } catch (e) {
                        cachedSetTimeout = defaultSetTimout
                    }
                    try {
                        cachedClearTimeout = "function" == typeof clearTimeout ? clearTimeout : defaultClearTimeout
                    } catch (e) {
                        cachedClearTimeout = defaultClearTimeout
                    }
                }();
                var currentQueue, queue = [],
                    draining = !1,
                    queueIndex = -1;

                function cleanUpNextTick() {
                    draining && currentQueue && (draining = !1, currentQueue.length ? queue = currentQueue.concat(queue) : queueIndex = -1, queue.length && drainQueue())
                }

                function drainQueue() {
                    if (!draining) {
                        var timeout = runTimeout(cleanUpNextTick);
                        draining = !0;
                        for (var len = queue.length; len;) {
                            for (currentQueue = queue, queue = []; ++queueIndex < len;) currentQueue && currentQueue[queueIndex].run();
                            queueIndex = -1, len = queue.length
                        }
                        currentQueue = null, draining = !1,
                            function(marker) {
                                if (cachedClearTimeout === clearTimeout) return clearTimeout(marker);
                                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) return cachedClearTimeout = clearTimeout, clearTimeout(marker);
                                try {
                                    cachedClearTimeout(marker)
                                } catch (e) {
                                    try {
                                        return cachedClearTimeout.call(null, marker)
                                    } catch (e) {
                                        return cachedClearTimeout.call(this, marker)
                                    }
                                }
                            }(timeout)
                    }
                }

                function Item(fun, array) {
                    this.fun = fun, this.array = array
                }

                function noop() {}
                process.nextTick = function(fun) {
                    var args = new Array(arguments.length - 1);
                    if (1 < arguments.length)
                        for (var i = 1; i < arguments.length; i++) args[i - 1] = arguments[i];
                    queue.push(new Item(fun, args)), 1 !== queue.length || draining || runTimeout(drainQueue)
                }, Item.prototype.run = function() {
                    this.fun.apply(null, this.array)
                }, process.title = "browser", process.browser = !0, process.env = {}, process.argv = [], process.version = "", process.versions = {}, process.on = noop, process.addListener = noop, process.once = noop, process.off = noop, process.removeListener = noop, process.removeAllListeners = noop, process.emit = noop, process.prependListener = noop, process.prependOnceListener = noop, process.listeners = function(name) {
                    return []
                }, process.binding = function(name) {
                    throw new Error("process.binding is not supported")
                }, process.cwd = function() {
                    return "/"
                }, process.chdir = function(dir) {
                    throw new Error("process.chdir is not supported")
                }, process.umask = function() {
                    return 0
                }
            }, {}],
            226: [function(_dereq_, module, exports) {
                var g = function() {
                        return this
                    }() || Function("return this")(),
                    hadRuntime = g.regeneratorRuntime && 0 <= Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime"),
                    oldRuntime = hadRuntime && g.regeneratorRuntime;
                if (g.regeneratorRuntime = void 0, module.exports = _dereq_("./runtime"), hadRuntime) g.regeneratorRuntime = oldRuntime;
                else try {
                    delete g.regeneratorRuntime
                } catch (e) {
                    g.regeneratorRuntime = void 0
                }
            }, {
                "./runtime": 227
            }],
            227: [function(_dereq_, module, exports) {
                ! function(global) {
                    "use strict";
                    var undefined, Op = Object.prototype,
                        hasOwn = Op.hasOwnProperty,
                        $Symbol = "function" == typeof Symbol ? Symbol : {},
                        iteratorSymbol = $Symbol.iterator || "@@iterator",
                        asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator",
                        toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag",
                        inModule = "object" === _typeof4(module),
                        runtime = global.regeneratorRuntime;
                    if (runtime) inModule && (module.exports = runtime);
                    else {
                        (runtime = global.regeneratorRuntime = inModule ? module.exports : {}).wrap = wrap;
                        var GenStateSuspendedStart = "suspendedStart",
                            GenStateSuspendedYield = "suspendedYield",
                            GenStateExecuting = "executing",
                            GenStateCompleted = "completed",
                            ContinueSentinel = {},
                            IteratorPrototype = {};
                        IteratorPrototype[iteratorSymbol] = function() {
                            return this
                        };
                        var getProto = Object.getPrototypeOf,
                            NativeIteratorPrototype = getProto && getProto(getProto(values([])));
                        NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);
                        var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);
                        GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype, GeneratorFunctionPrototype.constructor = GeneratorFunction, GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = "GeneratorFunction", runtime.isGeneratorFunction = function(genFun) {
                            var ctor = "function" == typeof genFun && genFun.constructor;
                            return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name))
                        }, runtime.mark = function(genFun) {
                            return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, toStringTagSymbol in genFun || (genFun[toStringTagSymbol] = "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun
                        }, runtime.awrap = function(arg) {
                            return {
                                __await: arg
                            }
                        }, defineIteratorMethods(AsyncIterator.prototype), AsyncIterator.prototype[asyncIteratorSymbol] = function() {
                            return this
                        }, runtime.AsyncIterator = AsyncIterator, runtime.async = function(innerFn, outerFn, self, tryLocsList) {
                            var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));
                            return runtime.isGeneratorFunction(outerFn) ? iter : iter.next().then(function(result) {
                                return result.done ? result.value : iter.next()
                            })
                        }, defineIteratorMethods(Gp), Gp[toStringTagSymbol] = "Generator", Gp[iteratorSymbol] = function() {
                            return this
                        }, Gp.toString = function() {
                            return "[object Generator]"
                        }, runtime.keys = function(object) {
                            var keys = [];
                            for (var key in object) keys.push(key);
                            return keys.reverse(),
                                function next() {
                                    for (; keys.length;) {
                                        var key = keys.pop();
                                        if (key in object) return next.value = key, next.done = !1, next
                                    }
                                    return next.done = !0, next
                                }
                        }, runtime.values = values, Context.prototype = {
                            constructor: Context,
                            reset: function(skipTempReset) {
                                if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset)
                                    for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined)
                            },
                            stop: function() {
                                this.done = !0;
                                var rootRecord = this.tryEntries[0].completion;
                                if ("throw" === rootRecord.type) throw rootRecord.arg;
                                return this.rval
                            },
                            dispatchException: function(exception) {
                                if (this.done) throw exception;
                                var context = this;

                                function handle(loc, caught) {
                                    return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught
                                }
                                for (var i = this.tryEntries.length - 1; 0 <= i; --i) {
                                    var entry = this.tryEntries[i],
                                        record = entry.completion;
                                    if ("root" === entry.tryLoc) return handle("end");
                                    if (entry.tryLoc <= this.prev) {
                                        var hasCatch = hasOwn.call(entry, "catchLoc"),
                                            hasFinally = hasOwn.call(entry, "finallyLoc");
                                        if (hasCatch && hasFinally) {
                                            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);
                                            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc)
                                        } else if (hasCatch) {
                                            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0)
                                        } else {
                                            if (!hasFinally) throw new Error("try statement without catch or finally");
                                            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc)
                                        }
                                    }
                                }
                            },
                            abrupt: function(type, arg) {
                                for (var i = this.tryEntries.length - 1; 0 <= i; --i) {
                                    var entry = this.tryEntries[i];
                                    if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
                                        var finallyEntry = entry;
                                        break
                                    }
                                }
                                finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);
                                var record = finallyEntry ? finallyEntry.completion : {};
                                return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record)
                            },
                            complete: function(record, afterLoc) {
                                if ("throw" === record.type) throw record.arg;
                                return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel
                            },
                            finish: function(finallyLoc) {
                                for (var i = this.tryEntries.length - 1; 0 <= i; --i) {
                                    var entry = this.tryEntries[i];
                                    if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel
                                }
                            },
                            catch: function(tryLoc) {
                                for (var i = this.tryEntries.length - 1; 0 <= i; --i) {
                                    var entry = this.tryEntries[i];
                                    if (entry.tryLoc === tryLoc) {
                                        var record = entry.completion;
                                        if ("throw" === record.type) {
                                            var thrown = record.arg;
                                            resetTryEntry(entry)
                                        }
                                        return thrown
                                    }
                                }
                                throw new Error("illegal catch attempt")
                            },
                            delegateYield: function(iterable, resultName, nextLoc) {
                                return this.delegate = {
                                    iterator: values(iterable),
                                    resultName: resultName,
                                    nextLoc: nextLoc
                                }, "next" === this.method && (this.arg = undefined), ContinueSentinel
                            }
                        }
                    }

                    function wrap(innerFn, outerFn, self, tryLocsList) {
                        var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,
                            generator = Object.create(protoGenerator.prototype),
                            context = new Context(tryLocsList || []);
                        return generator._invoke = function(innerFn, self, context) {
                            var state = GenStateSuspendedStart;
                            return function(method, arg) {
                                if (state === GenStateExecuting) throw new Error("Generator is already running");
                                if (state === GenStateCompleted) {
                                    if ("throw" === method) throw arg;
                                    return doneResult()
                                }
                                for (context.method = method, context.arg = arg;;) {
                                    var delegate = context.delegate;
                                    if (delegate) {
                                        var delegateResult = maybeInvokeDelegate(delegate, context);
                                        if (delegateResult) {
                                            if (delegateResult === ContinueSentinel) continue;
                                            return delegateResult
                                        }
                                    }
                                    if ("next" === context.method) context.sent = context._sent = context.arg;
                                    else if ("throw" === context.method) {
                                        if (state === GenStateSuspendedStart) throw state = GenStateCompleted, context.arg;
                                        context.dispatchException(context.arg)
                                    } else "return" === context.method && context.abrupt("return", context.arg);
                                    state = GenStateExecuting;
                                    var record = tryCatch(innerFn, self, context);
                                    if ("normal" === record.type) {
                                        if (state = context.done ? GenStateCompleted : GenStateSuspendedYield, record.arg === ContinueSentinel) continue;
                                        return {
                                            value: record.arg,
                                            done: context.done
                                        }
                                    }
                                    "throw" === record.type && (state = GenStateCompleted, context.method = "throw", context.arg = record.arg)
                                }
                            }
                        }(innerFn, self, context), generator
                    }

                    function tryCatch(fn, obj, arg) {
                        try {
                            return {
                                type: "normal",
                                arg: fn.call(obj, arg)
                            }
                        } catch (err) {
                            return {
                                type: "throw",
                                arg: err
                            }
                        }
                    }

                    function Generator() {}

                    function GeneratorFunction() {}

                    function GeneratorFunctionPrototype() {}

                    function defineIteratorMethods(prototype) {
                        ["next", "throw", "return"].forEach(function(method) {
                            prototype[method] = function(arg) {
                                return this._invoke(method, arg)
                            }
                        })
                    }

                    function AsyncIterator(generator) {
                        var previousPromise;
                        this._invoke = function(method, arg) {
                            function callInvokeWithMethodAndArg() {
                                return new Promise(function(resolve, reject) {
                                    ! function invoke(method, arg, resolve, reject) {
                                        var record = tryCatch(generator[method], generator, arg);
                                        if ("throw" !== record.type) {
                                            var result = record.arg,
                                                value = result.value;
                                            return value && "object" === _typeof4(value) && hasOwn.call(value, "__await") ? Promise.resolve(value.__await).then(function(value) {
                                                invoke("next", value, resolve, reject)
                                            }, function(err) {
                                                invoke("throw", err, resolve, reject)
                                            }) : Promise.resolve(value).then(function(unwrapped) {
                                                result.value = unwrapped, resolve(result)
                                            }, reject)
                                        }
                                        reject(record.arg)
                                    }(method, arg, resolve, reject)
                                })
                            }
                            return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg()
                        }
                    }

                    function maybeInvokeDelegate(delegate, context) {
                        var method = delegate.iterator[context.method];
                        if (method === undefined) {
                            if (context.delegate = null, "throw" === context.method) {
                                if (delegate.iterator.return && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method)) return ContinueSentinel;
                                context.method = "throw", context.arg = new TypeError("The iterator does not provide a 'throw' method")
                            }
                            return ContinueSentinel
                        }
                        var record = tryCatch(method, delegate.iterator, context.arg);
                        if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel;
                        var info = record.arg;
                        return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel)
                    }

                    function pushTryEntry(locs) {
                        var entry = {
                            tryLoc: locs[0]
                        };
                        1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry)
                    }

                    function resetTryEntry(entry) {
                        var record = entry.completion || {};
                        record.type = "normal", delete record.arg, entry.completion = record
                    }

                    function Context(tryLocsList) {
                        this.tryEntries = [{
                            tryLoc: "root"
                        }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0)
                    }

                    function values(iterable) {
                        if (iterable) {
                            var iteratorMethod = iterable[iteratorSymbol];
                            if (iteratorMethod) return iteratorMethod.call(iterable);
                            if ("function" == typeof iterable.next) return iterable;
                            if (!isNaN(iterable.length)) {
                                var i = -1,
                                    next = function next() {
                                        for (; ++i < iterable.length;)
                                            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;
                                        return next.value = undefined, next.done = !0, next
                                    };
                                return next.next = next
                            }
                        }
                        return {
                            next: doneResult
                        }
                    }

                    function doneResult() {
                        return {
                            value: undefined,
                            done: !0
                        }
                    }
                }(function() {
                    return this
                }() || Function("return this")())
            }, {}],
            228: [function(_dereq_, module, exports) {
                (function(global) {
                    ! function(f) {
                        if ("object" === _typeof4(exports) && void 0 !== module) module.exports = f();
                        else if ("function" == typeof define && define.amd) define([], f);
                        else {
                            ("undefined" != typeof window ? window : void 0 !== global ? global : "undefined" != typeof self ? self : this).rfc6902 = f()
                        }
                    }(function() {
                        return function e(t, n, r) {
                            function s(o, u) {
                                if (!n[o]) {
                                    if (!t[o]) {
                                        var a = "function" == typeof _dereq_ && _dereq_;
                                        if (!u && a) return a(o, !0);
                                        if (i) return i(o, !0);
                                        var f = new Error("Cannot find module '" + o + "'");
                                        throw f.code = "MODULE_NOT_FOUND", f
                                    }
                                    var l = n[o] = {
                                        exports: {}
                                    };
                                    t[o][0].call(l.exports, function(e) {
                                        var n = t[o][1][e];
                                        return s(n || e)
                                    }, l, l.exports, e, t, n, r)
                                }
                                return n[o].exports
                            }
                            for (var i = "function" == typeof _dereq_ && _dereq_, o = 0; o < r.length; o++) s(r[o]);
                            return s
                        }({
                            1: [function(_dereq_, module, exports) {
                                "use strict";
                                var _slicedToArray = function(arr, i) {
                                        if (Array.isArray(arr)) return arr;
                                        if (Symbol.iterator in Object(arr)) {
                                            for (var _step, _arr = [], _iterator = arr[Symbol.iterator](); !(_step = _iterator.next()).done && (_arr.push(_step.value), !i || _arr.length !== i););
                                            return _arr
                                        }
                                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                                    },
                                    _toConsumableArray = function(arr) {
                                        if (Array.isArray(arr)) {
                                            for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
                                            return arr2
                                        }
                                        return Array.from(arr)
                                    };
                                exports.isDestructive = function(_ref) {
                                    var op = _ref.op;
                                    return "remove" === op || "replace" === op || "copy" === op || "move" === op
                                }, exports.subtract = subtract, exports.intersection = intersection, exports.objectType = objectType, exports.diffArrays = diffArrays, exports.diffObjects = diffObjects, exports.diffValues = diffValues, exports.diffAny = diffAny, Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                });
                                var compare = _dereq_("./equal").compare;

                                function subtract(a, b) {
                                    var obj = {};
                                    for (var add_key in a) obj[add_key] = 1;
                                    for (var del_key in b) delete obj[del_key];
                                    return Object.keys(obj)
                                }

                                function intersection(objects) {
                                    var key_counts = {};
                                    objects.forEach(function(object) {
                                        for (var key in object) key_counts[key] = (key_counts[key] || 0) + 1
                                    });
                                    var threshold = objects.length;
                                    for (var key in key_counts) key_counts[key] < threshold && delete key_counts[key];
                                    return Object.keys(key_counts)
                                }

                                function objectType(object) {
                                    return void 0 === object ? "undefined" : null === object ? "null" : Array.isArray(object) ? "array" : _typeof4(object)
                                }

                                function diffArrays(input, output, ptr) {
                                    var memo = {
                                        "0,0": {
                                            operations: [],
                                            cost: 0
                                        }
                                    };
                                    var input_length = isNaN(input.length) || input.length <= 0 ? 0 : input.length,
                                        output_length = isNaN(output.length) || output.length <= 0 ? 0 : output.length,
                                        _array_operations$reduce = function dist(i, j) {
                                            var memoized = memo[i + "," + j];
                                            if (void 0 === memoized) {
                                                if (compare(input[i - 1], output[j - 1])) memoized = dist(i - 1, j - 1);
                                                else {
                                                    var alternatives = [];
                                                    if (0 < i) {
                                                        var remove_alternative = dist(i - 1, j);
                                                        alternatives.push({
                                                            operations: remove_alternative.operations.concat({
                                                                op: "remove",
                                                                index: i - 1
                                                            }),
                                                            cost: remove_alternative.cost + 1
                                                        })
                                                    }
                                                    if (0 < j) {
                                                        var add_alternative = dist(i, j - 1);
                                                        alternatives.push({
                                                            operations: add_alternative.operations.concat({
                                                                op: "add",
                                                                index: i - 1,
                                                                value: output[j - 1]
                                                            }),
                                                            cost: add_alternative.cost + 1
                                                        })
                                                    }
                                                    if (0 < i && 0 < j) {
                                                        var replace_alternative = dist(i - 1, j - 1);
                                                        alternatives.push({
                                                            operations: replace_alternative.operations.concat({
                                                                op: "replace",
                                                                index: i - 1,
                                                                original: input[i - 1],
                                                                value: output[j - 1]
                                                            }),
                                                            cost: replace_alternative.cost + 1
                                                        })
                                                    }
                                                    memoized = alternatives.sort(function(a, b) {
                                                        return a.cost - b.cost
                                                    })[0]
                                                }
                                                memo[i + "," + j] = memoized
                                            }
                                            return memoized
                                        }(input_length, output_length).operations.reduce(function(_ref, array_operation) {
                                            var _ref2 = _slicedToArray(_ref, 2),
                                                operations = _ref2[0],
                                                padding = _ref2[1];
                                            if (function(array_operation) {
                                                    return "add" === array_operation.op
                                                }(array_operation)) {
                                                var padded_index = array_operation.index + 1 + padding,
                                                    index_token = padded_index < input_length + padding ? String(padded_index) : "-",
                                                    operation = {
                                                        op: array_operation.op,
                                                        path: ptr.add(index_token).toString(),
                                                        value: array_operation.value
                                                    };
                                                return [operations.concat(operation), padding + 1]
                                            }
                                            if (function(array_operation) {
                                                    return "remove" === array_operation.op
                                                }(array_operation)) {
                                                operation = {
                                                    op: array_operation.op,
                                                    path: ptr.add(String(array_operation.index + padding)).toString()
                                                };
                                                return [operations.concat(operation), padding - 1]
                                            }
                                            var replace_ptr = ptr.add(String(array_operation.index + padding)),
                                                replace_operations = diffAny(array_operation.original, array_operation.value, replace_ptr);
                                            return [operations.concat.apply(operations, _toConsumableArray(replace_operations)), padding]
                                        }, [
                                            [], 0
                                        ]),
                                        _array_operations$reduce2 = _slicedToArray(_array_operations$reduce, 2),
                                        operations = _array_operations$reduce2[0];
                                    _array_operations$reduce2[1];
                                    return operations
                                }

                                function diffObjects(input, output, ptr) {
                                    var operations = [];
                                    return subtract(input, output).forEach(function(key) {
                                        operations.push({
                                            op: "remove",
                                            path: ptr.add(key).toString()
                                        })
                                    }), subtract(output, input).forEach(function(key) {
                                        operations.push({
                                            op: "add",
                                            path: ptr.add(key).toString(),
                                            value: output[key]
                                        })
                                    }), intersection([input, output]).forEach(function(key) {
                                        operations.push.apply(operations, _toConsumableArray(diffAny(input[key], output[key], ptr.add(key))))
                                    }), operations
                                }

                                function diffValues(input, output, ptr) {
                                    return compare(input, output) ? [] : [{
                                        op: "replace",
                                        path: ptr.toString(),
                                        value: output
                                    }]
                                }

                                function diffAny(input, output, ptr) {
                                    var input_type = objectType(input),
                                        output_type = objectType(output);
                                    return "array" == input_type && "array" == output_type ? diffArrays(input, output, ptr) : "object" == input_type && "object" == output_type ? diffObjects(input, output, ptr) : diffValues(input, output, ptr)
                                }
                            }, {
                                "./equal": 2
                            }],
                            2: [function(_dereq_, module, exports) {
                                "use strict";

                                function compareArrays(left, right) {
                                    return left.length === right.length && function(a, b) {
                                        for (var zipped = [], i = 0, l = a.length; i < l; i++) zipped.push([a[i], b[i]]);
                                        return zipped
                                    }(left, right).every(function(pair) {
                                        return compare(pair[0], pair[1])
                                    })
                                }

                                function compare(left, right) {
                                    return left === right || (Array.isArray(left) && Array.isArray(right) ? compareArrays(left, right) : Object(left) === left && Object(right) === right && function(left, right) {
                                        var left_keys = Object.keys(left);
                                        return !!compareArrays(left_keys, Object.keys(right)) && left_keys.every(function(key) {
                                            return compare(left[key], right[key])
                                        })
                                    }(left, right))
                                }
                                exports.compare = compare, Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                })
                            }, {}],
                            3: [function(_dereq_, module, exports) {
                                "use strict";
                                var _get = function get(object, property, receiver) {
                                        var desc = Object.getOwnPropertyDescriptor(object, property);
                                        if (void 0 === desc) {
                                            var parent = Object.getPrototypeOf(object);
                                            return null === parent ? void 0 : get(parent, property, receiver)
                                        }
                                        if ("value" in desc && desc.writable) return desc.value;
                                        var getter = desc.get;
                                        return void 0 !== getter ? getter.call(receiver) : void 0
                                    },
                                    _inherits = function(subClass, superClass) {
                                        if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function, not " + _typeof4(superClass));
                                        subClass.prototype = Object.create(superClass && superClass.prototype, {
                                            constructor: {
                                                value: subClass,
                                                enumerable: !1,
                                                writable: !0,
                                                configurable: !0
                                            }
                                        }), superClass && (subClass.__proto__ = superClass)
                                    },
                                    _classCallCheck = function(instance, Constructor) {
                                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                                    };
                                Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                });
                                exports.MissingError = function(_Error) {
                                    function MissingError(path) {
                                        _classCallCheck(this, MissingError), _get(Object.getPrototypeOf(MissingError.prototype), "constructor", this).call(this, "Value required at path: " + path), this.path = path, this.name = this.constructor.name
                                    }
                                    return _inherits(MissingError, _Error), MissingError
                                }(Error), exports.InvalidOperationError = function(_Error2) {
                                    function InvalidOperationError(op) {
                                        _classCallCheck(this, InvalidOperationError), _get(Object.getPrototypeOf(InvalidOperationError.prototype), "constructor", this).call(this, "Invalid operation: " + op), this.op = op, this.name = this.constructor.name
                                    }
                                    return _inherits(InvalidOperationError, _Error2), InvalidOperationError
                                }(Error), exports.TestError = function(_Error3) {
                                    function TestError(actual, expected) {
                                        _classCallCheck(this, TestError), _get(Object.getPrototypeOf(TestError.prototype), "constructor", this).call(this, "Test failed: " + actual + " != " + expected), this.actual = actual, this.expected = expected, this.name = this.constructor.name, this.actual = actual, this.expected = expected
                                    }
                                    return _inherits(TestError, _Error3), TestError
                                }(Error)
                            }, {}],
                            4: [function(_dereq_, module, exports) {
                                "use strict";
                                exports.applyPatch = function(object, patch) {
                                    return patch.map(function(operation) {
                                        var operationFunction = operationFunctions[operation.op];
                                        return void 0 === operationFunction ? new InvalidOperationError(operation.op) : operationFunction(object, operation)
                                    })
                                }, exports.createPatch = function(input, output) {
                                    var ptr = new Pointer;
                                    return diffAny(input, output, ptr)
                                }, exports.createTests = function(input, patch) {
                                    var tests = new Array;
                                    return patch.filter(isDestructive).forEach(function(operation) {
                                        var pathTest = createTest(input, operation.path);
                                        if (pathTest && tests.push(pathTest), "from" in operation) {
                                            var fromTest = createTest(input, operation.from);
                                            fromTest && tests.push(fromTest)
                                        }
                                    }), tests
                                }, Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                });
                                var obj, InvalidOperationError = _dereq_("./errors").InvalidOperationError,
                                    Pointer = _dereq_("./pointer").Pointer,
                                    operationFunctions = (obj = _dereq_("./patch")) && obj.__esModule ? obj : {
                                        default: obj
                                    },
                                    _diff = _dereq_("./diff"),
                                    diffAny = _diff.diffAny,
                                    isDestructive = _diff.isDestructive;

                                function createTest(input, path) {
                                    var endpoint = Pointer.fromJSON(path).evaluate(input);
                                    if (void 0 !== endpoint) return {
                                        op: "test",
                                        path: path,
                                        value: endpoint.value
                                    }
                                }
                            }, {
                                "./diff": 1,
                                "./errors": 3,
                                "./patch": 5,
                                "./pointer": 6
                            }],
                            5: [function(_dereq_, module, exports) {
                                "use strict";
                                exports.add = function(object, operation) {
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return void 0 !== endpoint.parent ? (_add(endpoint.parent, endpoint.key, operation.value), null) : new MissingError(operation.path)
                                }, exports.remove = function(object, operation) {
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return void 0 !== endpoint.value ? (_remove(endpoint.parent, endpoint.key), null) : new MissingError(operation.path)
                                }, exports.replace = function(object, operation) {
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return void 0 !== endpoint.value ? (endpoint.parent[endpoint.key] = operation.value, null) : new MissingError(operation.path)
                                }, exports.move = function(object, operation) {
                                    var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);
                                    if (void 0 === from_endpoint.value) return new MissingError(operation.from);
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return void 0 !== endpoint.parent ? (_remove(from_endpoint.parent, from_endpoint.key), _add(endpoint.parent, endpoint.key, from_endpoint.value), null) : new MissingError(operation.path)
                                }, exports.copy = function(object, operation) {
                                    var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);
                                    if (void 0 === from_endpoint.value) return new MissingError(operation.from);
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return void 0 !== endpoint.parent ? (_remove(from_endpoint.parent, from_endpoint.key), _add(endpoint.parent, endpoint.key, from_endpoint.value), null) : new MissingError(operation.path)
                                }, exports.test = function(object, operation) {
                                    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);
                                    return compare(endpoint.value, operation.value) ? null : new TestError(endpoint.value, operation.value)
                                }, Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                });
                                var Pointer = _dereq_("./pointer").Pointer,
                                    compare = _dereq_("./equal").compare,
                                    _errors = _dereq_("./errors"),
                                    MissingError = _errors.MissingError,
                                    TestError = _errors.TestError;

                                function _add(object, key, value) {
                                    Array.isArray(object) ? "-" == key ? object.push(value) : object.splice(key, 0, value) : object[key] = value
                                }

                                function _remove(object, key) {
                                    Array.isArray(object) ? object.splice(key, 1) : delete object[key]
                                }
                            }, {
                                "./equal": 2,
                                "./errors": 3,
                                "./pointer": 6
                            }],
                            6: [function(_dereq_, module, exports) {
                                "use strict";
                                var _createClass = function() {
                                    function defineProperties(target, props) {
                                        for (var key in props) {
                                            var prop = props[key];
                                            prop.configurable = !0, prop.value && (prop.writable = !0)
                                        }
                                        Object.defineProperties(target, props)
                                    }
                                    return function(Constructor, protoProps, staticProps) {
                                        return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                                    }
                                }();

                                function unescape(token) {
                                    return token.replace(/~1/g, "/").replace(/~0/g, "~")
                                }

                                function escape(token) {
                                    return token.replace(/~/g, "~0").replace(/\//g, "~1")
                                }
                                Object.defineProperty(exports, "__esModule", {
                                    value: !0
                                });
                                exports.Pointer = function() {
                                    function Pointer() {
                                        var tokens = void 0 === arguments[0] ? [""] : arguments[0];
                                        ! function(instance, Constructor) {
                                            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                                        }(this, Pointer), this.tokens = tokens
                                    }
                                    return _createClass(Pointer, {
                                        toString: {
                                            value: function() {
                                                return this.tokens.map(escape).join("/")
                                            }
                                        },
                                        evaluate: {
                                            value: function(object) {
                                                for (var parent = null, token = null, i = 1, l = this.tokens.length; i < l; i++) object = ((parent = object) || {})[token = this.tokens[i]];
                                                return {
                                                    parent: parent,
                                                    key: token,
                                                    value: object
                                                }
                                            }
                                        },
                                        push: {
                                            value: function(token) {
                                                this.tokens.push(token)
                                            }
                                        },
                                        add: {
                                            value: function(token) {
                                                return new Pointer(this.tokens.concat(String(token)))
                                            }
                                        }
                                    }, {
                                        fromJSON: {
                                            value: function(path) {
                                                var tokens = path.split("/").map(unescape);
                                                if ("" !== tokens[0]) throw new Error("Invalid JSON Pointer: " + path);
                                                return new Pointer(tokens)
                                            }
                                        }
                                    }), Pointer
                                }()
                            }, {}]
                        }, {}, [4])(4)
                    })
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {}],
            229: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    operation_retrier_1 = _dereq_("operation-retrier"),
                    configuration_1 = _dereq_("./configuration"),
                    logger_1 = _dereq_("./logger"),
                    persistentState_1 = _dereq_("./persistentState"),
                    twilio_transport_1 = _dereq_("twilio-transport");
                var TokenRequest = function TokenRequest() {
                        (0, _classCallCheck3.default)(this, TokenRequest)
                    },
                    EmsClient = function(_events_1$EventEmitte) {
                        function EmsClient(config) {
                            (0, _classCallCheck3.default)(this, EmsClient);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (EmsClient.__proto__ || (0, _getPrototypeOf2.default)(EmsClient)).call(this));
                            return (config = config || {}).transport = config.transport || new twilio_transport_1.Transport(config.twilsockClient || null), _this.state = new persistentState_1.PersistentState, _this.config = new configuration_1.default(config), _this.twilsock = config.twilsockClient, _this.transport = config.transport, _this
                        }
                        return (0, _inherits3.default)(EmsClient, _events_1$EventEmitte), (0, _createClass3.default)(EmsClient, [{
                            key: "setToken",
                            value: function(fpaToken) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var oldTokenRequest;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return this.currentFpaToken !== fpaToken && (this.currentFpaToken = fpaToken, oldTokenRequest = this.currentTokenRequest, this.currentTokenRequest = this.establishToken(fpaToken), this.notifyRejected(oldTokenRequest)), _context.abrupt("return", this.currentTokenRequest.promise);
                                            case 2:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "notifyRejected",
                            value: function(request) {
                                request && setTimeout(function() {
                                    return request.reject(new Error("Operation has been cancelled by next token"))
                                }, 0)
                            }
                        }, {
                            key: "establishToken",
                            value: function(fpaToken) {
                                var _this2 = this,
                                    tokenRequest = new TokenRequest,
                                    promise = new _promise2.default(function(resolve, reject) {
                                        _this2.establishTokenImpl(fpaToken).then(resolve).catch(reject), tokenRequest.resolve = resolve, tokenRequest.reject = reject
                                    });
                                return tokenRequest.promise = promise, tokenRequest
                            }
                        }, {
                            key: "establishTokenImpl",
                            value: function(fpaToken) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var _this3 = this;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.abrupt("return", new operation_retrier_1.default({
                                                    min: 500,
                                                    max: 2e3
                                                }).run(function() {
                                                    return _this3.requestRtdToken(fpaToken)
                                                }).then(function(res) {
                                                    if ("ok" != res.status) throw res.exception;
                                                    if (_this3.currentFpaToken === fpaToken) {
                                                        _this3.state.continuationToken = res.response.continuation_token;
                                                        var rtdToken = res.response.twilio_rtd_token;
                                                        "NEW" === res.response.status.status ? _this3.emit("tokenCreated", rtdToken) : _this3.emit("tokenUpdated", rtdToken), _this3.emit("token", rtdToken);
                                                        var response = {
                                                            token: res.response.twilio_rtd_token,
                                                            ttl: res.response.ttl,
                                                            status: res.response.status.status,
                                                            reason: res.response.status.reason || null,
                                                            identity: res.response.identity || null,
                                                            accountSid: res.response.account_sid,
                                                            serviceSids: res.response.instance_sids
                                                        };
                                                        return _this3.emit("response", response), response
                                                    }
                                                }).catch(function(e) {
                                                    throw logger_1.default.error(e), e
                                                }));
                                            case 1:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "requestRtdToken",
                            value: function(fpaToken) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var headers, body, response;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return headers = {
                                                    "Content-Type": "application/json"
                                                }, body = {
                                                    fpa_token: fpaToken,
                                                    continuation_token: this.state.continuationToken
                                                }, logger_1.default.debug("Token request", body), _context3.prev = 3, _context3.next = 6, this.transport.post(this.config.url, headers, body);
                                            case 6:
                                                return response = _context3.sent, logger_1.default.debug("Token response:", response), _context3.abrupt("return", {
                                                    status: "ok",
                                                    token: fpaToken,
                                                    response: response.body
                                                });
                                            case 11:
                                                if (_context3.prev = 11, _context3.t0 = _context3.catch(3), 401 === _context3.t0.status || 403 === _context3.t0.status) return _context3.t0 instanceof Error || (_context3.t0.body ? _context3.t0 = new Error(_context3.t0.body.message) : _context3.t0.description && (_context3.t0 = new Error(_context3.t0.description))), _context3.abrupt("return", {
                                                    status: "denied",
                                                    exception: _context3.t0,
                                                    token: null,
                                                    response: null
                                                });
                                                _context3.next = 16;
                                                break;
                                            case 16:
                                                throw _context3.t0;
                                            case 17:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this, [
                                        [3, 11]
                                    ])
                                }))
                            }
                        }]), EmsClient
                    }(events_1.EventEmitter),
                    EMSClient = exports.EmsClient = EmsClient;
                exports.EMSClient = EMSClient, exports.default = EMSClient
            }, {
                "./configuration": 230,
                "./logger": 231,
                "./persistentState": 232,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214,
                "operation-retrier": 220,
                "twilio-transport": 273
            }],
            230: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                exports.default = function Configuration(config) {
                    (0, _classCallCheck3.default)(this, Configuration);
                    var emsConfig = config.emsClient || {},
                        DEFAULT_EMS_HOST = "https://ems." + (config.realm || "us1") + ".twilio.com",
                        host = emsConfig.url || emsConfig.emsUri || emsConfig.emsUrl || DEFAULT_EMS_HOST + "/v1/token";
                    this.url = host
                }
            }, {
                "babel-runtime/helpers/classCallCheck": 50
            }],
            231: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _from = _dereq_("babel-runtime/core-js/array/from"),
                    _from2 = (obj = _from) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var log = _dereq_("loglevel");

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                exports.default = {
                    setLevel: function(level) {
                        log.setLevel(level)
                    },
                    trace: function() {
                        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];
                        log.trace.apply(null, prepareLine("EMS T:", args))
                    },
                    debug: function() {
                        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];
                        log.debug.apply(null, prepareLine("EMS D:", args))
                    },
                    info: function() {
                        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];
                        log.info.apply(null, prepareLine("EMS I:", args))
                    },
                    warn: function() {
                        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];
                        log.warn.apply(null, prepareLine("EMS W:", args))
                    },
                    error: function() {
                        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];
                        log.error.apply(null, prepareLine("EMS E:", args))
                    }
                }
            }, {
                "babel-runtime/core-js/array/from": 31,
                loglevel: 219
            }],
            232: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("./logger"),
                    PersistentState = function() {
                        function PersistentState() {
                            (0, _classCallCheck3.default)(this, PersistentState), this.cachedContinuationToken = null, this.myInstanceNumber = this.initializeInstanceId()
                        }
                        return (0, _createClass3.default)(PersistentState, [{
                            key: "initializeInstanceId",
                            value: function() {
                                var cachedInstancesCount = function() {
                                    try {
                                        if (sessionStorage) return parseInt(sessionStorage.getItem("Twilio::RTD::EmsClient::InstanceId")) || 0
                                    } catch (e) {
                                        return 0
                                    }
                                }();
                                PersistentState.instancesCounter < cachedInstancesCount && (PersistentState.instancesCounter = cachedInstancesCount);
                                var id = PersistentState.instancesCounter++;
                                try {
                                    sessionStorage && (sessionStorage.setItem("Twilio::RTD::EmsClient::InstanceId", PersistentState.instancesCounter.toString()), window && window.addEventListener("beforeunload", function() {
                                        sessionStorage.removeItem("Twilio::RTD::EmsClient::InstanceId")
                                    }))
                                } catch (e) {}
                                return id
                            }
                        }, {
                            key: "shouldUsePersistentToken",
                            get: function() {
                                return 0 === this.myInstanceNumber
                            }
                        }, {
                            key: "continuationToken",
                            get: function() {
                                if (this.cachedContinuationToken) return this.cachedContinuationToken;
                                try {
                                    if (this.shouldUsePersistentToken && sessionStorage) return this.cachedContinuationToken = sessionStorage.getItem("Twilio::RTD::EndpointId"), this.cachedContinuationToken
                                } catch (e) {
                                    logger_1.default.info("Can't access persistent storage", e.message)
                                }
                                return null
                            },
                            set: function(continuationToken) {
                                this.cachedContinuationToken = continuationToken;
                                try {
                                    this.shouldUsePersistentToken && sessionStorage && sessionStorage.setItem("Twilio::RTD::EndpointId", continuationToken)
                                } catch (e) {
                                    logger_1.default.info("Can't access persistent storage", e.message)
                                }
                            }
                        }]), PersistentState
                    }();
                PersistentState.instancesCounter = 0, exports.PersistentState = PersistentState
            }, {
                "./logger": 231,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            233: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("./logger"),
                    configuration_1 = _dereq_("./configuration"),
                    media_1 = _dereq_("./media");
                exports.Media = media_1.Media, exports.McsMedia = media_1.Media;
                var twilio_transport_1 = _dereq_("twilio-transport"),
                    network_1 = _dereq_("./services/network"),
                    log = logger_1.Logger.scope(""),
                    SDK_VERSION = _dereq_("./../package.json").version,
                    MSG_NO_TOKEN = "A valid Twilio token should be provided",
                    Client = function() {
                        function Client(token, baseUrl, options) {
                            if ((0, _classCallCheck3.default)(this, Client), this.options = options || {}, this.options.logLevel = this.options.logLevel || "error", this.config = new configuration_1.Configuration(token, baseUrl, this.options), !token) throw new Error(MSG_NO_TOKEN);
                            log.setLevel(this.options.logLevel), this.options.transport = this.options.transport || new twilio_transport_1.Transport(null, this.options), this.transport = this.options.transport, this.network = new network_1.Network(this.config, this.transport)
                        }
                        return (0, _createClass3.default)(Client, [{
                            key: "updateToken",
                            value: function(token) {
                                if (log.info("updateToken"), !token) throw new Error(MSG_NO_TOKEN);
                                this.config.updateToken(token)
                            }
                        }, {
                            key: "get",
                            value: function(sid) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.network.get(this.config.baseUrl + "/" + sid);
                                            case 2:
                                                return response = _context.sent, _context.abrupt("return", new media_1.Media(this.config, this.network, response.body));
                                            case 4:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "post",
                            value: function(contentType, media) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.next = 2, this.network.post(this.config.baseUrl, media, contentType);
                                            case 2:
                                                return response = _context2.sent, _context2.abrupt("return", new media_1.Media(this.config, this.network, response.body));
                                            case 4:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "postFormData",
                            value: function(formData) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return _context3.next = 2, this.network.post(this.config.baseUrl, formData);
                                            case 2:
                                                return response = _context3.sent, _context3.abrupt("return", new media_1.Media(this.config, this.network, response.body));
                                            case 4:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }]), Client
                    }();
                Client.version = SDK_VERSION, exports.Client = Client, exports.McsClient = Client, exports.default = Client
            }, {
                "./../package.json": 239,
                "./configuration": 234,
                "./logger": 236,
                "./media": 237,
                "./services/network": 238,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57,
                "twilio-transport": 273
            }],
            234: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Configuration = function() {
                    function Configuration(token, baseUrl, options) {
                        (0, _classCallCheck3.default)(this, Configuration), this.options = options.MCS || options || {}, this.token = token, this.baseUrl = (void 0 === this.options.realm ? "https://mcs.us1.twilio.com" : "https://mcs." + this.options.realm + ".twilio.com") + baseUrl
                    }
                    return (0, _createClass3.default)(Configuration, [{
                        key: "updateToken",
                        value: function(token) {
                            this.token = token
                        }
                    }, {
                        key: "backoffConfigOverride",
                        get: function() {
                            return this.options.backoffConfigOverride
                        }
                    }, {
                        key: "retryWhenThrottledOverride",
                        get: function() {
                            return this.options.retryWhenThrottledOverride
                        }
                    }], [{
                        key: "backoffConfigDefault",
                        get: function() {
                            return {
                                min: 1e3,
                                max: 4e3,
                                maxAttemptsCount: 3
                            }
                        }
                    }, {
                        key: "retryWhenThrottledDefault",
                        get: function() {
                            return !0
                        }
                    }]), Configuration
                }();
                exports.Configuration = Configuration
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            235: [function(_dereq_, module, exports) {
                "use strict";
                var mcsclient = _dereq_("./client");
                module.exports = mcsclient
            }, {
                "./client": 233
            }],
            236: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _from2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/array/from"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var log = _dereq_("loglevel");

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                var Logger = function() {
                    function Logger() {
                        (0, _classCallCheck3.default)(this, Logger), this.prefix = ""
                    }
                    return (0, _createClass3.default)(Logger, [{
                        key: "setLevel",
                        value: function(level) {
                            log.setLevel(level)
                        }
                    }, {
                        key: "trace",
                        value: function() {
                            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];
                            log.trace.apply(null, prepareLine("MCS T:" + this.prefix, args))
                        }
                    }, {
                        key: "debug",
                        value: function() {
                            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];
                            log.debug.apply(null, prepareLine("MCS D:" + this.prefix, args))
                        }
                    }, {
                        key: "info",
                        value: function() {
                            for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];
                            log.info.apply(null, prepareLine("MCS I:" + this.prefix, args))
                        }
                    }, {
                        key: "warn",
                        value: function() {
                            for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];
                            log.warn.apply(null, prepareLine("MCS W:" + this.prefix, args))
                        }
                    }, {
                        key: "error",
                        value: function() {
                            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];
                            log.error.apply(null, prepareLine("MCS E:" + this.prefix, args))
                        }
                    }], [{
                        key: "scope",
                        value: function(prefix) {
                            return new Logger
                        }
                    }, {
                        key: "setLevel",
                        value: function(level) {
                            log.setLevel(level)
                        }
                    }, {
                        key: "trace",
                        value: function() {
                            for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) args[_key6] = arguments[_key6];
                            log.trace.apply(null, prepareLine("MCS T:", args))
                        }
                    }, {
                        key: "debug",
                        value: function() {
                            for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) args[_key7] = arguments[_key7];
                            log.debug.apply(null, prepareLine("MCS D:", args))
                        }
                    }, {
                        key: "info",
                        value: function() {
                            for (var _len8 = arguments.length, args = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) args[_key8] = arguments[_key8];
                            log.info.apply(null, prepareLine("MCS I:", args))
                        }
                    }, {
                        key: "warn",
                        value: function() {
                            for (var _len9 = arguments.length, args = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) args[_key9] = arguments[_key9];
                            log.warn.apply(null, prepareLine("MCS W:", args))
                        }
                    }, {
                        key: "error",
                        value: function() {
                            for (var _len10 = arguments.length, args = Array(_len10), _key10 = 0; _key10 < _len10; _key10++) args[_key10] = arguments[_key10];
                            log.error.apply(null, prepareLine("MCS E:", args))
                        }
                    }]), Logger
                }();
                exports.Logger = Logger
            }, {
                "babel-runtime/core-js/array/from": 31,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                loglevel: 219
            }],
            237: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Media = function() {
                    function Media(config, network, data) {
                        (0, _classCallCheck3.default)(this, Media), this.config = config, this.network = network, this._update(data)
                    }
                    return (0, _createClass3.default)(Media, [{
                        key: "getContentUrl",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                var response;
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return _context.next = 2, this.network.get(this.config.baseUrl + "/" + this.sid);
                                        case 2:
                                            return response = _context.sent, this._update(response.body), _context.abrupt("return", _promise2.default.resolve(this.state.contentDirectUrl));
                                        case 5:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "_update",
                        value: function(data) {
                            this.state = {
                                sid: data.sid,
                                serviceSid: data.service_sid,
                                channelSid: data.channel_sid,
                                messageSid: data.message_sid,
                                dateCreated: data.date_created ? new Date(data.date_created) : null,
                                dateUpdated: data.date_updated ? new Date(data.date_updated) : null,
                                size: data.size,
                                contentType: data.content_type,
                                url: data.url,
                                contentUrl: data.links.content,
                                contentDirectUrl: data.links.content_direct_temporary,
                                filename: data.filename ? data.filename : null
                            }
                        }
                    }, {
                        key: "sid",
                        get: function() {
                            return this.state.sid
                        }
                    }, {
                        key: "serviceSid",
                        get: function() {
                            return this.state.serviceSid
                        }
                    }, {
                        key: "dateCreated",
                        get: function() {
                            return this.state.dateCreated
                        }
                    }, {
                        key: "dateUpdated",
                        get: function() {
                            return this.state.dateUpdated
                        }
                    }, {
                        key: "contentType",
                        get: function() {
                            return this.state.contentType
                        }
                    }, {
                        key: "size",
                        get: function() {
                            return this.state.size
                        }
                    }, {
                        key: "fileName",
                        get: function() {
                            return this.state.filename
                        }
                    }]), Media
                }();
                exports.Media = Media
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            238: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var operation_retrier_1 = _dereq_("operation-retrier"),
                    logger_1 = _dereq_("../logger"),
                    configuration_1 = _dereq_("../configuration"),
                    FormData = _dereq_("isomorphic-form-data"),
                    log = logger_1.Logger.scope(""),
                    Network = function() {
                        function Network(config, transport) {
                            (0, _classCallCheck3.default)(this, Network), this.config = config, this.transport = transport
                        }
                        return (0, _createClass3.default)(Network, [{
                            key: "backoffConfig",
                            value: function() {
                                return (0, _extends3.default)(configuration_1.Configuration.backoffConfigDefault, this.config.backoffConfigOverride)
                            }
                        }, {
                            key: "retryWhenThrottled",
                            value: function() {
                                return void 0 !== this.config.retryWhenThrottledOverride ? this.config.retryWhenThrottledOverride : void 0 !== configuration_1.Configuration.retryWhenThrottledDefault && configuration_1.Configuration.retryWhenThrottledDefault
                            }
                        }, {
                            key: "executeWithRetry",
                            value: function(request) {
                                var _this = this,
                                    retryWhenThrottled = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                return new _promise2.default(function(resolve, reject) {
                                    var codesToRetryOn = [502, 503, 504];
                                    retryWhenThrottled && codesToRetryOn.push(429);
                                    var retrier = new operation_retrier_1.default(_this.backoffConfig());
                                    retrier.on("attempt", function() {
                                        request().then(function(result) {
                                            return retrier.succeeded(result)
                                        }).catch(function(err) {
                                            -1 < codesToRetryOn.indexOf(err.status) ? retrier.failed(err) : "Twilsock disconnected" === err.message ? retrier.failed(err) : (retrier.removeAllListeners(), retrier.cancel(), reject(err))
                                        })
                                    }), retrier.on("succeeded", function(result) {
                                        resolve(result)
                                    }), retrier.on("cancelled", function(err) {
                                        return reject(err)
                                    }), retrier.on("failed", function(err) {
                                        return reject(err)
                                    }), retrier.start()
                                })
                            }
                        }, {
                            key: "get",
                            value: function(url) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var headers, response, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return headers = {
                                                    "X-Twilio-Token": this.config.token
                                                }, log.trace("sending GET request to ", url, " headers ", headers), _context.next = 4, this.executeWithRetry(function() {
                                                    return _this2.transport.get(url, headers)
                                                }, this.retryWhenThrottled());
                                            case 4:
                                                return response = _context.sent, log.trace("response", response), _context.abrupt("return", response);
                                            case 7:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "post",
                            value: function(url, media, contentType) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var headers, response;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return headers = {
                                                    "X-Twilio-Token": this.config.token
                                                }, media instanceof FormData || !contentType || (0, _extends3.default)(headers, {
                                                    "Content-Type": contentType
                                                }), response = void 0, log.trace("sending POST request to ", url, " headers ", headers), _context2.prev = 4, _context2.next = 7, this.transport.post(url, headers, media);
                                            case 7:
                                                response = _context2.sent, _context2.next = 17;
                                                break;
                                            case 10:
                                                if (_context2.prev = 10, _context2.t0 = _context2.catch(4), _context2.t0 instanceof TypeError) throw new TypeError("Posting FormData supported only with browser engine's FormData");
                                                _context2.next = 16;
                                                break;
                                            case 16:
                                                throw _context2.t0;
                                            case 17:
                                                return log.trace("response", response), _context2.abrupt("return", response);
                                            case 19:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this, [
                                        [4, 10]
                                    ])
                                }))
                            }
                        }]), Network
                    }();
                exports.Network = Network
            }, {
                "../configuration": 234,
                "../logger": 236,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/regenerator": 57,
                "isomorphic-form-data": 216,
                "operation-retrier": 220
            }],
            239: [function(_dereq_, module, exports) {
                module.exports = {
                    _args: [
                        [{
                            raw: "twilio-mcs-client@^0.0.4",
                            scope: null,
                            escapedName: "twilio-mcs-client",
                            name: "twilio-mcs-client",
                            rawSpec: "^0.0.4",
                            spec: ">=0.0.4 <0.0.5",
                            type: "range"
                        }, "/var/lib/jenkins/jobs/twilio-chat.js/workspace"]
                    ],
                    _from: "twilio-mcs-client@>=0.0.4 <0.0.5",
                    _id: "twilio-mcs-client@0.0.4",
                    _inCache: !0,
                    _location: "/twilio-mcs-client",
                    _nodeVersion: "8.4.0",
                    _npmOperationalInternal: {
                        host: "s3://npm-registry-packages",
                        tmp: "tmp/twilio-mcs-client-0.0.4.tgz_1507280871206_0.1071092204656452"
                    },
                    _npmUser: {
                        name: "twilio-ci",
                        email: "mroberts+twilio-ci@twilio.com"
                    },
                    _npmVersion: "5.3.0",
                    _phantomChildren: {},
                    _requested: {
                        raw: "twilio-mcs-client@^0.0.4",
                        scope: null,
                        escapedName: "twilio-mcs-client",
                        name: "twilio-mcs-client",
                        rawSpec: "^0.0.4",
                        spec: ">=0.0.4 <0.0.5",
                        type: "range"
                    },
                    _requiredBy: ["/"],
                    _resolved: "https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.0.4.tgz",
                    _shasum: "369ccc8f1dfef9e914192dcd5d2c05377468a1da",
                    _shrinkwrap: null,
                    _spec: "twilio-mcs-client@^0.0.4",
                    _where: "/var/lib/jenkins/jobs/twilio-chat.js/workspace",
                    author: {
                        name: "Twilio"
                    },
                    browser: "browser/index.js",
                    dependencies: {
                        "body-parser": "^1.18.2",
                        dotenv: "^4.0.0",
                        "isomorphic-form-data": "^1.0.0",
                        loglevel: "^1.5.0",
                        "operation-retrier": "^1.3.2",
                        pug: "^2.0.0-rc.4",
                        "twilio-transport": "^0.1.4"
                    },
                    description: "Twilio Media Content Service client library",
                    devDependencies: {
                        "@types/chai": "^3.5.2",
                        "@types/chai-as-promised": "0.0.31",
                        "@types/chai-datetime": "0.0.30",
                        "@types/chai-string": "^1.1.30",
                        "@types/core-js": "^0.9.42",
                        "@types/form-data": "0.0.33",
                        "@types/mocha": "^2.2.43",
                        "@types/node": "^7.0.18",
                        "@types/sinon": "^2.3.5",
                        "@types/sinon-chai": "^2.7.27",
                        async: "^2.5.0",
                        "async-test-tools": "^1.0.7",
                        "babel-eslint": "^7.2.3",
                        "babel-plugin-add-module-exports": "^0.2.1",
                        "babel-plugin-istanbul": "^4.1.5",
                        "babel-plugin-transform-async-to-generator": "^6.24.1",
                        "babel-plugin-transform-object-assign": "^6.22.0",
                        "babel-plugin-transform-runtime": "^6.23.0",
                        "babel-preset-es2015": "^6.24.1",
                        "babel-require": "^1.0.1",
                        "babel-runtime": "^6.23.0",
                        babelify: "^7.3.0",
                        browserify: "^14.3.0",
                        chai: "^3.5.0",
                        "chai-as-promised": "^6.0.0",
                        "chai-datetime": "^1.5.0",
                        "chai-string": "^1.3.0",
                        cheerio: "^0.22.0",
                        del: "^3.0.0",
                        express: "^4.16.1",
                        gulp: "^3.9.1",
                        "gulp-babel": "^6.1.2",
                        "gulp-derequire": "^2.1.0",
                        "gulp-insert": "^0.5.0",
                        "gulp-mocha": "^4.3.1",
                        "gulp-rename": "^1.2.2",
                        "gulp-tap": "^1.0.1",
                        "gulp-tslint": "^8.0.0",
                        "gulp-typescript": "^3.2.1",
                        "gulp-uglify": "^3.0.0",
                        "gulp-util": "^3.0.8",
                        gulpclass: "^0.1.2",
                        "ink-docstrap": "^1.3.0",
                        jsdoc: "^3.5.3",
                        "jsdoc-strip-async-await": "^0.1.0",
                        karma: "^1.7.0",
                        "karma-babel-preprocessor": "^6.0.1",
                        "karma-browserify": "^5.1.1",
                        "karma-browserstack-launcher": "^1.3.0",
                        "karma-chrome-launcher": "^2.2.0",
                        "karma-env-preprocessor": "^0.1.1",
                        "karma-mocha": "^1.3.0",
                        "karma-mocha-reporter": "^2.2.3",
                        "karma-sinon-chai": "^1.3.1",
                        "karma-sinon-ie": "^2.0.0",
                        "karma-typescript": "^3.0.7",
                        "loglevel-message-prefix": "^2.0.1",
                        nyc: "^11.2.1",
                        proxyquire: "^1.8.0",
                        sinon: "^2.3.8",
                        "sinon-chai": "^2.14.0",
                        t: "^0.5.1",
                        "ts-node": "^3.2.0",
                        tslint: "^5.5.0",
                        twilio: "^3.7.0",
                        typescript: "^2.5.3",
                        "uglify-save-license": "^0.4.1",
                        "vinyl-buffer": "^1.0.0",
                        "vinyl-source-stream": "^1.1.0",
                        watchify: "^3.9.0"
                    },
                    directories: {},
                    dist: {
                        integrity: "sha512-4NWzSInfENIP48G58gyN13E5XlqItX8hU93yVsMX+FrIvcpUS3A4snXko6NvIt1ZTMhG+sXrt6OF3Mx555tTPw==",
                        shasum: "369ccc8f1dfef9e914192dcd5d2c05377468a1da",
                        tarball: "https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.0.4.tgz"
                    },
                    engines: {
                        node: ">=6"
                    },
                    gitHead: "339764692c93f2bd32b56889048ea7a05266abdd",
                    license: "MIT",
                    main: "lib/index.js",
                    maintainers: [{
                        name: "twilio-ci",
                        email: "mroberts+twilio-ci@twilio.com"
                    }],
                    name: "twilio-mcs-client",
                    optionalDependencies: {},
                    readme: "ERROR: No README data found!",
                    scripts: {
                        start: "node app.js"
                    },
                    types: "./lib/client.d.ts",
                    version: "0.0.4"
                }
            }, {}],
            240: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _configuration2 = _interopRequireDefault(_dereq_("./configuration")),
                    _events2 = _interopRequireDefault(_dereq_("events")),
                    _logger2 = _interopRequireDefault(_dereq_("./logger")),
                    _bottleneck2 = _interopRequireDefault(_dereq_("bottleneck")),
                    _registrar2 = _interopRequireDefault(_dereq_("./registrar")),
                    _twilsock2 = _interopRequireDefault(_dereq_("twilsock")),
                    _twilioTransport2 = _interopRequireDefault(_dereq_("twilio-transport")),
                    _twilioEmsClient = _dereq_("twilio-ems-client");

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var Client = function(_EventEmitter) {
                    function Client(fpaToken, options) {
                        (0, _classCallCheck3.default)(this, Client);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (Client.__proto__ || (0, _getPrototypeOf2.default)(Client)).call(this));
                        if (!fpaToken) throw new Error("Token is required for Notifications client");
                        (options = options || {}).logLevel = options.logLevel || "error", _logger2.default.setLevel(options.logLevel);
                        var minTokenRefreshInterval = options.minTokenRefreshInterval || 1e4,
                            productId = options.productId || "notifications";
                        options.twilsockClient = options.twilsockClient || new _twilsock2.default(fpaToken, options), options.transport = options.transport || new _twilioTransport2.default(options.twilsockClient), options.emsClient = options.emsClient || new _twilioEmsClient.EMSClient(options);
                        var fn, to, per, limiter, twilsock = options.twilsockClient,
                            transport = options.transport,
                            config = new _configuration2.default(null, options);
                        return (0, _defineProperties2.default)(_this, {
                            _config: {
                                value: config
                            },
                            _emsClient: {
                                value: options.emsClient
                            },
                            _registrar: {
                                value: new _registrar2.default(productId, transport, twilsock, config)
                            },
                            _twilsock: {
                                value: twilsock
                            },
                            _reliableTransportState: {
                                value: {
                                    overall: !1,
                                    transport: !1,
                                    registration: !1,
                                    lastEmitted: null
                                }
                            },
                            updateToken: {
                                value: (fn = _this._updateToken.bind(_this), to = 1, per = minTokenRefreshInterval, limiter = new _bottleneck2.default(to, per, 1, _bottleneck2.default.strategy.LEAK), function() {
                                    var args = Array.prototype.slice.call(arguments, 0);
                                    return args.unshift(fn), limiter.schedule.apply(limiter, args)
                                }),
                                enumerable: !0
                            },
                            connectionState: {
                                get: function() {
                                    return "disconnected" === _this._twilsock.state ? "disconnected" : "disconnecting" === _this._twilsock.state ? "disconnecting" : "connected" === _this._twilsock.state && _this._reliableTransportState.registration ? "connected" : "rejected" === _this._twilsock.state ? "denied" : "connecting"
                                }
                            }
                        }), _this._emsClient.setToken(fpaToken).then(function(response) {
                            _this._config.updateToken(response.token), _this._registrar.updateToken()
                        }).catch(function(e) {
                            _logger2.default.warn("Failed to set token", e)
                        }), _this._onTransportStateChange(_this._twilsock.connected), _this._registrar.on("transportReady", function(state) {
                            _this._onRegistrationStateChange(state ? "registered" : "")
                        }), _this._registrar.on("stateChanged", function(state) {
                            _this._onRegistrationStateChange(state)
                        }), _this._registrar.on("needReliableTransport", _this._onNeedReliableTransport.bind(_this)), _this._twilsock.on("message", function(type, message) {
                            return _this._routeMessage(type, message)
                        }), _this._twilsock.on("connected", function(notificationId) {
                            _this._onTransportStateChange(!0), _this._registrar.setNotificationId("twilsock", notificationId)
                        }), _this._twilsock.on("disconnected", function() {
                            _this._onTransportStateChange(!1)
                        }), _this
                    }
                    return (0, _inherits3.default)(Client, _EventEmitter), (0, _createClass3.default)(Client, [{
                        key: "_routeMessage",
                        value: function(type, message) {
                            _logger2.default.trace("Message arrived: ", type, message), this.emit("message", type, message)
                        }
                    }, {
                        key: "_onNeedReliableTransport",
                        value: function(isNeeded) {
                            isNeeded ? this._twilsock.connect() : this._twilsock.disconnect()
                        }
                    }, {
                        key: "_onRegistrationStateChange",
                        value: function(state) {
                            this._reliableTransportState.registration = "registered" === state, this._updateTransportState()
                        }
                    }, {
                        key: "_onTransportStateChange",
                        value: function(connected) {
                            this._reliableTransportState.transport = connected, this._updateTransportState()
                        }
                    }, {
                        key: "_updateTransportState",
                        value: function() {
                            var overallState = this._reliableTransportState.transport && this._reliableTransportState.registration;
                            this._reliableTransportState.overall !== overallState && (this._reliableTransportState.overall = overallState, _logger2.default.info("Transport ready " + overallState), this.emit("transportReady", overallState)), this._reliableTransportState.lastEmitted !== this.connectionState && (this._reliableTransportState.lastEmitted = this.connectionState, this.emit("connectionStateChanged", this.connectionState))
                        }
                    }, {
                        key: "subscribe",
                        value: function(messageType, channelType) {
                            return channelType = channelType || "twilsock", _logger2.default.trace("Add subscriptions for message type: ", messageType, channelType), this._registrar.subscribe(messageType, channelType)
                        }
                    }, {
                        key: "unsubscribe",
                        value: function(messageType, channelType) {
                            return channelType = channelType || "twilsock", _logger2.default.trace("Remove subscriptions for message type: ", messageType, channelType), this._registrar.unsubscribe(messageType, channelType)
                        }
                    }, {
                        key: "handlePushNotification",
                        value: function(msg) {
                            _logger2.default.warn("Push message passed, but no functionality implemented yet: " + msg)
                        }
                    }, {
                        key: "setPushRegistrationId",
                        value: function(registrationId, type) {
                            this._registrar.setNotificationId(type || "gcm", registrationId)
                        }
                    }, {
                        key: "_updateToken",
                        value: function(fpaToken) {
                            var _this2 = this;
                            return _logger2.default.info("authTokenUpdated"), this._fpaToken === fpaToken ? _promise2.default.resolve() : (this._twilsock.updateToken(fpaToken), this._emsClient.setToken(fpaToken).then(function(response) {
                                return response.token
                            }).then(function(token) {
                                _this2._config.updateToken(token), _this2._registrar.updateToken()
                            }))
                        }
                    }]), Client
                }(_events2.default);
                exports.default = Client, module.exports = exports.default
            }, {
                "./configuration": 241,
                "./logger": 243,
                "./registrar": 245,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                bottleneck: 69,
                events: 214,
                "twilio-ems-client": 229,
                "twilio-transport": 273,
                twilsock: 276
            }],
            241: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var NotificationConfig = function() {
                    function NotificationConfig(token, options) {
                        var _this = this;
                        (0, _classCallCheck3.default)(this, NotificationConfig);
                        var uri = (options = (options || {}).Notification || {}).ersUri || "https://ers.twilio.com";
                        (0, _defineProperties2.default)(this, {
                            _registrarUri: {
                                value: uri + "/v1/registrations"
                            },
                            _token: {
                                value: token,
                                writable: !0
                            },
                            registrarUri: {
                                get: function() {
                                    return _this._registrarUri
                                }
                            },
                            token: {
                                get: function() {
                                    return _this._token
                                }
                            }
                        })
                    }
                    return (0, _createClass3.default)(NotificationConfig, [{
                        key: "updateToken",
                        value: function(token) {
                            this._token = token
                        }
                    }]), NotificationConfig
                }();
                exports.default = NotificationConfig, module.exports = exports.default
            }, {
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            242: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var obj, _client = _dereq_("./client"),
                    _client2 = (obj = _client) && obj.__esModule ? obj : {
                        default: obj
                    };
                exports.default = _client2.default, module.exports = exports.default
            }, {
                "./client": 240
            }],
            243: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _from2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/array/from")),
                    _loglevel2 = _interopRequireDefault(_dereq_("loglevel"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                exports.default = {
                    setLevel: function(level) {
                        _loglevel2.default.setLevel(level)
                    },
                    trace: function() {
                        _loglevel2.default.trace.apply(null, prepareLine("Notify T:", arguments))
                    },
                    debug: function() {
                        _loglevel2.default.debug.apply(null, prepareLine("Notify D:", arguments))
                    },
                    info: function() {
                        _loglevel2.default.info.apply(null, prepareLine("Notify I:", arguments))
                    },
                    warn: function() {
                        _loglevel2.default.warn.apply(null, prepareLine("Notify W:", arguments))
                    },
                    error: function() {
                        _loglevel2.default.error.apply(null, prepareLine("Notify E:", arguments))
                    }
                }, module.exports = exports.default
            }, {
                "babel-runtime/core-js/array/from": 31,
                loglevel: 219
            }],
            244: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _set3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/set")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _events2 = _interopRequireDefault(_dereq_("events")),
                    _logger2 = _interopRequireDefault(_dereq_("./logger")),
                    _javascriptStateMachine2 = _interopRequireDefault(_dereq_("javascript-state-machine")),
                    _backoff2 = _interopRequireDefault(_dereq_("backoff"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }

                function toArray(_set) {
                    var arr = [];
                    return _set.forEach(function(v) {
                        return arr.push(v)
                    }), arr
                }
                var RegistrarConnector = function(_EventEmitter) {
                    function RegistrarConnector(context, transport, config, channelType) {
                        (0, _classCallCheck3.default)(this, RegistrarConnector);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (RegistrarConnector.__proto__ || (0, _getPrototypeOf2.default)(RegistrarConnector)).call(this)),
                            fsm = _javascriptStateMachine2.default.create({
                                initial: {
                                    state: "unregistered",
                                    event: "init",
                                    defer: !0
                                },
                                events: [{
                                    name: "userUpdate",
                                    from: ["unregistered"],
                                    to: "registering"
                                }, {
                                    name: "userUpdate",
                                    from: ["registered"],
                                    to: "unregistering"
                                }, {
                                    name: "registered",
                                    from: ["registering", "retrying"],
                                    to: "registered"
                                }, {
                                    name: "unregistered",
                                    from: ["unregistering"],
                                    to: "unregistered"
                                }, {
                                    name: "retry",
                                    from: ["retrying"],
                                    to: "retrying"
                                }, {
                                    name: "failure",
                                    from: ["registering"],
                                    to: "retrying"
                                }, {
                                    name: "failure",
                                    from: ["retrying"],
                                    to: "retrying"
                                }, {
                                    name: "failure",
                                    from: ["unregistering"],
                                    to: "unregistered"
                                }],
                                callbacks: {
                                    onregistering: function(event, from, to, arg) {
                                        return _this._register(arg)
                                    },
                                    onunregistering: function() {
                                        return _this._unregister()
                                    },
                                    onregistered: function() {
                                        return _this._onRegistered()
                                    },
                                    onunregistered: function() {
                                        return _this._onUnregistered()
                                    },
                                    onretrying: function(event, from, to, arg) {
                                        return _this._initRetry(arg)
                                    },
                                    onfailure: function(event, from, to, arg) {
                                        "retrying" === from && _this._initRetry(arg)
                                    }
                                }
                            }),
                            backoff = _backoff2.default.exponential({
                                randomisationFactor: .2,
                                initialDelay: 2e3,
                                maxDelay: 12e4
                            });
                        return backoff.on("ready", function() {
                            _this._retry()
                        }), (0, _defineProperties2.default)(_this, {
                            _transport: {
                                value: transport
                            },
                            _context: {
                                value: context
                            },
                            _url: {
                                value: config.registrarUri,
                                writable: !1
                            },
                            _config: {
                                value: config
                            },
                            _fsm: {
                                value: fsm
                            },
                            _backoff: {
                                value: backoff
                            },
                            _channelType: {
                                value: channelType
                            },
                            _registrationId: {
                                value: !1,
                                writable: !0
                            },
                            _notificationId: {
                                value: !1,
                                writable: !0
                            },
                            _messageTypes: {
                                value: new _set3.default,
                                writable: !0
                            },
                            _pendingUpdate: {
                                value: null,
                                writable: !0
                            }
                        }), fsm.init(), _this
                    }
                    return (0, _inherits3.default)(RegistrarConnector, _EventEmitter), (0, _createClass3.default)(RegistrarConnector, [{
                        key: "setNotificationId",
                        value: function(notificationId) {
                            this._notificationId !== notificationId && (this._notificationId = notificationId, this._updateRegistration())
                        }
                    }, {
                        key: "updateToken",
                        value: function() {
                            return this._updateRegistration()
                        }
                    }, {
                        key: "has",
                        value: function(messageType) {
                            return this._messageTypes.has(messageType)
                        }
                    }, {
                        key: "subscribe",
                        value: function(messageType) {
                            return this._messageTypes.has(messageType) ? (_logger2.default.debug("Message type already registered ", messageType), !1) : (this._messageTypes.add(messageType), this._updateRegistration(), !0)
                        }
                    }, {
                        key: "unsubscribe",
                        value: function(messageType) {
                            return !!this._messageTypes.has(messageType) && (this._messageTypes.delete(messageType), 0 < this._messageTypes.size ? this._updateRegistration() : this._removeRegistration(), !0)
                        }
                    }, {
                        key: "_updateRegistration",
                        value: function() {
                            this._notificationId && this._update(this._notificationId, toArray(this._messageTypes))
                        }
                    }, {
                        key: "_removeRegistration",
                        value: function() {
                            this._notificationId && this._update(this._notificationId, toArray(this._messageTypes))
                        }
                    }, {
                        key: "_update",
                        value: function(notificationId, messageTypes) {
                            var regData = {
                                notificationId: notificationId,
                                messageTypes: messageTypes
                            };
                            this._fsm.is("unregistered") ? regData.notificationId && 0 < regData.messageTypes.length && this._fsm.userUpdate(regData) : (this._fsm.is("registered") && this._fsm.userUpdate(regData), this._setPendingUpdate(regData))
                        }
                    }, {
                        key: "_setPendingUpdate",
                        value: function(regData) {
                            this._pendingUpdate = regData
                        }
                    }, {
                        key: "_checkPendingUpdate",
                        value: function() {
                            if (this._pendingUpdate) {
                                var pendingUpdate = this._pendingUpdate;
                                this._pendingUpdate = null, this._updateRegistration(pendingUpdate.notificationId, pendingUpdate.messageTypes)
                            }
                        }
                    }, {
                        key: "_initRetry",
                        value: function(regData) {
                            this._pendingUpdate || this._setPendingUpdate(regData), this._backoff.backoff()
                        }
                    }, {
                        key: "_retry",
                        value: function() {
                            if (this._pendingUpdate) {
                                var pendingUpdate = this._pendingUpdate;
                                this._pendingUpdate = null, this._register(pendingUpdate)
                            }
                        }
                    }, {
                        key: "_onRegistered",
                        value: function() {
                            this._backoff.reset(), this.emit("stateChanged", "registered"), this._checkPendingUpdate()
                        }
                    }, {
                        key: "_onUnregistered",
                        value: function() {
                            this._backoff.reset(), this.emit("stateChanged", "unregistered"), this._checkPendingUpdate()
                        }
                    }, {
                        key: "_register",
                        value: function(regData) {
                            var _this2 = this,
                                registrarRequest = {
                                    endpoint_platform: this._context.platform,
                                    channel_type: this._channelType,
                                    version: "2",
                                    message_types: regData.messageTypes,
                                    data: {},
                                    ttl: "PT24H"
                                };
                            "twilsock" === this._channelType ? registrarRequest.data.url = regData.notificationId : registrarRequest.data.registration_id = regData.notificationId;
                            var uri = this._url + "?productId=" + this._context.productId,
                                headers = {
                                    "Content-Type": "application/json",
                                    "X-Twilio-Token": this._config.token
                                };
                            return _logger2.default.trace("Creating registration for channel ", this._channelType), this._transport.post(uri, headers, registrarRequest).then(function(response) {
                                _this2._registrationId = response.body.id, _this2._registrationData = regData, _logger2.default.debug("Registration created: ", response), _this2._fsm.registered()
                            }).catch(function(error) {
                                return _logger2.default.error("Registration failed: ", error), _this2._fsm.failure(regData), error
                            })
                        }
                    }, {
                        key: "_unregister",
                        value: function() {
                            var _this3 = this;
                            if (!this._registrationId) return _promise2.default.resolve();
                            var uri = this._url + "/" + this._registrationId + "?productId=" + this._context.productId,
                                headers = {
                                    "Content-Type": "application/json",
                                    "X-Twilio-Token": this._config.token
                                };
                            return _logger2.default.trace("Removing registration for ", this._channelType), this._transport.delete(uri, headers).then(function() {
                                _logger2.default.debug("Registration removed for ", _this3._channelType), _this3._registrationId = !1, _this3._fsm.unregistered()
                            }).catch(function(reason) {
                                return _logger2.default.error("Failed to remove of registration ", _this3.channelType, reason), _this3._fsm.failure(), reason
                            })
                        }
                    }]), RegistrarConnector
                }(_events2.default);
                exports.default = RegistrarConnector, (0, _freeze2.default)(RegistrarConnector), module.exports = exports.default
            }, {
                "./logger": 243,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/core-js/set": 47,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                backoff: 58,
                events: 214,
                "javascript-state-machine": 217
            }],
            245: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _events2 = _interopRequireDefault(_dereq_("events")),
                    _registrar2 = _interopRequireDefault(_dereq_("./registrar.connector")),
                    _twilsock2 = _interopRequireDefault(_dereq_("./twilsock.connector"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var Registrar = function(_EventEmitter) {
                    function Registrar(productId, transport, twilsock, config) {
                        (0, _classCallCheck3.default)(this, Registrar);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (Registrar.__proto__ || (0, _getPrototypeOf2.default)(Registrar)).call(this));
                        (0, _defineProperties2.default)(_this, {
                            _conf: {
                                value: config
                            },
                            _connectors: {
                                value: new _map2.default
                            }
                        });
                        var platform = _this._detectPlatform();
                        return _this._connectors.set("twilsock", new _twilsock2.default({
                            productId: productId,
                            platform: platform
                        }, twilsock, config)), _this._connectors.set("gcm", new _registrar2.default({
                            productId: productId,
                            platform: platform
                        }, transport, config, "gcm")), _this._connectors.set("fcm", new _registrar2.default({
                            productId: productId,
                            platform: platform
                        }, transport, config, "fcm")), _this._connectors.set("apn", new _registrar2.default({
                            productId: productId,
                            platform: platform
                        }, transport, config, "apn")), _this._connectors.get("twilsock").on("transportReady", function(state) {
                            return _this.emit("transportReady", state)
                        }), _this
                    }
                    return (0, _inherits3.default)(Registrar, _EventEmitter), (0, _createClass3.default)(Registrar, [{
                        key: "setNotificationId",
                        value: function(channelType, notificationId) {
                            this._connector(channelType).setNotificationId(notificationId)
                        }
                    }, {
                        key: "hasSubscription",
                        value: function(messageType, channelType) {
                            this._connector(channelType).has(messageType)
                        }
                    }, {
                        key: "subscribe",
                        value: function(messageType, channelType) {
                            this._connector(channelType).subscribe(messageType)
                        }
                    }, {
                        key: "unsubscribe",
                        value: function(messageType, channelType) {
                            this._connector(channelType).unsubscribe(messageType)
                        }
                    }, {
                        key: "updateToken",
                        value: function() {
                            this._connectors.forEach(function(connector) {
                                return connector.updateToken()
                            })
                        }
                    }, {
                        key: "_connector",
                        value: function(type) {
                            var connector = this._connectors.get(type);
                            if (!connector) throw new Error("Unknown channel type: " + type);
                            return connector
                        }
                    }, {
                        key: "_detectPlatform",
                        value: function() {
                            var _platform = "";
                            return "undefined" != typeof navigator ? (_platform = "unknown", void 0 !== navigator.product && (_platform = navigator.product), void 0 !== navigator.userAgent && (_platform = navigator.userAgent)) : _platform = "web", _platform.substring(0, 128)
                        }
                    }]), Registrar
                }(_events2.default);
                exports.default = Registrar, (0, _freeze2.default)(Registrar), module.exports = exports.default
            }, {
                "./registrar.connector": 244,
                "./twilsock.connector": 246,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                events: 214
            }],
            246: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                    _set3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/set")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _uuid2 = _interopRequireDefault(_dereq_("uuid")),
                    _logger2 = _interopRequireDefault(_dereq_("./logger")),
                    _events2 = _interopRequireDefault(_dereq_("events"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var TwilsockConnector = function(_EventEmitter) {
                    function TwilsockConnector(context, twilsock, config) {
                        (0, _classCallCheck3.default)(this, TwilsockConnector);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockConnector.__proto__ || (0, _getPrototypeOf2.default)(TwilsockConnector)).call(this));
                        return context.id = _uuid2.default.v4(), (0, _defineProperties2.default)(_this, {
                            _twilsock: {
                                value: twilsock
                            },
                            _messageTypes: {
                                value: new _set3.default
                            },
                            config: {
                                value: config
                            },
                            context: {
                                value: context
                            }
                        }), twilsock.on("stateChanged", function(state) {
                            "connected" !== state && _this.emit("transportReady", !1)
                        }), twilsock.on("registered", function(id) {
                            context && id === context.id && "connected" === twilsock.state && _this.emit("transportReady", !0)
                        }), _this
                    }
                    return (0, _inherits3.default)(TwilsockConnector, _EventEmitter), (0, _createClass3.default)(TwilsockConnector, [{
                        key: "setNotificationId",
                        value: function() {
                            return !1
                        }
                    }, {
                        key: "updateToken",
                        value: function() {
                            this._twilsock.removeNotificationsContext(this.context.id), this.context.id = _uuid2.default.v4(), this._updateContext()
                        }
                    }, {
                        key: "has",
                        value: function(messageType) {
                            return this._messageTypes.has(messageType)
                        }
                    }, {
                        key: "subscribe",
                        value: function(messageType) {
                            return this._messageTypes.has(messageType) ? (_logger2.default.trace("Message type already registered ", messageType), !1) : (this._messageTypes.add(messageType), this._updateContext(), !0)
                        }
                    }, {
                        key: "unsubscribe",
                        value: function(messageType) {
                            return !!this._messageTypes.has(messageType) && (this._messageTypes.delete(messageType), 0 < this._messageTypes.size ? this._updateContext() : this._twilsock.removeNotificationsContext(this.context.id), !0)
                        }
                    }, {
                        key: "_updateContext",
                        value: function() {
                            if (this.config.token) {
                                var _set, arr, messageTypes = (_set = this._messageTypes, arr = [], _set.forEach(function(v) {
                                        return arr.push(v)
                                    }), arr),
                                    context = {
                                        product_id: this.context.productId,
                                        notification_protocol_version: 4,
                                        endpoint_platform: this.context.platform,
                                        ttl: 172800,
                                        token: this.config.token,
                                        message_types: messageTypes
                                    };
                                this.emit("transportReady", !1), this._twilsock.setNotificationsContext(this.context.id, context)
                            }
                        }
                    }]), TwilsockConnector
                }(_events2.default);
                exports.default = TwilsockConnector, (0, _freeze2.default)(TwilsockConnector), module.exports = exports.default
            }, {
                "./logger": 243,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/set": 47,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                events: 214,
                uuid: 283
            }],
            247: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var karibu_1 = _dereq_("karibu"),
                    Entry = function() {
                        function Entry(value, revision) {
                            (0, _classCallCheck3.default)(this, Entry), this.value = value, this.revision = revision || 0
                        }
                        return (0, _createClass3.default)(Entry, [{
                            key: "isValid",
                            get: function() {
                                return !0
                            }
                        }]), Entry
                    }(),
                    Tombstone = function() {
                        function Tombstone(revision) {
                            (0, _classCallCheck3.default)(this, Tombstone), this.revision = revision
                        }
                        return (0, _createClass3.default)(Tombstone, [{
                            key: "isValid",
                            get: function() {
                                return !1
                            }
                        }]), Tombstone
                    }(),
                    Cache = function() {
                        function Cache() {
                            (0, _classCallCheck3.default)(this, Cache), this.items = new karibu_1.TreeMap
                        }
                        return (0, _createClass3.default)(Cache, [{
                            key: "store",
                            value: function(key, value, revision) {
                                var entry = this.items.get(key);
                                return entry && entry.revision > revision ? entry.isValid ? entry.value : null : (this.items.set(key, new Entry(value, revision)), value)
                            }
                        }, {
                            key: "delete",
                            value: function(key, revision) {
                                var curr = this.items.get(key);
                                (!curr || curr.revision < revision) && this.items.set(key, new Tombstone(revision))
                            }
                        }, {
                            key: "isKnown",
                            value: function(key, revision) {
                                var curr = this.items.get(key);
                                return curr && curr.revision >= revision
                            }
                        }, {
                            key: "get",
                            value: function(key) {
                                var entry = this.items.get(key);
                                return entry && entry.isValid ? entry.value : null
                            }
                        }, {
                            key: "has",
                            value: function(key) {
                                var entry = this.items.get(key);
                                return entry && entry.isValid
                            }
                        }]), Cache
                    }();
                exports.Cache = Cache, exports.default = Cache
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                karibu: 218
            }],
            248: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var events_1 = _dereq_("events"),
                    xxhashjs_1 = _dereq_("xxhashjs"),
                    Twilsock = _dereq_("twilsock"),
                    twilio_transport_1 = _dereq_("twilio-transport"),
                    twilio_ems_client_1 = _dereq_("twilio-ems-client"),
                    Notifications = _dereq_("twilio-notifications"),
                    utils_1 = _dereq_("./utils"),
                    logger_1 = _dereq_("./logger"),
                    configuration_1 = _dereq_("./configuration"),
                    subscriptions_1 = _dereq_("./subscriptions"),
                    router_1 = _dereq_("./router"),
                    network_1 = _dereq_("./network"),
                    syncdocument_1 = _dereq_("./syncdocument"),
                    synclist_1 = _dereq_("./synclist"),
                    syncmap_1 = _dereq_("./syncmap"),
                    clientInfo_1 = _dereq_("./clientInfo"),
                    entitiesCache_1 = _dereq_("./entitiesCache"),
                    storage_1 = _dereq_("./services/storage"),
                    utils_2 = _dereq_("./utils"),
                    deferred_1 = _dereq_("./utils/deferred"),
                    syncerror_1 = _dereq_("./syncerror"),
                    synctopic_1 = _dereq_("./topics/synctopic"),
                    SDK_VERSION = _dereq_("../package.json").version;

                function subscribe(subscribable) {
                    return subscribable._subscribe(), subscribable
                }

                function decompose(arg) {
                    return arg ? "string" == typeof arg ? {
                        id: arg,
                        purpose: null,
                        data: null,
                        context: null,
                        mode: null,
                        optimistic: !1
                    } : {
                        id: arg.uniqueName || arg.sid || arg.id,
                        purpose: arg.purpose,
                        data: arg.data,
                        context: arg.context,
                        mode: arg.mode,
                        optimistic: !!arg.optimistic
                    } : {
                        id: null,
                        purpose: null,
                        data: null,
                        context: null,
                        mode: null,
                        optimistic: !1
                    }
                }
                var SyncClient = function(_events_1$EventEmitte) {
                    function SyncClient(fpaToken) {
                        var options = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        (0, _classCallCheck3.default)(this, SyncClient);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncClient.__proto__ || (0, _getPrototypeOf2.default)(SyncClient)).call(this));
                        if (!fpaToken) throw new Error("Sync library needs a valid Twilio token to be passed");
                        options.hasOwnProperty("logLevel") && logger_1.default.setLevel(options.logLevel), _this.productId = options.productId = options.productId || "data_sync";
                        var twilsock = options.twilsockClient = options.twilsockClient || new Twilsock(fpaToken, options),
                            transport = options.transport = options.transport || new twilio_transport_1.Transport(options.twilsockClient, {
                                concurrentHttpRequestLimit: 20
                            }),
                            emsClient = options.emsClient = options.emsClient || new twilio_ems_client_1.EmsClient(options),
                            notifications = options.notificationsClient = options.notificationsClient || new Notifications(fpaToken, options),
                            config = new configuration_1.Configuration(null, options),
                            network = new network_1.Network(_this.productId, new clientInfo_1.ClientInfo(SDK_VERSION), config, transport),
                            storage = new storage_1.SessionStorage(config);
                        _this.localStorageId = null, _this.fpaToken = fpaToken, _this.authData = new deferred_1.Deferred, _this.authData.promise.then(function(response) {
                            return _this.handleEmsResponse(response)
                        }), emsClient.once("response", function(response) {
                            return _this.authData.update(response)
                        }), emsClient.setToken(fpaToken).catch(function(e) {
                            logger_1.default.warn("Failed to set token", e)
                        }), twilsock.connect(), _this.services = {
                            config: config,
                            twilsock: twilsock,
                            notifications: notifications,
                            network: network,
                            emsClient: emsClient,
                            storage: storage,
                            router: null,
                            subscriptions: null
                        };
                        var subscriptions = new subscriptions_1.Subscriptions(_this.services),
                            router = new router_1.Router({
                                config: config,
                                subscriptions: subscriptions,
                                notifications: notifications
                            });
                        return _this.services.router = router, _this.services.subscriptions = subscriptions, _this.entities = new entitiesCache_1.EntitiesCache, notifications.on("connectionStateChanged", function() {
                            _this.emit("connectionStateChanged", _this.services.notifications.connectionState)
                        }), _this
                    }
                    return (0, _inherits3.default)(SyncClient, _events_1$EventEmitte), (0, _createClass3.default)(SyncClient, [{
                        key: "handleEmsResponse",
                        value: function(response) {
                            this.services.config.updateToken(response.token);
                            try {
                                var identity = response.identity,
                                    serviceSid = response.serviceSids[this.productId],
                                    storageId = xxhashjs_1.h64().update("TW::" + identity + "::" + serviceSid).digest().toString(16);
                                this.services.storage.updateStorageId(storageId)
                            } catch (e) {
                                logger_1.default.error("Failed to initialize persistent storage", e)
                            }
                        }
                    }, {
                        key: "ensureReady",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return _context.next = 2, this.authData.promise;
                                        case 2:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "storeRootInSessionCache",
                        value: function(type, id, value) {
                            if (this.services.config.sessionStorageEnabled && id) {
                                var valueToStore = utils_2.deepClone(value);
                                type !== synclist_1.SyncList.type && type !== syncmap_1.SyncMap.type || (valueToStore.last_event_id = null, delete valueToStore.items), this.services.storage.store(type, id, valueToStore)
                            }
                        }
                    }, {
                        key: "readRootFromSessionCache",
                        value: function(type, id) {
                            return this.services.config.sessionStorageEnabled && id ? this.services.storage.read(type, id) : null
                        }
                    }, {
                        key: "_get",
                        value: function(baseUri, id) {
                            var optimistic = 2 < arguments.length && void 0 !== arguments[2] && arguments[2];
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                var uri, response;
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            if (id) {
                                                _context2.next = 2;
                                                break
                                            }
                                            return _context2.abrupt("return", null);
                                        case 2:
                                            return uri = new utils_1.UriBuilder(baseUri).pathSegment(id).queryParam("Include", optimistic ? "items" : void 0).build(), _context2.prev = 3, _context2.next = 6, this.services.network.get(uri);
                                        case 6:
                                            return response = _context2.sent, _context2.abrupt("return", response.body);
                                        case 10:
                                            if (_context2.prev = 10, _context2.t0 = _context2.catch(3), 404 === _context2.t0.status) return _context2.abrupt("return", null);
                                            _context2.next = 14;
                                            break;
                                        case 14:
                                            throw _context2.t0;
                                        case 15:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this, [
                                    [3, 10]
                                ])
                            }))
                        }
                    }, {
                        key: "_createDocument",
                        value: function(id, data) {
                            var requestBody = {
                                unique_name: id,
                                data: data
                            };
                            return this.services.network.post(this.services.config.documentsUri, requestBody).then(function(response) {
                                return response.body
                            })
                        }
                    }, {
                        key: "_getDocument",
                        value: function(id) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                return _regenerator2.default.wrap(function(_context3) {
                                    for (;;) switch (_context3.prev = _context3.next) {
                                        case 0:
                                            return _context3.abrupt("return", this.readRootFromSessionCache(syncdocument_1.SyncDocument.type, id) || this._get(this.services.config.documentsUri, id));
                                        case 1:
                                        case "end":
                                            return _context3.stop()
                                    }
                                }, _callee3, this)
                            }))
                        }
                    }, {
                        key: "_createList",
                        value: function(id, purpose, context) {
                            var payload = function(name, purpose, context, data) {
                                return {
                                    unique_name: name,
                                    purpose: purpose,
                                    context: context,
                                    data: data
                                }
                            }(id, purpose, context);
                            return this.services.network.post(this.services.config.listsUri, payload).then(function(response) {
                                return response.body
                            })
                        }
                    }, {
                        key: "_getList",
                        value: function(id) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                return _regenerator2.default.wrap(function(_context4) {
                                    for (;;) switch (_context4.prev = _context4.next) {
                                        case 0:
                                            return _context4.abrupt("return", this.readRootFromSessionCache(synclist_1.SyncList.type, id) || this._get(this.services.config.listsUri, id));
                                        case 1:
                                        case "end":
                                            return _context4.stop()
                                    }
                                }, _callee4, this)
                            }))
                        }
                    }, {
                        key: "_createMap",
                        value: function(id) {
                            var requestBody = {
                                unique_name: id
                            };
                            return this.services.network.post(this.services.config.mapsUri, requestBody).then(function(response) {
                                return response.body
                            })
                        }
                    }, {
                        key: "_getMap",
                        value: function(id) {
                            var optimistic = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                return _regenerator2.default.wrap(function(_context5) {
                                    for (;;) switch (_context5.prev = _context5.next) {
                                        case 0:
                                            return _context5.abrupt("return", this.readRootFromSessionCache(syncmap_1.SyncMap.type, id) || this._get(this.services.config.mapsUri, id, optimistic));
                                        case 1:
                                        case "end":
                                            return _context5.stop()
                                    }
                                }, _callee5, this)
                            }))
                        }
                    }, {
                        key: "_getTopic",
                        value: function(id) {
                            var optimistic = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                return _regenerator2.default.wrap(function(_context6) {
                                    for (;;) switch (_context6.prev = _context6.next) {
                                        case 0:
                                            return _context6.abrupt("return", this.readRootFromSessionCache(synctopic_1.SyncTopic.type, id) || this._get(this.services.config.topicsUri, id, optimistic));
                                        case 1:
                                        case "end":
                                            return _context6.stop()
                                    }
                                }, _callee6, this)
                            }))
                        }
                    }, {
                        key: "_createTopic",
                        value: function(id) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                var requestBody, response, topicDescriptor;
                                return _regenerator2.default.wrap(function(_context7) {
                                    for (;;) switch (_context7.prev = _context7.next) {
                                        case 0:
                                            return requestBody = {
                                                unique_name: id
                                            }, _context7.next = 3, this.services.network.post(this.services.config.topicsUri, requestBody);
                                        case 3:
                                            return response = _context7.sent, topicDescriptor = response.body, _context7.abrupt("return", topicDescriptor);
                                        case 6:
                                        case "end":
                                            return _context7.stop()
                                    }
                                }, _callee7, this)
                            }))
                        }
                    }, {
                        key: "getCached",
                        value: function(id, type) {
                            return id && this.entities.get(id, type) || null
                        }
                    }, {
                        key: "removeFromCacheAndSession",
                        value: function(type, sid, uniqueName) {
                            this.entities.remove(sid), this.services.config.sessionStorageEnabled && this.services.storage.remove(type, sid, uniqueName)
                        }
                    }, {
                        key: "document",
                        value: function(arg) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {
                                var _decompose, id, data, mode, docFromInMemoryCache, docDescriptor, syncDocument, _this2 = this;
                                return _regenerator2.default.wrap(function(_context8) {
                                    for (;;) switch (_context8.prev = _context8.next) {
                                        case 0:
                                            return _context8.next = 2, this.ensureReady();
                                        case 2:
                                            if (_decompose = decompose(arg), id = _decompose.id, data = _decompose.data, mode = _decompose.mode, docFromInMemoryCache = this.getCached(id, "document")) return _context8.abrupt("return", docFromInMemoryCache);
                                            _context8.next = 8;
                                            break;
                                        case 8:
                                            return _context8.next = 10, this._getDocument(id);
                                        case 10:
                                            if (docDescriptor = _context8.sent) {
                                                _context8.next = 29;
                                                break
                                            }
                                            if ("open" === mode) throw new syncerror_1.default("Not found", 404);
                                            _context8.next = 16;
                                            break;
                                        case 16:
                                            return _context8.prev = 16, _context8.next = 19, this._createDocument(id, data);
                                        case 19:
                                            docDescriptor = _context8.sent, _context8.next = 29;
                                            break;
                                        case 22:
                                            if (_context8.prev = 22, _context8.t0 = _context8.catch(16), 409 === _context8.t0.status) return _context8.abrupt("return", this.document(arg));
                                            _context8.next = 28;
                                            break;
                                        case 28:
                                            throw _context8.t0;
                                        case 29:
                                            return this.storeRootInSessionCache(syncdocument_1.SyncDocument.type, id, docDescriptor), syncDocument = new syncdocument_1.SyncDocument(this.services, docDescriptor, function(type, sid, uniqueName) {
                                                return _this2.removeFromCacheAndSession(type, sid, uniqueName)
                                            }), syncDocument = this.entities.store(syncDocument), _context8.abrupt("return", subscribe(syncDocument));
                                        case 33:
                                        case "end":
                                            return _context8.stop()
                                    }
                                }, _callee8, this, [
                                    [16, 22]
                                ])
                            }))
                        }
                    }, {
                        key: "map",
                        value: function(arg) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {
                                var _decompose2, id, mode, optimistic, mapFromInMemoryCache, mapDescriptor, syncMap, _this3 = this;
                                return _regenerator2.default.wrap(function(_context9) {
                                    for (;;) switch (_context9.prev = _context9.next) {
                                        case 0:
                                            return _context9.next = 2, this.ensureReady();
                                        case 2:
                                            if (_decompose2 = decompose(arg), id = _decompose2.id, mode = _decompose2.mode, optimistic = _decompose2.optimistic, mapFromInMemoryCache = this.getCached(id, "map")) return _context9.abrupt("return", mapFromInMemoryCache);
                                            _context9.next = 8;
                                            break;
                                        case 8:
                                            return _context9.next = 10, this._getMap(id, optimistic);
                                        case 10:
                                            if (mapDescriptor = _context9.sent) {
                                                _context9.next = 29;
                                                break
                                            }
                                            if ("open" === mode) throw new syncerror_1.default("Not found", 404);
                                            _context9.next = 16;
                                            break;
                                        case 16:
                                            return _context9.prev = 16, _context9.next = 19, this._createMap(id);
                                        case 19:
                                            mapDescriptor = _context9.sent, _context9.next = 29;
                                            break;
                                        case 22:
                                            if (_context9.prev = 22, _context9.t0 = _context9.catch(16), 409 === _context9.t0.status) return _context9.abrupt("return", this.map(arg));
                                            _context9.next = 28;
                                            break;
                                        case 28:
                                            throw _context9.t0;
                                        case 29:
                                            return this.storeRootInSessionCache(syncmap_1.SyncMap.type, id, mapDescriptor), syncMap = new syncmap_1.SyncMap(this.services, mapDescriptor, function(type, sid, uniqueName) {
                                                return _this3.removeFromCacheAndSession(type, sid, uniqueName)
                                            }), syncMap = this.entities.store(syncMap), _context9.abrupt("return", subscribe(syncMap));
                                        case 33:
                                        case "end":
                                            return _context9.stop()
                                    }
                                }, _callee9, this, [
                                    [16, 22]
                                ])
                            }))
                        }
                    }, {
                        key: "list",
                        value: function(arg) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {
                                var _decompose3, id, purpose, context, mode, listFromInMemoryCache, listDescriptor, syncList, _this4 = this;
                                return _regenerator2.default.wrap(function(_context10) {
                                    for (;;) switch (_context10.prev = _context10.next) {
                                        case 0:
                                            return _context10.next = 2, this.ensureReady();
                                        case 2:
                                            if (_decompose3 = decompose(arg), id = _decompose3.id, purpose = _decompose3.purpose, context = _decompose3.context, mode = _decompose3.mode, listFromInMemoryCache = this.getCached(id, "list")) return _context10.abrupt("return", listFromInMemoryCache);
                                            _context10.next = 8;
                                            break;
                                        case 8:
                                            return _context10.next = 10, this._getList(id);
                                        case 10:
                                            if (listDescriptor = _context10.sent) {
                                                _context10.next = 29;
                                                break
                                            }
                                            if ("open" === mode) throw new syncerror_1.default("Not found", 404);
                                            _context10.next = 16;
                                            break;
                                        case 16:
                                            return _context10.prev = 16, _context10.next = 19, this._createList(id, purpose, context);
                                        case 19:
                                            listDescriptor = _context10.sent, _context10.next = 29;
                                            break;
                                        case 22:
                                            if (_context10.prev = 22, _context10.t0 = _context10.catch(16), 409 === _context10.t0.status) return _context10.abrupt("return", this.list(arg));
                                            _context10.next = 28;
                                            break;
                                        case 28:
                                            throw _context10.t0;
                                        case 29:
                                            return this.storeRootInSessionCache(synclist_1.SyncList.type, id, listDescriptor), syncList = new synclist_1.SyncList(this.services, listDescriptor, function(type, sid, uniqueName) {
                                                return _this4.removeFromCacheAndSession(type, sid, uniqueName)
                                            }), syncList = this.entities.store(syncList), _context10.abrupt("return", subscribe(syncList));
                                        case 33:
                                        case "end":
                                            return _context10.stop()
                                    }
                                }, _callee10, this, [
                                    [16, 22]
                                ])
                            }))
                        }
                    }, {
                        key: "topic",
                        value: function(arg) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {
                                var _decompose4, id, mode, optimistic, topicFromInMemoryCache, topicDescriptor, topicRemovalHandler, syncTopic, _this5 = this;
                                return _regenerator2.default.wrap(function(_context11) {
                                    for (;;) switch (_context11.prev = _context11.next) {
                                        case 0:
                                            return _context11.next = 2, this.ensureReady();
                                        case 2:
                                            if (_decompose4 = decompose(arg), id = _decompose4.id, mode = _decompose4.mode, optimistic = _decompose4.optimistic, topicFromInMemoryCache = this.getCached(id, synctopic_1.SyncTopic.type)) return _context11.abrupt("return", topicFromInMemoryCache);
                                            _context11.next = 8;
                                            break;
                                        case 8:
                                            return _context11.next = 10, this._getTopic(id, optimistic);
                                        case 10:
                                            if (topicDescriptor = _context11.sent) {
                                                _context11.next = 29;
                                                break
                                            }
                                            if ("open" === mode) throw new syncerror_1.default("Not found", 404);
                                            _context11.next = 16;
                                            break;
                                        case 16:
                                            return _context11.prev = 16, _context11.next = 19, this._createTopic(id);
                                        case 19:
                                            topicDescriptor = _context11.sent, _context11.next = 29;
                                            break;
                                        case 22:
                                            if (_context11.prev = 22, _context11.t0 = _context11.catch(16), 409 === _context11.t0.status) return _context11.abrupt("return", this.topic(arg));
                                            _context11.next = 28;
                                            break;
                                        case 28:
                                            throw _context11.t0;
                                        case 29:
                                            return this.storeRootInSessionCache(synctopic_1.SyncTopic.type, id, topicDescriptor), topicRemovalHandler = function(type, sid, uniqueName) {
                                                return _this5.removeFromCacheAndSession(type, sid, uniqueName)
                                            }, syncTopic = new synctopic_1.SyncTopic(this.services, topicDescriptor, topicRemovalHandler), syncTopic = this.entities.store(syncTopic), _context11.abrupt("return", subscribe(syncTopic));
                                        case 34:
                                        case "end":
                                            return _context11.stop()
                                    }
                                }, _callee11, this, [
                                    [16, 22]
                                ])
                            }))
                        }
                    }, {
                        key: "shutdown",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {
                                return _regenerator2.default.wrap(function(_context12) {
                                    for (;;) switch (_context12.prev = _context12.next) {
                                        case 0:
                                            return _context12.next = 2, this.services.subscriptions.shutdown();
                                        case 2:
                                            return _context12.next = 4, this.services.twilsock.disconnect();
                                        case 4:
                                        case "end":
                                            return _context12.stop()
                                    }
                                }, _callee12, this)
                            }))
                        }
                    }, {
                        key: "updateToken",
                        value: function(fpaToken) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {
                                var response;
                                return _regenerator2.default.wrap(function(_context13) {
                                    for (;;) switch (_context13.prev = _context13.next) {
                                        case 0:
                                            return _context13.next = 2, this.services.emsClient.setToken(fpaToken);
                                        case 2:
                                            return response = _context13.sent, this.services.config.updateToken(response.token), _context13.next = 6, _promise2.default.all([this.services.notifications.updateToken(fpaToken), this.services.twilsock.updateToken(fpaToken)]);
                                        case 6:
                                            this.fpaToken = fpaToken;
                                        case 7:
                                        case "end":
                                            return _context13.stop()
                                    }
                                }, _callee13, this)
                            }))
                        }
                    }, {
                        key: "connectionState",
                        get: function() {
                            return this.services.notifications.connectionState
                        }
                    }], [{
                        key: "version",
                        get: function() {
                            return SDK_VERSION
                        }
                    }]), SyncClient
                }(events_1.EventEmitter);
                exports.SyncClient = SyncClient, exports.Client = SyncClient, exports.default = SyncClient
            }, {
                "../package.json": 271,
                "./clientInfo": 249,
                "./configuration": 250,
                "./entitiesCache": 251,
                "./logger": 255,
                "./network": 257,
                "./router": 260,
                "./services/storage": 261,
                "./subscriptions": 262,
                "./syncdocument": 264,
                "./syncerror": 265,
                "./synclist": 266,
                "./syncmap": 267,
                "./topics/synctopic": 268,
                "./utils": 269,
                "./utils/deferred": 270,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                events: 214,
                "twilio-ems-client": 229,
                "twilio-notifications": 242,
                "twilio-transport": 273,
                twilsock: 276,
                xxhashjs: 288
            }],
            249: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _classCallCheck2 = _dereq_("babel-runtime/helpers/classCallCheck"),
                    _classCallCheck3 = (obj = _classCallCheck2) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var platform = _dereq_("platform"),
                    ClientInfo = function ClientInfo(version) {
                        (0, _classCallCheck3.default)(this, ClientInfo), this.sdk = "js", this.sdkVer = version, this.os = platform.os.family, this.osVer = platform.os.version, this.pl = platform.name, this.plVer = platform.version
                    };
                exports.ClientInfo = ClientInfo, exports.default = ClientInfo
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                platform: 221
            }],
            250: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Configuration = function() {
                    function Configuration(token, options) {
                        (0, _classCallCheck3.default)(this, Configuration);
                        var container, key, defaultValue, baseUri = (options = (options = options || {}).Sync || options.DataSync || {}).cdsUri || "https://cds.twilio.com";
                        this._token = token, this.settings = {
                            subscriptionsUri: baseUri + "/v4/Subscriptions",
                            documentsUri: baseUri + "/v3/Documents",
                            listsUri: baseUri + "/v3/Lists",
                            mapsUri: baseUri + "/v3/Maps",
                            topicsUri: baseUri + "/v3/Topics",
                            sessionStorageEnabled: (container = options, key = "enableSessionStorage", defaultValue = !0, container && void 0 !== container[key] ? container[key] : defaultValue)
                        }
                    }
                    return (0, _createClass3.default)(Configuration, [{
                        key: "updateToken",
                        value: function(token) {
                            this._token = token
                        }
                    }, {
                        key: "token",
                        get: function() {
                            return this._token
                        }
                    }, {
                        key: "subscriptionsUri",
                        get: function() {
                            return this.settings.subscriptionsUri
                        }
                    }, {
                        key: "documentsUri",
                        get: function() {
                            return this.settings.documentsUri
                        }
                    }, {
                        key: "listsUri",
                        get: function() {
                            return this.settings.listsUri
                        }
                    }, {
                        key: "mapsUri",
                        get: function() {
                            return this.settings.mapsUri
                        }
                    }, {
                        key: "topicsUri",
                        get: function() {
                            return this.settings.topicsUri
                        }
                    }, {
                        key: "backoffConfig",
                        get: function() {
                            return this.settings.backoffConfig || {}
                        }
                    }, {
                        key: "sessionStorageEnabled",
                        get: function() {
                            return this.settings.sessionStorageEnabled
                        }
                    }]), Configuration
                }();
                exports.Configuration = Configuration
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            251: [function(_dereq_, module, exports) {
                "use strict";
                var _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var EntitiesCache = function() {
                    function EntitiesCache() {
                        (0, _classCallCheck3.default)(this, EntitiesCache), this.names = new _map2.default, this.entities = new _map2.default
                    }
                    return (0, _createClass3.default)(EntitiesCache, [{
                        key: "store",
                        value: function(entity) {
                            var stored = this.entities.get(entity.sid);
                            return stored || (this.entities.set(entity.sid, entity), entity.uniqueName && this.names.set(entity.type + "::" + entity.uniqueName, entity.sid), entity)
                        }
                    }, {
                        key: "getResolved",
                        value: function(id, type) {
                            var resolvedSid = this.names.get(type + "::" + id);
                            return resolvedSid ? this.entities.get(resolvedSid) : null
                        }
                    }, {
                        key: "get",
                        value: function(id, type) {
                            return this.entities.get(id) || this.getResolved(id, type) || null
                        }
                    }, {
                        key: "remove",
                        value: function(sid) {
                            var cached = this.entities.get(sid);
                            cached && (this.entities.delete(sid), cached.uniqueName && this.names.delete(cached.type + "::" + cached.uniqueName))
                        }
                    }]), EntitiesCache
                }();
                exports.EntitiesCache = EntitiesCache
            }, {
                "babel-runtime/core-js/map": 35,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            252: [function(_dereq_, module, exports) {
                "use strict";
                var _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SyncEntity = function(_events_1$EventEmitte) {
                    function SyncEntity(services, removalHandler) {
                        (0, _classCallCheck3.default)(this, SyncEntity);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncEntity.__proto__ || (0, _getPrototypeOf2.default)(SyncEntity)).call(this));
                        return _this.services = services, _this.removalHandler = removalHandler, _this.subscriptionState = "none", _this
                    }
                    return (0, _inherits3.default)(SyncEntity, _events_1$EventEmitte), (0, _createClass3.default)(SyncEntity, [{
                        key: "_advanceLastEventId",
                        value: function(eventId, revision) {}
                    }, {
                        key: "reportFailure",
                        value: function(err) {
                            404 === err.status ? this.onRemoved(!1) : this.emit("failure", err)
                        }
                    }, {
                        key: "_subscribe",
                        value: function() {
                            return this.services.router.subscribe(this.sid, this), this
                        }
                    }, {
                        key: "_unsubscribe",
                        value: function() {
                            return this.services.router.unsubscribe(this.sid, this), this
                        }
                    }, {
                        key: "_setSubscriptionState",
                        value: function(newState) {
                            this.subscriptionState = newState, this.emit("_subscriptionStateChanged", newState)
                        }
                    }, {
                        key: "close",
                        value: function() {
                            this._unsubscribe(), this.removalHandler(this.type, this.sid, this.uniqueName)
                        }
                    }]), SyncEntity
                }(_dereq_("events").EventEmitter);
                exports.SyncEntity = SyncEntity, exports.default = SyncEntity
            }, {
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                events: 214
            }],
            253: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var client_1 = _dereq_("./client");
                exports.SyncClient = client_1.SyncClient;
                var syncdocument_1 = _dereq_("./syncdocument");
                exports.SyncDocument = syncdocument_1.SyncDocument;
                var synclist_1 = _dereq_("./synclist");
                exports.SyncList = synclist_1.SyncList;
                var listitem_1 = _dereq_("./listitem");
                exports.SyncListItem = listitem_1.ListItem;
                var syncmap_1 = _dereq_("./syncmap");
                exports.SyncMap = syncmap_1.SyncMap;
                var mapitem_1 = _dereq_("./mapitem");
                exports.SyncMapItem = mapitem_1.MapItem, exports.default = client_1.SyncClient, module.exports = client_1.SyncClient, module.exports.SyncClient = client_1.SyncClient
            }, {
                "./client": 248,
                "./listitem": 254,
                "./mapitem": 256,
                "./syncdocument": 264,
                "./synclist": 266,
                "./syncmap": 267
            }],
            254: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var ListItem = function() {
                    function ListItem(data) {
                        (0, _classCallCheck3.default)(this, ListItem), this.data = data
                    }
                    return (0, _createClass3.default)(ListItem, [{
                        key: "update",
                        value: function(eventId, revision, value) {
                            return this.data.lastEventId = eventId, this.data.revision = revision, this.data.value = value, this
                        }
                    }, {
                        key: "uri",
                        get: function() {
                            return this.data.uri
                        }
                    }, {
                        key: "revision",
                        get: function() {
                            return this.data.revision
                        }
                    }, {
                        key: "lastEventId",
                        get: function() {
                            return this.data.lastEventId
                        }
                    }, {
                        key: "index",
                        get: function() {
                            return this.data.index
                        }
                    }, {
                        key: "value",
                        get: function() {
                            return this.data.value
                        }
                    }]), ListItem
                }();
                exports.ListItem = ListItem, exports.default = ListItem
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            255: [function(_dereq_, module, exports) {
                "use strict";
                var obj, _from = _dereq_("babel-runtime/core-js/array/from"),
                    _from2 = (obj = _from) && obj.__esModule ? obj : {
                        default: obj
                    };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var log = _dereq_("loglevel");

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                exports.default = {
                    setLevel: function(level) {
                        log.setLevel(level)
                    },
                    trace: function() {
                        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];
                        log.trace.apply(null, prepareLine("Sync T:", args))
                    },
                    debug: function() {
                        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];
                        log.debug.apply(null, prepareLine("Sync D:", args))
                    },
                    info: function() {
                        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];
                        log.info.apply(null, prepareLine("Sync I:", args))
                    },
                    warn: function() {
                        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];
                        log.warn.apply(null, prepareLine("Sync W:", args))
                    },
                    error: function() {
                        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];
                        log.error.apply(null, prepareLine("Sync E:", args))
                    }
                }
            }, {
                "babel-runtime/core-js/array/from": 31,
                loglevel: 219
            }],
            256: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var MapItem = function() {
                    function MapItem(descriptor) {
                        (0, _classCallCheck3.default)(this, MapItem), this.descriptor = descriptor
                    }
                    return (0, _createClass3.default)(MapItem, [{
                        key: "update",
                        value: function(eventId, revision, value) {
                            return this.descriptor.last_event_id = eventId, this.descriptor.revision = revision, this.descriptor.data = value, this
                        }
                    }, {
                        key: "uri",
                        get: function() {
                            return this.descriptor.url
                        }
                    }, {
                        key: "revision",
                        get: function() {
                            return this.descriptor.revision
                        }
                    }, {
                        key: "lastEventId",
                        get: function() {
                            return this.descriptor.last_event_id
                        }
                    }, {
                        key: "key",
                        get: function() {
                            return this.descriptor.key
                        }
                    }, {
                        key: "value",
                        get: function() {
                            return this.descriptor.data
                        }
                    }]), MapItem
                }();
                exports.MapItem = MapItem, exports.default = MapItem
            }, {
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            257: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var uuid = _dereq_("uuid"),
                    logger_1 = _dereq_("./logger"),
                    syncerror_1 = _dereq_("./syncerror"),
                    syncNetworkError_1 = _dereq_("./syncNetworkError"),
                    operation_retrier_1 = _dereq_("operation-retrier"),
                    twilio_transport_1 = _dereq_("twilio-transport");

                function messageFromErrorBody(trasportError) {
                    if (trasportError.body && trasportError.body.message) return trasportError.body.message;
                    switch (trasportError.status) {
                        case 429:
                            return "Throttled by server";
                        case 404:
                            return "Not found from server";
                        default:
                            return "Error from server"
                    }
                }

                function codeFromErrorBody(trasportError) {
                    return trasportError.body ? trasportError.body.code : 0
                }

                function mapTransportError(transportError) {
                    return 409 === transportError.status ? new syncNetworkError_1.SyncNetworkError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError), transportError.body) : transportError.status ? new syncerror_1.SyncError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError)) : transportError instanceof twilio_transport_1.TwilsockUnavailableError ? transportError : new syncerror_1.SyncError(transportError.message, 0, 0)
                }
                var Network = function() {
                    function Network(productId, clientInfo, config, transport) {
                        (0, _classCallCheck3.default)(this, Network), this.productId = productId, this.clientInfo = clientInfo, this.config = config, this.transport = transport
                    }
                    return (0, _createClass3.default)(Network, [{
                        key: "createHeaders",
                        value: function() {
                            return {
                                "Content-Type": "application/json",
                                "Twilio-Sync-Client-Info": (0, _stringify2.default)(this.clientInfo),
                                "Twilio-Request-Id": "RQ" + uuid.v4().replace(/-/g, ""),
                                "X-Twilio-Product-Id": this.productId,
                                "X-Twilio-Token": this.config.token
                            }
                        }
                    }, {
                        key: "backoffConfig",
                        value: function() {
                            return (0, _extends3.default)({
                                min: 4e3,
                                max: 6e4,
                                maxAttemptsTime: 9e4,
                                randomness: .2
                            }, this.config.backoffConfig)
                        }
                    }, {
                        key: "executeWithRetry",
                        value: function(request) {
                            var _this = this,
                                retryWhenThrottled = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1];
                            return new _promise2.default(function(resolve, reject) {
                                var codesToRetryOn = [502, 503, 504];
                                retryWhenThrottled && codesToRetryOn.push(429);
                                var retrier = new operation_retrier_1.default(_this.backoffConfig());
                                retrier.on("attempt", function() {
                                    request().then(function(result) {
                                        return retrier.succeeded(result)
                                    }).catch(function(err) {
                                        if (-1 !== codesToRetryOn.indexOf(err.status)) {
                                            var delayOverride = parseInt(err.headers ? err.headers["Retry-After"] : null);
                                            retrier.failed(mapTransportError(err), isNaN(delayOverride) ? null : 1e3 * delayOverride)
                                        } else "Twilsock disconnected" === err.message ? retrier.failed(mapTransportError(err)) : (retrier.removeAllListeners(), retrier.cancel(), reject(mapTransportError(err)))
                                    })
                                }), retrier.on("succeeded", function(result) {
                                    resolve(result)
                                }), retrier.on("cancelled", function(err) {
                                    return reject(mapTransportError(err))
                                }), retrier.on("failed", function(err) {
                                    return reject(mapTransportError(err))
                                }), retrier.start()
                            })
                        }
                    }, {
                        key: "get",
                        value: function(uri) {
                            var _this2 = this,
                                headers = this.createHeaders();
                            return logger_1.default.debug("GET", uri, "ID:", headers["Twilio-Request-Id"]), this.executeWithRetry(function() {
                                return _this2.transport.get(uri, headers)
                            }, !0)
                        }
                    }, {
                        key: "post",
                        value: function(uri, body, revision, twilsockOnly) {
                            var _this3 = this,
                                headers = this.createHeaders();
                            return null != revision && (headers["If-Match"] = revision), logger_1.default.debug("POST", uri, "ID:", headers["Twilio-Request-Id"]), this.executeWithRetry(function() {
                                return _this3.transport.post(uri, headers, body, twilsockOnly)
                            }, !1)
                        }
                    }, {
                        key: "put",
                        value: function(uri, body, revision) {
                            var _this4 = this,
                                headers = this.createHeaders();
                            return null != revision && (headers["If-Match"] = revision), logger_1.default.debug("PUT", uri, "ID:", headers["Twilio-Request-Id"]), this.executeWithRetry(function() {
                                return _this4.transport.put(uri, headers, body)
                            }, !1)
                        }
                    }, {
                        key: "delete",
                        value: function(uri) {
                            var _this5 = this,
                                headers = this.createHeaders();
                            return logger_1.default.debug("DELETE", uri, "ID:", headers["Twilio-Request-Id"]), this.executeWithRetry(function() {
                                return _this5.transport.delete(uri, headers)
                            }, !1)
                        }
                    }]), Network
                }();
                exports.Network = Network, exports.default = Network
            }, {
                "./logger": 255,
                "./syncNetworkError": 263,
                "./syncerror": 265,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "operation-retrier": 220,
                "twilio-transport": 273,
                uuid: 283
            }],
            258: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Paginator = function() {
                    function Paginator(items, source, prevToken, nextToken) {
                        (0, _classCallCheck3.default)(this, Paginator), this.prevToken = prevToken, this.nextToken = nextToken, this.items = items, this.source = source
                    }
                    return (0, _createClass3.default)(Paginator, [{
                        key: "nextPage",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            if (this.hasNextPage) {
                                                _context.next = 2;
                                                break
                                            }
                                            throw new Error("No next page");
                                        case 2:
                                            return _context.abrupt("return", this.source(this.nextToken));
                                        case 3:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "prevPage",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            if (this.hasPrevPage) {
                                                _context2.next = 2;
                                                break
                                            }
                                            throw new Error("No previous page");
                                        case 2:
                                            return _context2.abrupt("return", this.source(this.prevToken));
                                        case 3:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "hasNextPage",
                        get: function() {
                            return !!this.nextToken
                        }
                    }, {
                        key: "hasPrevPage",
                        get: function() {
                            return !!this.prevToken
                        }
                    }]), Paginator
                }();
                exports.Paginator = Paginator, exports.default = Paginator
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            259: [function(_dereq_, module, exports) {
                "use strict";
                var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var RetryingQueue = function() {
                    function RetryingQueue() {
                        (0, _classCallCheck3.default)(this, RetryingQueue), this.queue = new Array, this.isActive = !1
                    }
                    return (0, _createClass3.default)(RetryingQueue, [{
                        key: "wakeupQueue",
                        value: function() {
                            var _this = this;
                            !this.isActive && 0 < this.queue.length && (this.isActive = !0, setTimeout(function() {
                                return _this.executeTask(_this.queue[0])
                            }, 0))
                        }
                    }, {
                        key: "pickNext",
                        value: function() {
                            var _this2 = this;
                            this.queue.shift(), 0 !== this.queue.length ? setTimeout(function() {
                                return _this2.executeTask(_this2.queue[0])
                            }, 0) : this.isActive = !1
                        }
                    }, {
                        key: "pickSame",
                        value: function(arg) {
                            var _this3 = this;
                            this.queue[0].arg = arg, setTimeout(function() {
                                return _this3.executeTask(_this3.queue[0])
                            }, 0)
                        }
                    }, {
                        key: "executeTask",
                        value: function(task) {
                            var _this4 = this;
                            task.task(task.context, task.arg).then(function(result) {
                                _this4.pickNext(), task.resolve(result)
                            }).catch(function(error) {
                                try {
                                    if (!task.handle) throw error;
                                    task.handle(error).then(function(result) {
                                        return _this4.pickSame(result)
                                    }).catch(task.reject)
                                } catch (e) {
                                    task.reject(error)
                                }
                            })
                        }
                    }, {
                        key: "add",
                        value: function(task, context, arg, errorHandler) {
                            var _this5 = this;
                            return new _promise2.default(function(resolve, reject) {
                                _this5.queue.push({
                                    task: task,
                                    context: context,
                                    arg: arg,
                                    handle: errorHandler,
                                    resolve: resolve,
                                    reject: reject
                                }), _this5.wakeupQueue()
                            })
                        }
                    }]), RetryingQueue
                }();
                exports.RetryingQueue = RetryingQueue, (0, _freeze2.default)(RetryingQueue), exports.default = RetryingQueue
            }, {
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            260: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("./logger"),
                    Router = function() {
                        function Router(params) {
                            var _this = this;
                            (0, _classCallCheck3.default)(this, Router), this.config = params.config, this.subscriptions = params.subscriptions, this.notifications = params.notifications, this.notifications.subscribe("twilio.sync.event"), this.notifications.subscribe("com.twilio.rtd.cds.document"), this.notifications.subscribe("com.twilio.rtd.cds.list"), this.notifications.subscribe("com.twilio.rtd.cds.map"), this.notifications.on("message", function(messageType, payload) {
                                return _this.onMessage(messageType, payload)
                            }), this.notifications.on("transportReady", function(isConnected) {
                                return _this.onConnectionStateChanged(isConnected)
                            })
                        }
                        return (0, _createClass3.default)(Router, [{
                            key: "onMessage",
                            value: function(type, message) {
                                switch (logger_1.default.trace("Notification type:", type, "content:", message), type) {
                                    case "com.twilio.rtd.cds.document":
                                    case "com.twilio.rtd.cds.list":
                                    case "com.twilio.rtd.cds.map":
                                        this.subscriptions.acceptMessage(message, !1);
                                        break;
                                    case "twilio.sync.event":
                                        this.subscriptions.acceptMessage(message, !0)
                                }
                            }
                        }, {
                            key: "subscribe",
                            value: function(sid, entity) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.subscriptions.add(sid, entity);
                                            case 2:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "unsubscribe",
                            value: function(sid, entity) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.next = 2, this.subscriptions.remove(sid);
                                            case 2:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "onConnectionStateChanged",
                            value: function(isConnected) {
                                this.subscriptions.onConnectionStateChanged(isConnected)
                            }
                        }]), Router
                    }();
                exports.Router = Router, exports.default = Router
            }, {
                "./logger": 255,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/regenerator": 57
            }],
            261: [function(_dereq_, module, exports) {
                "use strict";
                var _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SessionStorage = function() {
                    function SessionStorage(config, storage) {
                        (0, _classCallCheck3.default)(this, SessionStorage), this.config = config, this.storageId = null;
                        try {
                            this.storage = storage || sessionStorage
                        } catch (e) {}
                    }
                    return (0, _createClass3.default)(SessionStorage, [{
                        key: "storageKey",
                        value: function(type, key) {
                            return this.storageId + "::" + type + "::" + key
                        }
                    }, {
                        key: "updateStorageId",
                        value: function(storageId) {
                            this.storageId = storageId
                        }
                    }, {
                        key: "store",
                        value: function(type, id, value) {
                            return this.isReady ? this._store(this.storageKey(type, id), value) : null
                        }
                    }, {
                        key: "read",
                        value: function(type, id) {
                            return this.isReady ? this._read(this.storageKey(type, id)) : null
                        }
                    }, {
                        key: "remove",
                        value: function(type, sid, uniqueName) {
                            if (!this.isReady) return null;
                            try {
                                this.storage.removeItem(this.storageKey(type, sid)), uniqueName && this.storage.removeItem(this.storageKey(type, uniqueName))
                            } catch (e) {}
                        }
                    }, {
                        key: "update",
                        value: function(type, sid, uniqueName, patch) {
                            if (!this.isReady) return null;
                            this._apply(this.storageKey(type, sid), patch), uniqueName && this._apply(this.storageKey(type, uniqueName), patch)
                        }
                    }, {
                        key: "_store",
                        value: function(key, value) {
                            try {
                                this.storage.setItem(key, (0, _stringify2.default)(value))
                            } catch (e) {}
                        }
                    }, {
                        key: "_read",
                        value: function(key) {
                            try {
                                var storedData = this.storage.getItem(key);
                                if (storedData) return JSON.parse(storedData)
                            } catch (e) {}
                            return null
                        }
                    }, {
                        key: "_apply",
                        value: function(key, patch) {
                            var value = this._read(key);
                            if (!value) return !1;
                            this._store(key, (0, _extends3.default)(value, patch))
                        }
                    }, {
                        key: "isReady",
                        get: function() {
                            return this.config.sessionStorageEnabled && !!this.storageId
                        }
                    }]), SessionStorage
                }();
                exports.SessionStorage = SessionStorage
            }, {
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52
            }],
            262: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _slicedToArray3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/slicedToArray")),
                    _getIterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/get-iterator")),
                    _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Backoff = _dereq_("backoff"),
                    logger_1 = _dereq_("./logger"),
                    syncerror_1 = _dereq_("./syncerror"),
                    twilio_transport_1 = _dereq_("twilio-transport"),
                    SubscribedEntity = function() {
                        function SubscribedEntity(entity) {
                            (0, _classCallCheck3.default)(this, SubscribedEntity), this.localObject = entity, this.pendingCorrelationId = null, this.established = !1, this.retryCount = 0
                        }
                        return (0, _createClass3.default)(SubscribedEntity, [{
                            key: "update",
                            value: function(event, isStrictlyOrderd) {
                                this.localObject._update(event, isStrictlyOrderd)
                            }
                        }, {
                            key: "reset",
                            value: function() {
                                this.pendingCorrelationId = null, this.retryCount = 0, this.established = !1, this.localObject._setSubscriptionState("none")
                            }
                        }, {
                            key: "markAsFailed",
                            value: function(message) {
                                this.rejectedWithError = message.error, this.pendingCorrelationId = null, this.localObject.reportFailure(new syncerror_1.SyncError("Failed to subscribe on service events: " + message.error.message, message.error.status, message.error.code))
                            }
                        }, {
                            key: "complete",
                            value: function(eventId) {
                                this.pendingCorrelationId = null, this.established = !0, this.localObject._advanceLastEventId(eventId)
                            }
                        }, {
                            key: "sid",
                            get: function() {
                                return this.localObject.sid
                            }
                        }, {
                            key: "type",
                            get: function() {
                                return this.localObject.type
                            }
                        }, {
                            key: "lastEventId",
                            get: function() {
                                return this.localObject.lastEventId
                            }
                        }, {
                            key: "isInTransition",
                            get: function() {
                                return null !== this.pendingCorrelationId
                            }
                        }, {
                            key: "isEstablished",
                            get: function() {
                                return this.established
                            }
                        }]), SubscribedEntity
                    }(),
                    Subscriptions = function() {
                        function Subscriptions(services) {
                            var _this = this;
                            (0, _classCallCheck3.default)(this, Subscriptions), this.isConnected = !1, this.maxBatchSize = 100, this.subscriptionTtlTimer = null, this.pendingPokeReason = null, this.services = services, this.subscriptions = new _map2.default, this.persisted = new _map2.default, this.latestPokeResponseArrivalTimestampByCorrelationId = new _map2.default;
                            this.backoff = Backoff.exponential((0, _extends3.default)({
                                randomisationFactor: .2,
                                initialDelay: 100,
                                maxDelay: 12e4
                            }, this.services.config.backoffConfig)), this.backoff.on("ready", function() {
                                var _getSubscriptionUpdat = _this.getSubscriptionUpdateBatch(),
                                    action = _getSubscriptionUpdat.action,
                                    subscriptionRequests = _getSubscriptionUpdat.subscriptions;
                                action ? _this.applyNewSubscriptionUpdateBatch(action, subscriptionRequests) : (_this.backoff.reset(), logger_1.default.info("All subscriptions resolved."))
                            })
                        }
                        return (0, _createClass3.default)(Subscriptions, [{
                            key: "getSubscriptionUpdateBatch",
                            value: function() {
                                function substract(these, those, ignoreCurrentOp, limit) {
                                    var result = [],
                                        _iteratorNormalCompletion = !0,
                                        _didIteratorError = !1,
                                        _iteratorError = void 0;
                                    try {
                                        for (var _step, _iterator = (0, _getIterator3.default)(these); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0) {
                                            var _step$value = (0, _slicedToArray3.default)(_step.value, 2),
                                                thisKey = _step$value[0],
                                                thisValue = _step$value[1];
                                            if (!those.get(thisKey) && (ignoreCurrentOp || !thisValue.isInTransition) && !thisValue.rejectedWithError && (result.push(thisValue), limit && result.length >= limit)) break
                                        }
                                    } catch (err) {
                                        _didIteratorError = !0, _iteratorError = err
                                    } finally {
                                        try {
                                            !_iteratorNormalCompletion && _iterator.return && _iterator.return()
                                        } finally {
                                            if (_didIteratorError) throw _iteratorError
                                        }
                                    }
                                    return result
                                }
                                var listToAdd = substract(this.subscriptions, this.persisted, !1, this.maxBatchSize);
                                if (0 < listToAdd.length) return {
                                    action: "establish",
                                    subscriptions: listToAdd
                                };
                                var listToRemove = substract(this.persisted, this.subscriptions, !0, this.maxBatchSize);
                                return 0 < listToRemove.length ? {
                                    action: "cancel",
                                    subscriptions: listToRemove
                                } : {
                                    action: null,
                                    subscriptions: null
                                }
                            }
                        }, {
                            key: "persist",
                            value: function() {
                                try {
                                    this.backoff.backoff()
                                } catch (e) {}
                            }
                        }, {
                            key: "applyNewSubscriptionUpdateBatch",
                            value: function(action, requests) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var correlationId, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, subscribed, reason, response, newMaxBatchSize, subscriptionTtlInS, isNumeric, estimatedDeliveryInMs, _isNumeric, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, attemptedSubscription, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                if (this.isConnected) {
                                                    _context.next = 4;
                                                    break
                                                }
                                                return logger_1.default.debug("Twilsock connection (required for subscription) not ready; waiting…"), this.backoff.reset(), _context.abrupt("return");
                                            case 4:
                                                for (requests = this.processLocalActions(action, requests), correlationId = (new Date).getTime(), _didIteratorError2 = !(_iteratorNormalCompletion2 = !0), _iteratorError2 = void 0, _context.prev = 9, _iterator2 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = !0) subscribed = _step2.value, this.recordActionAttemptOn(subscribed, action, correlationId);
                                                _context.next = 17;
                                                break;
                                            case 13:
                                                _context.prev = 13, _context.t0 = _context.catch(9), _didIteratorError2 = !0, _iteratorError2 = _context.t0;
                                            case 17:
                                                _context.prev = 17, _context.prev = 18, !_iteratorNormalCompletion2 && _iterator2.return && _iterator2.return();
                                            case 20:
                                                if (_context.prev = 20, _didIteratorError2) throw _iteratorError2;
                                                _context.next = 23;
                                                break;
                                            case 23:
                                                return _context.finish(20);
                                            case 24:
                                                return _context.finish(17);
                                            case 25:
                                                return reason = this.pendingPokeReason, this.pendingPokeReason = null, _context.prev = 27, _context.next = 30, this.request(action, correlationId, reason, requests);
                                            case 30:
                                                response = _context.sent, newMaxBatchSize = response.body.max_batch_size, !isNaN(parseInt(newMaxBatchSize)) && isFinite(newMaxBatchSize) && 0 < newMaxBatchSize && (this.maxBatchSize = newMaxBatchSize), this.subscriptionTtlTimer || (subscriptionTtlInS = response.body.ttl_in_s, isNumeric = !isNaN(parseFloat(subscriptionTtlInS)) && isFinite(subscriptionTtlInS), isNumeric && 0 < subscriptionTtlInS && (this.subscriptionTtlTimer = setTimeout(function() {
                                                    return _this2.onSubscriptionTtlElapsed()
                                                }, 1e3 * subscriptionTtlInS))), "establish" === action && (estimatedDeliveryInMs = response.body.estimated_delivery_in_ms, _isNumeric = !isNaN(parseFloat(estimatedDeliveryInMs)) && isFinite(estimatedDeliveryInMs), _isNumeric && 0 < estimatedDeliveryInMs ? setTimeout(function() {
                                                    return _this2.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests)
                                                }, estimatedDeliveryInMs) : logger_1.default.error("Invalid timeout: " + estimatedDeliveryInMs), requests.filter(function(r) {
                                                    return r.pendingCorrelationId === correlationId
                                                }).forEach(function(r) {
                                                    return r.localObject._setSubscriptionState("response_in_flight")
                                                })), this.backoff.reset(), _context.next = 60;
                                                break;
                                            case 38:
                                                for (_context.prev = 38, _context.t1 = _context.catch(27), _didIteratorError3 = !(_iteratorNormalCompletion3 = !0), _iteratorError3 = void 0, _context.prev = 43, _iterator3 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = !0) attemptedSubscription = _step3.value, this.recordActionFailureOn(attemptedSubscription, action);
                                                _context.next = 51;
                                                break;
                                            case 47:
                                                _context.prev = 47, _context.t2 = _context.catch(43), _didIteratorError3 = !0, _iteratorError3 = _context.t2;
                                            case 51:
                                                _context.prev = 51, _context.prev = 52, !_iteratorNormalCompletion3 && _iterator3.return && _iterator3.return();
                                            case 54:
                                                if (_context.prev = 54, _didIteratorError3) throw _iteratorError3;
                                                _context.next = 57;
                                                break;
                                            case 57:
                                                return _context.finish(54);
                                            case 58:
                                                return _context.finish(51);
                                            case 59:
                                                _context.t1 instanceof twilio_transport_1.TwilsockUnavailableError ? (logger_1.default.debug("Twilsock connection (required for subscription) not ready (c:" + correlationId + "); waiting…"), this.backoff.reset()) : (logger_1.default.debug("Failed an attempt to " + action + " subscriptions (c:" + correlationId + "); retrying", _context.t1), this.persist());
                                            case 60:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this, [
                                        [9, 13, 17, 25],
                                        [18, , 20, 24],
                                        [27, 38],
                                        [43, 47, 51, 59],
                                        [52, , 54, 58]
                                    ])
                                }))
                            }
                        }, {
                            key: "verifyPokeDelivery",
                            value: function(correlationId, estimatedDeliveryInMs, requests) {
                                var _this3 = this,
                                    lastReceived = this.latestPokeResponseArrivalTimestampByCorrelationId.get(correlationId),
                                    silencePeriod = lastReceived ? (new Date).getTime() - lastReceived : estimatedDeliveryInMs;
                                estimatedDeliveryInMs <= silencePeriod ? (requests.filter(function(r) {
                                    return r.pendingCorrelationId === correlationId
                                }).forEach(function(r) {
                                    r.pendingCorrelationId = null, r.retryCount++, _this3.persisted.delete(r.sid)
                                }), this.persist(), this.latestPokeResponseArrivalTimestampByCorrelationId.delete(correlationId)) : setTimeout(function() {
                                    return _this3.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests)
                                }, estimatedDeliveryInMs - silencePeriod)
                            }
                        }, {
                            key: "processLocalActions",
                            value: function(action, requests) {
                                return "cancel" === action ? requests.filter(function(request) {
                                    return !request.rejectedWithError
                                }) : requests
                            }
                        }, {
                            key: "recordActionAttemptOn",
                            value: function(attemptedSubscription, action, correlationId) {
                                if (attemptedSubscription.localObject._setSubscriptionState("request_in_flight"), "establish" === action) this.persisted.set(attemptedSubscription.sid, attemptedSubscription), attemptedSubscription.pendingCorrelationId = correlationId;
                                else {
                                    var persistedSubscription = this.persisted.get(attemptedSubscription.sid);
                                    persistedSubscription && (persistedSubscription.pendingCorrelationId = correlationId)
                                }
                            }
                        }, {
                            key: "recordActionFailureOn",
                            value: function(attemptedSubscription, action) {
                                attemptedSubscription.localObject._setSubscriptionState("none"), attemptedSubscription.pendingCorrelationId = null, "establish" === action && this.persisted.delete(attemptedSubscription.sid)
                            }
                        }, {
                            key: "request",
                            value: function(action, correlationId, reason, objects) {
                                var requests = objects.map(function(object) {
                                        return {
                                            object_sid: object.sid,
                                            object_type: object.type,
                                            last_event_id: "establish" === action ? object.lastEventId : void 0
                                        }
                                    }),
                                    retriedRequests = objects.filter(function(a) {
                                        return 0 < a.retryCount
                                    }).length;
                                logger_1.default.debug("Attempting '" + action + "' request (c:" + correlationId + "):", requests);
                                var requestBody = {
                                    event_protocol_version: 3,
                                    action: action,
                                    correlation_id: correlationId,
                                    retried_requests: retriedRequests,
                                    ttl_in_s: -1,
                                    requests: requests
                                };
                                return "ttl" === reason && (requestBody.reason = reason), this.services.network.post(this.services.config.subscriptionsUri, requestBody, null, !0)
                            }
                        }, {
                            key: "add",
                            value: function(sid, entity) {
                                logger_1.default.debug("Establishing intent to subscribe to " + sid);
                                var existingSubscription = this.subscriptions.get(sid);
                                existingSubscription && existingSubscription.lastEventId === entity.lastEventId || (this.persisted.delete(sid), this.subscriptions.set(sid, new SubscribedEntity(entity)), this.persist())
                            }
                        }, {
                            key: "remove",
                            value: function(sid) {
                                logger_1.default.debug("Establishing intent to unsubscribe from " + sid), this.subscriptions.delete(sid) && this.persist()
                            }
                        }, {
                            key: "acceptMessage",
                            value: function(message, isStrictlyOrdered) {
                                switch (logger_1.default.trace("Subscriptions received", message), message.correlation_id && this.latestPokeResponseArrivalTimestampByCorrelationId.set(message.correlation_id, (new Date).getTime()), message.event_type) {
                                    case "subscription_established":
                                        this.applySubscriptionEstablishedMessage(message.event, message.correlation_id);
                                        break;
                                    case "subscription_canceled":
                                        this.applySubscriptionCancelledMessage(message.event, message.correlation_id);
                                        break;
                                    case "subscription_failed":
                                        this.applySubscriptionFailedMessage(message.event, message.correlation_id);
                                        break;
                                    case (message.event_type.match(/^(?:map|list|document|topic)_/) || {}).input:
                                        this.applyEventToSubscribedEntity(message.event_type.match(/^map_/) ? message.event.map_sid : message.event_type.match(/^list_/) ? message.event.list_sid : message.event_type.match(/^document_/) ? message.event.document_sid : message.event_type.match(/^topic_/) ? message.event.topic_sid : void 0, message, isStrictlyOrdered);
                                        break;
                                    default:
                                        logger_1.default.debug("Dropping unknown message type " + message.event_type)
                                }
                            }
                        }, {
                            key: "applySubscriptionEstablishedMessage",
                            value: function(message, correlationId) {
                                var sid = message.object_sid,
                                    subscriptionIntent = this.persisted.get(message.object_sid);
                                subscriptionIntent && subscriptionIntent.pendingCorrelationId === correlationId ? "interrupted" === message.replay_status ? (logger_1.default.debug("Event Replay for subscription to " + sid + " (c:" + correlationId + ") interrupted; continuing eagerly."), subscriptionIntent.pendingCorrelationId = null, this.persisted.delete(subscriptionIntent.sid), this.backoff.reset()) : "completed" === message.replay_status && (logger_1.default.debug("Event Replay for subscription to " + sid + " (c:" + correlationId + ") completed. Subscription is ready."), subscriptionIntent.complete(message.last_event_id), this.persisted.set(message.object_sid, subscriptionIntent), subscriptionIntent.localObject._setSubscriptionState("established"), this.backoff.reset()) : logger_1.default.debug("Late message for " + message.object_sid + " (c:" + correlationId + ") dropped."), this.persist()
                            }
                        }, {
                            key: "applySubscriptionCancelledMessage",
                            value: function(message, correlationId) {
                                var persistedSubscription = this.persisted.get(message.object_sid);
                                persistedSubscription && persistedSubscription.pendingCorrelationId === correlationId ? (persistedSubscription.pendingCorrelationId = null, persistedSubscription.localObject._setSubscriptionState("none"), this.persisted.delete(message.object_sid)) : logger_1.default.debug("Late message for " + message.object_sid + " (c:" + correlationId + ") dropped."), this.persist()
                            }
                        }, {
                            key: "applySubscriptionFailedMessage",
                            value: function(message, correlationId) {
                                var sid = message.object_sid,
                                    subscriptionIntent = this.subscriptions.get(sid),
                                    subscription = this.persisted.get(sid);
                                subscriptionIntent && subscription ? subscription.pendingCorrelationId === correlationId && (logger_1.default.error("Failed to subscribe on " + subscription.sid, message.error), subscription.markAsFailed(message), subscription.localObject._setSubscriptionState("none")) : !subscriptionIntent && subscription && (this.persisted.delete(sid), subscription.localObject._setSubscriptionState("none")), this.persist()
                            }
                        }, {
                            key: "applyEventToSubscribedEntity",
                            value: function(sid, message, isStrictlyOrdered) {
                                if (sid) {
                                    var subscription;
                                    isStrictlyOrdered = isStrictlyOrdered || (subscription = this.persisted.get(sid)) && subscription.isEstablished;
                                    var subscriptionIntent = this.subscriptions.get(sid);
                                    subscriptionIntent ? (message.event.type = message.event_type, subscriptionIntent.update(message.event, isStrictlyOrdered)) : logger_1.default.debug("Message dropped for SID '" + sid + "', for which there is no subscription.")
                                }
                            }
                        }, {
                            key: "onConnectionStateChanged",
                            value: function(isConnected) {
                                (this.isConnected = isConnected) && this.poke("reconnect")
                            }
                        }, {
                            key: "onSubscriptionTtlElapsed",
                            value: function() {
                                this.isConnected && this.poke("ttl")
                            }
                        }, {
                            key: "poke",
                            value: function(reason) {
                                logger_1.default.info("Triggering event replay for all subscriptions, reason=" + reason), this.pendingPokeReason = reason, this.subscriptionTtlTimer && (clearTimeout(this.subscriptionTtlTimer), this.subscriptionTtlTimer = null);
                                var failedSubscriptions = [],
                                    _iteratorNormalCompletion4 = !0,
                                    _didIteratorError4 = !1,
                                    _iteratorError4 = void 0;
                                try {
                                    for (var _step4, _iterator4 = (0, _getIterator3.default)(this.persisted.values()); !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = !0) {
                                        var it = _step4.value;
                                        it.reset(), it.rejectedWithError && failedSubscriptions.push(it)
                                    }
                                } catch (err) {
                                    _didIteratorError4 = !0, _iteratorError4 = err
                                } finally {
                                    try {
                                        !_iteratorNormalCompletion4 && _iterator4.return && _iterator4.return()
                                    } finally {
                                        if (_didIteratorError4) throw _iteratorError4
                                    }
                                }
                                this.persisted.clear();
                                var _iteratorNormalCompletion5 = !0,
                                    _didIteratorError5 = !1,
                                    _iteratorError5 = void 0;
                                try {
                                    for (var _step5, _iterator5 = (0, _getIterator3.default)(failedSubscriptions); !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = !0) {
                                        var _it = _step5.value;
                                        this.persisted.set(_it.sid, _it)
                                    }
                                } catch (err) {
                                    _didIteratorError5 = !0, _iteratorError5 = err
                                } finally {
                                    try {
                                        !_iteratorNormalCompletion5 && _iterator5.return && _iterator5.return()
                                    } finally {
                                        if (_didIteratorError5) throw _iteratorError5
                                    }
                                }
                                this.persist()
                            }
                        }, {
                            key: "shutdown",
                            value: function() {
                                this.backoff.reset(), this.subscriptions.clear()
                            }
                        }]), Subscriptions
                    }();
                exports.Subscriptions = Subscriptions, exports.default = Subscriptions
            }, {
                "./logger": 255,
                "./syncerror": 265,
                "babel-runtime/core-js/get-iterator": 32,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/slicedToArray": 55,
                "babel-runtime/regenerator": 57,
                backoff: 58,
                "twilio-transport": 273
            }],
            263: [function(_dereq_, module, exports) {
                "use strict";
                var _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SyncNetworkError = function(_syncerror_1$SyncErro) {
                    function SyncNetworkError(message) {
                        var status = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0,
                            code = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0,
                            body = arguments[3];
                        (0, _classCallCheck3.default)(this, SyncNetworkError);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncNetworkError.__proto__ || (0, _getPrototypeOf2.default)(SyncNetworkError)).call(this, message, status, code));
                        return _this.body = body, _this
                    }
                    return (0, _inherits3.default)(SyncNetworkError, _syncerror_1$SyncErro), SyncNetworkError
                }(_dereq_("./syncerror").SyncError);
                exports.SyncNetworkError = SyncNetworkError, exports.default = SyncNetworkError
            }, {
                "./syncerror": 265,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54
            }],
            264: [function(_dereq_, module, exports) {
                "use strict";
                var _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var logger_1 = _dereq_("./logger"),
                    entity_1 = _dereq_("./entity"),
                    rfc6902_1 = _dereq_("rfc6902"),
                    retryingqueue_1 = _dereq_("./retryingqueue"),
                    utils_1 = _dereq_("./utils"),
                    SyncDocument = function(_entity_1$SyncEntity) {
                        function SyncDocument(services, descriptor, removalHandler) {
                            (0, _classCallCheck3.default)(this, SyncDocument);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (SyncDocument.__proto__ || (0, _getPrototypeOf2.default)(SyncDocument)).call(this, services, removalHandler));
                            return _this.actionQueue = new retryingqueue_1.RetryingQueue, _this.descriptor = descriptor, _this.descriptor.data = _this.descriptor.data || {}, _this
                        }
                        return (0, _inherits3.default)(SyncDocument, _entity_1$SyncEntity), (0, _createClass3.default)(SyncDocument, [{
                            key: "_update",
                            value: function(update) {
                                switch (update.type) {
                                    case "document_updated":
                                        if (update.id > this.lastEventId) {
                                            var originalData = this.descriptor.data;
                                            this.descriptor.last_event_id = update.id, this.descriptor.revision = update.document_revision, this.descriptor.data = update.document_data, this.traverse(originalData, update.document_data, !1), this.emit("updated", update.document_data, !1), this.emit("updatedRemotely", update.document_data), this.services.storage.update(this.type, this.sid, this.uniqueName, {
                                                last_event_id: update.id,
                                                revision: update.document_revision,
                                                data: update.document_data
                                            })
                                        }
                                        break;
                                    case "document_removed":
                                        this.onRemoved(!1)
                                }
                            }
                        }, {
                            key: "traverse",
                            value: function(originalData, updatedData, isLocalEvent) {
                                var _this2 = this;
                                rfc6902_1.createPatch(originalData, updatedData).forEach(function(row) {
                                    "add" === row.op ? (_this2.emit("keyAdded", row.path, row.value, isLocalEvent), isLocalEvent || _this2.emit("keyAddedRemotely", row.path, row.value)) : "replace" === row.op ? (_this2.emit("keyUpdated", row.path, row.value, isLocalEvent), isLocalEvent || _this2.emit("keyUpdatedRemotely", row.path, row.value)) : "remove" === row.op && (_this2.emit("keyRemoved", row.path, isLocalEvent), isLocalEvent || _this2.emit("keyRemovedRemotely", row.path))
                                })
                            }
                        }, {
                            key: "get",
                            value: function(path) {
                                return this.value
                            }
                        }, {
                            key: "set",
                            value: function(value, conditional) {
                                return this._actualSet(value, conditional ? function() {
                                    throw new Error("Revision mismatch")
                                } : null)
                            }
                        }, {
                            key: "_actualSet",
                            value: function(data, conflictResolver) {
                                var _this3 = this,
                                    resolver = void 0,
                                    arg = {
                                        data: data,
                                        revision: conflictResolver ? this.revision : void 0
                                    };
                                return conflictResolver && (resolver = function(err) {
                                    return __awaiter(_this3, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                        return _regenerator2.default.wrap(function(_context) {
                                            for (;;) switch (_context.prev = _context.next) {
                                                case 0:
                                                    if (412 === err.status) return _context.next = 3, this.softSync();
                                                    _context.next = 4;
                                                    break;
                                                case 3:
                                                    return _context.abrupt("return", {
                                                        revision: this.revision,
                                                        data: conflictResolver(utils_1.deepClone(this.value))
                                                    });
                                                case 4:
                                                    throw err;
                                                case 5:
                                                case "end":
                                                    return _context.stop()
                                            }
                                        }, _callee, this)
                                    }))
                                }), this.actionQueue.add(this._set.bind(this), this.uri, arg, resolver).then(function(result) {
                                    return result.last_event_id > _this3.descriptor.last_event_id && (_this3.descriptor.revision = result.revision, _this3.descriptor.data = result.data, _this3.descriptor.last_event_id = result.last_event_id, _this3.services.storage.update(_this3.type, _this3.sid, _this3.uniqueName, {
                                        last_event_id: result.last_event_id,
                                        revision: result.revision,
                                        data: result.data
                                    })), _this3.emit("updated", _this3.value, !0), _this3.value
                                })
                            }
                        }, {
                            key: "mutate",
                            value: function(mutator) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.abrupt("return", this._actualSet(mutator(utils_1.deepClone(this.value)), mutator));
                                            case 1:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "update",
                            value: function(obj) {
                                return this.mutate(function(remote) {
                                    return (0, _extends3.default)(remote, obj)
                                })
                            }
                        }, {
                            key: "_set",
                            value: function(context, param) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return _context3.next = 2, this.services.network.post(this.uri, {
                                                    data: param.data
                                                }, param.revision);
                                            case 2:
                                                return response = _context3.sent, _context3.abrupt("return", {
                                                    revision: response.body.revision,
                                                    data: param.data,
                                                    last_event_id: response.body.last_event_id
                                                });
                                            case 4:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this)
                                }))
                            }
                        }, {
                            key: "softSync",
                            value: function() {
                                var _this4 = this;
                                return this.services.network.get(this.uri).then(function(response) {
                                    return _this4._update({
                                        type: "document_updated",
                                        id: response.body.last_event_id,
                                        document_revision: response.body.revision,
                                        document_data: response.body.data
                                    }), _this4
                                }).catch(function(err) {
                                    404 === err.status ? _this4.onRemoved(!1) : logger_1.default.error("Can't get updates for " + _this4.sid + ":", err)
                                })
                            }
                        }, {
                            key: "onRemoved",
                            value: function(locally) {
                                this._unsubscribe(), this.removalHandler(this.type, this.sid, this.uniqueName), this.emit("removed", locally), locally || this.emit("removedRemotely")
                            }
                        }, {
                            key: "removeDocument",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                return _context4.next = 2, this.services.network.delete(this.uri);
                                            case 2:
                                                this.onRemoved(!0);
                                            case 3:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }, {
                            key: "uri",
                            get: function() {
                                return this.descriptor.url
                            }
                        }, {
                            key: "revision",
                            get: function() {
                                return this.descriptor.revision
                            }
                        }, {
                            key: "lastEventId",
                            get: function() {
                                return this.descriptor.last_event_id
                            }
                        }, {
                            key: "type",
                            get: function() {
                                return "document"
                            }
                        }, {
                            key: "sid",
                            get: function() {
                                return this.descriptor.sid
                            }
                        }, {
                            key: "value",
                            get: function() {
                                return this.descriptor.data
                            }
                        }, {
                            key: "uniqueName",
                            get: function() {
                                return this.descriptor.unique_name || null
                            }
                        }], [{
                            key: "type",
                            get: function() {
                                return "document"
                            }
                        }]), SyncDocument
                    }(entity_1.SyncEntity);
                exports.SyncDocument = SyncDocument, exports.default = SyncDocument
            }, {
                "./entity": 252,
                "./logger": 255,
                "./retryingqueue": 259,
                "./utils": 269,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57,
                rfc6902: 228
            }],
            265: [function(_dereq_, module, exports) {
                "use strict";
                var _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SyncError = function(_Error) {
                    function SyncError(message) {
                        var status = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0,
                            code = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0;
                        (0, _classCallCheck3.default)(this, SyncError);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncError.__proto__ || (0, _getPrototypeOf2.default)(SyncError)).call(this));
                        return _this.name = _this.constructor.name, _this.message = message, _this.status = status, _this.code = code, _this
                    }
                    return (0, _inherits3.default)(SyncError, _Error), SyncError
                }(Error);
                exports.SyncError = SyncError, exports.default = SyncError
            }, {
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54
            }],
            266: [function(_dereq_, module, exports) {
                "use strict";
                var _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var utils_1 = _dereq_("./utils"),
                    logger_1 = _dereq_("./logger"),
                    entity_1 = _dereq_("./entity"),
                    retryingqueue_1 = _dereq_("./retryingqueue"),
                    listitem_1 = _dereq_("./listitem"),
                    paginator_1 = _dereq_("./paginator"),
                    cache_1 = _dereq_("./cache"),
                    SyncList = function(_entity_1$SyncEntity) {
                        function SyncList(services, descriptor, removalHandler) {
                            (0, _classCallCheck3.default)(this, SyncList);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (SyncList.__proto__ || (0, _getPrototypeOf2.default)(SyncList)).call(this, services, removalHandler));
                            return _this.actionQueue = new retryingqueue_1.RetryingQueue, _this.cache = new cache_1.Cache, _this.descriptor = descriptor, _this
                        }
                        return (0, _inherits3.default)(SyncList, _entity_1$SyncEntity), (0, _createClass3.default)(SyncList, [{
                            key: "__set",
                            value: function(location, param) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context) {
                                        for (;;) switch (_context.prev = _context.next) {
                                            case 0:
                                                return _context.next = 2, this.services.network.post(location, {
                                                    data: param.data
                                                }, param.revision);
                                            case 2:
                                                return (response = _context.sent).body.data = param.data, _context.abrupt("return", response.body);
                                            case 5:
                                            case "end":
                                                return _context.stop()
                                        }
                                    }, _callee, this)
                                }))
                            }
                        }, {
                            key: "push",
                            value: function(value) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var response, index, item;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                return _context2.next = 2, this.services.network.post(this.links.items, {
                                                    data: value
                                                });
                                            case 2:
                                                return response = _context2.sent, index = Number(response.body.index), item = this.cache.store(index, new listitem_1.ListItem({
                                                    index: index,
                                                    revision: response.body.revision,
                                                    lastEventId: response.body.last_event_id,
                                                    uri: response.body.url,
                                                    value: value
                                                }), response.body.last_event_id), this.emit("itemAdded", item, !0), _context2.abrupt("return", item);
                                            case 7:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "set",
                            value: function(index, value) {
                                return this._actualSet(index, value)
                            }
                        }, {
                            key: "_actualSet",
                            value: function(index, value, resolver) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    var item, updatedItemDescriptor, _resolver, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                return _context4.next = 2, this.get(index);
                                            case 2:
                                                if (item = _context4.sent, updatedItemDescriptor = void 0, resolver) {
                                                    _context4.next = 10;
                                                    break
                                                }
                                                return _context4.next = 7, this.__set(item.uri, {
                                                    data: value,
                                                    revision: void 0
                                                });
                                            case 7:
                                                updatedItemDescriptor = _context4.sent, _context4.next = 14;
                                                break;
                                            case 10:
                                                return _resolver = function(err) {
                                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                                        var refreshedItem;
                                                        return _regenerator2.default.wrap(function(_context3) {
                                                            for (;;) switch (_context3.prev = _context3.next) {
                                                                case 0:
                                                                    if (412 === err.status) return _context3.next = 3, this._get(item.index);
                                                                    _context3.next = 5;
                                                                    break;
                                                                case 3:
                                                                    return refreshedItem = _context3.sent, _context3.abrupt("return", {
                                                                        revision: refreshedItem.revision,
                                                                        data: resolver(utils_1.deepClone(refreshedItem.value))
                                                                    });
                                                                case 5:
                                                                    throw err;
                                                                case 6:
                                                                case "end":
                                                                    return _context3.stop()
                                                            }
                                                        }, _callee3, this)
                                                    }))
                                                }, _context4.next = 13, this.actionQueue.add(this.__set.bind(this), item.uri, {
                                                    revision: item.revision,
                                                    data: value
                                                }, _resolver);
                                            case 13:
                                                updatedItemDescriptor = _context4.sent;
                                            case 14:
                                                return (item = this.cache.get(item.index)) && updatedItemDescriptor.last_event_id > item.lastEventId && (item.update(updatedItemDescriptor.last_event_id, updatedItemDescriptor.revision, updatedItemDescriptor.data), this.emit("itemUpdated", item, !0)), _context4.abrupt("return", item);
                                            case 17:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }, {
                            key: "mutate",
                            value: function(index, mutator) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                    var item;
                                    return _regenerator2.default.wrap(function(_context5) {
                                        for (;;) switch (_context5.prev = _context5.next) {
                                            case 0:
                                                return _context5.next = 2, this.get(index);
                                            case 2:
                                                return item = _context5.sent, _context5.abrupt("return", this._actualSet(index, mutator(utils_1.deepClone(item.value)), mutator));
                                            case 4:
                                            case "end":
                                                return _context5.stop()
                                        }
                                    }, _callee5, this)
                                }))
                            }
                        }, {
                            key: "update",
                            value: function(index, obj) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                    return _regenerator2.default.wrap(function(_context6) {
                                        for (;;) switch (_context6.prev = _context6.next) {
                                            case 0:
                                                return _context6.abrupt("return", this.mutate(index, function(remote) {
                                                    return (0, _extends3.default)(remote, obj)
                                                }));
                                            case 1:
                                            case "end":
                                                return _context6.stop()
                                        }
                                    }, _callee6, this)
                                }))
                            }
                        }, {
                            key: "remove",
                            value: function(index) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                    var item, response;
                                    return _regenerator2.default.wrap(function(_context7) {
                                        for (;;) switch (_context7.prev = _context7.next) {
                                            case 0:
                                                return _context7.next = 2, this.get(index);
                                            case 2:
                                                return item = _context7.sent, _context7.next = 5, this.services.network.delete(item.uri);
                                            case 5:
                                                response = _context7.sent, this.cache.delete(index, response.body.last_event_id), this.emit("itemRemoved", index, !0);
                                            case 8:
                                            case "end":
                                                return _context7.stop()
                                        }
                                    }, _callee7, this)
                                }))
                            }
                        }, {
                            key: "get",
                            value: function(index) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {
                                    var cachedItem;
                                    return _regenerator2.default.wrap(function(_context8) {
                                        for (;;) switch (_context8.prev = _context8.next) {
                                            case 0:
                                                if (cachedItem = this.cache.get(index)) return _context8.abrupt("return", cachedItem);
                                                _context8.next = 3;
                                                break;
                                            case 3:
                                                return _context8.abrupt("return", this._get(index));
                                            case 4:
                                            case "end":
                                                return _context8.stop()
                                        }
                                    }, _callee8, this)
                                }))
                            }
                        }, {
                            key: "_get",
                            value: function(index) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {
                                    var result;
                                    return _regenerator2.default.wrap(function(_context9) {
                                        for (;;) switch (_context9.prev = _context9.next) {
                                            case 0:
                                                return _context9.next = 2, this.queryItems({
                                                    index: index
                                                });
                                            case 2:
                                                if ((result = _context9.sent).items.length < 1) throw new Error("No item with index " + index + " found");
                                                _context9.next = 5;
                                                break;
                                            case 5:
                                                return _context9.abrupt("return", result.items[0]);
                                            case 6:
                                            case "end":
                                                return _context9.stop()
                                        }
                                    }, _callee9, this)
                                }))
                            }
                        }, {
                            key: "queryItems",
                            value: function(arg) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {
                                    var url, response, items, meta, _this3 = this;
                                    return _regenerator2.default.wrap(function(_context10) {
                                        for (;;) switch (_context10.prev = _context10.next) {
                                            case 0:
                                                return arg = arg || {}, url = new utils_1.UriBuilder(this.links.items).queryParam("From", arg.from).queryParam("PageSize", arg.limit).queryParam("Index", arg.index).queryParam("PageToken", arg.pageToken).queryParam("Order", arg.order).build(), _context10.next = 4, this.services.network.get(url);
                                            case 4:
                                                return response = _context10.sent, items = response.body.items.map(function(el) {
                                                    return _this3.cache.get(el.index) ? _this3._handleItemUpdated(el.index, el.url, el.last_event_id, el.revision, el.data) : _this3.cache.store(Number(el.index), new listitem_1.ListItem({
                                                        index: Number(el.index),
                                                        uri: el.url,
                                                        revision: el.revision,
                                                        lastEventId: el.last_event_id,
                                                        value: el.data
                                                    }), el.last_event_id), _this3.cache.get(el.index)
                                                }), meta = response.body.meta, _context10.abrupt("return", new paginator_1.Paginator(items, function(pageToken) {
                                                    return _this3.queryItems({
                                                        pageToken: pageToken
                                                    })
                                                }, meta.previous_token, meta.next_token));
                                            case 8:
                                            case "end":
                                                return _context10.stop()
                                        }
                                    }, _callee10, this)
                                }))
                            }
                        }, {
                            key: "getItems",
                            value: function(args) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {
                                    return _regenerator2.default.wrap(function(_context11) {
                                        for (;;) switch (_context11.prev = _context11.next) {
                                            case 0:
                                                return (args = args || {}).limit = args.pageSize || args.limit || 50, args.order = args.order || "asc", _context11.abrupt("return", this.queryItems(args));
                                            case 4:
                                            case "end":
                                                return _context11.stop()
                                        }
                                    }, _callee11, this)
                                }))
                            }
                        }, {
                            key: "getContext",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context12) {
                                        for (;;) switch (_context12.prev = _context12.next) {
                                            case 0:
                                                if (this.context) {
                                                    _context12.next = 5;
                                                    break
                                                }
                                                return _context12.next = 3, this.services.network.get(this.links.context);
                                            case 3:
                                                response = _context12.sent, (!this.context || response.body.last_event_id > this.lastEventId) && (this.context = response.body.data);
                                            case 5:
                                                return _context12.abrupt("return", this.context);
                                            case 6:
                                            case "end":
                                                return _context12.stop()
                                        }
                                    }, _callee12, this)
                                }))
                            }
                        }, {
                            key: "updateContext",
                            value: function(context) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {
                                    return _regenerator2.default.wrap(function(_context13) {
                                        for (;;) switch (_context13.prev = _context13.next) {
                                            case 0:
                                                return _context13.prev = 0, _context13.next = 3, this.services.network.post(this.links.context, {
                                                    data: context
                                                });
                                            case 3:
                                                return this.context = context, this.emit("contextUpdated", context, !0), _context13.abrupt("return", this);
                                            case 8:
                                                throw _context13.prev = 8, _context13.t0 = _context13.catch(0), logger_1.default.error("Failed to update context", _context13.t0), _context13.t0;
                                            case 12:
                                            case "end":
                                                return _context13.stop()
                                        }
                                    }, _callee13, this, [
                                        [0, 8]
                                    ])
                                }))
                            }
                        }, {
                            key: "removeList",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee14() {
                                    return _regenerator2.default.wrap(function(_context14) {
                                        for (;;) switch (_context14.prev = _context14.next) {
                                            case 0:
                                                return _context14.next = 2, this.services.network.delete(this.uri);
                                            case 2:
                                                this.onRemoved(!0);
                                            case 3:
                                            case "end":
                                                return _context14.stop()
                                        }
                                    }, _callee14, this)
                                }))
                            }
                        }, {
                            key: "onRemoved",
                            value: function(locally) {
                                this._unsubscribe(), this.removalHandler(this.type, this.sid, this.uniqueName), this.emit("collectionRemoved", locally), locally || this.emit("collectionRemovedRemotely")
                            }
                        }, {
                            key: "shouldIgnoreEvent",
                            value: function(key, eventId) {
                                return this.cache.isKnown(key, eventId)
                            }
                        }, {
                            key: "_update",
                            value: function(update, isStrictlyOrdered) {
                                var itemIndex = Number(update.item_index);
                                switch (update.type) {
                                    case "list_item_added":
                                        this._handleItemAdded(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);
                                        break;
                                    case "list_item_updated":
                                        this._handleItemUpdated(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);
                                        break;
                                    case "list_item_removed":
                                        this._handleItemRemoved(itemIndex, update.id, update.item_data);
                                        break;
                                    case "list_context_updated":
                                        this._handleContextUpdate(update.context_data, update.id);
                                        break;
                                    case "list_removed":
                                        this.onRemoved(!1)
                                }
                                isStrictlyOrdered && this._advanceLastEventId(update.id, update.list_revision)
                            }
                        }, {
                            key: "_advanceLastEventId",
                            value: function(eventId, revision) {
                                this.lastEventId < eventId && (this.descriptor.last_event_id = eventId, revision && (this.descriptor.revision = revision))
                            }
                        }, {
                            key: "_handleItemAdded",
                            value: function(index, uri, eventId, revision, value) {
                                if (!this.cache.isKnown(index, eventId)) {
                                    var item = new listitem_1.ListItem({
                                        index: index,
                                        uri: uri,
                                        lastEventId: eventId,
                                        revision: revision,
                                        value: value
                                    });
                                    this.cache.store(index, item, eventId), this.emit("itemAdded", item, !1), this.emit("itemAddedRemotely", item)
                                }
                            }
                        }, {
                            key: "_handleItemUpdated",
                            value: function(index, uri, eventId, revision, value) {
                                var item = this.cache.get(index);
                                item || this.shouldIgnoreEvent(index, eventId) ? item && eventId > item.lastEventId && (item.update(eventId, revision, value), this.emit("itemUpdated", item, !1), this.emit("itemUpdatedRemotely", item)) : (item = this.cache.store(index, new listitem_1.ListItem({
                                    index: index,
                                    uri: uri,
                                    lastEventId: eventId,
                                    revision: revision,
                                    value: value
                                }), eventId), this.emit("itemUpdated", item, !1), this.emit("itemUpdatedRemotely", item))
                            }
                        }, {
                            key: "_handleItemRemoved",
                            value: function(index, eventId, oldData) {
                                this.cache.delete(index, eventId), this.emit("itemRemoved", index, !1), this.emit("itemRemovedRemotely", index, oldData)
                            }
                        }, {
                            key: "_handleContextUpdate",
                            value: function(data, eventId) {
                                this.lastEventId < eventId && (this.context = data, this.emit("contextUpdated", data, !1), this.emit("contextUpdatedRemotely", data))
                            }
                        }, {
                            key: "uri",
                            get: function() {
                                return this.descriptor.url
                            }
                        }, {
                            key: "revision",
                            get: function() {
                                return this.descriptor.revision
                            }
                        }, {
                            key: "lastEventId",
                            get: function() {
                                return this.descriptor.last_event_id
                            }
                        }, {
                            key: "links",
                            get: function() {
                                return this.descriptor.links
                            }
                        }, {
                            key: "type",
                            get: function() {
                                return "list"
                            }
                        }, {
                            key: "sid",
                            get: function() {
                                return this.descriptor.sid
                            }
                        }, {
                            key: "uniqueName",
                            get: function() {
                                return this.descriptor.unique_name || null
                            }
                        }], [{
                            key: "type",
                            get: function() {
                                return "list"
                            }
                        }]), SyncList
                    }(entity_1.SyncEntity);
                exports.SyncList = SyncList, exports.default = SyncList
            }, {
                "./cache": 247,
                "./entity": 252,
                "./listitem": 254,
                "./logger": 255,
                "./paginator": 258,
                "./retryingqueue": 259,
                "./utils": 269,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57
            }],
            267: [function(_dereq_, module, exports) {
                "use strict";
                var _extends3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/extends")),
                    _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var utils_1 = _dereq_("./utils"),
                    entity_1 = _dereq_("./entity"),
                    retryingqueue_1 = _dereq_("./retryingqueue"),
                    mapitem_1 = _dereq_("./mapitem"),
                    paginator_1 = _dereq_("./paginator"),
                    cache_1 = _dereq_("./cache"),
                    SyncMap = function(_entity_1$SyncEntity) {
                        function SyncMap(services, descriptor, removalHandler) {
                            (0, _classCallCheck3.default)(this, SyncMap);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (SyncMap.__proto__ || (0, _getPrototypeOf2.default)(SyncMap)).call(this, services, removalHandler));
                            return _this.actionQueue = new retryingqueue_1.RetryingQueue, _this.cache = new cache_1.Cache, (_this.descriptor = descriptor).items && descriptor.items.forEach(function(itemDescriptor) {
                                _this.cache.store(itemDescriptor.key, new mapitem_1.MapItem(itemDescriptor), itemDescriptor.last_event_id)
                            }), _this
                        }
                        return (0, _inherits3.default)(SyncMap, _entity_1$SyncEntity), (0, _createClass3.default)(SyncMap, [{
                            key: "_get",
                            value: function(key) {
                                return this.queryItems({
                                    key: key
                                }).then(function(result) {
                                    if (result.items.length < 1) throw new Error("No item with key " + key + " found");
                                    return result.items[0]
                                })
                            }
                        }, {
                            key: "__set",
                            value: function(location, param) {
                                return this.services.network.post(location, {
                                    data: param.data
                                }, param.revision).then(function(response) {
                                    return (response = response.body).data = param.data, response
                                })
                            }
                        }, {
                            key: "_set",
                            value: function(location, keyValue, resolver) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                    var _resolver, _this2 = this;
                                    return _regenerator2.default.wrap(function(_context2) {
                                        for (;;) switch (_context2.prev = _context2.next) {
                                            case 0:
                                                if (resolver) {
                                                    _context2.next = 2;
                                                    break
                                                }
                                                return _context2.abrupt("return", this.__set(location, {
                                                    data: keyValue.data
                                                }));
                                            case 2:
                                                return _resolver = function(err) {
                                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                                        var item;
                                                        return _regenerator2.default.wrap(function(_context) {
                                                            for (;;) switch (_context.prev = _context.next) {
                                                                case 0:
                                                                    if (412 === err.status) return _context.next = 3, this._get(keyValue.key);
                                                                    _context.next = 5;
                                                                    break;
                                                                case 3:
                                                                    return item = _context.sent, _context.abrupt("return", {
                                                                        revision: item.revision,
                                                                        data: resolver(utils_1.deepClone(item.value))
                                                                    });
                                                                case 5:
                                                                    throw err;
                                                                case 6:
                                                                case "end":
                                                                    return _context.stop()
                                                            }
                                                        }, _callee, this)
                                                    }))
                                                }, _context2.abrupt("return", this.actionQueue.add(this.__set.bind(this), location, {
                                                    revision: keyValue.revision,
                                                    data: keyValue.data
                                                }, _resolver));
                                            case 4:
                                            case "end":
                                                return _context2.stop()
                                        }
                                    }, _callee2, this)
                                }))
                            }
                        }, {
                            key: "_tryAddOrUpdate",
                            value: function(uri, keyValue, resolver) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {
                                    var response, existingItemLocation, value, _response, resolvedData, _value;
                                    return _regenerator2.default.wrap(function(_context3) {
                                        for (;;) switch (_context3.prev = _context3.next) {
                                            case 0:
                                                return _context3.prev = 0, _context3.next = 3, this.services.network.post(uri, keyValue);
                                            case 3:
                                                return (response = _context3.sent).body.data = keyValue.data, _context3.abrupt("return", {
                                                    added: !0,
                                                    value: response.body
                                                });
                                            case 8:
                                                if (_context3.prev = 8, _context3.t0 = _context3.catch(0), 409 !== _context3.t0.status) throw _context3.t0;
                                                _context3.next = 12;
                                                break;
                                            case 12:
                                                if (existingItemLocation = _context3.t0.body.links.item, resolver) {
                                                    _context3.next = 20;
                                                    break
                                                }
                                                return _context3.next = 16, this._set(existingItemLocation, keyValue, resolver);
                                            case 16:
                                                return value = _context3.sent, _context3.abrupt("return", {
                                                    added: !1,
                                                    value: value
                                                });
                                            case 20:
                                                return _context3.next = 22, this.services.network.get(existingItemLocation);
                                            case 22:
                                                return _response = _context3.sent, resolvedData = resolver(utils_1.deepClone(_response.body.data)), _context3.next = 26, this._set(existingItemLocation, {
                                                    key: _response.body.key,
                                                    revision: _response.body.revision,
                                                    data: resolvedData
                                                }, resolver);
                                            case 26:
                                                return _value = _context3.sent, _context3.abrupt("return", {
                                                    added: !1,
                                                    value: _value
                                                });
                                            case 28:
                                            case "end":
                                                return _context3.stop()
                                        }
                                    }, _callee3, this, [
                                        [0, 8]
                                    ])
                                }))
                            }
                        }, {
                            key: "getContext",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {
                                    var response;
                                    return _regenerator2.default.wrap(function(_context4) {
                                        for (;;) switch (_context4.prev = _context4.next) {
                                            case 0:
                                                if (this.context) {
                                                    _context4.next = 5;
                                                    break
                                                }
                                                return _context4.next = 3, this.services.network.get(this.links.context);
                                            case 3:
                                                response = _context4.sent, (!this.context || response.body.last_event_id > this.lastEventId) && (this.context = response.body.data);
                                            case 5:
                                                return _context4.abrupt("return", this.context);
                                            case 6:
                                            case "end":
                                                return _context4.stop()
                                        }
                                    }, _callee4, this)
                                }))
                            }
                        }, {
                            key: "updateContext",
                            value: function(context) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {
                                    return _regenerator2.default.wrap(function(_context5) {
                                        for (;;) switch (_context5.prev = _context5.next) {
                                            case 0:
                                                return _context5.next = 2, this.services.network.post(this.links.context, {
                                                    data: context
                                                });
                                            case 2:
                                                this.context = context, this.emit("contextUpdated", context, !0);
                                            case 4:
                                            case "end":
                                                return _context5.stop()
                                        }
                                    }, _callee5, this)
                                }))
                            }
                        }, {
                            key: "set",
                            value: function(key, value) {
                                return this._actualSet(key, value)
                            }
                        }, {
                            key: "_actualSet",
                            value: function(key, value, resolver) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {
                                    var descriptor, added, item, arg, addOrUpdateResult;
                                    return _regenerator2.default.wrap(function(_context6) {
                                        for (;;) switch (_context6.prev = _context6.next) {
                                            case 0:
                                                if (added = descriptor = void 0, item = this.cache.get(key)) return arg = {
                                                    key: key,
                                                    data: value,
                                                    revision: item.revision || void 0
                                                }, _context6.next = 7, this._set(item.uri, arg, resolver);
                                                _context6.next = 11;
                                                break;
                                            case 7:
                                                descriptor = _context6.sent, added = !1, _context6.next = 16;
                                                break;
                                            case 11:
                                                return _context6.next = 13, this._tryAddOrUpdate(this.links.items, {
                                                    key: key,
                                                    data: value
                                                }, resolver);
                                            case 13:
                                                addOrUpdateResult = _context6.sent, descriptor = addOrUpdateResult.value, added = addOrUpdateResult.added;
                                            case 16:
                                                return (item = this.cache.get(key)) && descriptor.last_event_id > item.lastEventId ? (item.update(descriptor.last_event_id, descriptor.revision, descriptor.data), this.emit("itemUpdated", item, !0)) : item || (item = this.cache.store(key, new mapitem_1.MapItem(descriptor), descriptor.last_event_id), added ? this.emit("itemAdded", item, !0) : this.emit("itemUpdated", item, !0)), _context6.abrupt("return", item);
                                            case 19:
                                            case "end":
                                                return _context6.stop()
                                        }
                                    }, _callee6, this)
                                }))
                            }
                        }, {
                            key: "get",
                            value: function(key) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {
                                    var result;
                                    return _regenerator2.default.wrap(function(_context7) {
                                        for (;;) switch (_context7.prev = _context7.next) {
                                            case 0:
                                                if (this.cache.has(key)) return _context7.abrupt("return", this.cache.get(key));
                                                _context7.next = 2;
                                                break;
                                            case 2:
                                                return _context7.next = 4, this.queryItems({
                                                    key: key
                                                });
                                            case 4:
                                                if ((result = _context7.sent).items.length < 1) throw new Error("No item with key " + key + " found");
                                                _context7.next = 7;
                                                break;
                                            case 7:
                                                return _context7.abrupt("return", result.items[0]);
                                            case 8:
                                            case "end":
                                                return _context7.stop()
                                        }
                                    }, _callee7, this)
                                }))
                            }
                        }, {
                            key: "mutate",
                            value: function(key, mutator) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {
                                    var value;
                                    return _regenerator2.default.wrap(function(_context8) {
                                        for (;;) switch (_context8.prev = _context8.next) {
                                            case 0:
                                                return _context8.next = 2, this.get(key).then(function(item) {
                                                    return item.value
                                                }).catch(function() {
                                                    return {}
                                                });
                                            case 2:
                                                return value = _context8.sent, _context8.abrupt("return", this._actualSet(key, mutator(utils_1.deepClone(value)), mutator));
                                            case 4:
                                            case "end":
                                                return _context8.stop()
                                        }
                                    }, _callee8, this)
                                }))
                            }
                        }, {
                            key: "update",
                            value: function(key, obj) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {
                                    return _regenerator2.default.wrap(function(_context9) {
                                        for (;;) switch (_context9.prev = _context9.next) {
                                            case 0:
                                                return _context9.abrupt("return", this.mutate(key, function(remote) {
                                                    return (0, _extends3.default)(remote, obj)
                                                }));
                                            case 1:
                                            case "end":
                                                return _context9.stop()
                                        }
                                    }, _callee9, this)
                                }))
                            }
                        }, {
                            key: "remove",
                            value: function(key) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {
                                    var item, response;
                                    return _regenerator2.default.wrap(function(_context10) {
                                        for (;;) switch (_context10.prev = _context10.next) {
                                            case 0:
                                                if (void 0 === key) throw new Error("Key argument is invalid");
                                                _context10.next = 2;
                                                break;
                                            case 2:
                                                return _context10.next = 4, this.get(key);
                                            case 4:
                                                return item = _context10.sent, _context10.next = 7, this.services.network.delete(item.uri);
                                            case 7:
                                                response = _context10.sent, this.cache.delete(key, response.body.last_event_id), this.emit("itemRemoved", key, !0);
                                            case 10:
                                            case "end":
                                                return _context10.stop()
                                        }
                                    }, _callee10, this)
                                }))
                            }
                        }, {
                            key: "queryItems",
                            value: function(args) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {
                                    var uri, response, items, meta, _this3 = this;
                                    return _regenerator2.default.wrap(function(_context11) {
                                        for (;;) switch (_context11.prev = _context11.next) {
                                            case 0:
                                                return args = args || {}, uri = new utils_1.UriBuilder(this.links.items).queryParam("From", args.from).queryParam("PageSize", args.limit).queryParam("Key", args.key).queryParam("PageToken", args.pageToken).queryParam("Order", args.order).build(), _context11.next = 4, this.services.network.get(uri);
                                            case 4:
                                                return response = _context11.sent, items = response.body.items.map(function(el) {
                                                    return _this3.cache.get(el.key) ? _this3._handleItemUpdated(el.key, el.url, el.last_event_id, el.revision, el.data) : _this3.cache.store(el.key, new mapitem_1.MapItem(el), el.last_event_id), _this3.cache.get(el.key)
                                                }), meta = response.body.meta, _context11.abrupt("return", new paginator_1.Paginator(items, function(pageToken) {
                                                    return _this3.queryItems({
                                                        pageToken: pageToken
                                                    })
                                                }, meta.previous_token, meta.next_token));
                                            case 8:
                                            case "end":
                                                return _context11.stop()
                                        }
                                    }, _callee11, this)
                                }))
                            }
                        }, {
                            key: "getItems",
                            value: function(args) {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {
                                    return _regenerator2.default.wrap(function(_context12) {
                                        for (;;) switch (_context12.prev = _context12.next) {
                                            case 0:
                                                return (args = args || {}).limit = args.pageSize || args.limit || 50, args.order = args.order || "asc", _context12.abrupt("return", this.queryItems(args));
                                            case 4:
                                            case "end":
                                                return _context12.stop()
                                        }
                                    }, _callee12, this)
                                }))
                            }
                        }, {
                            key: "forEach",
                            value: function(handler) {
                                var _this4 = this;
                                return new _promise2.default(function(resolve, reject) {
                                    _this4.queryItems().then(function processPage(page) {
                                        page.items.forEach(function(x) {
                                            return handler(x)
                                        }), page.hasNextPage ? page.nextPage().then(processPage).catch(reject) : resolve()
                                    }).catch(reject)
                                })
                            }
                        }, {
                            key: "shouldIgnoreEvent",
                            value: function(key, eventId) {
                                return this.cache.isKnown(key, eventId)
                            }
                        }, {
                            key: "_update",
                            value: function(update, isStrictlyOrdered) {
                                switch (update.type) {
                                    case "map_item_added":
                                        this._handleItemAdded(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);
                                        break;
                                    case "map_item_updated":
                                        this._handleItemUpdated(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);
                                        break;
                                    case "map_item_removed":
                                        this._handleItemRemoved(update.item_key, update.id, update.item_data);
                                        break;
                                    case "map_context_updated":
                                        this._handleContextUpdate(update.context_data, update.id);
                                        break;
                                    case "map_removed":
                                        this.onRemoved(!1)
                                }
                                isStrictlyOrdered && this._advanceLastEventId(update.id, update.map_revision)
                            }
                        }, {
                            key: "_advanceLastEventId",
                            value: function(eventId, revision) {
                                this.lastEventId < eventId && (this.descriptor.last_event_id = eventId, revision && (this.descriptor.revision = revision))
                            }
                        }, {
                            key: "_handleItemAdded",
                            value: function(key, url, eventId, revision, value) {
                                if (!this.cache.has(key) && !this.shouldIgnoreEvent(key, eventId)) {
                                    var item = new mapitem_1.MapItem({
                                        key: key,
                                        url: url,
                                        last_event_id: eventId,
                                        revision: revision,
                                        data: value
                                    });
                                    this.cache.store(key, item, eventId), this.emit("itemAdded", item, !1), this.emit("itemAddedRemotely", item)
                                }
                            }
                        }, {
                            key: "_handleItemUpdated",
                            value: function(key, url, eventId, revision, value) {
                                var item = this.cache.get(key);
                                item || this.shouldIgnoreEvent(key, eventId) ? item && eventId > item.lastEventId && (item.update(eventId, revision, value), this.emit("itemUpdated", item, !1), this.emit("itemUpdatedRemotely", item)) : (item = new mapitem_1.MapItem({
                                    key: key,
                                    url: url,
                                    last_event_id: eventId,
                                    revision: revision,
                                    data: value
                                }), this.cache.store(key, item, eventId), this.emit("itemUpdated", item, !1), this.emit("itemUpdatedRemotely", item))
                            }
                        }, {
                            key: "_handleItemRemoved",
                            value: function(key, eventId, oldData) {
                                this.cache.delete(key, eventId), this.emit("itemRemoved", key, !1), this.emit("itemRemovedRemotely", key, oldData)
                            }
                        }, {
                            key: "_handleContextUpdate",
                            value: function(data, eventId) {
                                this.lastEventId < eventId && (this.context = data, this.emit("contextUpdated", data, !1), this.emit("contextUpdatedRemotely", data))
                            }
                        }, {
                            key: "onRemoved",
                            value: function(locally) {
                                this._unsubscribe(), this.removalHandler(this.type, this.sid, this.uniqueName), this.emit("collectionRemoved", locally), locally || this.emit("collectionRemovedRemotely")
                            }
                        }, {
                            key: "removeMap",
                            value: function() {
                                return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {
                                    return _regenerator2.default.wrap(function(_context13) {
                                        for (;;) switch (_context13.prev = _context13.next) {
                                            case 0:
                                                return _context13.next = 2, this.services.network.delete(this.uri);
                                            case 2:
                                                this.onRemoved(!0);
                                            case 3:
                                            case "end":
                                                return _context13.stop()
                                        }
                                    }, _callee13, this)
                                }))
                            }
                        }, {
                            key: "uri",
                            get: function() {
                                return this.descriptor.url
                            }
                        }, {
                            key: "links",
                            get: function() {
                                return this.descriptor.links
                            }
                        }, {
                            key: "revision",
                            get: function() {
                                return this.descriptor.revision
                            }
                        }, {
                            key: "lastEventId",
                            get: function() {
                                return this.descriptor.last_event_id
                            }
                        }, {
                            key: "type",
                            get: function() {
                                return "map"
                            }
                        }, {
                            key: "sid",
                            get: function() {
                                return this.descriptor.sid
                            }
                        }, {
                            key: "uniqueName",
                            get: function() {
                                return this.descriptor.unique_name || null
                            }
                        }], [{
                            key: "type",
                            get: function() {
                                return "map"
                            }
                        }]), SyncMap
                    }(entity_1.SyncEntity);
                exports.SyncMap = SyncMap, exports.default = SyncMap
            }, {
                "./cache": 247,
                "./entity": 252,
                "./mapitem": 256,
                "./paginator": 258,
                "./retryingqueue": 259,
                "./utils": 269,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/extends": 52,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57
            }],
            268: [function(_dereq_, module, exports) {
                "use strict";
                var _regenerator2 = _interopRequireDefault(_dereq_("babel-runtime/regenerator")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var __awaiter = function(thisArg, _arguments, P, generator) {
                    return new(P || (P = _promise2.default))(function(resolve, reject) {
                        function fulfilled(value) {
                            try {
                                step(generator.next(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function rejected(value) {
                            try {
                                step(generator.throw(value))
                            } catch (e) {
                                reject(e)
                            }
                        }

                        function step(result) {
                            result.done ? resolve(result.value) : new P(function(resolve) {
                                resolve(result.value)
                            }).then(fulfilled, rejected)
                        }
                        step((generator = generator.apply(thisArg, _arguments || [])).next())
                    })
                };
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var SyncTopic = function(_entity_1$SyncEntity) {
                    function SyncTopic(services, descriptor, removalHandler) {
                        (0, _classCallCheck3.default)(this, SyncTopic);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncTopic.__proto__ || (0, _getPrototypeOf2.default)(SyncTopic)).call(this, services, removalHandler));
                        return _this.descriptor = descriptor, _this
                    }
                    return (0, _inherits3.default)(SyncTopic, _entity_1$SyncEntity), (0, _createClass3.default)(SyncTopic, [{
                        key: "publishMessage",
                        value: function(value) {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {
                                var requestBody, response, responseBody, event;
                                return _regenerator2.default.wrap(function(_context) {
                                    for (;;) switch (_context.prev = _context.next) {
                                        case 0:
                                            return requestBody = {
                                                data: value
                                            }, _context.next = 3, this.services.network.post(this.links.messages, requestBody);
                                        case 3:
                                            return response = _context.sent, responseBody = response.body, event = this._handleMessagePublished(responseBody.sid, value, !1), _context.abrupt("return", event);
                                        case 7:
                                        case "end":
                                            return _context.stop()
                                    }
                                }, _callee, this)
                            }))
                        }
                    }, {
                        key: "removeTopic",
                        value: function() {
                            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {
                                return _regenerator2.default.wrap(function(_context2) {
                                    for (;;) switch (_context2.prev = _context2.next) {
                                        case 0:
                                            return _context2.next = 2, this.services.network.delete(this.uri);
                                        case 2:
                                            this.onRemoved(!0);
                                        case 3:
                                        case "end":
                                            return _context2.stop()
                                    }
                                }, _callee2, this)
                            }))
                        }
                    }, {
                        key: "_update",
                        value: function(update) {
                            switch (update.type) {
                                case "topic_message_published":
                                    this._handleMessagePublished(update.message_sid, update.message_data, !0);
                                    break;
                                case "topic_removed":
                                    this.onRemoved(!1)
                            }
                        }
                    }, {
                        key: "_handleMessagePublished",
                        value: function(sid, data, remote) {
                            var event = {
                                sid: sid,
                                value: data,
                                remote: remote
                            };
                            return this.emit("messagePublished", event), remote && this.emit("messagePublishedRemotely", event), event
                        }
                    }, {
                        key: "onRemoved",
                        value: function(isLocal) {
                            this._unsubscribe(), this.removalHandler(this.type, this.sid, this.uniqueName), this.emit("topicRemoved", isLocal), isLocal || this.emit("topicRemovedRemotely")
                        }
                    }, {
                        key: "sid",
                        get: function() {
                            return this.descriptor.sid
                        }
                    }, {
                        key: "uniqueName",
                        get: function() {
                            return this.descriptor.unique_name || null
                        }
                    }, {
                        key: "uri",
                        get: function() {
                            return this.descriptor.url
                        }
                    }, {
                        key: "links",
                        get: function() {
                            return this.descriptor.links
                        }
                    }, {
                        key: "type",
                        get: function() {
                            return "topic"
                        }
                    }, {
                        key: "lastEventId",
                        get: function() {
                            return null
                        }
                    }], [{
                        key: "type",
                        get: function() {
                            return "topic"
                        }
                    }]), SyncTopic
                }(_dereq_("../entity").SyncEntity);
                exports.SyncTopic = SyncTopic, exports.default = SyncTopic
            }, {
                "../entity": 252,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/regenerator": 57
            }],
            269: [function(_dereq_, module, exports) {
                "use strict";
                var _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                }), exports.deepClone = function(obj) {
                    return JSON.parse((0, _stringify2.default)(obj))
                };
                var UriBuilder = function() {
                    function UriBuilder(base) {
                        (0, _classCallCheck3.default)(this, UriBuilder), this.base = base, this.args = new Array, this.paths = new Array
                    }
                    return (0, _createClass3.default)(UriBuilder, [{
                        key: "pathSegment",
                        value: function(name) {
                            return this.paths.push(encodeURIComponent(name)), this
                        }
                    }, {
                        key: "queryParam",
                        value: function(name, value) {
                            return void 0 !== value && this.args.push(encodeURIComponent(name) + "=" + encodeURIComponent(value)), this
                        }
                    }, {
                        key: "build",
                        value: function() {
                            var result = this.base;
                            return this.paths.length && (result += "/" + this.paths.join("/")), this.args.length && (result += "?" + this.args.join("&")), result
                        }
                    }]), UriBuilder
                }();
                exports.UriBuilder = UriBuilder
            }, {
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            270: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var Deferred = function() {
                    function Deferred() {
                        var _this = this;
                        (0, _classCallCheck3.default)(this, Deferred), this._promise = new _promise2.default(function(resolve, reject) {
                            _this._resolve = resolve, _this._reject = reject
                        })
                    }
                    return (0, _createClass3.default)(Deferred, [{
                        key: "update",
                        value: function(value) {
                            this._resolve(value)
                        }
                    }, {
                        key: "set",
                        value: function(value) {
                            this.current = value, this._resolve(value)
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            this._reject(e)
                        }
                    }, {
                        key: "promise",
                        get: function() {
                            return this._promise
                        }
                    }]), Deferred
                }();
                exports.Deferred = Deferred
            }, {
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            271: [function(_dereq_, module, exports) {
                module.exports = {
                    _args: [
                        [{
                            raw: "twilio-sync@^0.5.10",
                            scope: null,
                            escapedName: "twilio-sync",
                            name: "twilio-sync",
                            rawSpec: "^0.5.10",
                            spec: ">=0.5.10 <0.6.0",
                            type: "range"
                        }, "/var/lib/jenkins/jobs/twilio-chat.js/workspace"]
                    ],
                    _from: "twilio-sync@>=0.5.10 <0.6.0",
                    _id: "twilio-sync@0.5.10",
                    _inCache: !0,
                    _location: "/twilio-sync",
                    _nodeVersion: "7.7.1",
                    _npmOperationalInternal: {
                        host: "s3://npm-registry-packages",
                        tmp: "tmp/twilio-sync-0.5.10.tgz_1503303914949_0.8794955047778785"
                    },
                    _npmUser: {
                        name: "twilio-ci",
                        email: "mroberts+twilio-ci@twilio.com"
                    },
                    _npmVersion: "4.1.2",
                    _phantomChildren: {},
                    _requested: {
                        raw: "twilio-sync@^0.5.10",
                        scope: null,
                        escapedName: "twilio-sync",
                        name: "twilio-sync",
                        rawSpec: "^0.5.10",
                        spec: ">=0.5.10 <0.6.0",
                        type: "range"
                    },
                    _requiredBy: ["/"],
                    _resolved: "https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.10.tgz",
                    _shasum: "38fcfbd31fe72b48ac0fe29b37baf8c215d0bc76",
                    _shrinkwrap: null,
                    _spec: "twilio-sync@^0.5.10",
                    _where: "/var/lib/jenkins/jobs/twilio-chat.js/workspace",
                    author: {
                        name: "Twilio"
                    },
                    browser: "browser/index.js",
                    dependencies: {
                        "babel-runtime": "^6.23.0",
                        karibu: "^1.0.1",
                        loglevel: "^1.4.1",
                        "operation-retrier": "^1.1.2",
                        platform: "^1.3.3",
                        rfc6902: "^1.3.0",
                        "twilio-ems-client": "^0.2.0",
                        "twilio-notifications": "^0.4.0",
                        "twilio-transport": "^0.1.2",
                        twilsock: "^0.3.0",
                        uuid: "^3.0.1",
                        xxhashjs: "^0.2.1"
                    },
                    description: "Twilio Sync client library",
                    devDependencies: {
                        "@types/chai": "^3.4.35",
                        "@types/chai-as-promised": "0.0.29",
                        "@types/loglevel": "^1.4.29",
                        "@types/mocha": "^2.2.39",
                        "@types/node": "^7.0.5",
                        "@types/sinon": "^2.3.3",
                        "@types/sinon-chai": "^2.7.27",
                        "async-test-tools": "^1.0.6",
                        "babel-cli": "^6.23.0",
                        "babel-plugin-add-module-exports": "^0.2.1",
                        "babel-plugin-array-includes": "^2.0.3",
                        "babel-plugin-transform-object-assign": "^6.22.0",
                        "babel-plugin-transform-runtime": "^6.23.0",
                        "babel-preset-es2015": "^6.22.0",
                        babelify: "^7.3.0",
                        backoff: "^2.5.0",
                        browserify: "^14.1.0",
                        chai: "^3.5.0",
                        "chai-as-promised": "^6.0.0",
                        cheerio: "^0.22.0",
                        del: "^2.2.2",
                        gulp: "^3.9.1",
                        "gulp-babel": "^6.1.2",
                        "gulp-derequire": "^2.1.0",
                        "gulp-exit": "0.0.2",
                        "gulp-insert": "^0.5.0",
                        "gulp-istanbul": "^1.1.1",
                        "gulp-mocha": "^4.0.1",
                        "gulp-rename": "^1.2.2",
                        "gulp-replace": "^0.5.4",
                        "gulp-tap": "^0.1.3",
                        "gulp-tslint": "^7.1.0",
                        "gulp-typescript": "^3.1.5",
                        "gulp-uglify": "^2.0.1",
                        "gulp-util": "^3.0.8",
                        "ink-docstrap": "^1.3.0",
                        isparta: "^4.0.0",
                        jsdoc: "^3.4.3",
                        jsonwebtoken: "^7.3.0",
                        karma: "^1.5.0",
                        "karma-browserify": "^5.1.1",
                        "karma-browserstack-launcher": "^1.2.0",
                        "karma-mocha": "^1.3.0",
                        "karma-mocha-reporter": "^2.2.2",
                        "run-sequence": "^1.2.2",
                        sinon: "^2.3.3",
                        "sinon-chai": "^2.8.0",
                        "ts-node": "^3.0.0",
                        tslint: "^4.5.1",
                        twilio: "^3.3.0-edge",
                        typescript: "2.2.1",
                        underscore: "^1.8.3",
                        "vinyl-buffer": "^1.0.0",
                        "vinyl-source-stream": "^1.1.0",
                        watchify: "^3.9.0"
                    },
                    directories: {},
                    dist: {
                        shasum: "38fcfbd31fe72b48ac0fe29b37baf8c215d0bc76",
                        tarball: "https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.10.tgz"
                    },
                    engines: {
                        node: ">=6"
                    },
                    gitHead: "cfefba94f7be630b924854ff63a9766218b2bdcd",
                    license: "MIT",
                    main: "lib/index.js",
                    maintainers: [{
                        name: "schertkov",
                        email: "schertkov@twilio.com"
                    }, {
                        name: "twilio-ci",
                        email: "mroberts+twilio-ci@twilio.com"
                    }],
                    name: "twilio-sync",
                    optionalDependencies: {},
                    readme: "ERROR: No README data found!",
                    scripts: {
                        prepublish: "gulp build",
                        test: "gulp unit-test"
                    },
                    version: "0.5.10"
                }
            }, {}],
            272: [function(_dereq_, module, exports) {
                "use strict";
                var _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _defineProperty2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-property"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _createClass = function() {
                    function defineProperties(target, props) {
                        for (var i = 0; i < props.length; i++) {
                            var descriptor = props[i];
                            descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), (0, _defineProperty2.default)(target, descriptor.key, descriptor)
                        }
                    }
                    return function(Constructor, protoProps, staticProps) {
                        return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                    }
                }();
                var XHR = "undefined" == typeof XMLHttpRequest ? _dereq_("xmlhttprequest").XMLHttpRequest : XMLHttpRequest;
                var Request = function() {
                    function Request() {
                        ! function(instance, Constructor) {
                            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                        }(this, Request)
                    }
                    return _createClass(Request, null, [{
                        key: "request",
                        value: function(method, params) {
                            return new _promise2.default(function(resolve, reject) {
                                var xhr = new XHR;
                                for (var headerName in xhr.open(method, params.url, !0), xhr.onreadystatechange = function() {
                                        if (4 === xhr.readyState) {
                                            var headerString, headers = (headerString = xhr.getAllResponseHeaders()) ? headerString.split("\r\n").map(function(el) {
                                                    return el.split(": ")
                                                }).filter(function(el) {
                                                    return 2 === el.length && 0 < el[1].length
                                                }).reduce(function(prev, curr) {
                                                    return prev[curr[0]] = curr[1], prev
                                                }, {}) : {},
                                                body = function(xhr) {
                                                    var contentType = xhr.getResponseHeader("Content-Type");
                                                    if (!contentType || 0 !== contentType.indexOf("application/json") || 0 === xhr.responseText.length) return xhr.responseText;
                                                    try {
                                                        return JSON.parse(xhr.responseText)
                                                    } catch (e) {
                                                        return xhr.responseText
                                                    }
                                                }(xhr);
                                            200 <= xhr.status && xhr.status < 300 ? resolve({
                                                status: xhr.status,
                                                headers: headers,
                                                body: body
                                            }) : reject({
                                                status: xhr.status,
                                                description: xhr.statusText,
                                                headers: headers,
                                                body: body
                                            })
                                        }
                                    }, params.headers) xhr.setRequestHeader(headerName, params.headers[headerName]), "Content-Type" === headerName && "application/json" === params.headers[headerName] && (params.body = (0, _stringify2.default)(params.body));
                                xhr.send(params.body)
                            })
                        }
                    }, {
                        key: "get",
                        value: function(params) {
                            return this.request("GET", params)
                        }
                    }, {
                        key: "post",
                        value: function(params) {
                            return this.request("POST", params)
                        }
                    }, {
                        key: "put",
                        value: function(params) {
                            return this.request("PUT", params)
                        }
                    }, {
                        key: "delete",
                        value: function(params) {
                            return this.request("DELETE", params)
                        }
                    }]), Request
                }();
                exports.default = Request, module.exports = Request, module.exports = exports.default
            }, {
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/object/define-property": 40,
                "babel-runtime/core-js/promise": 45,
                xmlhttprequest: 70
            }],
            273: [function(_dereq_, module, exports) {
                "use strict";
                var _promise2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/promise")),
                    _map2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/map")),
                    _defineProperties2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _keys2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/keys")),
                    _getPrototypeOf2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _from2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/array/from")),
                    _construct2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/reflect/construct")),
                    _setPrototypeOf2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/set-prototype-of")),
                    _create2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/create")),
                    _typeof3 = _interopRequireDefault2(_dereq_("babel-runtime/helpers/typeof")),
                    _defineProperty2 = _interopRequireDefault2(_dereq_("babel-runtime/core-js/object/define-property"));

                function _interopRequireDefault2(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                }), exports.TwilsockUnavailableError = exports.Transport = void 0;
                var obj, _createClass = function() {
                        function defineProperties(target, props) {
                            for (var i = 0; i < props.length; i++) {
                                var descriptor = props[i];
                                descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), (0, _defineProperty2.default)(target, descriptor.key, descriptor)
                            }
                        }
                        return function(Constructor, protoProps, staticProps) {
                            return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                        }
                    }(),
                    _httprequest = _dereq_("./httprequest"),
                    _httprequest2 = (obj = _httprequest) && obj.__esModule ? obj : {
                        default: obj
                    };

                function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                }

                function _extendableBuiltin(cls) {
                    function ExtendableBuiltin() {
                        var instance = (0, _construct2.default)(cls, (0, _from2.default)(arguments));
                        return (0, _setPrototypeOf2.default)(instance, (0, _getPrototypeOf2.default)(this)), instance
                    }
                    return ExtendableBuiltin.prototype = (0, _create2.default)(cls.prototype, {
                        constructor: {
                            value: cls,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(ExtendableBuiltin, cls) : ExtendableBuiltin.__proto__ = cls, ExtendableBuiltin
                }

                function twilsockAddress(method, uri) {
                    var parsedUri = function(uri) {
                            var match = uri.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);
                            if (match) {
                                var uriStruct = {
                                    protocol: match[1],
                                    host: match[2],
                                    hostname: match[3],
                                    port: match[4],
                                    pathname: match[5],
                                    search: match[6],
                                    hash: match[7]
                                };
                                if (0 < uriStruct.search.length) {
                                    var paramsString = uriStruct.search.substring(1);
                                    uriStruct.params = paramsString.split("&").map(function(el) {
                                        return el.split("=")
                                    }).reduce(function(prev, curr) {
                                        return prev.hasOwnProperty(curr[0]) ? Array.isArray(prev[curr[0]]) ? prev[curr[0]].push(curr[1]) : prev[curr[0]] = [prev[curr[0]], curr[1]] : prev[curr[0]] = curr[1], prev
                                    }, {})
                                }
                                return uriStruct
                            }
                            throw new Error("Incorrect URI: " + uri)
                        }(uri),
                        to = {
                            method: method,
                            host: parsedUri.host,
                            path: parsedUri.pathname
                        };
                    return parsedUri.params && (to.params = parsedUri.params), to
                }

                function twilsockParams(type, uri, headers, body) {
                    return {
                        to: twilsockAddress(type, uri),
                        headers: headers,
                        body: body
                    }
                }

                function adaptTwilsockResponse(response) {
                    return {
                        status: response.header.http_status,
                        headers: response.header.http_headers,
                        body: response.body
                    }
                }

                function httpParams(uri, headers, body) {
                    return {
                        url: uri,
                        headers: headers,
                        body: body
                    }
                }

                function adaptHttpResponse(response) {
                    try {
                        response.body = JSON.parse(response.body)
                    } catch (e) {}
                    return response
                }

                function lowercaseHeaders(response) {
                    for (var keys = (0, _keys2.default)(response.headers), n = keys.length, headers = {}; n--;) {
                        var key = keys[n];
                        headers[key.toLowerCase()] = response.headers[key]
                    }
                    return response.headers = headers, response
                }
                var TwilsockUnavailableError = function(_extendableBuiltin2) {
                        function TwilsockUnavailableError() {
                            return _classCallCheck(this, TwilsockUnavailableError),
                                function(self, call) {
                                    if (!self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return !call || "object" !== (void 0 === call ? "undefined" : (0, _typeof3.default)(call)) && "function" != typeof call ? self : call
                                }(this, (TwilsockUnavailableError.__proto__ || (0, _getPrototypeOf2.default)(TwilsockUnavailableError)).call(this))
                        }
                        return function(subClass, superClass) {
                            if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === superClass ? "undefined" : (0, _typeof3.default)(superClass)));
                            subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {
                                constructor: {
                                    value: subClass,
                                    enumerable: !1,
                                    writable: !0,
                                    configurable: !0
                                }
                            }), superClass && (_setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass)
                        }(TwilsockUnavailableError, _extendableBuiltin(Error)), TwilsockUnavailableError
                    }(),
                    Transport = function() {
                        function Transport(twilsock) {
                            var _this2 = this,
                                options = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                            _classCallCheck(this, Transport), (0, _defineProperties2.default)(this, {
                                _activeGetRequests: {
                                    value: new _map2.default
                                },
                                _twilsock: {
                                    value: twilsock
                                },
                                _http: {
                                    value: _httprequest2.default
                                },
                                _twilsockIsAvailable: {
                                    get: function() {
                                        return _this2._twilsock && _this2._twilsock.isConnected
                                    }
                                },
                                _concurrentHttpRequestLimit: {
                                    value: options.concurrentHttpRequestLimit || 1 / 0
                                },
                                _concurrentHttpRequestCount: {
                                    value: 0,
                                    writable: !0
                                },
                                _requestQueue: {
                                    value: []
                                }
                            }), twilsock && (twilsock.connect(), twilsock.on("connected", function() {
                                return _this2._processQueuedRequests()
                            }))
                        }
                        return _createClass(Transport, [{
                            key: "get",
                            value: function(uri, headers, forceTwilsock) {
                                var _this3 = this;
                                if (this._activeGetRequests.has(uri)) return this._activeGetRequests.get(uri);
                                var promise = this._get(uri, headers, forceTwilsock).then(function(response) {
                                    return _this3._activeGetRequests.delete(uri), response
                                }).catch(function(error) {
                                    throw _this3._activeGetRequests.delete(uri), error
                                });
                                return this._activeGetRequests.set(uri, promise), promise
                            }
                        }, {
                            key: "_oneOfBasedOnChannelAvailability",
                            value: function(sendingOptions, forceTwilsock) {
                                var paths, sendViaTwilsock, sendDirectHttp, _this4 = this;
                                return (paths = sendingOptions, sendViaTwilsock = paths.sendViaTwilsock, sendDirectHttp = paths.sendDirectHttp, _this4._twilsockIsAvailable ? sendViaTwilsock() : forceTwilsock ? _promise2.default.reject(new TwilsockUnavailableError) : _this4._concurrentHttpRequestCount >= _this4._concurrentHttpRequestLimit ? new _promise2.default(function(resolve, reject) {
                                    return _this4._requestQueue.push({
                                        sendingOptions: sendingOptions,
                                        resolve: resolve,
                                        reject: reject
                                    })
                                }) : (_this4._concurrentHttpRequestCount++, sendDirectHttp().then(function(r) {
                                    return _this4._concurrentHttpRequestCount--, _this4._processQueuedRequests(), r
                                }).catch(function(err) {
                                    throw _this4._concurrentHttpRequestCount--, _this4._processQueuedRequests(), err
                                }))).then(lowercaseHeaders)
                            }
                        }, {
                            key: "_processQueuedRequests",
                            value: function() {
                                for (; 0 < this._requestQueue.length && (this._twilsockIsAvailable || this._concurrentHttpRequestCount < this._concurrentHttpRequestLimit);) {
                                    var r = this._requestQueue.shift();
                                    this._oneOfBasedOnChannelAvailability(r.sendingOptions, !1).then(r.resolve).catch(r.reject)
                                }
                            }
                        }, {
                            key: "_get",
                            value: function(uri, headers, forceTwilsock) {
                                var _this5 = this;
                                return this._oneOfBasedOnChannelAvailability({
                                    sendViaTwilsock: function() {
                                        return _this5._twilsock.send(twilsockParams("GET", uri, headers)).then(adaptTwilsockResponse)
                                    },
                                    sendDirectHttp: function() {
                                        return _this5._http.get(httpParams(uri, headers)).then(adaptHttpResponse)
                                    }
                                }, forceTwilsock)
                            }
                        }, {
                            key: "post",
                            value: function(uri, headers, body, forceTwilsock) {
                                var _this6 = this;
                                return this._oneOfBasedOnChannelAvailability({
                                    sendViaTwilsock: function() {
                                        return _this6._twilsock.send(twilsockParams("POST", uri, headers, body)).then(adaptTwilsockResponse)
                                    },
                                    sendDirectHttp: function() {
                                        return _this6._http.post(httpParams(uri, headers, body)).then(adaptHttpResponse)
                                    }
                                }, forceTwilsock)
                            }
                        }, {
                            key: "put",
                            value: function(uri, headers, body, forceTwilsock) {
                                var _this7 = this;
                                return this._oneOfBasedOnChannelAvailability({
                                    sendViaTwilsock: function() {
                                        return _this7._twilsock.send(twilsockParams("PUT", uri, headers, body)).then(adaptTwilsockResponse)
                                    },
                                    sendDirectHttp: function() {
                                        return _this7._http.put(httpParams(uri, headers, body)).then(adaptHttpResponse)
                                    }
                                }, forceTwilsock)
                            }
                        }, {
                            key: "delete",
                            value: function(uri, headers, forceTwilsock) {
                                var _this8 = this;
                                return this._oneOfBasedOnChannelAvailability({
                                    sendViaTwilsock: function() {
                                        return _this8._twilsock.send(twilsockParams("DELETE", uri, headers)).then(adaptTwilsockResponse)
                                    },
                                    sendDirectHttp: function() {
                                        return _this8._http.delete(httpParams(uri, headers)).then(adaptHttpResponse)
                                    }
                                }, forceTwilsock)
                            }
                        }]), Transport
                    }();
                exports.default = Transport, exports.Transport = Transport, exports.TwilsockUnavailableError = TwilsockUnavailableError
            }, {
                "./httprequest": 272,
                "babel-runtime/core-js/array/from": 31,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/create": 38,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/define-property": 40,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/object/keys": 43,
                "babel-runtime/core-js/object/set-prototype-of": 44,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/core-js/reflect/construct": 46,
                "babel-runtime/helpers/typeof": 56
            }],
            274: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                    _set2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/set")),
                    _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                    _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                    _events2 = _interopRequireDefault(_dereq_("events")),
                    _logger2 = _interopRequireDefault(_dereq_("./logger")),
                    _uuid2 = _interopRequireDefault(_dereq_("uuid")),
                    _configuration2 = _interopRequireDefault(_dereq_("./configuration")),
                    _twilsock2 = _interopRequireDefault(_dereq_("./twilsock")),
                    _packetinterface2 = _interopRequireDefault(_dereq_("./packetinterface"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var TwilsockClient = function(_EventEmitter) {
                    function TwilsockClient(token, options) {
                        (0, _classCallCheck3.default)(this, TwilsockClient);
                        var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockClient.__proto__ || (0, _getPrototypeOf2.default)(TwilsockClient)).call(this));
                        (options = options || {}).logLevel = options.logLevel || "error", _logger2.default.setLevel(options.logLevel);
                        var config = new _configuration2.default(token, options),
                            twilsock = new _twilsock2.default(config),
                            packetInterface = new _packetinterface2.default(twilsock);
                        return (0, _defineProperties2.default)(_this, {
                            _config: {
                                value: config
                            },
                            _socket: {
                                value: twilsock
                            },
                            _packet: {
                                value: packetInterface
                            },
                            _registrations: {
                                value: new _map2.default
                            },
                            _registrationsInProgress: {
                                value: new _map2.default
                            },
                            isConnected: {
                                get: function() {
                                    return _this._socket.isConnected
                                }
                            },
                            connected: {
                                get: function() {
                                    return _this._socket.isConnected
                                }
                            },
                            state: {
                                get: function() {
                                    return _this._socket.state
                                }
                            }
                        }), _this._socket.on("message", function(type, message) {
                            return setTimeout(function() {
                                _this.emit("message", type, message)
                            }, 0)
                        }), _this._socket.on("connected", function() {
                            return _this._updateRegistrations()
                        }), _this._socket.on("connected", function() {
                            return _this.emit("connected")
                        }), _this._socket.on("disconnected", function() {
                            return _this.emit("disconnected")
                        }), _this._socket.on("stateChanged", function(state) {
                            return _this.emit("stateChanged", state)
                        }), _this
                    }
                    return (0, _inherits3.default)(TwilsockClient, _EventEmitter), (0, _createClass3.default)(TwilsockClient, [{
                        key: "send",
                        value: function(message) {
                            return this._packet.send(message.to, message.headers, message.body)
                        }
                    }, {
                        key: "updateToken",
                        value: function(token) {
                            return _logger2.default.info("updateToken"), this._config.token === token || (this._config.updateToken(token), this._socket.updateToken()), _promise2.default.resolve()
                        }
                    }, {
                        key: "_updateRegistration",
                        value: function(contextId, context) {
                            var _this2 = this;
                            _logger2.default.info("update registration for context", contextId);
                            var registrationAttempts = this._registrationsInProgress.get(contextId);
                            registrationAttempts || (registrationAttempts = new _set2.default, this._registrationsInProgress.set(contextId, registrationAttempts));
                            var attemptId = _uuid2.default.v4();
                            return registrationAttempts.add(attemptId), this._packet.putNotificationContext(contextId, context).then(function() {
                                _logger2.default.info("registration attempt succeeded for context", context), registrationAttempts.delete(attemptId), 0 === (void 0 !== registrationAttempts.size ? registrationAttempts.size : (registrationAttempts._c || {}).size) && (_this2._registrationsInProgress.delete(contextId), _this2.emit("registered", contextId))
                            }).catch(function(err) {
                                _logger2.default.info("registration attempt failed for context", context), _logger2.default.debug(err), registrationAttempts.delete(attemptId), 0 === (void 0 !== registrationAttempts.size ? registrationAttempts.size : (registrationAttempts._c || {}).size) && (_this2._registrationsInProgress.delete(contextId), _this2.emit("registrationFailed", contextId, err))
                            })
                        }
                    }, {
                        key: "_updateRegistrations",
                        value: function() {
                            var _this3 = this;
                            _logger2.default.info("refreshing all registrations"), this._registrations.forEach(function(context, id) {
                                _this3._updateRegistration(id, context)
                            })
                        }
                    }, {
                        key: "setNotificationsContext",
                        value: function(contextId, context) {
                            if (!contextId || !context) throw new Error("Invalid arguments provided");
                            this._registrations.set(contextId, context), this._socket.isConnected && this._updateRegistration(contextId, context)
                        }
                    }, {
                        key: "removeNotificationsContext",
                        value: function(contextId) {
                            this._registrations.has(contextId) && (this._registrations.delete(contextId), this._socket.isConnected && this._packet.deleteNotificationContext(contextId))
                        }
                    }, {
                        key: "connect",
                        value: function() {
                            return this._socket.connect()
                        }
                    }, {
                        key: "disconnect",
                        value: function() {
                            return this._socket.disconnect()
                        }
                    }]), TwilsockClient
                }(_events2.default);
                exports.default = TwilsockClient, (0, _freeze2.default)(TwilsockClient), module.exports = exports.default
            }, {
                "./configuration": 275,
                "./logger": 277,
                "./packetinterface": 278,
                "./twilsock": 279,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/core-js/set": 47,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                events: 214,
                uuid: 283
            }],
            275: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }
                var TwilsockConfig = function() {
                    function TwilsockConfig(token, options) {
                        var _this = this;
                        (0, _classCallCheck3.default)(this, TwilsockConfig);
                        var twilsockUri = ((options = options || {}).Twilsock || {}).uri || options.wsServer || "wss://tsock.twilio.com";
                        (0, _defineProperties2.default)(this, {
                            _twilsockWsHost: {
                                value: twilsockUri + "/v3/wsconnect"
                            },
                            _token: {
                                value: token,
                                writable: !0
                            },
                            twilsockUri: {
                                get: function() {
                                    return _this._twilsockWsHost
                                }
                            },
                            token: {
                                get: function() {
                                    return _this._token
                                }
                            }
                        })
                    }
                    return (0, _createClass3.default)(TwilsockConfig, [{
                        key: "updateToken",
                        value: function(token) {
                            this._token = token
                        }
                    }]), TwilsockConfig
                }();
                exports.default = TwilsockConfig, module.exports = exports.default
            }, {
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            276: [function(_dereq_, module, exports) {
                arguments[4][242][0].apply(exports, arguments)
            }, {
                "./client": 274,
                dup: 242
            }],
            277: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _from2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/array/from")),
                    _loglevel2 = _interopRequireDefault(_dereq_("loglevel"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }

                function prepareLine(prefix, args) {
                    return [prefix].concat((0, _from2.default)(args))
                }
                exports.default = {
                    setLevel: function(level) {
                        _loglevel2.default.setLevel(level)
                    },
                    trace: function() {
                        _loglevel2.default.trace.apply(null, prepareLine("Twilsock T:", arguments))
                    },
                    debug: function() {
                        _loglevel2.default.debug.apply(null, prepareLine("Twilsock D:", arguments))
                    },
                    info: function() {
                        _loglevel2.default.info.apply(null, prepareLine("Twilsock I:", arguments))
                    },
                    warn: function() {
                        _loglevel2.default.warn.apply(null, prepareLine("Twilsock W:", arguments))
                    },
                    error: function() {
                        _loglevel2.default.error.apply(null, prepareLine("Twilsock E:", arguments))
                    }
                }, module.exports = exports.default
            }, {
                "babel-runtime/core-js/array/from": 31,
                loglevel: 219
            }],
            278: [function(_dereq_, module, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", {
                    value: !0
                });
                var _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                    _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                    _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                    _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                    _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                    _logger2 = _interopRequireDefault(_dereq_("./logger"));

                function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                        default: obj
                    }
                }

                function isHttpSuccess(code) {
                    return 200 <= code && code < 300
                }
                var PacketInterface = function() {
                    function PacketInterface(socket) {
                        var _this = this;
                        (0, _classCallCheck3.default)(this, PacketInterface), (0, _defineProperties2.default)(this, {
                            _activeRequests: {
                                value: new _map2.default
                            },
                            _socket: {
                                value: socket
                            }
                        }), this._socket.on("reply", this._processReply.bind(this)), this._socket.on("disconnected", function() {
                            _this._activeRequests.forEach(function(descriptor) {
                                clearTimeout(descriptor.timeout), descriptor.reject(new Error("Twilsock disconnected"))
                            }), _this._activeRequests.clear()
                        })
                    }
                    return (0, _createClass3.default)(PacketInterface, [{
                        key: "_processReply",
                        value: function(reply) {
                            var request = this._activeRequests.get(reply.id);
                            request && (clearTimeout(request.timeout), this._activeRequests.delete(reply.id), setTimeout(function() {
                                var packet;
                                isHttpSuccess(reply.status.code) ? (packet = reply) && packet.header && packet.header.http_status && !isHttpSuccess(reply.header.http_status.code) ? request.reject({
                                    status: reply.header.http_status.code,
                                    description: reply.header.http_status.status,
                                    body: reply.body
                                }) : request.resolve(reply) : request.reject(new Error("Transport failure: " + reply.status.status))
                            }, 0))
                        }
                    }, {
                        key: "_storeRequest",
                        value: function(id, resolve, reject) {
                            var requestDescriptor = {
                                resolve: resolve,
                                reject: reject,
                                timeout: setTimeout(function() {
                                    _logger2.default.debug("request", id, "is timed out"), reject(new Error("Twilsock: request timeout: " + id))
                                }, 3e4)
                            };
                            this._activeRequests.set(id, requestDescriptor)
                        }
                    }, {
                        key: "send",
                        value: function(address, headers, body) {
                            var _this2 = this;
                            return new _promise2.default(function(resolve, reject) {
                                _this2._socket.isConnected || (_logger2.default.info("Can not send upstream message. Twilsock is not in connected state"), reject(new Error("Twilsock is not connected")));
                                var id = _this2._socket.sendUpstreamMessage(address, headers, body);
                                _logger2.default.trace("message sent: ", {
                                    id: id,
                                    address: address,
                                    headers: headers,
                                    body: body
                                }), _this2._storeRequest(id, resolve, reject)
                            })
                        }
                    }, {
                        key: "putNotificationContext",
                        value: function(contextId, context) {
                            var _this3 = this;
                            return new _promise2.default(function(resolve, reject) {
                                _this3._socket.isConnected || (_logger2.default.info("Can not send put notification context. Twilsock is not in connected state"), reject(new Error("Twilsock is not connected")));
                                var header = {
                                        method: "put_notification_ctx",
                                        notification_ctx_id: contextId
                                    },
                                    id = _this3._socket.send(header, context);
                                _this3._storeRequest(id, resolve, reject)
                            })
                        }
                    }, {
                        key: "deleteNotificationContext",
                        value: function(contextId) {
                            var _this4 = this;
                            return new _promise2.default(function(resolve, reject) {
                                _this4._socket.isConnected || (_logger2.default.info("Can not send delete notification context. Twilsock is not in connected state"), reject(new Error("Twilsock is not connected")));
                                var packet = {
                                        method: "delete_notification_ctx",
                                        notification_ctx_id: contextId
                                    },
                                    id = _this4._socket.send(packet);
                                _this4._storeRequest(id, resolve, reject)
                            })
                        }
                    }, {
                        key: "shutdown",
                        value: function() {
                            this._activeRequests.forEach(function(descriptor) {
                                clearTimeout(descriptor.timeout), descriptor.reject(new Error("Twilsock: request cancelled by user"))
                            }), this._activeRequests.clear()
                        }
                    }]), PacketInterface
                }();
                exports.default = PacketInterface, module.exports = exports.default
            }, {
                "./logger": 277,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51
            }],
            279: [function(_dereq_, module, exports) {
                (function(global) {
                    "use strict";
                    Object.defineProperty(exports, "__esModule", {
                        value: !0
                    });
                    var _freeze2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/freeze")),
                        _promise2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/promise")),
                        _slicedToArray3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/slicedToArray")),
                        _getIterator3 = _interopRequireDefault(_dereq_("babel-runtime/core-js/get-iterator")),
                        _map2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/map")),
                        _defineProperties2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/define-properties")),
                        _getPrototypeOf2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/object/get-prototype-of")),
                        _classCallCheck3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/classCallCheck")),
                        _createClass3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/createClass")),
                        _possibleConstructorReturn3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/possibleConstructorReturn")),
                        _inherits3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/inherits")),
                        _stringify2 = _interopRequireDefault(_dereq_("babel-runtime/core-js/json/stringify")),
                        _typeof3 = _interopRequireDefault(_dereq_("babel-runtime/helpers/typeof")),
                        _events2 = _interopRequireDefault(_dereq_("events")),
                        _logger2 = _interopRequireDefault(_dereq_("./logger")),
                        _uuid2 = _interopRequireDefault(_dereq_("uuid")),
                        _backoff2 = _interopRequireDefault(_dereq_("backoff")),
                        _javascriptStateMachine2 = _interopRequireDefault(_dereq_("javascript-state-machine"));

                    function _interopRequireDefault(obj) {
                        return obj && obj.__esModule ? obj : {
                            default: obj
                        }
                    }
                    var WebSocket = global.WebSocket || global.MozWebSocket || _dereq_("ws");

                    function byteLength(s) {
                        return encodeURIComponent(s).replace(/%([0-9A-F]{2})/g, function(match, p1) {
                            return String.fromCharCode("0x" + p1)
                        }).length
                    }

                    function uint8ArrayToString(ua) {
                        var escstr = Array.prototype.map.call(ua, function(ch) {
                            return String.fromCharCode(ch)
                        }).join("").replace(/(.)/g, function(m, p) {
                            var code = p.charCodeAt(0).toString(16).toUpperCase();
                            return code.length < 2 && (code = "0" + code), "%" + code
                        });
                        return decodeURIComponent(escstr)
                    }

                    function getJsonObject(array) {
                        var str = uint8ArrayToString(array);
                        try {
                            return JSON.parse(str)
                        } catch (e) {
                            throw _logger2.default.error("failed to parse input: ", str), e
                        }
                    }
                    var TwilsockChannel = function(_EventEmitter) {
                        function TwilsockChannel(config) {
                            (0, _classCallCheck3.default)(this, TwilsockChannel);
                            var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockChannel.__proto__ || (0, _getPrototypeOf2.default)(TwilsockChannel)).call(this));
                            config.logLevel && _logger2.default.setLevel(config.logLevel);
                            var backoff = _backoff2.default.exponential({
                                randomisationFactor: .2,
                                initialDelay: 2e3,
                                maxDelay: 12e4
                            });
                            return backoff.on("ready", function() {
                                _this._retry()
                            }), _this.on("reply", function(reply) {
                                _this._processReply(reply)
                            }), (0, _defineProperties2.default)(_this, {
                                _config: {
                                    value: config
                                },
                                _transportReady: {
                                    value: !1,
                                    writable: !0
                                },
                                _disconnectedPromiseResolve: {
                                    value: null,
                                    writable: !0
                                },
                                _backoffDefault: {
                                    value: backoff
                                },
                                _backoff: {
                                    value: backoff,
                                    writable: !0
                                },
                                _fsm: {
                                    value: null,
                                    writable: !0
                                },
                                _watchTimer: {
                                    value: null,
                                    writable: !0
                                },
                                _timestamp: {
                                    value: 0,
                                    writable: !0
                                },
                                _socket: {
                                    value: null,
                                    writable: !0
                                },
                                _activeToken: {
                                    value: null,
                                    writable: !0
                                },
                                activeToken: {
                                    enumerable: !0,
                                    get: function() {
                                        return _this._activeToken
                                    }
                                },
                                state: {
                                    enumberable: !0,
                                    get: function() {
                                        return _this._getState()
                                    }
                                },
                                isConnected: {
                                    enumberable: !0,
                                    get: function() {
                                        return _this._isConnected()
                                    }
                                },
                                _activeRequests: {
                                    value: new _map2.default
                                },
                                _disconnectingTimer: {
                                    value: null,
                                    writable: !0
                                },
                                _isDeferredUpdate: {
                                    value: !1,
                                    writable: !0
                                }
                            }), _this._fsm = _javascriptStateMachine2.default.create({
                                initial: "disconnected",
                                events: [{
                                    name: "userConnect",
                                    from: ["disconnected", "rejected"],
                                    to: "connecting"
                                }, {
                                    name: "userConnect",
                                    from: ["connecting", "connected"]
                                }, {
                                    name: "userDisconnect",
                                    from: ["connecting", "initialising", "connected", "updating", "retrying", "rejected", "waitSocketClosed", "waitOffloadSocketClosed"],
                                    to: "disconnecting"
                                }, {
                                    name: "userRetry",
                                    from: ["retrying"],
                                    to: "connecting"
                                }, {
                                    name: "socketConnected",
                                    from: ["connecting"],
                                    to: "initialising"
                                }, {
                                    name: "socketClosed",
                                    from: ["connecting", "initialising", "connected", "updating", "error", "waitOffloadSocketClosed"],
                                    to: "retrying"
                                }, {
                                    name: "socketClosed",
                                    from: ["disconnecting"],
                                    to: "disconnected"
                                }, {
                                    name: "socketClosed",
                                    from: ["waitSocketClosed"],
                                    to: "disconnected"
                                }, {
                                    name: "socketClosed",
                                    from: ["rejected"],
                                    to: "rejected"
                                }, {
                                    name: "initSuccess",
                                    from: ["initialising"],
                                    to: "connected"
                                }, {
                                    name: "initError",
                                    from: ["initialising"],
                                    to: "error"
                                }, {
                                    name: "tokenRejected",
                                    from: ["initialising", "updating"],
                                    to: "rejected"
                                }, {
                                    name: "protocolError",
                                    from: ["initialising", "connected", "updating"],
                                    to: "error"
                                }, {
                                    name: "receiveClose",
                                    from: ["initialising", "connected", "updating"],
                                    to: "waitSocketClosed"
                                }, {
                                    name: "receiveOffload",
                                    from: ["initialising", "connected", "updating"],
                                    to: "waitOffloadSocketClosed"
                                }, {
                                    name: "unsupportedProtocol",
                                    from: ["initialising", "connected", "updating"],
                                    to: "unsupported"
                                }, {
                                    name: "receiveFatalClose",
                                    from: ["initialising", "connected", "updating"],
                                    to: "unsupported"
                                }, {
                                    name: "userUpdateToken",
                                    from: ["disconnected", "rejected", "connecting", "retrying"],
                                    to: "connecting"
                                }, {
                                    name: "userUpdateToken",
                                    from: ["connected"],
                                    to: "updating"
                                }, {
                                    name: "updateSuccess",
                                    from: ["updating"],
                                    to: "connected"
                                }, {
                                    name: "updateError",
                                    from: ["updating"],
                                    to: "error"
                                }],
                                callbacks: {
                                    onconnecting: function() {
                                        _this._startWatchdogTimer(), _this._setupSocket(), _this.emit("connecting")
                                    },
                                    onenterinitialising: function() {
                                        _this._sendInit()
                                    },
                                    onleaveinitialising: function() {
                                        _this._cancelInit()
                                    },
                                    onenterupdating: function() {
                                        _this._sendUpdate()
                                    },
                                    onleaveupdating: function() {
                                        _this._cancelUpdate()
                                    },
                                    onenterretrying: function() {
                                        _this._initRetry(), _this.emit("connecting")
                                    },
                                    onenterconnected: function() {
                                        _this._resetBackoff(), _this._onConnected()
                                    },
                                    onuserUpdateToken: function() {
                                        _this._resetBackoff()
                                    },
                                    ontokenRejected: function() {
                                        _this._resetBackoff(), _this._closeSocket(), _this._finalizeSocket()
                                    },
                                    onuserDisconnect: function() {
                                        _this._closeSocket()
                                    },
                                    onenterdisconnecting: function() {
                                        _this._startDisconnectTimer()
                                    },
                                    onleavedisconnecting: function() {
                                        _this._cancelDisconnectTimer()
                                    },
                                    onenterwaitSocketClosed: function() {
                                        _this._startDisconnectTimer()
                                    },
                                    onleavewaitSocketClosed: function() {
                                        _this._cancelDisconnectTimer()
                                    },
                                    onenterwaitOffloadSocketClosed: function() {
                                        _this._startDisconnectTimer()
                                    },
                                    onleavewaitOffloadSocketClosed: function() {
                                        _this._cancelDisconnectTimer()
                                    },
                                    ondisconnected: function() {
                                        _this._resetBackoff(), _this._finalizeSocket()
                                    },
                                    onreceiveClose: function(event, from, to, args) {
                                        _logger2.default.debug("onreceiveClose: ", args), _this._onCloseReceived(args)
                                    },
                                    onreceiveOffload: function(event, from, to, args) {
                                        _logger2.default.debug("onreceiveoffload: ", args), _this._modifyBackoff(args.body), _this._onCloseReceived(args.status)
                                    },
                                    onunsupported: function() {
                                        _this._closeSocket(), _this._finalizeSocket()
                                    },
                                    onerror: function() {
                                        _this._closeSocket(), _this._finalizeSocket()
                                    },
                                    onenterstate: function(event, from, to) {
                                        _this._changeState(event, from, to)
                                    }
                                },
                                error: function() {
                                    _logger2.default.warn("FSM: unexpected transition", arguments)
                                }
                            }), _this
                        }
                        return (0, _inherits3.default)(TwilsockChannel, _EventEmitter), (0, _createClass3.default)(TwilsockChannel, [{
                            key: "_changeState",
                            value: function(event, from, to) {
                                var _this2 = this;
                                _logger2.default.debug("FSM: ", event, ": ", from, ">>", to), this.emit("stateChanged", this.state), this._isDeferredUpdate && (this._isDeferredUpdate = !1, setTimeout(function() {
                                    _this2.updateToken()
                                }, 0))
                            }
                        }, {
                            key: "_resetBackoff",
                            value: function() {
                                _logger2.default.trace("_resetBackoff"), this._backoff = this._backoffDefault, this._backoff.reset()
                            }
                        }, {
                            key: "_modifyBackoff",
                            value: function(body) {
                                _logger2.default.trace("_modifyBackoff", body);
                                var backoffPolicy = body ? body.backoff_policy : null;
                                if (backoffPolicy) {
                                    var min = backoffPolicy.reconnect_min_ms || 2e3,
                                        max = backoffPolicy.reconnect_max_ms || 12e4;
                                    _logger2.default.debug("new backoff policy", min, max), this._backoff = _backoff2.default.exponential({
                                        randomisationFactor: .2,
                                        initialDelay: min,
                                        maxDelay: max
                                    })
                                }
                            }
                        }, {
                            key: "_startDisconnectTimer",
                            value: function() {
                                var _this3 = this;
                                _logger2.default.trace("_startDisconnectTimer"), this._disconnectingTimer && (clearTimeout(this._disconnectingTimer), this._disconnectingTimer = null), this._disconnectingTimer = setTimeout(function() {
                                    _logger2.default.debug("disconnecting is timed out"), _this3._closeSocket()
                                }, 3e3)
                            }
                        }, {
                            key: "_cancelDisconnectTimer",
                            value: function() {
                                _logger2.default.trace("_cancelDisconnectTimer"), this._disconnectingTimer && (clearTimeout(this._disconnectingTimer), this._disconnectingTimer = null)
                            }
                        }, {
                            key: "_processReply",
                            value: function(reply) {
                                _logger2.default.debug("receive reply:", reply);
                                var request = this._activeRequests.get(reply.id);
                                if (request) switch (clearTimeout(request.timeout), this._activeRequests.delete(reply.id), request.reqType) {
                                    case "init":
                                        200 <= reply.status.code && reply.status.code < 300 ? this._fsm.initSuccess(reply.body) : 401 === reply.status.code || 403 === reply.status.code ? this._fsm.tokenRejected(reply.status) : (429 === reply.status.code && this._modifyBackoff(reply.body), this._fsm.initError(reply.status));
                                        break;
                                    case "update":
                                        200 <= reply.status.code && reply.status.code < 300 ? this._fsm.updateSuccess(reply.body) : 401 === reply.status.code || 403 === reply.status.code ? this._fsm.tokenRejected(reply.status) : (429 === reply.status.code && this._modifyBackoff(reply.body), this._fsm.updateError(reply.status));
                                        break;
                                    default:
                                        _logger2.default.error("unexpected reply")
                                }
                            }
                        }, {
                            key: "_storeRequest",
                            value: function(id, type, timeoutMs) {
                                var _this4 = this;
                                _logger2.default.trace("_storeRequest");
                                var requestDescriptor = {
                                    reqType: type,
                                    timeout: setTimeout(function() {
                                        _logger2.default.debug("request", type, ": ", id, "is timed out"), "init" !== type && "update" !== type && _logger2.default.error("unknown request type", type), _this4._closeSocket()
                                    }, timeoutMs)
                                };
                                this._activeRequests.set(id, requestDescriptor)
                            }
                        }, {
                            key: "_isConnected",
                            value: function() {
                                return this.state === TwilsockChannel.state.CONNECTED && this._socket && 1 === this._socket.readyState
                            }
                        }, {
                            key: "_getState",
                            value: function() {
                                if (!this._fsm) return TwilsockChannel.state.DISCONNECTED;
                                switch (this._fsm.current) {
                                    case "connecting":
                                    case "initialising":
                                    case "retrying":
                                    case "error":
                                        return TwilsockChannel.state.CONNECTING;
                                    case "updating":
                                    case "connected":
                                        return TwilsockChannel.state.CONNECTED;
                                    case "rejected":
                                        return TwilsockChannel.state.REJECTED;
                                    case "disconnecting":
                                    case "waitSocketClosed":
                                    case "waitOffloadSocketClosed":
                                        return TwilsockChannel.state.DISCONNECTING;
                                    case "disconnected":
                                    default:
                                        return TwilsockChannel.state.DISCONNECTED
                                }
                            }
                        }, {
                            key: "_initRetry",
                            value: function() {
                                _logger2.default.trace("_initRetry"), this._backoff.backoff()
                            }
                        }, {
                            key: "_retry",
                            value: function() {
                                _logger2.default.trace("_retry"), this._socket = null, this._activeToken = null, this._fsm.userRetry()
                            }
                        }, {
                            key: "_onConnected",
                            value: function() {
                                this.emit("connected")
                            }
                        }, {
                            key: "_finalizeSocket",
                            value: function() {
                                if (_logger2.default.trace("_finalizeSocket"), this._stopWatchdogTimer(), this._onDisconnected(), this._disconnectedPromiseResolve) {
                                    var resolve = this._disconnectedPromiseResolve;
                                    this._disconnectedPromiseResolve = null, resolve()
                                }
                            }
                        }, {
                            key: "_onDisconnected",
                            value: function() {
                                this._socket = null, this._activeToken = null, this.emit("disconnected")
                            }
                        }, {
                            key: "_setupSocket",
                            value: function() {
                                _logger2.default.trace("_setupSocket:", this._config.token);
                                var self = this,
                                    uri = this._config.twilsockUri;
                                _logger2.default.debug("try to connect to:", uri);
                                var socket = new WebSocket(uri);
                                socket.binaryType = "arraybuffer", socket.onopen = function() {
                                    _logger2.default.info("socket opened"), self._fsm.socketConnected()
                                }, socket.onclose = function(e) {
                                    _logger2.default.info("socket closed", e), self._fsm.socketClosed()
                                }, socket.onerror = function(e) {
                                    _logger2.default.error("error: ", e)
                                }, socket.onmessage = function(message) {
                                    _logger2.default.trace("data: ", message.data);
                                    var dataView = new Uint8Array(message.data),
                                        magic = function(buffer) {
                                            for (var strMagic = "", idx = 0; idx < buffer.length; ++idx) {
                                                var chr = String.fromCharCode(buffer[idx]);
                                                if (strMagic += chr, "\r" === chr) {
                                                    idx += 2;
                                                    break
                                                }
                                            }
                                            var magics = strMagic.split(" ");
                                            return {
                                                size: idx,
                                                protocol: magics[0],
                                                version: magics[1],
                                                headerSize: Number(magics[2])
                                            }
                                        }(dataView);
                                    if ("TWILSOCK" !== magic.protocol || "V3.0" !== magic.version) return _logger2.default.error("unsupported protocol: " + magic.protocol + " ver " + magic.version), void self._fsm.unsupportedProtocol();
                                    var header = null;
                                    try {
                                        header = getJsonObject(dataView.subarray(magic.size, magic.size + magic.headerSize))
                                    } catch (e) {
                                        return _logger2.default.error("failed to parse message header", e, message), void self._fsm.protocolError()
                                    }
                                    _logger2.default.trace("message received: ", header);
                                    var payload = null;
                                    if (0 < header.payload_size) {
                                        var payloadOffset = 2 + magic.size + magic.headerSize,
                                            payloadSize = header.payload_size;
                                        if (header.hasOwnProperty("payload_type") && 0 !== header.payload_type.indexOf("application/json")) 0 === header.payload_type.indexOf("text/plain") && (payload = uint8ArrayToString(dataView.subarray(payloadOffset, payloadOffset + payloadSize)));
                                        else try {
                                            payload = getJsonObject(dataView.subarray(payloadOffset, payloadOffset + payloadSize))
                                        } catch (e) {
                                            return _logger2.default.error("failed to parse message body", e, message), void self._fsm.protocolError()
                                        }
                                    }
                                    self._updateActivityTimestamp(), "notification" === header.method ? (self._confirmReceiving(header), self.emit("message", header.message_type, payload)) : "reply" === header.method ? self.emit("reply", {
                                        id: header.id,
                                        status: header.status,
                                        header: header,
                                        body: payload
                                    }) : "ping" === header.method ? self._confirmReceiving(header) : "close" === header.method && (_logger2.default.trace("connection close initated by server"), self._confirmReceiving(header), 308 === header.status.code ? (_logger2.default.info("connection has been offloaded"), self._fsm.receiveOffload({
                                        status: header.status.status,
                                        body: payload
                                    })) : 406 === header.status.code ? (_logger2.default.error("connection has been rejected because server can not parse protocol"), self._fsm.receiveFatalClose()) : 417 === header.status.code ? (_logger2.default.info("connection has been rejected because server could not understand client`s reply"), self._fsm.receiveFatalClose(header.status.status)) : 410 === header.status.code ? (_logger2.default.info("connection has expired"), self._fsm.receiveClose(header.status.status)) : 401 === header.status.code ? (_logger2.default.info("connection is not authenticate"), self._fsm.receiveClose(header.status.status)) : (_logger2.default.error("unexpected close: ", header.status), self._fsm.receiveOffload({
                                        status: header.status.status,
                                        body: null
                                    })))
                                }, this._activeToken = this._config.token, this._socket = socket
                            }
                        }, {
                            key: "_sendInit",
                            value: function() {
                                _logger2.default.trace("_sendInit");
                                var header = {
                                    id: _uuid2.default.v4(),
                                    method: "init",
                                    token: this._activeToken
                                };
                                this._sendPacket(header), this._storeRequest(header.id, "init", 5e3)
                            }
                        }, {
                            key: "_sendUpdate",
                            value: function() {
                                _logger2.default.trace("_sendUpdate");
                                var header = {
                                    id: _uuid2.default.v4(),
                                    method: "update",
                                    token: this._activeToken
                                };
                                this._sendPacket(header), this._storeRequest(header.id, "update", 5e3)
                            }
                        }, {
                            key: "_cancelInit",
                            value: function() {
                                _logger2.default.trace("_cancelInit");
                                var _iteratorNormalCompletion = !0,
                                    _didIteratorError = !1,
                                    _iteratorError = void 0;
                                try {
                                    for (var _step, _iterator = (0, _getIterator3.default)(this._activeRequests); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = !0) {
                                        var _step$value = (0, _slicedToArray3.default)(_step.value, 2),
                                            id = _step$value[0],
                                            request = _step$value[1];
                                        request && "init" === request.reqType && (clearTimeout(request.timeout), this._activeRequests.delete(id))
                                    }
                                } catch (err) {
                                    _didIteratorError = !0, _iteratorError = err
                                } finally {
                                    try {
                                        !_iteratorNormalCompletion && _iterator.return && _iterator.return()
                                    } finally {
                                        if (_didIteratorError) throw _iteratorError
                                    }
                                }
                            }
                        }, {
                            key: "_cancelUpdate",
                            value: function() {
                                _logger2.default.trace("_cancelUpdate");
                                var _iteratorNormalCompletion2 = !0,
                                    _didIteratorError2 = !1,
                                    _iteratorError2 = void 0;
                                try {
                                    for (var _step2, _iterator2 = (0, _getIterator3.default)(this._activeRequests); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = !0) {
                                        var _step2$value = (0, _slicedToArray3.default)(_step2.value, 2),
                                            id = _step2$value[0],
                                            request = _step2$value[1];
                                        request && "update" === request.reqType && (clearTimeout(request.timeout), this._activeRequests.delete(id))
                                    }
                                } catch (err) {
                                    _didIteratorError2 = !0, _iteratorError2 = err
                                } finally {
                                    try {
                                        !_iteratorNormalCompletion2 && _iterator2.return && _iterator2.return()
                                    } finally {
                                        if (_didIteratorError2) throw _iteratorError2
                                    }
                                }
                            }
                        }, {
                            key: "_confirmReceiving",
                            value: function(messageHeader) {
                                _logger2.default.trace("_confirmReceiving");
                                var header = {
                                    method: "reply",
                                    id: messageHeader.id,
                                    payload_type: "application/json",
                                    status: {
                                        code: 200,
                                        status: "OK"
                                    }
                                };
                                try {
                                    this._sendPacket(header)
                                } catch (e) {
                                    _logger2.default.debug("failed to confirm packet receiving", e)
                                }
                            }
                        }, {
                            key: "_sendPacket",
                            value: function(header, payload) {
                                var payloadString = function(payload) {
                                    switch (void 0 === payload ? "undefined" : (0, _typeof3.default)(payload)) {
                                        case "undefined":
                                            return "";
                                        case "object":
                                            return (0, _stringify2.default)(payload);
                                        default:
                                            return payload
                                    }
                                }(payload);
                                header.payload_size = byteLength(payloadString);
                                var headerString = (0, _stringify2.default)(header) + "\r\n",
                                    magicString = "TWILSOCK V3.0 " + (byteLength(headerString) - 2) + "\r\n";
                                _logger2.default.debug("send request:", magicString + headerString + payloadString);
                                var binstr, ua, message = (binstr = encodeURIComponent(magicString + headerString + payloadString).replace(/%([0-9A-F]{2})/g, function(match, p1) {
                                    return String.fromCharCode("0x" + p1)
                                }), ua = new Uint8Array(binstr.length), Array.prototype.forEach.call(binstr, function(ch, i) {
                                    ua[i] = ch.charCodeAt(0)
                                }), ua);
                                try {
                                    this._socket.send(message.buffer)
                                } catch (e) {
                                    throw _logger2.default.info("failed to send ", header, e), _logger2.default.info(e.stack), e
                                }
                            }
                        }, {
                            key: "_closeSocket",
                            value: function() {
                                _logger2.default.trace("_closeSocket"), this._socket && (this._socket.onopen = null, this._socket.onclose = null, this._socket.onerror = null, this._socket.onmessage = null, this._socket.close()), this._fsm.socketClosed()
                            }
                        }, {
                            key: "connect",
                            value: function() {
                                _logger2.default.trace("connect"), this._fsm.userConnect()
                            }
                        }, {
                            key: "disconnect",
                            value: function() {
                                var _this5 = this;
                                return _logger2.default.trace("disconnect"), this._fsm.is("disconnected") ? _promise2.default.resolve() : new _promise2.default(function(resolve) {
                                    _this5._disconnectedPromiseResolve = resolve, _this5._fsm.userDisconnect()
                                })
                            }
                        }, {
                            key: "updateToken",
                            value: function() {
                                if (_logger2.default.trace("updateToken:", this._config.token), "initialising" === this._fsm.current || "updating" === this._fsm.current || "waitSocketClosed" === this._fsm.current || "waitOffloadSocketClosed" === this._fsm.current) return _logger2.default.debug("defer updateToken because of", this._fsm.current, "is in progress"), void(this._isDeferredUpdate = !0);
                                this._isDeferredUpdate = !1, this._activeToken = this._config.token, this._fsm.userUpdateToken()
                            }
                        }, {
                            key: "sendUpstreamMessage",
                            value: function(address, headers, body) {
                                var id = _uuid2.default.v4(),
                                    httpRequest = {
                                        host: address.host,
                                        path: address.path,
                                        method: address.method
                                    };
                                address.hasOwnProperty("params") && (httpRequest.params = address.params);
                                var twilsockHeader = {
                                    method: "message",
                                    id: id,
                                    http_request: httpRequest
                                };
                                return headers && (twilsockHeader.http_request.headers = headers), headers && headers.hasOwnProperty("Content-Type") && (twilsockHeader.payload_type = headers["Content-Type"]), this._sendPacket(twilsockHeader, body), id
                            }
                        }, {
                            key: "send",
                            value: function(header, body) {
                                return header.id = header.id || _uuid2.default.v4(), this._sendPacket(header, body), header.id
                            }
                        }, {
                            key: "_onCloseReceived",
                            value: function(reason) {
                                _logger2.default.trace("_onCloseReceived"), _logger2.default.info("connection closed by server, reason is", reason), this._socket && (this._socket.onopen = null, this._socket.onerror = null, this._socket.onmessage = null)
                            }
                        }, {
                            key: "_startWatchdogTimer",
                            value: function() {
                                var _this6 = this;
                                _logger2.default.trace("_startWatchdogTimer"), this._timestamp = Date.now(), this._watchTimer = setInterval(function() {
                                    43e3 < Date.now() - _this6._timestamp && _this6._socket && _this6._socket.close()
                                }, 5e3)
                            }
                        }, {
                            key: "_stopWatchdogTimer",
                            value: function() {
                                _logger2.default.trace("_stopWatchdogTimer"), clearInterval(this._watchTimer)
                            }
                        }, {
                            key: "_updateActivityTimestamp",
                            value: function() {
                                _logger2.default.trace("_updateActivityTimestamp"), this._timestamp = Date.now()
                            }
                        }]), TwilsockChannel
                    }(_events2.default);
                    (exports.default = TwilsockChannel).state = {
                        DISCONNECTED: "disconnected",
                        CONNECTING: "connecting",
                        CONNECTED: "connected",
                        DISCONNECTING: "disconnecting",
                        ERROR: "error",
                        REJECTED: "rejected"
                    }, (0, _freeze2.default)(TwilsockChannel.state), (0, _freeze2.default)(TwilsockChannel), module.exports = exports.default
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {
                "./logger": 277,
                "babel-runtime/core-js/get-iterator": 32,
                "babel-runtime/core-js/json/stringify": 34,
                "babel-runtime/core-js/map": 35,
                "babel-runtime/core-js/object/define-properties": 39,
                "babel-runtime/core-js/object/freeze": 41,
                "babel-runtime/core-js/object/get-prototype-of": 42,
                "babel-runtime/core-js/promise": 45,
                "babel-runtime/helpers/classCallCheck": 50,
                "babel-runtime/helpers/createClass": 51,
                "babel-runtime/helpers/inherits": 53,
                "babel-runtime/helpers/possibleConstructorReturn": 54,
                "babel-runtime/helpers/slicedToArray": 55,
                "babel-runtime/helpers/typeof": 56,
                backoff: 58,
                events: 214,
                "javascript-state-machine": 217,
                uuid: 283,
                ws: 70
            }],
            280: [function(_dereq_, module, exports) {
                "function" == typeof Object.create ? module.exports = function(ctor, superCtor) {
                    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {
                        constructor: {
                            value: ctor,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    })
                } : module.exports = function(ctor, superCtor) {
                    ctor.super_ = superCtor;
                    var TempCtor = function() {};
                    TempCtor.prototype = superCtor.prototype, ctor.prototype = new TempCtor, ctor.prototype.constructor = ctor
                }
            }, {}],
            281: [function(_dereq_, module, exports) {
                module.exports = function(arg) {
                    return arg && "object" === _typeof4(arg) && "function" == typeof arg.copy && "function" == typeof arg.fill && "function" == typeof arg.readUInt8
                }
            }, {}],
            282: [function(_dereq_, module, exports) {
                (function(process, global) {
                    var formatRegExp = /%[sdj%]/g;
                    exports.format = function(f) {
                        if (!isString(f)) {
                            for (var objects = [], i = 0; i < arguments.length; i++) objects.push(inspect(arguments[i]));
                            return objects.join(" ")
                        }
                        i = 1;
                        for (var args = arguments, len = args.length, str = String(f).replace(formatRegExp, function(x) {
                                if ("%%" === x) return "%";
                                if (len <= i) return x;
                                switch (x) {
                                    case "%s":
                                        return String(args[i++]);
                                    case "%d":
                                        return Number(args[i++]);
                                    case "%j":
                                        try {
                                            return JSON.stringify(args[i++])
                                        } catch (_) {
                                            return "[Circular]"
                                        }
                                    default:
                                        return x
                                }
                            }), x = args[i]; i < len; x = args[++i]) isNull(x) || !isObject(x) ? str += " " + x : str += " " + inspect(x);
                        return str
                    }, exports.deprecate = function(fn, msg) {
                        if (isUndefined(global.process)) return function() {
                            return exports.deprecate(fn, msg).apply(this, arguments)
                        };
                        if (!0 === process.noDeprecation) return fn;
                        var warned = !1;
                        return function() {
                            if (!warned) {
                                if (process.throwDeprecation) throw new Error(msg);
                                process.traceDeprecation ? console.trace(msg) : console.error(msg), warned = !0
                            }
                            return fn.apply(this, arguments)
                        }
                    };
                    var debugEnviron, debugs = {};

                    function inspect(obj, opts) {
                        var ctx = {
                            seen: [],
                            stylize: stylizeNoColor
                        };
                        return 3 <= arguments.length && (ctx.depth = arguments[2]), 4 <= arguments.length && (ctx.colors = arguments[3]), isBoolean(opts) ? ctx.showHidden = opts : opts && exports._extend(ctx, opts), isUndefined(ctx.showHidden) && (ctx.showHidden = !1), isUndefined(ctx.depth) && (ctx.depth = 2), isUndefined(ctx.colors) && (ctx.colors = !1), isUndefined(ctx.customInspect) && (ctx.customInspect = !0), ctx.colors && (ctx.stylize = stylizeWithColor), formatValue(ctx, obj, ctx.depth)
                    }

                    function stylizeWithColor(str, styleType) {
                        var style = inspect.styles[styleType];
                        return style ? "[" + inspect.colors[style][0] + "m" + str + "[" + inspect.colors[style][1] + "m" : str
                    }

                    function stylizeNoColor(str, styleType) {
                        return str
                    }

                    function formatValue(ctx, value, recurseTimes) {
                        if (ctx.customInspect && value && isFunction(value.inspect) && value.inspect !== exports.inspect && (!value.constructor || value.constructor.prototype !== value)) {
                            var ret = value.inspect(recurseTimes, ctx);
                            return isString(ret) || (ret = formatValue(ctx, ret, recurseTimes)), ret
                        }
                        var primitive = function(ctx, value) {
                            if (isUndefined(value)) return ctx.stylize("undefined", "undefined");
                            if (isString(value)) {
                                var simple = "'" + JSON.stringify(value).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
                                return ctx.stylize(simple, "string")
                            }
                            if (isNumber(value)) return ctx.stylize("" + value, "number");
                            if (isBoolean(value)) return ctx.stylize("" + value, "boolean");
                            if (isNull(value)) return ctx.stylize("null", "null")
                        }(ctx, value);
                        if (primitive) return primitive;
                        var keys = Object.keys(value),
                            visibleKeys = function(array) {
                                var hash = {};
                                return array.forEach(function(val, idx) {
                                    hash[val] = !0
                                }), hash
                            }(keys);
                        if (ctx.showHidden && (keys = Object.getOwnPropertyNames(value)), isError(value) && (0 <= keys.indexOf("message") || 0 <= keys.indexOf("description"))) return formatError(value);
                        if (0 === keys.length) {
                            if (isFunction(value)) {
                                var name = value.name ? ": " + value.name : "";
                                return ctx.stylize("[Function" + name + "]", "special")
                            }
                            if (isRegExp(value)) return ctx.stylize(RegExp.prototype.toString.call(value), "regexp");
                            if (isDate(value)) return ctx.stylize(Date.prototype.toString.call(value), "date");
                            if (isError(value)) return formatError(value)
                        }
                        var output, base = "",
                            array = !1,
                            braces = ["{", "}"];
                        (isArray(value) && (array = !0, braces = ["[", "]"]), isFunction(value)) && (base = " [Function" + (value.name ? ": " + value.name : "") + "]");
                        return isRegExp(value) && (base = " " + RegExp.prototype.toString.call(value)), isDate(value) && (base = " " + Date.prototype.toUTCString.call(value)), isError(value) && (base = " " + formatError(value)), 0 !== keys.length || array && 0 != value.length ? recurseTimes < 0 ? isRegExp(value) ? ctx.stylize(RegExp.prototype.toString.call(value), "regexp") : ctx.stylize("[Object]", "special") : (ctx.seen.push(value), output = array ? function(ctx, value, recurseTimes, visibleKeys, keys) {
                            for (var output = [], i = 0, l = value.length; i < l; ++i) hasOwnProperty(value, String(i)) ? output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), !0)) : output.push("");
                            return keys.forEach(function(key) {
                                key.match(/^\d+$/) || output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, !0))
                            }), output
                        }(ctx, value, recurseTimes, visibleKeys, keys) : keys.map(function(key) {
                            return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array)
                        }), ctx.seen.pop(), function(output, base, braces) {
                            if (60 < output.reduce(function(prev, cur) {
                                    return 0, 0 <= cur.indexOf("\n") && 0, prev + cur.replace(/\u001b\[\d\d?m/g, "").length + 1
                                }, 0)) return braces[0] + ("" === base ? "" : base + "\n ") + " " + output.join(",\n  ") + " " + braces[1];
                            return braces[0] + base + " " + output.join(", ") + " " + braces[1]
                        }(output, base, braces)) : braces[0] + base + braces[1]
                    }

                    function formatError(value) {
                        return "[" + Error.prototype.toString.call(value) + "]"
                    }

                    function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
                        var name, str, desc;
                        if ((desc = Object.getOwnPropertyDescriptor(value, key) || {
                                value: value[key]
                            }).get ? str = desc.set ? ctx.stylize("[Getter/Setter]", "special") : ctx.stylize("[Getter]", "special") : desc.set && (str = ctx.stylize("[Setter]", "special")), hasOwnProperty(visibleKeys, key) || (name = "[" + key + "]"), str || (ctx.seen.indexOf(desc.value) < 0 ? -1 < (str = isNull(recurseTimes) ? formatValue(ctx, desc.value, null) : formatValue(ctx, desc.value, recurseTimes - 1)).indexOf("\n") && (str = array ? str.split("\n").map(function(line) {
                                return "  " + line
                            }).join("\n").substr(2) : "\n" + str.split("\n").map(function(line) {
                                return "   " + line
                            }).join("\n")) : str = ctx.stylize("[Circular]", "special")), isUndefined(name)) {
                            if (array && key.match(/^\d+$/)) return str;
                            name = (name = JSON.stringify("" + key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (name = name.substr(1, name.length - 2), ctx.stylize(name, "name")) : (name = name.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), ctx.stylize(name, "string"))
                        }
                        return name + ": " + str
                    }

                    function isArray(ar) {
                        return Array.isArray(ar)
                    }

                    function isBoolean(arg) {
                        return "boolean" == typeof arg
                    }

                    function isNull(arg) {
                        return null === arg
                    }

                    function isNumber(arg) {
                        return "number" == typeof arg
                    }

                    function isString(arg) {
                        return "string" == typeof arg
                    }

                    function isUndefined(arg) {
                        return void 0 === arg
                    }

                    function isRegExp(re) {
                        return isObject(re) && "[object RegExp]" === objectToString(re)
                    }

                    function isObject(arg) {
                        return "object" === _typeof4(arg) && null !== arg
                    }

                    function isDate(d) {
                        return isObject(d) && "[object Date]" === objectToString(d)
                    }

                    function isError(e) {
                        return isObject(e) && ("[object Error]" === objectToString(e) || e instanceof Error)
                    }

                    function isFunction(arg) {
                        return "function" == typeof arg
                    }

                    function objectToString(o) {
                        return Object.prototype.toString.call(o)
                    }

                    function pad(n) {
                        return n < 10 ? "0" + n.toString(10) : n.toString(10)
                    }
                    exports.debuglog = function(set) {
                        if (isUndefined(debugEnviron) && (debugEnviron = process.env.NODE_DEBUG || ""), set = set.toUpperCase(), !debugs[set])
                            if (new RegExp("\\b" + set + "\\b", "i").test(debugEnviron)) {
                                var pid = process.pid;
                                debugs[set] = function() {
                                    var msg = exports.format.apply(exports, arguments);
                                    console.error("%s %d: %s", set, pid, msg)
                                }
                            } else debugs[set] = function() {};
                        return debugs[set]
                    }, (exports.inspect = inspect).colors = {
                        bold: [1, 22],
                        italic: [3, 23],
                        underline: [4, 24],
                        inverse: [7, 27],
                        white: [37, 39],
                        grey: [90, 39],
                        black: [30, 39],
                        blue: [34, 39],
                        cyan: [36, 39],
                        green: [32, 39],
                        magenta: [35, 39],
                        red: [31, 39],
                        yellow: [33, 39]
                    }, inspect.styles = {
                        special: "cyan",
                        number: "yellow",
                        boolean: "yellow",
                        undefined: "grey",
                        null: "bold",
                        string: "green",
                        date: "magenta",
                        regexp: "red"
                    }, exports.isArray = isArray, exports.isBoolean = isBoolean, exports.isNull = isNull, exports.isNullOrUndefined = function(arg) {
                        return null == arg
                    }, exports.isNumber = isNumber, exports.isString = isString, exports.isSymbol = function(arg) {
                        return "symbol" === _typeof4(arg)
                    }, exports.isUndefined = isUndefined, exports.isRegExp = isRegExp, exports.isObject = isObject, exports.isDate = isDate, exports.isError = isError, exports.isFunction = isFunction, exports.isPrimitive = function(arg) {
                        return null === arg || "boolean" == typeof arg || "number" == typeof arg || "string" == typeof arg || "symbol" === _typeof4(arg) || void 0 === arg
                    }, exports.isBuffer = _dereq_("./support/isBuffer");
                    var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

                    function hasOwnProperty(obj, prop) {
                        return Object.prototype.hasOwnProperty.call(obj, prop)
                    }
                    exports.log = function() {
                        var d, time;
                        console.log("%s - %s", (d = new Date, time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(":"), [d.getDate(), months[d.getMonth()], time].join(" ")), exports.format.apply(exports, arguments))
                    }, exports.inherits = _dereq_("inherits"), exports._extend = function(origin, add) {
                        if (!add || !isObject(add)) return origin;
                        for (var keys = Object.keys(add), i = keys.length; i--;) origin[keys[i]] = add[keys[i]];
                        return origin
                    }
                }).call(this, _dereq_("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {
                "./support/isBuffer": 281,
                _process: 225,
                inherits: 280
            }],
            283: [function(_dereq_, module, exports) {
                var v1 = _dereq_("./v1"),
                    v4 = _dereq_("./v4"),
                    uuid = v4;
                uuid.v1 = v1, uuid.v4 = v4, module.exports = uuid
            }, {
                "./v1": 286,
                "./v4": 287
            }],
            284: [function(_dereq_, module, exports) {
                for (var byteToHex = [], i = 0; i < 256; ++i) byteToHex[i] = (i + 256).toString(16).substr(1);
                module.exports = function(buf, offset) {
                    var i = offset || 0,
                        bth = byteToHex;
                    return bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + "-" + bth[buf[i++]] + bth[buf[i++]] + "-" + bth[buf[i++]] + bth[buf[i++]] + "-" + bth[buf[i++]] + bth[buf[i++]] + "-" + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]]
                }
            }, {}],
            285: [function(_dereq_, module, exports) {
                (function(global) {
                    var rng, crypto = global.crypto || global.msCrypto;
                    if (crypto && crypto.getRandomValues) {
                        var rnds8 = new Uint8Array(16);
                        rng = function() {
                            return crypto.getRandomValues(rnds8), rnds8
                        }
                    }
                    if (!rng) {
                        var rnds = new Array(16);
                        rng = function() {
                            for (var r, i = 0; i < 16; i++) 0 == (3 & i) && (r = 4294967296 * Math.random()), rnds[i] = r >>> ((3 & i) << 3) & 255;
                            return rnds
                        }
                    }
                    module.exports = rng
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {}],
            286: [function(_dereq_, module, exports) {
                var rng = _dereq_("./lib/rng"),
                    bytesToUuid = _dereq_("./lib/bytesToUuid"),
                    _seedBytes = rng(),
                    _nodeId = [1 | _seedBytes[0], _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]],
                    _clockseq = 16383 & (_seedBytes[6] << 8 | _seedBytes[7]),
                    _lastMSecs = 0,
                    _lastNSecs = 0;
                module.exports = function(options, buf, offset) {
                    var i = buf && offset || 0,
                        b = buf || [],
                        clockseq = void 0 !== (options = options || {}).clockseq ? options.clockseq : _clockseq,
                        msecs = void 0 !== options.msecs ? options.msecs : (new Date).getTime(),
                        nsecs = void 0 !== options.nsecs ? options.nsecs : _lastNSecs + 1,
                        dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 1e4;
                    if (dt < 0 && void 0 === options.clockseq && (clockseq = clockseq + 1 & 16383), (dt < 0 || _lastMSecs < msecs) && void 0 === options.nsecs && (nsecs = 0), 1e4 <= nsecs) throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
                    _lastMSecs = msecs, _clockseq = clockseq;
                    var tl = (1e4 * (268435455 & (msecs += 122192928e5)) + (_lastNSecs = nsecs)) % 4294967296;
                    b[i++] = tl >>> 24 & 255, b[i++] = tl >>> 16 & 255, b[i++] = tl >>> 8 & 255, b[i++] = 255 & tl;
                    var tmh = msecs / 4294967296 * 1e4 & 268435455;
                    b[i++] = tmh >>> 8 & 255, b[i++] = 255 & tmh, b[i++] = tmh >>> 24 & 15 | 16, b[i++] = tmh >>> 16 & 255, b[i++] = clockseq >>> 8 | 128, b[i++] = 255 & clockseq;
                    for (var node = options.node || _nodeId, n = 0; n < 6; ++n) b[i + n] = node[n];
                    return buf || bytesToUuid(b)
                }
            }, {
                "./lib/bytesToUuid": 284,
                "./lib/rng": 285
            }],
            287: [function(_dereq_, module, exports) {
                var rng = _dereq_("./lib/rng"),
                    bytesToUuid = _dereq_("./lib/bytesToUuid");
                module.exports = function(options, buf, offset) {
                    var i = buf && offset || 0;
                    "string" == typeof options && (buf = "binary" == options ? new Array(16) : null, options = null);
                    var rnds = (options = options || {}).random || (options.rng || rng)();
                    if (rnds[6] = 15 & rnds[6] | 64, rnds[8] = 63 & rnds[8] | 128, buf)
                        for (var ii = 0; ii < 16; ++ii) buf[i + ii] = rnds[ii];
                    return buf || bytesToUuid(rnds)
                }
            }, {
                "./lib/bytesToUuid": 284,
                "./lib/rng": 285
            }],
            288: [function(_dereq_, module, exports) {
                module.exports = {
                    h32: _dereq_("./xxhash"),
                    h64: _dereq_("./xxhash64")
                }
            }, {
                "./xxhash": 289,
                "./xxhash64": 290
            }],
            289: [function(_dereq_, module, exports) {
                (function(Buffer) {
                    var UINT32 = _dereq_("cuint").UINT32;
                    UINT32.prototype.xxh_update = function(low, high) {
                        var c16, c00, b00 = PRIME32_2._low,
                            b16 = PRIME32_2._high;
                        c16 = (c00 = low * b00) >>> 16, c16 += high * b00, c16 &= 65535, c16 += low * b16;
                        var a00 = this._low + (65535 & c00),
                            a16 = a00 >>> 16,
                            v = (a16 += this._high + (65535 & c16)) << 16 | 65535 & a00;
                        a16 = (v = v << 13 | v >>> 19) >>> 16, c16 = (c00 = (a00 = 65535 & v) * (b00 = PRIME32_1._low)) >>> 16, c16 += a16 * b00, c16 &= 65535, c16 += a00 * (b16 = PRIME32_1._high), this._low = 65535 & c00, this._high = 65535 & c16
                    };
                    var PRIME32_1 = UINT32("2654435761"),
                        PRIME32_2 = UINT32("2246822519"),
                        PRIME32_3 = UINT32("3266489917"),
                        PRIME32_4 = UINT32("668265263"),
                        PRIME32_5 = UINT32("374761393");

                    function XXH() {
                        return 2 == arguments.length ? new XXH(arguments[1]).update(arguments[0]).digest() : this instanceof XXH ? void init.call(this, arguments[0]) : new XXH(arguments[0])
                    }

                    function init(seed) {
                        return this.seed = seed instanceof UINT32 ? seed.clone() : UINT32(seed), this.v1 = this.seed.clone().add(PRIME32_1).add(PRIME32_2), this.v2 = this.seed.clone().add(PRIME32_2), this.v3 = this.seed.clone(), this.v4 = this.seed.clone().subtract(PRIME32_1), this.total_len = 0, this.memsize = 0, this.memory = null, this
                    }
                    XXH.prototype.init = init, XXH.prototype.update = function(input) {
                        var isArrayBuffer, isString = "string" == typeof input;
                        isString && (input = function(str) {
                            for (var utf8 = [], i = 0, n = str.length; i < n; i++) {
                                var charcode = str.charCodeAt(i);
                                charcode < 128 ? utf8.push(charcode) : charcode < 2048 ? utf8.push(192 | charcode >> 6, 128 | 63 & charcode) : charcode < 55296 || 57344 <= charcode ? utf8.push(224 | charcode >> 12, 128 | charcode >> 6 & 63, 128 | 63 & charcode) : (i++, charcode = 65536 + ((1023 & charcode) << 10 | 1023 & str.charCodeAt(i)), utf8.push(240 | charcode >> 18, 128 | charcode >> 12 & 63, 128 | charcode >> 6 & 63, 128 | 63 & charcode))
                            }
                            return new Uint8Array(utf8)
                        }(input), isArrayBuffer = !(isString = !1)), "undefined" != typeof ArrayBuffer && input instanceof ArrayBuffer && (isArrayBuffer = !0, input = new Uint8Array(input));
                        var p = 0,
                            len = input.length,
                            bEnd = p + len;
                        if (0 == len) return this;
                        if (this.total_len += len, 0 == this.memsize && (this.memory = isString ? "" : isArrayBuffer ? new Uint8Array(16) : new Buffer(16)), this.memsize + len < 16) return isString ? this.memory += input : isArrayBuffer ? this.memory.set(input.subarray(0, len), this.memsize) : input.copy(this.memory, this.memsize, 0, len), this.memsize += len, this;
                        if (0 < this.memsize) {
                            isString ? this.memory += input.slice(0, 16 - this.memsize) : isArrayBuffer ? this.memory.set(input.subarray(0, 16 - this.memsize), this.memsize) : input.copy(this.memory, this.memsize, 0, 16 - this.memsize);
                            var p32 = 0;
                            isString ? (this.v1.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2)), p32 += 4, this.v2.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2)), p32 += 4, this.v3.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2)), p32 += 4, this.v4.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2))) : (this.v1.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]), p32 += 4, this.v2.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]), p32 += 4, this.v3.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]), p32 += 4, this.v4.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2])), p += 16 - this.memsize, this.memsize = 0, isString && (this.memory = "")
                        }
                        if (p <= bEnd - 16)
                            for (var limit = bEnd - 16; isString ? (this.v1.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2)), p += 4, this.v2.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2)), p += 4, this.v3.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2)), p += 4, this.v4.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2))) : (this.v1.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]), p += 4, this.v2.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]), p += 4, this.v3.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]), p += 4, this.v4.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2])), (p += 4) <= limit;);
                        return p < bEnd && (isString ? this.memory += input.slice(p) : isArrayBuffer ? this.memory.set(input.subarray(p, bEnd), this.memsize) : input.copy(this.memory, this.memsize, p, bEnd), this.memsize = bEnd - p), this
                    }, XXH.prototype.digest = function() {
                        var h32, h, input = this.memory,
                            isString = "string" == typeof input,
                            p = 0,
                            bEnd = this.memsize,
                            u = new UINT32;
                        for ((h32 = 16 <= this.total_len ? this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))) : this.seed.clone().add(PRIME32_5)).add(u.fromNumber(this.total_len)); p <= bEnd - 4;) isString ? u.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2)) : u.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]), h32.add(u.multiply(PRIME32_3)).rotl(17).multiply(PRIME32_4), p += 4;
                        for (; p < bEnd;) u.fromBits(isString ? input.charCodeAt(p++) : input[p++], 0), h32.add(u.multiply(PRIME32_5)).rotl(11).multiply(PRIME32_1);
                        return h = h32.clone().shiftRight(15), h32.xor(h).multiply(PRIME32_2), h = h32.clone().shiftRight(13), h32.xor(h).multiply(PRIME32_3), h = h32.clone().shiftRight(16), h32.xor(h), this.init(this.seed), h32
                    }, module.exports = XXH
                }).call(this, _dereq_("buffer").Buffer)
            }, {
                buffer: 71,
                cuint: 209
            }],
            290: [function(_dereq_, module, exports) {
                (function(Buffer) {
                    var UINT64 = _dereq_("cuint").UINT64,
                        PRIME64_1 = UINT64("11400714785074694791"),
                        PRIME64_2 = UINT64("14029467366897019727"),
                        PRIME64_3 = UINT64("1609587929392839161"),
                        PRIME64_4 = UINT64("9650029242287828579"),
                        PRIME64_5 = UINT64("2870177450012600261");

                    function XXH64() {
                        return 2 == arguments.length ? new XXH64(arguments[1]).update(arguments[0]).digest() : this instanceof XXH64 ? void init.call(this, arguments[0]) : new XXH64(arguments[0])
                    }

                    function init(seed) {
                        return this.seed = seed instanceof UINT64 ? seed.clone() : UINT64(seed), this.v1 = this.seed.clone().add(PRIME64_1).add(PRIME64_2), this.v2 = this.seed.clone().add(PRIME64_2), this.v3 = this.seed.clone(), this.v4 = this.seed.clone().subtract(PRIME64_1), this.total_len = 0, this.memsize = 0, this.memory = null, this
                    }
                    XXH64.prototype.init = init, XXH64.prototype.update = function(input) {
                        var isArrayBuffer, isString = "string" == typeof input;
                        isString && (input = function(str) {
                            for (var utf8 = [], i = 0, n = str.length; i < n; i++) {
                                var charcode = str.charCodeAt(i);
                                charcode < 128 ? utf8.push(charcode) : charcode < 2048 ? utf8.push(192 | charcode >> 6, 128 | 63 & charcode) : charcode < 55296 || 57344 <= charcode ? utf8.push(224 | charcode >> 12, 128 | charcode >> 6 & 63, 128 | 63 & charcode) : (i++, charcode = 65536 + ((1023 & charcode) << 10 | 1023 & str.charCodeAt(i)), utf8.push(240 | charcode >> 18, 128 | charcode >> 12 & 63, 128 | charcode >> 6 & 63, 128 | 63 & charcode))
                            }
                            return new Uint8Array(utf8)
                        }(input), isArrayBuffer = !(isString = !1)), "undefined" != typeof ArrayBuffer && input instanceof ArrayBuffer && (isArrayBuffer = !0, input = new Uint8Array(input));
                        var p = 0,
                            len = input.length,
                            bEnd = p + len;
                        if (0 == len) return this;
                        if (this.total_len += len, 0 == this.memsize && (this.memory = isString ? "" : isArrayBuffer ? new Uint8Array(32) : new Buffer(32)), this.memsize + len < 32) return isString ? this.memory += input : isArrayBuffer ? this.memory.set(input.subarray(0, len), this.memsize) : input.copy(this.memory, this.memsize, 0, len), this.memsize += len, this;
                        if (0 < this.memsize) {
                            isString ? this.memory += input.slice(0, 32 - this.memsize) : isArrayBuffer ? this.memory.set(input.subarray(0, 32 - this.memsize), this.memsize) : input.copy(this.memory, this.memsize, 0, 32 - this.memsize);
                            var p64 = 0;
                            if (isString) other = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6)), this.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6)), this.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6)), this.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6)), this.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);
                            else other = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]), this.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]), this.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]), this.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p64 += 8, other = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]), this.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);
                            p += 32 - this.memsize, this.memsize = 0, isString && (this.memory = "")
                        }
                        if (p <= bEnd - 32) {
                            var limit = bEnd - 32;
                            do {
                                var other;
                                if (isString) other = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6)), this.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p += 8, other = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6)), this.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p += 8, other = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6)), this.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), p += 8, other = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6)), this.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);
                                else other = UINT64(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]), this.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), other = UINT64(input[(p += 8) + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]), this.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), other = UINT64(input[(p += 8) + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]), this.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1), other = UINT64(input[(p += 8) + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]), this.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);
                                p += 8
                            } while (p <= limit)
                        }
                        return p < bEnd && (isString ? this.memory += input.slice(p) : isArrayBuffer ? this.memory.set(input.subarray(p, bEnd), this.memsize) : input.copy(this.memory, this.memsize, p, bEnd), this.memsize = bEnd - p), this
                    }, XXH64.prototype.digest = function() {
                        var h64, h, input = this.memory,
                            isString = "string" == typeof input,
                            p = 0,
                            bEnd = this.memsize,
                            u = new UINT64;
                        for (32 <= this.total_len ? ((h64 = this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)), h64.add(this.v3.clone().rotl(12)), h64.add(this.v4.clone().rotl(18)), h64.xor(this.v1.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)), h64.multiply(PRIME64_1).add(PRIME64_4), h64.xor(this.v2.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)), h64.multiply(PRIME64_1).add(PRIME64_4), h64.xor(this.v3.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)), h64.multiply(PRIME64_1).add(PRIME64_4), h64.xor(this.v4.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)), h64.multiply(PRIME64_1).add(PRIME64_4)) : h64 = this.seed.clone().add(PRIME64_5), h64.add(u.fromNumber(this.total_len)); p <= bEnd - 8;) isString ? u.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6)) : u.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]), u.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1), h64.xor(u).rotl(27).multiply(PRIME64_1).add(PRIME64_4), p += 8;
                        for (p + 4 <= bEnd && (isString ? u.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), 0, 0) : u.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], 0, 0), h64.xor(u.multiply(PRIME64_1)).rotl(23).multiply(PRIME64_2).add(PRIME64_3), p += 4); p < bEnd;) u.fromBits(isString ? input.charCodeAt(p++) : input[p++], 0, 0, 0), h64.xor(u.multiply(PRIME64_5)).rotl(11).multiply(PRIME64_1);
                        return h = h64.clone().shiftRight(33), h64.xor(h).multiply(PRIME64_2), h = h64.clone().shiftRight(29), h64.xor(h).multiply(PRIME64_3), h = h64.clone().shiftRight(32), h64.xor(h), this.init(this.seed), h64
                    }, module.exports = XXH64
                }).call(this, _dereq_("buffer").Buffer)
            }, {
                buffer: 71,
                cuint: 209
            }],
            291: [function(_dereq_, module, exports) {
                module.exports = {
                    name: "twilio-chat",
                    version: "1.2.1",
                    description: "Twilio Chat service client library",
                    main: "lib/index.js",
                    browser: "browser/index.js",
                    types: "./lib/client.d.ts",
                    author: "Twilio",
                    license: "MIT",
                    dependencies: {
                        "twilio-mcs-client": "^0.0.4",
                        durational: "^1.1.0",
                        "isomorphic-form-data": "^1.0.0",
                        loglevel: "^1.5.0",
                        "operation-retrier": "^1.3.2",
                        platform: "^1.3.4",
                        rfc6902: "^1.3.0",
                        "twilio-ems-client": "^0.2.6",
                        "twilio-notifications": "^0.4.4",
                        "twilio-sync": "^0.5.10",
                        "twilio-transport": "^0.1.4",
                        twilsock: "^0.3.5",
                        uuid: "^3.1.0"
                    },
                    devDependencies: {
                        "@types/chai": "^3.4.35",
                        "@types/chai-as-promised": "0.0.31",
                        "@types/chai-string": "^1.1.30",
                        "@types/core-js": "^0.9.41",
                        "@types/mocha": "^2.2.43",
                        "@types/node": "^7.0.5",
                        "@types/sinon": "^2.3.5",
                        "@types/sinon-chai": "^2.7.27",
                        async: "^2.1.5",
                        "async-test-tools": "^1.0.6",
                        "babel-eslint": "^7.2.3",
                        "babel-plugin-add-module-exports": "^0.2.1",
                        "babel-plugin-istanbul": "^4.1.5",
                        "babel-plugin-transform-async-to-generator": "^6.24.1",
                        "babel-plugin-transform-object-assign": "^6.22.0",
                        "babel-plugin-transform-runtime": "^6.23.0",
                        "babel-preset-es2015": "^6.24.1",
                        "babel-require": "^1.0.1",
                        "babel-runtime": "^6.23.0",
                        babelify: "^7.3.0",
                        browserify: "^14.1.0",
                        "browserify-replace": "^0.9.0",
                        chai: "^3.5.0",
                        "chai-as-promised": "^6.0.0",
                        "chai-string": "^1.4.0",
                        cheerio: "^0.22.0",
                        del: "^3.0.0",
                        fs: "0.0.1-security",
                        gulp: "^3.9.1",
                        "gulp-babel": "^6.1.2",
                        "gulp-derequire": "^2.1.0",
                        "gulp-insert": "^0.5.0",
                        "gulp-mocha": "^4.1.0",
                        "gulp-rename": "^1.2.2",
                        "gulp-tap": "^1.0.1",
                        "gulp-tslint": "^8.1.0",
                        "gulp-typescript": "^3.1.7",
                        "gulp-uglify": "^3.0.0",
                        "gulp-util": "^3.0.8",
                        gulpclass: "^0.1.2",
                        "ink-docstrap": "^1.3.0",
                        jsdoc: "3.4.3",
                        "jsdoc-strip-async-await": "^0.1.0",
                        karma: "^1.5.0",
                        "karma-browserify": "^5.1.1",
                        "karma-browserstack-launcher": "^1.2.0",
                        "karma-mocha": "^1.3.0",
                        "karma-mocha-reporter": "^2.2.2",
                        "karma-sinon-ie": "^2.0.0",
                        "loglevel-message-prefix": "^2.0.1",
                        "mocha.parallel": "^0.15.0",
                        nyc: "^11.2.1",
                        path: "^0.12.7",
                        sinon: "^2.3.2",
                        "sinon-chai": "^2.14.0",
                        "ts-node": "^3.0.4",
                        tslint: "^5.4.2",
                        twilio: "^3.7.0",
                        typescript: "^2.5.3",
                        "uglify-save-license": "^0.4.1",
                        "vinyl-buffer": "^1.0.0",
                        "vinyl-source-stream": "^1.1.0"
                    },
                    engines: {
                        node: ">=6"
                    }
                }
            }, {}]
        }, {}, [3])(3)
    }),
    function(a, b) {
        "object" == ("undefined" == typeof exports ? "undefined" : _typeof(exports)) && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.moment = b()
    }(this, function() {
        "use strict";

        function a() {
            return Uc.apply(null, arguments)
        }

        function c(a) {
            return "[object Array]" === Object.prototype.toString.call(a)
        }

        function d(a) {
            return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a)
        }

        function e(a, b) {
            var c, d = [];
            for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
            return d
        }

        function f(a, b) {
            return Object.prototype.hasOwnProperty.call(a, b)
        }

        function g(a, b) {
            for (var c in b) f(b, c) && (a[c] = b[c]);
            return f(b, "toString") && (a.toString = b.toString), f(b, "valueOf") && (a.valueOf = b.valueOf), a
        }

        function h(a, b, c, d) {
            return Da(a, b, c, d, !0).utc()
        }

        function j(a) {
            return null == a._pf && (a._pf = {
                empty: !1,
                unusedTokens: [],
                unusedInput: [],
                overflow: -2,
                charsLeftOver: 0,
                nullInput: !1,
                invalidMonth: null,
                invalidFormat: !1,
                userInvalidated: !1,
                iso: !1
            }), a._pf
        }

        function k(a) {
            if (null == a._isValid) {
                var b = j(a);
                a._isValid = !(isNaN(a._d.getTime()) || !(b.overflow < 0) || b.empty || b.invalidMonth || b.invalidWeekday || b.nullInput || b.invalidFormat || b.userInvalidated), a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour)
            }
            return a._isValid
        }

        function l(a) {
            var b = h(NaN);
            return null != a ? g(j(b), a) : j(b).userInvalidated = !0, b
        }

        function m(a) {
            return void 0 === a
        }

        function n(a, b) {
            var c, d, e;
            if (m(b._isAMomentObject) || (a._isAMomentObject = b._isAMomentObject), m(b._i) || (a._i = b._i), m(b._f) || (a._f = b._f), m(b._l) || (a._l = b._l), m(b._strict) || (a._strict = b._strict), m(b._tzm) || (a._tzm = b._tzm), m(b._isUTC) || (a._isUTC = b._isUTC), m(b._offset) || (a._offset = b._offset), m(b._pf) || (a._pf = j(b)), m(b._locale) || (a._locale = b._locale), 0 < Wc.length)
                for (c in Wc) m(e = b[d = Wc[c]]) || (a[d] = e);
            return a
        }

        function o(b) {
            n(this, b), this._d = new Date(null != b._d ? b._d.getTime() : NaN), !1 === Xc && (Xc = !0, a.updateOffset(this), Xc = !1)
        }

        function p(a) {
            return a instanceof o || null != a && null != a._isAMomentObject
        }

        function q(a) {
            return a < 0 ? Math.ceil(a) : Math.floor(a)
        }

        function r(a) {
            var b = +a,
                c = 0;
            return 0 !== b && isFinite(b) && (c = q(b)), c
        }

        function s(a, b, c) {
            var d, e = Math.min(a.length, b.length),
                f = Math.abs(a.length - b.length),
                g = 0;
            for (d = 0; d < e; d++)(c && a[d] !== b[d] || !c && r(a[d]) !== r(b[d])) && g++;
            return g + f
        }

        function t() {}

        function u(a) {
            return a ? a.toLowerCase().replace("_", "-") : a
        }

        function w(a) {
            var b = null;
            if (!Yc[a] && "undefined" != typeof module && module && module.exports) try {
                b = Vc._abbr, require("./locale/" + a), x(b)
            } catch (c) {}
            return Yc[a]
        }

        function x(a, b) {
            var c;
            return a && ((c = m(b) ? z(a) : y(a, b)) && (Vc = c)), Vc._abbr
        }

        function y(a, b) {
            return null !== b ? (b.abbr = a, Yc[a] = Yc[a] || new t, Yc[a].set(b), x(a), Yc[a]) : (delete Yc[a], null)
        }

        function z(a) {
            var b;
            if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return Vc;
            if (!c(a)) {
                if (b = w(a)) return b;
                a = [a]
            }
            return function(a) {
                for (var b, c, d, e, f = 0; f < a.length;) {
                    for (b = (e = u(a[f]).split("-")).length, c = (c = u(a[f + 1])) ? c.split("-") : null; 0 < b;) {
                        if (d = w(e.slice(0, b).join("-"))) return d;
                        if (c && c.length >= b && s(e, c, !0) >= b - 1) break;
                        b--
                    }
                    f++
                }
                return null
            }(a)
        }

        function A(a, b) {
            var c = a.toLowerCase();
            Zc[c] = Zc[c + "s"] = Zc[b] = a
        }

        function B(a) {
            return "string" == typeof a ? Zc[a] || Zc[a.toLowerCase()] : void 0
        }

        function C(a) {
            var b, c, d = {};
            for (c in a) f(a, c) && ((b = B(c)) && (d[b] = a[c]));
            return d
        }

        function D(a) {
            return a instanceof Function || "[object Function]" === Object.prototype.toString.call(a)
        }

        function E(b, c) {
            return function(d) {
                return null != d ? (G(this, b, d), a.updateOffset(this, c), this) : F(this, b)
            }
        }

        function F(a, b) {
            return a.isValid() ? a._d["get" + (a._isUTC ? "UTC" : "") + b]() : NaN
        }

        function G(a, b, c) {
            a.isValid() && a._d["set" + (a._isUTC ? "UTC" : "") + b](c)
        }

        function H(a, b) {
            var c;
            if ("object" == _typeof(a))
                for (c in a) this.set(c, a[c]);
            else if (D(this[a = B(a)])) return this[a](b);
            return this
        }

        function I(a, b, c) {
            var d = "" + Math.abs(a),
                e = b - d.length;
            return (0 <= a ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, e)).toString().substr(1) + d
        }

        function J(a, b, c, d) {
            var e = d;
            "string" == typeof d && (e = function() {
                return this[d]()
            }), a && (bd[a] = e), b && (bd[b[0]] = function() {
                return I(e.apply(this, arguments), b[1], b[2])
            }), c && (bd[c] = function() {
                return this.localeData().ordinal(e.apply(this, arguments), a)
            })
        }

        function K(a) {
            return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "")
        }

        function M(a, b) {
            return a.isValid() ? (b = N(b, a.localeData()), ad[b] = ad[b] || function(a) {
                var b, c, d = a.match($c);
                for (b = 0, c = d.length; b < c; b++) bd[d[b]] ? d[b] = bd[d[b]] : d[b] = K(d[b]);
                return function(e) {
                    var f = "";
                    for (b = 0; b < c; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
                    return f
                }
            }(b), ad[b](a)) : a.localeData().invalidDate()
        }

        function N(a, b) {
            function c(a) {
                return b.longDateFormat(a) || a
            }
            var d = 5;
            for (_c.lastIndex = 0; 0 <= d && _c.test(a);) a = a.replace(_c, c), _c.lastIndex = 0, d -= 1;
            return a
        }

        function O(a, b, c) {
            td[a] = D(b) ? b : function(a, d) {
                return a && c ? c : b
            }
        }

        function P(a, b) {
            return f(td, a) ? td[a](b._strict, b._locale) : new RegExp(function(a) {
                return R(a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(a, b, c, d, e) {
                    return b || c || d || e
                }))
            }(a))
        }

        function R(a) {
            return a.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
        }

        function S(a, b) {
            var c, d = b;
            for ("string" == typeof a && (a = [a]), "number" == typeof b && (d = function(a, c) {
                    c[b] = r(a)
                }), c = 0; c < a.length; c++) ud[a[c]] = d
        }

        function T(a, b) {
            S(a, function(a, c, d, e) {
                d._w = d._w || {}, b(a, d._w, d, e)
            })
        }

        function U(a, b, c) {
            null != b && f(ud, a) && ud[a](b, c._a, c, a)
        }

        function V(a, b) {
            return new Date(Date.UTC(a, b + 1, 0)).getUTCDate()
        }

        function Z(a, b) {
            var c;
            return a.isValid() && ("string" == typeof b && "number" != typeof(b = a.localeData().monthsParse(b)) || (c = Math.min(a.date(), V(a.year(), b)), a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c))), a
        }

        function $(b) {
            return null != b ? (Z(this, b), a.updateOffset(this, !0), this) : F(this, "Month")
        }

        function ca() {
            function a(a, b) {
                return b.length - a.length
            }
            var b, c, d = [],
                e = [],
                f = [];
            for (b = 0; b < 12; b++) c = h([2e3, b]), d.push(this.monthsShort(c, "")), e.push(this.months(c, "")), f.push(this.months(c, "")), f.push(this.monthsShort(c, ""));
            for (d.sort(a), e.sort(a), f.sort(a), b = 0; b < 12; b++) d[b] = R(d[b]), e[b] = R(e[b]), f[b] = R(f[b]);
            this._monthsRegex = new RegExp("^(" + f.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, this._monthsStrictRegex = new RegExp("^(" + e.join("|") + ")$", "i"), this._monthsShortStrictRegex = new RegExp("^(" + d.join("|") + ")$", "i")
        }

        function da(a) {
            var b, c = a._a;
            return c && -2 === j(a).overflow && (b = c[wd] < 0 || 11 < c[wd] ? wd : c[xd] < 1 || c[xd] > V(c[vd], c[wd]) ? xd : c[yd] < 0 || 24 < c[yd] || 24 === c[yd] && (0 !== c[zd] || 0 !== c[Ad] || 0 !== c[Bd]) ? yd : c[zd] < 0 || 59 < c[zd] ? zd : c[Ad] < 0 || 59 < c[Ad] ? Ad : c[Bd] < 0 || 999 < c[Bd] ? Bd : -1, j(a)._overflowDayOfYear && (b < vd || xd < b) && (b = xd), j(a)._overflowWeeks && -1 === b && (b = Cd), j(a)._overflowWeekday && -1 === b && (b = Dd), j(a).overflow = b), a
        }

        function ea(b) {
            !1 === a.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b)
        }

        function fa(a, b) {
            var c = !0;
            return g(function() {
                return c && (ea(a + "\nArguments: " + Array.prototype.slice.call(arguments).join(", ") + "\n" + (new Error).stack), c = !1), b.apply(this, arguments)
            }, b)
        }

        function ha(a) {
            var b, c, d, e, f, g, h = a._i,
                i = Kd.exec(h) || Ld.exec(h);
            if (i) {
                for (j(a).iso = !0, b = 0, c = Nd.length; b < c; b++)
                    if (Nd[b][1].exec(i[1])) {
                        e = Nd[b][0], d = !1 !== Nd[b][2];
                        break
                    } if (null == e) return void(a._isValid = !1);
                if (i[3]) {
                    for (b = 0, c = Od.length; b < c; b++)
                        if (Od[b][1].exec(i[3])) {
                            f = (i[2] || " ") + Od[b][0];
                            break
                        } if (null == f) return void(a._isValid = !1)
                }
                if (!d && null != f) return void(a._isValid = !1);
                if (i[4]) {
                    if (!Md.exec(i[4])) return void(a._isValid = !1);
                    g = "Z"
                }
                a._f = e + (f || "") + (g || ""), wa(a)
            } else a._isValid = !1
        }

        function ka(a) {
            var b = new Date(Date.UTC.apply(null, arguments));
            return a < 100 && 0 <= a && isFinite(b.getUTCFullYear()) && b.setUTCFullYear(a), b
        }

        function la(a) {
            return ma(a) ? 366 : 365
        }

        function ma(a) {
            return a % 4 == 0 && a % 100 != 0 || a % 400 == 0
        }

        function oa(a, b, c) {
            var d = 7 + b - c;
            return -((7 + ka(a, 0, d).getUTCDay() - b) % 7) + d - 1
        }

        function pa(a, b, c, d, e) {
            var f, g, j = 1 + 7 * (b - 1) + (7 + c - d) % 7 + oa(a, d, e);
            return g = j <= 0 ? la(f = a - 1) + j : j > la(a) ? (f = a + 1, j - la(a)) : (f = a, j), {
                year: f,
                dayOfYear: g
            }
        }

        function qa(a, b, c) {
            var d, e, f = oa(a.year(), b, c),
                g = Math.floor((a.dayOfYear() - f - 1) / 7) + 1;
            return g < 1 ? d = g + ra(e = a.year() - 1, b, c) : g > ra(a.year(), b, c) ? (d = g - ra(a.year(), b, c), e = a.year() + 1) : (e = a.year(), d = g), {
                week: d,
                year: e
            }
        }

        function ra(a, b, c) {
            var d = oa(a, b, c),
                e = oa(a + 1, b, c);
            return (la(a) - d + e) / 7
        }

        function sa(a, b, c) {
            return null != a ? a : null != b ? b : c
        }

        function ta(b) {
            var c = new Date(a.now());
            return b._useUTC ? [c.getUTCFullYear(), c.getUTCMonth(), c.getUTCDate()] : [c.getFullYear(), c.getMonth(), c.getDate()]
        }

        function ua(a) {
            var b, c, d, e, f = [];
            if (!a._d) {
                for (d = ta(a), a._w && null == a._a[xd] && null == a._a[wd] && function(a) {
                        var b, c, d, e, f, g, h, i;
                        null != (b = a._w).GG || null != b.W || null != b.E ? (f = 1, g = 4, c = sa(b.GG, a._a[vd], qa(Ea(), 1, 4).year), d = sa(b.W, 1), ((e = sa(b.E, 1)) < 1 || 7 < e) && (i = !0)) : (f = a._locale._week.dow, g = a._locale._week.doy, c = sa(b.gg, a._a[vd], qa(Ea(), f, g).year), d = sa(b.w, 1), null != b.d ? ((e = b.d) < 0 || 6 < e) && (i = !0) : null != b.e ? (e = b.e + f, (b.e < 0 || 6 < b.e) && (i = !0)) : e = f), d < 1 || d > ra(c, f, g) ? j(a)._overflowWeeks = !0 : null != i ? j(a)._overflowWeekday = !0 : (h = pa(c, d, e, f, g), a._a[vd] = h.year, a._dayOfYear = h.dayOfYear)
                    }(a), a._dayOfYear && (e = sa(a._a[vd], d[vd]), a._dayOfYear > la(e) && (j(a)._overflowDayOfYear = !0), c = ka(e, 0, a._dayOfYear), a._a[wd] = c.getUTCMonth(), a._a[xd] = c.getUTCDate()), b = 0; b < 3 && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
                for (; b < 7; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
                24 === a._a[yd] && 0 === a._a[zd] && 0 === a._a[Ad] && 0 === a._a[Bd] && (a._nextDay = !0, a._a[yd] = 0), a._d = (a._useUTC ? ka : function(a, b, c, d, e, f, g) {
                    var h = new Date(a, b, c, d, e, f, g);
                    return a < 100 && 0 <= a && isFinite(h.getFullYear()) && h.setFullYear(a), h
                }).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), a._nextDay && (a._a[yd] = 24)
            }
        }

        function wa(b) {
            if (b._f !== a.ISO_8601) {
                b._a = [], j(b).empty = !0;
                var c, d, e, f, g, h = "" + b._i,
                    i = h.length,
                    k = 0;
                for (e = N(b._f, b._locale).match($c) || [], c = 0; c < e.length; c++) f = e[c], (d = (h.match(P(f, b)) || [])[0]) && (0 < (g = h.substr(0, h.indexOf(d))).length && j(b).unusedInput.push(g), h = h.slice(h.indexOf(d) + d.length), k += d.length), bd[f] ? (d ? j(b).empty = !1 : j(b).unusedTokens.push(f), U(f, d, b)) : b._strict && !d && j(b).unusedTokens.push(f);
                j(b).charsLeftOver = i - k, 0 < h.length && j(b).unusedInput.push(h), !0 === j(b).bigHour && b._a[yd] <= 12 && 0 < b._a[yd] && (j(b).bigHour = void 0), b._a[yd] = function(a, b, c) {
                    var d;
                    return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b, c) : (null != a.isPM && ((d = a.isPM(c)) && b < 12 && (b += 12), d || 12 !== b || (b = 0)), b)
                }(b._locale, b._a[yd], b._meridiem), ua(b), da(b)
            } else ha(b)
        }

        function Ba(a) {
            var b = a._i,
                e = a._f;
            return a._locale = a._locale || z(a._l), null === b || void 0 === e && "" === b ? l({
                nullInput: !0
            }) : ("string" == typeof b && (a._i = b = a._locale.preparse(b)), p(b) ? new o(da(b)) : (c(e) ? function(a) {
                var b, c, d, e, f;
                if (0 === a._f.length) return j(a).invalidFormat = !0, a._d = new Date(NaN);
                for (e = 0; e < a._f.length; e++) f = 0, b = n({}, a), null != a._useUTC && (b._useUTC = a._useUTC), b._f = a._f[e], wa(b), k(b) && (f += j(b).charsLeftOver, f += 10 * j(b).unusedTokens.length, j(b).score = f, (null == d || f < d) && (d = f, c = b));
                g(a, c || b)
            }(a) : e ? wa(a) : d(b) ? a._d = b : Ca(a), k(a) || (a._d = null), a))
        }

        function Ca(b) {
            var f = b._i;
            void 0 === f ? b._d = new Date(a.now()) : d(f) ? b._d = new Date(+f) : "string" == typeof f ? function(b) {
                var c = Pd.exec(b._i);
                null !== c ? b._d = new Date(+c[1]) : (ha(b), !1 === b._isValid && (delete b._isValid, a.createFromInputFallback(b)))
            }(b) : c(f) ? (b._a = e(f.slice(0), function(a) {
                return parseInt(a, 10)
            }), ua(b)) : "object" == _typeof(f) ? function(a) {
                if (!a._d) {
                    var b = C(a._i);
                    a._a = e([b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond], function(a) {
                        return a && parseInt(a, 10)
                    }), ua(a)
                }
            }(b) : "number" == typeof f ? b._d = new Date(f) : a.createFromInputFallback(b)
        }

        function Da(a, b, c, d, e) {
            var f = {};
            return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, f._l = c, f._i = a, f._f = b, f._strict = d,
                function(a) {
                    var b = new o(da(Ba(a)));
                    return b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b
                }(f)
        }

        function Ea(a, b, c, d) {
            return Da(a, b, c, d, !1)
        }

        function Fa(a, b) {
            var d, e;
            if (1 === b.length && c(b[0]) && (b = b[0]), !b.length) return Ea();
            for (d = b[0], e = 1; e < b.length; ++e)(!b[e].isValid() || b[e][a](d)) && (d = b[e]);
            return d
        }

        function Ia(a) {
            var b = C(a),
                c = b.year || 0,
                d = b.quarter || 0,
                e = b.month || 0,
                f = b.week || 0,
                g = b.day || 0,
                h = b.hour || 0,
                i = b.minute || 0,
                j = b.second || 0,
                k = b.millisecond || 0;
            this._milliseconds = +k + 1e3 * j + 6e4 * i + 36e5 * h, this._days = +g + 7 * f, this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = z(), this._bubble()
        }

        function Ja(a) {
            return a instanceof Ia
        }

        function Ka(a, b) {
            J(a, 0, 0, function() {
                var a = this.utcOffset(),
                    c = "+";
                return a < 0 && (a = -a, c = "-"), c + I(~~(a / 60), 2) + b + I(~~a % 60, 2)
            })
        }

        function La(a, b) {
            var c = (b || "").match(a) || [],
                e = ((c[c.length - 1] || []) + "").match(Ud) || ["-", 0, 0],
                f = 60 * e[1] + r(e[2]);
            return "+" === e[0] ? f : -f
        }

        function Ma(b, c) {
            var e, f;
            return c._isUTC ? (e = c.clone(), f = (p(b) || d(b) ? +b : +Ea(b)) - +e, e._d.setTime(+e._d + f), a.updateOffset(e, !1), e) : Ea(b).local()
        }

        function Na(a) {
            return 15 * -Math.round(a._d.getTimezoneOffset() / 15)
        }

        function Ya() {
            return !!this.isValid() && (this._isUTC && 0 === this._offset)
        }

        function Za(a, b) {
            var c, d, e, g = a,
                h = null;
            return Ja(a) ? g = {
                ms: a._milliseconds,
                d: a._days,
                M: a._months
            } : "number" == typeof a ? (g = {}, b ? g[b] = a : g.milliseconds = a) : (h = Vd.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
                y: 0,
                d: r(h[xd]) * c,
                h: r(h[yd]) * c,
                m: r(h[zd]) * c,
                s: r(h[Ad]) * c,
                ms: r(h[Bd]) * c
            }) : (h = Wd.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
                y: $a(h[2], c),
                M: $a(h[3], c),
                d: $a(h[4], c),
                h: $a(h[5], c),
                m: $a(h[6], c),
                s: $a(h[7], c),
                w: $a(h[8], c)
            }) : null == g ? g = {} : "object" == _typeof(g) && ("from" in g || "to" in g) && (e = function(a, b) {
                var c;
                return a.isValid() && b.isValid() ? (b = Ma(b, a), a.isBefore(b) ? c = _a(a, b) : ((c = _a(b, a)).milliseconds = -c.milliseconds, c.months = -c.months), c) : {
                    milliseconds: 0,
                    months: 0
                }
            }(Ea(g.from), Ea(g.to)), (g = {}).ms = e.milliseconds, g.M = e.months), d = new Ia(g), Ja(a) && f(a, "_locale") && (d._locale = a._locale), d
        }

        function $a(a, b) {
            var c = a && parseFloat(a.replace(",", "."));
            return (isNaN(c) ? 0 : c) * b
        }

        function _a(a, b) {
            var c = {
                milliseconds: 0,
                months: 0
            };
            return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, c.milliseconds = +b - +a.clone().add(c.months, "M"), c
        }

        function bb(a, b) {
            return function(c, d) {
                var f;
                return null === d || isNaN(+d) || (function(a, b) {
                    Jd[a] || (ea(b), Jd[a] = !0)
                }(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), f = c, c = d, d = f), cb(this, Za(c = "string" == typeof c ? +c : c, d), a), this
            }
        }

        function cb(b, c, d, e) {
            var f = c._milliseconds,
                g = c._days,
                h = c._months;
            b.isValid() && (e = null == e || e, f && b._d.setTime(+b._d + f * d), g && G(b, "Date", F(b, "Date") + g * d), h && Z(b, F(b, "Month") + h * d), e && a.updateOffset(b, g || h))
        }

        function ub(a) {
            var b;
            return void 0 === a ? this._locale._abbr : (null != (b = z(a)) && (this._locale = b), this)
        }

        function vb() {
            return this._locale
        }

        function Ib(a, b) {
            J(0, [a, a.length], 0, b)
        }

        function Nb(a, b, c, d, e) {
            var f;
            return null == a ? qa(this, d, e).year : ((f = ra(a, d, e)) < b && (b = f), function(a, b, c, d, e) {
                var f = pa(a, b, c, d, e),
                    g = ka(f.year, 0, f.dayOfYear);
                return this.year(g.getUTCFullYear()), this.month(g.getUTCMonth()), this.date(g.getUTCDate()), this
            }.call(this, a, b, c, d, e))
        }

        function cc() {
            return this.hours() % 12 || 12
        }

        function dc(a, b) {
            J(a, 0, 0, function() {
                return this.localeData().meridiem(this.hours(), this.minutes(), b)
            })
        }

        function ec(a, b) {
            return b._meridiemParse
        }

        function hc(a, b) {
            b[Bd] = r(1e3 * ("0." + a))
        }

        function qc(a) {
            return a
        }

        function uc(a, b, c, d) {
            var e = z(),
                f = h().set(d, b);
            return e[c](f, a)
        }

        function vc(a, b, c, d, e) {
            if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return uc(a, b, c, e);
            var f, g = [];
            for (f = 0; f < d; f++) g[f] = uc(a, f, c, e);
            return g
        }

        function Cc(a, b, c, d) {
            var e = Za(b, c);
            return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months += d * e._months, a._bubble()
        }

        function Fc(a) {
            return a < 0 ? Math.floor(a) : Math.ceil(a)
        }

        function Hc(a) {
            return 4800 * a / 146097
        }

        function Ic(a) {
            return 146097 * a / 4800
        }

        function Lc(a) {
            return function() {
                return this.as(a)
            }
        }

        function Nc(a) {
            return function() {
                return this._data[a]
            }
        }

        function Tc() {
            var a, b, d = Ke(this._milliseconds) / 1e3,
                e = Ke(this._days),
                f = Ke(this._months);
            b = q((a = q(d / 60)) / 60), d %= 60, a %= 60;
            var g = q(f / 12),
                h = f %= 12,
                i = e,
                j = b,
                k = a,
                l = d,
                m = this.asSeconds();
            return m ? (m < 0 ? "-" : "") + "P" + (g ? g + "Y" : "") + (h ? h + "M" : "") + (i ? i + "D" : "") + (j || k || l ? "T" : "") + (j ? j + "H" : "") + (k ? k + "M" : "") + (l ? l + "S" : "") : "P0D"
        }
        var Uc, Vc, Wc = a.momentProperties = [],
            Xc = !1,
            Yc = {},
            Zc = {},
            $c = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
            _c = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
            ad = {},
            bd = {},
            cd = /\d/,
            dd = /\d\d/,
            ed = /\d{3}/,
            fd = /\d{4}/,
            gd = /[+-]?\d{6}/,
            hd = /\d\d?/,
            id = /\d\d\d\d?/,
            jd = /\d\d\d\d\d\d?/,
            kd = /\d{1,3}/,
            ld = /\d{1,4}/,
            md = /[+-]?\d{1,6}/,
            nd = /\d+/,
            od = /[+-]?\d+/,
            pd = /Z|[+-]\d\d:?\d\d/gi,
            qd = /Z|[+-]\d\d(?::?\d\d)?/gi,
            sd = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
            td = {},
            ud = {},
            vd = 0,
            wd = 1,
            xd = 2,
            yd = 3,
            zd = 4,
            Ad = 5,
            Bd = 6,
            Cd = 7,
            Dd = 8;
        J("M", ["MM", 2], "Mo", function() {
            return this.month() + 1
        }), J("MMM", 0, 0, function(a) {
            return this.localeData().monthsShort(this, a)
        }), J("MMMM", 0, 0, function(a) {
            return this.localeData().months(this, a)
        }), A("month", "M"), O("M", hd), O("MM", hd, dd), O("MMM", function(a, b) {
            return b.monthsShortRegex(a)
        }), O("MMMM", function(a, b) {
            return b.monthsRegex(a)
        }), S(["M", "MM"], function(a, b) {
            b[wd] = r(a) - 1
        }), S(["MMM", "MMMM"], function(a, b, c, d) {
            var e = c._locale.monthsParse(a, d, c._strict);
            null != e ? b[wd] = e : j(c).invalidMonth = a
        });
        var Ed = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,
            Fd = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
            Gd = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
            Hd = sd,
            Id = sd,
            Jd = {},
            Kd = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
            Ld = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
            Md = /Z|[+-]\d\d(?::?\d\d)?/,
            Nd = [
                ["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/],
                ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/],
                ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/],
                ["GGGG-[W]WW", /\d{4}-W\d\d/, a.suppressDeprecationWarnings = !1],
                ["YYYY-DDD", /\d{4}-\d{3}/],
                ["YYYY-MM", /\d{4}-\d\d/, !1],
                ["YYYYYYMMDD", /[+-]\d{10}/],
                ["YYYYMMDD", /\d{8}/],
                ["GGGG[W]WWE", /\d{4}W\d{3}/],
                ["GGGG[W]WW", /\d{4}W\d{2}/, !1],
                ["YYYYDDD", /\d{7}/]
            ],
            Od = [
                ["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/],
                ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/],
                ["HH:mm:ss", /\d\d:\d\d:\d\d/],
                ["HH:mm", /\d\d:\d\d/],
                ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/],
                ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/],
                ["HHmmss", /\d\d\d\d\d\d/],
                ["HHmm", /\d\d\d\d/],
                ["HH", /\d\d/]
            ],
            Pd = /^\/?Date\((\-?\d+)/i;
        a.createFromInputFallback = fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(a) {
            a._d = new Date(a._i + (a._useUTC ? " UTC" : ""))
        }), J("Y", 0, 0, function() {
            var a = this.year();
            return a <= 9999 ? "" + a : "+" + a
        }), J(0, ["YY", 2], 0, function() {
            return this.year() % 100
        }), J(0, ["YYYY", 4], 0, "year"), J(0, ["YYYYY", 5], 0, "year"), J(0, ["YYYYYY", 6, !0], 0, "year"), A("year", "y"), O("Y", od), O("YY", hd, dd), O("YYYY", ld, fd), O("YYYYY", md, gd), O("YYYYYY", md, gd), S(["YYYYY", "YYYYYY"], vd), S("YYYY", function(b, c) {
            c[vd] = 2 === b.length ? a.parseTwoDigitYear(b) : r(b)
        }), S("YY", function(b, c) {
            c[vd] = a.parseTwoDigitYear(b)
        }), S("Y", function(a, b) {
            b[vd] = parseInt(a, 10)
        });
        var Qd = E("FullYear", !(a.parseTwoDigitYear = function(a) {
            return r(a) + (68 < r(a) ? 1900 : 2e3)
        }));
        a.ISO_8601 = function() {};
        var Rd = fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
                var a = Ea.apply(null, arguments);
                return this.isValid() && a.isValid() ? a < this ? this : a : l()
            }),
            Sd = fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
                var a = Ea.apply(null, arguments);
                return this.isValid() && a.isValid() ? this < a ? this : a : l()
            });
        Ka("Z", ":"), Ka("ZZ", ""), O("Z", qd), O("ZZ", qd), S(["Z", "ZZ"], function(a, b, c) {
            c._useUTC = !0, c._tzm = La(qd, a)
        });
        var Ud = /([\+\-]|\d\d)/gi;
        a.updateOffset = function() {};
        var Vd = /(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,
            Wd = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;
        Za.fn = Ia.prototype;
        var Xd = bb(1, "add"),
            Yd = bb(-1, "subtract");
        a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
        var Zd = fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(a) {
            return void 0 === a ? this.localeData() : this.locale(a)
        });
        J(0, ["gg", 2], 0, function() {
            return this.weekYear() % 100
        }), J(0, ["GG", 2], 0, function() {
            return this.isoWeekYear() % 100
        }), Ib("gggg", "weekYear"), Ib("ggggg", "weekYear"), Ib("GGGG", "isoWeekYear"), Ib("GGGGG", "isoWeekYear"), A("weekYear", "gg"), A("isoWeekYear", "GG"), O("G", od), O("g", od), O("GG", hd, dd), O("gg", hd, dd), O("GGGG", ld, fd), O("gggg", ld, fd), O("GGGGG", md, gd), O("ggggg", md, gd), T(["gggg", "ggggg", "GGGG", "GGGGG"], function(a, b, c, d) {
            b[d.substr(0, 2)] = r(a)
        }), T(["gg", "GG"], function(b, c, d, e) {
            c[e] = a.parseTwoDigitYear(b)
        }), J("Q", 0, "Qo", "quarter"), A("quarter", "Q"), O("Q", cd), S("Q", function(a, b) {
            b[wd] = 3 * (r(a) - 1)
        }), J("w", ["ww", 2], "wo", "week"), J("W", ["WW", 2], "Wo", "isoWeek"), A("week", "w"), A("isoWeek", "W"), O("w", hd), O("ww", hd, dd), O("W", hd), O("WW", hd, dd), T(["w", "ww", "W", "WW"], function(a, b, c, d) {
            b[d.substr(0, 1)] = r(a)
        });
        J("D", ["DD", 2], "Do", "date"), A("date", "D"), O("D", hd), O("DD", hd, dd), O("Do", function(a, b) {
            return a ? b._ordinalParse : b._ordinalParseLenient
        }), S(["D", "DD"], xd), S("Do", function(a, b) {
            b[xd] = r(a.match(hd)[0])
        });
        var _d = E("Date", !0);
        J("d", 0, "do", "day"), J("dd", 0, 0, function(a) {
            return this.localeData().weekdaysMin(this, a)
        }), J("ddd", 0, 0, function(a) {
            return this.localeData().weekdaysShort(this, a)
        }), J("dddd", 0, 0, function(a) {
            return this.localeData().weekdays(this, a)
        }), J("e", 0, 0, "weekday"), J("E", 0, 0, "isoWeekday"), A("day", "d"), A("weekday", "e"), A("isoWeekday", "E"), O("d", hd), O("e", hd), O("E", hd), O("dd", sd), O("ddd", sd), O("dddd", sd), T(["dd", "ddd", "dddd"], function(a, b, c, d) {
            var e = c._locale.weekdaysParse(a, d, c._strict);
            null != e ? b.d = e : j(c).invalidWeekday = a
        }), T(["d", "e", "E"], function(a, b, c, d) {
            b[d] = r(a)
        });
        var ae = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
            be = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
            ce = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
        J("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), A("dayOfYear", "DDD"), O("DDD", kd), O("DDDD", ed), S(["DDD", "DDDD"], function(a, b, c) {
            c._dayOfYear = r(a)
        }), J("H", ["HH", 2], 0, "hour"), J("h", ["hh", 2], 0, cc), J("hmm", 0, 0, function() {
            return "" + cc.apply(this) + I(this.minutes(), 2)
        }), J("hmmss", 0, 0, function() {
            return "" + cc.apply(this) + I(this.minutes(), 2) + I(this.seconds(), 2)
        }), J("Hmm", 0, 0, function() {
            return "" + this.hours() + I(this.minutes(), 2)
        }), J("Hmmss", 0, 0, function() {
            return "" + this.hours() + I(this.minutes(), 2) + I(this.seconds(), 2)
        }), dc("a", !0), dc("A", !1), A("hour", "h"), O("a", ec), O("A", ec), O("H", hd), O("h", hd), O("HH", hd, dd), O("hh", hd, dd), O("hmm", id), O("hmmss", jd), O("Hmm", id), O("Hmmss", jd), S(["H", "HH"], yd), S(["a", "A"], function(a, b, c) {
            c._isPm = c._locale.isPM(a), c._meridiem = a
        }), S(["h", "hh"], function(a, b, c) {
            b[yd] = r(a), j(c).bigHour = !0
        }), S("hmm", function(a, b, c) {
            var d = a.length - 2;
            b[yd] = r(a.substr(0, d)), b[zd] = r(a.substr(d)), j(c).bigHour = !0
        }), S("hmmss", function(a, b, c) {
            var d = a.length - 4,
                e = a.length - 2;
            b[yd] = r(a.substr(0, d)), b[zd] = r(a.substr(d, 2)), b[Ad] = r(a.substr(e)), j(c).bigHour = !0
        }), S("Hmm", function(a, b, c) {
            var d = a.length - 2;
            b[yd] = r(a.substr(0, d)), b[zd] = r(a.substr(d))
        }), S("Hmmss", function(a, b, c) {
            var d = a.length - 4,
                e = a.length - 2;
            b[yd] = r(a.substr(0, d)), b[zd] = r(a.substr(d, 2)), b[Ad] = r(a.substr(e))
        });
        var ee = E("Hours", !0);
        J("m", ["mm", 2], 0, "minute"), A("minute", "m"), O("m", hd), O("mm", hd, dd), S(["m", "mm"], zd);
        var fe = E("Minutes", !1);
        J("s", ["ss", 2], 0, "second"), A("second", "s"), O("s", hd), O("ss", hd, dd), S(["s", "ss"], Ad);
        var he, ge = E("Seconds", !1);
        for (J("S", 0, 0, function() {
                return ~~(this.millisecond() / 100)
            }), J(0, ["SS", 2], 0, function() {
                return ~~(this.millisecond() / 10)
            }), J(0, ["SSS", 3], 0, "millisecond"), J(0, ["SSSS", 4], 0, function() {
                return 10 * this.millisecond()
            }), J(0, ["SSSSS", 5], 0, function() {
                return 100 * this.millisecond()
            }), J(0, ["SSSSSS", 6], 0, function() {
                return 1e3 * this.millisecond()
            }), J(0, ["SSSSSSS", 7], 0, function() {
                return 1e4 * this.millisecond()
            }), J(0, ["SSSSSSSS", 8], 0, function() {
                return 1e5 * this.millisecond()
            }), J(0, ["SSSSSSSSS", 9], 0, function() {
                return 1e6 * this.millisecond()
            }), A("millisecond", "ms"), O("S", kd, cd), O("SS", kd, dd), O("SSS", kd, ed), he = "SSSS"; he.length <= 9; he += "S") O(he, nd);
        for (he = "S"; he.length <= 9; he += "S") S(he, hc);
        var ie = E("Milliseconds", !1);
        J("z", 0, 0, "zoneAbbr"), J("zz", 0, 0, "zoneName");
        var je = o.prototype;
        je.add = Xd, je.calendar = function(a, b) {
            var c = a || Ea(),
                d = Ma(c, this).startOf("day"),
                e = this.diff(d, "days", !0),
                f = e < -6 ? "sameElse" : e < -1 ? "lastWeek" : e < 0 ? "lastDay" : e < 1 ? "sameDay" : e < 2 ? "nextDay" : e < 7 ? "nextWeek" : "sameElse",
                g = b && (D(b[f]) ? b[f]() : b[f]);
            return this.format(g || this.localeData().calendar(f, this, Ea(c)))
        }, je.clone = function() {
            return new o(this)
        }, je.diff = function(a, b, c) {
            var d, e, f, g;
            return this.isValid() && (d = Ma(a, this)).isValid() ? (e = 6e4 * (d.utcOffset() - this.utcOffset()), "year" === (b = B(b)) || "month" === b || "quarter" === b ? (g = function(a, b) {
                var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()),
                    f = a.clone().add(e, "months");
                return d = b - f < 0 ? (c = a.clone().add(e - 1, "months"), (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), (b - f) / (c - f)), -(e + d)
            }(this, d), "quarter" === b ? g /= 3 : "year" === b && (g /= 12)) : (f = this - d, g = "second" === b ? f / 1e3 : "minute" === b ? f / 6e4 : "hour" === b ? f / 36e5 : "day" === b ? (f - e) / 864e5 : "week" === b ? (f - e) / 6048e5 : f), c ? g : q(g)) : NaN
        }, je.endOf = function(a) {
            return void 0 === (a = B(a)) || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms")
        }, je.format = function(b) {
            var c = M(this, b || a.defaultFormat);
            return this.localeData().postformat(c)
        }, je.from = function(a, b) {
            return this.isValid() && (p(a) && a.isValid() || Ea(a).isValid()) ? Za({
                to: this,
                from: a
            }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
        }, je.fromNow = function(a) {
            return this.from(Ea(), a)
        }, je.to = function(a, b) {
            return this.isValid() && (p(a) && a.isValid() || Ea(a).isValid()) ? Za({
                from: this,
                to: a
            }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate()
        }, je.toNow = function(a) {
            return this.to(Ea(), a)
        }, je.get = H, je.invalidAt = function() {
            return j(this).overflow
        }, je.isAfter = function(a, b) {
            var c = p(a) ? a : Ea(a);
            return !(!this.isValid() || !c.isValid()) && ("millisecond" === (b = B(m(b) ? "millisecond" : b)) ? +c < +this : +c < +this.clone().startOf(b))
        }, je.isBefore = function(a, b) {
            var c = p(a) ? a : Ea(a);
            return !(!this.isValid() || !c.isValid()) && ("millisecond" === (b = B(m(b) ? "millisecond" : b)) ? +this < +c : +this.clone().endOf(b) < +c)
        }, je.isBetween = function(a, b, c) {
            return this.isAfter(a, c) && this.isBefore(b, c)
        }, je.isSame = function(a, b) {
            var c, d = p(a) ? a : Ea(a);
            return !(!this.isValid() || !d.isValid()) && ("millisecond" === (b = B(b || "millisecond")) ? +this == +d : (c = +d, +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b)))
        }, je.isSameOrAfter = function(a, b) {
            return this.isSame(a, b) || this.isAfter(a, b)
        }, je.isSameOrBefore = function(a, b) {
            return this.isSame(a, b) || this.isBefore(a, b)
        }, je.isValid = function() {
            return k(this)
        }, je.lang = Zd, je.locale = ub, je.localeData = vb, je.max = Sd, je.min = Rd, je.parsingFlags = function() {
            return g({}, j(this))
        }, je.set = H, je.startOf = function(a) {
            switch (a = B(a)) {
                case "year":
                    this.month(0);
                case "quarter":
                case "month":
                    this.date(1);
                case "week":
                case "isoWeek":
                case "day":
                    this.hours(0);
                case "hour":
                    this.minutes(0);
                case "minute":
                    this.seconds(0);
                case "second":
                    this.milliseconds(0)
            }
            return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), this
        }, je.subtract = Yd, je.toArray = function() {
            var a = this;
            return [a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond()]
        }, je.toObject = function() {
            var a = this;
            return {
                years: a.year(),
                months: a.month(),
                date: a.date(),
                hours: a.hours(),
                minutes: a.minutes(),
                seconds: a.seconds(),
                milliseconds: a.milliseconds()
            }
        }, je.toDate = function() {
            return this._offset ? new Date(+this) : this._d
        }, je.toISOString = function() {
            var a = this.clone().utc();
            return 0 < a.year() && a.year() <= 9999 ? D(Date.prototype.toISOString) ? this.toDate().toISOString() : M(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : M(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
        }, je.toJSON = function() {
            return this.isValid() ? this.toISOString() : "null"
        }, je.toString = function() {
            return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
        }, je.unix = function() {
            return Math.floor(+this / 1e3)
        }, je.valueOf = function() {
            return +this._d - 6e4 * (this._offset || 0)
        }, je.creationData = function() {
            return {
                input: this._i,
                format: this._f,
                locale: this._locale,
                isUTC: this._isUTC,
                strict: this._strict
            }
        }, je.year = Qd, je.isLeapYear = function() {
            return ma(this.year())
        }, je.weekYear = function(a) {
            return Nb.call(this, a, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
        }, je.isoWeekYear = function(a) {
            return Nb.call(this, a, this.isoWeek(), this.isoWeekday(), 1, 4)
        }, je.quarter = je.quarters = function(a) {
            return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3)
        }, je.month = $, je.daysInMonth = function() {
            return V(this.year(), this.month())
        }, je.week = je.weeks = function(a) {
            var b = this.localeData().week(this);
            return null == a ? b : this.add(7 * (a - b), "d")
        }, je.isoWeek = je.isoWeeks = function(a) {
            var b = qa(this, 1, 4).week;
            return null == a ? b : this.add(7 * (a - b), "d")
        }, je.weeksInYear = function() {
            var a = this.localeData()._week;
            return ra(this.year(), a.dow, a.doy)
        }, je.isoWeeksInYear = function() {
            return ra(this.year(), 1, 4)
        }, je.date = _d, je.day = je.days = function(a) {
            if (!this.isValid()) return null != a ? this : NaN;
            var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            return null != a ? (a = function(a, b) {
                return "string" != typeof a ? a : isNaN(a) ? "number" == typeof(a = b.weekdaysParse(a)) ? a : null : parseInt(a, 10)
            }(a, this.localeData()), this.add(a - b, "d")) : b
        }, je.weekday = function(a) {
            if (!this.isValid()) return null != a ? this : NaN;
            var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
            return null == a ? b : this.add(a - b, "d")
        }, je.isoWeekday = function(a) {
            return this.isValid() ? null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7) : null != a ? this : NaN
        }, je.dayOfYear = function(a) {
            var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
            return null == a ? b : this.add(a - b, "d")
        }, je.hour = je.hours = ee, je.minute = je.minutes = fe, je.second = je.seconds = ge, je.millisecond = je.milliseconds = ie, je.utcOffset = function(b, c) {
            var d, e = this._offset || 0;
            return this.isValid() ? null != b ? ("string" == typeof b ? b = La(qd, b) : Math.abs(b) < 16 && (b *= 60), !this._isUTC && c && (d = Na(this)), this._offset = b, this._isUTC = !0, null != d && this.add(d, "m"), e !== b && (!c || this._changeInProgress ? cb(this, Za(b - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, a.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Na(this) : null != b ? this : NaN
        }, je.utc = function(a) {
            return this.utcOffset(0, a)
        }, je.local = function(a) {
            return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Na(this), "m")), this
        }, je.parseZone = function() {
            return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(La(pd, this._i)), this
        }, je.hasAlignedHourOffset = function(a) {
            return !!this.isValid() && (a = a ? Ea(a).utcOffset() : 0, (this.utcOffset() - a) % 60 == 0)
        }, je.isDST = function() {
            return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
        }, je.isDSTShifted = function() {
            if (!m(this._isDSTShifted)) return this._isDSTShifted;
            var a = {};
            if (n(a, this), (a = Ba(a))._a) {
                var b = a._isUTC ? h(a._a) : Ea(a._a);
                this._isDSTShifted = this.isValid() && 0 < s(a._a, b.toArray())
            } else this._isDSTShifted = !1;
            return this._isDSTShifted
        }, je.isLocal = function() {
            return !!this.isValid() && !this._isUTC
        }, je.isUtcOffset = function() {
            return !!this.isValid() && this._isUTC
        }, je.isUtc = Ya, je.isUTC = Ya, je.zoneAbbr = function() {
            return this._isUTC ? "UTC" : ""
        }, je.zoneName = function() {
            return this._isUTC ? "Coordinated Universal Time" : ""
        }, je.dates = fa("dates accessor is deprecated. Use date instead.", _d), je.months = fa("months accessor is deprecated. Use month instead", $), je.years = fa("years accessor is deprecated. Use year instead", Qd), je.zone = fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", function(a, b) {
            return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset()
        });
        var ke = je,
            re = t.prototype;
        re._calendar = {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        }, re.calendar = function(a, b, c) {
            var d = this._calendar[a];
            return D(d) ? d.call(b, c) : d
        }, re._longDateFormat = {
            LTS: "h:mm:ss A",
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY h:mm A",
            LLLL: "dddd, MMMM D, YYYY h:mm A"
        }, re.longDateFormat = function(a) {
            var b = this._longDateFormat[a],
                c = this._longDateFormat[a.toUpperCase()];
            return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function(a) {
                return a.slice(1)
            }), this._longDateFormat[a])
        }, re._invalidDate = "Invalid date", re.invalidDate = function() {
            return this._invalidDate
        }, re._ordinal = "%d", re.ordinal = function(a) {
            return this._ordinal.replace("%d", a)
        }, re._ordinalParse = /\d{1,2}/, re.preparse = qc, re.postformat = qc, re._relativeTime = {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        }, re.relativeTime = function(a, b, c, d) {
            var e = this._relativeTime[c];
            return D(e) ? e(a, b, c, d) : e.replace(/%d/i, a)
        }, re.pastFuture = function(a, b) {
            var c = this._relativeTime[0 < a ? "future" : "past"];
            return D(c) ? c(b) : c.replace(/%s/i, b)
        }, re.set = function(a) {
            var b, c;
            for (c in a) D(b = a[c]) ? this[c] = b : this["_" + c] = b;
            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source)
        }, re.months = function(a, b) {
            return c(this._months) ? this._months[a.month()] : this._months[Ed.test(b) ? "format" : "standalone"][a.month()]
        }, re._months = Fd, re.monthsShort = function(a, b) {
            return c(this._monthsShort) ? this._monthsShort[a.month()] : this._monthsShort[Ed.test(b) ? "format" : "standalone"][a.month()]
        }, re._monthsShort = Gd, re.monthsParse = function(a, b, c) {
            var d, e, f;
            for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), d = 0; d < 12; d++) {
                if (e = h([2e3, d]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), this._shortMonthsParse[d] = new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
                if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
                if (!c && this._monthsParse[d].test(a)) return d
            }
        }, re._monthsRegex = Id, re.monthsRegex = function(a) {
            return this._monthsParseExact ? (f(this, "_monthsRegex") || ca.call(this), a ? this._monthsStrictRegex : this._monthsRegex) : this._monthsStrictRegex && a ? this._monthsStrictRegex : this._monthsRegex
        }, re._monthsShortRegex = Hd, re.monthsShortRegex = function(a) {
            return this._monthsParseExact ? (f(this, "_monthsRegex") || ca.call(this), a ? this._monthsShortStrictRegex : this._monthsShortRegex) : this._monthsShortStrictRegex && a ? this._monthsShortStrictRegex : this._monthsShortRegex
        }, re.week = function(a) {
            return qa(a, this._week.dow, this._week.doy).week
        }, re._week = {
            dow: 0,
            doy: 6
        }, re.firstDayOfYear = function() {
            return this._week.doy
        }, re.firstDayOfWeek = function() {
            return this._week.dow
        }, re.weekdays = function(a, b) {
            return c(this._weekdays) ? this._weekdays[a.day()] : this._weekdays[this._weekdays.isFormat.test(b) ? "format" : "standalone"][a.day()]
        }, re._weekdays = ae, re.weekdaysMin = function(a) {
            return this._weekdaysMin[a.day()]
        }, re._weekdaysMin = ce, re.weekdaysShort = function(a) {
            return this._weekdaysShort[a.day()]
        }, re._weekdaysShort = be, re.weekdaysParse = function(a, b, c) {
            var d, e, f;
            for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), d = 0; d < 7; d++) {
                if (e = Ea([2e3, 1]).day(d), c && !this._fullWeekdaysParse[d] && (this._fullWeekdaysParse[d] = new RegExp("^" + this.weekdays(e, "").replace(".", ".?") + "$", "i"), this._shortWeekdaysParse[d] = new RegExp("^" + this.weekdaysShort(e, "").replace(".", ".?") + "$", "i"), this._minWeekdaysParse[d] = new RegExp("^" + this.weekdaysMin(e, "").replace(".", ".?") + "$", "i")), this._weekdaysParse[d] || (f = "^" + this.weekdays(e, "") + "|^" + this.weekdaysShort(e, "") + "|^" + this.weekdaysMin(e, ""), this._weekdaysParse[d] = new RegExp(f.replace(".", ""), "i")), c && "dddd" === b && this._fullWeekdaysParse[d].test(a)) return d;
                if (c && "ddd" === b && this._shortWeekdaysParse[d].test(a)) return d;
                if (c && "dd" === b && this._minWeekdaysParse[d].test(a)) return d;
                if (!c && this._weekdaysParse[d].test(a)) return d
            }
        }, re.isPM = function(a) {
            return "p" === (a + "").toLowerCase().charAt(0)
        }, re._meridiemParse = /[ap]\.?m?\.?/i, re.meridiem = function(a, b, c) {
            return 11 < a ? c ? "pm" : "PM" : c ? "am" : "AM"
        }, x("en", {
            ordinalParse: /\d{1,2}(th|st|nd|rd)/,
            ordinal: function(a) {
                var b = a % 10;
                return a + (1 === r(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th")
            }
        }), a.lang = fa("moment.lang is deprecated. Use moment.locale instead.", x), a.langData = fa("moment.langData is deprecated. Use moment.localeData instead.", z);
        var se = Math.abs,
            te = Lc("ms"),
            ue = Lc("s"),
            ve = Lc("m"),
            we = Lc("h"),
            xe = Lc("d"),
            ye = Lc("w"),
            ze = Lc("M"),
            Ae = Lc("y"),
            Be = Nc("milliseconds"),
            Ce = Nc("seconds"),
            De = Nc("minutes"),
            Ee = Nc("hours"),
            Fe = Nc("days"),
            Ge = Nc("months"),
            He = Nc("years"),
            Ie = Math.round,
            Je = {
                s: 45,
                m: 45,
                h: 22,
                d: 26,
                M: 11
            },
            Ke = Math.abs,
            Le = Ia.prototype;
        return Le.abs = function() {
                var a = this._data;
                return this._milliseconds = se(this._milliseconds), this._days = se(this._days), this._months = se(this._months), a.milliseconds = se(a.milliseconds), a.seconds = se(a.seconds), a.minutes = se(a.minutes), a.hours = se(a.hours), a.months = se(a.months), a.years = se(a.years), this
            }, Le.add = function(a, b) {
                return Cc(this, a, b, 1)
            }, Le.subtract = function(a, b) {
                return Cc(this, a, b, -1)
            }, Le.as = function(a) {
                var b, c, d = this._milliseconds;
                if ("month" === (a = B(a)) || "year" === a) return b = this._days + d / 864e5, c = this._months + Hc(b), "month" === a ? c : c / 12;
                switch (b = this._days + Math.round(Ic(this._months)), a) {
                    case "week":
                        return b / 7 + d / 6048e5;
                    case "day":
                        return b + d / 864e5;
                    case "hour":
                        return 24 * b + d / 36e5;
                    case "minute":
                        return 1440 * b + d / 6e4;
                    case "second":
                        return 86400 * b + d / 1e3;
                    case "millisecond":
                        return Math.floor(864e5 * b) + d;
                    default:
                        throw new Error("Unknown unit " + a)
                }
            }, Le.asMilliseconds = te, Le.asSeconds = ue, Le.asMinutes = ve, Le.asHours = we, Le.asDays = xe, Le.asWeeks = ye, Le.asMonths = ze, Le.asYears = Ae, Le.valueOf = function() {
                return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * r(this._months / 12)
            }, Le._bubble = function() {
                var a, b, c, d, e, f = this._milliseconds,
                    g = this._days,
                    h = this._months,
                    i = this._data;
                return 0 <= f && 0 <= g && 0 <= h || f <= 0 && g <= 0 && h <= 0 || (f += 864e5 * Fc(Ic(h) + g), h = g = 0), i.milliseconds = f % 1e3, a = q(f / 1e3), i.seconds = a % 60, b = q(a / 60), i.minutes = b % 60, c = q(b / 60), i.hours = c % 24, h += e = q(Hc(g += q(c / 24))), g -= Fc(Ic(e)), d = q(h / 12), h %= 12, i.days = g, i.months = h, i.years = d, this
            }, Le.get = function(a) {
                return this[(a = B(a)) + "s"]()
            }, Le.milliseconds = Be, Le.seconds = Ce, Le.minutes = De, Le.hours = Ee, Le.days = Fe, Le.weeks = function() {
                return q(this.days() / 7)
            }, Le.months = Ge, Le.years = He, Le.humanize = function(a) {
                var b = this.localeData(),
                    c = function(a, b, c) {
                        var d = Za(a).abs(),
                            e = Ie(d.as("s")),
                            f = Ie(d.as("m")),
                            g = Ie(d.as("h")),
                            h = Ie(d.as("d")),
                            i = Ie(d.as("M")),
                            j = Ie(d.as("y")),
                            k = e < Je.s && ["s", e] || f <= 1 && ["m"] || f < Je.m && ["mm", f] || g <= 1 && ["h"] || g < Je.h && ["hh", g] || h <= 1 && ["d"] || h < Je.d && ["dd", h] || i <= 1 && ["M"] || i < Je.M && ["MM", i] || j <= 1 && ["y"] || ["yy", j];
                        return k[2] = b, k[3] = 0 < +a, k[4] = c,
                            function(a, b, c, d, e) {
                                return e.relativeTime(b || 1, !!c, a, d)
                            }.apply(null, k)
                    }(this, !a, b);
                return a && (c = b.pastFuture(+this, c)), b.postformat(c)
            }, Le.toISOString = Tc, Le.toString = Tc, Le.toJSON = Tc, Le.locale = ub, Le.localeData = vb, Le.toIsoString = fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Tc), Le.lang = Zd, J("X", 0, 0, "unix"), J("x", 0, 0, "valueOf"), O("x", od), O("X", /[+-]?\d+(\.\d{1,3})?/), S("X", function(a, b, c) {
                c._d = new Date(1e3 * parseFloat(a, 10))
            }), S("x", function(a, b, c) {
                c._d = new Date(r(a))
            }), a.version = "2.11.1",
            function(a) {
                Uc = a
            }(Ea), a.fn = ke, a.min = function() {
                return Fa("isBefore", [].slice.call(arguments, 0))
            }, a.max = function() {
                return Fa("isAfter", [].slice.call(arguments, 0))
            }, a.now = function() {
                return Date.now ? Date.now() : +new Date
            }, a.utc = h, a.unix = function(a) {
                return Ea(1e3 * a)
            }, a.months = function(a, b) {
                return vc(a, b, "months", 12, "month")
            }, a.isDate = d, a.locale = x, a.invalid = l, a.duration = Za, a.isMoment = p, a.weekdays = function(a, b) {
                return vc(a, b, "weekdays", 7, "day")
            }, a.parseZone = function() {
                return Ea.apply(null, arguments).parseZone()
            }, a.localeData = z, a.isDuration = Ja, a.monthsShort = function(a, b) {
                return vc(a, b, "monthsShort", 12, "month")
            }, a.weekdaysMin = function(a, b) {
                return vc(a, b, "weekdaysMin", 7, "day")
            }, a.defineLocale = y, a.weekdaysShort = function(a, b) {
                return vc(a, b, "weekdaysShort", 7, "day")
            }, a.normalizeUnits = B, a.relativeTimeThreshold = function(a, b) {
                return void 0 !== Je[a] && (void 0 === b ? Je[a] : (Je[a] = b, !0))
            }, a.prototype = ke, a
    }),
    function(t, e) {
        "object" == ("undefined" == typeof exports ? "undefined" : _typeof(exports)) && "object" == ("undefined" == typeof module ? "undefined" : _typeof(module)) ? module.exports = e(): "function" == typeof define && define.amd ? define([], e) : "object" == ("undefined" == typeof exports ? "undefined" : _typeof(exports)) ? exports.Pusher = e() : t.Pusher = e()
    }(this, function() {
        return function(t) {
            function e(r) {
                if (n[r]) return n[r].exports;
                var i = n[r] = {
                    exports: {},
                    id: r,
                    loaded: !1
                };
                return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports
            }
            var n = {};
            return e.m = t, e.c = n, e.p = "", e(0)
        }([function(t, e, n) {
            "use strict";
            var r = n(1);
            t.exports = r.default
        }, function(t, e, n) {
            "use strict";
            var i = n(2),
                o = n(9),
                s = n(24),
                a = n(39),
                u = n(40),
                c = n(41),
                h = n(12),
                f = n(5),
                l = n(71),
                p = n(8),
                d = n(43),
                y = n(14),
                g = function() {
                    function t(e, n) {
                        var h = this;
                        if (function(t) {
                                if (null == t) throw "You must pass your app key when you instantiate Pusher."
                            }(e), !(n = n || {}).cluster && !n.wsHost && !n.httpHost) {
                            var g = y.default.buildLogSuffix("javascriptQuickStart");
                            p.default.warn("You should always specify a cluster when connecting. " + g)
                        }
                        this.key = e, this.config = o.extend(l.getGlobalConfig(), n.cluster ? l.getClusterConfig(n.cluster) : {}, n), this.channels = d.default.createChannels(), this.global_emitter = new s.default, this.sessionID = Math.floor(1e9 * Math.random()), this.timeline = new a.default(this.key, this.sessionID, {
                            cluster: this.config.cluster,
                            features: t.getClientFeatures(),
                            params: this.config.timelineParams || {},
                            limit: 50,
                            level: u.default.INFO,
                            version: f.default.VERSION
                        }), this.config.disableStats || (this.timelineSender = d.default.createTimelineSender(this.timeline, {
                            host: this.config.statsHost,
                            path: "/timeline/v2/" + i.default.TimelineTransport.name
                        }));
                        this.connection = d.default.createConnectionManager(this.key, o.extend({
                            getStrategy: function(t) {
                                var e = o.extend({}, h.config, t);
                                return c.build(i.default.getDefaultStrategy(e), e)
                            },
                            timeline: this.timeline,
                            activityTimeout: this.config.activity_timeout,
                            pongTimeout: this.config.pong_timeout,
                            unavailableTimeout: this.config.unavailable_timeout
                        }, this.config, {
                            useTLS: this.shouldUseTLS()
                        })), this.connection.bind("connected", function() {
                            h.subscribeAll(), h.timelineSender && h.timelineSender.send(h.connection.isUsingTLS())
                        }), this.connection.bind("message", function(t) {
                            var e = 0 === t.event.indexOf("pusher_internal:");
                            if (t.channel) {
                                var n = h.channel(t.channel);
                                n && n.handleEvent(t.event, t.data)
                            }
                            e || h.global_emitter.emit(t.event, t.data)
                        }), this.connection.bind("connecting", function() {
                            h.channels.disconnect()
                        }), this.connection.bind("disconnected", function() {
                            h.channels.disconnect()
                        }), this.connection.bind("error", function(t) {
                            p.default.warn("Error", t)
                        }), t.instances.push(this), this.timeline.info({
                            instances: t.instances.length
                        }), t.isReady && this.connect()
                    }
                    return t.ready = function() {
                        t.isReady = !0;
                        for (var e = 0, n = t.instances.length; e < n; e++) t.instances[e].connect()
                    }, t.log = function(e) {
                        t.logToConsole && window.console && window.console.log && window.console.log(e)
                    }, t.getClientFeatures = function() {
                        return o.keys(o.filterObject({
                            ws: i.default.Transports.ws
                        }, function(t) {
                            return t.isSupported({})
                        }))
                    }, t.prototype.channel = function(t) {
                        return this.channels.find(t)
                    }, t.prototype.allChannels = function() {
                        return this.channels.all()
                    }, t.prototype.connect = function() {
                        if (this.connection.connect(), this.timelineSender && !this.timelineSenderTimer) {
                            var t = this.connection.isUsingTLS(),
                                e = this.timelineSender;
                            this.timelineSenderTimer = new h.PeriodicTimer(6e4, function() {
                                e.send(t)
                            })
                        }
                    }, t.prototype.disconnect = function() {
                        this.connection.disconnect(), this.timelineSenderTimer && (this.timelineSenderTimer.ensureAborted(), this.timelineSenderTimer = null)
                    }, t.prototype.bind = function(t, e, n) {
                        return this.global_emitter.bind(t, e, n), this
                    }, t.prototype.unbind = function(t, e, n) {
                        return this.global_emitter.unbind(t, e, n), this
                    }, t.prototype.bind_global = function(t) {
                        return this.global_emitter.bind_global(t), this
                    }, t.prototype.unbind_global = function(t) {
                        return this.global_emitter.unbind_global(t), this
                    }, t.prototype.unbind_all = function(t) {
                        return this.global_emitter.unbind_all(), this
                    }, t.prototype.subscribeAll = function() {
                        var t;
                        for (t in this.channels.channels) this.channels.channels.hasOwnProperty(t) && this.subscribe(t)
                    }, t.prototype.subscribe = function(t) {
                        var e = this.channels.add(t, this);
                        return e.subscriptionPending && e.subscriptionCancelled ? e.reinstateSubscription() : e.subscriptionPending || "connected" !== this.connection.state || e.subscribe(), e
                    }, t.prototype.unsubscribe = function(t) {
                        var e = this.channels.find(t);
                        e && e.subscriptionPending ? e.cancelSubscription() : (e = this.channels.remove(t)) && "connected" === this.connection.state && e.unsubscribe()
                    }, t.prototype.send_event = function(t, e, n) {
                        return this.connection.send_event(t, e, n)
                    }, t.prototype.shouldUseTLS = function() {
                        return "https:" === i.default.getProtocol() || !0 === this.config.forceTLS || Boolean(this.config.encrypted)
                    }, t.instances = [], t.isReady = !1, t.logToConsole = !1, t.Runtime = i.default, t.ScriptReceivers = i.default.ScriptReceivers, t.DependenciesReceivers = i.default.DependenciesReceivers, t.auth_callbacks = i.default.auth_callbacks, t
                }();
            e.__esModule = !0, e.default = g, i.default.setup(g)
        }, function(t, e, n) {
            "use strict";
            var r = n(3),
                i = n(7),
                o = n(15),
                s = n(16),
                a = n(17),
                u = n(4),
                c = n(18),
                h = n(19),
                f = n(26),
                l = n(27),
                p = n(28),
                d = n(29),
                y = {
                    nextAuthCallbackID: 1,
                    auth_callbacks: {},
                    ScriptReceivers: u.ScriptReceivers,
                    DependenciesReceivers: r.DependenciesReceivers,
                    getDefaultStrategy: l.default,
                    Transports: h.default,
                    transportConnectionInitializer: p.default,
                    HTTPFactory: d.default,
                    TimelineTransport: c.default,
                    getXHRAPI: function() {
                        return window.XMLHttpRequest
                    },
                    getWebSocketAPI: function() {
                        return window.WebSocket || window.MozWebSocket
                    },
                    setup: function(t) {
                        var e = this;
                        window.Pusher = t;
                        var n = function() {
                            e.onDocumentBody(t.ready)
                        };
                        window.JSON ? n() : r.Dependencies.load("json2", {}, n)
                    },
                    getDocument: function() {
                        return document
                    },
                    getProtocol: function() {
                        return this.getDocument().location.protocol
                    },
                    getAuthorizers: function() {
                        return {
                            ajax: i.default,
                            jsonp: o.default
                        }
                    },
                    onDocumentBody: function(t) {
                        var e = this;
                        document.body ? t() : setTimeout(function() {
                            e.onDocumentBody(t)
                        }, 0)
                    },
                    createJSONPRequest: function(t, e) {
                        return new a.default(t, e)
                    },
                    createScriptRequest: function(t) {
                        return new s.default(t)
                    },
                    getLocalStorage: function() {
                        try {
                            return window.localStorage
                        } catch (t) {
                            return
                        }
                    },
                    createXHR: function() {
                        return this.getXHRAPI() ? this.createXMLHttpRequest() : this.createMicrosoftXHR()
                    },
                    createXMLHttpRequest: function() {
                        return new(this.getXHRAPI())
                    },
                    createMicrosoftXHR: function() {
                        return new ActiveXObject("Microsoft.XMLHTTP")
                    },
                    getNetwork: function() {
                        return f.Network
                    },
                    createWebSocket: function(t) {
                        return new(this.getWebSocketAPI())(t)
                    },
                    createSocketRequest: function(t, e) {
                        if (this.isXHRSupported()) return this.HTTPFactory.createXHR(t, e);
                        if (this.isXDRSupported(0 === e.indexOf("https:"))) return this.HTTPFactory.createXDR(t, e);
                        throw "Cross-origin HTTP requests are not supported"
                    },
                    isXHRSupported: function() {
                        var t = this.getXHRAPI();
                        return Boolean(t) && void 0 !== (new t).withCredentials
                    },
                    isXDRSupported: function(t) {
                        var e = t ? "https:" : "http:",
                            n = this.getProtocol();
                        return Boolean(window.XDomainRequest) && n === e
                    },
                    addUnloadListener: function(t) {
                        void 0 !== window.addEventListener ? window.addEventListener("unload", t, !1) : void 0 !== window.attachEvent && window.attachEvent("onunload", t)
                    },
                    removeUnloadListener: function(t) {
                        void 0 !== window.addEventListener ? window.removeEventListener("unload", t, !1) : void 0 !== window.detachEvent && window.detachEvent("onunload", t)
                    }
                };
            e.__esModule = !0, e.default = y
        }, function(t, e, n) {
            "use strict";
            var r = n(4),
                i = n(5),
                o = n(6);
            e.DependenciesReceivers = new r.ScriptReceiverFactory("_pusher_dependencies", "Pusher.DependenciesReceivers"), e.Dependencies = new o.default({
                cdn_http: i.default.cdn_http,
                cdn_https: i.default.cdn_https,
                version: i.default.VERSION,
                suffix: i.default.dependency_suffix,
                receivers: e.DependenciesReceivers
            })
        }, function(t, e) {
            "use strict";
            var n = function() {
                function t(t, e) {
                    this.lastId = 0, this.prefix = t, this.name = e
                }
                return t.prototype.create = function(t) {
                    this.lastId++;
                    var e = this.lastId,
                        n = this.prefix + e,
                        r = this.name + "[" + e + "]",
                        i = !1,
                        o = function() {
                            i || (t.apply(null, arguments), i = !0)
                        };
                    return {
                        number: e,
                        id: n,
                        name: r,
                        callback: this[e] = o
                    }
                }, t.prototype.remove = function(t) {
                    delete this[t.number]
                }, t
            }();
            e.ScriptReceiverFactory = n, e.ScriptReceivers = new n("_pusher_script_", "Pusher.ScriptReceivers")
        }, function(t, e) {
            "use strict";
            e.__esModule = !0, e.default = {
                VERSION: "4.3.1",
                PROTOCOL: 7,
                host: "ws.pusherapp.com",
                ws_port: 80,
                wss_port: 443,
                ws_path: "",
                sockjs_host: "sockjs.pusher.com",
                sockjs_http_port: 80,
                sockjs_https_port: 443,
                sockjs_path: "/pusher",
                stats_host: "stats.pusher.com",
                channel_auth_endpoint: "/pusher/auth",
                channel_auth_transport: "ajax",
                activity_timeout: 12e4,
                pong_timeout: 3e4,
                unavailable_timeout: 1e4,
                cdn_http: "http://js.pusher.com",
                cdn_https: "https://js.pusher.com",
                dependency_suffix: ".min"
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(4),
                i = n(2),
                o = function() {
                    function t(t) {
                        this.options = t, this.receivers = t.receivers || r.ScriptReceivers, this.loading = {}
                    }
                    return t.prototype.load = function(t, e, n) {
                        var r = this;
                        if (r.loading[t] && 0 < r.loading[t].length) r.loading[t].push(n);
                        else {
                            r.loading[t] = [n];
                            var o = i.default.createScriptRequest(r.getPath(t, e)),
                                s = r.receivers.create(function(e) {
                                    if (r.receivers.remove(s), r.loading[t]) {
                                        var n = r.loading[t];
                                        delete r.loading[t];
                                        for (var i = function(t) {
                                                t || o.cleanup()
                                            }, a = 0; a < n.length; a++) n[a](e, i)
                                    }
                                });
                            o.send(s)
                        }
                    }, t.prototype.getRoot = function(t) {
                        var n = i.default.getDocument().location.protocol;
                        return (t && t.useTLS || "https:" === n ? this.options.cdn_https : this.options.cdn_http).replace(/\/*$/, "") + "/" + this.options.version
                    }, t.prototype.getPath = function(t, e) {
                        return this.getRoot(e) + "/" + t + this.options.suffix + ".js"
                    }, t
                }();
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";
            var r = n(8),
                i = n(2),
                o = n(14);
            e.__esModule = !0, e.default = function(t, e, n) {
                var s;
                for (var u in s = i.default.createXHR(), s.open("POST", this.options.authEndpoint, !0), s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), this.authOptions.headers) s.setRequestHeader(u, this.authOptions.headers[u]);
                return s.onreadystatechange = function() {
                    if (4 === s.readyState)
                        if (200 === s.status) {
                            var t, e = !1;
                            try {
                                t = JSON.parse(s.responseText), e = !0
                            } catch (t) {
                                n(!0, "JSON returned from webapp was invalid, yet status code was 200. Data was: " + s.responseText)
                            }
                            e && n(!1, t)
                        } else {
                            var i = o.default.buildLogSuffix("authenticationEndpoint");
                            r.default.warn("Couldn't retrieve authentication info. " + s.status + "Clients must be authenticated to join private or presence channels. " + i), n(!0, s.status)
                        }
                }, s.send(this.composeQuery(e)), s
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(1),
                o = {
                    debug: function() {
                        for (var t = [], e = 0; e < arguments.length; e++) t[e - 0] = arguments[e];
                        i.default.log && i.default.log(r.stringify.apply(this, arguments))
                    },
                    warn: function() {
                        for (var t = [], e = 0; e < arguments.length; e++) t[e - 0] = arguments[e];
                        var n = r.stringify.apply(this, arguments);
                        i.default.log ? i.default.log(n) : window.console && (window.console.warn ? window.console.warn(n) : window.console.log && window.console.log(n))
                    }
                };
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";

            function s(t, e) {
                for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e(t[n], n, t)
            }

            function h(t, e) {
                for (var n = [], r = 0; r < t.length; r++) n.push(e(t[r], r, t, n));
                return n
            }

            function f(t, e) {
                var n = {};
                return s(t, function(t, r) {
                    n[r] = e(t)
                }), n
            }

            function p(t, e) {
                var n = {};
                return s(t, function(r, i) {
                    (e && e(r, i, t, n) || Boolean(r)) && (n[i] = r)
                }), n
            }

            function d(t) {
                var e = [];
                return s(t, function(t, n) {
                    e.push([n, t])
                }), e
            }

            function v(t) {
                return f(t, function(t) {
                    return "object" == _typeof(t) && (t = w(t)), encodeURIComponent(_.default(t.toString()))
                })
            }

            function m(t) {
                var e = [],
                    n = [];
                return function t(r, i) {
                    var o, s, a;
                    switch (_typeof(r)) {
                        case "object":
                            if (!r) return null;
                            for (o = 0; o < e.length; o += 1)
                                if (e[o] === r) return {
                                    $ref: n[o]
                                };
                            if (e.push(r), n.push(i), "[object Array]" === Object.prototype.toString.apply(r))
                                for (a = [], o = 0; o < r.length; o += 1) a[o] = t(r[o], i + "[" + o + "]");
                            else
                                for (s in a = {}, r) Object.prototype.hasOwnProperty.call(r, s) && (a[s] = t(r[s], i + "[" + JSON.stringify(s) + "]"));
                            return a;
                        case "number":
                        case "string":
                        case "boolean":
                            return r
                    }
                }(t, "$")
            }

            function w(t) {
                try {
                    return JSON.stringify(t)
                } catch (e) {
                    return JSON.stringify(m(t))
                }
            }
            var _ = n(10),
                S = n(11);
            e.extend = function r(t) {
                for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
                for (var i = 0; i < e.length; i++) {
                    var o = e[i];
                    for (var s in o) o[s] && o[s].constructor && o[s].constructor === Object ? t[s] = r(t[s] || {}, o[s]) : t[s] = o[s]
                }
                return t
            }, e.stringify = function() {
                for (var t = ["Pusher"], e = 0; e < arguments.length; e++) "string" == typeof arguments[e] ? t.push(arguments[e]) : t.push(w(arguments[e]));
                return t.join(" : ")
            }, e.arrayIndexOf = function(t, e) {
                var n = Array.prototype.indexOf;
                if (null === t) return -1;
                if (n && t.indexOf === n) return t.indexOf(e);
                for (var r = 0, i = t.length; r < i; r++)
                    if (t[r] === e) return r;
                return -1
            }, e.objectApply = s, e.keys = function(t) {
                var e = [];
                return s(t, function(t, n) {
                    e.push(n)
                }), e
            }, e.values = function(t) {
                var e = [];
                return s(t, function(t) {
                    e.push(t)
                }), e
            }, e.apply = function(t, e, n) {
                for (var r = 0; r < t.length; r++) e.call(n || window, t[r], r, t)
            }, e.map = h, e.mapObject = f, e.filter = function(t, e) {
                e = e || function(t) {
                    return !!t
                };
                for (var n = [], r = 0; r < t.length; r++) e(t[r], r, t, n) && n.push(t[r]);
                return n
            }, e.filterObject = p, e.flatten = d, e.any = function(t, e) {
                for (var n = 0; n < t.length; n++)
                    if (e(t[n], n, t)) return !0;
                return !1
            }, e.all = function(t, e) {
                for (var n = 0; n < t.length; n++)
                    if (!e(t[n], n, t)) return !1;
                return !0
            }, e.encodeParamsObject = v, e.buildQueryString = function(t) {
                return h(d(v(p(t, function(t) {
                    return void 0 !== t
                }))), S.default.method("join", "=")).join("&")
            }, e.decycleObject = m, e.safeJSONStringify = w
        }, function(t, e, n) {
            "use strict";
            e.__esModule = !0, e.default = function(t) {
                return l(h(t))
            };
            for (var i = String.fromCharCode, o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", s = {}, a = 0, u = o.length; a < u; a++) s[o.charAt(a)] = a;
            var c = function(t) {
                    var e = t.charCodeAt(0);
                    return e < 128 ? t : e < 2048 ? i(192 | e >>> 6) + i(128 | 63 & e) : i(224 | e >>> 12 & 15) + i(128 | e >>> 6 & 63) + i(128 | 63 & e)
                },
                h = function(t) {
                    return t.replace(/[^\x00-\x7F]/g, c)
                },
                f = function(t) {
                    var e = [0, 2, 1][t.length % 3],
                        n = t.charCodeAt(0) << 16 | (1 < t.length ? t.charCodeAt(1) : 0) << 8 | (2 < t.length ? t.charCodeAt(2) : 0);
                    return [o.charAt(n >>> 18), o.charAt(n >>> 12 & 63), 2 <= e ? "=" : o.charAt(n >>> 6 & 63), 1 <= e ? "=" : o.charAt(63 & n)].join("")
                },
                l = window.btoa || function(t) {
                    return t.replace(/[\s\S]{1,3}/g, f)
                }
        }, function(t, e, n) {
            "use strict";
            var r = n(12),
                i = {
                    now: function() {
                        return Date.now ? Date.now() : (new Date).valueOf()
                    },
                    defer: function(t) {
                        return new r.OneOffTimer(0, t)
                    },
                    method: function(t) {
                        for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
                        var r = Array.prototype.slice.call(arguments, 1);
                        return function(e) {
                            return e[t].apply(e, r.concat(arguments))
                        }
                    }
                };
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";

            function r(t) {
                window.clearTimeout(t)
            }

            function i(t) {
                window.clearInterval(t)
            }
            var o = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                s = n(13),
                a = function(t) {
                    function e(e, n) {
                        t.call(this, setTimeout, r, e, function(t) {
                            return n(), null
                        })
                    }
                    return o(e, t), e
                }(s.default);
            e.OneOffTimer = a;
            var u = function(t) {
                function e(e, n) {
                    t.call(this, setInterval, i, e, function(t) {
                        return n(), t
                    })
                }
                return o(e, t), e
            }(s.default);
            e.PeriodicTimer = u
        }, function(t, e) {
            "use strict";
            var n = function() {
                function t(t, e, n, r) {
                    var i = this;
                    this.clear = e, this.timer = t(function() {
                        i.timer && (i.timer = r(i.timer))
                    }, n)
                }
                return t.prototype.isRunning = function() {
                    return null !== this.timer
                }, t.prototype.ensureAborted = function() {
                    this.timer && (this.clear(this.timer), this.timer = null)
                }, t
            }();
            e.__esModule = !0, e.default = n
        }, function(t, e) {
            "use strict";
            var n = {
                baseUrl: "https://pusher.com",
                urls: {
                    authenticationEndpoint: {
                        path: "/docs/authenticating_users"
                    },
                    javascriptQuickStart: {
                        path: "/docs/javascript_quick_start"
                    }
                }
            };
            e.__esModule = !0, e.default = {
                buildLogSuffix: function(t) {
                    var i, r = n.urls[t];
                    return r ? (r.fullUrl ? i = r.fullUrl : r.path && (i = n.baseUrl + r.path), i ? "See: " + i : "") : ""
                }
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(8);
            e.__esModule = !0, e.default = function(t, e, n) {
                void 0 !== this.authOptions.headers && r.default.warn("Warn", "To send headers with the auth request, you must use AJAX, rather than JSONP.");
                var i = t.nextAuthCallbackID.toString();
                t.nextAuthCallbackID++;
                var o = t.getDocument(),
                    s = o.createElement("script");
                t.auth_callbacks[i] = function(t) {
                    n(!1, t)
                };
                var a = "Pusher.auth_callbacks['" + i + "']";
                s.src = this.options.authEndpoint + "?callback=" + encodeURIComponent(a) + "&" + this.composeQuery(e);
                var u = o.getElementsByTagName("head")[0] || o.documentElement;
                u.insertBefore(s, u.firstChild)
            }
        }, function(t, e) {
            "use strict";
            var n = function() {
                function t(t) {
                    this.src = t
                }
                return t.prototype.send = function(t) {
                    var e = this,
                        n = "Error loading " + e.src;
                    e.script = document.createElement("script"), e.script.id = t.id, e.script.src = e.src, e.script.type = "text/javascript", e.script.charset = "UTF-8", e.script.addEventListener ? (e.script.onerror = function() {
                        t.callback(n)
                    }, e.script.onload = function() {
                        t.callback(null)
                    }) : e.script.onreadystatechange = function() {
                        "loaded" !== e.script.readyState && "complete" !== e.script.readyState || t.callback(null)
                    }, void 0 === e.script.async && document.attachEvent && /opera/i.test(navigator.userAgent) ? (e.errorScript = document.createElement("script"), e.errorScript.id = t.id + "_error", e.errorScript.text = t.name + "('" + n + "');", e.script.async = e.errorScript.async = !1) : e.script.async = !0;
                    var r = document.getElementsByTagName("head")[0];
                    r.insertBefore(e.script, r.firstChild), e.errorScript && r.insertBefore(e.errorScript, e.script.nextSibling)
                }, t.prototype.cleanup = function() {
                    this.script && (this.script.onload = this.script.onerror = null, this.script.onreadystatechange = null), this.script && this.script.parentNode && this.script.parentNode.removeChild(this.script), this.errorScript && this.errorScript.parentNode && this.errorScript.parentNode.removeChild(this.errorScript), this.script = null, this.errorScript = null
                }, t
            }();
            e.__esModule = !0, e.default = n
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(2),
                o = function() {
                    function t(t, e) {
                        this.url = t, this.data = e
                    }
                    return t.prototype.send = function(t) {
                        if (!this.request) {
                            var e = r.buildQueryString(this.data),
                                n = this.url + "/" + t.number + "?" + e;
                            this.request = i.default.createScriptRequest(n), this.request.send(t)
                        }
                    }, t.prototype.cleanup = function() {
                        this.request && this.request.cleanup()
                    }, t
                }();
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";
            var r = n(2),
                i = n(4),
                s = {
                    name: "jsonp",
                    getAgent: function(t, e) {
                        return function(n, o) {
                            var a = "http" + (e ? "s" : "") + "://" + (t.host || t.options.host) + t.options.path,
                                u = r.default.createJSONPRequest(a, n),
                                c = r.default.ScriptReceivers.create(function(e, n) {
                                    i.ScriptReceivers.remove(c), u.cleanup(), n && n.host && (t.host = n.host), o && o(e, n)
                                });
                            u.send(c)
                        }
                    }
                };
            e.__esModule = !0, e.default = s
        }, function(t, e, n) {
            "use strict";
            var r = n(20),
                i = n(22),
                o = n(21),
                s = n(2),
                a = n(3),
                u = n(9),
                c = new i.default({
                    file: "sockjs",
                    urls: o.sockjs,
                    handlesActivityChecks: !0,
                    supportsPing: !1,
                    isSupported: function() {
                        return !0
                    },
                    isInitialized: function() {
                        return void 0 !== window.SockJS
                    },
                    getSocket: function(t, e) {
                        return new window.SockJS(t, null, {
                            js_path: a.Dependencies.getPath("sockjs", {
                                useTLS: e.useTLS
                            }),
                            ignore_null_origin: e.ignoreNullOrigin
                        })
                    },
                    beforeOpen: function(t, e) {
                        t.send(JSON.stringify({
                            path: e
                        }))
                    }
                }),
                h = {
                    isSupported: function(t) {
                        return s.default.isXDRSupported(t.useTLS)
                    }
                },
                f = new i.default(u.extend({}, r.streamingConfiguration, h)),
                l = new i.default(u.extend({}, r.pollingConfiguration, h));
            r.default.xdr_streaming = f, r.default.xdr_polling = l, r.default.sockjs = c, e.__esModule = !0, e.default = r.default
        }, function(t, e, n) {
            "use strict";
            var r = n(21),
                i = n(22),
                o = n(9),
                s = n(2),
                a = new i.default({
                    urls: r.ws,
                    handlesActivityChecks: !1,
                    supportsPing: !1,
                    isInitialized: function() {
                        return Boolean(s.default.getWebSocketAPI())
                    },
                    isSupported: function() {
                        return Boolean(s.default.getWebSocketAPI())
                    },
                    getSocket: function(t) {
                        return s.default.createWebSocket(t)
                    }
                }),
                u = {
                    urls: r.http,
                    handlesActivityChecks: !1,
                    supportsPing: !0,
                    isInitialized: function() {
                        return !0
                    }
                };
            e.streamingConfiguration = o.extend({
                getSocket: function(t) {
                    return s.default.HTTPFactory.createStreamingSocket(t)
                }
            }, u), e.pollingConfiguration = o.extend({
                getSocket: function(t) {
                    return s.default.HTTPFactory.createPollingSocket(t)
                }
            }, u);
            var c = {
                    isSupported: function() {
                        return s.default.isXHRSupported()
                    }
                },
                l = {
                    ws: a,
                    xhr_streaming: new i.default(o.extend({}, e.streamingConfiguration, c)),
                    xhr_polling: new i.default(o.extend({}, e.pollingConfiguration, c))
                };
            e.__esModule = !0, e.default = l
        }, function(t, e, n) {
            "use strict";

            function r(t, e, n) {
                return t + (e.useTLS ? "s" : "") + "://" + (e.useTLS ? e.hostTLS : e.hostNonTLS) + n
            }

            function i(t, e) {
                return "/app/" + t + ("?protocol=" + o.default.PROTOCOL + "&client=js&version=" + o.default.VERSION + (e ? "&" + e : ""))
            }
            var o = n(5);
            e.ws = {
                getInitial: function(t, e) {
                    return r("ws", e, (e.httpPath || "") + i(t, "flash=false"))
                }
            }, e.http = {
                getInitial: function(t, e) {
                    return r("http", e, (e.httpPath || "/pusher") + i(t))
                }
            }, e.sockjs = {
                getInitial: function(t, e) {
                    return r("http", e, e.httpPath || "/pusher")
                },
                getPath: function(t, e) {
                    return i(t)
                }
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(23),
                i = function() {
                    function t(t) {
                        this.hooks = t
                    }
                    return t.prototype.isSupported = function(t) {
                        return this.hooks.isSupported(t)
                    }, t.prototype.createConnection = function(t, e, n, i) {
                        return new r.default(this.hooks, t, e, n, i)
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(11),
                o = n(9),
                s = n(24),
                a = n(8),
                u = n(2),
                c = function(t) {
                    function e(e, n, r, i, o) {
                        t.call(this), this.initialize = u.default.transportConnectionInitializer, this.hooks = e, this.name = n, this.priority = r, this.key = i, this.options = o, this.state = "new", this.timeline = o.timeline, this.activityTimeout = o.activityTimeout, this.id = this.timeline.generateUniqueID()
                    }
                    return r(e, t), e.prototype.handlesActivityChecks = function() {
                        return Boolean(this.hooks.handlesActivityChecks)
                    }, e.prototype.supportsPing = function() {
                        return Boolean(this.hooks.supportsPing)
                    }, e.prototype.connect = function() {
                        var t = this;
                        if (this.socket || "initialized" !== this.state) return !1;
                        var e = this.hooks.urls.getInitial(this.key, this.options);
                        try {
                            this.socket = this.hooks.getSocket(e, this.options)
                        } catch (e) {
                            return i.default.defer(function() {
                                t.onError(e), t.changeState("closed")
                            }), !1
                        }
                        return this.bindListeners(), a.default.debug("Connecting", {
                            transport: this.name,
                            url: e
                        }), this.changeState("connecting"), !0
                    }, e.prototype.close = function() {
                        return !!this.socket && (this.socket.close(), !0)
                    }, e.prototype.send = function(t) {
                        var e = this;
                        return "open" === this.state && (i.default.defer(function() {
                            e.socket && e.socket.send(t)
                        }), !0)
                    }, e.prototype.ping = function() {
                        "open" === this.state && this.supportsPing() && this.socket.ping()
                    }, e.prototype.onOpen = function() {
                        this.hooks.beforeOpen && this.hooks.beforeOpen(this.socket, this.hooks.urls.getPath(this.key, this.options)), this.changeState("open"), this.socket.onopen = void 0
                    }, e.prototype.onError = function(t) {
                        this.emit("error", {
                            type: "WebSocketError",
                            error: t
                        }), this.timeline.error(this.buildTimelineMessage({
                            error: t.toString()
                        }))
                    }, e.prototype.onClose = function(t) {
                        t ? this.changeState("closed", {
                            code: t.code,
                            reason: t.reason,
                            wasClean: t.wasClean
                        }) : this.changeState("closed"), this.unbindListeners(), this.socket = void 0
                    }, e.prototype.onMessage = function(t) {
                        this.emit("message", t)
                    }, e.prototype.onActivity = function() {
                        this.emit("activity")
                    }, e.prototype.bindListeners = function() {
                        var t = this;
                        this.socket.onopen = function() {
                            t.onOpen()
                        }, this.socket.onerror = function(e) {
                            t.onError(e)
                        }, this.socket.onclose = function(e) {
                            t.onClose(e)
                        }, this.socket.onmessage = function(e) {
                            t.onMessage(e)
                        }, this.supportsPing() && (this.socket.onactivity = function() {
                            t.onActivity()
                        })
                    }, e.prototype.unbindListeners = function() {
                        this.socket && (this.socket.onopen = void 0, this.socket.onerror = void 0, this.socket.onclose = void 0, this.socket.onmessage = void 0, this.supportsPing() && (this.socket.onactivity = void 0))
                    }, e.prototype.changeState = function(t, e) {
                        this.state = t, this.timeline.info(this.buildTimelineMessage({
                            state: t,
                            params: e
                        })), this.emit(t, e)
                    }, e.prototype.buildTimelineMessage = function(t) {
                        return o.extend({
                            cid: this.id
                        }, t)
                    }, e
                }(s.default);
            e.__esModule = !0, e.default = c
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(25),
                o = function() {
                    function t(t) {
                        this.callbacks = new i.default, this.global_callbacks = [], this.failThrough = t
                    }
                    return t.prototype.bind = function(t, e, n) {
                        return this.callbacks.add(t, e, n), this
                    }, t.prototype.bind_global = function(t) {
                        return this.global_callbacks.push(t), this
                    }, t.prototype.unbind = function(t, e, n) {
                        return this.callbacks.remove(t, e, n), this
                    }, t.prototype.unbind_global = function(t) {
                        return this.global_callbacks = t ? r.filter(this.global_callbacks || [], function(e) {
                            return e !== t
                        }) : [], this
                    }, t.prototype.unbind_all = function() {
                        return this.unbind(), this.unbind_global(), this
                    }, t.prototype.emit = function(t, e) {
                        var n;
                        for (n = 0; n < this.global_callbacks.length; n++) this.global_callbacks[n](t, e);
                        var r = this.callbacks.get(t);
                        if (r && 0 < r.length)
                            for (n = 0; n < r.length; n++) r[n].fn.call(r[n].context || window, e);
                        else this.failThrough && this.failThrough(t, e);
                        return this
                    }, t
                }();
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";

            function r(t) {
                return "_" + t
            }
            var i = n(9),
                o = function() {
                    function t() {
                        this._callbacks = {}
                    }
                    return t.prototype.get = function(t) {
                        return this._callbacks[r(t)]
                    }, t.prototype.add = function(t, e, n) {
                        var i = r(t);
                        this._callbacks[i] = this._callbacks[i] || [], this._callbacks[i].push({
                            fn: e,
                            context: n
                        })
                    }, t.prototype.remove = function(t, e, n) {
                        if (t || e || n) {
                            var o = t ? [r(t)] : i.keys(this._callbacks);
                            e || n ? this.removeCallback(o, e, n) : this.removeAllCallbacks(o)
                        } else this._callbacks = {}
                    }, t.prototype.removeCallback = function(t, e, n) {
                        i.apply(t, function(t) {
                            this._callbacks[t] = i.filter(this._callbacks[t] || [], function(t) {
                                return e && e !== t.fn || n && n !== t.context
                            }), 0 === this._callbacks[t].length && delete this._callbacks[t]
                        }, this)
                    }, t.prototype.removeAllCallbacks = function(t) {
                        i.apply(t, function(t) {
                            delete this._callbacks[t]
                        }, this)
                    }, t
                }();
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                o = function(t) {
                    function e() {
                        t.call(this);
                        var e = this;
                        void 0 !== window.addEventListener && (window.addEventListener("online", function() {
                            e.emit("online")
                        }, !1), window.addEventListener("offline", function() {
                            e.emit("offline")
                        }, !1))
                    }
                    return r(e, t), e.prototype.isOnline = function() {
                        return void 0 === window.navigator.onLine || window.navigator.onLine
                    }, e
                }(n(24).default);
            e.NetInfo = o, e.Network = new o
        }, function(t, e) {
            "use strict";
            e.__esModule = !0, e.default = function(t) {
                var e;
                return e = t.useTLS ? [":best_connected_ever", ":ws_loop", [":delayed", 2e3, [":http_fallback_loop"]]] : [":best_connected_ever", ":ws_loop", [":delayed", 2e3, [":wss_loop"]],
                    [":delayed", 5e3, [":http_fallback_loop"]]
                ], [
                    [":def", "ws_options", {
                        hostNonTLS: t.wsHost + ":" + t.wsPort,
                        hostTLS: t.wsHost + ":" + t.wssPort,
                        httpPath: t.wsPath
                    }],
                    [":def", "wss_options", [":extend", ":ws_options", {
                        useTLS: !0
                    }]],
                    [":def", "sockjs_options", {
                        hostNonTLS: t.httpHost + ":" + t.httpPort,
                        hostTLS: t.httpHost + ":" + t.httpsPort,
                        httpPath: t.httpPath
                    }],
                    [":def", "timeouts", {
                        loop: !0,
                        timeout: 15e3,
                        timeoutLimit: 6e4
                    }],
                    [":def", "ws_manager", [":transport_manager", {
                        lives: 2,
                        minPingDelay: 1e4,
                        maxPingDelay: t.activity_timeout
                    }]],
                    [":def", "streaming_manager", [":transport_manager", {
                        lives: 2,
                        minPingDelay: 1e4,
                        maxPingDelay: t.activity_timeout
                    }]],
                    [":def_transport", "ws", "ws", 3, ":ws_options", ":ws_manager"],
                    [":def_transport", "wss", "ws", 3, ":wss_options", ":ws_manager"],
                    [":def_transport", "sockjs", "sockjs", 1, ":sockjs_options"],
                    [":def_transport", "xhr_streaming", "xhr_streaming", 1, ":sockjs_options", ":streaming_manager"],
                    [":def_transport", "xdr_streaming", "xdr_streaming", 1, ":sockjs_options", ":streaming_manager"],
                    [":def_transport", "xhr_polling", "xhr_polling", 1, ":sockjs_options"],
                    [":def_transport", "xdr_polling", "xdr_polling", 1, ":sockjs_options"],
                    [":def", "ws_loop", [":sequential", ":timeouts", ":ws"]],
                    [":def", "wss_loop", [":sequential", ":timeouts", ":wss"]],
                    [":def", "sockjs_loop", [":sequential", ":timeouts", ":sockjs"]],
                    [":def", "streaming_loop", [":sequential", ":timeouts", [":if", [":is_supported", ":xhr_streaming"], ":xhr_streaming", ":xdr_streaming"]]],
                    [":def", "polling_loop", [":sequential", ":timeouts", [":if", [":is_supported", ":xhr_polling"], ":xhr_polling", ":xdr_polling"]]],
                    [":def", "http_loop", [":if", [":is_supported", ":streaming_loop"],
                        [":best_connected_ever", ":streaming_loop", [":delayed", 4e3, [":polling_loop"]]],
                        [":polling_loop"]
                    ]],
                    [":def", "http_fallback_loop", [":if", [":is_supported", ":http_loop"],
                        [":http_loop"],
                        [":sockjs_loop"]
                    ]],
                    [":def", "strategy", [":cached", 18e5, [":first_connected", [":if", [":is_supported", ":ws"], e, ":http_fallback_loop"]]]]
                ]
            }
        }, function(t, e, n) {
            "use strict";
            var i = n(3);
            e.__esModule = !0, e.default = function() {
                var t = this;
                t.timeline.info(t.buildTimelineMessage({
                    transport: t.name + (t.options.useTLS ? "s" : "")
                })), t.hooks.isInitialized() ? t.changeState("initialized") : t.hooks.file ? (t.changeState("initializing"), i.Dependencies.load(t.hooks.file, {
                    useTLS: t.options.useTLS
                }, function(e, n) {
                    t.hooks.isInitialized() ? (t.changeState("initialized"), n(!0)) : (e && t.onError(e), t.onClose(), n(!1))
                })) : t.onClose()
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(30),
                i = n(32);
            i.default.createXDR = function(t, e) {
                return this.createRequest(r.default, t, e)
            }, e.__esModule = !0, e.default = i.default
        }, function(t, e, n) {
            "use strict";
            var r = n(31),
                i = {
                    getRequest: function(t) {
                        var e = new window.XDomainRequest;
                        return e.ontimeout = function() {
                            t.emit("error", new r.RequestTimedOut), t.close()
                        }, e.onerror = function(e) {
                            t.emit("error", e), t.close()
                        }, e.onprogress = function() {
                            e.responseText && 0 < e.responseText.length && t.onChunk(200, e.responseText)
                        }, e.onload = function() {
                            e.responseText && 0 < e.responseText.length && t.onChunk(200, e.responseText), t.emit("finished", 200), t.close()
                        }, e
                    },
                    abortRequest: function(t) {
                        t.ontimeout = t.onerror = t.onprogress = t.onload = null, t.abort()
                    }
                };
            e.__esModule = !0, e.default = i
        }, function(t, e) {
            "use strict";
            var n = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                r = function(t) {
                    function e() {
                        t.apply(this, arguments)
                    }
                    return n(e, t), e
                }(Error);
            e.BadEventName = r;
            var i = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.RequestTimedOut = i;
            var o = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.TransportPriorityTooLow = o;
            var s = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.TransportClosed = s;
            var a = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.UnsupportedFeature = a;
            var u = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.UnsupportedTransport = u;
            var c = function(t) {
                function e() {
                    t.apply(this, arguments)
                }
                return n(e, t), e
            }(Error);
            e.UnsupportedStrategy = c
        }, function(t, e, n) {
            "use strict";
            var r = n(33),
                i = n(34),
                o = n(36),
                s = n(37),
                a = n(38),
                u = {
                    createStreamingSocket: function(t) {
                        return this.createSocket(o.default, t)
                    },
                    createPollingSocket: function(t) {
                        return this.createSocket(s.default, t)
                    },
                    createSocket: function(t, e) {
                        return new i.default(t, e)
                    },
                    createXHR: function(t, e) {
                        return this.createRequest(a.default, t, e)
                    },
                    createRequest: function(t, e, n) {
                        return new r.default(t, e, n)
                    }
                };
            e.__esModule = !0, e.default = u
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(2),
                o = n(24),
                a = function(t) {
                    function e(e, n, r) {
                        t.call(this), this.hooks = e, this.method = n, this.url = r
                    }
                    return r(e, t), e.prototype.start = function(t) {
                        var e = this;
                        this.position = 0, this.xhr = this.hooks.getRequest(this), this.unloader = function() {
                            e.close()
                        }, i.default.addUnloadListener(this.unloader), this.xhr.open(this.method, this.url, !0), this.xhr.setRequestHeader && this.xhr.setRequestHeader("Content-Type", "application/json"), this.xhr.send(t)
                    }, e.prototype.close = function() {
                        this.unloader && (i.default.removeUnloadListener(this.unloader), this.unloader = null), this.xhr && (this.hooks.abortRequest(this.xhr), this.xhr = null)
                    }, e.prototype.onChunk = function(t, e) {
                        for (;;) {
                            var n = this.advanceBuffer(e);
                            if (!n) break;
                            this.emit("chunk", {
                                status: t,
                                data: n
                            })
                        }
                        this.isBufferTooLong(e) && this.emit("buffer_too_long")
                    }, e.prototype.advanceBuffer = function(t) {
                        var e = t.slice(this.position),
                            n = e.indexOf("\n");
                        return -1 !== n ? (this.position += n + 1, e.slice(0, n)) : null
                    }, e.prototype.isBufferTooLong = function(t) {
                        return this.position === t.length && 262144 < t.length
                    }, e
                }(o.default);
            e.__esModule = !0, e.default = a
        }, function(t, e, n) {
            "use strict";

            function o(t) {
                var e = -1 === t.indexOf("?") ? "?" : "&";
                return t + e + "t=" + +new Date + "&n=" + l++
            }

            function a(t) {
                return Math.floor(Math.random() * t)
            }
            var c = n(35),
                h = n(11),
                f = n(2),
                l = 1,
                p = function() {
                    function t(t, e) {
                        this.hooks = t, this.session = a(1e3) + "/" + function(t) {
                            for (var e = [], n = 0; n < t; n++) e.push(a(32).toString(32));
                            return e.join("")
                        }(8), this.location = function(t) {
                            var e = /([^\?]*)\/*(\??.*)/.exec(t);
                            return {
                                base: e[1],
                                queryString: e[2]
                            }
                        }(e), this.readyState = c.default.CONNECTING, this.openStream()
                    }
                    return t.prototype.send = function(t) {
                        return this.sendRaw(JSON.stringify([t]))
                    }, t.prototype.ping = function() {
                        this.hooks.sendHeartbeat(this)
                    }, t.prototype.close = function(t, e) {
                        this.onClose(t, e, !0)
                    }, t.prototype.sendRaw = function(t) {
                        if (this.readyState !== c.default.OPEN) return !1;
                        try {
                            return f.default.createSocketRequest("POST", o(function(t, e) {
                                return t.base + "/" + e + "/xhr_send"
                            }(this.location, this.session))).start(t), !0
                        } catch (t) {
                            return !1
                        }
                    }, t.prototype.reconnect = function() {
                        this.closeStream(), this.openStream()
                    }, t.prototype.onClose = function(t, e, n) {
                        this.closeStream(), this.readyState = c.default.CLOSED, this.onclose && this.onclose({
                            code: t,
                            reason: e,
                            wasClean: n
                        })
                    }, t.prototype.onChunk = function(t) {
                        var e;
                        if (200 === t.status) switch (this.readyState === c.default.OPEN && this.onActivity(), t.data.slice(0, 1)) {
                            case "o":
                                e = JSON.parse(t.data.slice(1) || "{}"), this.onOpen(e);
                                break;
                            case "a":
                                e = JSON.parse(t.data.slice(1) || "[]");
                                for (var r = 0; r < e.length; r++) this.onEvent(e[r]);
                                break;
                            case "m":
                                e = JSON.parse(t.data.slice(1) || "null"), this.onEvent(e);
                                break;
                            case "h":
                                this.hooks.onHeartbeat(this);
                                break;
                            case "c":
                                e = JSON.parse(t.data.slice(1) || "[]"), this.onClose(e[0], e[1], !0)
                        }
                    }, t.prototype.onOpen = function(t) {
                        this.readyState === c.default.CONNECTING ? (t && t.hostname && (this.location.base = function(t, e) {
                            var n = /(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);
                            return n[1] + e + n[3]
                        }(this.location.base, t.hostname)), this.readyState = c.default.OPEN, this.onopen && this.onopen()) : this.onClose(1006, "Server lost session", !0)
                    }, t.prototype.onEvent = function(t) {
                        this.readyState === c.default.OPEN && this.onmessage && this.onmessage({
                            data: t
                        })
                    }, t.prototype.onActivity = function() {
                        this.onactivity && this.onactivity()
                    }, t.prototype.onError = function(t) {
                        this.onerror && this.onerror(t)
                    }, t.prototype.openStream = function() {
                        var t = this;
                        this.stream = f.default.createSocketRequest("POST", o(this.hooks.getReceiveURL(this.location, this.session))), this.stream.bind("chunk", function(e) {
                            t.onChunk(e)
                        }), this.stream.bind("finished", function(e) {
                            t.hooks.onFinished(t, e)
                        }), this.stream.bind("buffer_too_long", function() {
                            t.reconnect()
                        });
                        try {
                            this.stream.start()
                        } catch (e) {
                            h.default.defer(function() {
                                t.onError(e), t.onClose(1006, "Could not start streaming", !1)
                            })
                        }
                    }, t.prototype.closeStream = function() {
                        this.stream && (this.stream.unbind_all(), this.stream.close(), this.stream = null)
                    }, t
                }();
            e.__esModule = !0, e.default = p
        }, function(t, e) {
            "use strict";
            var n;
            ! function(t) {
                t[t.CONNECTING = 0] = "CONNECTING", t[t.OPEN = 1] = "OPEN", t[t.CLOSED = 3] = "CLOSED"
            }(n || (n = {})), e.__esModule = !0, e.default = n
        }, function(t, e) {
            "use strict";
            e.__esModule = !0, e.default = {
                getReceiveURL: function(t, e) {
                    return t.base + "/" + e + "/xhr_streaming" + t.queryString
                },
                onHeartbeat: function(t) {
                    t.sendRaw("[]")
                },
                sendHeartbeat: function(t) {
                    t.sendRaw("[]")
                },
                onFinished: function(t, e) {
                    t.onClose(1006, "Connection interrupted (" + e + ")", !1)
                }
            }
        }, function(t, e) {
            "use strict";
            e.__esModule = !0, e.default = {
                getReceiveURL: function(t, e) {
                    return t.base + "/" + e + "/xhr" + t.queryString
                },
                onHeartbeat: function() {},
                sendHeartbeat: function(t) {
                    t.sendRaw("[]")
                },
                onFinished: function(t, e) {
                    200 === e ? t.reconnect() : t.onClose(1006, "Connection interrupted (" + e + ")", !1)
                }
            }
        }, function(t, e, n) {
            "use strict";
            var r = n(2),
                i = {
                    getRequest: function(t) {
                        var n = new(r.default.getXHRAPI());
                        return n.onreadystatechange = n.onprogress = function() {
                            switch (n.readyState) {
                                case 3:
                                    n.responseText && 0 < n.responseText.length && t.onChunk(n.status, n.responseText);
                                    break;
                                case 4:
                                    n.responseText && 0 < n.responseText.length && t.onChunk(n.status, n.responseText), t.emit("finished", n.status), t.close()
                            }
                        }, n
                    },
                    abortRequest: function(t) {
                        t.onreadystatechange = null, t.abort()
                    }
                };
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(11),
                o = n(40),
                s = function() {
                    function t(t, e, n) {
                        this.key = t, this.session = e, this.events = [], this.options = n || {}, this.sent = 0, this.uniqueID = 0
                    }
                    return t.prototype.log = function(t, e) {
                        t <= this.options.level && (this.events.push(r.extend({}, e, {
                            timestamp: i.default.now()
                        })), this.options.limit && this.events.length > this.options.limit && this.events.shift())
                    }, t.prototype.error = function(t) {
                        this.log(o.default.ERROR, t)
                    }, t.prototype.info = function(t) {
                        this.log(o.default.INFO, t)
                    }, t.prototype.debug = function(t) {
                        this.log(o.default.DEBUG, t)
                    }, t.prototype.isEmpty = function() {
                        return 0 === this.events.length
                    }, t.prototype.send = function(t, e) {
                        var n = this,
                            i = r.extend({
                                session: this.session,
                                bundle: this.sent + 1,
                                key: this.key,
                                lib: "js",
                                version: this.options.version,
                                cluster: this.options.cluster,
                                features: this.options.features,
                                timeline: this.events
                            }, this.options.params);
                        return this.events = [], t(i, function(t, r) {
                            t || n.sent++, e && e(t, r)
                        }), !0
                    }, t.prototype.generateUniqueID = function() {
                        return this.uniqueID++, this.uniqueID
                    }, t
                }();
            e.__esModule = !0, e.default = s
        }, function(t, e) {
            "use strict";
            var n;
            ! function(t) {
                t[t.ERROR = 3] = "ERROR", t[t.INFO = 6] = "INFO", t[t.DEBUG = 7] = "DEBUG"
            }(n || (n = {})), e.__esModule = !0, e.default = n
        }, function(t, e, n) {
            "use strict";

            function r(t) {
                return function(e) {
                    return [t.apply(this, arguments), e]
                }
            }

            function i(t) {
                return "string" == typeof t && ":" === t.charAt(0)
            }

            function o(t, e) {
                return e[t.slice(1)]
            }

            function u(t, e) {
                if (i(t[0])) {
                    var n = o(t[0], e);
                    if (1 < t.length) {
                        if ("function" != typeof n) throw "Calling non-function " + t[0];
                        var r = [h.extend({}, e)].concat(h.map(t.slice(1), function(t) {
                            return c(t, h.extend({}, e))[0]
                        }));
                        return n.apply(this, r)
                    }
                    return [n, e]
                }
                return function s(t, e) {
                    if (0 === t.length) return [
                        [], e
                    ];
                    var n = c(t[0], e),
                        r = s(t.slice(1), n[1]);
                    return [
                        [n[0]].concat(r[0]), r[1]
                    ]
                }(t, e)
            }

            function c(t, e) {
                return "string" == typeof t ? function(t, e) {
                    if (!i(t)) return [t, e];
                    var n = o(t, e);
                    if (void 0 === n) throw "Undefined symbol " + t;
                    return [n, e]
                }(t, e) : "object" == _typeof(t) && t instanceof Array && 0 < t.length ? u(t, e) : [t, e]
            }
            var h = n(9),
                f = n(11),
                l = n(42),
                p = n(31),
                d = n(64),
                y = n(65),
                g = n(66),
                v = n(67),
                b = n(68),
                m = n(69),
                w = n(70),
                S = n(2).default.Transports;
            e.build = function(t, e) {
                return c(t, h.extend({}, T, e))[1].strategy
            };
            var k = {
                    isSupported: function() {
                        return !1
                    },
                    connect: function(t, e) {
                        var n = f.default.defer(function() {
                            e(new p.UnsupportedStrategy)
                        });
                        return {
                            abort: function() {
                                n.ensureAborted()
                            },
                            forceMinPriority: function() {}
                        }
                    }
                },
                T = {
                    extend: function(t, e, n) {
                        return [h.extend({}, e, n), t]
                    },
                    def: function(t, e, n) {
                        if (void 0 !== t[e]) throw "Redefining symbol " + e;
                        return t[e] = n, [void 0, t]
                    },
                    def_transport: function(t, e, n, r, i, o) {
                        var a, s = S[n];
                        if (!s) throw new p.UnsupportedTransport(n);
                        a = !(t.enabledTransports && -1 === h.arrayIndexOf(t.enabledTransports, e) || t.disabledTransports && -1 !== h.arrayIndexOf(t.disabledTransports, e)) ? new d.default(e, r, o ? o.getAssistant(s) : s, h.extend({
                            key: t.key,
                            useTLS: t.useTLS,
                            timeline: t.timeline,
                            ignoreNullOrigin: t.ignoreNullOrigin
                        }, i)) : k;
                        var c = t.def(t, e, a)[1];
                        return c.Transports = t.Transports || {}, c.Transports[e] = a, [void 0, c]
                    },
                    transport_manager: r(function(t, e) {
                        return new l.default(e)
                    }),
                    sequential: r(function(t, e) {
                        var n = Array.prototype.slice.call(arguments, 2);
                        return new y.default(n, e)
                    }),
                    cached: r(function(t, e, n) {
                        return new v.default(n, t.Transports, {
                            ttl: e,
                            timeline: t.timeline,
                            useTLS: t.useTLS
                        })
                    }),
                    first_connected: r(function(t, e) {
                        return new w.default(e)
                    }),
                    best_connected_ever: r(function() {
                        var t = Array.prototype.slice.call(arguments, 1);
                        return new g.default(t)
                    }),
                    delayed: r(function(t, e, n) {
                        return new b.default(n, {
                            delay: e
                        })
                    }),
                    if: r(function(t, e, n, r) {
                        return new m.default(e, n, r)
                    }),
                    is_supported: r(function(t, e) {
                        return function() {
                            return e.isSupported()
                        }
                    })
                }
        }, function(t, e, n) {
            "use strict";
            var r = n(43),
                i = function() {
                    function t(t) {
                        this.options = t || {}, this.livesLeft = this.options.lives || 1 / 0
                    }
                    return t.prototype.getAssistant = function(t) {
                        return r.default.createAssistantToTheTransportManager(this, t, {
                            minPingDelay: this.options.minPingDelay,
                            maxPingDelay: this.options.maxPingDelay
                        })
                    }, t.prototype.isAlive = function() {
                        return 0 < this.livesLeft
                    }, t.prototype.reportDeath = function() {
                        this.livesLeft -= 1
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = n(44),
                i = n(45),
                o = n(48),
                s = n(49),
                a = n(50),
                u = n(51),
                c = n(54),
                h = n(52),
                f = n(62),
                l = n(63),
                p = {
                    createChannels: function() {
                        return new l.default
                    },
                    createConnectionManager: function(t, e) {
                        return new f.default(t, e)
                    },
                    createChannel: function(t, e) {
                        return new h.default(t, e)
                    },
                    createPrivateChannel: function(t, e) {
                        return new u.default(t, e)
                    },
                    createPresenceChannel: function(t, e) {
                        return new a.default(t, e)
                    },
                    createEncryptedChannel: function(t, e) {
                        return new c.default(t, e)
                    },
                    createTimelineSender: function(t, e) {
                        return new s.default(t, e)
                    },
                    createAuthorizer: function(t, e) {
                        return e.authorizer ? e.authorizer(t, e) : new o.default(t, e)
                    },
                    createHandshake: function(t, e) {
                        return new i.default(t, e)
                    },
                    createAssistantToTheTransportManager: function(t, e, n) {
                        return new r.default(t, e, n)
                    }
                };
            e.__esModule = !0, e.default = p
        }, function(t, e, n) {
            "use strict";
            var r = n(11),
                i = n(9),
                o = function() {
                    function t(t, e, n) {
                        this.manager = t, this.transport = e, this.minPingDelay = n.minPingDelay, this.maxPingDelay = n.maxPingDelay, this.pingDelay = void 0
                    }
                    return t.prototype.createConnection = function(t, e, n, o) {
                        var s = this;
                        o = i.extend({}, o, {
                            activityTimeout: this.pingDelay
                        });
                        var a = this.transport.createConnection(t, e, n, o),
                            u = null,
                            h = function h(t) {
                                if (a.unbind("closed", h), 1002 === t.code || 1003 === t.code) s.manager.reportDeath();
                                else if (!t.wasClean && u) {
                                    var e = r.default.now() - u;
                                    e < 2 * s.maxPingDelay && (s.manager.reportDeath(), s.pingDelay = Math.max(e / 2, s.minPingDelay))
                                }
                            };
                        return a.bind("open", function c() {
                            a.unbind("open", c), a.bind("closed", h), u = r.default.now()
                        }), a
                    }, t.prototype.isSupported = function(t) {
                        return this.manager.isAlive() && this.transport.isSupported(t)
                    }, t
                }();
            e.__esModule = !0, e.default = o
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(46),
                o = n(47),
                s = function() {
                    function t(t, e) {
                        this.transport = t, this.callback = e, this.bindListeners()
                    }
                    return t.prototype.close = function() {
                        this.unbindListeners(), this.transport.close()
                    }, t.prototype.bindListeners = function() {
                        var t = this;
                        this.onMessage = function(e) {
                            var n;
                            t.unbindListeners();
                            try {
                                n = i.processHandshake(e)
                            } catch (e) {
                                return t.finish("error", {
                                    error: e
                                }), void t.transport.close()
                            }
                            "connected" === n.action ? t.finish("connected", {
                                connection: new o.default(n.id, t.transport),
                                activityTimeout: n.activityTimeout
                            }) : (t.finish(n.action, {
                                error: n.error
                            }), t.transport.close())
                        }, this.onClosed = function(e) {
                            t.unbindListeners();
                            var n = i.getCloseAction(e) || "backoff",
                                r = i.getCloseError(e);
                            t.finish(n, {
                                error: r
                            })
                        }, this.transport.bind("message", this.onMessage), this.transport.bind("closed", this.onClosed)
                    }, t.prototype.unbindListeners = function() {
                        this.transport.unbind("message", this.onMessage), this.transport.unbind("closed", this.onClosed)
                    }, t.prototype.finish = function(t, e) {
                        this.callback(r.extend({
                            transport: this.transport,
                            action: t
                        }, e))
                    }, t
                }();
            e.__esModule = !0, e.default = s
        }, function(t, e) {
            "use strict";
            e.decodeMessage = function(t) {
                try {
                    var e = JSON.parse(t.data);
                    if ("string" == typeof e.data) try {
                        e.data = JSON.parse(e.data)
                    } catch (t) {
                        if (!(t instanceof SyntaxError)) throw t
                    }
                    return e
                } catch (e) {
                    throw {
                        type: "MessageParseError",
                        error: e,
                        data: t.data
                    }
                }
            }, e.encodeMessage = function(t) {
                return JSON.stringify(t)
            }, e.processHandshake = function(t) {
                if ("pusher:connection_established" === (t = e.decodeMessage(t)).event) {
                    if (!t.data.activity_timeout) throw "No activity timeout specified in handshake";
                    return {
                        action: "connected",
                        id: t.data.socket_id,
                        activityTimeout: 1e3 * t.data.activity_timeout
                    }
                }
                if ("pusher:error" === t.event) return {
                    action: this.getCloseAction(t.data),
                    error: this.getCloseError(t.data)
                };
                throw "Invalid handshake"
            }, e.getCloseAction = function(t) {
                return t.code < 4e3 ? 1002 <= t.code && t.code <= 1004 ? "backoff" : null : 4e3 === t.code ? "tls_only" : t.code < 4100 ? "refused" : t.code < 4200 ? "backoff" : t.code < 4300 ? "retry" : "refused"
            }, e.getCloseError = function(t) {
                return 1e3 !== t.code && 1001 !== t.code ? {
                    type: "PusherError",
                    data: {
                        code: t.code,
                        message: t.reason || t.message
                    }
                } : null
            }
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(9),
                o = n(24),
                s = n(46),
                a = n(8),
                u = function(t) {
                    function e(e, n) {
                        t.call(this), this.id = e, this.transport = n, this.activityTimeout = n.activityTimeout, this.bindListeners()
                    }
                    return r(e, t), e.prototype.handlesActivityChecks = function() {
                        return this.transport.handlesActivityChecks()
                    }, e.prototype.send = function(t) {
                        return this.transport.send(t)
                    }, e.prototype.send_event = function(t, e, n) {
                        var r = {
                            event: t,
                            data: e
                        };
                        return n && (r.channel = n), a.default.debug("Event sent", r), this.send(s.encodeMessage(r))
                    }, e.prototype.ping = function() {
                        this.transport.supportsPing() ? this.transport.ping() : this.send_event("pusher:ping", {})
                    }, e.prototype.close = function() {
                        this.transport.close()
                    }, e.prototype.bindListeners = function() {
                        var t = this,
                            e = {
                                message: function(e) {
                                    var n;
                                    try {
                                        n = s.decodeMessage(e)
                                    } catch (n) {
                                        t.emit("error", {
                                            type: "MessageParseError",
                                            error: n,
                                            data: e.data
                                        })
                                    }
                                    if (void 0 !== n) {
                                        switch (a.default.debug("Event recd", n), n.event) {
                                            case "pusher:error":
                                                t.emit("error", {
                                                    type: "PusherError",
                                                    data: n.data
                                                });
                                                break;
                                            case "pusher:ping":
                                                t.emit("ping");
                                                break;
                                            case "pusher:pong":
                                                t.emit("pong")
                                        }
                                        t.emit("message", n)
                                    }
                                },
                                activity: function() {
                                    t.emit("activity")
                                },
                                error: function(e) {
                                    t.emit("error", {
                                        type: "WebSocketError",
                                        error: e
                                    })
                                },
                                closed: function(e) {
                                    n(), e && e.code && t.handleCloseEvent(e), t.transport = null, t.emit("closed")
                                }
                            },
                            n = function() {
                                i.objectApply(e, function(e, n) {
                                    t.transport.unbind(n, e)
                                })
                            };
                        i.objectApply(e, function(e, n) {
                            t.transport.bind(n, e)
                        })
                    }, e.prototype.handleCloseEvent = function(t) {
                        var e = s.getCloseAction(t),
                            n = s.getCloseError(t);
                        n && this.emit("error", n), e && this.emit(e, {
                            action: e,
                            error: n
                        })
                    }, e
                }(o.default);
            e.__esModule = !0, e.default = u
        }, function(t, e, n) {
            "use strict";
            var r = n(2),
                i = function() {
                    function t(t, e) {
                        this.channel = t;
                        var n = e.authTransport;
                        if (void 0 === r.default.getAuthorizers()[n]) throw "'" + n + "' is not a recognized auth transport";
                        this.type = n, this.options = e, this.authOptions = (e || {}).auth || {}
                    }
                    return t.prototype.composeQuery = function(t) {
                        var e = "socket_id=" + encodeURIComponent(t) + "&channel_name=" + encodeURIComponent(this.channel.name);
                        for (var n in this.authOptions.params) e += "&" + encodeURIComponent(n) + "=" + encodeURIComponent(this.authOptions.params[n]);
                        return e
                    }, t.prototype.authorize = function(e, n) {
                        return (t.authorizers = t.authorizers || r.default.getAuthorizers())[this.type].call(this, r.default, e, n)
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = n(2),
                i = function() {
                    function t(t, e) {
                        this.timeline = t, this.options = e || {}
                    }
                    return t.prototype.send = function(t, e) {
                        this.timeline.isEmpty() || this.timeline.send(r.default.TimelineTransport.getAgent(this, t), e)
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(51),
                o = n(8),
                s = n(53),
                a = n(14),
                u = function(t) {
                    function e(e, n) {
                        t.call(this, e, n), this.members = new s.default
                    }
                    return r(e, t), e.prototype.authorize = function(e, n) {
                        var r = this;
                        t.prototype.authorize.call(this, e, function(t, e) {
                            if (!t) {
                                if (void 0 === e.channel_data) {
                                    var i = a.default.buildLogSuffix("authenticationEndpoint");
                                    return o.default.warn("Invalid auth response for channel '" + r.name + "',expected 'channel_data' field. " + i), void n("Invalid auth response")
                                }
                                var s = JSON.parse(e.channel_data);
                                r.members.setMyID(s.user_id)
                            }
                            n(t, e)
                        })
                    }, e.prototype.handleEvent = function(t, e) {
                        switch (t) {
                            case "pusher_internal:subscription_succeeded":
                                this.subscriptionPending = !1, this.subscribed = !0, this.subscriptionCancelled ? this.pusher.unsubscribe(this.name) : (this.members.onSubscription(e), this.emit("pusher:subscription_succeeded", this.members));
                                break;
                            case "pusher_internal:member_added":
                                var n = this.members.addMember(e);
                                this.emit("pusher:member_added", n);
                                break;
                            case "pusher_internal:member_removed":
                                var r = this.members.removeMember(e);
                                r && this.emit("pusher:member_removed", r);
                                break;
                            default:
                                i.default.prototype.handleEvent.call(this, t, e)
                        }
                    }, e.prototype.disconnect = function() {
                        this.members.reset(), t.prototype.disconnect.call(this)
                    }, e
                }(i.default);
            e.__esModule = !0, e.default = u
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(43),
                s = function(t) {
                    function e() {
                        t.apply(this, arguments)
                    }
                    return r(e, t), e.prototype.authorize = function(t, e) {
                        return i.default.createAuthorizer(this, this.pusher.config).authorize(t, e)
                    }, e
                }(n(52).default);
            e.__esModule = !0, e.default = s
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(24),
                o = n(31),
                s = n(8),
                a = function(t) {
                    function e(e, n) {
                        t.call(this, function(t, n) {
                            s.default.debug("No callbacks on " + e + " for " + t)
                        }), this.name = e, this.pusher = n, this.subscribed = !1, this.subscriptionPending = !1, this.subscriptionCancelled = !1
                    }
                    return r(e, t), e.prototype.authorize = function(t, e) {
                        return e(!1, {})
                    }, e.prototype.trigger = function(t, e) {
                        if (0 !== t.indexOf("client-")) throw new o.BadEventName("Event '" + t + "' does not start with 'client-'");
                        return this.pusher.send_event(t, e, this.name)
                    }, e.prototype.disconnect = function() {
                        this.subscribed = !1, this.subscriptionPending = !1
                    }, e.prototype.handleEvent = function(t, e) {
                        0 === t.indexOf("pusher_internal:") ? "pusher_internal:subscription_succeeded" === t && (this.subscriptionPending = !1, this.subscribed = !0, this.subscriptionCancelled ? this.pusher.unsubscribe(this.name) : this.emit("pusher:subscription_succeeded", e)) : this.emit(t, e)
                    }, e.prototype.subscribe = function() {
                        var t = this;
                        this.subscribed || (this.subscriptionPending = !0, this.subscriptionCancelled = !1, this.authorize(this.pusher.connection.socket_id, function(e, n) {
                            e ? t.handleEvent("pusher:subscription_error", n) : t.pusher.send_event("pusher:subscribe", {
                                auth: n.auth,
                                channel_data: n.channel_data,
                                channel: t.name
                            })
                        }))
                    }, e.prototype.unsubscribe = function() {
                        this.subscribed = !1, this.pusher.send_event("pusher:unsubscribe", {
                            channel: this.name
                        })
                    }, e.prototype.cancelSubscription = function() {
                        this.subscriptionCancelled = !0
                    }, e.prototype.reinstateSubscription = function() {
                        this.subscriptionCancelled = !1
                    }, e
                }(i.default);
            e.__esModule = !0, e.default = a
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = function() {
                    function t() {
                        this.reset()
                    }
                    return t.prototype.get = function(t) {
                        return Object.prototype.hasOwnProperty.call(this.members, t) ? {
                            id: t,
                            info: this.members[t]
                        } : null
                    }, t.prototype.each = function(t) {
                        var e = this;
                        r.objectApply(this.members, function(n, r) {
                            t(e.get(r))
                        })
                    }, t.prototype.setMyID = function(t) {
                        this.myID = t
                    }, t.prototype.onSubscription = function(t) {
                        this.members = t.presence.hash, this.count = t.presence.count, this.me = this.get(this.myID)
                    }, t.prototype.addMember = function(t) {
                        return null === this.get(t.user_id) && this.count++, this.members[t.user_id] = t.user_info, this.get(t.user_id)
                    }, t.prototype.removeMember = function(t) {
                        var e = this.get(t.user_id);
                        return e && (delete this.members[t.user_id], this.count--), e
                    }, t.prototype.reset = function() {
                        this.members = {}, this.count = 0, this.myID = null, this.me = null
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(51),
                o = n(31),
                s = n(8),
                a = n(55),
                u = n(57),
                c = function(t) {
                    function e() {
                        t.apply(this, arguments), this.key = null
                    }
                    return r(e, t), e.prototype.authorize = function(e, n) {
                        var r = this;
                        t.prototype.authorize.call(this, e, function(t, e) {
                            if (t) n(!0, e);
                            else {
                                var i = e.shared_secret;
                                if (!i) {
                                    var o = "No shared_secret key in auth payload for encrypted channel: " + r.name;
                                    return n(!0, o), void s.default.warn("Error: " + o)
                                }
                                r.key = u.decodeBase64(i), delete e.shared_secret, n(!1, e)
                            }
                        })
                    }, e.prototype.trigger = function(t, e) {
                        throw new o.UnsupportedFeature("Client events are not currently supported for encrypted channels")
                    }, e.prototype.handleEvent = function(e, n) {
                        return 0 === e.indexOf("pusher_internal:") || 0 === e.indexOf("pusher:") ? void t.prototype.handleEvent.call(this, e, n) : void this.handleEncryptedEvent(e, n)
                    }, e.prototype.handleEncryptedEvent = function(t, e) {
                        var n = this;
                        if (this.key)
                            if (e.ciphertext && e.nonce) {
                                var r = u.decodeBase64(e.ciphertext);
                                if (r.length < a.secretbox.overheadLength) s.default.warn("Expected encrypted event ciphertext length to be " + a.secretbox.overheadLength + ", got: " + r.length);
                                else {
                                    var i = u.decodeBase64(e.nonce);
                                    if (!(i.length < a.secretbox.nonceLength)) {
                                        var o = a.secretbox.open(r, i, this.key);
                                        return null === o ? (s.default.debug("Failed to decrypted an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."), void this.authorize(this.pusher.connection.socket_id, function(e, c) {
                                            return e ? void s.default.warn("Failed to make a request to the authEndpoint: " + c + ". Unable to fetch new key, so dropping encrypted event") : null === (o = a.secretbox.open(r, i, n.key)) ? void s.default.warn("Failed to decrypt event with new key. Dropping encrypted event") : void n.emitJSON(t, u.encodeUTF8(o))
                                        })) : void this.emitJSON(t, u.encodeUTF8(o))
                                    }
                                    s.default.warn("Expected encrypted event nonce length to be " + a.secretbox.nonceLength + ", got: " + i.length)
                                }
                            } else s.default.warn("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: " + e);
                        else s.default.debug("Received encrypted event before key has been retrieved from the authEndpoint")
                    }, e.prototype.emitJSON = function(t, e) {
                        try {
                            this.emit(t, JSON.parse(e))
                        } catch (n) {
                            this.emit(t, e)
                        }
                        return this
                    }, e
                }(i.default);
            e.__esModule = !0, e.default = c
        }, function(t, e, n) {
            ! function(t) {
                "use strict";

                function e(t, e, n, r) {
                    t[e] = n >> 24 & 255, t[e + 1] = n >> 16 & 255, t[e + 2] = n >> 8 & 255, t[e + 3] = 255 & n, t[e + 4] = r >> 24 & 255, t[e + 5] = r >> 16 & 255, t[e + 6] = r >> 8 & 255, t[e + 7] = 255 & r
                }

                function r(t, e, n, r, i) {
                    var o, s = 0;
                    for (o = 0; o < i; o++) s |= t[e + o] ^ n[r + o];
                    return (1 & s - 1 >>> 8) - 1
                }

                function i(t, e, n, i) {
                    return r(t, e, n, i, 16)
                }

                function o(t, e, n, i) {
                    return r(t, e, n, i, 32)
                }

                function u(t, e, n, r) {
                    ! function(t, e, n, r) {
                        for (var i, o = 255 & r[0] | (255 & r[1]) << 8 | (255 & r[2]) << 16 | (255 & r[3]) << 24, s = 255 & n[0] | (255 & n[1]) << 8 | (255 & n[2]) << 16 | (255 & n[3]) << 24, a = 255 & n[4] | (255 & n[5]) << 8 | (255 & n[6]) << 16 | (255 & n[7]) << 24, u = 255 & n[8] | (255 & n[9]) << 8 | (255 & n[10]) << 16 | (255 & n[11]) << 24, c = 255 & n[12] | (255 & n[13]) << 8 | (255 & n[14]) << 16 | (255 & n[15]) << 24, h = 255 & r[4] | (255 & r[5]) << 8 | (255 & r[6]) << 16 | (255 & r[7]) << 24, f = 255 & e[0] | (255 & e[1]) << 8 | (255 & e[2]) << 16 | (255 & e[3]) << 24, l = 255 & e[4] | (255 & e[5]) << 8 | (255 & e[6]) << 16 | (255 & e[7]) << 24, p = 255 & e[8] | (255 & e[9]) << 8 | (255 & e[10]) << 16 | (255 & e[11]) << 24, d = 255 & e[12] | (255 & e[13]) << 8 | (255 & e[14]) << 16 | (255 & e[15]) << 24, y = 255 & r[8] | (255 & r[9]) << 8 | (255 & r[10]) << 16 | (255 & r[11]) << 24, g = 255 & n[16] | (255 & n[17]) << 8 | (255 & n[18]) << 16 | (255 & n[19]) << 24, v = 255 & n[20] | (255 & n[21]) << 8 | (255 & n[22]) << 16 | (255 & n[23]) << 24, b = 255 & n[24] | (255 & n[25]) << 8 | (255 & n[26]) << 16 | (255 & n[27]) << 24, m = 255 & n[28] | (255 & n[29]) << 8 | (255 & n[30]) << 16 | (255 & n[31]) << 24, w = 255 & r[12] | (255 & r[13]) << 8 | (255 & r[14]) << 16 | (255 & r[15]) << 24, _ = o, S = s, k = a, T = u, A = c, E = h, x = f, C = l, P = p, R = d, O = y, M = g, U = v, L = b, B = m, I = w, N = 0; N < 20; N += 2) _ ^= (i = (U ^= (i = (P ^= (i = (A ^= (i = _ + U | 0) << 7 | i >>> 25) + _ | 0) << 9 | i >>> 23) + A | 0) << 13 | i >>> 19) + P | 0) << 18 | i >>> 14, E ^= (i = (S ^= (i = (L ^= (i = (R ^= (i = E + S | 0) << 7 | i >>> 25) + E | 0) << 9 | i >>> 23) + R | 0) << 13 | i >>> 19) + L | 0) << 18 | i >>> 14, O ^= (i = (x ^= (i = (k ^= (i = (B ^= (i = O + x | 0) << 7 | i >>> 25) + O | 0) << 9 | i >>> 23) + B | 0) << 13 | i >>> 19) + k | 0) << 18 | i >>> 14, I ^= (i = (M ^= (i = (C ^= (i = (T ^= (i = I + M | 0) << 7 | i >>> 25) + I | 0) << 9 | i >>> 23) + T | 0) << 13 | i >>> 19) + C | 0) << 18 | i >>> 14, _ ^= (i = (T ^= (i = (k ^= (i = (S ^= (i = _ + T | 0) << 7 | i >>> 25) + _ | 0) << 9 | i >>> 23) + S | 0) << 13 | i >>> 19) + k | 0) << 18 | i >>> 14, E ^= (i = (A ^= (i = (C ^= (i = (x ^= (i = E + A | 0) << 7 | i >>> 25) + E | 0) << 9 | i >>> 23) + x | 0) << 13 | i >>> 19) + C | 0) << 18 | i >>> 14, O ^= (i = (R ^= (i = (P ^= (i = (M ^= (i = O + R | 0) << 7 | i >>> 25) + O | 0) << 9 | i >>> 23) + M | 0) << 13 | i >>> 19) + P | 0) << 18 | i >>> 14, I ^= (i = (B ^= (i = (L ^= (i = (U ^= (i = I + B | 0) << 7 | i >>> 25) + I | 0) << 9 | i >>> 23) + U | 0) << 13 | i >>> 19) + L | 0) << 18 | i >>> 14;
                        _ = _ + o | 0, S = S + s | 0, k = k + a | 0, T = T + u | 0, A = A + c | 0, E = E + h | 0, x = x + f | 0, C = C + l | 0, P = P + p | 0, R = R + d | 0, O = O + y | 0, M = M + g | 0, U = U + v | 0, L = L + b | 0, B = B + m | 0, I = I + w | 0, t[0] = _ >>> 0 & 255, t[1] = _ >>> 8 & 255, t[2] = _ >>> 16 & 255, t[3] = _ >>> 24 & 255, t[4] = S >>> 0 & 255, t[5] = S >>> 8 & 255, t[6] = S >>> 16 & 255, t[7] = S >>> 24 & 255, t[8] = k >>> 0 & 255, t[9] = k >>> 8 & 255, t[10] = k >>> 16 & 255, t[11] = k >>> 24 & 255, t[12] = T >>> 0 & 255, t[13] = T >>> 8 & 255, t[14] = T >>> 16 & 255, t[15] = T >>> 24 & 255, t[16] = A >>> 0 & 255, t[17] = A >>> 8 & 255, t[18] = A >>> 16 & 255, t[19] = A >>> 24 & 255, t[20] = E >>> 0 & 255, t[21] = E >>> 8 & 255, t[22] = E >>> 16 & 255, t[23] = E >>> 24 & 255, t[24] = x >>> 0 & 255, t[25] = x >>> 8 & 255, t[26] = x >>> 16 & 255, t[27] = x >>> 24 & 255, t[28] = C >>> 0 & 255, t[29] = C >>> 8 & 255, t[30] = C >>> 16 & 255, t[31] = C >>> 24 & 255, t[32] = P >>> 0 & 255, t[33] = P >>> 8 & 255, t[34] = P >>> 16 & 255, t[35] = P >>> 24 & 255, t[36] = R >>> 0 & 255, t[37] = R >>> 8 & 255, t[38] = R >>> 16 & 255, t[39] = R >>> 24 & 255, t[40] = O >>> 0 & 255, t[41] = O >>> 8 & 255, t[42] = O >>> 16 & 255, t[43] = O >>> 24 & 255, t[44] = M >>> 0 & 255, t[45] = M >>> 8 & 255, t[46] = M >>> 16 & 255, t[47] = M >>> 24 & 255, t[48] = U >>> 0 & 255, t[49] = U >>> 8 & 255, t[50] = U >>> 16 & 255, t[51] = U >>> 24 & 255, t[52] = L >>> 0 & 255, t[53] = L >>> 8 & 255, t[54] = L >>> 16 & 255, t[55] = L >>> 24 & 255, t[56] = B >>> 0 & 255, t[57] = B >>> 8 & 255, t[58] = B >>> 16 & 255, t[59] = B >>> 24 & 255, t[60] = I >>> 0 & 255, t[61] = I >>> 8 & 255, t[62] = I >>> 16 & 255, t[63] = I >>> 24 & 255
                    }(t, e, n, r)
                }

                function c(t, e, n, r) {
                    ! function(t, e, n, r) {
                        for (var i, _ = 255 & r[0] | (255 & r[1]) << 8 | (255 & r[2]) << 16 | (255 & r[3]) << 24, S = 255 & n[0] | (255 & n[1]) << 8 | (255 & n[2]) << 16 | (255 & n[3]) << 24, k = 255 & n[4] | (255 & n[5]) << 8 | (255 & n[6]) << 16 | (255 & n[7]) << 24, T = 255 & n[8] | (255 & n[9]) << 8 | (255 & n[10]) << 16 | (255 & n[11]) << 24, A = 255 & n[12] | (255 & n[13]) << 8 | (255 & n[14]) << 16 | (255 & n[15]) << 24, E = 255 & r[4] | (255 & r[5]) << 8 | (255 & r[6]) << 16 | (255 & r[7]) << 24, x = 255 & e[0] | (255 & e[1]) << 8 | (255 & e[2]) << 16 | (255 & e[3]) << 24, C = 255 & e[4] | (255 & e[5]) << 8 | (255 & e[6]) << 16 | (255 & e[7]) << 24, P = 255 & e[8] | (255 & e[9]) << 8 | (255 & e[10]) << 16 | (255 & e[11]) << 24, R = 255 & e[12] | (255 & e[13]) << 8 | (255 & e[14]) << 16 | (255 & e[15]) << 24, O = 255 & r[8] | (255 & r[9]) << 8 | (255 & r[10]) << 16 | (255 & r[11]) << 24, M = 255 & n[16] | (255 & n[17]) << 8 | (255 & n[18]) << 16 | (255 & n[19]) << 24, U = 255 & n[20] | (255 & n[21]) << 8 | (255 & n[22]) << 16 | (255 & n[23]) << 24, L = 255 & n[24] | (255 & n[25]) << 8 | (255 & n[26]) << 16 | (255 & n[27]) << 24, B = 255 & n[28] | (255 & n[29]) << 8 | (255 & n[30]) << 16 | (255 & n[31]) << 24, I = 255 & r[12] | (255 & r[13]) << 8 | (255 & r[14]) << 16 | (255 & r[15]) << 24, N = 0; N < 20; N += 2) _ ^= (i = (U ^= (i = (P ^= (i = (A ^= (i = _ + U | 0) << 7 | i >>> 25) + _ | 0) << 9 | i >>> 23) + A | 0) << 13 | i >>> 19) + P | 0) << 18 | i >>> 14, E ^= (i = (S ^= (i = (L ^= (i = (R ^= (i = E + S | 0) << 7 | i >>> 25) + E | 0) << 9 | i >>> 23) + R | 0) << 13 | i >>> 19) + L | 0) << 18 | i >>> 14, O ^= (i = (x ^= (i = (k ^= (i = (B ^= (i = O + x | 0) << 7 | i >>> 25) + O | 0) << 9 | i >>> 23) + B | 0) << 13 | i >>> 19) + k | 0) << 18 | i >>> 14, I ^= (i = (M ^= (i = (C ^= (i = (T ^= (i = I + M | 0) << 7 | i >>> 25) + I | 0) << 9 | i >>> 23) + T | 0) << 13 | i >>> 19) + C | 0) << 18 | i >>> 14, _ ^= (i = (T ^= (i = (k ^= (i = (S ^= (i = _ + T | 0) << 7 | i >>> 25) + _ | 0) << 9 | i >>> 23) + S | 0) << 13 | i >>> 19) + k | 0) << 18 | i >>> 14, E ^= (i = (A ^= (i = (C ^= (i = (x ^= (i = E + A | 0) << 7 | i >>> 25) + E | 0) << 9 | i >>> 23) + x | 0) << 13 | i >>> 19) + C | 0) << 18 | i >>> 14, O ^= (i = (R ^= (i = (P ^= (i = (M ^= (i = O + R | 0) << 7 | i >>> 25) + O | 0) << 9 | i >>> 23) + M | 0) << 13 | i >>> 19) + P | 0) << 18 | i >>> 14, I ^= (i = (B ^= (i = (L ^= (i = (U ^= (i = I + B | 0) << 7 | i >>> 25) + I | 0) << 9 | i >>> 23) + U | 0) << 13 | i >>> 19) + L | 0) << 18 | i >>> 14;
                        t[0] = _ >>> 0 & 255, t[1] = _ >>> 8 & 255, t[2] = _ >>> 16 & 255, t[3] = _ >>> 24 & 255, t[4] = E >>> 0 & 255, t[5] = E >>> 8 & 255, t[6] = E >>> 16 & 255, t[7] = E >>> 24 & 255, t[8] = O >>> 0 & 255, t[9] = O >>> 8 & 255, t[10] = O >>> 16 & 255, t[11] = O >>> 24 & 255, t[12] = I >>> 0 & 255, t[13] = I >>> 8 & 255, t[14] = I >>> 16 & 255, t[15] = I >>> 24 & 255, t[16] = x >>> 0 & 255, t[17] = x >>> 8 & 255, t[18] = x >>> 16 & 255, t[19] = x >>> 24 & 255, t[20] = C >>> 0 & 255, t[21] = C >>> 8 & 255, t[22] = C >>> 16 & 255, t[23] = C >>> 24 & 255, t[24] = P >>> 0 & 255, t[25] = P >>> 8 & 255, t[26] = P >>> 16 & 255, t[27] = P >>> 24 & 255, t[28] = R >>> 0 & 255, t[29] = R >>> 8 & 255, t[30] = R >>> 16 & 255, t[31] = R >>> 24 & 255
                    }(t, e, n, r)
                }

                function h(t, e, n, r, i, o, s) {
                    var a, c, h = new Uint8Array(16),
                        f = new Uint8Array(64);
                    for (c = 0; c < 16; c++) h[c] = 0;
                    for (c = 0; c < 8; c++) h[c] = o[c];
                    for (; 64 <= i;) {
                        for (u(f, h, s, lt), c = 0; c < 64; c++) t[e + c] = n[r + c] ^ f[c];
                        for (a = 1, c = 8; c < 16; c++) a = a + (255 & h[c]) | 0, h[c] = 255 & a, a >>>= 8;
                        i -= 64, e += 64, r += 64
                    }
                    if (0 < i)
                        for (u(f, h, s, lt), c = 0; c < i; c++) t[e + c] = n[r + c] ^ f[c];
                    return 0
                }

                function f(t, e, n, r, i) {
                    var o, s, a = new Uint8Array(16),
                        c = new Uint8Array(64);
                    for (s = 0; s < 16; s++) a[s] = 0;
                    for (s = 0; s < 8; s++) a[s] = r[s];
                    for (; 64 <= n;) {
                        for (u(c, a, i, lt), s = 0; s < 64; s++) t[e + s] = c[s];
                        for (o = 1, s = 8; s < 16; s++) o = o + (255 & a[s]) | 0, a[s] = 255 & o, o >>>= 8;
                        n -= 64, e += 64
                    }
                    if (0 < n)
                        for (u(c, a, i, lt), s = 0; s < n; s++) t[e + s] = c[s];
                    return 0
                }

                function l(t, e, n, r, i) {
                    var o = new Uint8Array(32);
                    c(o, r, i, lt);
                    for (var s = new Uint8Array(8), a = 0; a < 8; a++) s[a] = r[a + 16];
                    return f(t, e, n, s, o)
                }

                function p(t, e, n, r, i, o, s) {
                    var a = new Uint8Array(32);
                    c(a, o, s, lt);
                    for (var u = new Uint8Array(8), f = 0; f < 8; f++) u[f] = o[f + 16];
                    return h(t, e, n, r, i, u, a)
                }

                function d(t, e, n, r, i, o) {
                    var s = new pt(o);
                    return s.update(n, r, i), s.finish(t, e), 0
                }

                function y(t, e, n, r, o, s) {
                    var a = new Uint8Array(16);
                    return d(a, 0, n, r, o, s), i(t, e, a, 0)
                }

                function g(t, e, n, r, i) {
                    var o;
                    if (n < 32) return -1;
                    for (p(t, 0, e, 0, n, r, i), d(t, 16, t, 32, n - 32, t), o = 0; o < 16; o++) t[o] = 0;
                    return 0
                }

                function v(t, e, n, r, i) {
                    var o, s = new Uint8Array(32);
                    if (n < 32) return -1;
                    if (l(s, 0, 32, r, i), 0 !== y(e, 16, e, 32, n - 32, s)) return -1;
                    for (p(t, 0, e, 0, n, r, i), o = 0; o < 32; o++) t[o] = 0;
                    return 0
                }

                function b(t, e) {
                    var n;
                    for (n = 0; n < 16; n++) t[n] = 0 | e[n]
                }

                function m(t) {
                    var e, n, r = 1;
                    for (e = 0; e < 16; e++) n = t[e] + r + 65535, r = Math.floor(n / 65536), t[e] = n - 65536 * r;
                    t[0] += r - 1 + 37 * (r - 1)
                }

                function w(t, e, n) {
                    for (var r, i = ~(n - 1), o = 0; o < 16; o++) r = i & (t[o] ^ e[o]), t[o] ^= r, e[o] ^= r
                }

                function _(t, e) {
                    var n, r, i, o = tt(),
                        s = tt();
                    for (n = 0; n < 16; n++) s[n] = e[n];
                    for (m(s), m(s), m(s), r = 0; r < 2; r++) {
                        for (o[0] = s[0] - 65517, n = 1; n < 15; n++) o[n] = s[n] - 65535 - (o[n - 1] >> 16 & 1), o[n - 1] &= 65535;
                        o[15] = s[15] - 32767 - (o[14] >> 16 & 1), i = o[15] >> 16 & 1, o[14] &= 65535, w(s, o, 1 - i)
                    }
                    for (n = 0; n < 16; n++) t[2 * n] = 255 & s[n], t[2 * n + 1] = s[n] >> 8
                }

                function S(t, e) {
                    var n = new Uint8Array(32),
                        r = new Uint8Array(32);
                    return _(n, t), _(r, e), o(n, 0, r, 0)
                }

                function k(t) {
                    var e = new Uint8Array(32);
                    return _(e, t), 1 & e[0]
                }

                function T(t, e) {
                    var n;
                    for (n = 0; n < 16; n++) t[n] = e[2 * n] + (e[2 * n + 1] << 8);
                    t[15] &= 32767
                }

                function A(t, e, n) {
                    for (var r = 0; r < 16; r++) t[r] = e[r] + n[r]
                }

                function E(t, e, n) {
                    for (var r = 0; r < 16; r++) t[r] = e[r] - n[r]
                }

                function x(t, e, n) {
                    var r, i, o = 0,
                        s = 0,
                        a = 0,
                        u = 0,
                        c = 0,
                        h = 0,
                        f = 0,
                        l = 0,
                        p = 0,
                        d = 0,
                        y = 0,
                        g = 0,
                        v = 0,
                        b = 0,
                        m = 0,
                        w = 0,
                        _ = 0,
                        S = 0,
                        k = 0,
                        T = 0,
                        A = 0,
                        E = 0,
                        x = 0,
                        C = 0,
                        P = 0,
                        R = 0,
                        O = 0,
                        M = 0,
                        U = 0,
                        L = 0,
                        B = 0,
                        I = n[0],
                        N = n[1],
                        D = n[2],
                        j = n[3],
                        Y = n[4],
                        z = n[5],
                        H = n[6],
                        q = n[7],
                        F = n[8],
                        J = n[9],
                        X = n[10],
                        K = n[11],
                        G = n[12],
                        W = n[13],
                        V = n[14],
                        Z = n[15];
                    o += (r = e[0]) * I, s += r * N, a += r * D, u += r * j, c += r * Y, h += r * z, f += r * H, l += r * q, p += r * F, d += r * J, y += r * X, g += r * K, v += r * G, b += r * W, m += r * V, w += r * Z, s += (r = e[1]) * I, a += r * N, u += r * D, c += r * j, h += r * Y, f += r * z, l += r * H, p += r * q, d += r * F, y += r * J, g += r * X, v += r * K, b += r * G, m += r * W, w += r * V, _ += r * Z, a += (r = e[2]) * I, u += r * N, c += r * D, h += r * j, f += r * Y, l += r * z, p += r * H, d += r * q, y += r * F, g += r * J, v += r * X, b += r * K, m += r * G, w += r * W, _ += r * V, S += r * Z, u += (r = e[3]) * I, c += r * N, h += r * D, f += r * j, l += r * Y, p += r * z, d += r * H, y += r * q, g += r * F, v += r * J, b += r * X, m += r * K, w += r * G, _ += r * W, S += r * V, k += r * Z, c += (r = e[4]) * I, h += r * N, f += r * D, l += r * j, p += r * Y, d += r * z, y += r * H, g += r * q, v += r * F, b += r * J, m += r * X, w += r * K, _ += r * G, S += r * W, k += r * V, T += r * Z, h += (r = e[5]) * I, f += r * N, l += r * D, p += r * j, d += r * Y, y += r * z, g += r * H, v += r * q, b += r * F, m += r * J, w += r * X, _ += r * K, S += r * G, k += r * W, T += r * V, A += r * Z, f += (r = e[6]) * I, l += r * N, p += r * D, d += r * j, y += r * Y, g += r * z, v += r * H, b += r * q, m += r * F, w += r * J, _ += r * X, S += r * K, k += r * G, T += r * W, A += r * V, E += r * Z, l += (r = e[7]) * I, p += r * N, d += r * D, y += r * j, g += r * Y, v += r * z, b += r * H, m += r * q, w += r * F, _ += r * J, S += r * X, k += r * K, T += r * G, A += r * W, E += r * V, x += r * Z, p += (r = e[8]) * I, d += r * N, y += r * D, g += r * j, v += r * Y, b += r * z, m += r * H, w += r * q, _ += r * F, S += r * J, k += r * X, T += r * K, A += r * G, E += r * W, x += r * V, C += r * Z, d += (r = e[9]) * I, y += r * N, g += r * D, v += r * j, b += r * Y, m += r * z, w += r * H, _ += r * q, S += r * F, k += r * J, T += r * X, A += r * K, E += r * G, x += r * W, C += r * V, P += r * Z, y += (r = e[10]) * I, g += r * N, v += r * D, b += r * j, m += r * Y, w += r * z, _ += r * H, S += r * q, k += r * F, T += r * J, A += r * X, E += r * K, x += r * G, C += r * W, P += r * V, R += r * Z, g += (r = e[11]) * I, v += r * N, b += r * D, m += r * j, w += r * Y, _ += r * z, S += r * H, k += r * q, T += r * F, A += r * J, E += r * X, x += r * K, C += r * G, P += r * W, R += r * V, O += r * Z, v += (r = e[12]) * I, b += r * N, m += r * D, w += r * j, _ += r * Y, S += r * z, k += r * H, T += r * q, A += r * F, E += r * J, x += r * X, C += r * K, P += r * G, R += r * W, O += r * V, M += r * Z, b += (r = e[13]) * I, m += r * N, w += r * D, _ += r * j, S += r * Y, k += r * z, T += r * H, A += r * q, E += r * F, x += r * J, C += r * X, P += r * K, R += r * G, O += r * W, M += r * V, U += r * Z, m += (r = e[14]) * I, w += r * N, _ += r * D, S += r * j, k += r * Y, T += r * z, A += r * H, E += r * q, x += r * F, C += r * J, P += r * X, R += r * K, O += r * G, M += r * W, U += r * V, L += r * Z, w += (r = e[15]) * I, s += 38 * (S += r * D), a += 38 * (k += r * j), u += 38 * (T += r * Y), c += 38 * (A += r * z), h += 38 * (E += r * H), f += 38 * (x += r * q), l += 38 * (C += r * F), p += 38 * (P += r * J), d += 38 * (R += r * X), y += 38 * (O += r * K), g += 38 * (M += r * G), v += 38 * (U += r * W), b += 38 * (L += r * V), m += 38 * (B += r * Z), o = (r = (o += 38 * (_ += r * N)) + (i = 1) + 65535) - 65536 * (i = Math.floor(r / 65536)), s = (r = s + i + 65535) - 65536 * (i = Math.floor(r / 65536)), a = (r = a + i + 65535) - 65536 * (i = Math.floor(r / 65536)), u = (r = u + i + 65535) - 65536 * (i = Math.floor(r / 65536)), c = (r = c + i + 65535) - 65536 * (i = Math.floor(r / 65536)), h = (r = h + i + 65535) - 65536 * (i = Math.floor(r / 65536)), f = (r = f + i + 65535) - 65536 * (i = Math.floor(r / 65536)), l = (r = l + i + 65535) - 65536 * (i = Math.floor(r / 65536)), p = (r = p + i + 65535) - 65536 * (i = Math.floor(r / 65536)), d = (r = d + i + 65535) - 65536 * (i = Math.floor(r / 65536)), y = (r = y + i + 65535) - 65536 * (i = Math.floor(r / 65536)), g = (r = g + i + 65535) - 65536 * (i = Math.floor(r / 65536)), v = (r = v + i + 65535) - 65536 * (i = Math.floor(r / 65536)), b = (r = b + i + 65535) - 65536 * (i = Math.floor(r / 65536)), m = (r = m + i + 65535) - 65536 * (i = Math.floor(r / 65536)), w = (r = w + i + 65535) - 65536 * (i = Math.floor(r / 65536)), o = (r = (o += i - 1 + 37 * (i - 1)) + (i = 1) + 65535) - 65536 * (i = Math.floor(r / 65536)), s = (r = s + i + 65535) - 65536 * (i = Math.floor(r / 65536)), a = (r = a + i + 65535) - 65536 * (i = Math.floor(r / 65536)), u = (r = u + i + 65535) - 65536 * (i = Math.floor(r / 65536)), c = (r = c + i + 65535) - 65536 * (i = Math.floor(r / 65536)), h = (r = h + i + 65535) - 65536 * (i = Math.floor(r / 65536)), f = (r = f + i + 65535) - 65536 * (i = Math.floor(r / 65536)), l = (r = l + i + 65535) - 65536 * (i = Math.floor(r / 65536)), p = (r = p + i + 65535) - 65536 * (i = Math.floor(r / 65536)), d = (r = d + i + 65535) - 65536 * (i = Math.floor(r / 65536)), y = (r = y + i + 65535) - 65536 * (i = Math.floor(r / 65536)), g = (r = g + i + 65535) - 65536 * (i = Math.floor(r / 65536)), v = (r = v + i + 65535) - 65536 * (i = Math.floor(r / 65536)), b = (r = b + i + 65535) - 65536 * (i = Math.floor(r / 65536)), m = (r = m + i + 65535) - 65536 * (i = Math.floor(r / 65536)), w = (r = w + i + 65535) - 65536 * (i = Math.floor(r / 65536)), o += i - 1 + 37 * (i - 1), t[0] = o, t[1] = s, t[2] = a, t[3] = u, t[4] = c, t[5] = h, t[6] = f, t[7] = l, t[8] = p, t[9] = d, t[10] = y, t[11] = g, t[12] = v, t[13] = b, t[14] = m, t[15] = w
                }

                function C(t, e) {
                    x(t, e, e)
                }

                function P(t, e) {
                    var n, r = tt();
                    for (n = 0; n < 16; n++) r[n] = e[n];
                    for (n = 253; 0 <= n; n--) C(r, r), 2 !== n && 4 !== n && x(r, r, e);
                    for (n = 0; n < 16; n++) t[n] = r[n]
                }

                function O(t, e, n) {
                    var r, i, o = new Uint8Array(32),
                        s = new Float64Array(80),
                        a = tt(),
                        u = tt(),
                        c = tt(),
                        h = tt(),
                        f = tt(),
                        l = tt();
                    for (i = 0; i < 31; i++) o[i] = e[i];
                    for (o[31] = 127 & e[31] | 64, o[0] &= 248, T(s, n), i = 0; i < 16; i++) u[i] = s[i], h[i] = a[i] = c[i] = 0;
                    for (a[0] = h[0] = 1, i = 254; 0 <= i; --i) w(a, u, r = o[i >>> 3] >>> (7 & i) & 1), w(c, h, r), A(f, a, c), E(a, a, c), A(c, u, h), E(u, u, h), C(h, f), C(l, a), x(a, c, a), x(c, u, f), A(f, a, c), E(a, a, c), C(u, a), E(c, h, l), x(a, c, st), A(a, a, h), x(c, c, a), x(a, h, l), x(h, u, s), C(u, f), w(a, u, r), w(c, h, r);
                    for (i = 0; i < 16; i++) s[i + 16] = a[i], s[i + 32] = c[i], s[i + 48] = u[i], s[i + 64] = h[i];
                    var p = s.subarray(32),
                        d = s.subarray(16);
                    return P(p, p), x(d, d, p), _(t, d), 0
                }

                function M(t, e) {
                    return O(t, e, rt)
                }

                function U(t, e) {
                    return et(e, 32), M(t, e)
                }

                function L(t, e, n) {
                    var r = new Uint8Array(32);
                    return O(r, n, e), c(t, nt, r, lt)
                }

                function N(t, e, n, r) {
                    for (var i, o, s, a, u, c, h, f, l, p, d, y, g, v, b, m, w, _, S, k, T, A, E, x, C, P, R = new Int32Array(16), O = new Int32Array(16), M = t[0], U = t[1], L = t[2], B = t[3], I = t[4], N = t[5], D = t[6], j = t[7], Y = e[0], z = e[1], H = e[2], q = e[3], F = e[4], J = e[5], X = e[6], K = e[7], G = 0; 128 <= r;) {
                        for (S = 0; S < 16; S++) k = 8 * S + G, R[S] = n[k + 0] << 24 | n[k + 1] << 16 | n[k + 2] << 8 | n[k + 3], O[S] = n[k + 4] << 24 | n[k + 5] << 16 | n[k + 6] << 8 | n[k + 7];
                        for (S = 0; S < 80; S++)
                            if (i = M, o = U, s = L, a = B, l = Y, p = z, d = H, y = q, E = 65535 & (A = K), x = A >>> 16, C = 65535 & (T = j), P = T >>> 16, E += 65535 & (A = ((g = F) >>> 14 | (u = I) << 18) ^ (F >>> 18 | I << 14) ^ (I >>> 9 | F << 23)), x += A >>> 16, C += 65535 & (T = (I >>> 14 | F << 18) ^ (I >>> 18 | F << 14) ^ (F >>> 9 | I << 23)), P += T >>> 16, E += 65535 & (A = F & (v = J) ^ ~F & (b = X)), x += A >>> 16, C += 65535 & (T = I & (c = N) ^ ~I & (h = D)), P += T >>> 16, T = gt[2 * S], E += 65535 & (A = gt[2 * S + 1]), x += A >>> 16, C += 65535 & T, P += T >>> 16, T = R[S % 16], x += (A = O[S % 16]) >>> 16, C += 65535 & T, P += T >>> 16, C += (x += (E += 65535 & A) >>> 16) >>> 16, E = 65535 & (A = _ = 65535 & E | x << 16), x = A >>> 16, C = 65535 & (T = w = 65535 & C | (P += C >>> 16) << 16), P = T >>> 16, E += 65535 & (A = (Y >>> 28 | M << 4) ^ (M >>> 2 | Y << 30) ^ (M >>> 7 | Y << 25)), x += A >>> 16, C += 65535 & (T = (M >>> 28 | Y << 4) ^ (Y >>> 2 | M << 30) ^ (Y >>> 7 | M << 25)), P += T >>> 16, x += (A = Y & z ^ Y & H ^ z & H) >>> 16, C += 65535 & (T = M & U ^ M & L ^ U & L), P += T >>> 16, f = 65535 & (C += (x += (E += 65535 & A) >>> 16) >>> 16) | (P += C >>> 16) << 16, m = 65535 & E | x << 16, E = 65535 & (A = y), x = A >>> 16, C = 65535 & (T = a), P = T >>> 16, x += (A = _) >>> 16, C += 65535 & (T = w), P += T >>> 16, U = i, L = o, B = s, I = a = 65535 & (C += (x += (E += 65535 & A) >>> 16) >>> 16) | (P += C >>> 16) << 16, N = u, D = c, j = h, M = f, z = l, H = p, q = d, F = y = 65535 & E | x << 16, J = g, X = v, K = b, Y = m, S % 16 == 15)
                                for (k = 0; k < 16; k++) T = R[k], E = 65535 & (A = O[k]), x = A >>> 16, C = 65535 & T, P = T >>> 16, T = R[(k + 9) % 16], E += 65535 & (A = O[(k + 9) % 16]), x += A >>> 16, C += 65535 & T, P += T >>> 16, w = R[(k + 1) % 16], E += 65535 & (A = ((_ = O[(k + 1) % 16]) >>> 1 | w << 31) ^ (_ >>> 8 | w << 24) ^ (_ >>> 7 | w << 25)), x += A >>> 16, C += 65535 & (T = (w >>> 1 | _ << 31) ^ (w >>> 8 | _ << 24) ^ w >>> 7), P += T >>> 16, w = R[(k + 14) % 16], x += (A = ((_ = O[(k + 14) % 16]) >>> 19 | w << 13) ^ (w >>> 29 | _ << 3) ^ (_ >>> 6 | w << 26)) >>> 16, C += 65535 & (T = (w >>> 19 | _ << 13) ^ (_ >>> 29 | w << 3) ^ w >>> 6), P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, R[k] = 65535 & C | P << 16, O[k] = 65535 & E | x << 16;
                        E = 65535 & (A = Y), x = A >>> 16, C = 65535 & (T = M), P = T >>> 16, T = t[0], x += (A = e[0]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[0] = M = 65535 & C | P << 16, e[0] = Y = 65535 & E | x << 16, E = 65535 & (A = z), x = A >>> 16, C = 65535 & (T = U), P = T >>> 16, T = t[1], x += (A = e[1]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[1] = U = 65535 & C | P << 16, e[1] = z = 65535 & E | x << 16, E = 65535 & (A = H), x = A >>> 16, C = 65535 & (T = L), P = T >>> 16, T = t[2], x += (A = e[2]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[2] = L = 65535 & C | P << 16, e[2] = H = 65535 & E | x << 16, E = 65535 & (A = q), x = A >>> 16, C = 65535 & (T = B), P = T >>> 16, T = t[3], x += (A = e[3]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[3] = B = 65535 & C | P << 16, e[3] = q = 65535 & E | x << 16, E = 65535 & (A = F), x = A >>> 16, C = 65535 & (T = I), P = T >>> 16, T = t[4], x += (A = e[4]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[4] = I = 65535 & C | P << 16, e[4] = F = 65535 & E | x << 16, E = 65535 & (A = J), x = A >>> 16, C = 65535 & (T = N), P = T >>> 16, T = t[5], x += (A = e[5]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[5] = N = 65535 & C | P << 16, e[5] = J = 65535 & E | x << 16, E = 65535 & (A = X), x = A >>> 16, C = 65535 & (T = D), P = T >>> 16, T = t[6], x += (A = e[6]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[6] = D = 65535 & C | P << 16, e[6] = X = 65535 & E | x << 16, E = 65535 & (A = K), x = A >>> 16, C = 65535 & (T = j), P = T >>> 16, T = t[7], x += (A = e[7]) >>> 16, C += 65535 & T, P += T >>> 16, P += (C += (x += (E += 65535 & A) >>> 16) >>> 16) >>> 16, t[7] = j = 65535 & C | P << 16, e[7] = K = 65535 & E | x << 16, G += 128, r -= 128
                    }
                    return r
                }

                function D(t, n, r) {
                    var i, o = new Int32Array(8),
                        s = new Int32Array(8),
                        a = new Uint8Array(256),
                        u = r;
                    for (o[0] = 1779033703, o[1] = 3144134277, o[2] = 1013904242, o[3] = 2773480762, o[4] = 1359893119, o[5] = 2600822924, o[6] = 528734635, o[7] = 1541459225, s[0] = 4089235720, s[1] = 2227873595, s[2] = 4271175723, s[3] = 1595750129, s[4] = 2917565137, s[5] = 725511199, s[6] = 4215389547, s[7] = 327033209, N(o, s, n, r), r %= 128, i = 0; i < r; i++) a[i] = n[u - r + i];
                    for (a[r] = 128, a[(r = 256 - 128 * (r < 112 ? 1 : 0)) - 9] = 0, e(a, r - 8, u / 536870912 | 0, u << 3), N(o, s, a, r), i = 0; i < 8; i++) e(t, 8 * i, o[i], s[i]);
                    return 0
                }

                function j(t, e) {
                    var n = tt(),
                        r = tt(),
                        i = tt(),
                        o = tt(),
                        s = tt(),
                        a = tt(),
                        u = tt(),
                        c = tt(),
                        h = tt();
                    E(n, t[1], t[0]), E(h, e[1], e[0]), x(n, n, h), A(r, t[0], t[1]), A(h, e[0], e[1]), x(r, r, h), x(i, t[3], e[3]), x(i, i, ut), x(o, t[2], e[2]), A(o, o, o), E(s, r, n), E(a, o, i), A(u, o, i), A(c, r, n), x(t[0], s, a), x(t[1], c, u), x(t[2], u, a), x(t[3], s, c)
                }

                function Y(t, e, n) {
                    var r;
                    for (r = 0; r < 4; r++) w(t[r], e[r], n)
                }

                function z(t, e) {
                    var n = tt(),
                        r = tt(),
                        i = tt();
                    P(i, e[2]), x(n, e[0], i), x(r, e[1], i), _(t, r), t[31] ^= k(n) << 7
                }

                function H(t, e, n) {
                    var r, i;
                    for (b(t[0], it), b(t[1], ot), b(t[2], ot), b(t[3], it), i = 255; 0 <= i; --i) Y(t, e, r = n[i / 8 | 0] >> (7 & i) & 1), j(e, t), j(t, t), Y(t, e, r)
                }

                function q(t, e) {
                    var n = [tt(), tt(), tt(), tt()];
                    b(n[0], ct), b(n[1], ht), b(n[2], ot), x(n[3], ct, ht), H(t, n, e)
                }

                function F(t, e, n) {
                    var r, i = new Uint8Array(64),
                        o = [tt(), tt(), tt(), tt()];
                    for (n || et(e, 32), D(i, e, 32), i[0] &= 248, i[31] &= 127, i[31] |= 64, q(o, i), z(t, o), r = 0; r < 32; r++) e[r + 32] = t[r];
                    return 0
                }

                function J(t, e) {
                    var n, r, i, o;
                    for (r = 63; 32 <= r; --r) {
                        for (n = 0, i = r - 32, o = r - 12; i < o; ++i) e[i] += n - 16 * e[r] * vt[i - (r - 32)], n = e[i] + 128 >> 8, e[i] -= 256 * n;
                        e[i] += n, e[r] = 0
                    }
                    for (i = n = 0; i < 32; i++) e[i] += n - (e[31] >> 4) * vt[i], n = e[i] >> 8, e[i] &= 255;
                    for (i = 0; i < 32; i++) e[i] -= n * vt[i];
                    for (r = 0; r < 32; r++) e[r + 1] += e[r] >> 8, t[r] = 255 & e[r]
                }

                function X(t) {
                    var e, n = new Float64Array(64);
                    for (e = 0; e < 64; e++) n[e] = t[e];
                    for (e = 0; e < 64; e++) t[e] = 0;
                    J(t, n)
                }

                function K(t, e, n, r) {
                    var i, o, s = new Uint8Array(64),
                        a = new Uint8Array(64),
                        u = new Uint8Array(64),
                        c = new Float64Array(64),
                        h = [tt(), tt(), tt(), tt()];
                    D(s, r, 32), s[0] &= 248, s[31] &= 127, s[31] |= 64;
                    var f = n + 64;
                    for (i = 0; i < n; i++) t[64 + i] = e[i];
                    for (i = 0; i < 32; i++) t[32 + i] = s[32 + i];
                    for (D(u, t.subarray(32), n + 32), X(u), q(h, u), z(t, h), i = 32; i < 64; i++) t[i] = r[i];
                    for (D(a, t, n + 64), X(a), i = 0; i < 64; i++) c[i] = 0;
                    for (i = 0; i < 32; i++) c[i] = u[i];
                    for (i = 0; i < 32; i++)
                        for (o = 0; o < 32; o++) c[i + o] += a[i] * s[o];
                    return J(t.subarray(32), c), f
                }

                function G(t, e) {
                    var n = tt(),
                        r = tt(),
                        i = tt(),
                        o = tt(),
                        s = tt(),
                        a = tt(),
                        u = tt();
                    return b(t[2], ot), T(t[1], e), C(i, t[1]), x(o, i, at), E(i, i, t[2]), A(o, t[2], o), C(s, o), C(a, s), x(u, a, s), x(n, u, i), x(n, n, o),
                        function(t, e) {
                            var n, r = tt();
                            for (n = 0; n < 16; n++) r[n] = e[n];
                            for (n = 250; 0 <= n; n--) C(r, r), 1 !== n && x(r, r, e);
                            for (n = 0; n < 16; n++) t[n] = r[n]
                        }(n, n), x(n, n, i), x(n, n, o), x(n, n, o), x(t[0], n, o), C(r, t[0]), x(r, r, o), S(r, i) && x(t[0], t[0], ft), C(r, t[0]), x(r, r, o), S(r, i) ? -1 : (k(t[0]) === e[31] >> 7 && E(t[0], it, t[0]), x(t[3], t[0], t[1]), 0)
                }

                function W(t, e, n, r) {
                    var i, a = new Uint8Array(32),
                        u = new Uint8Array(64),
                        c = [tt(), tt(), tt(), tt()],
                        h = [tt(), tt(), tt(), tt()];
                    if (-1, n < 64) return -1;
                    if (G(h, r)) return -1;
                    for (i = 0; i < n; i++) t[i] = e[i];
                    for (i = 0; i < 32; i++) t[i + 32] = r[i];
                    if (D(u, t, n), X(u), H(c, h, u), q(h, e.subarray(32)), j(c, h), z(a, c), n -= 64, o(e, 0, a, 0)) {
                        for (i = 0; i < n; i++) t[i] = 0;
                        return -1
                    }
                    for (i = 0; i < n; i++) t[i] = e[i + 64];
                    return n
                }

                function V(t, e) {
                    if (32 !== t.length) throw new Error("bad key size");
                    if (24 !== e.length) throw new Error("bad nonce size")
                }

                function Q() {
                    for (var t = 0; t < arguments.length; t++)
                        if (!(arguments[t] instanceof Uint8Array)) throw new TypeError("unexpected type, use Uint8Array")
                }

                function $(t) {
                    for (var e = 0; e < t.length; e++) t[e] = 0
                }
                var tt = function(t) {
                        var e, n = new Float64Array(16);
                        if (t)
                            for (e = 0; e < t.length; e++) n[e] = t[e];
                        return n
                    },
                    et = function() {
                        throw new Error("no PRNG")
                    },
                    nt = new Uint8Array(16),
                    rt = new Uint8Array(32);
                rt[0] = 9;
                var it = tt(),
                    ot = tt([1]),
                    st = tt([56129, 1]),
                    at = tt([30883, 4953, 19914, 30187, 55467, 16705, 2637, 112, 59544, 30585, 16505, 36039, 65139, 11119, 27886, 20995]),
                    ut = tt([61785, 9906, 39828, 60374, 45398, 33411, 5274, 224, 53552, 61171, 33010, 6542, 64743, 22239, 55772, 9222]),
                    ct = tt([54554, 36645, 11616, 51542, 42930, 38181, 51040, 26924, 56412, 64982, 57905, 49316, 21502, 52590, 14035, 8553]),
                    ht = tt([26200, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214]),
                    ft = tt([41136, 18958, 6951, 50414, 58488, 44335, 6150, 12099, 55207, 15867, 153, 11085, 57099, 20417, 9344, 11139]),
                    lt = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]),
                    pt = function(t) {
                        var e, n, r, i, o, s, a, u;
                        this.buffer = new Uint8Array(16), this.r = new Uint16Array(10), this.h = new Uint16Array(10), this.pad = new Uint16Array(8), this.leftover = 0, e = 255 & t[this.fin = 0] | (255 & t[1]) << 8, this.r[0] = 8191 & e, n = 255 & t[2] | (255 & t[3]) << 8, this.r[1] = 8191 & (e >>> 13 | n << 3), r = 255 & t[4] | (255 & t[5]) << 8, this.r[2] = 7939 & (n >>> 10 | r << 6), i = 255 & t[6] | (255 & t[7]) << 8, this.r[3] = 8191 & (r >>> 7 | i << 9), o = 255 & t[8] | (255 & t[9]) << 8, this.r[4] = 255 & (i >>> 4 | o << 12), this.r[5] = o >>> 1 & 8190, s = 255 & t[10] | (255 & t[11]) << 8, this.r[6] = 8191 & (o >>> 14 | s << 2), a = 255 & t[12] | (255 & t[13]) << 8, this.r[7] = 8065 & (s >>> 11 | a << 5), u = 255 & t[14] | (255 & t[15]) << 8, this.r[8] = 8191 & (a >>> 8 | u << 8), this.r[9] = u >>> 5 & 127, this.pad[0] = 255 & t[16] | (255 & t[17]) << 8, this.pad[1] = 255 & t[18] | (255 & t[19]) << 8, this.pad[2] = 255 & t[20] | (255 & t[21]) << 8, this.pad[3] = 255 & t[22] | (255 & t[23]) << 8, this.pad[4] = 255 & t[24] | (255 & t[25]) << 8, this.pad[5] = 255 & t[26] | (255 & t[27]) << 8, this.pad[6] = 255 & t[28] | (255 & t[29]) << 8, this.pad[7] = 255 & t[30] | (255 & t[31]) << 8
                    };
                pt.prototype.blocks = function(t, e, n) {
                    for (var r, i, o, s, a, u, c, h, f, l, p, d, y, g, v, b, m, w, _, S = this.fin ? 0 : 2048, k = this.h[0], T = this.h[1], A = this.h[2], E = this.h[3], x = this.h[4], C = this.h[5], P = this.h[6], R = this.h[7], O = this.h[8], M = this.h[9], U = this.r[0], L = this.r[1], B = this.r[2], I = this.r[3], N = this.r[4], D = this.r[5], j = this.r[6], Y = this.r[7], z = this.r[8], H = this.r[9]; 16 <= n;) l = f = 0, l += (k += 8191 & (r = 255 & t[e + 0] | (255 & t[e + 1]) << 8)) * U, l += (T += 8191 & (r >>> 13 | (i = 255 & t[e + 2] | (255 & t[e + 3]) << 8) << 3)) * (5 * H), l += (A += 8191 & (i >>> 10 | (o = 255 & t[e + 4] | (255 & t[e + 5]) << 8) << 6)) * (5 * z), l += (E += 8191 & (o >>> 7 | (s = 255 & t[e + 6] | (255 & t[e + 7]) << 8) << 9)) * (5 * Y), f = (l += (x += 8191 & (s >>> 4 | (a = 255 & t[e + 8] | (255 & t[e + 9]) << 8) << 12)) * (5 * j)) >>> 13, l &= 8191, l += (C += a >>> 1 & 8191) * (5 * D), l += (P += 8191 & (a >>> 14 | (u = 255 & t[e + 10] | (255 & t[e + 11]) << 8) << 2)) * (5 * N), l += (R += 8191 & (u >>> 11 | (c = 255 & t[e + 12] | (255 & t[e + 13]) << 8) << 5)) * (5 * I), l += (O += 8191 & (c >>> 8 | (h = 255 & t[e + 14] | (255 & t[e + 15]) << 8) << 8)) * (5 * B), p = f += (l += (M += h >>> 5 | S) * (5 * L)) >>> 13, p += k * L, p += T * U, p += A * (5 * H), p += E * (5 * z), f = (p += x * (5 * Y)) >>> 13, p &= 8191, p += C * (5 * j), p += P * (5 * D), p += R * (5 * N), p += O * (5 * I), f += (p += M * (5 * B)) >>> 13, p &= 8191, d = f, d += k * B, d += T * L, d += A * U, d += E * (5 * H), f = (d += x * (5 * z)) >>> 13, d &= 8191, d += C * (5 * Y), d += P * (5 * j), d += R * (5 * D), d += O * (5 * N), y = f += (d += M * (5 * I)) >>> 13, y += k * I, y += T * B, y += A * L, y += E * U, f = (y += x * (5 * H)) >>> 13, y &= 8191, y += C * (5 * z), y += P * (5 * Y), y += R * (5 * j), y += O * (5 * D), g = f += (y += M * (5 * N)) >>> 13, g += k * N, g += T * I, g += A * B, g += E * L, f = (g += x * U) >>> 13, g &= 8191, g += C * (5 * H), g += P * (5 * z), g += R * (5 * Y), g += O * (5 * j), v = f += (g += M * (5 * D)) >>> 13, v += k * D, v += T * N, v += A * I, v += E * B, f = (v += x * L) >>> 13, v &= 8191, v += C * U, v += P * (5 * H), v += R * (5 * z), v += O * (5 * Y), b = f += (v += M * (5 * j)) >>> 13, b += k * j, b += T * D, b += A * N, b += E * I, f = (b += x * B) >>> 13, b &= 8191, b += C * L, b += P * U, b += R * (5 * H), b += O * (5 * z), m = f += (b += M * (5 * Y)) >>> 13, m += k * Y, m += T * j, m += A * D, m += E * N, f = (m += x * I) >>> 13, m &= 8191, m += C * B, m += P * L, m += R * U, m += O * (5 * H), w = f += (m += M * (5 * z)) >>> 13, w += k * z, w += T * Y, w += A * j, w += E * D, f = (w += x * N) >>> 13, w &= 8191, w += C * I, w += P * B, w += R * L, w += O * U, _ = f += (w += M * (5 * H)) >>> 13, _ += k * H, _ += T * z, _ += A * Y, _ += E * j, f = (_ += x * D) >>> 13, _ &= 8191, _ += C * N, _ += P * I, _ += R * B, _ += O * L, k = l = 8191 & (f = (f = ((f += (_ += M * U) >>> 13) << 2) + f | 0) + (l &= 8191) | 0), T = p += f >>>= 13, A = d &= 8191, E = y &= 8191, x = g &= 8191, C = v &= 8191, P = b &= 8191, R = m &= 8191, O = w &= 8191, M = _ &= 8191, e += 16, n -= 16;
                    this.h[0] = k, this.h[1] = T, this.h[2] = A, this.h[3] = E, this.h[4] = x, this.h[5] = C, this.h[6] = P, this.h[7] = R, this.h[8] = O, this.h[9] = M
                }, pt.prototype.finish = function(t, e) {
                    var n, r, i, o, s = new Uint16Array(10);
                    if (this.leftover) {
                        for (o = this.leftover, this.buffer[o++] = 1; o < 16; o++) this.buffer[o] = 0;
                        this.fin = 1, this.blocks(this.buffer, 0, 16)
                    }
                    for (n = this.h[1] >>> 13, this.h[1] &= 8191, o = 2; o < 10; o++) this.h[o] += n, n = this.h[o] >>> 13, this.h[o] &= 8191;
                    for (this.h[0] += 5 * n, n = this.h[0] >>> 13, this.h[0] &= 8191, this.h[1] += n, n = this.h[1] >>> 13, this.h[1] &= 8191, this.h[2] += n, s[0] = this.h[0] + 5, n = s[0] >>> 13, s[0] &= 8191, o = 1; o < 10; o++) s[o] = this.h[o] + n, n = s[o] >>> 13, s[o] &= 8191;
                    for (s[9] -= 8192, r = (1 ^ n) - 1, o = 0; o < 10; o++) s[o] &= r;
                    for (r = ~r, o = 0; o < 10; o++) this.h[o] = this.h[o] & r | s[o];
                    for (this.h[0] = 65535 & (this.h[0] | this.h[1] << 13), this.h[1] = 65535 & (this.h[1] >>> 3 | this.h[2] << 10), this.h[2] = 65535 & (this.h[2] >>> 6 | this.h[3] << 7), this.h[3] = 65535 & (this.h[3] >>> 9 | this.h[4] << 4), this.h[4] = 65535 & (this.h[4] >>> 12 | this.h[5] << 1 | this.h[6] << 14), this.h[5] = 65535 & (this.h[6] >>> 2 | this.h[7] << 11), this.h[6] = 65535 & (this.h[7] >>> 5 | this.h[8] << 8), this.h[7] = 65535 & (this.h[8] >>> 8 | this.h[9] << 5), i = this.h[0] + this.pad[0], this.h[0] = 65535 & i, o = 1; o < 8; o++) i = (this.h[o] + this.pad[o] | 0) + (i >>> 16) | 0, this.h[o] = 65535 & i;
                    t[e + 0] = this.h[0] >>> 0 & 255, t[e + 1] = this.h[0] >>> 8 & 255, t[e + 2] = this.h[1] >>> 0 & 255, t[e + 3] = this.h[1] >>> 8 & 255, t[e + 4] = this.h[2] >>> 0 & 255, t[e + 5] = this.h[2] >>> 8 & 255, t[e + 6] = this.h[3] >>> 0 & 255, t[e + 7] = this.h[3] >>> 8 & 255, t[e + 8] = this.h[4] >>> 0 & 255, t[e + 9] = this.h[4] >>> 8 & 255, t[e + 10] = this.h[5] >>> 0 & 255, t[e + 11] = this.h[5] >>> 8 & 255, t[e + 12] = this.h[6] >>> 0 & 255, t[e + 13] = this.h[6] >>> 8 & 255, t[e + 14] = this.h[7] >>> 0 & 255, t[e + 15] = this.h[7] >>> 8 & 255
                }, pt.prototype.update = function(t, e, n) {
                    var r, i;
                    if (this.leftover) {
                        for (n < (i = 16 - this.leftover) && (i = n), r = 0; r < i; r++) this.buffer[this.leftover + r] = t[e + r];
                        if (n -= i, e += i, this.leftover += i, this.leftover < 16) return;
                        this.blocks(this.buffer, 0, 16), this.leftover = 0
                    }
                    if (16 <= n && (i = n - n % 16, this.blocks(t, e, i), e += i, n -= i), n) {
                        for (r = 0; r < n; r++) this.buffer[this.leftover + r] = t[e + r];
                        this.leftover += n
                    }
                };
                var dt = g,
                    yt = v,
                    gt = [1116352408, 3609767458, 1899447441, 602891725, 3049323471, 3964484399, 3921009573, 2173295548, 961987163, 4081628472, 1508970993, 3053834265, 2453635748, 2937671579, 2870763221, 3664609560, 3624381080, 2734883394, 310598401, 1164996542, 607225278, 1323610764, 1426881987, 3590304994, 1925078388, 4068182383, 2162078206, 991336113, 2614888103, 633803317, 3248222580, 3479774868, 3835390401, 2666613458, 4022224774, 944711139, 264347078, 2341262773, 604807628, 2007800933, 770255983, 1495990901, 1249150122, 1856431235, 1555081692, 3175218132, 1996064986, 2198950837, 2554220882, 3999719339, 2821834349, 766784016, 2952996808, 2566594879, 3210313671, 3203337956, 3336571891, 1034457026, 3584528711, 2466948901, 113926993, 3758326383, 338241895, 168717936, 666307205, 1188179964, 773529912, 1546045734, 1294757372, 1522805485, 1396182291, 2643833823, 1695183700, 2343527390, 1986661051, 1014477480, 2177026350, 1206759142, 2456956037, 344077627, 2730485921, 1290863460, 2820302411, 3158454273, 3259730800, 3505952657, 3345764771, 106217008, 3516065817, 3606008344, 3600352804, 1432725776, 4094571909, 1467031594, 275423344, 851169720, 430227734, 3100823752, 506948616, 1363258195, 659060556, 3750685593, 883997877, 3785050280, 958139571, 3318307427, 1322822218, 3812723403, 1537002063, 2003034995, 1747873779, 3602036899, 1955562222, 1575990012, 2024104815, 1125592928, 2227730452, 2716904306, 2361852424, 442776044, 2428436474, 593698344, 2756734187, 3733110249, 3204031479, 2999351573, 3329325298, 3815920427, 3391569614, 3928383900, 3515267271, 566280711, 3940187606, 3454069534, 4118630271, 4000239992, 116418474, 1914138554, 174292421, 2731055270, 289380356, 3203993006, 460393269, 320620315, 685471733, 587496836, 852142971, 1086792851, 1017036298, 365543100, 1126000580, 2618297676, 1288033470, 3409855158, 1501505948, 4234509866, 1607167915, 987167468, 1816402316, 1246189591],
                    vt = new Float64Array([237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16]);
                t.lowlevel = {
                        crypto_core_hsalsa20: c,
                        crypto_stream_xor: p,
                        crypto_stream: l,
                        crypto_stream_salsa20_xor: h,
                        crypto_stream_salsa20: f,
                        crypto_onetimeauth: d,
                        crypto_onetimeauth_verify: y,
                        crypto_verify_16: i,
                        crypto_verify_32: o,
                        crypto_secretbox: g,
                        crypto_secretbox_open: v,
                        crypto_scalarmult: O,
                        crypto_scalarmult_base: M,
                        crypto_box_beforenm: L,
                        crypto_box_afternm: dt,
                        crypto_box: function(t, e, n, r, i, o) {
                            var s = new Uint8Array(32);
                            return L(s, i, o), dt(t, e, n, r, s)
                        },
                        crypto_box_open: function(t, e, n, r, i, o) {
                            var s = new Uint8Array(32);
                            return L(s, i, o), yt(t, e, n, r, s)
                        },
                        crypto_box_keypair: U,
                        crypto_hash: D,
                        crypto_sign: K,
                        crypto_sign_keypair: F,
                        crypto_sign_open: W,
                        crypto_secretbox_KEYBYTES: 32,
                        crypto_secretbox_NONCEBYTES: 24,
                        crypto_secretbox_ZEROBYTES: 32,
                        crypto_secretbox_BOXZEROBYTES: 16,
                        crypto_scalarmult_BYTES: 32,
                        crypto_scalarmult_SCALARBYTES: 32,
                        crypto_box_PUBLICKEYBYTES: 32,
                        crypto_box_SECRETKEYBYTES: 32,
                        crypto_box_BEFORENMBYTES: 32,
                        crypto_box_NONCEBYTES: 24,
                        crypto_box_ZEROBYTES: 32,
                        crypto_box_BOXZEROBYTES: 16,
                        crypto_sign_BYTES: 64,
                        crypto_sign_PUBLICKEYBYTES: 32,
                        crypto_sign_SECRETKEYBYTES: 64,
                        crypto_sign_SEEDBYTES: 32,
                        crypto_hash_BYTES: 64
                    }, t.randomBytes = function(t) {
                        var e = new Uint8Array(t);
                        return et(e, t), e
                    }, t.secretbox = function(t, e, n) {
                        Q(t, e, n), V(n, e);
                        for (var r = new Uint8Array(32 + t.length), i = new Uint8Array(r.length), o = 0; o < t.length; o++) r[o + 32] = t[o];
                        return g(i, r, r.length, e, n), i.subarray(16)
                    }, t.secretbox.open = function(t, e, n) {
                        Q(t, e, n), V(n, e);
                        for (var r = new Uint8Array(16 + t.length), i = new Uint8Array(r.length), o = 0; o < t.length; o++) r[o + 16] = t[o];
                        return r.length < 32 ? null : 0 !== v(i, r, r.length, e, n) ? null : i.subarray(32)
                    }, t.secretbox.keyLength = 32, t.secretbox.nonceLength = 24, t.secretbox.overheadLength = 16, t.scalarMult = function(t, e) {
                        if (Q(t, e), 32 !== t.length) throw new Error("bad n size");
                        if (32 !== e.length) throw new Error("bad p size");
                        var n = new Uint8Array(32);
                        return O(n, t, e), n
                    }, t.scalarMult.base = function(t) {
                        if (Q(t), 32 !== t.length) throw new Error("bad n size");
                        var e = new Uint8Array(32);
                        return M(e, t), e
                    }, t.scalarMult.scalarLength = 32, t.scalarMult.groupElementLength = 32, t.box = function(e, n, r, i) {
                        var o = t.box.before(r, i);
                        return t.secretbox(e, n, o)
                    }, t.box.before = function(t, e) {
                        Q(t, e),
                            function(t, e) {
                                if (32 !== t.length) throw new Error("bad public key size");
                                if (32 !== e.length) throw new Error("bad secret key size")
                            }(t, e);
                        var n = new Uint8Array(32);
                        return L(n, t, e), n
                    }, t.box.after = t.secretbox, t.box.open = function(e, n, r, i) {
                        var o = t.box.before(r, i);
                        return t.secretbox.open(e, n, o)
                    }, t.box.open.after = t.secretbox.open, t.box.keyPair = function() {
                        var t = new Uint8Array(32),
                            e = new Uint8Array(32);
                        return U(t, e), {
                            publicKey: t,
                            secretKey: e
                        }
                    }, t.box.keyPair.fromSecretKey = function(t) {
                        if (Q(t), 32 !== t.length) throw new Error("bad secret key size");
                        var e = new Uint8Array(32);
                        return M(e, t), {
                            publicKey: e,
                            secretKey: new Uint8Array(t)
                        }
                    }, t.box.publicKeyLength = 32, t.box.secretKeyLength = 32, t.box.sharedKeyLength = 32, t.box.nonceLength = 24, t.box.overheadLength = t.secretbox.overheadLength, t.sign = function(t, e) {
                        if (Q(t, e), 64 !== e.length) throw new Error("bad secret key size");
                        var n = new Uint8Array(64 + t.length);
                        return K(n, t, t.length, e), n
                    }, t.sign.open = function(t, e) {
                        if (Q(t, e), 32 !== e.length) throw new Error("bad public key size");
                        var n = new Uint8Array(t.length),
                            r = W(n, t, t.length, e);
                        if (r < 0) return null;
                        for (var i = new Uint8Array(r), o = 0; o < i.length; o++) i[o] = n[o];
                        return i
                    }, t.sign.detached = function(e, n) {
                        for (var r = t.sign(e, n), i = new Uint8Array(64), o = 0; o < i.length; o++) i[o] = r[o];
                        return i
                    }, t.sign.detached.verify = function(t, e, n) {
                        if (Q(t, e, n), 64 !== e.length) throw new Error("bad signature size");
                        if (32 !== n.length) throw new Error("bad public key size");
                        var r, i = new Uint8Array(64 + t.length),
                            o = new Uint8Array(64 + t.length);
                        for (r = 0; r < 64; r++) i[r] = e[r];
                        for (r = 0; r < t.length; r++) i[r + 64] = t[r];
                        return 0 <= W(o, i, i.length, n)
                    }, t.sign.keyPair = function() {
                        var t = new Uint8Array(32),
                            e = new Uint8Array(64);
                        return F(t, e), {
                            publicKey: t,
                            secretKey: e
                        }
                    }, t.sign.keyPair.fromSecretKey = function(t) {
                        if (Q(t), 64 !== t.length) throw new Error("bad secret key size");
                        for (var e = new Uint8Array(32), n = 0; n < e.length; n++) e[n] = t[32 + n];
                        return {
                            publicKey: e,
                            secretKey: new Uint8Array(t)
                        }
                    }, t.sign.keyPair.fromSeed = function(t) {
                        if (Q(t), 32 !== t.length) throw new Error("bad seed size");
                        for (var e = new Uint8Array(32), n = new Uint8Array(64), r = 0; r < 32; r++) n[r] = t[r];
                        return F(e, n, !0), {
                            publicKey: e,
                            secretKey: n
                        }
                    }, t.sign.publicKeyLength = 32, t.sign.secretKeyLength = 64, t.sign.seedLength = 32, t.sign.signatureLength = 64, t.hash = function(t) {
                        Q(t);
                        var e = new Uint8Array(64);
                        return D(e, t, t.length), e
                    }, t.hash.hashLength = 64, t.verify = function(t, e) {
                        return Q(t, e), 0 !== t.length && 0 !== e.length && t.length === e.length && 0 === r(t, 0, e, 0, t.length)
                    }, t.setPRNG = function(t) {
                        et = t
                    },
                    function() {
                        var e = "undefined" != typeof self ? self.crypto || self.msCrypto : null;
                        if (e && e.getRandomValues) {
                            t.setPRNG(function(t, n) {
                                var i, o = new Uint8Array(n);
                                for (i = 0; i < n; i += 65536) e.getRandomValues(o.subarray(i, i + Math.min(n - i, 65536)));
                                for (i = 0; i < n; i++) t[i] = o[i];
                                $(o)
                            })
                        } else(e = n(56)) && e.randomBytes && t.setPRNG(function(t, n) {
                            var r, i = e.randomBytes(n);
                            for (r = 0; r < n; r++) t[r] = i[r];
                            $(i)
                        })
                    }()
            }(void 0 !== t && t.exports ? t.exports : self.nacl = self.nacl || {})
        }, function(t, e) {}, function(t, e, n) {
            (function(e) {
                ! function(e, n) {
                    "use strict";
                    void 0 !== t && t.exports ? t.exports = n() : (e.nacl || (e.nacl = {}), e.nacl.util = n())
                }(this, function() {
                    "use strict";

                    function t(t) {
                        if (!/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)) throw new TypeError("invalid encoding")
                    }
                    var n = {
                        decodeUTF8: function(t) {
                            if ("string" != typeof t) throw new TypeError("expected string");
                            var e, n = unescape(encodeURIComponent(t)),
                                r = new Uint8Array(n.length);
                            for (e = 0; e < n.length; e++) r[e] = n.charCodeAt(e);
                            return r
                        },
                        encodeUTF8: function(t) {
                            var e, n = [];
                            for (e = 0; e < t.length; e++) n.push(String.fromCharCode(t[e]));
                            return decodeURIComponent(escape(n.join("")))
                        }
                    };
                    return "undefined" == typeof atob ? void 0 !== e.from ? (n.encodeBase64 = function(t) {
                        return e.from(t).toString("base64")
                    }, n.decodeBase64 = function(n) {
                        return t(n), new Uint8Array(Array.prototype.slice.call(e.from(n, "base64"), 0))
                    }) : (n.encodeBase64 = function(t) {
                        return new e(t).toString("base64")
                    }, n.decodeBase64 = function(n) {
                        return t(n), new Uint8Array(Array.prototype.slice.call(new e(n, "base64"), 0))
                    }) : (n.encodeBase64 = function(t) {
                        var e, n = [],
                            r = t.length;
                        for (e = 0; e < r; e++) n.push(String.fromCharCode(t[e]));
                        return btoa(n.join(""))
                    }, n.decodeBase64 = function(e) {
                        t(e);
                        var n, r = atob(e),
                            i = new Uint8Array(r.length);
                        for (n = 0; n < r.length; n++) i[n] = r.charCodeAt(n);
                        return i
                    }), n
                })
            }).call(e, n(58).Buffer)
        }, function(t, e, n) {
            "use strict";

            function i() {
                return s.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
            }

            function o(t, e) {
                if (i() < e) throw new RangeError("Invalid typed array length");
                return s.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(e)).__proto__ = s.prototype : (null === t && (t = new s(e)), t.length = e), t
            }

            function s(t, e, n) {
                if (!(s.TYPED_ARRAY_SUPPORT || this instanceof s)) return new s(t, e, n);
                if ("number" != typeof t) return a(this, t, e, n);
                if ("string" == typeof e) throw new Error("If encoding is specified then the first argument must be a string");
                return h(this, t)
            }

            function a(t, e, n, r) {
                if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
                return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer ? function(t, e, n, r) {
                    if (e.byteLength, n < 0 || e.byteLength < n) throw new RangeError("'offset' is out of bounds");
                    if (e.byteLength < n + (r || 0)) throw new RangeError("'length' is out of bounds");
                    return e = void 0 === n && void 0 === r ? new Uint8Array(e) : void 0 === r ? new Uint8Array(e, n) : new Uint8Array(e, n, r), s.TYPED_ARRAY_SUPPORT ? (t = e).__proto__ = s.prototype : t = l(t, e), t
                }(t, e, n, r) : "string" == typeof e ? function(t, e, n) {
                    if ("string" == typeof n && "" !== n || (n = "utf8"), !s.isEncoding(n)) throw new TypeError('"encoding" must be a valid string encoding');
                    var r = 0 | v(e, n),
                        i = (t = o(t, r)).write(e, n);
                    return i !== r && (t = t.slice(0, i)), t
                }(t, e, n) : function(t, e) {
                    if (s.isBuffer(e)) {
                        var n = 0 | y(e.length);
                        return 0 === (t = o(t, n)).length || e.copy(t, 0, 0, n), t
                    }
                    if (e) {
                        if ("undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || "length" in e) return "number" != typeof e.length || function(t) {
                            return t != t
                        }(e.length) ? o(t, 0) : l(t, e);
                        if ("Buffer" === e.type && $(e.data)) return l(t, e.data)
                    }
                    throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
                }(t, e)
            }

            function u(t) {
                if ("number" != typeof t) throw new TypeError('"size" argument must be a number');
                if (t < 0) throw new RangeError('"size" argument must not be negative')
            }

            function h(t, e) {
                if (u(e), t = o(t, e < 0 ? 0 : 0 | y(e)), !s.TYPED_ARRAY_SUPPORT)
                    for (var n = 0; n < e; ++n) t[n] = 0;
                return t
            }

            function l(t, e) {
                var n = e.length < 0 ? 0 : 0 | y(e.length);
                t = o(t, n);
                for (var r = 0; r < n; r += 1) t[r] = 255 & e[r];
                return t
            }

            function y(t) {
                if (t >= i()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i().toString(16) + " bytes");
                return 0 | t
            }

            function v(t, e) {
                if (s.isBuffer(t)) return t.length;
                if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;
                "string" != typeof t && (t = "" + t);
                var n = t.length;
                if (0 === n) return 0;
                for (var r = !1;;) switch (e) {
                    case "ascii":
                    case "latin1":
                    case "binary":
                        return n;
                    case "utf8":
                    case "utf-8":
                    case void 0:
                        return J(t).length;
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return 2 * n;
                    case "hex":
                        return n >>> 1;
                    case "base64":
                        return G(t).length;
                    default:
                        if (r) return J(t).length;
                        e = ("" + e).toLowerCase(), r = !0
                }
            }

            function m(t, e, n) {
                var r = t[e];
                t[e] = t[n], t[n] = r
            }

            function w(t, e, n, r, i) {
                if (0 === t.length) return -1;
                if ("string" == typeof n ? (r = n, n = 0) : 2147483647 < n ? n = 2147483647 : n < -2147483648 && (n = -2147483648), n = +n, isNaN(n) && (n = i ? 0 : t.length - 1), n < 0 && (n = t.length + n), n >= t.length) {
                    if (i) return -1;
                    n = t.length - 1
                } else if (n < 0) {
                    if (!i) return -1;
                    n = 0
                }
                if ("string" == typeof e && (e = s.from(e, r)), s.isBuffer(e)) return 0 === e.length ? -1 : _(t, e, n, r, i);
                if ("number" == typeof e) return e &= 255, s.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? i ? Uint8Array.prototype.indexOf.call(t, e, n) : Uint8Array.prototype.lastIndexOf.call(t, e, n) : _(t, [e], n, r, i);
                throw new TypeError("val must be string, number or Buffer")
            }

            function _(t, e, n, r, i) {
                function o(t, e) {
                    return 1 === s ? t[e] : t.readUInt16BE(e * s)
                }
                var c, s = 1,
                    a = t.length,
                    u = e.length;
                if (void 0 !== r && ("ucs2" === (r = String(r).toLowerCase()) || "ucs-2" === r || "utf16le" === r || "utf-16le" === r)) {
                    if (t.length < 2 || e.length < 2) return -1;
                    a /= s = 2, u /= 2, n /= 2
                }
                if (i) {
                    var h = -1;
                    for (c = n; c < a; c++)
                        if (o(t, c) === o(e, -1 === h ? 0 : c - h)) {
                            if (-1 === h && (h = c), c - h + 1 === u) return h * s
                        } else - 1 !== h && (c -= c - h), h = -1
                } else
                    for (a < n + u && (n = a - u), c = n; 0 <= c; c--) {
                        for (var f = !0, l = 0; l < u; l++)
                            if (o(t, c + l) !== o(e, l)) {
                                f = !1;
                                break
                            } if (f) return c
                    }
                return -1
            }

            function S(t, e, n, r) {
                n = Number(n) || 0;
                var i = t.length - n;
                r ? i < (r = Number(r)) && (r = i) : r = i;
                var o = e.length;
                if (o % 2 != 0) throw new TypeError("Invalid hex string");
                o / 2 < r && (r = o / 2);
                for (var s = 0; s < r; ++s) {
                    var a = parseInt(e.substr(2 * s, 2), 16);
                    if (isNaN(a)) return s;
                    t[n + s] = a
                }
                return s
            }

            function k(t, e, n, r) {
                return W(J(e, t.length - n), t, n, r)
            }

            function T(t, e, n, r) {
                return W(function(t) {
                    for (var e = [], n = 0; n < t.length; ++n) e.push(255 & t.charCodeAt(n));
                    return e
                }(e), t, n, r)
            }

            function A(t, e, n, r) {
                return T(t, e, n, r)
            }

            function E(t, e, n, r) {
                return W(G(e), t, n, r)
            }

            function x(t, e, n, r) {
                return W(function(t, e) {
                    for (var n, r, i, o = [], s = 0; s < t.length && !((e -= 2) < 0); ++s) n = t.charCodeAt(s), r = n >> 8, i = n % 256, o.push(i), o.push(r);
                    return o
                }(e, t.length - n), t, n, r)
            }

            function C(t, e, n) {
                return 0 === e && n === t.length ? Z.fromByteArray(t) : Z.fromByteArray(t.slice(e, n))
            }

            function P(t, e, n) {
                n = Math.min(t.length, n);
                for (var r = [], i = e; i < n;) {
                    var u, c, h, f, o = t[i],
                        s = null,
                        a = 239 < o ? 4 : 223 < o ? 3 : 191 < o ? 2 : 1;
                    if (i + a <= n) switch (a) {
                        case 1:
                            o < 128 && (s = o);
                            break;
                        case 2:
                            128 == (192 & (u = t[i + 1])) && (127 < (f = (31 & o) << 6 | 63 & u) && (s = f));
                            break;
                        case 3:
                            u = t[i + 1], c = t[i + 2], 128 == (192 & u) && 128 == (192 & c) && (2047 < (f = (15 & o) << 12 | (63 & u) << 6 | 63 & c) && (f < 55296 || 57343 < f) && (s = f));
                            break;
                        case 4:
                            u = t[i + 1], c = t[i + 2], h = t[i + 3], 128 == (192 & u) && 128 == (192 & c) && 128 == (192 & h) && (65535 < (f = (15 & o) << 18 | (63 & u) << 12 | (63 & c) << 6 | 63 & h) && f < 1114112 && (s = f))
                    }
                    null === s ? (s = 65533, a = 1) : 65535 < s && (s -= 65536, r.push(s >>> 10 & 1023 | 55296), s = 56320 | 1023 & s), r.push(s), i += a
                }
                return function(t) {
                    var e = t.length;
                    if (e <= tt) return String.fromCharCode.apply(String, t);
                    for (var n = "", r = 0; r < e;) n += String.fromCharCode.apply(String, t.slice(r, r += tt));
                    return n
                }(r)
            }

            function O(t, e, n) {
                var r = "";
                n = Math.min(t.length, n);
                for (var i = e; i < n; ++i) r += String.fromCharCode(127 & t[i]);
                return r
            }

            function M(t, e, n) {
                var r = "";
                n = Math.min(t.length, n);
                for (var i = e; i < n; ++i) r += String.fromCharCode(t[i]);
                return r
            }

            function U(t, e, n) {
                var r = t.length;
                (!e || e < 0) && (e = 0), (!n || n < 0 || r < n) && (n = r);
                for (var i = "", o = e; o < n; ++o) i += F(t[o]);
                return i
            }

            function L(t, e, n) {
                for (var r = t.slice(e, n), i = "", o = 0; o < r.length; o += 2) i += String.fromCharCode(r[o] + 256 * r[o + 1]);
                return i
            }

            function B(t, e, n) {
                if (t % 1 != 0 || t < 0) throw new RangeError("offset is not uint");
                if (n < t + e) throw new RangeError("Trying to access beyond buffer length")
            }

            function I(t, e, n, r, i, o) {
                if (!s.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');
                if (i < e || e < o) throw new RangeError('"value" argument is out of bounds');
                if (n + r > t.length) throw new RangeError("Index out of range")
            }

            function N(t, e, n, r) {
                e < 0 && (e = 65535 + e + 1);
                for (var i = 0, o = Math.min(t.length - n, 2); i < o; ++i) t[n + i] = (e & 255 << 8 * (r ? i : 1 - i)) >>> 8 * (r ? i : 1 - i)
            }

            function D(t, e, n, r) {
                e < 0 && (e = 4294967295 + e + 1);
                for (var i = 0, o = Math.min(t.length - n, 4); i < o; ++i) t[n + i] = e >>> 8 * (r ? i : 3 - i) & 255
            }

            function j(t, e, n, r, i, o) {
                if (n + r > t.length) throw new RangeError("Index out of range");
                if (n < 0) throw new RangeError("Index out of range")
            }

            function Y(t, e, n, r, i) {
                return i || j(t, 0, n, 4), Q.write(t, e, n, r, 23, 4), n + 4
            }

            function z(t, e, n, r, i) {
                return i || j(t, 0, n, 8), Q.write(t, e, n, r, 52, 8), n + 8
            }

            function F(t) {
                return t < 16 ? "0" + t.toString(16) : t.toString(16)
            }

            function J(t, e) {
                e = e || 1 / 0;
                for (var n, r = t.length, i = null, o = [], s = 0; s < r; ++s) {
                    if (55295 < (n = t.charCodeAt(s)) && n < 57344) {
                        if (!i) {
                            if (56319 < n) {
                                -1 < (e -= 3) && o.push(239, 191, 189);
                                continue
                            }
                            if (s + 1 === r) {
                                -1 < (e -= 3) && o.push(239, 191, 189);
                                continue
                            }
                            i = n;
                            continue
                        }
                        if (n < 56320) {
                            -1 < (e -= 3) && o.push(239, 191, 189), i = n;
                            continue
                        }
                        n = 65536 + (i - 55296 << 10 | n - 56320)
                    } else i && -1 < (e -= 3) && o.push(239, 191, 189);
                    if (i = null, n < 128) {
                        if ((e -= 1) < 0) break;
                        o.push(n)
                    } else if (n < 2048) {
                        if ((e -= 2) < 0) break;
                        o.push(n >> 6 | 192, 63 & n | 128)
                    } else if (n < 65536) {
                        if ((e -= 3) < 0) break;
                        o.push(n >> 12 | 224, n >> 6 & 63 | 128, 63 & n | 128)
                    } else {
                        if (!(n < 1114112)) throw new Error("Invalid code point");
                        if ((e -= 4) < 0) break;
                        o.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128)
                    }
                }
                return o
            }

            function G(t) {
                return Z.toByteArray(function(t) {
                    if ((t = function(t) {
                            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
                        }(t).replace(et, "")).length < 2) return "";
                    for (; t.length % 4 != 0;) t += "=";
                    return t
                }(t))
            }

            function W(t, e, n, r) {
                for (var i = 0; i < r && !(i + n >= e.length || i >= t.length); ++i) e[i + n] = t[i];
                return i
            }
            var Z = n(59),
                Q = n(60),
                $ = n(61);
            e.Buffer = s, e.SlowBuffer = function(t) {
                return +t != t && (t = 0), s.alloc(+t)
            }, e.INSPECT_MAX_BYTES = 50, s.TYPED_ARRAY_SUPPORT = void 0 !== window.TYPED_ARRAY_SUPPORT ? window.TYPED_ARRAY_SUPPORT : function() {
                try {
                    var t = new Uint8Array(1);
                    return t.__proto__ = {
                        __proto__: Uint8Array.prototype,
                        foo: function() {
                            return 42
                        }
                    }, 42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength
                } catch (t) {
                    return !1
                }
            }(), e.kMaxLength = i(), s.poolSize = 8192, s._augment = function(t) {
                return t.__proto__ = s.prototype, t
            }, s.from = function(t, e, n) {
                return a(null, t, e, n)
            }, s.TYPED_ARRAY_SUPPORT && (s.prototype.__proto__ = Uint8Array.prototype, s.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && s[Symbol.species] === s && Object.defineProperty(s, Symbol.species, {
                value: null,
                configurable: !0
            })), s.alloc = function(t, e, n) {
                return function(t, e, n, r) {
                    return u(e), e <= 0 ? o(t, e) : void 0 !== n ? "string" == typeof r ? o(t, e).fill(n, r) : o(t, e).fill(n) : o(t, e)
                }(null, t, e, n)
            }, s.allocUnsafe = function(t) {
                return h(null, t)
            }, s.allocUnsafeSlow = function(t) {
                return h(null, t)
            }, s.isBuffer = function(t) {
                return !(null == t || !t._isBuffer)
            }, s.compare = function(t, e) {
                if (!s.isBuffer(t) || !s.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
                if (t === e) return 0;
                for (var n = t.length, r = e.length, i = 0, o = Math.min(n, r); i < o; ++i)
                    if (t[i] !== e[i]) {
                        n = t[i], r = e[i];
                        break
                    } return n < r ? -1 : r < n ? 1 : 0
            }, s.isEncoding = function(t) {
                switch (String(t).toLowerCase()) {
                    case "hex":
                    case "utf8":
                    case "utf-8":
                    case "ascii":
                    case "latin1":
                    case "binary":
                    case "base64":
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return !0;
                    default:
                        return !1
                }
            }, s.concat = function(t, e) {
                if (!$(t)) throw new TypeError('"list" argument must be an Array of Buffers');
                if (0 === t.length) return s.alloc(0);
                var n;
                if (void 0 === e)
                    for (n = e = 0; n < t.length; ++n) e += t[n].length;
                var r = s.allocUnsafe(e),
                    i = 0;
                for (n = 0; n < t.length; ++n) {
                    var o = t[n];
                    if (!s.isBuffer(o)) throw new TypeError('"list" argument must be an Array of Buffers');
                    o.copy(r, i), i += o.length
                }
                return r
            }, s.byteLength = v, s.prototype._isBuffer = !0, s.prototype.swap16 = function() {
                var t = this.length;
                if (t % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                for (var e = 0; e < t; e += 2) m(this, e, e + 1);
                return this
            }, s.prototype.swap32 = function() {
                var t = this.length;
                if (t % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                for (var e = 0; e < t; e += 4) m(this, e, e + 3), m(this, e + 1, e + 2);
                return this
            }, s.prototype.swap64 = function() {
                var t = this.length;
                if (t % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                for (var e = 0; e < t; e += 8) m(this, e, e + 7), m(this, e + 1, e + 6), m(this, e + 2, e + 5), m(this, e + 3, e + 4);
                return this
            }, s.prototype.toString = function() {
                var t = 0 | this.length;
                return 0 === t ? "" : 0 === arguments.length ? P(this, 0, t) : function(t, e, n) {
                    var r = !1;
                    if ((void 0 === e || e < 0) && (e = 0), e > this.length) return "";
                    if ((void 0 === n || n > this.length) && (n = this.length), n <= 0) return "";
                    if ((n >>>= 0) <= (e >>>= 0)) return "";
                    for (t || (t = "utf8");;) switch (t) {
                        case "hex":
                            return U(this, e, n);
                        case "utf8":
                        case "utf-8":
                            return P(this, e, n);
                        case "ascii":
                            return O(this, e, n);
                        case "latin1":
                        case "binary":
                            return M(this, e, n);
                        case "base64":
                            return C(this, e, n);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return L(this, e, n);
                        default:
                            if (r) throw new TypeError("Unknown encoding: " + t);
                            t = (t + "").toLowerCase(), r = !0
                    }
                }.apply(this, arguments)
            }, s.prototype.equals = function(t) {
                if (!s.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                return this === t || 0 === s.compare(this, t)
            }, s.prototype.inspect = function() {
                var t = "",
                    n = e.INSPECT_MAX_BYTES;
                return 0 < this.length && (t = this.toString("hex", 0, n).match(/.{2}/g).join(" "), this.length > n && (t += " ... ")), "<Buffer " + t + ">"
            }, s.prototype.compare = function(t, e, n, r, i) {
                if (!s.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
                if (void 0 === e && (e = 0), void 0 === n && (n = t ? t.length : 0), void 0 === r && (r = 0), void 0 === i && (i = this.length), e < 0 || n > t.length || r < 0 || i > this.length) throw new RangeError("out of range index");
                if (i <= r && n <= e) return 0;
                if (i <= r) return -1;
                if (n <= e) return 1;
                if (this === t) return 0;
                for (var o = (i >>>= 0) - (r >>>= 0), a = (n >>>= 0) - (e >>>= 0), u = Math.min(o, a), c = this.slice(r, i), h = t.slice(e, n), f = 0; f < u; ++f)
                    if (c[f] !== h[f]) {
                        o = c[f], a = h[f];
                        break
                    } return o < a ? -1 : a < o ? 1 : 0
            }, s.prototype.includes = function(t, e, n) {
                return -1 !== this.indexOf(t, e, n)
            }, s.prototype.indexOf = function(t, e, n) {
                return w(this, t, e, n, !0)
            }, s.prototype.lastIndexOf = function(t, e, n) {
                return w(this, t, e, n, !1)
            }, s.prototype.write = function(t, e, n, r) {
                if (void 0 === e) r = "utf8", n = this.length, e = 0;
                else if (void 0 === n && "string" == typeof e) r = e, n = this.length, e = 0;
                else {
                    if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                    e |= 0, isFinite(n) ? (n |= 0, void 0 === r && (r = "utf8")) : (r = n, n = void 0)
                }
                var i = this.length - e;
                if ((void 0 === n || i < n) && (n = i), 0 < t.length && (n < 0 || e < 0) || e > this.length) throw new RangeError("Attempt to write outside buffer bounds");
                r || (r = "utf8");
                for (var o = !1;;) switch (r) {
                    case "hex":
                        return S(this, t, e, n);
                    case "utf8":
                    case "utf-8":
                        return k(this, t, e, n);
                    case "ascii":
                        return T(this, t, e, n);
                    case "latin1":
                    case "binary":
                        return A(this, t, e, n);
                    case "base64":
                        return E(this, t, e, n);
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return x(this, t, e, n);
                    default:
                        if (o) throw new TypeError("Unknown encoding: " + r);
                        r = ("" + r).toLowerCase(), o = !0
                }
            }, s.prototype.toJSON = function() {
                return {
                    type: "Buffer",
                    data: Array.prototype.slice.call(this._arr || this, 0)
                }
            };
            var tt = 4096;
            s.prototype.slice = function(t, e) {
                var r, n = this.length;
                if ((t = ~~t) < 0 ? (t += n) < 0 && (t = 0) : n < t && (t = n), (e = void 0 === e ? n : ~~e) < 0 ? (e += n) < 0 && (e = 0) : n < e && (e = n), e < t && (e = t), s.TYPED_ARRAY_SUPPORT)(r = this.subarray(t, e)).__proto__ = s.prototype;
                else {
                    var i = e - t;
                    r = new s(i, void 0);
                    for (var o = 0; o < i; ++o) r[o] = this[o + t]
                }
                return r
            }, s.prototype.readUIntLE = function(t, e, n) {
                t |= 0, e |= 0, n || B(t, e, this.length);
                for (var r = this[t], i = 1, o = 0; ++o < e && (i *= 256);) r += this[t + o] * i;
                return r
            }, s.prototype.readUIntBE = function(t, e, n) {
                t |= 0, e |= 0, n || B(t, e, this.length);
                for (var r = this[t + --e], i = 1; 0 < e && (i *= 256);) r += this[t + --e] * i;
                return r
            }, s.prototype.readUInt8 = function(t, e) {
                return e || B(t, 1, this.length), this[t]
            }, s.prototype.readUInt16LE = function(t, e) {
                return e || B(t, 2, this.length), this[t] | this[t + 1] << 8
            }, s.prototype.readUInt16BE = function(t, e) {
                return e || B(t, 2, this.length), this[t] << 8 | this[t + 1]
            }, s.prototype.readUInt32LE = function(t, e) {
                return e || B(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
            }, s.prototype.readUInt32BE = function(t, e) {
                return e || B(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
            }, s.prototype.readIntLE = function(t, e, n) {
                t |= 0, e |= 0, n || B(t, e, this.length);
                for (var r = this[t], i = 1, o = 0; ++o < e && (i *= 256);) r += this[t + o] * i;
                return (i *= 128) <= r && (r -= Math.pow(2, 8 * e)), r
            }, s.prototype.readIntBE = function(t, e, n) {
                t |= 0, e |= 0, n || B(t, e, this.length);
                for (var r = e, i = 1, o = this[t + --r]; 0 < r && (i *= 256);) o += this[t + --r] * i;
                return (i *= 128) <= o && (o -= Math.pow(2, 8 * e)), o
            }, s.prototype.readInt8 = function(t, e) {
                return e || B(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t]
            }, s.prototype.readInt16LE = function(t, e) {
                e || B(t, 2, this.length);
                var n = this[t] | this[t + 1] << 8;
                return 32768 & n ? 4294901760 | n : n
            }, s.prototype.readInt16BE = function(t, e) {
                e || B(t, 2, this.length);
                var n = this[t + 1] | this[t] << 8;
                return 32768 & n ? 4294901760 | n : n
            }, s.prototype.readInt32LE = function(t, e) {
                return e || B(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
            }, s.prototype.readInt32BE = function(t, e) {
                return e || B(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
            }, s.prototype.readFloatLE = function(t, e) {
                return e || B(t, 4, this.length), Q.read(this, t, !0, 23, 4)
            }, s.prototype.readFloatBE = function(t, e) {
                return e || B(t, 4, this.length), Q.read(this, t, !1, 23, 4)
            }, s.prototype.readDoubleLE = function(t, e) {
                return e || B(t, 8, this.length), Q.read(this, t, !0, 52, 8)
            }, s.prototype.readDoubleBE = function(t, e) {
                return e || B(t, 8, this.length), Q.read(this, t, !1, 52, 8)
            }, s.prototype.writeUIntLE = function(t, e, n, r) {
                (t = +t, e |= 0, n |= 0, r) || I(this, t, e, n, Math.pow(2, 8 * n) - 1, 0);
                var o = 1,
                    s = 0;
                for (this[e] = 255 & t; ++s < n && (o *= 256);) this[e + s] = t / o & 255;
                return e + n
            }, s.prototype.writeUIntBE = function(t, e, n, r) {
                (t = +t, e |= 0, n |= 0, r) || I(this, t, e, n, Math.pow(2, 8 * n) - 1, 0);
                var o = n - 1,
                    s = 1;
                for (this[e + o] = 255 & t; 0 <= --o && (s *= 256);) this[e + o] = t / s & 255;
                return e + n
            }, s.prototype.writeUInt8 = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 1, 255, 0), s.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), this[e] = 255 & t, e + 1
            }, s.prototype.writeUInt16LE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : N(this, t, e, !0), e + 2
            }, s.prototype.writeUInt16BE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 2, 65535, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : N(this, t, e, !1), e + 2
            }, s.prototype.writeUInt32LE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = 255 & t) : D(this, t, e, !0), e + 4
            }, s.prototype.writeUInt32BE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 4, 4294967295, 0), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : D(this, t, e, !1), e + 4
            }, s.prototype.writeIntLE = function(t, e, n, r) {
                if (t = +t, e |= 0, !r) {
                    var i = Math.pow(2, 8 * n - 1);
                    I(this, t, e, n, i - 1, -i)
                }
                var o = 0,
                    s = 1,
                    a = 0;
                for (this[e] = 255 & t; ++o < n && (s *= 256);) t < 0 && 0 === a && 0 !== this[e + o - 1] && (a = 1), this[e + o] = (t / s >> 0) - a & 255;
                return e + n
            }, s.prototype.writeIntBE = function(t, e, n, r) {
                if (t = +t, e |= 0, !r) {
                    var i = Math.pow(2, 8 * n - 1);
                    I(this, t, e, n, i - 1, -i)
                }
                var o = n - 1,
                    s = 1,
                    a = 0;
                for (this[e + o] = 255 & t; 0 <= --o && (s *= 256);) t < 0 && 0 === a && 0 !== this[e + o + 1] && (a = 1), this[e + o] = (t / s >> 0) - a & 255;
                return e + n
            }, s.prototype.writeInt8 = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 1, 127, -128), s.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), t < 0 && (t = 255 + t + 1), this[e] = 255 & t, e + 1
            }, s.prototype.writeInt16LE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : N(this, t, e, !0), e + 2
            }, s.prototype.writeInt16BE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 2, 32767, -32768), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : N(this, t, e, !1), e + 2
            }, s.prototype.writeInt32LE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 4, 2147483647, -2147483648), s.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24) : D(this, t, e, !0), e + 4
            }, s.prototype.writeInt32BE = function(t, e, n) {
                return t = +t, e |= 0, n || I(this, t, e, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), s.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : D(this, t, e, !1), e + 4
            }, s.prototype.writeFloatLE = function(t, e, n) {
                return Y(this, t, e, !0, n)
            }, s.prototype.writeFloatBE = function(t, e, n) {
                return Y(this, t, e, !1, n)
            }, s.prototype.writeDoubleLE = function(t, e, n) {
                return z(this, t, e, !0, n)
            }, s.prototype.writeDoubleBE = function(t, e, n) {
                return z(this, t, e, !1, n)
            }, s.prototype.copy = function(t, e, n, r) {
                if (n || (n = 0), r || 0 === r || (r = this.length), e >= t.length && (e = t.length), e || (e = 0), 0 < r && r < n && (r = n), r === n) return 0;
                if (0 === t.length || 0 === this.length) return 0;
                if (e < 0) throw new RangeError("targetStart out of bounds");
                if (n < 0 || n >= this.length) throw new RangeError("sourceStart out of bounds");
                if (r < 0) throw new RangeError("sourceEnd out of bounds");
                r > this.length && (r = this.length), t.length - e < r - n && (r = t.length - e + n);
                var i, o = r - n;
                if (this === t && n < e && e < r)
                    for (i = o - 1; 0 <= i; --i) t[i + e] = this[i + n];
                else if (o < 1e3 || !s.TYPED_ARRAY_SUPPORT)
                    for (i = 0; i < o; ++i) t[i + e] = this[i + n];
                else Uint8Array.prototype.set.call(t, this.subarray(n, n + o), e);
                return o
            }, s.prototype.fill = function(t, e, n, r) {
                if ("string" == typeof t) {
                    if ("string" == typeof e ? (r = e, e = 0, n = this.length) : "string" == typeof n && (r = n, n = this.length), 1 === t.length) {
                        var i = t.charCodeAt(0);
                        i < 256 && (t = i)
                    }
                    if (void 0 !== r && "string" != typeof r) throw new TypeError("encoding must be a string");
                    if ("string" == typeof r && !s.isEncoding(r)) throw new TypeError("Unknown encoding: " + r)
                } else "number" == typeof t && (t &= 255);
                if (e < 0 || this.length < e || this.length < n) throw new RangeError("Out of range index");
                if (n <= e) return this;
                var o;
                if (e >>>= 0, n = void 0 === n ? this.length : n >>> 0, t || (t = 0), "number" == typeof t)
                    for (o = e; o < n; ++o) this[o] = t;
                else {
                    var a = s.isBuffer(t) ? t : J(new s(t, r).toString()),
                        u = a.length;
                    for (o = 0; o < n - e; ++o) this[o + e] = a[o % u]
                }
                return this
            };
            var et = /[^+\/0-9A-Za-z-_]/g
        }, function(t, e) {
            "use strict";

            function n(t) {
                var e = t.length;
                if (0 < e % 4) throw new Error("Invalid string. Length must be a multiple of 4");
                var n = t.indexOf("=");
                return -1 === n && (n = e), [n, n === e ? 0 : 4 - n % 4]
            }

            function s(t) {
                return c[t >> 18 & 63] + c[t >> 12 & 63] + c[t >> 6 & 63] + c[63 & t]
            }

            function a(t, e, n) {
                for (var r, i = [], o = e; o < n; o += 3) r = (t[o] << 16 & 16711680) + (t[o + 1] << 8 & 65280) + (255 & t[o + 2]), i.push(s(r));
                return i.join("")
            }
            e.byteLength = function(t) {
                var e = n(t),
                    r = e[0],
                    i = e[1];
                return 3 * (r + i) / 4 - i
            }, e.toByteArray = function(t) {
                for (var e, r = n(t), o = r[0], s = r[1], a = new f(function(t, e, n) {
                        return 3 * (e + n) / 4 - n
                    }(0, o, s)), u = 0, c = 0 < s ? o - 4 : o, l = 0; l < c; l += 4) e = h[t.charCodeAt(l)] << 18 | h[t.charCodeAt(l + 1)] << 12 | h[t.charCodeAt(l + 2)] << 6 | h[t.charCodeAt(l + 3)], a[u++] = e >> 16 & 255, a[u++] = e >> 8 & 255, a[u++] = 255 & e;
                return 2 === s && (e = h[t.charCodeAt(l)] << 2 | h[t.charCodeAt(l + 1)] >> 4, a[u++] = 255 & e), 1 === s && (e = h[t.charCodeAt(l)] << 10 | h[t.charCodeAt(l + 1)] << 4 | h[t.charCodeAt(l + 2)] >> 2, a[u++] = e >> 8 & 255, a[u++] = 255 & e), a
            }, e.fromByteArray = function(t) {
                for (var e, n = t.length, r = n % 3, i = [], o = 16383, s = 0, u = n - r; s < u; s += o) i.push(a(t, s, u < s + o ? u : s + o));
                return 1 === r ? (e = t[n - 1], i.push(c[e >> 2] + c[e << 4 & 63] + "==")) : 2 === r && (e = (t[n - 2] << 8) + t[n - 1], i.push(c[e >> 10] + c[e >> 4 & 63] + c[e << 2 & 63] + "=")), i.join("")
            };
            for (var c = [], h = [], f = "undefined" != typeof Uint8Array ? Uint8Array : Array, l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", p = 0, d = l.length; p < d; ++p) c[p] = l[p], h[l.charCodeAt(p)] = p;
            h["-".charCodeAt(0)] = 62, h["_".charCodeAt(0)] = 63
        }, function(t, e) {
            e.read = function(t, e, n, r, i) {
                var o, s, a = 8 * i - r - 1,
                    u = (1 << a) - 1,
                    c = u >> 1,
                    h = -7,
                    f = n ? i - 1 : 0,
                    l = n ? -1 : 1,
                    p = t[e + f];
                for (f += l, o = p & (1 << -h) - 1, p >>= -h, h += a; 0 < h; o = 256 * o + t[e + f], f += l, h -= 8);
                for (s = o & (1 << -h) - 1, o >>= -h, h += r; 0 < h; s = 256 * s + t[e + f], f += l, h -= 8);
                if (0 === o) o = 1 - c;
                else {
                    if (o === u) return s ? NaN : 1 / 0 * (p ? -1 : 1);
                    s += Math.pow(2, r), o -= c
                }
                return (p ? -1 : 1) * s * Math.pow(2, o - r)
            }, e.write = function(t, e, n, r, i, o) {
                var s, a, u, c = 8 * o - i - 1,
                    h = (1 << c) - 1,
                    f = h >> 1,
                    l = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                    p = r ? 0 : o - 1,
                    d = r ? 1 : -1,
                    y = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
                for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = h) : (s = Math.floor(Math.log(e) / Math.LN2), e * (u = Math.pow(2, -s)) < 1 && (s--, u *= 2), 2 <= (e += 1 <= s + f ? l / u : l * Math.pow(2, 1 - f)) * u && (s++, u /= 2), h <= s + f ? (a = 0, s = h) : 1 <= s + f ? (a = (e * u - 1) * Math.pow(2, i), s += f) : (a = e * Math.pow(2, f - 1) * Math.pow(2, i), s = 0)); 8 <= i; t[n + p] = 255 & a, p += d, a /= 256, i -= 8);
                for (s = s << i | a, c += i; 0 < c; t[n + p] = 255 & s, p += d, s /= 256, c -= 8);
                t[n + p - d] |= 128 * y
            }
        }, function(t, e) {
            var n = {}.toString;
            t.exports = Array.isArray || function(t) {
                return "[object Array]" == n.call(t)
            }
        }, function(t, e, n) {
            "use strict";
            var r = this && this.__extends || function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    for (var r in e) e.hasOwnProperty(r) && (t[r] = e[r]);
                    t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                },
                i = n(24),
                o = n(12),
                s = n(8),
                a = n(9),
                u = n(2),
                c = function(t) {
                    function e(e, n) {
                        var r = this;
                        t.call(this), this.key = e, this.options = n || {}, this.state = "initialized", this.connection = null, this.usingTLS = !!n.useTLS, this.timeline = this.options.timeline, this.errorCallbacks = this.buildErrorCallbacks(), this.connectionCallbacks = this.buildConnectionCallbacks(this.errorCallbacks), this.handshakeCallbacks = this.buildHandshakeCallbacks(this.errorCallbacks);
                        var i = u.default.getNetwork();
                        i.bind("online", function() {
                            r.timeline.info({
                                netinfo: "online"
                            }), "connecting" !== r.state && "unavailable" !== r.state || r.retryIn(0)
                        }), i.bind("offline", function() {
                            r.timeline.info({
                                netinfo: "offline"
                            }), r.connection && r.sendActivityCheck()
                        }), this.updateStrategy()
                    }
                    return r(e, t), e.prototype.connect = function() {
                        if (!this.connection && !this.runner) {
                            if (!this.strategy.isSupported()) return void this.updateState("failed");
                            this.updateState("connecting"), this.startConnecting(), this.setUnavailableTimer()
                        }
                    }, e.prototype.send = function(t) {
                        return !!this.connection && this.connection.send(t)
                    }, e.prototype.send_event = function(t, e, n) {
                        return !!this.connection && this.connection.send_event(t, e, n)
                    }, e.prototype.disconnect = function() {
                        this.disconnectInternally(), this.updateState("disconnected")
                    }, e.prototype.isUsingTLS = function() {
                        return this.usingTLS
                    }, e.prototype.startConnecting = function() {
                        var t = this;
                        this.runner = this.strategy.connect(0, function e(n, r) {
                            n ? t.runner = t.strategy.connect(0, e) : "error" === r.action ? (t.emit("error", {
                                type: "HandshakeError",
                                error: r.error
                            }), t.timeline.error({
                                handshakeError: r.error
                            })) : (t.abortConnecting(), t.handshakeCallbacks[r.action](r))
                        })
                    }, e.prototype.abortConnecting = function() {
                        this.runner && (this.runner.abort(), this.runner = null)
                    }, e.prototype.disconnectInternally = function() {
                        (this.abortConnecting(), this.clearRetryTimer(), this.clearUnavailableTimer(), this.connection) && this.abandonConnection().close()
                    }, e.prototype.updateStrategy = function() {
                        this.strategy = this.options.getStrategy({
                            key: this.key,
                            timeline: this.timeline,
                            useTLS: this.usingTLS
                        })
                    }, e.prototype.retryIn = function(t) {
                        var e = this;
                        this.timeline.info({
                            action: "retry",
                            delay: t
                        }), 0 < t && this.emit("connecting_in", Math.round(t / 1e3)), this.retryTimer = new o.OneOffTimer(t || 0, function() {
                            e.disconnectInternally(), e.connect()
                        })
                    }, e.prototype.clearRetryTimer = function() {
                        this.retryTimer && (this.retryTimer.ensureAborted(), this.retryTimer = null)
                    }, e.prototype.setUnavailableTimer = function() {
                        var t = this;
                        this.unavailableTimer = new o.OneOffTimer(this.options.unavailableTimeout, function() {
                            t.updateState("unavailable")
                        })
                    }, e.prototype.clearUnavailableTimer = function() {
                        this.unavailableTimer && this.unavailableTimer.ensureAborted()
                    }, e.prototype.sendActivityCheck = function() {
                        var t = this;
                        this.stopActivityCheck(), this.connection.ping(), this.activityTimer = new o.OneOffTimer(this.options.pongTimeout, function() {
                            t.timeline.error({
                                pong_timed_out: t.options.pongTimeout
                            }), t.retryIn(0)
                        })
                    }, e.prototype.resetActivityCheck = function() {
                        var t = this;
                        this.stopActivityCheck(), this.connection && !this.connection.handlesActivityChecks() && (this.activityTimer = new o.OneOffTimer(this.activityTimeout, function() {
                            t.sendActivityCheck()
                        }))
                    }, e.prototype.stopActivityCheck = function() {
                        this.activityTimer && this.activityTimer.ensureAborted()
                    }, e.prototype.buildConnectionCallbacks = function(t) {
                        var e = this;
                        return a.extend({}, t, {
                            message: function(t) {
                                e.resetActivityCheck(), e.emit("message", t)
                            },
                            ping: function() {
                                e.send_event("pusher:pong", {})
                            },
                            activity: function() {
                                e.resetActivityCheck()
                            },
                            error: function(t) {
                                e.emit("error", {
                                    type: "WebSocketError",
                                    error: t
                                })
                            },
                            closed: function() {
                                e.abandonConnection(), e.shouldRetry() && e.retryIn(1e3)
                            }
                        })
                    }, e.prototype.buildHandshakeCallbacks = function(t) {
                        var e = this;
                        return a.extend({}, t, {
                            connected: function(t) {
                                e.activityTimeout = Math.min(e.options.activityTimeout, t.activityTimeout, t.connection.activityTimeout || 1 / 0), e.clearUnavailableTimer(), e.setConnection(t.connection), e.socket_id = e.connection.id, e.updateState("connected", {
                                    socket_id: e.socket_id
                                })
                            }
                        })
                    }, e.prototype.buildErrorCallbacks = function() {
                        var t = this,
                            e = function(_e) {
                                return function(n) {
                                    n.error && t.emit("error", {
                                        type: "WebSocketError",
                                        error: n.error
                                    }), _e(n)
                                }
                            };
                        return {
                            tls_only: e(function() {
                                t.usingTLS = !0, t.updateStrategy(), t.retryIn(0)
                            }),
                            refused: e(function() {
                                t.disconnect()
                            }),
                            backoff: e(function() {
                                t.retryIn(1e3)
                            }),
                            retry: e(function() {
                                t.retryIn(0)
                            })
                        }
                    }, e.prototype.setConnection = function(t) {
                        for (var e in this.connection = t, this.connectionCallbacks) this.connection.bind(e, this.connectionCallbacks[e]);
                        this.resetActivityCheck()
                    }, e.prototype.abandonConnection = function() {
                        if (this.connection) {
                            for (var t in this.stopActivityCheck(), this.connectionCallbacks) this.connection.unbind(t, this.connectionCallbacks[t]);
                            var e = this.connection;
                            return this.connection = null, e
                        }
                    }, e.prototype.updateState = function(t, e) {
                        var n = this.state;
                        if (n !== (this.state = t)) {
                            var r = t;
                            "connected" === r && (r += " with new socket ID " + e.socket_id), s.default.debug("State changed", n + " -> " + r), this.timeline.info({
                                state: t,
                                params: e
                            }), this.emit("state_change", {
                                previous: n,
                                current: t
                            }), this.emit(t, e)
                        }
                    }, e.prototype.shouldRetry = function() {
                        return "connecting" === this.state || "connected" === this.state
                    }, e
                }(i.default);
            e.__esModule = !0, e.default = c
        }, function(t, e, n) {
            "use strict";
            var i = n(9),
                o = n(43),
                s = n(31),
                a = function() {
                    function t() {
                        this.channels = {}
                    }
                    return t.prototype.add = function(t, e) {
                        return this.channels[t] || (this.channels[t] = function(t, e) {
                            if (0 !== t.indexOf("private-encrypted-")) return 0 === t.indexOf("private-") ? o.default.createPrivateChannel(t, e) : 0 === t.indexOf("presence-") ? o.default.createPresenceChannel(t, e) : o.default.createChannel(t, e);
                            if ("ReactNative" != navigator.product) return o.default.createEncryptedChannel(t, e);
                            throw new s.UnsupportedFeature("Encrypted channels are not yet supported when using React Native builds.")
                        }(t, e)), this.channels[t]
                    }, t.prototype.all = function() {
                        return i.values(this.channels)
                    }, t.prototype.find = function(t) {
                        return this.channels[t]
                    }, t.prototype.remove = function(t) {
                        var e = this.channels[t];
                        return delete this.channels[t], e
                    }, t.prototype.disconnect = function() {
                        i.objectApply(this.channels, function(t) {
                            t.disconnect()
                        })
                    }, t
                }();
            e.__esModule = !0, e.default = a
        }, function(t, e, n) {
            "use strict";

            function r(t, e) {
                return o.default.defer(function() {
                    e(t)
                }), {
                    abort: function() {},
                    forceMinPriority: function() {}
                }
            }
            var i = n(43),
                o = n(11),
                s = n(31),
                a = n(9),
                u = function() {
                    function t(t, e, n, r) {
                        this.name = t, this.priority = e, this.transport = n, this.options = r || {}
                    }
                    return t.prototype.isSupported = function() {
                        return this.transport.isSupported({
                            useTLS: this.options.useTLS
                        })
                    }, t.prototype.connect = function(t, e) {
                        var n = this;
                        if (!this.isSupported()) return r(new s.UnsupportedStrategy, e);
                        if (this.priority < t) return r(new s.TransportPriorityTooLow, e);
                        var o = !1,
                            u = this.transport.createConnection(this.name, this.priority, this.options.key, this.options),
                            c = null,
                            h = function h() {
                                u.unbind("initialized", h), u.connect()
                            },
                            f = function() {
                                c = i.default.createHandshake(u, function(t) {
                                    o = !0, d(), e(null, t)
                                })
                            },
                            l = function(t) {
                                d(), e(t)
                            },
                            p = function() {
                                var t;
                                d(), t = a.safeJSONStringify(u), e(new s.TransportClosed(t))
                            },
                            d = function() {
                                u.unbind("initialized", h), u.unbind("open", f), u.unbind("error", l), u.unbind("closed", p)
                            };
                        return u.bind("initialized", h), u.bind("open", f), u.bind("error", l), u.bind("closed", p), u.initialize(), {
                            abort: function() {
                                o || (d(), c ? c.close() : u.close())
                            },
                            forceMinPriority: function(t) {
                                o || n.priority < t && (c ? c.close() : u.close())
                            }
                        }
                    }, t
                }();
            e.__esModule = !0, e.default = u
        }, function(t, e, n) {
            "use strict";
            var r = n(9),
                i = n(11),
                o = n(12),
                s = function() {
                    function t(t, e) {
                        this.strategies = t, this.loop = Boolean(e.loop), this.failFast = Boolean(e.failFast), this.timeout = e.timeout, this.timeoutLimit = e.timeoutLimit
                    }
                    return t.prototype.isSupported = function() {
                        return r.any(this.strategies, i.default.method("isSupported"))
                    }, t.prototype.connect = function(t, e) {
                        var n = this,
                            r = this.strategies,
                            i = 0,
                            o = this.timeout,
                            s = null;
                        return s = this.tryStrategy(r[i], t, {
                            timeout: o,
                            failFast: this.failFast
                        }, function a(u, c) {
                            c ? e(null, c) : (i += 1, n.loop && (i %= r.length), i < r.length ? (o && (o *= 2, n.timeoutLimit && (o = Math.min(o, n.timeoutLimit))), s = n.tryStrategy(r[i], t, {
                                timeout: o,
                                failFast: n.failFast
                            }, a)) : e(!0))
                        }), {
                            abort: function() {
                                s.abort()
                            },
                            forceMinPriority: function(e) {
                                t = e, s && s.forceMinPriority(e)
                            }
                        }
                    }, t.prototype.tryStrategy = function(t, e, n, r) {
                        var i = null,
                            s = null;
                        return 0 < n.timeout && (i = new o.OneOffTimer(n.timeout, function() {
                            s.abort(), r(!0)
                        })), s = t.connect(e, function(t, e) {
                            t && i && i.isRunning() && !n.failFast || (i && i.ensureAborted(), r(t, e))
                        }), {
                            abort: function() {
                                i && i.ensureAborted(), s.abort()
                            },
                            forceMinPriority: function(t) {
                                s.forceMinPriority(t)
                            }
                        }
                    }, t
                }();
            e.__esModule = !0, e.default = s
        }, function(t, e, n) {
            "use strict";

            function o(t) {
                t.error || t.aborted || (t.abort(), t.aborted = !0)
            }
            var s = n(9),
                a = n(11),
                u = function() {
                    function t(t) {
                        this.strategies = t
                    }
                    return t.prototype.isSupported = function() {
                        return s.any(this.strategies, a.default.method("isSupported"))
                    }, t.prototype.connect = function(t, e) {
                        return function(t, e, n) {
                            var r = s.map(t, function(t, r, i, o) {
                                return t.connect(e, n(r, o))
                            });
                            return {
                                abort: function() {
                                    s.apply(r, o)
                                },
                                forceMinPriority: function(t) {
                                    s.apply(r, function(e) {
                                        e.forceMinPriority(t)
                                    })
                                }
                            }
                        }(this.strategies, t, function(t, n) {
                            return function(r, o) {
                                return (n[t].error = r) ? void(function(t) {
                                    return s.all(t, function(t) {
                                        return Boolean(t.error)
                                    })
                                }(n) && e(!0)) : (s.apply(n, function(t) {
                                    t.forceMinPriority(o.transport.priority)
                                }), void e(null, o))
                            }
                        })
                    }, t
                }();
            e.__esModule = !0, e.default = u
        }, function(t, e, n) {
            "use strict";

            function r(t) {
                return "pusherTransport" + (t ? "TLS" : "NonTLS")
            }

            function i(t) {
                var e = u.default.getLocalStorage();
                if (e) try {
                    var n = e[r(t)];
                    if (n) return JSON.parse(n)
                } catch (e) {
                    s(t)
                }
                return null
            }

            function o(t, e, n) {
                var i = u.default.getLocalStorage();
                if (i) try {
                    i[r(t)] = h.safeJSONStringify({
                        timestamp: a.default.now(),
                        transport: e,
                        latency: n
                    })
                } catch (t) {}
            }

            function s(t) {
                var e = u.default.getLocalStorage();
                if (e) try {
                    delete e[r(t)]
                } catch (t) {}
            }
            var a = n(11),
                u = n(2),
                c = n(65),
                h = n(9),
                f = function() {
                    function t(t, e, n) {
                        this.strategy = t, this.transports = e, this.ttl = n.ttl || 18e5, this.usingTLS = n.useTLS, this.timeline = n.timeline
                    }
                    return t.prototype.isSupported = function() {
                        return this.strategy.isSupported()
                    }, t.prototype.connect = function(t, e) {
                        var n = this.usingTLS,
                            r = i(n),
                            u = [this.strategy];
                        if (r && r.timestamp + this.ttl >= a.default.now()) {
                            var h = this.transports[r.transport];
                            h && (this.timeline.info({
                                cached: !0,
                                transport: r.transport,
                                latency: r.latency
                            }), u.push(new c.default([h], {
                                timeout: 2 * r.latency + 1e3,
                                failFast: !0
                            })))
                        }
                        var f = a.default.now(),
                            l = u.pop().connect(t, function r(i, c) {
                                i ? (s(n), 0 < u.length ? (f = a.default.now(), l = u.pop().connect(t, r)) : e(i)) : (o(n, c.transport.name, a.default.now() - f), e(null, c))
                            });
                        return {
                            abort: function() {
                                l.abort()
                            },
                            forceMinPriority: function(e) {
                                t = e, l && l.forceMinPriority(e)
                            }
                        }
                    }, t
                }();
            e.__esModule = !0, e.default = f
        }, function(t, e, n) {
            "use strict";
            var r = n(12),
                i = function() {
                    function t(t, e) {
                        var n = e.delay;
                        this.strategy = t, this.options = {
                            delay: n
                        }
                    }
                    return t.prototype.isSupported = function() {
                        return this.strategy.isSupported()
                    }, t.prototype.connect = function(t, e) {
                        var n, i = this.strategy,
                            o = new r.OneOffTimer(this.options.delay, function() {
                                n = i.connect(t, e)
                            });
                        return {
                            abort: function() {
                                o.ensureAborted(), n && n.abort()
                            },
                            forceMinPriority: function(e) {
                                t = e, n && n.forceMinPriority(e)
                            }
                        }
                    }, t
                }();
            e.__esModule = !0, e.default = i
        }, function(t, e) {
            "use strict";
            var n = function() {
                function t(t, e, n) {
                    this.test = t, this.trueBranch = e, this.falseBranch = n
                }
                return t.prototype.isSupported = function() {
                    return (this.test() ? this.trueBranch : this.falseBranch).isSupported()
                }, t.prototype.connect = function(t, e) {
                    return (this.test() ? this.trueBranch : this.falseBranch).connect(t, e)
                }, t
            }();
            e.__esModule = !0, e.default = n
        }, function(t, e) {
            "use strict";
            var n = function() {
                function t(t) {
                    this.strategy = t
                }
                return t.prototype.isSupported = function() {
                    return this.strategy.isSupported()
                }, t.prototype.connect = function(t, e) {
                    var n = this.strategy.connect(t, function(t, r) {
                        r && n.abort(), e(t, r)
                    });
                    return n
                }, t
            }();
            e.__esModule = !0, e.default = n
        }, function(t, e, n) {
            "use strict";
            var r = n(5);
            e.getGlobalConfig = function() {
                // return {
                //     wsHost: r.default.host,
                //     wsPort: r.default.ws_port,
                //     wssPort: r.default.wss_port,
                //     wsPath: r.default.ws_path,
                //     httpHost: r.default.sockjs_host,
                //     httpPort: r.default.sockjs_http_port,
                //     httpsPort: r.default.sockjs_https_port,
                //     httpPath: r.default.sockjs_path,
                //     statsHost: r.default.stats_host,
                //     authEndpoint: r.default.channel_auth_endpoint,
                //     authTransport: r.default.channel_auth_transport,
                //     activity_timeout: r.default.activity_timeout,
                //     pong_timeout: r.default.pong_timeout,
                //     unavailable_timeout: r.default.unavailable_timeout
                // }
            }, e.getClusterConfig = function(t) {
                // return {
                //     wsHost: "ws-" + t + ".pusher.com",
                //     httpHost: "sockjs-" + t + ".pusher.com"
                // }
            }
        }])
    });