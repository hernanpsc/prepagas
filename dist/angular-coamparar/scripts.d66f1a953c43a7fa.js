function grupoFamiliar(I,P,G){let e=1,g="",h="",a="",r="",p=G;return 0==P&&0==G?(e=1,g=0,h=0,p=0):P>0&&0==G?(e=2,g=0,h=0,p=0):0==P&&G>=1?(e=1,g=1,h=G-1,p=G):P>0&&G>=1&&(e=2,g=1,h=G-1,p=G),r=parseInt(e)+parseInt(G),numhijo=parseInt(G),a=I<=35&&P<=35?"GEN":"",[e,g,h,p,a,r]}function tipoAsociado(I,P,G){let e="";return"M"===I&&P==G?e="D":"I"===I&&(e="P"),e}function productID(I,P,G,e,g){let h="",a="";tipo=P+G;let r="";return"GEN"==G&&g>0&&(a="GF"),18<=I&&I<=25?(h="1"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):26<=I&&I<=29?(h="2"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):30<=I&&I<=35?(h="3"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):36<=I&&I<=39?(h="4"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):40<=I&&I<=45?(h="5"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):46<=I&&I<=49?(h="6"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):50<=I&&I<=59?(h="7"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):60<=I&&I<=69?(h="8"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo):70<=I&&(h="9"+tipo,hijoId="1H"+tipo,hijo2Id="2H"+tipo),"titular"===e?edadID1=h+a:r=h+a,[edadID1,r,hijoId,hijo2Id]}function productIdGaleno(I,P,G,e){let g=G+"S",h="IND";edadIdGaleno="";let a=P,r=I;return a>r&&(a=I,r=P),a>=18&&(h="MAT"),r<=25?edadIdGaleno=g+h+25+"+"+e+"h":r<=36?edadIdGaleno=g+h+36+"+"+e+"h":r<=64?edadIdGaleno=g+h+64+"+"+e+"h":r<=65&&(edadIdGaleno=g+h+65+"+"+e+"h"),edadIdGaleno}function productIdPremedic(I,P,G,e){let g="";return age2=P,age=I,age2>age&&(age2=I,age=P),age2>=18?age<=29?g=G+"MAT29+"+e+"h":age<=39&&age>=30?g=G+"MAT39+"+e+"h":age<=49&&age>=40?g=G+"MAT49+"+e+"h":age<=59&&age>=50&&(g=G+"MAT59+"+e+"h"):0==age2&&(g=age<=29?G+"IND29+0h":age<=39&&age>=30?G+"IND39+0h":age<=49&&age>=40?G+"IND49+0h":age<=59&&age>=50?G+"IND59+0h":""),g}function productIdOmint(I,P,G){let e="",a="",r="";return e=I>=18&&I<=25?P+25:I>=26&&I<=35?P+35:I>=36&&I<=54?P+54:I>=55&&I<=59?P+59:P+60,"titular"===G?a=e:r=e,[a,r,P+"H1",P+"H2"]}function valorSancorSalud(I,P,G,e,g,h,a,r,p,n,s,t,c,u,o,l,f,w){let k={},O={},M="",b="",_=[];for(j in k=I>17?Object.entries(h).reduce((B,[J,Q])=>({...B,[J]:parseInt(B[J]||0)+parseInt(Q)}),{...g}):g,1==P?O=Object.entries(G).reduce((B,[J,Q])=>({...B,[J]:parseInt(B[J]||0)+parseInt(Q)}),{...k}):P>1?(precio_hijos=Object.entries(e).reduce((B,[J,Q])=>({...B,[J]:parseInt(B[J]||0)+parseInt(Q*a)}),{...G}),O=Object.entries(precio_hijos).reduce((B,[J,Q])=>({...B,[J]:parseInt(B[J]||0)+parseInt(Q)}),{...k})):O=k,"D"==r?p.includes("Sueldo")?M=.071*n:p.includes("Aporte")?M=2.3666666666666667*n:1==document.getElementById("monoadic").checked&&(M+=1482.63*s):"M"===r?b=s*aportMon:M="",O){let Mt=function(kt,wt){C.push(kt),X.push(wt)},ht=function(kt,wt,Ht){if(kt==wt)return Ht},B=[{col_1:1,SSPRO:125,SSOD:283,SSAC:67,SUF:28,CS:600},{col_1:2,SSPRO:218,SSOD:566,SSAC:134,SUF:56,CS:1200},{col_1:3,SSPRO:333,SSOD:566,SSAC:201,SUF:84,CS:1800},{col_1:4,SSPRO:442,SSOD:566,SSAC:268,SUF:112,CS:2400},{col_1:5,SSPRO:553,SSOD:566,SSAC:335,SUF:140,CS:3e3},{col_1:6,SSPRO:661,SSOD:566,SSAC:402,SUF:168,CS:3600}],J=600*t,Q=[{col_1:"18 A 45",col_2:441},{col_1:"46 A 54",col_2:686},{col_1:"55 A 59",col_2:686}],U=c,N=u,D=0,ie=0,Z=0,ue="",re=0,te=b,ye=l,Se=f,Ee="",V=0;var y=JSON.stringify(O);JSON.parse(y);let T=o,C=[],X=[],se=[j][0],ne=se.substring(0,4),Me=(se.substring(5,11),se.substring(10)),$e=se.substring(10,13),Ue=.1*parseInt(O[j]),Fe=0,qe=0;1==ye?(qe=parseInt(O[j])*Se,Ee="-"+parseInt(qe.toFixed())):Se="",J=B[t-1].CS,!0===T&&""===w&&(Fe=0,Me.includes("B")?(Fe+=B[t-1].SSPRO,Fe+=B[t-1].SSOD):(Fe+=B[t-1].SSPRO,Fe+=B[t-1].SSOD,Fe+=B[t-1].SSAC,Fe+=B[t-1].SUF)),1==U&&(D=edad1>=18&&edad1<=45?Q[0].col_2:edad1>=46&&edad1<=54?Q[1].col_2:Q[2].col_2),1==N&&(ie=I<18?0:I>=18&&I<=45?Q[0].col_2:edad1>=46&&edad1<=54?Q[1].col_2:Q[2].col_2,ue=D+ie),ue=D+ie,re=parseInt(O[j])+parseInt(J)+parseInt(Fe)+parseInt(ue)-parseInt(qe.toFixed()),V=parseInt(O[j])+parseInt(J),"M"===r||"D"===r?(Z=parseInt(re)-parseInt(te),b="- "+parseInt(M)):"I"===r?(Z=parseInt(re)-parseInt(Ue),b=Ue,textoAportesOS="Bonif. RI :"):Z=re,"GEN"===w&&$e>=100&&$e<=450&&(Me="GEN"+Me),Mt("SanCor Plan "+Me,Z);var E=new Object;E.id=ne,E.name=Me.includes(5e3)||Me.includes(6e3)?"Exclusive "+Me:"SanCor "+Me,E.precio=Z,_.push(E),ht(C.length,Object.keys(O).length,_)}return y=JSON.stringify(_),JSON.parse(y),_}function valorPremedic(I,P,G,e,g,h,a,r,p){let n={},s=0,t="",c="",u="";var l=JSON.stringify(n);JSON.parse(l);let w=[],k=[],b=(j,[]);for(j in n=1==h.includes("I")?Object.entries(e).reduce((y,[m,R])=>({...y,[m]:parseInt(y[m]||0)+parseInt(R*P)}),{...G}):G,"D"==p?tipoDeDato.includes("Sueldo")?t=.0765*sueldo:tipoDeDato.includes("Aporte")?t=2.55*sueldo:1==document.getElementById("monoadic").checked&&(t+=1579*aportantes):t="M"===p?1579*aportantes:"",n){let Q=function(ie,Z){w.push(ie),k.push(Z)},D=function(ie,Z,ue){if(ie==Z)return ue},y=parseInt(1.1134*n[j]),m=[j][0],R=m.substring(0,4),B=(m.substring(4,10),m.substring(10)),J=0;1==a?(J=parseInt(n[j])*r,u="-"+parseInt(J.toFixed()),s=parseInt(1.1134*n[j])-parseInt(J.toFixed())):r="","M"===p||"D"===p?(J="",c="-"+parseInt(t),precio_final_a_pagar=parseInt(s)-parseInt(t)):precio_final_a_pagar=s,y=parseInt(1.1134*n[j]),s=parseInt(1.1134*n[j]),Q("Premedic Plan "+B,precio_final_a_pagar);var A=new Object;A.id=R,A.name="Premedic "+B,A.precio=precio_final_a_pagar,b.push(A),D(w.length,Object.keys(n).length,b)}return b}function valorOmint(I,P,G,e,g,h,a){let r=a,p={};return precio_adultos_Omint=I>17?Object.entries(e).reduce((n,[s,t])=>({...n,[s]:parseInt(n[s]||0)+parseInt(t)}),{...G}):G,1==P?p=Object.entries(g).reduce((n,[s,t])=>({...n,[s]:parseInt(n[s]||0)+parseInt(t)}),{...precio_adultos_Omint}):P>1?(precio_hijos_Omint=Object.entries(h).reduce((n,[s,t])=>({...n,[s]:parseInt(n[s]||0)+parseInt(t*numhijo2)}),{...g}),p=Object.entries(precio_hijos_Omint).reduce((n,[s,t])=>({...n,[s]:parseInt(n[s]||0)+parseInt(t)}),{...precio_adultos_Omint})):p=precio_adultos_Omint,r.includes("P"),p}!function(I,P){"object"==typeof exports&&typeof module<"u"?module.exports=P(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],P):(I=typeof globalThis<"u"?globalThis:I||self).bootstrap=P(I.Popper)}(this,function(I){"use strict";const G=function P(je){const H=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(je)for(const le in je)if("default"!==le){const Re=Object.getOwnPropertyDescriptor(je,le);Object.defineProperty(H,le,Re.get?Re:{enumerable:!0,get:()=>je[le]})}return H.default=je,Object.freeze(H)}(I),e=new Map,g={set(je,H,le){e.has(je)||e.set(je,new Map);const Re=e.get(je);Re.has(H)||0===Re.size?Re.set(H,le):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Re.keys())[0]}.`)},get:(je,H)=>e.has(je)&&e.get(je).get(H)||null,remove(je,H){if(!e.has(je))return;const le=e.get(je);le.delete(H),0===le.size&&e.delete(je)}},h="transitionend",a=je=>(je&&window.CSS&&window.CSS.escape&&(je=je.replace(/#([^\s"#']+)/g,(H,le)=>`#${CSS.escape(le)}`)),je),r=je=>{je.dispatchEvent(new Event(h))},p=je=>!(!je||"object"!=typeof je)&&(void 0!==je.jquery&&(je=je[0]),void 0!==je.nodeType),n=je=>p(je)?je.jquery?je[0]:je:"string"==typeof je&&je.length>0?document.querySelector(a(je)):null,s=je=>{if(!p(je)||0===je.getClientRects().length)return!1;const H="visible"===getComputedStyle(je).getPropertyValue("visibility"),le=je.closest("details:not([open])");if(!le)return H;if(le!==je){const Re=je.closest("summary");if(Re&&Re.parentNode!==le||null===Re)return!1}return H},t=je=>!je||je.nodeType!==Node.ELEMENT_NODE||!!je.classList.contains("disabled")||(void 0!==je.disabled?je.disabled:je.hasAttribute("disabled")&&"false"!==je.getAttribute("disabled")),c=je=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof je.getRootNode){const H=je.getRootNode();return H instanceof ShadowRoot?H:null}return je instanceof ShadowRoot?je:je.parentNode?c(je.parentNode):null},u=()=>{},l=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,f=[],w=()=>"rtl"===document.documentElement.dir,k=je=>{var H;H=()=>{const le=l();if(le){const Re=je.NAME,Ke=le.fn[Re];le.fn[Re]=je.jQueryInterface,le.fn[Re].Constructor=je,le.fn[Re].noConflict=()=>(le.fn[Re]=Ke,je.jQueryInterface)}},"loading"===document.readyState?(f.length||document.addEventListener("DOMContentLoaded",()=>{for(const le of f)le()}),f.push(H)):H()},O=(je,H=[],le=je)=>"function"==typeof je?je(...H):le,M=(je,H,le=!0)=>{if(!le)return void O(je);const Re=(Ot=>{if(!Ot)return 0;let{transitionDuration:yn,transitionDelay:zn}=window.getComputedStyle(Ot);const hr=Number.parseFloat(yn),br=Number.parseFloat(zn);return hr||br?(yn=yn.split(",")[0],zn=zn.split(",")[0],1e3*(Number.parseFloat(yn)+Number.parseFloat(zn))):0})(H)+5;let Ke=!1;const yt=({target:Ot})=>{Ot===H&&(Ke=!0,H.removeEventListener(h,yt),O(je))};H.addEventListener(h,yt),setTimeout(()=>{Ke||r(H)},Re)},b=(je,H,le,Re)=>{const Ke=je.length;let yt=je.indexOf(H);return-1===yt?!le&&Re?je[Ke-1]:je[0]:(yt+=le?1:-1,Re&&(yt=(yt+Ke)%Ke),je[Math.max(0,Math.min(yt,Ke-1))])},A=/[^.]*(?=\..*)\.|.*/,_=/\..*/,E=/::\d+$/,y={};let m=1;const R={mouseenter:"mouseover",mouseleave:"mouseout"},F=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function B(je,H){return H&&`${H}::${m++}`||je.uidEvent||m++}function J(je){const H=B(je);return je.uidEvent=H,y[H]=y[H]||{},y[H]}function Q(je,H,le=null){return Object.values(je).find(Re=>Re.callable===H&&Re.delegationSelector===le)}function U(je,H,le){const Re="string"==typeof H,Ke=Re?le:H||le;let yt=Z(je);return F.has(yt)||(yt=je),[Re,Ke,yt]}function N(je,H,le,Re,Ke){if("string"!=typeof H||!je)return;let[yt,Ot,yn]=U(H,le,Re);var si;H in R&&(si=Ot,Ot=function(jr){if(!jr.relatedTarget||jr.relatedTarget!==jr.delegateTarget&&!jr.delegateTarget.contains(jr.relatedTarget))return si.call(this,jr)});const zn=J(je),hr=zn[yn]||(zn[yn]={}),br=Q(hr,Ot,yt?le:null);if(br)return void(br.oneOff=br.oneOff&&Ke);const Rr=B(Ot,H.replace(A,"")),Lr=yt?function(Ur,si,jr){return function Oi(qi){const Fs=Ur.querySelectorAll(si);for(let{target:oi}=qi;oi&&oi!==this;oi=oi.parentNode)for(const Ls of Fs)if(Ls===oi)return re(qi,{delegateTarget:oi}),Oi.oneOff&&ue.off(Ur,qi.type,si,jr),jr.apply(oi,[qi])}}(je,le,Ot):function(Ur,si){return function jr(Oi){return re(Oi,{delegateTarget:Ur}),jr.oneOff&&ue.off(Ur,Oi.type,si),si.apply(Ur,[Oi])}}(je,Ot);Lr.delegationSelector=yt?le:null,Lr.callable=Ot,Lr.oneOff=Ke,Lr.uidEvent=Rr,hr[Rr]=Lr,je.addEventListener(yn,Lr,yt)}function D(je,H,le,Re,Ke){const yt=Q(H[le],Re,Ke);yt&&(je.removeEventListener(le,yt,Boolean(Ke)),delete H[le][yt.uidEvent])}function ie(je,H,le,Re){const Ke=H[le]||{};for(const[yt,Ot]of Object.entries(Ke))yt.includes(Re)&&D(je,H,le,Ot.callable,Ot.delegationSelector)}function Z(je){return je=je.replace(_,""),R[je]||je}const ue={on(je,H,le,Re){N(je,H,le,Re,!1)},one(je,H,le,Re){N(je,H,le,Re,!0)},off(je,H,le,Re){if("string"!=typeof H||!je)return;const[Ke,yt,Ot]=U(H,le,Re),yn=Ot!==H,zn=J(je),hr=zn[Ot]||{},br=H.startsWith(".");if(void 0===yt){if(br)for(const Rr of Object.keys(zn))ie(je,zn,Rr,H.slice(1));for(const[Rr,Lr]of Object.entries(hr)){const Ur=Rr.replace(E,"");yn&&!H.includes(Ur)||D(je,zn,Ot,Lr.callable,Lr.delegationSelector)}}else{if(!Object.keys(hr).length)return;D(je,zn,Ot,yt,Ke?le:null)}},trigger(je,H,le){if("string"!=typeof H||!je)return null;const Re=l();let Ke=null,yt=!0,Ot=!0,yn=!1;H!==Z(H)&&Re&&(Ke=Re.Event(H,le),Re(je).trigger(Ke),yt=!Ke.isPropagationStopped(),Ot=!Ke.isImmediatePropagationStopped(),yn=Ke.isDefaultPrevented());const zn=re(new Event(H,{bubbles:yt,cancelable:!0}),le);return yn&&zn.preventDefault(),Ot&&je.dispatchEvent(zn),zn.defaultPrevented&&Ke&&Ke.preventDefault(),zn}};function re(je,H={}){for(const[le,Re]of Object.entries(H))try{je[le]=Re}catch{Object.defineProperty(je,le,{configurable:!0,get:()=>Re})}return je}function te(je){if("true"===je)return!0;if("false"===je)return!1;if(je===Number(je).toString())return Number(je);if(""===je||"null"===je)return null;if("string"!=typeof je)return je;try{return JSON.parse(decodeURIComponent(je))}catch{return je}}function ye(je){return je.replace(/[A-Z]/g,H=>`-${H.toLowerCase()}`)}const Se={setDataAttribute(je,H,le){je.setAttribute(`data-bs-${ye(H)}`,le)},removeDataAttribute(je,H){je.removeAttribute(`data-bs-${ye(H)}`)},getDataAttributes(je){if(!je)return{};const H={},le=Object.keys(je.dataset).filter(Re=>Re.startsWith("bs")&&!Re.startsWith("bsConfig"));for(const Re of le){let Ke=Re.replace(/^bs/,"");Ke=Ke.charAt(0).toLowerCase()+Ke.slice(1,Ke.length),H[Ke]=te(je.dataset[Re])}return H},getDataAttribute:(je,H)=>te(je.getAttribute(`data-bs-${ye(H)}`))};class Ee{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(H){return H=this._mergeConfigObj(H),H=this._configAfterMerge(H),this._typeCheckConfig(H),H}_configAfterMerge(H){return H}_mergeConfigObj(H,le){const Re=p(le)?Se.getDataAttribute(le,"config"):{};return{...this.constructor.Default,..."object"==typeof Re?Re:{},...p(le)?Se.getDataAttributes(le):{},..."object"==typeof H?H:{}}}_typeCheckConfig(H,le=this.constructor.DefaultType){for(const[Ke,yt]of Object.entries(le)){const Ot=H[Ke],yn=p(Ot)?"element":null==(Re=Ot)?`${Re}`:Object.prototype.toString.call(Re).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(yt).test(yn))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ke}" provided type "${yn}" but expected type "${yt}".`)}var Re}}class V extends Ee{constructor(H,le){super(),(H=n(H))&&(this._element=H,this._config=this._getConfig(le),g.set(this._element,this.constructor.DATA_KEY,this))}dispose(){g.remove(this._element,this.constructor.DATA_KEY),ue.off(this._element,this.constructor.EVENT_KEY);for(const H of Object.getOwnPropertyNames(this))this[H]=null}_queueCallback(H,le,Re=!0){M(H,le,Re)}_getConfig(H){return H=this._mergeConfigObj(H,this._element),H=this._configAfterMerge(H),this._typeCheckConfig(H),H}static getInstance(H){return g.get(n(H),this.DATA_KEY)}static getOrCreateInstance(H,le={}){return this.getInstance(H)||new this(H,"object"==typeof le?le:null)}static get VERSION(){return"5.3.1"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(H){return`${H}${this.EVENT_KEY}`}}const Y=je=>{let H=je.getAttribute("data-bs-target");if(!H||"#"===H){let le=je.getAttribute("href");if(!le||!le.includes("#")&&!le.startsWith("."))return null;le.includes("#")&&!le.startsWith("#")&&(le=`#${le.split("#")[1]}`),H=le&&"#"!==le?le.trim():null}return a(H)},z={find:(je,H=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(H,je)),findOne:(je,H=document.documentElement)=>Element.prototype.querySelector.call(H,je),children:(je,H)=>[].concat(...je.children).filter(le=>le.matches(H)),parents(je,H){const le=[];let Re=je.parentNode.closest(H);for(;Re;)le.push(Re),Re=Re.parentNode.closest(H);return le},prev(je,H){let le=je.previousElementSibling;for(;le;){if(le.matches(H))return[le];le=le.previousElementSibling}return[]},next(je,H){let le=je.nextElementSibling;for(;le;){if(le.matches(H))return[le];le=le.nextElementSibling}return[]},focusableChildren(je){const H=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(le=>`${le}:not([tabindex^="-"])`).join(",");return this.find(H,je).filter(le=>!t(le)&&s(le))},getSelectorFromElement(je){const H=Y(je);return H&&z.findOne(H)?H:null},getElementFromSelector(je){const H=Y(je);return H?z.findOne(H):null},getMultipleElementsFromSelector(je){const H=Y(je);return H?z.find(H):[]}},T=(je,H="hide")=>{const Re=je.NAME;ue.on(document,`click.dismiss${je.EVENT_KEY}`,`[data-bs-dismiss="${Re}"]`,function(Ke){if(["A","AREA"].includes(this.tagName)&&Ke.preventDefault(),t(this))return;const yt=z.getElementFromSelector(this)||this.closest(`.${Re}`);je.getOrCreateInstance(yt)[H]()})},C=".bs.alert",X=`close${C}`,se=`closed${C}`;class ne extends V{static get NAME(){return"alert"}close(){if(ue.trigger(this._element,X).defaultPrevented)return;this._element.classList.remove("show");const H=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,H)}_destroyElement(){this._element.remove(),ue.trigger(this._element,se),this.dispose()}static jQueryInterface(H){return this.each(function(){const le=ne.getOrCreateInstance(this);if("string"==typeof H){if(void 0===le[H]||H.startsWith("_")||"constructor"===H)throw new TypeError(`No method named "${H}"`);le[H](this)}})}}T(ne,"close"),k(ne);const be='[data-bs-toggle="button"]';class Me extends V{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(H){return this.each(function(){const le=Me.getOrCreateInstance(this);"toggle"===H&&le[H]()})}}ue.on(document,"click.bs.button.data-api",be,je=>{je.preventDefault();const H=je.target.closest(be);Me.getOrCreateInstance(H).toggle()}),k(Me);const $e=".bs.swipe",Ue=`touchstart${$e}`,Fe=`touchmove${$e}`,qe=`touchend${$e}`,Mt=`pointerdown${$e}`,tt=`pointerup${$e}`,ot={endCallback:null,leftCallback:null,rightCallback:null},ht={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class kt extends Ee{constructor(H,le){super(),this._element=H,H&&kt.isSupported()&&(this._config=this._getConfig(le),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ot}static get DefaultType(){return ht}static get NAME(){return"swipe"}dispose(){ue.off(this._element,$e)}_start(H){this._supportPointerEvents?this._eventIsPointerPenTouch(H)&&(this._deltaX=H.clientX):this._deltaX=H.touches[0].clientX}_end(H){this._eventIsPointerPenTouch(H)&&(this._deltaX=H.clientX-this._deltaX),this._handleSwipe(),O(this._config.endCallback)}_move(H){this._deltaX=H.touches&&H.touches.length>1?0:H.touches[0].clientX-this._deltaX}_handleSwipe(){const H=Math.abs(this._deltaX);if(H<=40)return;const le=H/this._deltaX;this._deltaX=0,le&&O(le>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ue.on(this._element,Mt,H=>this._start(H)),ue.on(this._element,tt,H=>this._end(H)),this._element.classList.add("pointer-event")):(ue.on(this._element,Ue,H=>this._start(H)),ue.on(this._element,Fe,H=>this._move(H)),ue.on(this._element,qe,H=>this._end(H)))}_eventIsPointerPenTouch(H){return this._supportPointerEvents&&("pen"===H.pointerType||"touch"===H.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const wt=".bs.carousel",Ht=".data-api",Yt="next",Ln="prev",Yn="left",Zn="right",ce=`slide${wt}`,pe=`slid${wt}`,ve=`keydown${wt}`,K=`mouseenter${wt}`,oe=`mouseleave${wt}`,Ae=`dragstart${wt}`,De=`load${wt}${Ht}`,ze=`click${wt}${Ht}`,Oe="carousel",bt="active",It=".active",gt=".carousel-item",Rt=It+gt,Xt={ArrowLeft:Zn,ArrowRight:Yn},Ft={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Qt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Lt extends V{constructor(H,le){super(H,le),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Oe&&this.cycle()}static get Default(){return Ft}static get DefaultType(){return Qt}static get NAME(){return"carousel"}next(){this._slide(Yt)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(Ln)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ue.one(this._element,pe,()=>this.cycle()):this.cycle())}to(H){const le=this._getItems();if(H>le.length-1||H<0)return;if(this._isSliding)return void ue.one(this._element,pe,()=>this.to(H));const Re=this._getItemIndex(this._getActive());Re!==H&&this._slide(H>Re?Yt:Ln,le[H])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(H){return H.defaultInterval=H.interval,H}_addEventListeners(){this._config.keyboard&&ue.on(this._element,ve,H=>this._keydown(H)),"hover"===this._config.pause&&(ue.on(this._element,K,()=>this.pause()),ue.on(this._element,oe,()=>this._maybeEnableCycle())),this._config.touch&&kt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const le of z.find(".carousel-item img",this._element))ue.on(le,Ae,Re=>Re.preventDefault());this._swipeHelper=new kt(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Yn)),rightCallback:()=>this._slide(this._directionToOrder(Zn)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(H){if(/input|textarea/i.test(H.target.tagName))return;const le=Xt[H.key];le&&(H.preventDefault(),this._slide(this._directionToOrder(le)))}_getItemIndex(H){return this._getItems().indexOf(H)}_setActiveIndicatorElement(H){if(!this._indicatorsElement)return;const le=z.findOne(It,this._indicatorsElement);le.classList.remove(bt),le.removeAttribute("aria-current");const Re=z.findOne(`[data-bs-slide-to="${H}"]`,this._indicatorsElement);Re&&(Re.classList.add(bt),Re.setAttribute("aria-current","true"))}_updateInterval(){const H=this._activeElement||this._getActive();if(!H)return;const le=Number.parseInt(H.getAttribute("data-bs-interval"),10);this._config.interval=le||this._config.defaultInterval}_slide(H,le=null){if(this._isSliding)return;const Re=this._getActive(),Ke=H===Yt,yt=le||b(this._getItems(),Re,Ke,this._config.wrap);if(yt===Re)return;const Ot=this._getItemIndex(yt),yn=Rr=>ue.trigger(this._element,Rr,{relatedTarget:yt,direction:this._orderToDirection(H),from:this._getItemIndex(Re),to:Ot});if(yn(ce).defaultPrevented||!Re||!yt)return;const zn=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Ot),this._activeElement=yt;const hr=Ke?"carousel-item-start":"carousel-item-end",br=Ke?"carousel-item-next":"carousel-item-prev";yt.classList.add(br),Re.classList.add(hr),yt.classList.add(hr),this._queueCallback(()=>{yt.classList.remove(hr,br),yt.classList.add(bt),Re.classList.remove(bt,br,hr),this._isSliding=!1,yn(pe)},Re,this._isAnimated()),zn&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return z.findOne(Rt,this._element)}_getItems(){return z.find(gt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(H){return w()?H===Yn?Ln:Yt:H===Yn?Yt:Ln}_orderToDirection(H){return w()?H===Ln?Yn:Zn:H===Ln?Zn:Yn}static jQueryInterface(H){return this.each(function(){const le=Lt.getOrCreateInstance(this,H);if("number"!=typeof H){if("string"==typeof H){if(void 0===le[H]||H.startsWith("_")||"constructor"===H)throw new TypeError(`No method named "${H}"`);le[H]()}}else le.to(H)})}}ue.on(document,ze,"[data-bs-slide], [data-bs-slide-to]",function(je){const H=z.getElementFromSelector(this);if(!H||!H.classList.contains(Oe))return;je.preventDefault();const le=Lt.getOrCreateInstance(H),Re=this.getAttribute("data-bs-slide-to");return Re?(le.to(Re),void le._maybeEnableCycle()):"next"===Se.getDataAttribute(this,"slide")?(le.next(),void le._maybeEnableCycle()):(le.prev(),void le._maybeEnableCycle())}),ue.on(window,De,()=>{const je=z.find('[data-bs-ride="carousel"]');for(const H of je)Lt.getOrCreateInstance(H)}),k(Lt);const Ut=".bs.collapse",$t=`show${Ut}`,xt=`shown${Ut}`,Et=`hide${Ut}`,_t=`hidden${Ut}`,en=`click${Ut}.data-api`,Ct="show",We="collapse",Je="collapsing",at=`:scope .${We} .${We}`,it='[data-bs-toggle="collapse"]',ut={parent:null,toggle:!0},ft={parent:"(null|element)",toggle:"boolean"};class zt extends V{constructor(H,le){super(H,le),this._isTransitioning=!1,this._triggerArray=[];const Re=z.find(it);for(const Ke of Re){const yt=z.getSelectorFromElement(Ke),Ot=z.find(yt).filter(yn=>yn===this._element);null!==yt&&Ot.length&&this._triggerArray.push(Ke)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ut}static get DefaultType(){return ft}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let H=[];if(this._config.parent&&(H=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Ke=>Ke!==this._element).map(Ke=>zt.getOrCreateInstance(Ke,{toggle:!1}))),H.length&&H[0]._isTransitioning||ue.trigger(this._element,$t).defaultPrevented)return;for(const Ke of H)Ke.hide();const le=this._getDimension();this._element.classList.remove(We),this._element.classList.add(Je),this._element.style[le]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Re=`scroll${le[0].toUpperCase()+le.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Je),this._element.classList.add(We,Ct),this._element.style[le]="",ue.trigger(this._element,xt)},this._element,!0),this._element.style[le]=`${this._element[Re]}px`}hide(){if(this._isTransitioning||!this._isShown()||ue.trigger(this._element,Et).defaultPrevented)return;const H=this._getDimension();this._element.style[H]=`${this._element.getBoundingClientRect()[H]}px`,this._element.classList.add(Je),this._element.classList.remove(We,Ct);for(const le of this._triggerArray){const Re=z.getElementFromSelector(le);Re&&!this._isShown(Re)&&this._addAriaAndCollapsedClass([le],!1)}this._isTransitioning=!0,this._element.style[H]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Je),this._element.classList.add(We),ue.trigger(this._element,_t)},this._element,!0)}_isShown(H=this._element){return H.classList.contains(Ct)}_configAfterMerge(H){return H.toggle=Boolean(H.toggle),H.parent=n(H.parent),H}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const H=this._getFirstLevelChildren(it);for(const le of H){const Re=z.getElementFromSelector(le);Re&&this._addAriaAndCollapsedClass([le],this._isShown(Re))}}_getFirstLevelChildren(H){const le=z.find(at,this._config.parent);return z.find(H,this._config.parent).filter(Re=>!le.includes(Re))}_addAriaAndCollapsedClass(H,le){if(H.length)for(const Re of H)Re.classList.toggle("collapsed",!le),Re.setAttribute("aria-expanded",le)}static jQueryInterface(H){const le={};return"string"==typeof H&&/show|hide/.test(H)&&(le.toggle=!1),this.each(function(){const Re=zt.getOrCreateInstance(this,le);if("string"==typeof H){if(void 0===Re[H])throw new TypeError(`No method named "${H}"`);Re[H]()}})}}ue.on(document,en,it,function(je){("A"===je.target.tagName||je.delegateTarget&&"A"===je.delegateTarget.tagName)&&je.preventDefault();for(const H of z.getMultipleElementsFromSelector(this))zt.getOrCreateInstance(H,{toggle:!1}).toggle()}),k(zt);const tn="dropdown",Nt=".bs.dropdown",nn=".data-api",pn="ArrowUp",on="ArrowDown",Pt=`hide${Nt}`,Jt=`hidden${Nt}`,qt=`show${Nt}`,Tt=`shown${Nt}`,At=`click${Nt}${nn}`,sn=`keydown${Nt}${nn}`,hn=`keyup${Nt}${nn}`,Kt="show",dn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Rn=`${dn}.${Kt}`,Sn=".dropdown-menu",Nn=w()?"top-end":"top-start",Un=w()?"top-start":"top-end",Xn=w()?"bottom-end":"bottom-start",Hn=w()?"bottom-start":"bottom-end",Qn=w()?"left-start":"right-start",ci=w()?"right-start":"left-start",Kr={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yi={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class or extends V{constructor(H,le){super(H,le),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,Sn)[0]||z.prev(this._element,Sn)[0]||z.findOne(Sn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kr}static get DefaultType(){return yi}static get NAME(){return tn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(t(this._element)||this._isShown())return;const H={relatedTarget:this._element};if(!ue.trigger(this._element,qt,H).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const le of[].concat(...document.body.children))ue.on(le,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Kt),this._element.classList.add(Kt),ue.trigger(this._element,Tt,H)}}hide(){!t(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(H){if(!ue.trigger(this._element,Pt,H).defaultPrevented){if("ontouchstart"in document.documentElement)for(const le of[].concat(...document.body.children))ue.off(le,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(Kt),this._element.classList.remove(Kt),this._element.setAttribute("aria-expanded","false"),Se.removeDataAttribute(this._menu,"popper"),ue.trigger(this._element,Jt,H)}}_getConfig(H){if("object"==typeof(H=super._getConfig(H)).reference&&!p(H.reference)&&"function"!=typeof H.reference.getBoundingClientRect)throw new TypeError(`${tn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return H}_createPopper(){if(void 0===G)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let H=this._element;"parent"===this._config.reference?H=this._parent:p(this._config.reference)?H=n(this._config.reference):"object"==typeof this._config.reference&&(H=this._config.reference);const le=this._getPopperConfig();this._popper=G.createPopper(H,this._menu,le)}_isShown(){return this._menu.classList.contains(Kt)}_getPlacement(){const H=this._parent;if(H.classList.contains("dropend"))return Qn;if(H.classList.contains("dropstart"))return ci;if(H.classList.contains("dropup-center"))return"top";if(H.classList.contains("dropdown-center"))return"bottom";const le="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return H.classList.contains("dropup")?le?Un:Nn:le?Hn:Xn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:H}=this._config;return"string"==typeof H?H.split(",").map(le=>Number.parseInt(le,10)):"function"==typeof H?le=>H(le,this._element):H}_getPopperConfig(){const H={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Se.setDataAttribute(this._menu,"popper","static"),H.modifiers=[{name:"applyStyles",enabled:!1}]),{...H,...O(this._config.popperConfig,[H])}}_selectMenuItem({key:H,target:le}){const Re=z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ke=>s(Ke));Re.length&&b(Re,le,H===on,!Re.includes(le)).focus()}static jQueryInterface(H){return this.each(function(){const le=or.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H])throw new TypeError(`No method named "${H}"`);le[H]()}})}static clearMenus(H){if(2===H.button||"keyup"===H.type&&"Tab"!==H.key)return;const le=z.find(Rn);for(const Re of le){const Ke=or.getInstance(Re);if(!Ke||!1===Ke._config.autoClose)continue;const yt=H.composedPath(),Ot=yt.includes(Ke._menu);if(yt.includes(Ke._element)||"inside"===Ke._config.autoClose&&!Ot||"outside"===Ke._config.autoClose&&Ot||Ke._menu.contains(H.target)&&("keyup"===H.type&&"Tab"===H.key||/input|select|option|textarea|form/i.test(H.target.tagName)))continue;const yn={relatedTarget:Ke._element};"click"===H.type&&(yn.clickEvent=H),Ke._completeHide(yn)}}static dataApiKeydownHandler(H){const le=/input|textarea/i.test(H.target.tagName),Re="Escape"===H.key,Ke=[pn,on].includes(H.key);if(!Ke&&!Re||le&&!Re)return;H.preventDefault();const yt=this.matches(dn)?this:z.prev(this,dn)[0]||z.next(this,dn)[0]||z.findOne(dn,H.delegateTarget.parentNode),Ot=or.getOrCreateInstance(yt);if(Ke)return H.stopPropagation(),Ot.show(),void Ot._selectMenuItem(H);Ot._isShown()&&(H.stopPropagation(),Ot.hide(),yt.focus())}}ue.on(document,sn,dn,or.dataApiKeydownHandler),ue.on(document,sn,Sn,or.dataApiKeydownHandler),ue.on(document,At,or.clearMenus),ue.on(document,hn,or.clearMenus),ue.on(document,At,dn,function(je){je.preventDefault(),or.getOrCreateInstance(this).toggle()}),k(or);const Vn="backdrop",gr=`mousedown.bs.${Vn}`,Fn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},lr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class wr extends Ee{constructor(H){super(),this._config=this._getConfig(H),this._isAppended=!1,this._element=null}static get Default(){return Fn}static get DefaultType(){return lr}static get NAME(){return Vn}show(H){if(!this._config.isVisible)return void O(H);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{O(H)})}hide(H){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),O(H)})):O(H)}dispose(){this._isAppended&&(ue.off(this._element,gr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const H=document.createElement("div");H.className=this._config.className,this._config.isAnimated&&H.classList.add("fade"),this._element=H}return this._element}_configAfterMerge(H){return H.rootElement=n(H.rootElement),H}_append(){if(this._isAppended)return;const H=this._getElement();this._config.rootElement.append(H),ue.on(H,gr,()=>{O(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(H){M(H,this._getElement(),this._config.isAnimated)}}const kr=".bs.focustrap",es=`focusin${kr}`,Mi=`keydown.tab${kr}`,hi="backward",Di={autofocus:!0,trapElement:null},bi={autofocus:"boolean",trapElement:"element"};class xi extends Ee{constructor(H){super(),this._config=this._getConfig(H),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Di}static get DefaultType(){return bi}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ue.off(document,kr),ue.on(document,es,H=>this._handleFocusin(H)),ue.on(document,Mi,H=>this._handleKeydown(H)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ue.off(document,kr))}_handleFocusin(H){const{trapElement:le}=this._config;if(H.target===document||H.target===le||le.contains(H.target))return;const Re=z.focusableChildren(le);0===Re.length?le.focus():this._lastTabNavDirection===hi?Re[Re.length-1].focus():Re[0].focus()}_handleKeydown(H){"Tab"===H.key&&(this._lastTabNavDirection=H.shiftKey?hi:"forward")}}const Pi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_i=".sticky-top",Zr="padding-right",Ni="margin-right";class wi{constructor(){this._element=document.body}getWidth(){const H=document.documentElement.clientWidth;return Math.abs(window.innerWidth-H)}hide(){const H=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zr,le=>le+H),this._setElementAttributes(Pi,Zr,le=>le+H),this._setElementAttributes(_i,Ni,le=>le-H)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zr),this._resetElementAttributes(Pi,Zr),this._resetElementAttributes(_i,Ni)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(H,le,Re){const Ke=this.getWidth();this._applyManipulationCallback(H,yt=>{if(yt!==this._element&&window.innerWidth>yt.clientWidth+Ke)return;this._saveInitialAttribute(yt,le);const Ot=window.getComputedStyle(yt).getPropertyValue(le);yt.style.setProperty(le,`${Re(Number.parseFloat(Ot))}px`)})}_saveInitialAttribute(H,le){const Re=H.style.getPropertyValue(le);Re&&Se.setDataAttribute(H,le,Re)}_resetElementAttributes(H,le){this._applyManipulationCallback(H,Re=>{const Ke=Se.getDataAttribute(Re,le);null!==Ke?(Se.removeDataAttribute(Re,le),Re.style.setProperty(le,Ke)):Re.style.removeProperty(le)})}_applyManipulationCallback(H,le){if(p(H))le(H);else for(const Re of z.find(H,this._element))le(Re)}}const nr=".bs.modal",ki=`hide${nr}`,ts=`hidePrevented${nr}`,qr=`hidden${nr}`,fi=`show${nr}`,Fi=`shown${nr}`,Li=`resize${nr}`,Tr=`click.dismiss${nr}`,ei=`mousedown.dismiss${nr}`,Ci=`keydown.dismiss${nr}`,Ui=`click${nr}.data-api`,ti="modal-open",Hr="modal-static",Bi={backdrop:!0,focus:!0,keyboard:!0},ns={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Nr extends V{constructor(H,le){super(H,le),this._dialog=z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new wi,this._addEventListeners()}static get Default(){return Bi}static get DefaultType(){return ns}static get NAME(){return"modal"}toggle(H){return this._isShown?this.hide():this.show(H)}show(H){this._isShown||this._isTransitioning||ue.trigger(this._element,fi,{relatedTarget:H}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ti),this._adjustDialog(),this._backdrop.show(()=>this._showElement(H)))}hide(){this._isShown&&!this._isTransitioning&&(ue.trigger(this._element,ki).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ue.off(window,nr),ue.off(this._dialog,nr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new xi({trapElement:this._element})}_showElement(H){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const le=z.findOne(".modal-body",this._dialog);le&&(le.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ue.trigger(this._element,Fi,{relatedTarget:H})},this._dialog,this._isAnimated())}_addEventListeners(){ue.on(this._element,Ci,H=>{"Escape"===H.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),ue.on(window,Li,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ue.on(this._element,ei,H=>{ue.one(this._element,Tr,le=>{this._element===H.target&&this._element===le.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ti),this._resetAdjustments(),this._scrollBar.reset(),ue.trigger(this._element,qr)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ue.trigger(this._element,ts).defaultPrevented)return;const H=this._element.scrollHeight>document.documentElement.clientHeight,le=this._element.style.overflowY;"hidden"===le||this._element.classList.contains(Hr)||(H||(this._element.style.overflowY="hidden"),this._element.classList.add(Hr),this._queueCallback(()=>{this._element.classList.remove(Hr),this._queueCallback(()=>{this._element.style.overflowY=le},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const H=this._element.scrollHeight>document.documentElement.clientHeight,le=this._scrollBar.getWidth(),Re=le>0;if(Re&&!H){const Ke=w()?"paddingLeft":"paddingRight";this._element.style[Ke]=`${le}px`}if(!Re&&H){const Ke=w()?"paddingRight":"paddingLeft";this._element.style[Ke]=`${le}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(H,le){return this.each(function(){const Re=Nr.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===Re[H])throw new TypeError(`No method named "${H}"`);Re[H](le)}})}}ue.on(document,Ui,'[data-bs-toggle="modal"]',function(je){const H=z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&je.preventDefault(),ue.one(H,fi,Re=>{Re.defaultPrevented||ue.one(H,qr,()=>{s(this)&&this.focus()})});const le=z.findOne(".modal.show");le&&Nr.getInstance(le).hide(),Nr.getOrCreateInstance(H).toggle(this)}),T(Nr),k(Nr);const qn=".bs.offcanvas",Kn=".data-api",Hi=`load${qn}${Kn}`,dt="showing",fn=".offcanvas.show",Cr=`show${qn}`,ri=`shown${qn}`,rs=`hide${qn}`,di=`hidePrevented${qn}`,Vr=`hidden${qn}`,pi=`resize${qn}`,Ei=`click${qn}${Kn}`,Vi=`keydown.dismiss${qn}`,zi={backdrop:!0,keyboard:!0,scroll:!1},is={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ar extends V{constructor(H,le){super(H,le),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return zi}static get DefaultType(){return is}static get NAME(){return"offcanvas"}toggle(H){return this._isShown?this.hide():this.show(H)}show(H){this._isShown||ue.trigger(this._element,Cr,{relatedTarget:H}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new wi).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(dt),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(dt),ue.trigger(this._element,ri,{relatedTarget:H})},this._element,!0))}hide(){this._isShown&&(ue.trigger(this._element,rs).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new wi).reset(),ue.trigger(this._element,Vr)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const H=Boolean(this._config.backdrop);return new wr({className:"offcanvas-backdrop",isVisible:H,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:H?()=>{"static"!==this._config.backdrop?this.hide():ue.trigger(this._element,di)}:null})}_initializeFocusTrap(){return new xi({trapElement:this._element})}_addEventListeners(){ue.on(this._element,Vi,H=>{"Escape"===H.key&&(this._config.keyboard?this.hide():ue.trigger(this._element,di))})}static jQueryInterface(H){return this.each(function(){const le=Ar.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H]||H.startsWith("_")||"constructor"===H)throw new TypeError(`No method named "${H}"`);le[H](this)}})}}ue.on(document,Ei,'[data-bs-toggle="offcanvas"]',function(je){const H=z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&je.preventDefault(),t(this))return;ue.one(H,Vr,()=>{s(this)&&this.focus()});const le=z.findOne(fn);le&&le!==H&&Ar.getInstance(le).hide(),Ar.getOrCreateInstance(H).toggle(this)}),ue.on(window,Hi,()=>{for(const je of z.find(fn))Ar.getOrCreateInstance(je).show()}),ue.on(window,pi,()=>{for(const je of z.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(je).position&&Ar.getOrCreateInstance(je).hide()}),T(Ar),k(Ar);const Wi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ss=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),os=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Mr=(je,H)=>{const le=je.nodeName.toLowerCase();return H.includes(le)?!ss.has(le)||Boolean(os.test(je.nodeValue)):H.filter(Re=>Re instanceof RegExp).some(Re=>Re.test(le))},yr={allowList:Wi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Fr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Dr={entry:"(string|element|function|null)",selector:"(string|element)"};class $i extends Ee{constructor(H){super(),this._config=this._getConfig(H)}static get Default(){return yr}static get DefaultType(){return Fr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(H=>this._resolvePossibleFunction(H)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(H){return this._checkContent(H),this._config.content={...this._config.content,...H},this}toHtml(){const H=document.createElement("div");H.innerHTML=this._maybeSanitize(this._config.template);for(const[Ke,yt]of Object.entries(this._config.content))this._setContent(H,yt,Ke);const le=H.children[0],Re=this._resolvePossibleFunction(this._config.extraClass);return Re&&le.classList.add(...Re.split(" ")),le}_typeCheckConfig(H){super._typeCheckConfig(H),this._checkContent(H.content)}_checkContent(H){for(const[le,Re]of Object.entries(H))super._typeCheckConfig({selector:le,entry:Re},Dr)}_setContent(H,le,Re){const Ke=z.findOne(Re,H);Ke&&((le=this._resolvePossibleFunction(le))?p(le)?this._putElementInTemplate(n(le),Ke):this._config.html?Ke.innerHTML=this._maybeSanitize(le):Ke.textContent=le:Ke.remove())}_maybeSanitize(H){return this._config.sanitize?function(le,Re,Ke){if(!le.length)return le;if(Ke&&"function"==typeof Ke)return Ke(le);const yt=(new window.DOMParser).parseFromString(le,"text/html"),Ot=[].concat(...yt.body.querySelectorAll("*"));for(const yn of Ot){const zn=yn.nodeName.toLowerCase();if(!Object.keys(Re).includes(zn)){yn.remove();continue}const hr=[].concat(...yn.attributes),br=[].concat(Re["*"]||[],Re[zn]||[]);for(const Rr of hr)Mr(Rr,br)||yn.removeAttribute(Rr.nodeName)}return yt.body.innerHTML}(H,this._config.allowList,this._config.sanitizeFn):H}_resolvePossibleFunction(H){return O(H,[this])}_putElementInTemplate(H,le){if(this._config.html)return le.innerHTML="",void le.append(H);le.textContent=H.textContent}}const kn=new Set(["sanitize","allowList","sanitizeFn"]),x="fade",ee="show",Ce="hide.bs.modal",Le="hover",He="focus",Qe={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},vt={allowList:Wi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Dt={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class rn extends V{constructor(H,le){if(void 0===G)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(H,le),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return vt}static get DefaultType(){return Dt}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ue.off(this._element.closest(".modal"),Ce,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const H=ue.trigger(this._element,this.constructor.eventName("show")),le=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(H.defaultPrevented||!le)return;this._disposePopper();const Re=this._getTipElement();this._element.setAttribute("aria-describedby",Re.getAttribute("id"));const{container:Ke}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ke.append(Re),ue.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(Re),Re.classList.add(ee),"ontouchstart"in document.documentElement)for(const yt of[].concat(...document.body.children))ue.on(yt,"mouseover",u);this._queueCallback(()=>{ue.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ue.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ee),"ontouchstart"in document.documentElement)for(const H of[].concat(...document.body.children))ue.off(H,"mouseover",u);this._activeTrigger.click=!1,this._activeTrigger[He]=!1,this._activeTrigger[Le]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ue.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(H){const le=this._getTemplateFactory(H).toHtml();if(!le)return null;le.classList.remove(x,ee),le.classList.add(`bs-${this.constructor.NAME}-auto`);const Re=(Ke=>{do{Ke+=Math.floor(1e6*Math.random())}while(document.getElementById(Ke));return Ke})(this.constructor.NAME).toString();return le.setAttribute("id",Re),this._isAnimated()&&le.classList.add(x),le}setContent(H){this._newContent=H,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(H){return this._templateFactory?this._templateFactory.changeContent(H):this._templateFactory=new $i({...this._config,content:H,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(H){return this.constructor.getOrCreateInstance(H.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(x)}_isShown(){return this.tip&&this.tip.classList.contains(ee)}_createPopper(H){const le=O(this._config.placement,[this,H,this._element]),Re=Qe[le.toUpperCase()];return G.createPopper(this._element,H,this._getPopperConfig(Re))}_getOffset(){const{offset:H}=this._config;return"string"==typeof H?H.split(",").map(le=>Number.parseInt(le,10)):"function"==typeof H?le=>H(le,this._element):H}_resolvePossibleFunction(H){return O(H,[this._element])}_getPopperConfig(H){const le={placement:H,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Re=>{this._getTipElement().setAttribute("data-popper-placement",Re.state.placement)}}]};return{...le,...O(this._config.popperConfig,[le])}}_setListeners(){const H=this._config.trigger.split(" ");for(const le of H)if("click"===le)ue.on(this._element,this.constructor.eventName("click"),this._config.selector,Re=>{this._initializeOnDelegatedTarget(Re).toggle()});else if("manual"!==le){const Re=this.constructor.eventName(le===Le?"mouseenter":"focusin"),Ke=this.constructor.eventName(le===Le?"mouseleave":"focusout");ue.on(this._element,Re,this._config.selector,yt=>{const Ot=this._initializeOnDelegatedTarget(yt);Ot._activeTrigger["focusin"===yt.type?He:Le]=!0,Ot._enter()}),ue.on(this._element,Ke,this._config.selector,yt=>{const Ot=this._initializeOnDelegatedTarget(yt);Ot._activeTrigger["focusout"===yt.type?He:Le]=Ot._element.contains(yt.relatedTarget),Ot._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ue.on(this._element.closest(".modal"),Ce,this._hideModalHandler)}_fixTitle(){const H=this._element.getAttribute("title");H&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",H),this._element.setAttribute("data-bs-original-title",H),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(H,le){clearTimeout(this._timeout),this._timeout=setTimeout(H,le)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(H){const le=Se.getDataAttributes(this._element);for(const Re of Object.keys(le))kn.has(Re)&&delete le[Re];return H={...le,..."object"==typeof H&&H?H:{}},H=this._mergeConfigObj(H),H=this._configAfterMerge(H),this._typeCheckConfig(H),H}_configAfterMerge(H){return H.container=!1===H.container?document.body:n(H.container),"number"==typeof H.delay&&(H.delay={show:H.delay,hide:H.delay}),"number"==typeof H.title&&(H.title=H.title.toString()),"number"==typeof H.content&&(H.content=H.content.toString()),H}_getDelegateConfig(){const H={};for(const[le,Re]of Object.entries(this._config))this.constructor.Default[le]!==Re&&(H[le]=Re);return H.selector=!1,H.trigger="manual",H}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(H){return this.each(function(){const le=rn.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H])throw new TypeError(`No method named "${H}"`);le[H]()}})}}k(rn);const vn={...rn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$n={...rn.DefaultType,content:"(null|string|element|function)"};class jn extends rn{static get Default(){return vn}static get DefaultType(){return $n}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(H){return this.each(function(){const le=jn.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H])throw new TypeError(`No method named "${H}"`);le[H]()}})}}k(jn);const Tn=".bs.scrollspy",Or=`activate${Tn}`,Gi=`click${Tn}`,as=`load${Tn}.data-api`,zr="active",mi="[href]",fs=".nav-link",ws=`${fs}, .nav-item > ${fs}, .list-group-item`,ks={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Cs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class gi extends V{constructor(H,le){super(H,le),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ks}static get DefaultType(){return Cs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const H of this._observableSections.values())this._observer.observe(H)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(H){return H.target=n(H.target)||document.body,H.rootMargin=H.offset?`${H.offset}px 0px -30%`:H.rootMargin,"string"==typeof H.threshold&&(H.threshold=H.threshold.split(",").map(le=>Number.parseFloat(le))),H}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ue.off(this._config.target,Gi),ue.on(this._config.target,Gi,mi,H=>{const le=this._observableSections.get(H.target.hash);if(le){H.preventDefault();const Re=this._rootElement||window,Ke=le.offsetTop-this._element.offsetTop;if(Re.scrollTo)return void Re.scrollTo({top:Ke,behavior:"smooth"});Re.scrollTop=Ke}}))}_getNewObserver(){return new IntersectionObserver(le=>this._observerCallback(le),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(H){const le=Ot=>this._targetLinks.get(`#${Ot.target.id}`),Re=Ot=>{this._previousScrollData.visibleEntryTop=Ot.target.offsetTop,this._process(le(Ot))},Ke=(this._rootElement||document.documentElement).scrollTop,yt=Ke>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Ke;for(const Ot of H){if(!Ot.isIntersecting){this._activeTarget=null,this._clearActiveClass(le(Ot));continue}const yn=Ot.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(yt&&yn){if(Re(Ot),!Ke)return}else yt||yn||Re(Ot)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const H=z.find(mi,this._config.target);for(const le of H){if(!le.hash||t(le))continue;const Re=z.findOne(decodeURI(le.hash),this._element);s(Re)&&(this._targetLinks.set(decodeURI(le.hash),le),this._observableSections.set(le.hash,Re))}}_process(H){this._activeTarget!==H&&(this._clearActiveClass(this._config.target),this._activeTarget=H,H.classList.add(zr),this._activateParents(H),ue.trigger(this._element,Or,{relatedTarget:H}))}_activateParents(H){if(H.classList.contains("dropdown-item"))z.findOne(".dropdown-toggle",H.closest(".dropdown")).classList.add(zr);else for(const le of z.parents(H,".nav, .list-group"))for(const Re of z.prev(le,ws))Re.classList.add(zr)}_clearActiveClass(H){H.classList.remove(zr);const le=z.find(`${mi}.${zr}`,H);for(const Re of le)Re.classList.remove(zr)}static jQueryInterface(H){return this.each(function(){const le=gi.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H]||H.startsWith("_")||"constructor"===H)throw new TypeError(`No method named "${H}"`);le[H]()}})}}ue.on(window,as,()=>{for(const je of z.find('[data-bs-spy="scroll"]'))gi.getOrCreateInstance(je)}),k(gi);const cr=".bs.tab",Ss=`hide${cr}`,us=`hidden${cr}`,Yi=`show${cr}`,ds=`shown${cr}`,ps=`click${cr}`,Es=`keydown${cr}`,$s=`load${cr}`,Ts="ArrowLeft",ms="ArrowRight",As="ArrowUp",ls="ArrowDown",xr="Home",cs="End",Pr="active",Ji="show",vi=":not(.dropdown-toggle)",Ti='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Wr=`.nav-link${vi}, .list-group-item${vi}, [role="tab"]${vi}, ${Ti}`,Xi=`.${Pr}[data-bs-toggle="tab"], .${Pr}[data-bs-toggle="pill"], .${Pr}[data-bs-toggle="list"]`;class ii extends V{constructor(H){super(H),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ue.on(this._element,Es,le=>this._keydown(le)))}static get NAME(){return"tab"}show(){const H=this._element;if(this._elemIsActive(H))return;const le=this._getActiveElem(),Re=le?ue.trigger(le,Ss,{relatedTarget:H}):null;ue.trigger(H,Yi,{relatedTarget:le}).defaultPrevented||Re&&Re.defaultPrevented||(this._deactivate(le,H),this._activate(H,le))}_activate(H,le){H&&(H.classList.add(Pr),this._activate(z.getElementFromSelector(H)),this._queueCallback(()=>{"tab"===H.getAttribute("role")?(H.removeAttribute("tabindex"),H.setAttribute("aria-selected",!0),this._toggleDropDown(H,!0),ue.trigger(H,ds,{relatedTarget:le})):H.classList.add(Ji)},H,H.classList.contains("fade")))}_deactivate(H,le){H&&(H.classList.remove(Pr),H.blur(),this._deactivate(z.getElementFromSelector(H)),this._queueCallback(()=>{"tab"===H.getAttribute("role")?(H.setAttribute("aria-selected",!1),H.setAttribute("tabindex","-1"),this._toggleDropDown(H,!1),ue.trigger(H,us,{relatedTarget:le})):H.classList.remove(Ji)},H,H.classList.contains("fade")))}_keydown(H){if(![Ts,ms,As,ls,xr,cs].includes(H.key))return;H.stopPropagation(),H.preventDefault();const le=this._getChildren().filter(Ke=>!t(Ke));let Re;if([xr,cs].includes(H.key))Re=le[H.key===xr?0:le.length-1];else{const Ke=[ms,ls].includes(H.key);Re=b(le,H.target,Ke,!0)}Re&&(Re.focus({preventScroll:!0}),ii.getOrCreateInstance(Re).show())}_getChildren(){return z.find(Wr,this._parent)}_getActiveElem(){return this._getChildren().find(H=>this._elemIsActive(H))||null}_setInitialAttributes(H,le){this._setAttributeIfNotExists(H,"role","tablist");for(const Re of le)this._setInitialAttributesOnChild(Re)}_setInitialAttributesOnChild(H){H=this._getInnerElement(H);const le=this._elemIsActive(H),Re=this._getOuterElement(H);H.setAttribute("aria-selected",le),Re!==H&&this._setAttributeIfNotExists(Re,"role","presentation"),le||H.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(H,"role","tab"),this._setInitialAttributesOnTargetPanel(H)}_setInitialAttributesOnTargetPanel(H){const le=z.getElementFromSelector(H);le&&(this._setAttributeIfNotExists(le,"role","tabpanel"),H.id&&this._setAttributeIfNotExists(le,"aria-labelledby",`${H.id}`))}_toggleDropDown(H,le){const Re=this._getOuterElement(H);if(!Re.classList.contains("dropdown"))return;const Ke=(yt,Ot)=>{const yn=z.findOne(yt,Re);yn&&yn.classList.toggle(Ot,le)};Ke(".dropdown-toggle",Pr),Ke(".dropdown-menu",Ji),Re.setAttribute("aria-expanded",le)}_setAttributeIfNotExists(H,le,Re){H.hasAttribute(le)||H.setAttribute(le,Re)}_elemIsActive(H){return H.classList.contains(Pr)}_getInnerElement(H){return H.matches(Wr)?H:z.findOne(Wr,H)}_getOuterElement(H){return H.closest(".nav-item, .list-group-item")||H}static jQueryInterface(H){return this.each(function(){const le=ii.getOrCreateInstance(this);if("string"==typeof H){if(void 0===le[H]||H.startsWith("_")||"constructor"===H)throw new TypeError(`No method named "${H}"`);le[H]()}})}}ue.on(document,ps,Ti,function(je){["A","AREA"].includes(this.tagName)&&je.preventDefault(),t(this)||ii.getOrCreateInstance(this).show()}),ue.on(window,$s,()=>{for(const je of z.find(Xi))ii.getOrCreateInstance(je)}),k(ii);const Gr=".bs.toast",Os=`mouseover${Gr}`,vs=`mouseout${Gr}`,Rs=`focusin${Gr}`,js=`focusout${Gr}`,Is=`hide${Gr}`,Ms=`hidden${Gr}`,Ds=`show${Gr}`,xs=`shown${Gr}`,Ki="show",Zi="showing",Ps={animation:"boolean",autohide:"boolean",delay:"number"},Ns={animation:!0,autohide:!0,delay:5e3};class Ai extends V{constructor(H,le){super(H,le),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ns}static get DefaultType(){return Ps}static get NAME(){return"toast"}show(){ue.trigger(this._element,Ds).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ki,Zi),this._queueCallback(()=>{this._element.classList.remove(Zi),ue.trigger(this._element,xs),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ue.trigger(this._element,Is).defaultPrevented||(this._element.classList.add(Zi),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Zi,Ki),ue.trigger(this._element,Ms)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ki),super.dispose()}isShown(){return this._element.classList.contains(Ki)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(H,le){switch(H.type){case"mouseover":case"mouseout":this._hasMouseInteraction=le;break;case"focusin":case"focusout":this._hasKeyboardInteraction=le}if(le)return void this._clearTimeout();const Re=H.relatedTarget;this._element===Re||this._element.contains(Re)||this._maybeScheduleHide()}_setListeners(){ue.on(this._element,Os,H=>this._onInteraction(H,!0)),ue.on(this._element,vs,H=>this._onInteraction(H,!1)),ue.on(this._element,Rs,H=>this._onInteraction(H,!0)),ue.on(this._element,js,H=>this._onInteraction(H,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(H){return this.each(function(){const le=Ai.getOrCreateInstance(this,H);if("string"==typeof H){if(void 0===le[H])throw new TypeError(`No method named "${H}"`);le[H](this)}})}}return T(Ai),k(Ai),{Alert:ne,Button:Me,Carousel:Lt,Collapse:zt,Dropdown:or,Modal:Nr,Offcanvas:Ar,Popover:jn,ScrollSpy:gi,Tab:ii,Toast:Ai,Tooltip:rn}}),function(I,P,G){"use strict";function e(d){return function(){var S,L,W,q=arguments[0],ge=arguments;for(S=(S="["+(d?d+":":"")+q+"] "+arguments[1].replace(/\{\d+\}/g,function(me){var _e,de=+me.slice(1,-1);return de+2<ge.length?"function"==typeof(_e=ge[de+2])?_e.toString().replace(/ ?\{[\s\S]*$/,""):void 0===_e?"undefined":"string"!=typeof _e?Fe(_e):_e:me}))+"\nhttp://errors.angularjs.org/1.2.22/"+(d?d+"/":"")+q,L=2;L<arguments.length;L++)S=S+(2==L?"?":"&")+"p"+(L-2)+"="+encodeURIComponent("function"==typeof(W=arguments[L])?W.toString().replace(/ \{[\s\S]*$/,""):void 0===W?"undefined":"string"!=typeof W?JSON.stringify(W):W);return new Error(S)}}var g="validity",h=function(d){return D(d)?d.toLowerCase():d},a=Object.prototype.hasOwnProperty,r=function(d){return D(d)?d.toUpperCase():d};"i"!=="I".toLowerCase()&&(h=function(d){return D(d)?d.replace(/[A-Z]/g,function(S){return String.fromCharCode(32|S.charCodeAt(0))}):d},r=function(d){return D(d)?d.replace(/[a-z]/g,function(S){return String.fromCharCode(-33&S.charCodeAt(0))}):d});var p,n,s,t,c,u=[].slice,o=[].push,l=Object.prototype.toString,f=e("ng"),w=I.angular||(I.angular={}),k=["0","0","0"];function O(d){if(null==d||ye(d))return!1;var S=d.length;return!(1!==d.nodeType||!S)||D(d)||ue(d)||0===S||"number"==typeof S&&0<S&&S-1 in d}function M(d,S,L){var W;if(d)if(re(d))for(W in d)"prototype"==W||"length"==W||"name"==W||d.hasOwnProperty&&!d.hasOwnProperty(W)||S.call(L,d[W],W);else if(ue(d)||O(d))for(W=0;W<d.length;W++)S.call(L,d[W],W);else if(d.forEach&&d.forEach!==M)d.forEach(S,L);else for(W in d)d.hasOwnProperty(W)&&S.call(L,d[W],W);return d}function b(d){var S=[];for(var L in d)d.hasOwnProperty(L)&&S.push(L);return S.sort()}function A(d){return function(S,L){d(L,S)}}function _(){for(var d,S=k.length;S;){if(57==(d=k[--S].charCodeAt(0)))return k[S]="A",k.join("");if(90!=d)return k[S]=String.fromCharCode(d+1),k.join("");k[S]="0"}return k.unshift("0"),k.join("")}function E(d,S){S?d.$$hashKey=S:delete d.$$hashKey}function y(d){var S=d.$$hashKey;return M(arguments,function(L){L!==d&&M(L,function(W,q){d[q]=W})}),E(d,S),d}function m(d){return parseInt(d,10)}function R(d,S){return y(new(y(function(){},{prototype:d})),S)}function F(){}function B(d){return d}function J(d){return function(){return d}}function Q(d){return void 0===d}function U(d){return void 0!==d}function N(d){return null!=d&&"object"===_typeof(d)}function D(d){return"string"==typeof d}function ie(d){return"number"==typeof d}function Z(d){return"[object Date]"===l.call(d)}p=m((/msie (\d+)/.exec(h(navigator.userAgent))||[])[1]),isNaN(p)&&(p=m((/trident\/.*; rv:(\d+)/.exec(h(navigator.userAgent))||[])[1])),F.$inject=[],B.$inject=[];var ue=re(Array.isArray)?Array.isArray:function(d){return"[object Array]"===l.call(d)};function re(d){return"function"==typeof d}function te(d){return"[object RegExp]"===l.call(d)}function ye(d){return d&&d.document&&d.location&&d.alert&&d.setInterval}function Se(d){return d&&d.$evalAsync&&d.$watch}function Ee(d){return d&&re(d.then)}var V=String.prototype.trim?function(d){return D(d)?d.trim():d}:function(d){return D(d)?d.replace(/^\s\s*/,"").replace(/\s\s*$/,""):d};function Y(d){return!(!d||!(d.nodeName||d.prop&&d.attr&&d.find))}function z(d,S){if(d.indexOf)return d.indexOf(S);for(var L=0;L<d.length;L++)if(S===d[L])return L;return-1}function T(d,S){var L=z(d,S);return 0<=L&&d.splice(L,1),S}function C(d,S,L,W){if(ye(d)||Se(d))throw f("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(S){if(d===S)throw f("cpi","Can't copy! Source and destination are identical.");if(L=L||[],W=W||[],N(d)){var q=z(L,d);if(-1!==q)return W[q];L.push(d),W.push(S)}var ae;if(ue(d))for(var fe=S.length=0;fe<d.length;fe++)ae=C(d[fe],null,L,W),N(d[fe])&&(L.push(d[fe]),W.push(ae)),S.push(ae);else{var ge=S.$$hashKey;for(var me in M(S,function(_e,de){delete S[de]}),d)ae=C(d[me],null,L,W),N(d[me])&&(L.push(d[me]),W.push(ae)),S[me]=ae;E(S,ge)}}else(S=d)&&(ue(d)?S=C(d,[],L,W):Z(d)?S=new Date(d.getTime()):te(d)?(S=new RegExp(d.source,d.toString().match(/[^\/]*$/)[0])).lastIndex=d.lastIndex:N(d)&&(S=C(d,{},L,W)));return S}function X(d,S){if(ue(d)){S=S||[];for(var L=0;L<d.length;L++)S[L]=d[L]}else if(N(d))for(var W in S=S||{},d)!a.call(d,W)||"$"===W.charAt(0)&&"$"===W.charAt(1)||(S[W]=d[W]);return S||d}function se(d,S){if(d===S)return!0;if(null===d||null===S)return!1;if(d!=d&&S!=S)return!0;var L,W,q,ae=_typeof(d);if(ae==_typeof(S)&&"object"==ae){if(!ue(d)){if(Z(d))return Z(S)&&d.getTime()==S.getTime();if(te(d)&&te(S))return d.toString()==S.toString();if(Se(d)||Se(S)||ye(d)||ye(S)||ue(S))return!1;for(W in q={},d)if("$"!==W.charAt(0)&&!re(d[W])){if(!se(d[W],S[W]))return!1;q[W]=!0}for(W in S)if(!q.hasOwnProperty(W)&&"$"!==W.charAt(0)&&S[W]!==G&&!re(S[W]))return!1;return!0}if(!ue(S))return!1;if((L=d.length)==S.length){for(W=0;W<L;W++)if(!se(d[W],S[W]))return!1;return!0}}return!1}c=p<9?function(d){return(d=d.nodeName?d:d[0]).scopeName&&"HTML"!=d.scopeName?r(d.scopeName+":"+d.nodeName):d.nodeName}:function(d){return d.nodeName?d.nodeName:d[0].nodeName};var ne=function d(){if(U(d.isActive_))return d.isActive_;var S=!(!P.querySelector("[ng-csp]")&&!P.querySelector("[data-ng-csp]"));if(!S)try{new Function("")}catch{S=!0}return d.isActive_=S};function be(d,S,L){return d.concat(u.call(S,L))}function Me(d,S){return u.call(d,S||0)}function $e(d,S){var L=2<arguments.length?Me(arguments,2):[];return!re(S)||S instanceof RegExp?S:L.length?function(){return S.apply(d,arguments.length?L.concat(u.call(arguments,0)):L)}:function(){return arguments.length?S.apply(d,arguments):S.call(d)}}function Ue(d,S){var L=S;return"string"==typeof d&&"$"===d.charAt(0)?L=G:ye(S)?L="$WINDOW":S&&P===S?L="$DOCUMENT":Se(S)&&(L="$SCOPE"),L}function Fe(d,S){return void 0===d?G:JSON.stringify(d,Ue,S?"  ":null)}function qe(d){return D(d)?JSON.parse(d):d}function Mt(d){if("function"==typeof d)d=!0;else if(d&&0!==d.length){var S=h(""+d);d=!("f"==S||"0"==S||"false"==S||"no"==S||"n"==S||"[]"==S)}else d=!1;return d}function tt(d){d=n(d).clone();try{d.empty()}catch{}var S=n("<div>").append(d).html();try{return 3===d[0].nodeType?h(S):S.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(L,W){return"<"+h(W)})}catch{return h(S)}}function ot(d){try{return decodeURIComponent(d)}catch{}}function ht(d){var S,L,W={};return M((d||"").split("&"),function(q){if(q&&(S=q.replace(/\+/g,"%20").split("="),U(L=ot(S[0])))){var ae=!U(S[1])||ot(S[1]);a.call(W,L)?ue(W[L])?W[L].push(ae):W[L]=[W[L],ae]:W[L]=ae}}),W}function kt(d){var S=[];return M(d,function(L,W){ue(L)?M(L,function(q){S.push(Ht(W,!0)+(!0===q?"":"="+Ht(q,!0)))}):S.push(Ht(W,!0)+(!0===L?"":"="+Ht(L,!0)))}),S.length?S.join("&"):""}function wt(d){return Ht(d,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ht(d,S){return encodeURIComponent(d).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,S?"%20":"+")}function Yt(d,S){var L=function(){if((d=n(d)).injector()){var q=d[0]===P?"document":tt(d);throw f("btstrpd","App Already Bootstrapped with this Element '{0}'",q)}(S=S||[]).unshift(["$provide",function(fe){fe.value("$rootElement",d)}]),S.unshift("ng");var ae=Nn(S);return ae.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(fe,ge,me,_e,de){fe.$apply(function(){ge.data("$injector",_e),me(ge)(fe)})}]),ae},W=/^NG_DEFER_BOOTSTRAP!/;if(I&&!W.test(I.name))return L();I.name=I.name.replace(W,""),w.resumeBootstrap=function(q){M(q,function(ae){S.push(ae)}),L()}}var Ln=/[A-Z]/g;function Yn(d,S){return S=S||"_",d.replace(Ln,function(L,W){return(W?S:"")+L.toLowerCase()})}function Zn(d,S,L){if(!d)throw f("areq","Argument '{0}' is {1}",S||"?",L||"required");return d}function ce(d,S,L){return L&&ue(d)&&(d=d[d.length-1]),Zn(re(d),S,"not a function, got "+(d&&"object"===_typeof(d)?d.constructor.name||"Object":_typeof(d))),d}function pe(d,S){if("hasOwnProperty"===d)throw f("badname","hasOwnProperty is not a valid {0} name",S)}function ve(d,S,L){if(!S)return d;for(var q=S.split("."),ae=d,fe=q.length,ge=0;ge<fe;ge++)d&&(d=(ae=d)[q[ge]]);return!L&&re(d)?$e(ae,d):d}function K(d){var S=d[0],L=d[d.length-1];if(S===L)return n(S);var W=S,q=[W];do{if(!(W=W.nextSibling))break;q.push(W)}while(W!==L);return n(q)}var oe={full:"1.2.22",major:1,minor:2,dot:22,codeName:"finicky-pleasure"};_t.expando="ng339";var Ae=_t.cache={},De=1,ze=I.document.addEventListener?function(d,S,L){d.addEventListener(S,L,!1)}:function(d,S,L){d.attachEvent("on"+S,L)},Oe=I.document.removeEventListener?function(d,S,L){d.removeEventListener(S,L,!1)}:function(d,S,L){d.detachEvent("on"+S,L)};_t._data=function(d){return this.cache[d[this.expando]]||{}};var bt=/([\:\-\_]+(.))/g,It=/^moz([A-Z])/,gt=e("jqLite");function Rt(d){return d.replace(bt,function(S,L,W,q){return q?W.toUpperCase():W}).replace(It,"Moz$1")}function Xt(d,S,L,W){var q=s.fn[d];function ae(fe){var ge,me,_e,de,ke,Ne,Te,we=L&&fe?[this.filter(fe)]:[this],Ie=S;if(!W||null!=fe)for(;we.length;)for(me=0,_e=(ge=we.shift()).length;me<_e;me++)for(de=n(ge[me]),Ie?de.triggerHandler("$destroy"):Ie=!Ie,ke=0,Ne=(Te=de.children()).length;ke<Ne;ke++)we.push(s(Te[ke]));return q.apply(this,arguments)}ae.$original=q=q.$original||q,s.fn[d]=ae}var Ft=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Qt=/<|&#?\w+;/,Lt=/<([\w:]+)/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xt(d){return!Qt.test(d)}function _t(d){if(d instanceof _t)return d;if(D(d)&&(d=V(d)),!(this instanceof _t)){if(D(d)&&"<"!=d.charAt(0))throw gt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new _t(d)}D(d)?(tn(this,function Et(d,S){var L;return S=S||P,(L=Ft.exec(d))?[S.createElement(L[1])]:function(W,q){var ae,fe,ge,me,_e,de,ke=q.createDocumentFragment(),Ne=[];if(xt(W))Ne.push(q.createTextNode(W));else{for(ae=ke.appendChild(q.createElement("div")),fe=(Lt.exec(W)||["",""])[1].toLowerCase(),ae.innerHTML="<div>&#160;</div>"+(ge=$t[fe]||$t._default)[1]+W.replace(Ut,"<$1></$2>")+ge[2],ae.removeChild(ae.firstChild),me=ge[0];me--;)ae=ae.lastChild;for(_e=0,de=ae.childNodes.length;_e<de;++_e)Ne.push(ae.childNodes[_e]);(ae=ke.firstChild).textContent=""}return ke.textContent="",ke.innerHTML="",Ne}(d,S)}(d)),n(P.createDocumentFragment()).append(this)):tn(this,d)}function en(d){return d.cloneNode(!0)}function Ct(d){Je(d);for(var S=0,L=d.childNodes||[];S<L.length;S++)Ct(L[S])}function We(d,S,L,W){if(U(W))throw gt("offargs","jqLite#off() does not support the `selector` argument");var q=at(d,"events");at(d,"handle")&&(Q(S)?M(q,function(ae,fe){Oe(d,fe,ae),delete q[fe]}):M(S.split(" "),function(ae){Q(L)?(Oe(d,ae,q[ae]),delete q[ae]):T(q[ae]||[],L)}))}function Je(d,S){var L=d.ng339,W=Ae[L];if(W){if(S)return void delete Ae[L].data[S];W.handle&&(W.events.$destroy&&W.handle({},"$destroy"),We(d)),delete Ae[L],d.ng339=G}}function at(d,S,L){var W=d.ng339,q=Ae[W||-1];if(!U(L))return q&&q[S];q||(d.ng339=W=++De,q=Ae[W]={}),q[S]=L}function it(d,S,L){var W=at(d,"data"),q=U(L),ae=!q&&U(S),fe=ae&&!N(S);if(W||fe||at(d,"data",W={}),q)W[S]=L;else{if(!ae)return W;if(fe)return W&&W[S];y(W,S)}}function ut(d,S){return!!d.getAttribute&&-1<(" "+(d.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+S+" ")}function ft(d,S){S&&d.setAttribute&&M(S.split(" "),function(L){d.setAttribute("class",V((" "+(d.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+V(L)+" "," ")))})}function zt(d,S){if(S&&d.setAttribute){var L=(" "+(d.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");M(S.split(" "),function(W){W=V(W),-1===L.indexOf(" "+W+" ")&&(L+=W+" ")}),d.setAttribute("class",V(L))}}function tn(d,S){if(S){S=S.nodeName||!U(S.length)||ye(S)?[S]:S;for(var L=0;L<S.length;L++)d.push(S[L])}}function Nt(d,S){return nn(d,"$"+(S||"ngController")+"Controller")}function nn(d,S,L){9==d.nodeType&&(d=d.documentElement);for(var W=ue(S)?S:[S];d;){for(var q=0,ae=W.length;q<ae;q++)if((L=n.data(d,W[q]))!==G)return L;d=d.parentNode||11===d.nodeType&&d.host}}function pn(d){for(var S=0,L=d.childNodes;S<L.length;S++)Ct(L[S]);for(;d.firstChild;)d.removeChild(d.firstChild)}$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td;var on=_t.prototype={ready:function(d){var S=!1;function L(){S||(S=!0,d())}"complete"===P.readyState?setTimeout(L):(this.on("DOMContentLoaded",L),_t(I).on("load",L))},toString:function(){var d=[];return M(this,function(S){d.push(""+S)}),"["+d.join(", ")+"]"},eq:function(d){return n(0<=d?this[d]:this[this.length+d])},length:0,push:o,sort:[].sort,splice:[].splice},Pt={};M("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(d){Pt[h(d)]=d});var Jt={};function qt(d,S){var L=Pt[S.toLowerCase()];return L&&Jt[d.nodeName]&&L}function Tt(d,S){var L,W=_typeof(d);return"function"==W||"object"==W&&null!==d?"function"==typeof(L=d.$$hashKey)?L=d.$$hashKey():L===G&&(L=d.$$hashKey=(S||_)()):L=d,W+":"+L}function At(d,S){if(S){var L=0;this.nextUid=function(){return++L}}M(d,this.put,this)}M("input,select,option,textarea,button,form,details".split(","),function(d){Jt[r(d)]=!0}),M({data:it,removeData:Je},function(d,S){_t[S]=d}),M({data:it,inheritedData:nn,scope:function(d){return n.data(d,"$scope")||nn(d.parentNode||d,["$isolateScope","$scope"])},isolateScope:function(d){return n.data(d,"$isolateScope")||n.data(d,"$isolateScopeNoTemplate")},controller:Nt,injector:function(d){return nn(d,"$injector")},removeAttr:function(d,S){d.removeAttribute(S)},hasClass:ut,css:function(d,S,L){var W;if(S=Rt(S),!U(L))return p<=8&&""===(W=d.currentStyle&&d.currentStyle[S])&&(W="auto"),W=W||d.style[S],p<=8&&(W=""===W?G:W),W;d.style[S]=L},attr:function(d,S,L){var W=h(S);if(Pt[W]){if(!U(L))return d[S]||(d.attributes.getNamedItem(S)||F).specified?W:G;L?(d[S]=!0,d.setAttribute(S,W)):(d[S]=!1,d.removeAttribute(W))}else if(U(L))d.setAttribute(S,L);else if(d.getAttribute){var q=d.getAttribute(S,2);return null===q?G:q}},prop:function(d,S,L){if(!U(L))return d[S];d[S]=L},text:function(){var d=[];return p<9?(d[1]="innerText",d[3]="nodeValue"):d[1]=d[3]="textContent",S.$dv="",S;function S(L,W){var q=d[L.nodeType];if(Q(W))return q?L[q]:"";L[q]=W}}(),val:function(d,S){if(Q(S)){if("SELECT"===c(d)&&d.multiple){var L=[];return M(d.options,function(W){W.selected&&L.push(W.value||W.text)}),0===L.length?null:L}return d.value}d.value=S},html:function(d,S){if(Q(S))return d.innerHTML;for(var L=0,W=d.childNodes;L<W.length;L++)Ct(W[L]);d.innerHTML=S},empty:pn},function(d,S){_t.prototype[S]=function(L,W){var q,ae,fe=this.length;if(d!==pn&&(2==d.length&&d!==ut&&d!==Nt?L:W)===G){if(N(L)){for(q=0;q<fe;q++)if(d===it)d(this[q],L);else for(ae in L)d(this[q],ae,L[ae]);return this}for(var ge=d.$dv,me=ge===G?Math.min(fe,1):fe,_e=0;_e<me;_e++){var de=d(this[_e],L,W);ge=ge?ge+de:de}return ge}for(q=0;q<fe;q++)d(this[q],L,W);return this}}),M({removeData:Je,dealoc:Ct,on:function d(S,L,W,q){if(U(q))throw gt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var ge,me,_e,ae=at(S,"events"),fe=at(S,"handle");ae||at(S,"events",ae={}),fe||at(S,"handle",(me=ae,(_e=function(de,ke){if(de.preventDefault||(de.preventDefault=function(){de.returnValue=!1}),de.stopPropagation||(de.stopPropagation=function(){de.cancelBubble=!0}),de.target||(de.target=de.srcElement||P),Q(de.defaultPrevented)){var Ne=de.preventDefault;de.preventDefault=function(){de.defaultPrevented=!0,Ne.call(de)},de.defaultPrevented=!1}de.isDefaultPrevented=function(){return de.defaultPrevented||!1===de.returnValue},M(X(me[ke||de.type]||[]),function(Te){Te.call(ge,de)}),p<=8?(de.preventDefault=null,de.stopPropagation=null,de.isDefaultPrevented=null):(delete de.preventDefault,delete de.stopPropagation,delete de.isDefaultPrevented)}).elem=ge=S,fe=_e)),M(L.split(" "),function(ge){var me=ae[ge];if(!me){if("mouseenter"==ge||"mouseleave"==ge){var _e=P.body.contains||P.body.compareDocumentPosition?function(de,ke){var Ne=9===de.nodeType?de.documentElement:de,Te=ke&&ke.parentNode;return de===Te||!(!Te||1!==Te.nodeType||!(Ne.contains?Ne.contains(Te):de.compareDocumentPosition&&16&de.compareDocumentPosition(Te)))}:function(de,ke){if(ke)for(;ke=ke.parentNode;)if(ke===de)return!0;return!1};ae[ge]=[],d(S,{mouseleave:"mouseout",mouseenter:"mouseover"}[ge],function(de){var ke=de.relatedTarget;ke&&(ke===this||_e(this,ke))||fe(de,ge)})}else ze(S,ge,fe),ae[ge]=[];me=ae[ge]}me.push(W)})},off:We,one:function(d,S,L){(d=n(d)).on(S,function W(){d.off(S,L),d.off(S,W)}),d.on(S,L)},replaceWith:function(d,S){var L,W=d.parentNode;Ct(d),M(new _t(S),function(q){L?W.insertBefore(q,L.nextSibling):W.replaceChild(q,d),L=q})},children:function(d){var S=[];return M(d.childNodes,function(L){1===L.nodeType&&S.push(L)}),S},contents:function(d){return d.contentDocument||d.childNodes||[]},append:function(d,S){M(new _t(S),function(L){1!==d.nodeType&&11!==d.nodeType||d.appendChild(L)})},prepend:function(d,S){if(1===d.nodeType){var L=d.firstChild;M(new _t(S),function(W){d.insertBefore(W,L)})}},wrap:function(d,S){S=n(S)[0];var L=d.parentNode;L&&L.replaceChild(S,d),S.appendChild(d)},remove:function(d){Ct(d);var S=d.parentNode;S&&S.removeChild(d)},after:function(d,S){var L=d,W=d.parentNode;M(new _t(S),function(q){W.insertBefore(q,L.nextSibling),L=q})},addClass:zt,removeClass:ft,toggleClass:function(d,S,L){S&&M(S.split(" "),function(W){var q=L;Q(q)&&(q=!ut(d,W)),(q?zt:ft)(d,W)})},parent:function(d){var S=d.parentNode;return S&&11!==S.nodeType?S:null},next:function(d){if(d.nextElementSibling)return d.nextElementSibling;for(var S=d.nextSibling;null!=S&&1!==S.nodeType;)S=S.nextSibling;return S},find:function(d,S){return d.getElementsByTagName?d.getElementsByTagName(S):[]},clone:en,triggerHandler:function(d,S,L){var W,q,ae,fe=S.type||S,ge=(at(d,"events")||{})[fe];ge&&(W={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:F,type:fe,target:d},S.type&&(W=y(W,S)),q=X(ge),ae=L?[W].concat(L):[W],M(q,function(me){me.apply(d,ae)}))}},function(d,S){_t.prototype[S]=function(L,W,q){for(var ae,fe=0;fe<this.length;fe++)Q(ae)?U(ae=d(this[fe],L,W,q))&&(ae=n(ae)):tn(ae,d(this[fe],L,W,q));return U(ae)?ae:this},_t.prototype.bind=_t.prototype.on,_t.prototype.unbind=_t.prototype.off}),At.prototype={put:function(d,S){this[Tt(d,this.nextUid)]=S},get:function(d){return this[Tt(d,this.nextUid)]},remove:function(d){var S=this[d=Tt(d,this.nextUid)];return delete this[d],S}};var sn=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,hn=/,/,Kt=/^\s*(_?)(\S+?)\1\s*$/,dn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Rn=e("$injector");function Sn(d){var S,L;return"function"==typeof d?(S=d.$inject)||(S=[],d.length&&M(d.toString().replace(dn,"").match(sn)[1].split(hn),function(W){W.replace(Kt,function(q,ae,fe){S.push(fe)})}),d.$inject=S):ue(d)?(ce(d[L=d.length-1],"fn"),S=d.slice(0,L)):ce(d,"fn",!0),S}function Nn(d){var S={},L="Provider",W=[],q=new At([],!0),ae={$provide:{provider:_e(de),factory:_e(ke),service:_e(function(Te,we){return ke(Te,["$injector",function(Ie){return Ie.instantiate(we)}])}),value:_e(function(Te,we){return ke(Te,J(we))}),constant:_e(function(Te,we){pe(Te,"constant"),ae[Te]=we,ge[Te]=we}),decorator:function(Te,we){var Ie=fe.get(Te+L),xe=Ie.$get;Ie.$get=function(){var Pe=me.invoke(xe,Ie);return me.invoke(we,null,{$delegate:Pe})}}}},fe=ae.$injector=Ne(ae,function(){throw Rn("unpr","Unknown provider: {0}",W.join(" <- "))}),ge={},me=ge.$injector=Ne(ge,function(Te){var we=fe.get(Te+L);return me.invoke(we.$get,we)});return M(function Te(we){var Ie,xe,Pe,rt,Ge=[];return M(we,function(Ve){if(!q.get(Ve)){q.put(Ve,!0);try{if(D(Ve))for(Ie=t(Ve),Ge=Ge.concat(Te(Ie.requires)).concat(Ie._runBlocks),Pe=0,rt=(xe=Ie._invokeQueue).length;Pe<rt;Pe++){var Ye=xe[Pe],et=fe.get(Ye[0]);et[Ye[1]].apply(et,Ye[2])}else re(Ve)||ue(Ve)?Ge.push(fe.invoke(Ve)):ce(Ve,"module")}catch(lt){throw ue(Ve)&&(Ve=Ve[Ve.length-1]),lt.message&&lt.stack&&-1==lt.stack.indexOf(lt.message)&&(lt=lt.message+"\n"+lt.stack),Rn("modulerr","Failed to instantiate module {0} due to:\n{1}",Ve,lt.stack||lt.message||lt)}}}),Ge}(d),function(Te){me.invoke(Te||F)}),me;function _e(Te){return function(we,Ie){if(!N(we))return Te(we,Ie);M(we,A(Te))}}function de(Te,we){if(pe(Te,"service"),(re(we)||ue(we))&&(we=fe.instantiate(we)),!we.$get)throw Rn("pget","Provider '{0}' must define $get factory method.",Te);return ae[Te+L]=we}function ke(Te,we){return de(Te,{$get:we})}function Ne(Te,we){function Ie(Pe){if(Te.hasOwnProperty(Pe)){if(Te[Pe]===S)throw Rn("cdep","Circular dependency found: {0}",Pe+" <- "+W.join(" <- "));return Te[Pe]}try{return W.unshift(Pe),Te[Pe]=S,Te[Pe]=we(Pe)}catch(rt){throw Te[Pe]===S&&delete Te[Pe],rt}finally{W.shift()}}function xe(Pe,rt,Ge){var Ve,Ye,et,lt=[],Ze=Sn(Pe);for(Ye=0,Ve=Ze.length;Ye<Ve;Ye++){if("string"!=typeof(et=Ze[Ye]))throw Rn("itkn","Incorrect injection token! Expected service name as string, got {0}",et);lt.push(Ge&&Ge.hasOwnProperty(et)?Ge[et]:Ie(et))}return ue(Pe)&&(Pe=Pe[Ve]),Pe.apply(rt,lt)}return{invoke:xe,instantiate:function(Pe,rt){var Ge,Ve,Ye=function(){};return Ye.prototype=(ue(Pe)?Pe[Pe.length-1]:Pe).prototype,N(Ve=xe(Pe,Ge=new Ye,rt))||re(Ve)?Ve:Ge},get:Ie,annotate:Sn,has:function(Pe){return ae.hasOwnProperty(Pe+L)||Te.hasOwnProperty(Pe)}}}}function Un(){var d=!0;this.disableAutoScrolling=function(){d=!1},this.$get=["$window","$location","$rootScope",function(S,L,W){var q=S.document;function ae(){var fe,ge,me,_e=L.hash();_e?(fe=q.getElementById(_e))?fe.scrollIntoView():(ge=q.getElementsByName(_e),me=null,M(ge,function(de){me||"a"!==h(de.nodeName)||(me=de)}),(fe=me)?fe.scrollIntoView():"top"===_e&&S.scrollTo(0,0)):S.scrollTo(0,0)}return d&&W.$watch(function(){return L.hash()},function(){W.$evalAsync(ae)}),ae}]}var Xn=e("$animate"),Hn=["$provide",function(d){this.$$selectors={},this.register=function(S,L){var W=S+"-animation";if(S&&"."!=S.charAt(0))throw Xn("notcsel","Expecting class selector starting with '.' got '{0}'.",S);this.$$selectors[S.substr(1)]=W,d.factory(W,L)},this.classNameFilter=function(S){return 1===arguments.length&&(this.$$classNameFilter=S instanceof RegExp?S:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(S,L){function W(q){q&&L(q)}return{enter:function(q,ae,fe,ge){fe?fe.after(q):(ae&&ae[0]||(ae=fe.parent()),ae.append(q)),W(ge)},leave:function(q,ae){q.remove(),W(ae)},move:function(q,ae,fe,ge){this.enter(q,ae,fe,ge)},addClass:function(q,ae,fe){ae=D(ae)?ae:ue(ae)?ae.join(" "):"",M(q,function(ge){zt(ge,ae)}),W(fe)},removeClass:function(q,ae,fe){ae=D(ae)?ae:ue(ae)?ae.join(" "):"",M(q,function(ge){ft(ge,ae)}),W(fe)},setClass:function(q,ae,fe,ge){M(q,function(me){zt(me,ae),ft(me,fe)}),W(ge)},enabled:F}}]}];function Qn(){this.$get=["$$rAF","$timeout",function(d,S){return d.supported?function(L){return d(L)}:function(L){return S(L,0,!1)}}]}function ci(d,S,L,W){var q=this,ae=S[0],fe=d.location,ge=d.history,me=d.setTimeout,_e=d.clearTimeout,de={};q.isMock=!1;var ke=0,Ne=[];function Te(nt){try{nt.apply(null,Me(arguments,1))}finally{if(0==--ke)for(;Ne.length;)try{Ne.pop()()}catch(mt){L.error(mt)}}}q.$$completeOutstandingRequest=Te,q.$$incOutstandingRequestCount=function(){ke++},q.notifyWhenNoOutstandingRequests=function(nt){M(Ie,function(mt){mt()}),0===ke?nt():Ne.push(nt)};var we,Ie=[];q.addPollFn=function(nt){return Q(we)&&(Zt=me,function St(){M(Ie,function(Vt){Vt()}),we=Zt(St,100)}()),Ie.push(nt),nt;var Zt};var xe=fe.href,Pe=S.find("base"),rt=null;q.url=function(nt,mt){return fe!==d.location&&(fe=d.location),ge!==d.history&&(ge=d.history),nt?xe==nt?void 0:(xe=nt,W.history?mt?ge.replaceState(null,"",nt):(ge.pushState(null,"",nt),Pe.attr("href",Pe.attr("href"))):(rt=nt,mt?fe.replace(nt):fe.href=nt),q):rt||fe.href.replace(/%27/g,"'")};var Ge=[],Ve=!1;function Ye(){rt=null,xe!=q.url()&&(xe=q.url(),M(Ge,function(nt){nt(q.url())}))}q.onUrlChange=function(nt){return Ve||(W.history&&n(d).on("popstate",Ye),W.hashchange?n(d).on("hashchange",Ye):q.addPollFn(Ye),Ve=!0),Ge.push(nt),nt},q.baseHref=function(){var nt=Pe.attr("href");return nt?nt.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var et={},lt="",Ze=q.baseHref();q.cookies=function(nt,mt){var Zt,St,Vt,an,Mn;if(!nt){if(ae.cookie!==lt)for(St=(lt=ae.cookie).split("; "),et={},an=0;an<St.length;an++)0<(Mn=(Vt=St[an]).indexOf("="))&&(nt=unescape(Vt.substring(0,Mn)),et[nt]===G&&(et[nt]=unescape(Vt.substring(Mn+1))));return et}mt===G?ae.cookie=escape(nt)+"=;path="+Ze+";expires=Thu, 01 Jan 1970 00:00:00 GMT":D(mt)&&4096<(Zt=(ae.cookie=escape(nt)+"="+escape(mt)+";path="+Ze).length+1)&&L.warn("Cookie '"+nt+"' possibly not set or overflowed because it was too large ("+Zt+" > 4096 bytes)!")},q.defer=function(nt,mt){var Zt;return ke++,Zt=me(function(){delete de[Zt],Te(nt)},mt||0),de[Zt]=!0,Zt},q.defer.cancel=function(nt){return!!de[nt]&&(delete de[nt],_e(nt),Te(F),!0)}}function Kr(){this.$get=["$window","$log","$sniffer","$document",function(d,S,L,W){return new ci(d,W,S,L)}]}function yi(){this.$get=function(){var d={};function S(L,W){if(L in d)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",L);var q=0,ae=y({},W,{id:L}),fe={},ge=W&&W.capacity||Number.MAX_VALUE,me={},_e=null,de=null;return d[L]={put:function(Te,we){if(ge<Number.MAX_VALUE&&ke(me[Te]||(me[Te]={key:Te})),!Q(we))return Te in fe||q++,fe[Te]=we,ge<q&&this.remove(de.key),we},get:function(Te){if(ge<Number.MAX_VALUE){var we=me[Te];if(!we)return;ke(we)}return fe[Te]},remove:function(Te){if(ge<Number.MAX_VALUE){var we=me[Te];if(!we)return;we==_e&&(_e=we.p),we==de&&(de=we.n),Ne(we.n,we.p),delete me[Te]}delete fe[Te],q--},removeAll:function(){fe={},q=0,me={},_e=de=null},destroy:function(){me=ae=fe=null,delete d[L]},info:function(){return y({},ae,{size:q})}};function ke(Te){Te!=_e&&(de?de==Te&&(de=Te.n):de=Te,Ne(Te.n,Te.p),Ne(Te,_e),(_e=Te).n=null)}function Ne(Te,we){Te!=we&&(Te&&(Te.p=we),we&&(we.n=Te))}}return S.info=function(){var L={};return M(d,function(W,q){L[q]=W.info()}),L},S.get=function(L){return d[L]},S}}function or(){this.$get=["$cacheFactory",function(d){return d("templates")}]}var Vn=e("$compile");function mr(d,S){var L={},W=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,q=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,ae=/^(on[a-z]+|formaction)$/;this.directive=function fe(ge,me){return pe(ge,"directive"),D(ge)?(Zn(me,"directiveFactory"),L.hasOwnProperty(ge)||(L[ge]=[],d.factory(ge+"Directive",["$injector","$exceptionHandler",function(_e,de){var ke=[];return M(L[ge],function(Ne,Te){try{var we=_e.invoke(Ne);re(we)?we={compile:J(we)}:!we.compile&&we.link&&(we.compile=J(we.link)),we.priority=we.priority||0,we.index=Te,we.name=we.name||ge,we.require=we.require||we.controller&&we.name,we.restrict=we.restrict||"A",ke.push(we)}catch(Ie){de(Ie)}}),ke}])),L[ge].push(me)):M(ge,A(fe)),this},this.aHrefSanitizationWhitelist=function(fe){return U(fe)?(S.aHrefSanitizationWhitelist(fe),this):S.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(fe){return U(fe)?(S.imgSrcSanitizationWhitelist(fe),this):S.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(fe,ge,me,_e,de,ke,Ne,Te,we,Ie,xe,Pe){var rt=function(Be,Xe){this.$$element=Be,this.$attr=Xe||{}};rt.prototype={$normalize:Fn,$addClass:function(Be){Be&&0<Be.length&&xe.addClass(this.$$element,Be)},$removeClass:function(Be){Be&&0<Be.length&&xe.removeClass(this.$$element,Be)},$updateClass:function(Be,Xe){var pt=lr(Be,Xe),st=lr(Xe,Be);0===pt.length?xe.removeClass(this.$$element,st):0===st.length?xe.addClass(this.$$element,pt):xe.setClass(this.$$element,pt,st)},$set:function(Be,Xe,pt,st){var Wt,Bt=qt(this.$$element[0],Be);Bt&&(this.$$element.prop(Be,Xe),st=Bt),this[Be]=Xe,st?this.$attr[Be]=st:(st=this.$attr[Be])||(this.$attr[Be]=st=Yn(Be,"-")),("A"===(Wt=c(this.$$element))&&"href"===Be||"IMG"===Wt&&"src"===Be)&&(this[Be]=Xe=Pe(Xe,"src"===Be)),!1!==pt&&(null===Xe||Xe===G?this.$$element.removeAttr(st):this.$$element.attr(st,Xe));var jt=this.$$observers;jt&&M(jt[Be],function(un){try{un(Xe)}catch(Gt){me(Gt)}})},$observe:function(Be,Xe){var pt=this,st=pt.$$observers||(pt.$$observers={}),Wt=st[Be]||(st[Be]=[]);return Wt.push(Xe),Te.$evalAsync(function(){Wt.$$inter||Xe(pt[Be])}),Xe}};var Ge=ge.startSymbol(),Ve=ge.endSymbol(),Ye="{{"==Ge||"}}"==Ve?B:function(Be){return Be.replace(/\{\{/g,Ge).replace(/}}/g,Ve)},et=/^ngAttr[A-Z]/;return lt;function lt(Be,Xe,pt,st,Wt){Be instanceof n||(Be=n(Be)),M(Be,function(jt,un){3==jt.nodeType&&jt.nodeValue.match(/\S+/)&&(Be[un]=jt=n(jt).wrap("<span></span>").parent()[0])});var Bt=nt(Be,Xe,Be,pt,st,Wt);return Ze(Be,"ng-scope"),function(jt,un,Gt,wn){Zn(jt,"scope");var ct=un?on.clone.call(Be):Be;M(Gt,function(En,Wn){ct.data("$"+Wn+"Controller",En)});for(var ln=0,cn=ct.length;ln<cn;ln++){var On=ct[ln].nodeType;1!==On&&9!==On||ct.eq(ln).data("$scope",jt)}return un&&un(ct,jt),Bt&&Bt(jt,ct,ct,wn),ct}}function Ze(Be,Xe){try{Be.addClass(Xe)}catch{}}function nt(Be,Xe,pt,st,Wt,Bt){for(var jt,un,Gt,wn,ct,ln,cn=[],On=0;On<Be.length;On++)jt=new rt,(Gt=(un=Zt(Be[On],[],jt,0===On?st:G,Wt)).length?an(un,Be[On],jt,Xe,pt,null,[],[],Bt):null)&&Gt.scope&&Ze(jt.$$element,"ng-scope"),ct=Gt&&Gt.terminal||!(wn=Be[On].childNodes)||!wn.length?null:nt(wn,Gt?(Gt.transcludeOnThisElement||!Gt.templateOnThisElement)&&Gt.transclude:Xe),cn.push(Gt,ct),ln=ln||Gt||ct,Bt=null;return ln?function(En,Wn,Dn,gn){var xn,Jn,ar,Sr,tr,Gn,Er,_r=Wn.length,Yr=new Array(_r);for(tr=0;tr<_r;tr++)Yr[tr]=Wn[tr];for(Er=tr=0,Gn=cn.length;tr<Gn;Er++)ar=Yr[Er],xn=cn[tr++],Jn=cn[tr++],xn?(xn.scope?(Sr=En.$new(),n.data(ar,"$scope",Sr)):Sr=En,xn(Jn,Sr,ar,Dn,xn.transcludeOnThisElement?mt(En,xn.transclude,gn):!xn.templateOnThisElement&&gn?gn:!gn&&Xe?mt(En,Xe):null)):Jn&&Jn(En,ar.childNodes,G,gn)}:null}function mt(Be,Xe,pt){return function(st,Wt,Bt){var jt=!1;st||(jt=(st=Be.$new()).$$transcluded=!0);var un=Xe(st,Wt,Bt,pt);return jt&&un.on("$destroy",function(){st.$destroy()}),un}}function Zt(Be,Xe,pt,st,Wt){var Bt,jt,Sr,Gn,Gt=pt.$attr;switch(Be.nodeType){case 1:er(Xe,Fn(c(Be).toLowerCase()),"E",st,Wt);for(var wn,ct,ln,cn,On,En,Wn=Be.attributes,Dn=0,gn=Wn&&Wn.length;Dn<gn;Dn++){var xn=!1,Jn=!1;if(wn=Wn[Dn],!p||8<=p||wn.specified){ct=wn.name,On=V(wn.value),cn=Fn(ct),(En=et.test(cn))&&(ct=Yn(cn.substr(6),"-"));var ar=cn.replace(/(Start|End)$/,"");cn===ar+"Start"&&(Jn=(xn=ct).substr(0,ct.length-5)+"end",ct=ct.substr(0,ct.length-6)),Gt[ln=Fn(ct.toLowerCase())]=ct,!En&&pt.hasOwnProperty(ln)||(pt[ln]=On,qt(Be,ln)&&(pt[ln]=!0)),Cn(Be,Xe,On,ln),er(Xe,ln,"A",st,Wt,xn,Jn)}}if(D(jt=Be.className)&&""!==jt)for(;Bt=q.exec(jt);)er(Xe,ln=Fn(Bt[2]),"C",st,Wt)&&(pt[ln]=V(Bt[3])),jt=jt.substr(Bt.index+Bt[0].length);break;case 3:Sr=Xe,(Gn=ge(Be.nodeValue,!0))&&Sr.push({priority:0,compile:function(Er){var _r=Er.parent().length;return _r&&Ze(Er.parent(),"ng-binding"),function(Yr,ai){var Ri=ai.parent(),hs=Ri.data("$binding")||[];hs.push(Gn),Ri.data("$binding",hs),_r||Ze(Ri,"ng-binding"),Yr.$watch(Gn,function(ys){ai[0].nodeValue=ys})}}});break;case 8:try{(Bt=W.exec(Be.nodeValue))&&er(Xe,ln=Fn(Bt[1]),"M",st,Wt)&&(pt[ln]=V(Bt[2]))}catch{}}return Xe.sort(An),Xe}function St(Be,Xe,pt){var st=[],Wt=0;if(Xe&&Be.hasAttribute&&Be.hasAttribute(Xe))do{if(!Be)throw Vn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",Xe,pt);1==Be.nodeType&&(Be.hasAttribute(Xe)&&Wt++,Be.hasAttribute(pt)&&Wt--),st.push(Be),Be=Be.nextSibling}while(0<Wt);else st.push(Be);return n(st)}function Vt(Be,Xe,pt){return function(st,Wt,Bt,jt,un){return Wt=St(Wt[0],Xe,pt),Be(st,Wt,Bt,jt,un)}}function an(Be,Xe,pt,st,Wt,Bt,jt,un,Gt){Gt=Gt||{};for(var wn,ct,ln,cn,On,En,Wn=-Number.MAX_VALUE,Dn=Gt.controllerDirectives,gn=Gt.newIsolateScopeDirective,xn=Gt.templateDirective,Jn=Gt.nonTlbTranscludeDirective,ar=!1,Sr=!1,tr=Gt.hasElementTranscludeDirective,Gn=pt.$$element=n(Xe),Er=Bt,$r=st,_r=0,Yr=Be.length;_r<Yr;_r++){var ai=(ct=Be[_r]).$$start,Ri=ct.$$end;if(ai&&(Gn=St(Xe,ai,Ri)),cn=G,Wn>ct.priority)break;if((En=ct.scope)&&(wn=wn||ct,ct.templateUrl||(Bn("new/isolated scope",gn,ct,Gn),N(En)&&(gn=ct))),ln=ct.name,!ct.templateUrl&&ct.controller&&(En=ct.controller,Bn("'"+ln+"' controller",(Dn=Dn||{})[ln],ct,Gn),Dn[ln]=ct),(En=ct.transclude)&&(ar=!0,ct.$$tlb||(Bn("transclusion",Jn,ct,Gn),Jn=ct),$r="element"==En?(tr=!0,Wn=ct.priority,cn=Gn,Gn=pt.$$element=n(P.createComment(" "+ln+": "+pt[ln]+" ")),Xe=Gn[0],bn(Wt,Me(cn),Xe),lt(cn,st,Wn,Er&&Er.name,{nonTlbTranscludeDirective:Jn})):(cn=n(en(Xe)).contents(),Gn.empty(),lt(cn,st))),ct.template)if(Sr=!0,Bn("template",xn,ct,Gn),En=re((xn=ct).template)?ct.template(Gn,pt):ct.template,En=Ye(En),ct.replace){if(Er=ct,cn=xt(En)?[]:n(V(En)),Xe=cn[0],1!=cn.length||1!==Xe.nodeType)throw Vn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",ln,"");bn(Wt,Gn,Xe);var hs={$attr:{}},ys=Zt(Xe,[],hs),Qs=Be.splice(_r+1,Be.length-(_r+1));gn&&Mn(ys),Be=Be.concat(ys).concat(Qs),_n(pt,hs),Yr=Be.length}else Gn.html(En);if(ct.templateUrl)Sr=!0,Bn("template",xn,ct,Gn),(xn=ct).replace&&(Er=ct),ji=mn(Be.splice(_r,Be.length-_r),Gn,pt,Wt,ar&&$r,jt,un,{controllerDirectives:Dn,newIsolateScopeDirective:gn,templateDirective:xn,nonTlbTranscludeDirective:Jn}),Yr=Be.length;else if(ct.compile)try{re(On=ct.compile(Gn,pt,$r))?Ws(null,On,ai,Ri):On&&Ws(On.pre,On.post,ai,Ri)}catch(fr){me(fr,tt(Gn))}ct.terminal&&(ji.terminal=!0,Wn=Math.max(Wn,ct.priority))}return ji.scope=wn&&!0===wn.scope,ji.transcludeOnThisElement=ar,ji.templateOnThisElement=Sr,ji.transclude=$r,Gt.hasElementTranscludeDirective=tr,ji;function Ws(fr,Pn,Br,Ii){fr&&(Br&&(fr=Vt(fr,Br,Ii)),fr.require=ct.require,fr.directiveName=ln,(gn===ct||ct.$$isolateScope)&&(fr=In(fr,{isolateScope:!0})),jt.push(fr)),Pn&&(Br&&(Pn=Vt(Pn,Br,Ii)),Pn.require=ct.require,Pn.directiveName=ln,(gn===ct||ct.$$isolateScope)&&(Pn=In(Pn,{isolateScope:!0})),un.push(Pn))}function Us(fr,Pn,Br,Ii){var dr,sr="data",pr=!1;if(D(Pn)){for(;"^"==(dr=Pn.charAt(0))||"?"==dr;)Pn=Pn.substr(1),"^"==dr&&(sr="inheritedData"),pr=pr||"?"==dr;if(dr=null,Ii&&"data"===sr&&(dr=Ii[Pn]),!(dr=dr||Br[sr]("$"+Pn+"Controller"))&&!pr)throw Vn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",Pn,fr);return dr}return ue(Pn)&&(dr=[],M(Pn,function(Jr){dr.push(Us(fr,Jr,Br,Ii))})),dr}function ji(fr,Pn,Br,Ii,dr){var sr,pr,Jr,Gs,Xr,Bs,ur,bs,_s={};if(sr=Xe===Br?pt:X(pt,new rt(n(Br),pt.$attr)),pr=sr.$$element,gn){var Ks=/^\s*([@=&])(\??)\s*(\w*)\s*$/;ur=Pn.$new(!0),pr.data(!xn||xn!==gn&&xn!==gn.$$originalDirective?"$isolateScopeNoTemplate":"$isolateScope",ur),Ze(pr,"ng-isolate-scope"),M(gn.scope,function(rr,ir){var Qr,ui,Js,Hs,Vs=rr.match(Ks)||[],li=Vs[3]||ir,Zs="?"==Vs[2],Xs=Vs[1];switch(ur.$$isolateBindings[ir]=Xs+li,Xs){case"@":sr.$observe(li,function(Ir){ur[ir]=Ir}),sr.$$observers[li].$$scope=Pn,sr[li]&&(ur[ir]=ge(sr[li])(Pn));break;case"=":if(Zs&&!sr[li])return;ui=ke(sr[li]),Hs=ui.literal?se:function(Ir,zs){return Ir===zs||Ir!=Ir&&zs!=zs},Js=ui.assign||function(){throw Qr=ur[ir]=ui(Pn),Vn("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",sr[li],gn.name)},Qr=ur[ir]=ui(Pn),ur.$watch(function(){var Ir=ui(Pn);return Hs(Ir,ur[ir])||(Hs(Ir,Qr)?Js(Pn,Ir=ur[ir]):ur[ir]=Ir),Qr=Ir},null,ui.literal);break;case"&":ui=ke(sr[li]),ur[ir]=function(Ir){return ui(Pn,Ir)};break;default:throw Vn("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",gn.name,ir,rr)}})}for(bs=dr&&function(rr,ir){var Qr;return arguments.length<2&&(ir=rr,rr=G),tr&&(Qr=_s),dr(rr,ir,Qr)},Dn&&M(Dn,function(rr){var ir,Qr={$scope:rr===gn||rr.$$isolateScope?ur:Pn,$element:pr,$attrs:sr,$transclude:bs};"@"==(Bs=rr.controller)&&(Bs=sr[rr.name]),ir=Ne(Bs,Qr),_s[rr.name]=ir,tr||pr.data("$"+rr.name+"Controller",ir),rr.controllerAs&&(Qr.$scope[rr.controllerAs]=ir)}),Jr=0,Gs=jt.length;Jr<Gs;Jr++)try{(Xr=jt[Jr])(Xr.isolateScope?ur:Pn,pr,sr,Xr.require&&Us(Xr.directiveName,Xr.require,pr,_s),bs)}catch(rr){me(rr,tt(pr))}var Ys=Pn;for(gn&&(gn.template||null===gn.templateUrl)&&(Ys=ur),fr&&fr(Ys,Br.childNodes,G,dr),Jr=un.length-1;0<=Jr;Jr--)try{(Xr=un[Jr])(Xr.isolateScope?ur:Pn,pr,sr,Xr.require&&Us(Xr.directiveName,Xr.require,pr,_s),bs)}catch(rr){me(rr,tt(pr))}}}function Mn(Be){for(var Xe=0,pt=Be.length;Xe<pt;Xe++)Be[Xe]=R(Be[Xe],{$$isolateScope:!0})}function er(Be,Xe,pt,st,Wt,Bt,jt){if(Xe===Wt)return null;var un=null;if(L.hasOwnProperty(Xe))for(var Gt,wn=fe.get(Xe+"Directive"),ct=0,ln=wn.length;ct<ln;ct++)try{Gt=wn[ct],(st===G||st>Gt.priority)&&-1!=Gt.restrict.indexOf(pt)&&(Bt&&(Gt=R(Gt,{$$start:Bt,$$end:jt})),Be.push(Gt),un=Gt)}catch(cn){me(cn)}return un}function _n(Be,Xe){var pt=Xe.$attr,st=Be.$attr,Wt=Be.$$element;M(Be,function(Bt,jt){"$"!=jt.charAt(0)&&(Xe[jt]&&Xe[jt]!==Bt&&(Bt+=("style"===jt?";":" ")+Xe[jt]),Be.$set(jt,Bt,!0,pt[jt]))}),M(Xe,function(Bt,jt){"class"==jt?(Ze(Wt,Bt),Be.class=(Be.class?Be.class+" ":"")+Bt):"style"==jt?(Wt.attr("style",Wt.attr("style")+";"+Bt),Be.style=(Be.style?Be.style+";":"")+Bt):"$"==jt.charAt(0)||Be.hasOwnProperty(jt)||(Be[jt]=Bt,st[jt]=pt[jt])})}function mn(Be,Xe,pt,st,Wt,Bt,jt,un){var Gt,wn,ct=[],ln=Xe[0],cn=Be.shift(),On=y({},cn,{templateUrl:null,transclude:null,replace:null,$$originalDirective:cn}),En=re(cn.templateUrl)?cn.templateUrl(Xe,pt):cn.templateUrl;return Xe.empty(),_e.get(Ie.getTrustedResourceUrl(En),{cache:de}).success(function(Wn){var Dn,gn,xn,Jn;if(Wn=Ye(Wn),cn.replace){if(xn=xt(Wn)?[]:n(V(Wn)),Dn=xn[0],1!=xn.length||1!==Dn.nodeType)throw Vn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",cn.name,En);gn={$attr:{}},bn(st,Xe,Dn);var ar=Zt(Dn,[],gn);N(cn.scope)&&Mn(ar),Be=ar.concat(Be),_n(pt,gn)}else Dn=ln,Xe.html(Wn);for(Be.unshift(On),Gt=an(Be,Dn,pt,Wt,Xe,cn,Bt,jt,un),M(st,function(Yr,ai){Yr==Dn&&(st[ai]=Xe[0])}),wn=nt(Xe[0].childNodes,Wt);ct.length;){var Sr=ct.shift(),tr=ct.shift(),Gn=ct.shift(),Er=ct.shift(),$r=Xe[0];if(tr!==ln){var _r=tr.className;un.hasElementTranscludeDirective&&cn.replace||($r=en(Dn)),bn(Gn,n(tr),$r),Ze(n($r),_r)}Jn=Gt.transcludeOnThisElement?mt(Sr,Gt.transclude,Er):Er,Gt(wn,Sr,$r,st,Jn)}ct=null}).error(function(Wn,Dn,gn,xn){throw Vn("tpload","Failed to load template: {0}",xn.url)}),function(Wn,Dn,gn,xn,Jn){var ar=Jn;ct?(ct.push(Dn),ct.push(gn),ct.push(xn),ct.push(ar)):(Gt.transcludeOnThisElement&&(ar=mt(Dn,Gt.transclude,Jn)),Gt(wn,Dn,gn,xn,ar))}}function An(Be,Xe){var pt=Xe.priority-Be.priority;return 0!==pt?pt:Be.name!==Xe.name?Be.name<Xe.name?-1:1:Be.index-Xe.index}function Bn(Be,Xe,pt,st){if(Xe)throw Vn("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",Xe.name,pt.name,Be,tt(st))}function Cn(Be,Xe,pt,st){var Wt=ge(pt,!0);if(Wt){if("multiple"===st&&"SELECT"===c(Be))throw Vn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",tt(Be));Xe.push({priority:100,compile:function(){return{pre:function(Bt,jt,un){var Gt=un.$$observers||(un.$$observers={});if(ae.test(st))throw Vn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");(Wt=ge(un[st],!0,function(wn,ct){if("srcdoc"==ct)return Ie.HTML;var ln=c(wn);return"xlinkHref"==ct||"FORM"==ln&&"action"==ct||"IMG"!=ln&&("src"==ct||"ngSrc"==ct)?Ie.RESOURCE_URL:void 0}(Be,st)))&&(un[st]=Wt(Bt),(Gt[st]||(Gt[st]=[])).$$inter=!0,(un.$$observers&&un.$$observers[st].$$scope||Bt).$watch(Wt,function(wn,ct){"class"===st&&wn!=ct?un.$updateClass(wn,ct):un.$set(st,wn)}))}}}})}}function bn(Be,Xe,pt){var st,Wt,Bt=Xe[0],jt=Xe.length,un=Bt.parentNode;if(Be)for(st=0,Wt=Be.length;st<Wt;st++)if(Be[st]==Bt){Be[st++]=pt;for(var Gt=st,wn=Gt+jt-1,ct=Be.length;Gt<ct;Gt++,wn++)wn<ct?Be[Gt]=Be[wn]:delete Be[Gt];Be.length-=jt-1;break}un&&un.replaceChild(pt,Bt);var ln=P.createDocumentFragment();ln.appendChild(Bt),pt[n.expando]=Bt[n.expando];for(var cn=1,On=Xe.length;cn<On;cn++){var En=Xe[cn];n(En).remove(),ln.appendChild(En),delete Xe[cn]}Xe[0]=pt,Xe.length=1}function In(Be,Xe){return y(function(){return Be.apply(null,arguments)},Be,Xe)}}]}mr.$inject=["$provide","$$sanitizeUriProvider"];var gr=/^(x[\:\-_]|data[\:\-_])/i;function Fn(d){return Rt(d.replace(gr,""))}function lr(d,S){var L="",W=d.split(/\s+/),q=S.split(/\s+/);e:for(var ae=0;ae<W.length;ae++){for(var fe=W[ae],ge=0;ge<q.length;ge++)if(fe==q[ge])continue e;L+=(0<L.length?" ":"")+fe}return L}function wr(){var d={},S=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(L,W){pe(L,"controller"),N(L)?y(d,L):d[L]=W},this.$get=["$injector","$window",function(L,W){return function(q,ae){var fe,ge,me,_e;if(D(q)&&(me=(ge=q.match(S))[1],_e=ge[3],ce(q=d.hasOwnProperty(me)?d[me]:ve(ae.$scope,me,!0)||ve(W,me,!0),me,!0)),fe=L.instantiate(q,ae),_e){if(!ae||"object"!==_typeof(ae.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",me||q.name,_e);ae.$scope[_e]=fe}return fe}}]}function kr(){this.$get=["$window",function(d){return n(d.document)}]}function es(){this.$get=["$log",function(d){return function(S,L){d.error.apply(d,arguments)}}]}function Mi(d){var S,L,W,q={};return d&&M(d.split("\n"),function(ae){W=ae.indexOf(":"),S=h(V(ae.substr(0,W))),L=V(ae.substr(W+1)),S&&(q[S]=q[S]?q[S]+", "+L:L)}),q}function hi(d){var S=N(d)?d:G;return function(L){return S||(S=Mi(d)),L?S[h(L)]||null:S}}function Di(d,S,L){return re(L)?L(d,S):(M(L,function(W){d=W(d,S)}),d)}function bi(d){return 200<=d&&d<300}function xi(){var d=/^\s*(\[|\{[^\{])/,S=/[\}\]]\s*$/,L=/^\)\]\}',?\n/,W={"Content-Type":"application/json;charset=utf-8"},q=this.defaults={transformResponse:[function(ge){return D(ge)&&(ge=ge.replace(L,""),d.test(ge)&&S.test(ge)&&(ge=qe(ge))),ge}],transformRequest:[function(ge){return N(ge)&&"[object File]"!==l.call(ge)&&"[object Blob]"!==l.call(ge)?Fe(ge):ge}],headers:{common:{Accept:"application/json, text/plain, */*"},post:X(W),put:X(W),patch:X(W)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},ae=this.interceptors=[],fe=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(ge,me,_e,de,ke,Ne){var Te=_e("$http"),we=[];function Ie(xe){var Pe={method:"get",transformRequest:q.transformRequest,transformResponse:q.transformResponse},rt=function(Ze){var nt,mt,Zt,an,Mn,St=q.headers,Vt=y({},Ze.headers);St=y({},St.common,St[h(Ze.method)]);e:for(nt in St){for(Zt in mt=h(nt),Vt)if(h(Zt)===mt)continue e;Vt[nt]=St[nt]}return M(an=Vt,function(er,_n){re(er)&&(null!=(Mn=er())?an[_n]=Mn:delete an[_n])}),Vt}(xe);y(Pe,xe),Pe.headers=rt,Pe.method=r(Pe.method);var Ge=[function(Ze){var nt=Di(Ze.data,hi(rt=Ze.headers),Ze.transformRequest);return Q(nt)&&M(rt,function(mt,Zt){"content-type"===h(Zt)&&delete rt[Zt]}),Q(Ze.withCredentials)&&!Q(q.withCredentials)&&(Ze.withCredentials=q.withCredentials),function(mt,Zt,St){var Vt,an,Mn=ke.defer(),er=Mn.promise,_n=function(Cn,bn){if(!bn)return Cn;var In=[];return function(Be,Xe,pt){for(var st=b(Be),Wt=0;Wt<st.length;Wt++)Xe.call(void 0,Be[st[Wt]],st[Wt])}(bn,function(Be,Xe){null===Be||Q(Be)||(ue(Be)||(Be=[Be]),M(Be,function(pt){N(pt)&&(Z(pt)?pt=pt.toISOString():N(pt)&&(pt=Fe(pt))),In.push(Ht(Xe)+"="+Ht(pt))}))}),0<In.length&&(Cn+=(-1==Cn.indexOf("?")?"?":"&")+In.join("&")),Cn}(mt.url,mt.params);if(Ie.pendingRequests.push(mt),er.then(Bn,Bn),!mt.cache&&!q.cache||!1===mt.cache||"GET"!==mt.method&&"JSONP"!==mt.method||(Vt=N(mt.cache)?mt.cache:N(q.cache)?q.cache:Te),Vt)if(U(an=Vt.get(_n))){if(Ee(an))return an.then(Bn,Bn),an;ue(an)?An(an[1],an[0],X(an[2]),an[3]):An(an,200,{},"OK")}else Vt.put(_n,er);if(Q(an)){var mn=Le(mt.url)?me.cookies()[mt.xsrfCookieName||q.xsrfCookieName]:G;mn&&(St[mt.xsrfHeaderName||q.xsrfHeaderName]=mn),ge(mt.method,_n,Zt,function(Cn,bn,In,Be){Vt&&(bi(Cn)?Vt.put(_n,[Cn,bn,Mi(In),Be]):Vt.remove(_n)),An(bn,Cn,In,Be),de.$$phase||de.$apply()},St,mt.timeout,mt.withCredentials,mt.responseType)}return er;function An(Cn,bn,In,Be){(bi(bn=Math.max(bn,0))?Mn.resolve:Mn.reject)({data:Cn,status:bn,headers:hi(In),config:mt,statusText:Be})}function Bn(){var Cn=z(Ie.pendingRequests,mt);-1!==Cn&&Ie.pendingRequests.splice(Cn,1)}}(Ze,nt,rt).then(lt,lt)},G],Ve=ke.when(Pe);for(M(we,function(Ze){(Ze.request||Ze.requestError)&&Ge.unshift(Ze.request,Ze.requestError),(Ze.response||Ze.responseError)&&Ge.push(Ze.response,Ze.responseError)});Ge.length;){var Ye=Ge.shift(),et=Ge.shift();Ve=Ve.then(Ye,et)}return Ve.success=function(Ze){return Ve.then(function(nt){Ze(nt.data,nt.status,nt.headers,Pe)}),Ve},Ve.error=function(Ze){return Ve.then(null,function(nt){Ze(nt.data,nt.status,nt.headers,Pe)}),Ve},Ve;function lt(Ze){var nt=y({},Ze,{data:Di(Ze.data,Ze.headers,Pe.transformResponse)});return bi(Ze.status)?nt:ke.reject(nt)}}return M(ae,function(xe){we.unshift(D(xe)?Ne.get(xe):Ne.invoke(xe))}),M(fe,function(xe,Pe){var rt=D(xe)?Ne.get(xe):Ne.invoke(xe);we.splice(Pe,0,{response:function(Ge){return rt(ke.when(Ge))},responseError:function(Ge){return rt(ke.reject(Ge))}})}),Ie.pendingRequests=[],function(xe){M(arguments,function(Pe){Ie[Pe]=function(rt,Ge){return Ie(y(Ge||{},{method:Pe,url:rt}))}})}("get","delete","head","jsonp"),function(xe){M(arguments,function(Pe){Ie[Pe]=function(rt,Ge,Ve){return Ie(y(Ve||{},{method:Pe,url:rt,data:Ge}))}})}("post","put"),Ie.defaults=q,Ie}]}function Pi(d){if(p<=8&&(!d.match(/^(get|post|head|put|delete|options)$/i)||!I.XMLHttpRequest))return new I.ActiveXObject("Microsoft.XMLHTTP");if(I.XMLHttpRequest)return new I.XMLHttpRequest;throw e("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function _i(){this.$get=["$browser","$window","$document",function(d,S,L){return W=d,q=Pi,ae=d.defer,fe=S.angular.callbacks,ge=L[0],function(me,_e,de,ke,Ne,Te,we,Ie){var xe,lt,Ze,nt,mt,Zt;if(W.$$incOutstandingRequestCount(),_e=_e||W.url(),"jsonp"==h(me)){var Pe="_"+(fe.counter++).toString(36);fe[Pe]=function(lt){fe[Pe].data=lt,fe[Pe].called=!0};var rt=(lt=_e.replace("JSON_CALLBACK","angular.callbacks."+Pe),Ze=Pe,nt=function(lt,Ze){et(ke,lt,fe[Pe].data,"",Ze),fe[Pe]=F},mt=ge.createElement("script"),Zt=null,mt.type="text/javascript",mt.src=lt,mt.async=!0,Zt=function(St){Oe(mt,"load",Zt),Oe(mt,"error",Zt),ge.body.removeChild(mt),mt=null;var Vt=-1,an="unknown";St&&("load"!==St.type||fe[Ze].called||(St={type:"error"}),an=St.type,Vt="error"===St.type?404:200),nt&&nt(Vt,an)},ze(mt,"load",Zt),ze(mt,"error",Zt),p<=8&&(mt.onreadystatechange=function(){D(mt.readyState)&&/loaded|complete/.test(mt.readyState)&&(mt.onreadystatechange=null,Zt({type:"load"}))}),ge.body.appendChild(mt),Zt)}else{var Ge=q(me);if(Ge.open(me,_e,!0),M(Ne,function(lt,Ze){U(lt)&&Ge.setRequestHeader(Ze,lt)}),Ge.onreadystatechange=function(){if(Ge&&4==Ge.readyState){var lt=null,Ze=null,nt="";-1!==xe&&(lt=Ge.getAllResponseHeaders(),Ze="response"in Ge?Ge.response:Ge.responseText),-1===xe&&p<10||(nt=Ge.statusText),et(ke,xe||Ge.status,Ze,lt,nt)}},we&&(Ge.withCredentials=!0),Ie)try{Ge.responseType=Ie}catch(lt){if("json"!==Ie)throw lt}Ge.send(de||null)}if(0<Te)var Ve=ae(Ye,Te);else Ee(Te)&&Te.then(Ye);function Ye(){xe=-1,rt&&rt(),Ge&&Ge.abort()}function et(lt,Ze,nt,mt,Zt){Ve&&ae.cancel(Ve),rt=Ge=null,0===Ze&&(Ze=nt?200:"file"==Ce(_e).protocol?404:0),lt(Ze=1223===Ze?204:Ze,nt,mt,Zt=Zt||""),W.$$completeOutstandingRequest(F)}};var W,q,ae,fe,ge}]}var Zr=e("$interpolate");function Ni(){var d="{{",S="}}";this.startSymbol=function(L){return L?(d=L,this):d},this.endSymbol=function(L){return L?(S=L,this):S},this.$get=["$parse","$exceptionHandler","$sce",function(L,W,q){var ae=d.length,fe=S.length;function ge(me,_e,de){for(var ke,Ne,Te,we,Ie=0,xe=[],Pe=me.length,rt=!1,Ge=[];Ie<Pe;)-1!=(ke=me.indexOf(d,Ie))&&-1!=(Ne=me.indexOf(S,ke+ae))?(Ie!=ke&&xe.push(me.substring(Ie,ke)),xe.push(Te=L(we=me.substring(ke+ae,Ne))),Te.exp=we,Ie=Ne+fe,rt=!0):(Ie!=Pe&&xe.push(me.substring(Ie)),Ie=Pe);if((Pe=xe.length)||(xe.push(""),Pe=1),de&&1<xe.length)throw Zr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",me);if(!_e||rt)return Ge.length=Pe,(Te=function(Ve){try{for(var Ye,et=0,lt=Pe;et<lt;et++){if("function"==typeof(Ye=xe[et]))if(Ye=Ye(Ve),null==(Ye=de?q.getTrusted(de,Ye):q.valueOf(Ye)))Ye="";else switch(_typeof(Ye)){case"string":break;case"number":Ye=""+Ye;break;default:Ye=Fe(Ye)}Ge[et]=Ye}return Ge.join("")}catch(nt){var Ze=Zr("interr","Can't interpolate: {0}\n{1}",me,nt.toString());W(Ze)}}).exp=me,Te.parts=xe,Te}return ge.startSymbol=function(){return d},ge.endSymbol=function(){return S},ge}]}function wi(){this.$get=["$rootScope","$window","$q",function(d,S,L){var W={};function q(ae,fe,ge,me){var _e=S.setInterval,de=S.clearInterval,ke=L.defer(),Ne=ke.promise,Te=0,we=U(me)&&!me;return ge=U(ge)?ge:0,Ne.then(null,null,ae),Ne.$$intervalId=_e(function(){ke.notify(Te++),0<ge&&ge<=Te&&(ke.resolve(Te),de(Ne.$$intervalId),delete W[Ne.$$intervalId]),we||d.$apply()},fe),W[Ne.$$intervalId]=ke,Ne}return q.cancel=function(ae){return!(!ae||!(ae.$$intervalId in W)||(W[ae.$$intervalId].reject("canceled"),S.clearInterval(ae.$$intervalId),delete W[ae.$$intervalId],0))},q}]}function nr(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\xa4",posSuf:"",negPre:"(\xa4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(d){return 1===d?"one":"other"}}}}var ki=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ts={http:80,https:443,ftp:21},qr=e("$location");function fi(d){for(var S=d.split("/"),L=S.length;L--;)S[L]=wt(S[L]);return S.join("/")}function Fi(d,S,L){var W=Ce(d);S.$$protocol=W.protocol,S.$$host=W.hostname,S.$$port=m(W.port)||ts[W.protocol]||null}function Li(d,S,L){var W="/"!==d.charAt(0);W&&(d="/"+d);var q=Ce(d);S.$$path=decodeURIComponent(W&&"/"===q.pathname.charAt(0)?q.pathname.substring(1):q.pathname),S.$$search=ht(q.search),S.$$hash=decodeURIComponent(q.hash),S.$$path&&"/"!=S.$$path.charAt(0)&&(S.$$path="/"+S.$$path)}function Tr(d,S){if(0===S.indexOf(d))return S.substr(d.length)}function ei(d){var S=d.indexOf("#");return-1==S?d:d.substr(0,S)}function Ci(d){return d.substr(0,ei(d).lastIndexOf("/")+1)}function Ui(d,S){this.$$html5=!0,S=S||"";var L=Ci(d);Fi(d,this),this.$$parse=function(W){var q=Tr(L,W);if(!D(q))throw qr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',W,L);Li(q,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var W=kt(this.$$search),q=this.$$hash?"#"+wt(this.$$hash):"";this.$$url=fi(this.$$path)+(W?"?"+W:"")+q,this.$$absUrl=L+this.$$url.substr(1)},this.$$rewrite=function(W){var q,ae;return(q=Tr(d,W))!==G?(q=Tr(S,ae=q))!==G?L+(Tr("/",q)||q):d+ae:(q=Tr(L,W))!==G?L+q:L==W+"/"?L:void 0}}function ti(d,S){var L=Ci(d);Fi(d,this),this.$$parse=function(W){var fe,ge,me,_e,de,q=Tr(d,W)||Tr(L,W),ae="#"==q.charAt(0)?Tr(S,q):this.$$html5?q:"";if(!D(ae))throw qr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',W,S);Li(ae,this),this.$$path=(fe=this.$$path,de=/^\/[A-Z]:(\/.*)/,0===(ge=ae).indexOf(me=d)&&(ge=ge.replace(me,"")),de.exec(ge)?fe:(_e=de.exec(fe))?_e[1]:fe),this.$$compose()},this.$$compose=function(){var W=kt(this.$$search),q=this.$$hash?"#"+wt(this.$$hash):"";this.$$url=fi(this.$$path)+(W?"?"+W:"")+q,this.$$absUrl=d+(this.$$url?S+this.$$url:"")},this.$$rewrite=function(W){if(ei(d)==ei(W))return W}}function ni(d,S){this.$$html5=!0,ti.apply(this,arguments);var L=Ci(d);this.$$rewrite=function(W){var q;return d==ei(W)?W:(q=Tr(L,W))?d+S+q:L===W+"/"?L:void 0},this.$$compose=function(){var W=kt(this.$$search),q=this.$$hash?"#"+wt(this.$$hash):"";this.$$url=fi(this.$$path)+(W?"?"+W:"")+q,this.$$absUrl=d+S+this.$$url}}function Hr(d){return function(){return this[d]}}function Bi(d,S){return function(L){return Q(L)?this[d]:(this[d]=S(L),this.$$compose(),this)}}function ns(){var d="",S=!1;this.hashPrefix=function(L){return U(L)?(d=L,this):d},this.html5Mode=function(L){return U(L)?(S=L,this):S},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(L,W,q,ae){var fe,ge,me,_e,de=W.baseHref(),ke=W.url();ge=S?(me=(_e=ke).substring(0,_e.indexOf("/",_e.indexOf("//")+2))+(de||"/"),q.history?Ui:ni):(me=ei(ke),ti),(fe=new ge(me,"#"+d)).$$parse(fe.$$rewrite(ke));var Ne=/^\s*(javascript|mailto):/i;ae.on("click",function(Ie){if(!Ie.ctrlKey&&!Ie.metaKey&&2!=Ie.which){for(var xe=n(Ie.target);"a"!==h(xe[0].nodeName);)if(xe[0]===ae[0]||!(xe=xe.parent())[0])return;var Pe=xe.prop("href");if(N(Pe)&&"[object SVGAnimatedString]"===Pe.toString()&&(Pe=Ce(Pe.animVal).href),!Ne.test(Pe)){if(ge===ni){var rt=xe.attr("href")||xe.attr("xlink:href");if(rt.indexOf("://")<0){var Ge="#"+d;if("/"==rt[0])Pe=me+Ge+rt;else if("#"==rt[0])Pe=me+Ge+(fe.path()||"/")+rt;else{for(var Ve=fe.path().split("/"),Ye=rt.split("/"),et=0;et<Ye.length;et++)"."!=Ye[et]&&(".."==Ye[et]?Ve.pop():Ye[et].length&&Ve.push(Ye[et]));Pe=me+Ge+Ve.join("/")}}}var lt=fe.$$rewrite(Pe);Pe&&!xe.attr("target")&&lt&&!Ie.isDefaultPrevented()&&(Ie.preventDefault(),lt!=W.url()&&(fe.$$parse(lt),L.$apply(),I.angular["ff-684208-preventDefault"]=!0))}}}),fe.absUrl()!=ke&&W.url(fe.absUrl(),!0),W.onUrlChange(function(Ie){fe.absUrl()!=Ie&&(L.$evalAsync(function(){var xe=fe.absUrl();fe.$$parse(Ie),L.$broadcast("$locationChangeStart",Ie,xe).defaultPrevented?(fe.$$parse(xe),W.url(xe)):we(xe)}),L.$$phase||L.$digest())});var Te=0;return L.$watch(function(){var Ie=W.url(),xe=fe.$$replace;return Te&&Ie==fe.absUrl()||(Te++,L.$evalAsync(function(){L.$broadcast("$locationChangeStart",fe.absUrl(),Ie).defaultPrevented?fe.$$parse(Ie):(W.url(fe.absUrl(),xe),we(Ie))})),fe.$$replace=!1,Te}),fe;function we(Ie){L.$broadcast("$locationChangeSuccess",fe.absUrl(),Ie)}}]}function Nr(){var d=!0,S=this;this.debugEnabled=function(L){return U(L)?(d=L,this):d},this.$get=["$window",function(L){return{log:q("log"),info:q("info"),warn:q("warn"),error:q("error"),debug:(W=q("debug"),function(){d&&W.apply(S,arguments)})};var W;function q(ae){var fe=L.console||{},ge=fe[ae]||fe.log||F,me=!1;try{me=!!ge.apply}catch{}return me?function(){var _e=[];return M(arguments,function(de){var ke;_e.push(((ke=de)instanceof Error&&(ke.stack?ke=ke.message&&-1===ke.stack.indexOf(ke.message)?"Error: "+ke.message+"\n"+ke.stack:ke.stack:ke.sourceURL&&(ke=ke.message+"\n"+ke.sourceURL+":"+ke.line)),ke))}),ge.apply(fe,_e)}:function(_e,de){ge(_e,de??"")}}}]}ni.prototype=ti.prototype=Ui.prototype={$$html5:!1,$$replace:!1,absUrl:Hr("$$absUrl"),url:function(d,S){if(Q(d))return this.$$url;var L=ki.exec(d);return L[1]&&this.path(decodeURIComponent(L[1])),(L[2]||L[1])&&this.search(L[3]||""),this.hash(L[5]||"",S),this},protocol:Hr("$$protocol"),host:Hr("$$host"),port:Hr("$$port"),path:Bi("$$path",function(d){return"/"==d.charAt(0)?d:"/"+d}),search:function(d,S){switch(arguments.length){case 0:return this.$$search;case 1:if(D(d))this.$$search=ht(d);else{if(!N(d))throw qr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");M(d,function(L,W){null==L&&delete d[W]}),this.$$search=d}break;default:Q(S)||null===S?delete this.$$search[d]:this.$$search[d]=S}return this.$$compose(),this},hash:Bi("$$hash",B),replace:function(){return this.$$replace=!0,this}};var qn,Kn=e("$parse"),Hi={};function vr(d,S){if("__defineGetter__"===d||"__defineSetter__"===d||"__lookupGetter__"===d||"__lookupSetter__"===d||"__proto__"===d)throw Kn("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",S);return d}function dt(d,S){if(d){if(d.constructor===d)throw Kn("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",S);if(d.document&&d.location&&d.alert&&d.setInterval)throw Kn("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",S);if(d.children&&(d.nodeName||d.prop&&d.attr&&d.find))throw Kn("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",S);if(d===Object)throw Kn("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",S)}return d}var Si=Function.prototype.call,fn=Function.prototype.apply,Cr=Function.prototype.bind,ri={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:F,"+":function(d,S,L,W){return L=L(d,S),W=W(d,S),U(L)?U(W)?L+W:L:U(W)?W:G},"-":function(d,S,L,W){return L=L(d,S),W=W(d,S),(U(L)?L:0)-(U(W)?W:0)},"*":function(d,S,L,W){return L(d,S)*W(d,S)},"/":function(d,S,L,W){return L(d,S)/W(d,S)},"%":function(d,S,L,W){return L(d,S)%W(d,S)},"^":function(d,S,L,W){return L(d,S)^W(d,S)},"=":F,"===":function(d,S,L,W){return L(d,S)===W(d,S)},"!==":function(d,S,L,W){return L(d,S)!==W(d,S)},"==":function(d,S,L,W){return L(d,S)==W(d,S)},"!=":function(d,S,L,W){return L(d,S)!=W(d,S)},"<":function(d,S,L,W){return L(d,S)<W(d,S)},">":function(d,S,L,W){return L(d,S)>W(d,S)},"<=":function(d,S,L,W){return L(d,S)<=W(d,S)},">=":function(d,S,L,W){return L(d,S)>=W(d,S)},"&&":function(d,S,L,W){return L(d,S)&&W(d,S)},"||":function(d,S,L,W){return L(d,S)||W(d,S)},"&":function(d,S,L,W){return L(d,S)&W(d,S)},"|":function(d,S,L,W){return W(d,S)(d,S,L(d,S))},"!":function(d,S,L){return!L(d,S)}},rs={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},di=function(d){this.options=d};di.prototype={constructor:di,lex:function(d){for(this.text=d,this.index=0,this.ch=G,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var S=this.ch+this.peek(),L=S+this.peek(2),W=ri[this.ch],q=ri[S],ae=ri[L];ae?(this.tokens.push({index:this.index,text:L,fn:ae}),this.index+=3):q?(this.tokens.push({index:this.index,text:S,fn:q}),this.index+=2):W?(this.tokens.push({index:this.index,text:this.ch,fn:W}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(d){return-1!==d.indexOf(this.ch)},was:function(d){return-1!==d.indexOf(this.lastCh)},peek:function(d){var S=d||1;return this.index+S<this.text.length&&this.text.charAt(this.index+S)},isNumber:function(d){return"0"<=d&&d<="9"},isWhitespace:function(d){return" "===d||"\r"===d||"\t"===d||"\n"===d||"\v"===d||"\xa0"===d},isIdent:function(d){return"a"<=d&&d<="z"||"A"<=d&&d<="Z"||"_"===d||"$"===d},isExpOperator:function(d){return"-"===d||"+"===d||this.isNumber(d)},throwError:function(d,S,L){L=L||this.index;var W=U(S)?"s "+S+"-"+this.index+" ["+this.text.substring(S,L)+"]":" "+L;throw Kn("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",d,W,this.text)},readNumber:function(){for(var d="",S=this.index;this.index<this.text.length;){var L=h(this.text.charAt(this.index));if("."==L||this.isNumber(L))d+=L;else{var W=this.peek();if("e"==L&&this.isExpOperator(W))d+=L;else if(this.isExpOperator(L)&&W&&this.isNumber(W)&&"e"==d.charAt(d.length-1))d+=L;else{if(!this.isExpOperator(L)||W&&this.isNumber(W)||"e"!=d.charAt(d.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:S,text:d*=1,literal:!0,constant:!0,fn:function(){return d}})},readIdent:function(){for(var d,S,L,W,q=this,ae="",fe=this.index;this.index<this.text.length&&("."===(W=this.text.charAt(this.index))||this.isIdent(W)||this.isNumber(W));)"."===W&&(d=this.index),ae+=W,this.index++;if(d)for(S=this.index;S<this.text.length;){if("("===(W=this.text.charAt(S))){L=ae.substr(d-fe+1),ae=ae.substr(0,d-fe),this.index=S;break}if(!this.isWhitespace(W))break;S++}var ge={index:fe,text:ae};if(ri.hasOwnProperty(ae))ge.fn=ri[ae],ge.literal=!0,ge.constant=!0;else{var me=zi(ae,this.options,this.text);ge.fn=y(function(_e,de){return me(_e,de)},{assign:function(_e,de){return pi(_e,ae,de,q.text,q.options)}})}this.tokens.push(ge),L&&(this.tokens.push({index:d,text:"."}),this.tokens.push({index:d+1,text:L}))},readString:function(d){var S=this.index;this.index++;for(var L="",W=d,q=!1;this.index<this.text.length;){var ae=this.text.charAt(this.index);if(W+=ae,q){if("u"===ae){var fe=this.text.substring(this.index+1,this.index+5);fe.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+fe+"]"),this.index+=4,L+=String.fromCharCode(parseInt(fe,16))}else L+=rs[ae]||ae;q=!1}else if("\\"===ae)q=!0;else{if(ae===d)return this.index++,void this.tokens.push({index:S,text:W,string:L,literal:!0,constant:!0,fn:function(){return L}});L+=ae}this.index++}this.throwError("Unterminated quote",S)}};var Vr=function(d,S,L){this.lexer=d,this.$filter=S,this.options=L};function pi(d,S,L,W,q){q=q||{};for(var ae,fe=S.split("."),ge=0;1<fe.length;ge++){var me=d[ae=vr(fe.shift(),W)];me||(d[ae]=me={}),(d=me).then&&q.unwrapPromises&&(qn(W),"$$v"in d||function(_e){_e.then(function(de){_e.$$v=de})}(d),d.$$v===G&&(d.$$v={}),d=d.$$v)}return ae=vr(fe.shift(),W),dt(d,W),dt(d[ae],W),d[ae]=L}Vr.ZERO=y(function(){return 0},{constant:!0}),Vr.prototype={constructor:Vr,parse:function(d){this.text=d,this.tokens=this.lexer.lex(d);var S=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),S.literal=!!S.literal,S.constant=!!S.constant,S},primary:function(){var d,S,L;if(this.expect("("))d=this.filterChain(),this.consume(")");else if(this.expect("["))d=this.arrayDeclaration();else if(this.expect("{"))d=this.object();else{var W=this.expect();(d=W.fn)||this.throwError("not a primary expression",W),d.literal=!!W.literal,d.constant=!!W.constant}for(;S=this.expect("(","[",".");)"("===S.text?(d=this.functionCall(d,L),L=null):"["===S.text?(L=d,d=this.objectIndex(d)):"."===S.text?(L=d,d=this.fieldAccess(d)):this.throwError("IMPOSSIBLE");return d},throwError:function(d,S){throw Kn("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",S.text,d,S.index+1,this.text,this.text.substring(S.index))},peekToken:function(){if(0===this.tokens.length)throw Kn("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(d,S,L,W){if(0<this.tokens.length){var q=this.tokens[0],ae=q.text;if(ae===d||ae===S||ae===L||ae===W||!d&&!S&&!L&&!W)return q}return!1},expect:function(d,S,L,W){var q=this.peek(d,S,L,W);return!!q&&(this.tokens.shift(),q)},consume:function(d){this.expect(d)||this.throwError("is unexpected, expecting ["+d+"]",this.peek())},unaryFn:function(d,S){return y(function(L,W){return d(L,W,S)},{constant:S.constant})},ternaryFn:function(d,S,L){return y(function(W,q){return d(W,q)?S(W,q):L(W,q)},{constant:d.constant&&S.constant&&L.constant})},binaryFn:function(d,S,L){return y(function(W,q){return S(W,q,d,L)},{constant:d.constant&&L.constant})},statements:function(){for(var d=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&d.push(this.filterChain()),!this.expect(";"))return 1===d.length?d[0]:function(S,L){for(var W,q=0;q<d.length;q++){var ae=d[q];ae&&(W=ae(S,L))}return W}},filterChain:function(){for(var d,S=this.expression();;){if(!(d=this.expect("|")))return S;S=this.binaryFn(S,d.fn,this.filter())}},filter:function(){for(var d=this.expect(),S=this.$filter(d.text),L=[];;){if(!(d=this.expect(":"))){var W=function(q,ae,fe){for(var ge=[fe],me=0;me<L.length;me++)ge.push(L[me](q,ae));return S.apply(q,ge)};return function(){return W}}L.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var d,S,L=this.ternary();return(S=this.expect("="))?(L.assign||this.throwError("implies assignment but ["+this.text.substring(0,S.index)+"] can not be assigned to",S),d=this.ternary(),function(W,q){return L.assign(W,d(W,q),q)}):L},ternary:function(){var d,S,L=this.logicalOR();return(S=this.expect("?"))?(d=this.assignment(),(S=this.expect(":"))?this.ternaryFn(L,d,this.assignment()):void this.throwError("expected :",S)):L},logicalOR:function(){for(var d,S=this.logicalAND();;){if(!(d=this.expect("||")))return S;S=this.binaryFn(S,d.fn,this.logicalAND())}},logicalAND:function(){var d,S=this.equality();return(d=this.expect("&&"))&&(S=this.binaryFn(S,d.fn,this.logicalAND())),S},equality:function(){var d,S=this.relational();return(d=this.expect("==","!=","===","!=="))&&(S=this.binaryFn(S,d.fn,this.equality())),S},relational:function(){var d,S=this.additive();return(d=this.expect("<",">","<=",">="))&&(S=this.binaryFn(S,d.fn,this.relational())),S},additive:function(){for(var d,S=this.multiplicative();d=this.expect("+","-");)S=this.binaryFn(S,d.fn,this.multiplicative());return S},multiplicative:function(){for(var d,S=this.unary();d=this.expect("*","/","%");)S=this.binaryFn(S,d.fn,this.unary());return S},unary:function(){var d;return this.expect("+")?this.primary():(d=this.expect("-"))?this.binaryFn(Vr.ZERO,d.fn,this.unary()):(d=this.expect("!"))?this.unaryFn(d.fn,this.unary()):this.primary()},fieldAccess:function(d){var S=this,L=this.expect().text,W=zi(L,this.options,this.text);return y(function(q,ae,fe){return W(fe||d(q,ae))},{assign:function(q,ae,fe){var ge=d(q,fe);return ge||d.assign(q,ge={}),pi(ge,L,ae,S.text,S.options)}})},objectIndex:function(d){var S=this,L=this.expression();return this.consume("]"),y(function(W,q){var ae,fe,ge=d(W,q),me=L(W,q);return vr(me,S.text),ge?((ae=dt(ge[me],S.text))&&ae.then&&S.options.unwrapPromises&&("$$v"in(fe=ae)||(fe.$$v=G,fe.then(function(_e){fe.$$v=_e})),ae=ae.$$v),ae):G},{assign:function(W,q,ae){var fe=vr(L(W,ae),S.text),ge=dt(d(W,ae),S.text);return ge||d.assign(W,ge={}),ge[fe]=q}})},functionCall:function(d,S){var L=[];if(")"!==this.peekToken().text)for(;L.push(this.expression()),this.expect(","););this.consume(")");var W=this;return function(q,ae){for(var fe=[],ge=S?S(q,ae):q,me=0;me<L.length;me++)fe.push(L[me](q,ae));var _e=d(q,ae,ge)||F;return dt(ge,W.text),function(de,ke){if(de){if(de.constructor===de)throw Kn("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",ke);if(de===Si||de===fn||Cr&&de===Cr)throw Kn("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",ke)}}(_e,W.text),dt(_e.apply?_e.apply(ge,fe):_e(fe[0],fe[1],fe[2],fe[3],fe[4]),W.text)}},arrayDeclaration:function(){var d=[],S=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var L=this.expression();d.push(L),L.constant||(S=!1)}while(this.expect(","));return this.consume("]"),y(function(W,q){for(var ae=[],fe=0;fe<d.length;fe++)ae.push(d[fe](W,q));return ae},{literal:!0,constant:S})},object:function(){var d=[],S=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var L=this.expect(),W=L.string||L.text;this.consume(":");var q=this.expression();d.push({key:W,value:q}),q.constant||(S=!1)}while(this.expect(","));return this.consume("}"),y(function(ae,fe){for(var ge={},me=0;me<d.length;me++){var _e=d[me];ge[_e.key]=_e.value(ae,fe)}return ge},{literal:!0,constant:S})}};var Ei={};function Vi(d,S,L,W,q,ae,fe){return vr(d,ae),vr(S,ae),vr(L,ae),vr(W,ae),vr(q,ae),fe.unwrapPromises?function(ge,me){var _e,de=me&&me.hasOwnProperty(d)?me:ge;return null==de?de:((de=de[d])&&de.then&&(qn(ae),"$$v"in de||((_e=de).$$v=G,_e.then(function(ke){_e.$$v=ke})),de=de.$$v),S?null==de?G:((de=de[S])&&de.then&&(qn(ae),"$$v"in de||((_e=de).$$v=G,_e.then(function(ke){_e.$$v=ke})),de=de.$$v),L?null==de?G:((de=de[L])&&de.then&&(qn(ae),"$$v"in de||((_e=de).$$v=G,_e.then(function(ke){_e.$$v=ke})),de=de.$$v),W?null==de?G:((de=de[W])&&de.then&&(qn(ae),"$$v"in de||((_e=de).$$v=G,_e.then(function(ke){_e.$$v=ke})),de=de.$$v),q?null==de?G:((de=de[q])&&de.then&&(qn(ae),"$$v"in de||((_e=de).$$v=G,_e.then(function(ke){_e.$$v=ke})),de=de.$$v),de):de):de):de):de)}:function(ge,me){var _e=me&&me.hasOwnProperty(d)?me:ge;return null==_e?_e:(_e=_e[d],S?null==_e?G:(_e=_e[S],L?null==_e?G:(_e=_e[L],W?null==_e?G:(_e=_e[W],q?null==_e?G:_e=_e[q]:_e):_e):_e):_e)}}function zi(d,S,L){if(Ei.hasOwnProperty(d))return Ei[d];var W,q=d.split("."),ae=q.length;if(S.csp)W=ae<6?Vi(q[0],q[1],q[2],q[3],q[4],L,S):function(me,_e){for(var de,ke=0;de=Vi(q[ke++],q[ke++],q[ke++],q[ke++],q[ke++],L,S)(me,_e),_e=G,me=de,ke<ae;);return de};else{var fe="var p;\n";M(q,function(me,_e){vr(me,L),fe+="if(s == null) return undefined;\ns="+(_e?"s":'((k&&k.hasOwnProperty("'+me+'"))?k:s)')+'["'+me+'"];\n'+(S.unwrapPromises?'if (s && s.then) {\n pw("'+L.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),fe+="return s;";var ge=new Function("s","k","pw",fe);ge.toString=J(fe),W=S.unwrapPromises?function(me,_e){return ge(me,_e,qn)}:ge}return"hasOwnProperty"!==d&&(Ei[d]=W),W}function is(){var d={},S={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(L){return U(L)?(S.unwrapPromises=!!L,this):S.unwrapPromises},this.logPromiseWarnings=function(L){return U(L)?(S.logPromiseWarnings=L,this):S.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(L,W,q){return S.csp=W.csp,qn=function(ae){S.logPromiseWarnings&&!Hi.hasOwnProperty(ae)&&(Hi[ae]=!0,q.warn("[$parse] Promise found in the expression `"+ae+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(ae){var fe;switch(_typeof(ae)){case"string":if(d.hasOwnProperty(ae))return d[ae];var ge=new di(S);return fe=new Vr(ge,L,S).parse(ae),"hasOwnProperty"!==ae&&(d[ae]=fe),fe;case"function":return ae;default:return F}}}]}function Ar(){this.$get=["$rootScope","$exceptionHandler",function(d,S){return function(L,W){var q=function de(){var ke,Ne,Te=[];return Ne={resolve:function(we){if(Te){var Ie=Te;Te=G,ke=ae(we),Ie.length&&L(function(){for(var xe,Pe=0,rt=Ie.length;Pe<rt;Pe++)ke.then((xe=Ie[Pe])[0],xe[1],xe[2])})}},reject:function(we){Ne.resolve(ge(we))},notify:function(we){if(Te){var Ie=Te;Te.length&&L(function(){for(var xe=0,Pe=Ie.length;xe<Pe;xe++)Ie[xe][2](we)})}},promise:{then:function(we,Ie,xe){var Pe=de(),rt=function(Ye){try{Pe.resolve((re(we)?we:me)(Ye))}catch(et){Pe.reject(et),W(et)}},Ge=function(Ye){try{Pe.resolve((re(Ie)?Ie:_e)(Ye))}catch(et){Pe.reject(et),W(et)}},Ve=function(Ye){try{Pe.notify((re(xe)?xe:me)(Ye))}catch(et){W(et)}};return Te?Te.push([rt,Ge,Ve]):ke.then(rt,Ge,Ve),Pe.promise},catch:function(we){return this.then(null,we)},finally:function(we){function Ie(Pe,rt){var Ge=de();return rt?Ge.resolve(Pe):Ge.reject(Pe),Ge.promise}function xe(Pe,rt){var Ge=null;try{Ge=(we||me)()}catch(Ve){return Ie(Ve,!1)}return Ee(Ge)?Ge.then(function(){return Ie(Pe,rt)},function(Ve){return Ie(Ve,!1)}):Ie(Pe,rt)}return this.then(function(Pe){return xe(Pe,!0)},function(Pe){return xe(Pe,!1)})}}}},ae=function(de){return Ee(de)?de:{then:function(ke){var Ne=q();return L(function(){Ne.resolve(ke(de))}),Ne.promise}}},fe=function(de){var ke=q();return ke.reject(de),ke.promise},ge=function(de){return{then:function(ke,Ne){var Te=q();return L(function(){try{Te.resolve((re(Ne)?Ne:_e)(de))}catch(we){Te.reject(we),W(we)}}),Te.promise}}};function me(de){return de}function _e(de){return fe(de)}return{defer:q,reject:fe,when:function(de,ke,Ne,Te){var we,Ie=q(),xe=function(Ge){try{return(re(ke)?ke:me)(Ge)}catch(Ve){return W(Ve),fe(Ve)}},Pe=function(Ge){try{return(re(Ne)?Ne:_e)(Ge)}catch(Ve){return W(Ve),fe(Ve)}},rt=function(Ge){try{return(re(Te)?Te:me)(Ge)}catch(Ve){W(Ve)}};return L(function(){ae(de).then(function(Ge){we||(we=!0,Ie.resolve(ae(Ge).then(xe,Pe,rt)))},function(Ge){we||(we=!0,Ie.resolve(Pe(Ge)))},function(Ge){we||Ie.notify(rt(Ge))})}),Ie.promise},all:function(de){var ke=q(),Ne=0,Te=ue(de)?[]:{};return M(de,function(we,Ie){Ne++,ae(we).then(function(xe){Te.hasOwnProperty(Ie)||(Te[Ie]=xe,--Ne||ke.resolve(Te))},function(xe){Te.hasOwnProperty(Ie)||ke.reject(xe)})}),0===Ne&&ke.resolve(Te),ke.promise}}}(function(L){d.$evalAsync(L)},S)}]}function Wi(){this.$get=["$window","$timeout",function(d,S){var L=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame,W=d.cancelAnimationFrame||d.webkitCancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelRequestAnimationFrame,q=!!L,ae=q?function(fe){var ge=L(fe);return function(){W(ge)}}:function(fe){var ge=S(fe,16.66,!1);return function(){S.cancel(ge)}};return ae.supported=q,ae}]}function ss(){var d=10,S=e("$rootScope"),L=null;this.digestTtl=function(W){return arguments.length&&(d=W),d},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(W,q,ae,fe){function ge(){this.$id=_(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}ge.prototype={constructor:ge,$new:function(we){var Ie;return we?((Ie=new ge).$root=this.$root,Ie.$$asyncQueue=this.$$asyncQueue,Ie.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=_(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),Ie=new this.$$childScopeClass),(Ie.this=Ie).$parent=this,Ie.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=Ie,this.$$childTail=Ie):this.$$childHead=this.$$childTail=Ie,Ie},$watch:function(we,Ie,xe){var Pe=ke(we,"watch"),rt=this.$$watchers,Ge={fn:Ie,last:Te,get:Pe,exp:we,eq:!!xe};if(L=null,!re(Ie)){var Ve=ke(Ie||F,"listener");Ge.fn=function(et,lt,Ze){Ve(Ze)}}if("string"==typeof we&&Pe.constant){var Ye=Ge.fn;Ge.fn=function(et,lt,Ze){Ye.call(this,et,lt,Ze),T(rt,Ge)}}return rt||(rt=this.$$watchers=[]),rt.unshift(Ge),function(){T(rt,Ge),L=null}},$watchCollection:function(we,Ie){var xe,Pe,rt,Ge=this,Ve=1<Ie.length,Ye=0,et=ae(we),lt=[],Ze={},nt=!0,mt=0;return this.$watch(function(){var Zt,St;if(N(xe=et(Ge)))if(O(xe)){Pe!==lt&&(mt=(Pe=lt).length=0,Ye++),mt!==(Zt=xe.length)&&(Ye++,Pe.length=mt=Zt);for(var Vt=0;Vt<Zt;Vt++)Pe[Vt]!=Pe[Vt]&&xe[Vt]!=xe[Vt]||Pe[Vt]===xe[Vt]||(Ye++,Pe[Vt]=xe[Vt])}else{for(St in Pe!==Ze&&(Pe=Ze={},mt=0,Ye++),Zt=0,xe)xe.hasOwnProperty(St)&&(Zt++,Pe.hasOwnProperty(St)?Pe[St]!=Pe[St]&&xe[St]!=xe[St]||Pe[St]===xe[St]||(Ye++,Pe[St]=xe[St]):(mt++,Pe[St]=xe[St],Ye++));if(Zt<mt)for(St in Ye++,Pe)Pe.hasOwnProperty(St)&&!xe.hasOwnProperty(St)&&(mt--,delete Pe[St])}else Pe!==xe&&(Pe=xe,Ye++);return Ye},function(){if(nt?(nt=!1,Ie(xe,xe,Ge)):Ie(xe,rt,Ge),Ve)if(N(xe))if(O(xe)){rt=new Array(xe.length);for(var Zt=0;Zt<xe.length;Zt++)rt[Zt]=xe[Zt]}else for(var St in rt={},xe)a.call(xe,St)&&(rt[St]=xe[St]);else rt=xe})},$digest:function(){var we,Ie,xe,Pe,rt,Ge,Ve,Ye,et,lt,Ze,nt=this.$$asyncQueue,mt=this.$$postDigestQueue,Zt=d,St=[];_e("$digest"),L=null;do{for(Ge=!1,Ye=this;nt.length;){try{(Ze=nt.shift()).scope.$eval(Ze.expression)}catch(Vt){de(),q(Vt)}L=null}e:do{if(Pe=Ye.$$watchers)for(rt=Pe.length;rt--;)try{if(we=Pe[rt])if((Ie=we.get(Ye))===(xe=we.last)||(we.eq?se(Ie,xe):"number"==typeof Ie&&"number"==typeof xe&&isNaN(Ie)&&isNaN(xe))){if(we===L){Ge=!1;break e}}else Ge=!0,(L=we).last=we.eq?C(Ie,null):Ie,we.fn(Ie,xe===Te?Ie:xe,Ye),Zt<5&&(St[et=4-Zt]||(St[et]=[]),lt=re(we.exp)?"fn: "+(we.exp.name||we.exp.toString()):we.exp,lt+="; newVal: "+Fe(Ie)+"; oldVal: "+Fe(xe),St[et].push(lt))}catch(Vt){de(),q(Vt)}if(!(Ve=Ye.$$childHead||Ye!==this&&Ye.$$nextSibling))for(;Ye!==this&&!(Ve=Ye.$$nextSibling);)Ye=Ye.$parent}while(Ye=Ve);if((Ge||nt.length)&&!Zt--)throw de(),S("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",d,Fe(St))}while(Ge||nt.length);for(de();mt.length;)try{mt.shift()()}catch(Vt){q(Vt)}},$destroy:function(){if(!this.$$destroyed){var we=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==me&&(M(this.$$listenerCount,$e(null,Ne,this)),we.$$childHead==this&&(we.$$childHead=this.$$nextSibling),we.$$childTail==this&&(we.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=F,this.$on=this.$watch=function(){return F})}},$eval:function(we,Ie){return ae(we)(this,Ie)},$evalAsync:function(we){me.$$phase||me.$$asyncQueue.length||fe.defer(function(){me.$$asyncQueue.length&&me.$digest()}),this.$$asyncQueue.push({scope:this,expression:we})},$$postDigest:function(we){this.$$postDigestQueue.push(we)},$apply:function(we){try{return _e("$apply"),this.$eval(we)}catch(Ie){q(Ie)}finally{de();try{me.$digest()}catch(Ie){throw q(Ie),Ie}}},$on:function(we,Ie){var xe=this.$$listeners[we];xe||(this.$$listeners[we]=xe=[]),xe.push(Ie);for(var Pe=this;Pe.$$listenerCount[we]||(Pe.$$listenerCount[we]=0),Pe.$$listenerCount[we]++,Pe=Pe.$parent;);var rt=this;return function(){xe[z(xe,Ie)]=null,Ne(rt,1,we)}},$emit:function(we,Ie){var xe,Pe,rt,Ge=[],Ve=this,Ye=!1,et={name:we,targetScope:Ve,stopPropagation:function(){Ye=!0},preventDefault:function(){et.defaultPrevented=!0},defaultPrevented:!1},lt=be([et],arguments,1);do{for(xe=Ve.$$listeners[we]||Ge,et.currentScope=Ve,Pe=0,rt=xe.length;Pe<rt;Pe++)if(xe[Pe])try{xe[Pe].apply(null,lt)}catch(Ze){q(Ze)}else xe.splice(Pe,1),Pe--,rt--;if(Ye)return et;Ve=Ve.$parent}while(Ve);return et},$broadcast:function(we,Ie){for(var xe,Pe,rt,Ge=this,Ve=this,Ye={name:we,targetScope:this,preventDefault:function(){Ye.defaultPrevented=!0},defaultPrevented:!1},et=be([Ye],arguments,1);Ge=Ve;){for(Pe=0,rt=(xe=(Ye.currentScope=Ge).$$listeners[we]||[]).length;Pe<rt;Pe++)if(xe[Pe])try{xe[Pe].apply(null,et)}catch(lt){q(lt)}else xe.splice(Pe,1),Pe--,rt--;if(!(Ve=Ge.$$listenerCount[we]&&Ge.$$childHead||Ge!==this&&Ge.$$nextSibling))for(;Ge!==this&&!(Ve=Ge.$$nextSibling);)Ge=Ge.$parent}return Ye}};var me=new ge;return me;function _e(we){if(me.$$phase)throw S("inprog","{0} already in progress",me.$$phase);me.$$phase=we}function de(){me.$$phase=null}function ke(we,Ie){var xe=ae(we);return ce(xe,Ie),xe}function Ne(we,Ie,xe){for(;we.$$listenerCount[xe]-=Ie,0===we.$$listenerCount[xe]&&delete we.$$listenerCount[xe],we=we.$parent;);}function Te(){}}]}function os(){var d=/^\s*(https?|ftp|mailto|tel|file):/,S=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(L){return U(L)?(d=L,this):d},this.imgSrcSanitizationWhitelist=function(L){return U(L)?(S=L,this):S},this.$get=function(){return function(L,W){var q,ae=W?S:d;return p&&!(8<=p)||""===(q=Ce(L).href)||q.match(ae)?L:"unsafe:"+q}}}var Mr=e("$sce"),yr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Fr(d){var S=[];return U(d)&&M(d,function(L){S.push(function(W){if("self"===W)return W;if(D(W)){if(-1<W.indexOf("***"))throw Mr("iwcard","Illegal sequence *** in string matcher.  String: {0}",W);return W=(q=W,q.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+W+"$")}if(te(W))return new RegExp("^"+W.source+"$");throw Mr("imatcher",'Matchers may only be "self", string patterns or RegExp objects');var q}(L))}),S}function Dr(){this.SCE_CONTEXTS=yr;var d=["self"],S=[];this.resourceUrlWhitelist=function(L){return arguments.length&&(d=Fr(L)),d},this.resourceUrlBlacklist=function(L){return arguments.length&&(S=Fr(L)),S},this.$get=["$injector",function(L){var W=function(me){throw Mr("unsafe","Attempting to use an unsafe value in a safe context.")};function q(me,_e){return"self"===me?Le(_e):!!me.exec(_e.href)}function ae(me){var _e=function(de){this.$$unwrapTrustedValue=function(){return de}};return me&&(_e.prototype=new me),_e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},_e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},_e}L.has("$sanitize")&&(W=L.get("$sanitize"));var fe=ae(),ge={};return ge[yr.HTML]=ae(fe),ge[yr.CSS]=ae(fe),ge[yr.URL]=ae(fe),ge[yr.JS]=ae(fe),ge[yr.RESOURCE_URL]=ae(ge[yr.URL]),{trustAs:function(me,_e){var de=ge.hasOwnProperty(me)?ge[me]:null;if(!de)throw Mr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",me,_e);if(null===_e||_e===G||""===_e)return _e;if("string"!=typeof _e)throw Mr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",me);return new de(_e)},getTrusted:function(me,_e){if(null===_e||_e===G||""===_e)return _e;var de=ge.hasOwnProperty(me)?ge[me]:null;if(de&&_e instanceof de)return _e.$$unwrapTrustedValue();if(me===yr.RESOURCE_URL){if(function(ke){var Ne,Te,we=Ce(ke.toString()),Ie=!1;for(Ne=0,Te=d.length;Ne<Te;Ne++)if(q(d[Ne],we)){Ie=!0;break}if(Ie)for(Ne=0,Te=S.length;Ne<Te;Ne++)if(q(S[Ne],we)){Ie=!1;break}return Ie}(_e))return _e;throw Mr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",_e.toString())}if(me===yr.HTML)return W(_e);throw Mr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(me){return me instanceof fe?me.$$unwrapTrustedValue():me}}}]}function $i(){var d=!0;this.enabled=function(S){return arguments.length&&(d=!!S),d},this.$get=["$parse","$sniffer","$sceDelegate",function(S,L,W){if(d&&L.msie&&L.msieDocumentMode<8)throw Mr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var q=X(yr);q.isEnabled=function(){return d},q.trustAs=W.trustAs,q.getTrusted=W.getTrusted,q.valueOf=W.valueOf,d||(q.trustAs=q.getTrusted=function(me,_e){return _e},q.valueOf=B),q.parseAs=function(me,_e){var de=S(_e);return de.literal&&de.constant?de:function(ke,Ne){return q.getTrusted(me,de(ke,Ne))}};var ae=q.parseAs,fe=q.getTrusted,ge=q.trustAs;return M(yr,function(me,_e){var de=h(_e);q[Rt("parse_as_"+de)]=function(ke){return ae(me,ke)},q[Rt("get_trusted_"+de)]=function(ke){return fe(me,ke)},q[Rt("trust_as_"+de)]=function(ke){return ge(me,ke)}}),q}]}function kn(){this.$get=["$window","$document",function(d,S){var L,W,q={},ae=m((/android (\d+)/.exec(h((d.navigator||{}).userAgent))||[])[1]),fe=/Boxee/i.test((d.navigator||{}).userAgent),ge=S[0]||{},me=ge.documentMode,_e=/^(Moz|webkit|O|ms)(?=[A-Z])/,de=ge.body&&ge.body.style,ke=!1,Ne=!1;if(de){for(var Te in de)if(W=_e.exec(Te)){L=(L=W[0]).substr(0,1).toUpperCase()+L.substr(1);break}L||(L="WebkitOpacity"in de&&"webkit"),ke="transition"in de||L+"Transition"in de,Ne="animation"in de||L+"Animation"in de,!ae||ke&&Ne||(ke=D(ge.body.style.webkitTransition),Ne=D(ge.body.style.webkitAnimation))}return{history:!(!d.history||!d.history.pushState||ae<4||fe),hashchange:"onhashchange"in d&&(!me||7<me),hasEvent:function(we){if("input"==we&&9==p)return!1;if(Q(q[we])){var Ie=ge.createElement("div");q[we]="on"+we in Ie}return q[we]},csp:ne(),vendorPrefix:L,transitions:ke,animations:Ne,android:ae,msie:p,msieDocumentMode:me}}]}function x(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(d,S,L,W){var q={};function ae(fe,ge,me){var _e,de=L.defer(),ke=de.promise,Ne=U(me)&&!me;return _e=S.defer(function(){try{de.resolve(fe())}catch(Te){de.reject(Te),W(Te)}finally{delete q[ke.$$timeoutId]}Ne||d.$apply()},ge),ke.$$timeoutId=_e,q[_e]=de,ke}return ae.cancel=function(fe){return!(!fe||!(fe.$$timeoutId in q))&&(q[fe.$$timeoutId].reject("canceled"),delete q[fe.$$timeoutId],S.defer.cancel(fe.$$timeoutId))},ae}]}var ee=P.createElement("a"),he=Ce(I.location.href);function Ce(d,S){var L=d;return p&&(ee.setAttribute("href",L),L=ee.href),ee.setAttribute("href",L),{href:ee.href,protocol:ee.protocol?ee.protocol.replace(/:$/,""):"",host:ee.host,search:ee.search?ee.search.replace(/^\?/,""):"",hash:ee.hash?ee.hash.replace(/^#/,""):"",hostname:ee.hostname,port:ee.port,pathname:"/"===ee.pathname.charAt(0)?ee.pathname:"/"+ee.pathname}}function Le(d){var S=D(d)?Ce(d):d;return S.protocol===he.protocol&&S.host===he.host}function He(){this.$get=J(I)}function Qe(d){var S="Filter";function L(W,q){if(N(W)){var ae={};return M(W,function(fe,ge){ae[ge]=L(ge,fe)}),ae}return d.factory(W+S,q)}this.register=L,this.$get=["$injector",function(W){return function(q){return W.get(q+S)}}],L("currency",Dt),L("date",mi),L("filter",vt),L("json",fs),L("limitTo",Cs),L("lowercase",ws),L("number",rn),L("orderBy",gi),L("uppercase",ks)}function vt(){return function(d,S,L){if(!ue(d))return d;var W=_typeof(L),q=[];q.check=function(de){for(var ke=0;ke<q.length;ke++)if(!q[ke](de))return!1;return!0},"function"!==W&&(L="boolean"===W&&L?function(de,ke){return w.equals(de,ke)}:function(de,ke){if(de&&ke&&"object"===_typeof(de)&&"object"===_typeof(ke)){for(var Ne in de)if("$"!==Ne.charAt(0)&&a.call(de,Ne)&&L(de[Ne],ke[Ne]))return!0;return!1}return ke=(""+ke).toLowerCase(),-1<(""+de).toLowerCase().indexOf(ke)});var ae=function de(ke,Ne){if("string"==typeof Ne&&"!"===Ne.charAt(0))return!de(ke,Ne.substr(1));switch(_typeof(ke)){case"boolean":case"number":case"string":return L(ke,Ne);case"object":if("object"===_typeof(Ne))return L(ke,Ne);for(var Te in ke)if("$"!==Te.charAt(0)&&de(ke[Te],Ne))return!0;return!1;case"array":for(var we=0;we<ke.length;we++)if(de(ke[we],Ne))return!0;return!1;default:return!1}};switch(_typeof(S)){case"boolean":case"number":case"string":S={$:S};case"object":for(var fe in S)!function(de){void 0!==S[de]&&q.push(function(ke){return ae("$"==de?ke:ke&&ke[de],S[de])})}(fe);break;case"function":q.push(S);break;default:return d}for(var ge=[],me=0;me<d.length;me++){var _e=d[me];q.check(_e)&&ge.push(_e)}return ge}}function Dt(d){var S=d.NUMBER_FORMATS;return function(L,W){return Q(W)&&(W=S.CURRENCY_SYM),$n(L,S.PATTERNS[1],S.GROUP_SEP,S.DECIMAL_SEP,2).replace(/\u00A4/g,W)}}function rn(d){var S=d.NUMBER_FORMATS;return function(L,W){return $n(L,S.PATTERNS[0],S.GROUP_SEP,S.DECIMAL_SEP,W)}}Qe.$inject=["$provide"],Dt.$inject=["$locale"],rn.$inject=["$locale"];var vn=".";function $n(d,S,L,W,q){if(null==d||!isFinite(d)||N(d))return"";var ae=d<0,fe=(d=Math.abs(d))+"",ge="",me=[],_e=!1;if(-1!==fe.indexOf("e")){var de=fe.match(/([\d\.]+)e(-?)(\d+)/);de&&"-"==de[2]&&de[3]>q+1?(fe="0",d=0):(ge=fe,_e=!0)}if(_e)0<q&&-1<d&&d<1&&(ge=d.toFixed(q));else{var ke=(fe.split(vn)[1]||"").length;Q(q)&&(q=Math.min(Math.max(S.minFrac,ke),S.maxFrac));var Ne=(""+(d=+(Math.round(+(d.toString()+"e"+q)).toString()+"e"+-q))).split(vn),Te=Ne[0];Ne=Ne[1]||"";var we,Ie=0,xe=S.lgSize,Pe=S.gSize;if(Te.length>=xe+Pe)for(Ie=Te.length-xe,we=0;we<Ie;we++)(Ie-we)%Pe==0&&0!==we&&(ge+=L),ge+=Te.charAt(we);for(we=Ie;we<Te.length;we++)(Te.length-we)%xe==0&&0!==we&&(ge+=L),ge+=Te.charAt(we);for(;Ne.length<q;)Ne+="0";q&&"0"!==q&&(ge+=W+Ne.substr(0,q))}return me.push(ae?S.negPre:S.posPre),me.push(ge),me.push(ae?S.negSuf:S.posSuf),me.join("")}function jn(d,S,L){var W="";for(d<0&&(W="-",d=-d),d=""+d;d.length<S;)d="0"+d;return L&&(d=d.substr(d.length-S)),W+d}function Tn(d,S,L,W){return L=L||0,function(q){var ae=q["get"+d]();return(0<L||-L<ae)&&(ae+=L),0===ae&&-12==L&&(ae=12),jn(ae,S,W)}}function Or(d,S){return function(L,W){var q=L["get"+d]();return W[r(S?"SHORT"+d:d)][q]}}var Gi={yyyy:Tn("FullYear",4),yy:Tn("FullYear",2,0,!0),y:Tn("FullYear",1),MMMM:Or("Month"),MMM:Or("Month",!0),MM:Tn("Month",2,1),M:Tn("Month",1,1),dd:Tn("Date",2),d:Tn("Date",1),HH:Tn("Hours",2),H:Tn("Hours",1),hh:Tn("Hours",2,-12),h:Tn("Hours",1,-12),mm:Tn("Minutes",2),m:Tn("Minutes",1),ss:Tn("Seconds",2),s:Tn("Seconds",1),sss:Tn("Milliseconds",3),EEEE:Or("Day"),EEE:Or("Day",!0),a:function(d,S){return d.getHours()<12?S.AMPMS[0]:S.AMPMS[1]},Z:function(d){var S=-1*d.getTimezoneOffset();return(0<=S?"+":"")+(jn(Math[0<S?"floor":"ceil"](S/60),2)+jn(Math.abs(S%60),2))}},as=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,zr=/^\-?\d+$/;function mi(d){var S=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(L,W){var q,ae,fe="",ge=[];if(W=d.DATETIME_FORMATS[W=W||"mediumDate"]||W,D(L)&&(L=zr.test(L)?m(L):function(me){var _e;if(_e=me.match(S)){var de=new Date(0),ke=0,Ne=0,Te=_e[8]?de.setUTCFullYear:de.setFullYear,we=_e[8]?de.setUTCHours:de.setHours;_e[9]&&(ke=m(_e[9]+_e[10]),Ne=m(_e[9]+_e[11])),Te.call(de,m(_e[1]),m(_e[2])-1,m(_e[3]));var Ie=m(_e[4]||0)-ke,xe=m(_e[5]||0)-Ne,Pe=m(_e[6]||0),rt=Math.round(1e3*parseFloat("0."+(_e[7]||0)));return we.call(de,Ie,xe,Pe,rt),de}return me}(L)),ie(L)&&(L=new Date(L)),!Z(L))return L;for(;W;)W=(ae=as.exec(W))?(ge=be(ge,ae,1)).pop():(ge.push(W),null);return M(ge,function(me){fe+=(q=Gi[me])?q(L,d.DATETIME_FORMATS):me.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),fe}}function fs(){return function(d){return Fe(d,!0)}}mi.$inject=["$locale"];var ws=J(h),ks=J(r);function Cs(){return function(d,S){if(!ue(d)&&!D(d))return d;if(S=Math.abs(Number(S))===1/0?Number(S):m(S),D(d))return S?0<=S?d.slice(0,S):d.slice(S,d.length):"";var L,W,q=[];for(S>d.length?S=d.length:S<-d.length&&(S=-d.length),W=0<S?(L=0,S):(L=d.length+S,d.length);L<W;L++)q.push(d[L]);return q}}function gi(d){return function(S,L,W){if(!ue(S)||!L)return S;var q,fe;L=ue(L)?L:[L],q=function(ke){var Ne=!1,Te=ke||B;if(D(ke)&&("+"!=ke.charAt(0)&&"-"!=ke.charAt(0)||(Ne="-"==ke.charAt(0),ke=ke.substring(1)),(Te=d(ke)).constant)){var we=Te();return _e(function(Ie,xe){return de(Ie[we],xe[we])},Ne)}return _e(function(Ie,xe){return de(Te(Ie),Te(xe))},Ne)},fe=[],M(L,function(ke,Ne,Te){fe.push(q.call(void 0,ke,Ne,Te))}),L=fe;for(var ge=[],me=0;me<S.length;me++)ge.push(S[me]);return ge.sort(_e(function(ke,Ne){for(var Te=0;Te<L.length;Te++){var we=L[Te](ke,Ne);if(0!==we)return we}return 0},W));function _e(ke,Ne){return Mt(Ne)?function(Te,we){return ke(we,Te)}:ke}function de(ke,Ne){var Te=_typeof(ke),we=_typeof(Ne);return Te==we?(Z(ke)&&Z(Ne)&&(ke=ke.valueOf(),Ne=Ne.valueOf()),"string"==Te&&(ke=ke.toLowerCase(),Ne=Ne.toLowerCase()),ke===Ne?0:ke<Ne?-1:1):Te<we?-1:1}}}function cr(d){return re(d)&&(d={link:d}),d.restrict=d.restrict||"AC",J(d)}gi.$inject=["$parse"];var Ss=J({restrict:"E",compile:function(d,S){if(p<=8&&(S.href||S.name||S.$set("href",""),d.append(P.createComment("IE fix"))),!S.href&&!S.xlinkHref&&!S.name)return function(L,W){var q="[object SVGAnimatedString]"===l.call(W.prop("href"))?"xlink:href":"href";W.on("click",function(ae){W.attr(q)||ae.preventDefault()})}}}),us={};M(Pt,function(d,S){if("multiple"!=d){var L=Fn("ng-"+S);us[L]=function(){return{priority:100,link:function(W,q,ae){W.$watch(ae[L],function(fe){ae.$set(S,!!fe)})}}}}}),M(["src","srcset","href"],function(d){var S=Fn("ng-"+d);us[S]=function(){return{priority:99,link:function(L,W,q){var ae=d,fe=d;"href"===d&&"[object SVGAnimatedString]"===l.call(W.prop("href"))&&(q.$attr[fe="xlinkHref"]="xlink:href",ae=null),q.$observe(S,function(ge){ge&&(q.$set(fe,ge),p&&ae&&W.prop(ae,q[fe]))})}}}});var Yi={$addControl:F,$removeControl:F,$setValidity:F,$setDirty:F,$setPristine:F};function ds(d,S,L,W){var q=this,ae=d.parent().controller("form")||Yi,fe=0,ge=q.$error={},me=[];function _e(de,ke){ke=ke?"-"+Yn(ke,"-"):"",W.removeClass(d,(de?Ti:vi)+ke),W.addClass(d,(de?vi:Ti)+ke)}q.$name=S.name||S.ngForm,q.$dirty=!1,q.$pristine=!0,q.$valid=!0,q.$invalid=!1,ae.$addControl(q),d.addClass(Wr),_e(!0),q.$addControl=function(de){pe(de.$name,"input"),me.push(de),de.$name&&(q[de.$name]=de)},q.$removeControl=function(de){de.$name&&q[de.$name]===de&&delete q[de.$name],M(ge,function(ke,Ne){q.$setValidity(Ne,!0,de)}),T(me,de)},q.$setValidity=function(de,ke,Ne){var Te=ge[de];if(ke)Te&&(T(Te,Ne),Te.length||(--fe||(_e(ke),q.$valid=!0,q.$invalid=!1),_e(!(ge[de]=!1),de),ae.$setValidity(de,!0,q)));else{if(fe||_e(ke),Te){if(-1!=z(Te,Ne))return}else ge[de]=Te=[],fe++,_e(!1,de),ae.$setValidity(de,!1,q);Te.push(Ne),q.$valid=!1,q.$invalid=!0}},q.$setDirty=function(){W.removeClass(d,Wr),W.addClass(d,Xi),q.$dirty=!0,q.$pristine=!1,ae.$setDirty()},q.$setPristine=function(){W.removeClass(d,Xi),W.addClass(d,Wr),q.$dirty=!1,q.$pristine=!0,M(me,function(de){de.$setPristine()})}}ds.$inject=["$element","$attrs","$scope","$animate"];var ps=function(d){return["$timeout",function(S){return{name:"form",restrict:d?"EAC":"E",controller:ds,compile:function(){return{pre:function(L,W,q,ae){if(!q.action){var fe=function(_e){_e.preventDefault?_e.preventDefault():_e.returnValue=!1};ze(W[0],"submit",fe),W.on("$destroy",function(){S(function(){Oe(W[0],"submit",fe)},0,!1)})}var ge=W.parent().controller("form"),me=q.name||q.ngForm;me&&pi(L,me,ae,me),ge&&W.on("$destroy",function(){ge.$removeControl(ae),me&&pi(L,me,G,me),y(ae,Yi)})}}}}}]},Es=ps(),$s=ps(!0),Ts=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ms=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,As=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ls={text:Pr,number:function(d,S,L,W,q,ae){if(Pr(d,S,L,W,q,ae),W.$parsers.push(function(me){var _e=W.$isEmpty(me);return _e||As.test(me)?(W.$setValidity("number",!0),""===me?null:_e?me:parseFloat(me)):(W.$setValidity("number",!1),G)}),me=W,de=gs,N(Ne=W.$$validityState)&&(me.$$hasNativeValidators=!0,me.$parsers.push(function(Te){return me.$error.number||cs(Ne,null)||!cs(Ne,de)?Te:void me.$setValidity("number",!1)})),W.$formatters.push(function(me){return W.$isEmpty(me)?"":""+me}),L.min){var fe=function(me){var _e=parseFloat(L.min);return xr(W,"min",W.$isEmpty(me)||_e<=me,me)};W.$parsers.push(fe),W.$formatters.push(fe)}var me,de,Ne;if(L.max){var ge=function(me){var _e=parseFloat(L.max);return xr(W,"max",W.$isEmpty(me)||me<=_e,me)};W.$parsers.push(ge),W.$formatters.push(ge)}W.$formatters.push(function(me){return xr(W,"number",W.$isEmpty(me)||ie(me),me)})},url:function(d,S,L,W,q,ae){Pr(d,S,L,W,q,ae);var fe=function(ge){return xr(W,"url",W.$isEmpty(ge)||Ts.test(ge),ge)};W.$formatters.push(fe),W.$parsers.push(fe)},email:function(d,S,L,W,q,ae){Pr(d,S,L,W,q,ae);var fe=function(ge){return xr(W,"email",W.$isEmpty(ge)||ms.test(ge),ge)};W.$formatters.push(fe),W.$parsers.push(fe)},radio:function(d,S,L,W){Q(L.name)&&S.attr("name",_()),S.on("click",function(){S[0].checked&&d.$apply(function(){W.$setViewValue(L.value)})}),W.$render=function(){S[0].checked=L.value==W.$viewValue},L.$observe("value",W.$render)},checkbox:function(d,S,L,W){var q=L.ngTrueValue,ae=L.ngFalseValue;D(q)||(q=!0),D(ae)||(ae=!1),S.on("click",function(){d.$apply(function(){W.$setViewValue(S[0].checked)})}),W.$render=function(){S[0].checked=W.$viewValue},W.$isEmpty=function(fe){return fe!==q},W.$formatters.push(function(fe){return fe===q}),W.$parsers.push(function(fe){return fe?q:ae})},hidden:F,button:F,submit:F,reset:F,file:F};function xr(d,S,L,W){return d.$setValidity(S,L),L?W:G}function cs(d,S){var L;if(S)for(L=0;L<S.length;++L)if(d[S[L]])return!0;return!1}function Pr(d,S,L,W,q,ae){var fe=S.prop(g),ge=S[0].placeholder,me={};if(W.$$validityState=fe,!q.android){var _e=!1;S.on("compositionstart",function(Ye){_e=!0}),S.on("compositionend",function(){_e=!1,de()})}var de=function(Ye){if(!_e){var et=S.val();p&&"input"===(Ye||me).type&&S[0].placeholder!==ge?ge=S[0].placeholder:(Mt(L.ngTrim||"T")&&(et=V(et)),(W.$viewValue!==et||""===et&&fe&&W.$$hasNativeValidators)&&(d.$$phase?W.$setViewValue(et):d.$apply(function(){W.$setViewValue(et)})))}};if(q.hasEvent("input"))S.on("input",de);else{var ke,Ne=function(){ke||(ke=ae.defer(function(){de(),ke=null}))};S.on("keydown",function(Ye){var et=Ye.keyCode;91===et||15<et&&et<19||37<=et&&et<=40||Ne()}),q.hasEvent("paste")&&S.on("paste cut",Ne)}S.on("change",de),W.$render=function(){S.val(W.$isEmpty(W.$viewValue)?"":W.$viewValue)};var Te,we,Ie=L.ngPattern;if(Ie){var xe=function(Ye,et){return xr(W,"pattern",W.$isEmpty(et)||Ye.test(et),et)};Te=(we=Ie.match(/^\/(.*)\/([gim]*)$/))?(Ie=new RegExp(we[1],we[2]),function(Ye){return xe(Ie,Ye)}):function(Ye){var et=d.$eval(Ie);if(!et||!et.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",Ie,et,tt(S));return xe(et,Ye)},W.$formatters.push(Te),W.$parsers.push(Te)}if(L.ngMinlength){var Pe=m(L.ngMinlength),rt=function(Ye){return xr(W,"minlength",W.$isEmpty(Ye)||Ye.length>=Pe,Ye)};W.$parsers.push(rt),W.$formatters.push(rt)}if(L.ngMaxlength){var Ge=m(L.ngMaxlength),Ve=function(Ye){return xr(W,"maxlength",W.$isEmpty(Ye)||Ye.length<=Ge,Ye)};W.$parsers.push(Ve),W.$formatters.push(Ve)}}var gs=["badInput"],Ji=["$browser","$sniffer",function(d,S){return{restrict:"E",require:"?ngModel",link:function(L,W,q,ae){ae&&(ls[h(q.type)]||ls.text)(L,W,q,ae,S,d)}}}],vi="ng-valid",Ti="ng-invalid",Wr="ng-pristine",Xi="ng-dirty",ii=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(d,S,L,W,q,ae){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=L.name;var fe=q(L.ngModel),ge=fe.assign;if(!ge)throw e("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",L.ngModel,tt(W));this.$render=F,this.$isEmpty=function(Te){return Q(Te)||""===Te||null===Te||Te!=Te};var me=W.inheritedData("$formController")||Yi,_e=0,de=this.$error={};function ke(Te,we){we=we?"-"+Yn(we,"-"):"",ae.removeClass(W,(Te?Ti:vi)+we),ae.addClass(W,(Te?vi:Ti)+we)}W.addClass(Wr),ke(!0),this.$setValidity=function(Te,we){de[Te]!==!we&&(we?(de[Te]&&_e--,_e||(ke(!0),this.$valid=!0,this.$invalid=!1)):(ke(!1),this.$invalid=!0,this.$valid=!1,_e++),de[Te]=!we,ke(we,Te),me.$setValidity(Te,we,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,ae.removeClass(W,Xi),ae.addClass(W,Wr)},this.$setViewValue=function(Te){this.$viewValue=Te,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,ae.removeClass(W,Wr),ae.addClass(W,Xi),me.$setDirty()),M(this.$parsers,function(we){Te=we(Te)}),this.$modelValue!==Te&&(this.$modelValue=Te,ge(d,Te),M(this.$viewChangeListeners,function(we){try{we()}catch(Ie){S(Ie)}}))};var Ne=this;d.$watch(function(){var Te=fe(d);if(Ne.$modelValue!==Te){var we=Ne.$formatters,Ie=we.length;for(Ne.$modelValue=Te;Ie--;)Te=we[Ie](Te);Ne.$viewValue!==Te&&(Ne.$viewValue=Te,Ne.$render())}return Te})}],Gr=function(){return{require:["ngModel","^?form"],controller:ii,link:function(d,S,L,W){var q=W[0],ae=W[1]||Yi;ae.$addControl(q),d.$on("$destroy",function(){ae.$removeControl(q)})}}},Os=J({require:"ngModel",link:function(d,S,L,W){W.$viewChangeListeners.push(function(){d.$eval(L.ngChange)})}}),vs=function(){return{require:"?ngModel",link:function(d,S,L,W){if(W){L.required=!0;var q=function(ae){return L.required&&W.$isEmpty(ae)?void W.$setValidity("required",!1):(W.$setValidity("required",!0),ae)};W.$formatters.push(q),W.$parsers.unshift(q),L.$observe("required",function(){q(W.$viewValue)})}}}},Rs=function(){return{require:"ngModel",link:function(d,S,L,W){var q=/\/(.*)\//.exec(L.ngList),ae=q&&new RegExp(q[1])||L.ngList||",";W.$parsers.push(function(fe){if(!Q(fe)){var ge=[];return fe&&M(fe.split(ae),function(me){me&&ge.push(V(me))}),ge}}),W.$formatters.push(function(fe){return ue(fe)?fe.join(", "):G}),W.$isEmpty=function(fe){return!fe||!fe.length}}}},js=/^(true|false|\d+)$/,Is=function(){return{priority:100,compile:function(d,S){return js.test(S.ngValue)?function(L,W,q){q.$set("value",L.$eval(q.ngValue))}:function(L,W,q){L.$watch(q.ngValue,function(ae){q.$set("value",ae)})}}}},Ms=cr({compile:function(d){return d.addClass("ng-binding"),function(S,L,W){L.data("$binding",W.ngBind),S.$watch(W.ngBind,function(q){L.text(q==G?"":q)})}}}),Ds=["$interpolate",function(d){return function(S,L,W){var q=d(L.attr(W.$attr.ngBindTemplate));L.addClass("ng-binding").data("$binding",q),W.$observe("ngBindTemplate",function(ae){L.text(ae)})}}],xs=["$sce","$parse",function(d,S){return{compile:function(L){return L.addClass("ng-binding"),function(W,q,ae){q.data("$binding",ae.ngBindHtml);var fe=S(ae.ngBindHtml);W.$watch(function(){return(fe(W)||"").toString()},function(ge){q.html(d.getTrustedHtml(fe(W))||"")})}}}}];function Qi(d,S){return d="ngClass"+d,["$animate",function(L){return{restrict:"AC",link:function(ae,fe,ge){var me;function _e(Ne){var Te=de(Ne,1);ge.$addClass(Te)}function de(Ne,Te){var we=fe.data("$classCounts")||{},Ie=[];return M(Ne,function(xe){(0<Te||we[xe])&&(we[xe]=(we[xe]||0)+Te,we[xe]===+(0<Te)&&Ie.push(xe))}),fe.data("$classCounts",we),Ie.join(" ")}function ke(Ne){if(!0===S||ae.$index%2===S){var Te=q(Ne||[]);me?se(Ne,me)||(xe=W(Ie=Te,we=q(me)),Pe=de(Pe=W(we,Ie),-1),0===(xe=de(xe,1)).length?L.removeClass(fe,Pe):0===Pe.length?L.addClass(fe,xe):L.setClass(fe,xe,Pe)):_e(Te)}var we,Ie,xe,Pe;me=X(Ne)}ae.$watch(ge[d],ke,!0),ge.$observe("class",function(Ne){ke(ae.$eval(ge[d]))}),"ngClass"!==d&&ae.$watch("$index",function(Ne,Te){var Pe,we=1&Ne;if(we!==(1&Te)){var Ie=q(ae.$eval(ge[d]));we===S?_e(Ie):(Pe=de(Ie,-1),ge.$removeClass(Pe))}})}};function W(ae,fe){var ge=[];e:for(var me=0;me<ae.length;me++){for(var _e=ae[me],de=0;de<fe.length;de++)if(_e==fe[de])continue e;ge.push(_e)}return ge}function q(ae){if(ue(ae))return ae;if(D(ae))return ae.split(" ");if(N(ae)){var fe=[];return M(ae,function(ge,me){ge&&(fe=fe.concat(me.split(" ")))}),fe}return ae}}]}var Ki=Qi("",!0),Zi=Qi("Odd",0),Ps=Qi("Even",1),Ns=cr({compile:function(d,S){S.$set("ngCloak",G),d.removeClass("ng-cloak")}}),Ai=[function(){return{scope:!0,controller:"@",priority:500}}],je={};M("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(d){var S=Fn("ng-"+d);je[S]=["$parse",function(L){return{compile:function(W,q){var ae=L(q[S]);return function(fe,ge){ge.on(h(d),function(me){fe.$apply(function(){ae(fe,{$event:me})})})}}}}]});var H=["$animate",function(d){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(S,L,W,q,ae){var fe,ge,me;S.$watch(W.ngIf,function(_e){Mt(_e)?ge||(ge=S.$new(),ae(ge,function(de){de[de.length++]=P.createComment(" end ngIf: "+W.ngIf+" "),fe={clone:de},d.enter(de,L.parent(),L)})):(me&&(me.remove(),me=null),ge&&(ge.$destroy(),ge=null),fe&&(me=K(fe.clone),d.leave(me,function(){me=null}),fe=null))})}}}],le=["$http","$templateCache","$anchorScroll","$animate","$sce",function(d,S,L,W,q){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:w.noop,compile:function(ae,fe){var ge=fe.ngInclude||fe.src,me=fe.onload||"",_e=fe.autoscroll;return function(de,ke,Ne,Te,we){var Ie,xe,Pe,rt=0,Ge=function(){xe&&(xe.remove(),xe=null),Ie&&(Ie.$destroy(),Ie=null),Pe&&(W.leave(Pe,function(){xe=null}),xe=Pe,Pe=null)};de.$watch(q.parseAsResourceUrl(ge),function(Ve){var Ye=function(){!U(_e)||_e&&!de.$eval(_e)||L()},et=++rt;Ve?(d.get(Ve,{cache:S}).success(function(lt){if(et===rt){var Ze=de.$new();Te.template=lt;var nt=we(Ze,function(mt){Ge(),W.enter(mt,null,ke,Ye)});Pe=nt,(Ie=Ze).$emit("$includeContentLoaded"),de.$eval(me)}}).error(function(){et===rt&&Ge()}),de.$emit("$includeContentRequested")):(Ge(),Te.template=null)})}}}}],Re=["$compile",function(d){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(S,L,W,q){L.html(q.template),d(L.contents())(S)}}}],Ke=cr({priority:450,compile:function(){return{pre:function(d,S,L){d.$eval(L.ngInit)}}}}),yt=cr({terminal:!0,priority:1e3}),Ot=["$locale","$interpolate",function(d,S){var L=/{}/g;return{restrict:"EA",link:function(W,q,ae){var fe=ae.count,ge=ae.$attr.when&&q.attr(ae.$attr.when),me=ae.offset||0,_e=W.$eval(ge)||{},de={},ke=S.startSymbol(),Ne=S.endSymbol(),Te=/^when(Minus)?(.+)$/;M(ae,function(we,Ie){Te.test(Ie)&&(_e[h(Ie.replace("when","").replace("Minus","-"))]=q.attr(ae.$attr[Ie]))}),M(_e,function(we,Ie){de[Ie]=S(we.replace(L,ke+fe+"-"+me+Ne))}),W.$watch(function(){var we=parseFloat(W.$eval(fe));return isNaN(we)?"":(we in _e||(we=d.pluralCat(we-me)),de[we](W,q,!0))},function(we){q.text(we)})}}}],yn=["$parse","$animate",function(d,S){var L=e("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(ae,fe,ge,me,_e){var de,ke,Ne,Te,we,Ie,xe,Pe,rt,Ge=ge.ngRepeat,Ve=Ge.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),Ye={$id:Tt};if(!Ve)throw L("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",Ge);if(Ie=Ve[1],xe=Ve[2],(de=Ve[3])?(ke=d(de),Ne=function(lt,Ze,nt){return rt&&(Ye[rt]=lt),Ye[Pe]=Ze,Ye.$index=nt,ke(ae,Ye)}):(Te=function(lt,Ze){return Tt(Ze)},we=function(lt){return lt}),!(Ve=Ie.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw L("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",Ie);Pe=Ve[3]||Ve[1],rt=Ve[2];var et={};ae.$watchCollection(xe,function(lt){var Ze,nt,mt,Zt,St,Vt,an,Mn,er,_n,mn,An,Bn=fe[0],Cn={},bn=[];if(O(lt))_n=lt,er=Ne||Te;else{for(Vt in er=Ne||we,_n=[],lt)lt.hasOwnProperty(Vt)&&"$"!=Vt.charAt(0)&&_n.push(Vt);_n.sort()}for(Zt=_n.length,nt=bn.length=_n.length,Ze=0;Ze<nt;Ze++)if(pe(Mn=er(Vt=lt===_n?Ze:_n[Ze],an=lt[Vt],Ze),"`track by` id"),et.hasOwnProperty(Mn))mn=et[Mn],delete et[Mn],Cn[Mn]=mn,bn[Ze]=mn;else{if(Cn.hasOwnProperty(Mn))throw M(bn,function(In){In&&In.scope&&(et[In.id]=In)}),L("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",Ge,Mn);bn[Ze]={id:Mn},Cn[Mn]=!1}for(Vt in et)et.hasOwnProperty(Vt)&&(An=K((mn=et[Vt]).clone),S.leave(An),M(An,function(In){In.$$NG_REMOVED=!0}),mn.scope.$destroy());for(Ze=0,nt=_n.length;Ze<nt;Ze++){if(an=lt[Vt=lt===_n?Ze:_n[Ze]],mn=bn[Ze],bn[Ze-1]&&(Bn=q(bn[Ze-1])),mn.scope){for(St=mn.scope,mt=Bn;(mt=mt.nextSibling)&&mt.$$NG_REMOVED;);W(mn)!=mt&&S.move(K(mn.clone),null,n(Bn)),Bn=q(mn)}else St=ae.$new();St[Pe]=an,rt&&(St[rt]=Vt),St.$index=Ze,St.$first=0===Ze,St.$last=Ze===Zt-1,St.$middle=!(St.$first||St.$last),St.$odd=!(St.$even=0==(1&Ze)),mn.scope||_e(St,function(In){In[In.length++]=P.createComment(" end ngRepeat: "+Ge+" "),S.enter(In,null,n(Bn)),Bn=In,mn.scope=St,mn.clone=In,Cn[mn.id]=mn})}et=Cn})}};function W(ae){return ae.clone[0]}function q(ae){return ae.clone[ae.clone.length-1]}}],zn=["$animate",function(d){return function(S,L,W){S.$watch(W.ngShow,function(q){d[Mt(q)?"removeClass":"addClass"](L,"ng-hide")})}}],hr=["$animate",function(d){return function(S,L,W){S.$watch(W.ngHide,function(q){d[Mt(q)?"addClass":"removeClass"](L,"ng-hide")})}}],br=cr(function(d,S,L){d.$watch(L.ngStyle,function(W,q){q&&W!==q&&M(q,function(ae,fe){S.css(fe,"")}),W&&S.css(W)},!0)}),Rr=["$animate",function(d){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(S,L,W,q){var fe=[],ge=[],me=[],_e=[];S.$watch(W.ngSwitch||W.on,function(de){var ke,Ne;for(ke=0,Ne=me.length;ke<Ne;++ke)me[ke].remove();for(me.length=0,ke=0,Ne=_e.length;ke<Ne;++ke){var Te=ge[ke];_e[ke].$destroy(),me[ke]=Te,d.leave(Te,function(){me.splice(ke,1)})}ge.length=0,_e.length=0,(fe=q.cases["!"+de]||q.cases["?"])&&(S.$eval(W.change),M(fe,function(we){var Ie=S.$new();_e.push(Ie),we.transclude(Ie,function(xe){var Pe=we.element;ge.push(xe),d.enter(xe,Pe.parent(),Pe)})}))})}}}],Lr=cr({transclude:"element",priority:800,require:"^ngSwitch",link:function(d,S,L,W,q){W.cases["!"+L.ngSwitchWhen]=W.cases["!"+L.ngSwitchWhen]||[],W.cases["!"+L.ngSwitchWhen].push({transclude:q,element:S})}}),Ur=cr({transclude:"element",priority:800,require:"^ngSwitch",link:function(d,S,L,W,q){W.cases["?"]=W.cases["?"]||[],W.cases["?"].push({transclude:q,element:S})}}),si=cr({link:function(d,S,L,W,q){if(!q)throw e("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",tt(S));q(function(ae){S.empty(),S.append(ae)})}}),jr=["$templateCache",function(d){return{restrict:"E",terminal:!0,compile:function(S,L){"text/ng-template"==L.type&&d.put(L.id,S[0].text)}}}],Oi=e("ngOptions"),qi=J({terminal:!0}),Fs=["$compile","$parse",function(d,S){var L=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,W={$setViewValue:F};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(q,ae,fe){var ge,me=this,_e={},de=W;me.databound=fe.ngModel,me.init=function(ke,Ne,Te){de=ke,ge=Te},me.addOption=function(ke){pe(ke,'"option value"'),_e[ke]=!0,de.$viewValue==ke&&(q.val(ke),ge.parent()&&ge.remove())},me.removeOption=function(ke){this.hasOption(ke)&&(delete _e[ke],de.$viewValue==ke&&this.renderUnknownOption(ke))},me.renderUnknownOption=function(ke){var Ne="? "+Tt(ke)+" ?";ge.val(Ne),q.prepend(ge),q.val(Ne),ge.prop("selected",!0)},me.hasOption=function(ke){return _e.hasOwnProperty(ke)},ae.$on("$destroy",function(){me.renderUnknownOption=F})}],link:function(q,ae,fe,ge){if(ge[1]){for(var me,_e=ge[0],de=ge[1],ke=fe.multiple,Ne=fe.ngOptions,Te=!1,we=n(P.createElement("option")),Ie=n(P.createElement("optgroup")),xe=we.clone(),Pe=0,rt=ae.children(),Ge=rt.length;Pe<Ge;Pe++)if(""===rt[Pe].value){me=Te=rt.eq(Pe);break}_e.init(de,Te,xe),ke&&(de.$isEmpty=function(Ve){return!Ve||0===Ve.length}),Ne?function(Ve,Ye,et){var lt;if(!(lt=Ne.match(L)))throw Oi("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",Ne,tt(Ye));var Ze=S(lt[2]||lt[1]),nt=lt[4]||lt[6],mt=lt[5],Zt=S(lt[3]||""),St=S(lt[2]?lt[1]:nt),Vt=S(lt[7]),an=lt[8]?S(lt[8]):null,Mn=[[{element:Ye,label:""}]];function er(){var _n,mn,An,Bn,Cn,bn,In,Be,Xe,pt,st,Wt,Bt,jt,un,Gt={"":[]},wn=[""],ct=et.$modelValue,ln=Vt(Ve)||[],cn=mt?b(ln):ln,On={},En=function(){var Dn=!1;if(ke){var gn=et.$modelValue;if(an&&ue(gn)){Dn=new At([]);for(var xn={},Jn=0;Jn<gn.length;Jn++)xn[nt]=gn[Jn],Dn.put(an(Ve,xn),gn[Jn])}else Dn=new At(gn)}return Dn}();for(st=0;st<(Xe=cn.length);st++){if(In=st,mt){if("$"===(In=cn[st]).charAt(0))continue;On[mt]=In}if(On[nt]=ln[In],(mn=Gt[_n=Zt(Ve,On)||""])||(mn=Gt[_n]=[],wn.push(_n)),ke)Wt=U(En.remove(an?an(Ve,On):St(Ve,On)));else{if(an){var Wn={};Wn[nt]=ct,Wt=an(Ve,Wn)===an(Ve,On)}else Wt=ct===St(Ve,On);En=En||Wt}un=U(un=Ze(Ve,On))?un:"",mn.push({id:an?an(Ve,On):mt?cn[st]:st,label:un,selected:Wt})}for(ke||(Te||null===ct?Gt[""].unshift({id:"",label:"",selected:!En}):En||Gt[""].unshift({id:"?",label:"",selected:!0})),pt=0,Be=wn.length;pt<Be;pt++){for(mn=Gt[_n=wn[pt]],Mn.length<=pt?(Bn={element:Ie.clone().attr("label",_n),label:mn.label},Mn.push(Cn=[Bn]),Ye.append(Bn.element)):(Bn=(Cn=Mn[pt])[0]).label!=_n&&Bn.element.attr("label",Bn.label=_n),Bt=null,st=0,Xe=mn.length;st<Xe;st++)An=mn[st],(bn=Cn[st+1])?(Bt=bn.element,bn.label!==An.label&&Bt.text(bn.label=An.label),bn.id!==An.id&&Bt.val(bn.id=An.id),Bt[0].selected!==An.selected&&(Bt.prop("selected",bn.selected=An.selected),p&&Bt.prop("selected",bn.selected))):(""===An.id&&Te?jt=Te:(jt=we.clone()).val(An.id).prop("selected",An.selected).attr("selected",An.selected).text(An.label),Cn.push(bn={element:jt,label:An.label,id:An.id,selected:An.selected}),Bt?Bt.after(jt):Bn.element.append(jt),Bt=jt);for(st++;Cn.length>st;)Cn.pop().element.remove()}for(;Mn.length>pt;)Mn.pop()[0].element.remove()}Te&&(d(Te)(Ve),Te.removeClass("ng-scope"),Te.remove()),Ye.empty(),Ye.on("change",function(){Ve.$apply(function(){var _n,mn,An,Bn,Cn,bn,In,Be,Xe,pt=Vt(Ve)||[],st={};if(ke){for(An=[],bn=0,Be=Mn.length;bn<Be;bn++)for(Cn=1,In=(_n=Mn[bn]).length;Cn<In;Cn++)if((Bn=_n[Cn].element)[0].selected){if(mn=Bn.val(),mt&&(st[mt]=mn),an)for(Xe=0;Xe<pt.length&&(st[nt]=pt[Xe],an(Ve,st)!=mn);Xe++);else st[nt]=pt[mn];An.push(St(Ve,st))}}else if("?"==(mn=Ye.val()))An=G;else if(""===mn)An=null;else if(an){for(Xe=0;Xe<pt.length;Xe++)if(st[nt]=pt[Xe],an(Ve,st)==mn){An=St(Ve,st);break}}else st[nt]=pt[mn],mt&&(st[mt]=mn),An=St(Ve,st);et.$setViewValue(An),er()})}),et.$render=er,Ve.$watchCollection(Vt,er),ke&&Ve.$watchCollection(function(){return et.$modelValue},er)}(q,ae,de):ke?(Ve=q,Ye=ae,(et=de).$render=function(){var Ze=new At(et.$viewValue);M(Ye.find("option"),function(nt){nt.selected=U(Ze.get(nt.value))})},Ve.$watch(function(){se(lt,et.$viewValue)||(lt=X(et.$viewValue),et.$render())}),Ye.on("change",function(){Ve.$apply(function(){var Ze=[];M(Ye.find("option"),function(nt){nt.selected&&Ze.push(nt.value)}),et.$setViewValue(Ze)})})):function(Ve,Ye,et,lt){et.$render=function(){var Ze=et.$viewValue;lt.hasOption(Ze)?(xe.parent()&&xe.remove(),Ye.val(Ze),""===Ze&&me.prop("selected",!0)):Q(Ze)&&me?Ye.val(""):lt.renderUnknownOption(Ze)},Ye.on("change",function(){Ve.$apply(function(){xe.parent()&&xe.remove(),et.$setViewValue(Ye.val())})})}(q,ae,de,_e)}var Ve,Ye,et,lt}}}],oi=["$interpolate",function(d){var S={addOption:F,removeOption:F};return{restrict:"E",priority:100,compile:function(L,W){if(Q(W.value)){var q=d(L.text(),!0);q||W.$set("value",L.text())}return function(ae,fe,ge){var me=fe.parent(),_e=me.data("$selectController")||me.parent().data("$selectController");_e&&_e.databound?fe.prop("selected",!1):_e=S,q?ae.$watch(q,function(de,ke){ge.$set("value",de),de!==ke&&_e.removeOption(ke),_e.addOption(de)}):_e.addOption(ge.value),fe.on("$destroy",function(){_e.removeOption(ge.value)})}}}}],Ls=J({restrict:"E",terminal:!0});I.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((s=I.jQuery)&&s.fn.on?(y((n=s).fn,{scope:on.scope,isolateScope:on.isolateScope,controller:on.controller,injector:on.injector,inheritedData:on.inheritedData}),Xt("remove",!0,!0,!1),Xt("empty",!1,!1,!1),Xt("html",!1,!1,!0)):n=_t,w.element=n,function(d){y(d,{bootstrap:Yt,copy:C,extend:y,equals:se,element:n,forEach:M,injector:Nn,noop:F,bind:$e,toJson:Fe,fromJson:qe,identity:B,isUndefined:Q,isDefined:U,isString:D,isFunction:re,isObject:N,isNumber:ie,isElement:Y,isArray:ue,version:oe,isDate:Z,lowercase:h,uppercase:r,callbacks:{counter:0},$$minErr:e,$$csp:ne}),t=function(S){var L=e("$injector"),W=e("ng");function q(fe,ge,me){return fe[ge]||(fe[ge]=me())}var ae=q(S,"angular",Object);return ae.$$minErr=ae.$$minErr||e,q(ae,"module",function(){var fe={};return function(ge,me,_e){return function(de,ke){if("hasOwnProperty"===de)throw W("badname","hasOwnProperty is not a valid {0} name","module")}(ge),me&&fe.hasOwnProperty(ge)&&(fe[ge]=null),q(fe,ge,function(){if(!me)throw L("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",ge);var de=[],ke=[],Ne=we("$injector","invoke"),Te={_invokeQueue:de,_runBlocks:ke,requires:me,name:ge,provider:we("$provide","provider"),factory:we("$provide","factory"),service:we("$provide","service"),value:we("$provide","value"),constant:we("$provide","constant","unshift"),animation:we("$animateProvider","register"),filter:we("$filterProvider","register"),controller:we("$controllerProvider","register"),directive:we("$compileProvider","directive"),config:Ne,run:function(Ie){return ke.push(Ie),this}};return _e&&Ne(_e),Te;function we(Ie,xe,Pe){return function(){return de[Pe||"push"]([Ie,xe,arguments]),Te}}})}})}(I);try{t("ngLocale")}catch{t("ngLocale",[]).provider("$locale",nr)}t("ng",["ngLocale"],["$provide",function(S){S.provider({$$sanitizeUri:os}),S.provider("$compile",mr).directive({a:Ss,input:Ji,textarea:Ji,form:Es,script:jr,select:Fs,style:Ls,option:oi,ngBind:Ms,ngBindHtml:xs,ngBindTemplate:Ds,ngClass:Ki,ngClassEven:Ps,ngClassOdd:Zi,ngCloak:Ns,ngController:Ai,ngForm:$s,ngHide:hr,ngIf:H,ngInclude:le,ngInit:Ke,ngNonBindable:yt,ngPluralize:Ot,ngRepeat:yn,ngShow:zn,ngStyle:br,ngSwitch:Rr,ngSwitchWhen:Lr,ngSwitchDefault:Ur,ngOptions:qi,ngTransclude:si,ngModel:Gr,ngList:Rs,ngChange:Os,required:vs,ngRequired:vs,ngValue:Is}).directive({ngInclude:Re}).directive(us).directive(je),S.provider({$anchorScroll:Un,$animate:Hn,$browser:Kr,$cacheFactory:yi,$controller:wr,$document:kr,$exceptionHandler:es,$filter:Qe,$interpolate:Ni,$interval:wi,$http:xi,$httpBackend:_i,$location:ns,$log:Nr,$parse:is,$rootScope:ss,$q:Ar,$sce:$i,$sceDelegate:Dr,$sniffer:kn,$templateCache:or,$timeout:x,$window:He,$$rAF:Wi,$$asyncCallback:Qn})}])}(w),n(P).ready(function(){!function(d,S){var L,W,q=[d],ae=["ng:app","ng-app","x-ng-app","data-ng-app"],fe=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;function ge(me){me&&q.push(me)}M(ae,function(me){ae[me]=!0,ge(P.getElementById(me)),me=me.replace(":","\\:"),d.querySelectorAll&&(M(d.querySelectorAll("."+me),ge),M(d.querySelectorAll("."+me+"\\:"),ge),M(d.querySelectorAll("["+me+"]"),ge))}),M(q,function(me){if(!L){var de=fe.exec(" "+me.className+" ");de?(L=me,W=(de[2]||"").replace(/\s+/g,",")):M(me.attributes,function(ke){!L&&ae[ke.name]&&(L=me,W=ke.value)})}}),L&&S(L,W?[W]:[])}(P,Yt)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(I,P,G){"use strict";var e=P.module("ngRoute",["ng"]).provider("$route",function(){function a(n,s){return P.extend(new(P.extend(function(){},{prototype:n})),s)}var r={};function p(n,s){var t=s.caseInsensitiveMatch,c={originalPath:n,regexp:n},u=c.keys=[];return n=n.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(o,l,f,w){var k="?"===w?w:null,O="*"===w?w:null;return u.push({name:f,optional:!!k}),l=l||"",(k?"":l)+"(?:"+(k?l:"")+(O?"(.+?)":"([^/]+)")+(k||"")+")"+(k||"")}).replace(/([\/$\*])/g,"\\$1"),c.regexp=new RegExp("^"+n+"$",t?"i":""),c}this.when=function(n,s){if(r[n]=P.extend({reloadOnSearch:!0},s,n&&p(n,s)),n){var t="/"==n[n.length-1]?n.substr(0,n.length-1):n+"/";r[t]=P.extend({redirectTo:n},p(t,s))}return this},this.otherwise=function(n){return this.when(null,n),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(n,s,t,c,u,o,l,f){var w=!1,k={routes:r,reload:function(){w=!0,n.$evalAsync(O)}};return n.$on("$locationChangeSuccess",O),k;function O(){var M,b,E,y,m,A=(P.forEach(r,function(E,y){!b&&(M=function(m,R){var F=R.keys,B={};if(!R.regexp)return null;var J=R.regexp.exec(m);if(!J)return null;for(var Q=1,U=J.length;Q<U;++Q){var N=F[Q-1],D=J[Q];N&&D&&(B[N.name]=D)}return B}(s.path(),E))&&((b=a(E,{params:P.extend({},s.search(),M),pathParams:M})).$$route=E)}),b||r.null&&a(r.null,{params:{},pathParams:{}})),_=k.current;A&&_&&A.$$route===_.$$route&&P.equals(A.pathParams,_.pathParams)&&!A.reloadOnSearch&&!w?(_.params=A.params,P.copy(_.params,t),n.$broadcast("$routeUpdate",_)):(A||_)&&(w=!1,n.$broadcast("$routeChangeStart",A,_),(k.current=A)&&A.redirectTo&&(P.isString(A.redirectTo)?s.path((E=A.redirectTo,y=A.params,m=[],P.forEach((E||"").split(":"),function(R,F){if(0===F)m.push(R);else{var B=R.match(/(\w+)(.*)/),J=B[1];m.push(y[J]),m.push(B[2]||""),delete y[J]}}),m.join(""))).search(A.params).replace():s.url(A.redirectTo(A.pathParams,s.path(),s.search())).replace()),c.when(A).then(function(){if(A){var E,y,m=P.extend({},A.resolve);return P.forEach(m,function(R,F){m[F]=P.isString(R)?u.get(R):u.invoke(R)}),P.isDefined(E=A.template)?P.isFunction(E)&&(E=E(A.params)):P.isDefined(y=A.templateUrl)&&(P.isFunction(y)&&(y=y(A.params)),y=f.getTrustedResourceUrl(y),P.isDefined(y)&&(A.loadedTemplateUrl=y,E=o.get(y,{cache:l}).then(function(R){return R.data}))),P.isDefined(E)&&(m.$template=E),c.all(m)}}).then(function(E){A==k.current&&(A&&(A.locals=E,P.copy(A.params,t)),n.$broadcast("$routeChangeSuccess",A,_))},function(E){A==k.current&&n.$broadcast("$routeChangeError",A,_,E)}))}}]});function g(a,r,p){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(n,s,t,c,u){var o,l,f,w=t.autoscroll,k=t.onload||"";function O(){f&&(f.remove(),f=null),o&&(o.$destroy(),o=null),l&&(p.leave(l,function(){f=null}),f=l,l=null)}function M(){var b=a.current&&a.current.locals;if(P.isDefined(b&&b.$template)){var _=n.$new(),E=a.current,y=u(_,function(m){p.enter(m,null,l||s,function(){!P.isDefined(w)||w&&!n.$eval(w)||r()}),O()});l=y,(o=E.scope=_).$emit("$viewContentLoaded"),o.$eval(k)}else O()}n.$on("$routeChangeSuccess",M),M()}}}function h(a,r,p){return{restrict:"ECA",priority:-400,link:function(n,s){var t=p.current,c=t.locals;s.html(c.$template);var u=a(s.contents());if(t.controller){c.$scope=n;var o=r(t.controller,c);t.controllerAs&&(n[t.controllerAs]=o),s.data("$ngControllerController",o),s.children().data("$ngControllerController",o)}u(n)}}}e.provider("$routeParams",function(){this.$get=function(){return{}}}),e.directive("ngView",g),e.directive("ngView",h),g.$inject=["$route","$anchorScroll","$animate"],h.$inject=["$compile","$controller","$route"]}(window,window.angular),function(I,P,G){"use strict";var e=P.$$minErr("$resource"),g=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;function a(r,p){for(var n in P.forEach(p=p||{},function(s,t){delete p[t]}),r)!r.hasOwnProperty(n)||"$"===n.charAt(0)&&"$"===n.charAt(1)||(p[n]=r[n]);return p}P.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(r,p){var n={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}},s=P.noop,t=P.forEach,c=P.extend,u=P.copy,o=P.isFunction;function f(w,k){this.template=w,this.defaults=k||{},this.urlParams={}}return f.prototype={setUrlParams:function(w,k,O){var M,b,A=this,_=O||A.template,E=A.urlParams={};t(_.split(/\W/),function(y){if("hasOwnProperty"===y)throw e("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(y)&&y&&new RegExp("(^|[^\\\\]):"+y+"(\\W|$)").test(_)&&(E[y]=!0)}),_=_.replace(/\\:/g,":"),k=k||{},t(A.urlParams,function(y,m){M=k.hasOwnProperty(m)?k[m]:A.defaults[m],_=P.isDefined(M)&&null!==M?(b=function l(w){return(k=w,encodeURIComponent(k).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20")).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+");var k}(M),_.replace(new RegExp(":"+m+"(\\W|$)","g"),function(R,F){return b+F})):_.replace(new RegExp("(/?):"+m+"(\\W|$)","g"),function(R,F,B){return"/"==B.charAt(0)?B:F+B})}),_=(_=_.replace(/\/+$/,"")||"/").replace(/\/\.(?=\w+($|\?))/,"."),w.url=_.replace(/\/\\\./,"/."),t(k,function(y,m){A.urlParams[m]||(w.params=w.params||{},w.params[m]=y)})}},function w(k,O,M){var b=new f(k);function A(E){return E.resource}function _(E){a(E||{},this)}return M=c({},n,M),t(M,function(E,y){var m=/^(POST|PUT|PATCH)$/i.test(E.method);_[y]=function(R,F,B,J){var Q,U,N,D={};switch(arguments.length){case 4:N=J,U=B;case 3:case 2:if(!o(F)){D=R,Q=F,U=B;break}if(o(R)){U=R,N=F;break}U=F,N=B;case 1:o(R)?U=R:m?Q=R:D=R;break;case 0:break;default:throw e("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var Se,Ee,V,ie=this instanceof _,Z=ie?Q:E.isArray?[]:new _(Q),ue={},re=E.interceptor&&E.interceptor.response||A,te=E.interceptor&&E.interceptor.responseError||G;t(E,function(Se,Ee){"params"!=Ee&&"isArray"!=Ee&&"interceptor"!=Ee&&(ue[Ee]=u(Se))}),m&&(ue.data=Q),b.setUrlParams(ue,c({},(Se=Q,V={},Ee=c({},O,Ee=E.params||{}),t(Ee,function(Y,z){o(Y)&&(Y=Y()),V[z]=Y&&Y.charAt&&"@"==Y.charAt(0)?function h(r,p){if(null==(u=p)||""===u||"hasOwnProperty"===u||!g.test("."+u))throw e("badmember",'Dotted member path "@{0}" is invalid.',p);for(var u,n=p.split("."),s=0,t=n.length;s<t&&r!==G;s++)r=null!==r?r[n[s]]:G;return r}(Se,Y.substr(1)):Y}),V),D),E.url);var ye=r(ue).then(function(Se){var Ee=Se.data,V=Z.$promise;if(Ee){if(P.isArray(Ee)!==!!E.isArray)throw e("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",E.isArray?"array":"object",P.isArray(Ee)?"array":"object");E.isArray?(Z.length=0,t(Ee,function(Y){"object"===_typeof(Y)?Z.push(new _(Y)):Z.push(Y)})):(a(Ee,Z),Z.$promise=V)}return Z.$resolved=!0,Se.resource=Z,Se},function(Se){return Z.$resolved=!0,(N||s)(Se),p.reject(Se)});return ye=ye.then(function(Se){var Ee=re(Se);return(U||s)(Ee,Se.headers),Ee},te),ie?ye:(Z.$promise=ye,Z.$resolved=!1,Z)},_.prototype["$"+y]=function(R,F,B){o(R)&&(B=F,F=R,R={});var J=_[y].call(this,R,this,F,B);return J.$promise||J}}),_.bind=function(E){return w(k,c({},O,E),M)},_}}])}(window,window.angular),function(I,P,G){"use strict";var e=P.$$minErr("$sanitize"),g=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,a=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,r=/^</,p=/^<\//,n=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,o=E("area,br,col,hr,img,wbr"),l=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),f=E("rp,rt"),w=P.extend({},f,l),k=P.extend({},l,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),O=P.extend({},f,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),M=E("script,style"),b=P.extend({},o,k,O,w),A=E("background,cite,href,longdesc,src,usemap"),_=P.extend({},A,E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"));function E(J){var Q,U={},N=J.split(",");for(Q=0;Q<N.length;Q++)U[N[Q]]=!0;return U}var y=document.createElement("pre"),m=/^(\s*)([\s\S]*?)(\s*)$/;function R(J){if(!J)return"";var Q=m.exec(J),U=Q[1],N=Q[3],D=Q[2];return D&&(y.innerHTML=D.replace(/</g,"&lt;"),D="textContent"in y?y.textContent:y.innerText),U+D+N}function F(J){return J.replace(/&/g,"&amp;").replace(c,function(Q){return"&#"+(1024*(Q.charCodeAt(0)-55296)+(Q.charCodeAt(1)-56320)+65536)+";"}).replace(u,function(Q){return"&#"+Q.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function B(J,Q){var U=!1,N=P.bind(J,J.push);return{start:function(D,ie,Z){D=P.lowercase(D),!U&&M[D]&&(U=D),U||!0!==b[D]||(N("<"),N(D),P.forEach(ie,function(ue,re){var te=P.lowercase(re);!0!==_[te]||!0===A[te]&&!Q(ue,"img"===D&&"src"===te||"background"===te)||(N(" "),N(re),N('="'),N(F(ue)),N('"'))}),N(Z?"/>":">"))},end:function(D){D=P.lowercase(D),U||!0!==b[D]||(N("</"),N(D),N(">")),D==U&&(U=!1)},chars:function(D){U||N(F(D))}}}P.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(J){return function(Q){var U=[];return function(N,D){"string"!=typeof N&&(N=null==N?"":""+N);var ie,Z,ue,re,te=[],ye=N;for(te.last=function(){return te[te.length-1]};N;){if(Z=!(re=""),te.last()&&M[te.last()]?(N=N.replace(new RegExp("(.*)<\\s*\\/\\s*"+te.last()+"[^>]*>","i"),function(V,Y){return Y=Y.replace(n,"$1").replace(t,"$1"),D.chars&&D.chars(R(Y)),""}),Ee(0,te.last())):(0===N.indexOf("\x3c!--")?0<=(ie=N.indexOf("--",4))&&N.lastIndexOf("--\x3e",ie)===ie&&(D.comment&&D.comment(N.substring(4,ie)),N=N.substring(ie+3),Z=!1):s.test(N)?(ue=N.match(s))&&(N=N.replace(ue[0],""),Z=!1):p.test(N)?(ue=N.match(h))&&(N=N.substring(ue[0].length),ue[0].replace(h,Ee),Z=!1):r.test(N)&&((ue=N.match(g))?(ue[4]&&(N=N.substring(ue[0].length),ue[0].replace(g,Se)),Z=!1):(re+="<",N=N.substring(1))),Z&&(re+=(ie=N.indexOf("<"))<0?N:N.substring(0,ie),N=ie<0?"":N.substring(ie),D.chars&&D.chars(R(re)))),N==ye)throw e("badparse","The sanitizer was unable to parse the following block of html: {0}",N);ye=N}function Se(V,Y,z,T){if(Y=P.lowercase(Y),k[Y])for(;te.last()&&O[te.last()];)Ee(0,te.last());w[Y]&&te.last()==Y&&Ee(0,Y),(T=o[Y]||!!T)||te.push(Y);var C={};z.replace(a,function(X,se,ne,be,Me){C[se]=R(ne||be||Me||"")}),D.start&&D.start(Y,C,T)}function Ee(V,Y){var z,T=0;if(Y=P.lowercase(Y))for(T=te.length-1;0<=T&&te[T]!=Y;T--);if(0<=T){for(z=te.length-1;T<=z;z--)D.end&&D.end(te[z]);te.length=T}}Ee()}(Q,B(U,function(N,D){return!/^unsafe/.test(J(N,D))})),U.join("")}}]}),P.module("ngSanitize").filter("linky",["$sanitize",function(J){var Q=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,U=/^mailto:/;return function(N,D){if(!N)return N;for(var ie,Z,ue,re=N,te=[];ie=re.match(Q);)Z=ie[0],ie[2]==ie[3]&&(Z="mailto:"+Z),ye(re.substr(0,ue=ie.index)),Ee=Z,V=ie[0].replace(U,""),te.push("<a "),P.isDefined(D)&&(te.push('target="'),te.push(D),te.push('" ')),te.push('href="'),te.push(Ee),te.push('">'),ye(V),te.push("</a>"),re=re.substring(ue+ie[0].length);var Ee,V;return ye(re),J(te.join(""));function ye(Ee){var V,Y;Ee&&te.push((V=Ee,B(Y=[],P.noop).chars(V),Y.join("")))}}}])}(window,window.angular),function(I,P){typeof module<"u"&&module.exports?module.exports=P(require("angular")):"function"==typeof define&&define.amd?define(["angular"],P):P(I.angular)}(window,function(I){I.module("angucomplete-alt",[]).directive("angucompleteAlt",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(P,G,e,g,h,a,r){function p(n,s,t,c){var u,o,l,f,w,k,O=s.find("input"),M=3,b=null,A="autocomplete-required",_=null,E=null,y=s[0].querySelector(".angucomplete-dropdown"),m=!1,R=null;function F(ne,be){ne&&("object"===_typeof(ne)?(n.searchStr=U(ne),Q({originalObject:ne})):"string"==typeof ne&&0<ne.length?n.searchStr=ne:console&&console.error&&console.error("Tried to set "+(be?"initial":"")+" value of angucomplete to",ne,"which is an invalid value"),ie(!0))}function B(ne){R=null,n.hideResults(ne),document.body.removeEventListener("click",B)}function J(ne){return ne.which?ne.which:ne.keyCode}function Q(ne){"function"==typeof n.selectedObject?n.selectedObject(ne):n.selectedObject=ne,ie(!!ne)}function U(ne){return n.titleField.split(",").map(function(be){return N(ne,be)}).join(" ")}function N(ne,be){var Me,$e;if(be){Me=be.split("."),$e=ne;for(var Ue=0;Ue<Me.length;Ue++)$e=$e[Me[Ue]]}else $e=ne;return $e}function D(ne,be){var Me,$e,Ue;if(Ue=new RegExp(be.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),ne)return ne.match&&ne.replace||(ne=ne.toString()),Me=($e=ne.match(Ue))?ne.replace(Ue,'<span class="'+n.matchClass+'">'+$e[0]+"</span>"):ne,g.trustAsHtml(Me)}function ie(ne){n.notEmpty=ne,_=n.searchStr,n.fieldRequired&&c&&c.$setValidity(A,ne)}function Z(ne){!n.overrideSuggestions||n.selectedObject&&n.selectedObject.originalObject===n.searchStr||(ne&&ne.preventDefault(),h.cancel(b),Ee(),Q({originalObject:n.searchStr}),n.clearSelected&&(n.searchStr=null),z())}function ue(){return s[0].querySelectorAll(".angucomplete-row")[n.currentIndex]}function re(ne){y.scrollTop=y.scrollTop+ne}function te(){var ne=n.results[n.currentIndex];O.val(n.matchClass?U(ne.originalObject):ne.title)}function ye(ne){return function(be,Me,$e,Ue){Me||$e||Ue||(be=be.data),n.searching=!1,X(N(o(be),n.remoteUrlDataField),ne)}}function Se(ne,be,Me,$e){0!==be&&-1!==be&&(be||Me||$e||(be=ne.status),n.remoteUrlErrorCallback?n.remoteUrlErrorCallback(ne,be,Me,$e):console&&console.error&&console.error("http error"))}function Ee(){E&&E.resolve()}function V(ne){var be={},Me=n.remoteUrl+encodeURIComponent(ne);n.remoteUrlRequestFormatter&&(be={params:n.remoteUrlRequestFormatter(ne)},Me=n.remoteUrl),n.remoteUrlRequestWithCredentials&&(be.withCredentials=!0),Ee(),E=P.defer(),be.timeout=E.promise,e.get(Me,be).success(ye(ne)).error(Se)}function Y(ne){Ee(),E=P.defer(),n.remoteApiHandler(ne,E.promise).then(ye(ne)).catch(Se)}function z(){n.showDropdown=!1,n.results=[],y&&(y.scrollTop=0)}function T(){n.showDropdown=f,n.currentIndex=n.focusFirst?0:-1,n.results=[]}function C(ne){!ne||ne.length<M||(n.localData?n.$apply(function(){!function(be){var Me,$e,Ue,Fe,qe=n.searchFields.split(","),Mt=[];for(Me=0;Me<n.localData.length;Me++){for($e=!1,Ue=0;Ue<qe.length;Ue++)Fe=N(n.localData[Me],qe[Ue])||"",$e=$e||0<=Fe.toString().toLowerCase().indexOf(be.toString().toLowerCase());$e&&(Mt[Mt.length]=n.localData[Me])}n.searching=!1,X(Mt,be)}(ne)}):n.remoteApiHandler?Y(ne):V(ne))}function X(ne,be){var Me,$e,Ue,Fe,qe,Mt;if(ne&&0<ne.length)for(n.results=[],Me=0;Me<ne.length;Me++)n.titleField&&""!==n.titleField&&(Fe=qe=U(ne[Me])),$e="",n.descriptionField&&($e=Mt=N(ne[Me],n.descriptionField)),Ue="",n.imageField&&(Ue=N(ne[Me],n.imageField)),n.matchClass&&(qe=D(Fe,be),Mt=D($e,be)),n.results[n.results.length]={title:qe,description:Mt,image:Ue,originalObject:ne[Me]};else n.results=[];n.showDropdown=!(n.autoMatch&&1===n.results.length&&function(tt,ot,ht){if(!ht)return!1;for(var kt in ot)if(ot[kt].toLowerCase()===ht.toLowerCase())return n.selectResult(tt),!0;return!1}(n.results[0],{title:Fe,desc:$e||""},n.searchStr)||0===n.results.length&&!w)}function se(){n.localData?X(n.localData,""):n.remoteApiHandler?Y(""):V("")}s.on("mousedown",function(ne){ne.target.id?(R=ne.target.id)===n.id+"_dropdown"&&document.body.addEventListener("click",B):R=ne.target.className}),n.currentIndex=n.focusFirst?0:null,n.searching=!1,l=n.$watch("initialValue",function(ne,be){ne&&(l(),F(ne,!0))}),n.$on("angucomplete-alt:clearInput",function(ne,be){be&&be!==n.id||(n.searchStr=null,Q(),ie(!1),z())}),n.$on("angucomplete-alt:changeInput",function(ne,be,Me){be&&be===n.id&&F(Me)}),n.onFocusHandler=function(){n.focusIn&&n.focusIn(),0!==M||n.searchStr&&0!==n.searchStr.length||(n.currentIndex=n.focusFirst?0:n.currentIndex,n.showDropdown=!0,se())},n.hideResults=function(ne){R&&(R===n.id+"_dropdown"||0<=R.indexOf("angucomplete"))?R=null:(u=h(function(){z(),n.$apply(function(){n.searchStr&&0<n.searchStr.length&&O.val(n.searchStr)})},200),Ee(),n.focusOut&&n.focusOut(),n.overrideSuggestions&&n.searchStr&&0<n.searchStr.length&&-1===n.currentIndex&&Z())},n.resetHideResults=function(){u&&h.cancel(u)},n.hoverRow=function(ne){n.currentIndex=ne},n.selectResult=function(ne){n.matchClass&&(ne.title=U(ne.originalObject),ne.description=N(ne.originalObject,n.descriptionField)),n.searchStr=n.clearSelected?null:ne.title,Q(ne),z()},n.inputChangeHandler=function(ne){return ne.length<M?(Ee(),z()):0===ne.length&&0===M&&(n.searching=!1,se()),n.inputChanged&&(ne=n.inputChanged(ne)),ne},n.fieldRequiredClass&&""!==n.fieldRequiredClass&&(A=n.fieldRequiredClass),n.minlength&&""!==n.minlength&&(M=parseInt(n.minlength,10)),n.pause||(n.pause=500),n.clearSelected||(n.clearSelected=!1),n.overrideSuggestions||(n.overrideSuggestions=!1),n.fieldRequired&&c&&ie(!!n.initialValue),n.inputType=t.type?t.type:"text",n.textSearching=t.textSearching?t.textSearching:"Searching...",n.textNoResults=t.textNoResults?t.textNoResults:"No results found",f="false"!==n.textSearching,w="false"!==n.textNoResults,n.maxlength=t.maxlength?t.maxlength:524288,O.on("keydown",function(ne){var Ue,Fe,be=J(ne),Me=null,$e=null;13===be&&n.results?(0<=n.currentIndex&&n.currentIndex<n.results.length?(ne.preventDefault(),n.selectResult(n.results[n.currentIndex])):(Z(ne),z()),n.$apply()):40===be&&n.results?(ne.preventDefault(),n.currentIndex+1<n.results.length&&n.showDropdown&&(n.$apply(function(){n.currentIndex++,te()}),m&&(Me=ue(),y.getBoundingClientRect().top+parseInt(getComputedStyle(y).maxHeight,10)<Me.getBoundingClientRect().bottom&&re((Ue=Me,Fe=getComputedStyle(Ue),Ue.offsetHeight+parseInt(Fe.marginTop,10)+parseInt(Fe.marginBottom,10)))))):38===be&&n.results?(ne.preventDefault(),1<=n.currentIndex?(n.$apply(function(){n.currentIndex--,te()}),m&&($e=ue().getBoundingClientRect().top-(y.getBoundingClientRect().top+parseInt(getComputedStyle(y).paddingTop,10)))<0&&re($e-1)):0===n.currentIndex&&n.$apply(function(){n.currentIndex=-1,O.val(n.searchStr)})):9===be&&(n.results&&0<n.results.length&&n.showDropdown?-1===n.currentIndex&&n.overrideSuggestions?Z():(-1===n.currentIndex&&(n.currentIndex=0),n.selectResult(n.results[n.currentIndex]),n.$digest()):n.searchStr&&0<n.searchStr.length&&Z())}),O.on("keyup input",function(ne){var be=J(ne);if(37!==be&&39!==be)if(38===be||13===be)ne.preventDefault();else if(40===be)ne.preventDefault(),!n.showDropdown&&n.searchStr&&n.searchStr.length>=M&&(T(),n.searching=!0,C(n.searchStr));else if(27===be)z(),n.$apply(function(){O.val(n.searchStr)});else{if(0===M&&!n.searchStr)return;n.searchStr&&""!==n.searchStr?n.searchStr.length>=M&&(T(),b&&h.cancel(b),n.searching=!0,b=h(function(){C(n.searchStr)},n.pause)):n.showDropdown=!1,_&&_!==n.searchStr&&!n.clearSelected&&n.$apply(function(){Q()})}}),k="remoteUrlResponseFormatter",o=function(ne){return n[k]?n[k](ne):ne},n.$on("$destroy",function(){ie(!0)}),h(function(){var ne=getComputedStyle(y);m=ne.maxHeight&&"auto"===ne.overflowY})}return a.put("/angucomplete-alt/index.html",'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"@",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@"},templateUrl:function(n,s){return s.templateUrl||"/angucomplete-alt/index.html"},compile:function(n,s){var t=r.startSymbol(),c=r.endSymbol();if("{{"!==t||"}}"!==c){var u=n.html().replace(/\{\{/g,t).replace(/\}\}/g,c);n.html(u)}return p}}}])}),window.vemm=window.vemm||{},window.formsonspeed=window.formsonspeed||{},window.console=window.console||{},window.console.log=window.console.log||function(){},window.ENABLE_CAPTCHA=!1,$(document).ready(function(){window.ENABLE_CAPTCHA=0<$("#vemm-captcha").length}),window.vemmRecaptchaOk=function(){console.log("vemmRecaptchaOk()"),scope=$("#vemm-captcha").scope(),scope.$apply(function(){scope.lead.captcha_ok="true"})};var formsOnSpeed=angular.module("formsOnSpeed",["ngRoute","ngResource","leadModule","angucomplete-alt"]),vehiclesBaseURL="//vemmvehicles.herokuapp.com",vehicle_manufacturer_Hide_condition=!1,vehicle_manufacturer_Hide_in_case_of_vehicle_placa=!1,vehicle_model_Hide_in_case_of_vehicle_placa=!1,vehicle_info_based_on_placa=!1;formsOnSpeed.config(["$locationProvider",function(I){I.html5Mode(!0).hashPrefix("!")}]),formsOnSpeed.controller("formController",["$scope","$routeParams","$location","$window","Lead","$http","$timeout",function($scope,$routeParams,$location,$window,Lead,$http,$timeout){$scope.vemmStatus={},$scope.attemptedSubmit=[],$scope.attemptedOpen=!1,$scope.step=1,$scope.steps=0,$scope.stepGroup="",$scope.lastStep={},$scope._incrementSteps=function(){$scope.steps++},$scope._previousStep=function(){1<$scope.step&&$scope.step--},$scope.backToHome=function(){window.location.replace("https://consorcio.org/")},$scope.lead={complete:!1},angular.lead=$scope.lead,$scope.originalParams=$location.search(),addTrackingVariablesToLead($scope,$window),$scope.modelYears="",$(window).load(function(){setTimeout(function(){$scope.lead.WURFL_complete_device_name=WURFL.complete_device_name,$scope.lead.WURFL_form_factor=WURFL.form_factor,$scope.lead.WURFL_is_mobile=WURFL.is_mobile},1e3)});var INVALID_DDDS=[0,1,2,3,4,5,6,7,8,9,10,20,23,30,40,50,60,70,80,90],DDDS_WITH_9_DIGITS=[11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,71,73,74,75,77,79,81,87,82,83,84,85,88,86,89];function dddValid(I){I=parseInt(I),console.log("Testing "+I.toString());for(var P=0;P<INVALID_DDDS.length;P++)if(I===INVALID_DDDS[P])return console.log("invalid"),!1;return console.log("valid"),!0}function ddd9DigitosCelular(I){I=parseInt(I);for(var P=0;P<DDDS_WITH_9_DIGITS.length;P++)if(I===DDDS_WITH_9_DIGITS[P])return!0;return!1}$scope.executeDecisionPoint=function(I){var P=I.split(" ")[1];return window.vemm.fieldConditional(P,$scope.lead)},$(window).load(function(){setTimeout(function(){vehicle_manufacturer_Hide_condition=!0},2e3)}),$scope.makeModelInfo=function(I){var P=$scope.lead.vehicle_type;return null===$scope.lead.vehicle_model&&(angular.element("#vehicle_model_value").scope().searchStr="",$scope.lead.vehicle_year=null),void 0===angular.element("#vehicle_manufacturer_value").scope().selectedObject&&"undefined"!=$scope.lead.vehicle_manufacturer&&(angular.element("#vehicle_manufacturer_value").scope().selectedObject={},angular.element("#vehicle_manufacturer_value").scope().selectedObject.title=$scope.lead.vehicle_manufacturer,angular.element("#vehicle_model_value").scope().searchStr="",$scope.lead.vehicle_year=null),void 0!==angular.element("#vehicle_manufacturer_value").scope().selectedObject&&void 0!==angular.element("#vehicle_manufacturer_value").scope().selectedObject.title?{q:I,model:angular.element("#vehicle_manufacturer_value").scope().selectedObject.title,vehicle_type:P}:{q:I,model:angular.element("#vehicle_model_value").scope().searchStr="",vehicle_type:P}},$scope.get_placa_API=function(I){var P=void 0;if("paste"==I.type&&(P=I.originalEvent.clipboardData.getData("text")),null==$scope.lead.vehicle_placa&&null==P)return console.log("lead.vehicle_placa. Skipping get_placa_API()"),!1;var G=$scope.lead,e="";7==(e="paste"==I.type?(e=I.originalEvent.clipboardData.getData("text")).replace(/[^\w\s]|\s/gi,""):G.vehicle_placa.replace(/[^\w\s]|\s/gi,"")).length&&$http.get("//vemmplaca.herokuapp.com/get_placa_result",{params:{placa:e}}).then(function(h){if(responseResult=h.data,console.log(responseResult),vehicle_info_based_on_placa=!0,1==responseResult.vehicle_placa_api_failed)console.log("not getting vehicel info from placa API"),vehicle_model_Hide_in_case_of_vehicle_placa=!0,G.vehicle_manufacturer=void 0,angular.element("#vehicle_manufacturer_value").scope().searchStr="",G.vehicle_model=void 0,angular.element("#vehicle_model_value").scope().searchStr="",G.vehicle_year=void 0,G.vehicle_type=void 0,G.market_value_of_vehicle=void 0,$scope.modelYears="";else{console.log(" getting vehicle info from placa API"),vehicle_manufacturer_Hide_in_case_of_vehicle_placa=!0,G.vehicle_type="Carro",G.vehicle_manufacturer=responseResult.vehicle_manufacturer,angular.element("#vehicle_manufacturer_value").scope().searchStr=responseResult.vehicle_manufacturer,vehicle_manufacturer_Hide_condition=!0,G.vehicle_model=responseResult.vehicle_model,angular.element("#vehicle_model_value").scope().searchStr=responseResult.vehicle_model,G.market_value_of_vehicle=responseResult.market_value_of_vehicle,$scope.modelYears=responseResult.years,replace_dropdown_options("vehicle_year",responseResult.years.split(",")),G.vehicle_year=responseResult.model_year,G.fipe=responseResult.fipe;var a=responseResult.fipe.split("-");G.vehicle_model_fipe=a[0]}})},$scope.RequestEnrichedCEPData=function(I){$timeout(function(){if(null==$scope.lead.postal_code)return console.log("lead.postal_code missing. Skipping RequestEnrichedCEPData()"),!1;var P=$scope.lead,G=(new Date).getTime(),e=P.postal_code.replace(/[^\w\s]|\s/gi,"");if(8<=e.length){var g=e.substring(0,8);return I.target.value=g,$scope.MascaraCep(I),P.postal_code=I.target.value,$(".loading").show(),$.ajax({crossDomain:!0,dataType:"jsonp",url:"https://vemmcepvalidation.herokuapp.com/cep_validation_jsonp/?cep="+P.postal_code,success:function(a){var r=(r=(new Date).getTime()-G).toString()+"ms";if(null!=a.error){console.log("Soft error returned by CEP Validation"),console.log(a.error),console.log(r),P.cep_validation_error=a.error;var p=$("#postal_code").closest("form").attr("name");$scope[p].postal_code.$setValidity("invalid",!1),$(".loading").hide()}else console.log("Service said CEP was valid."),console.log(r),function(n,s){for(var t in console.log("Merging data:"),console.log(s),s)s.hasOwnProperty(t)&&(console.log(t+" ="),console.log(s[t]),n[t]=s[t])}(P,a),$(".loading").hide()},error:function(a,r,p){console.log("enrichedCEPDataFailure() called."),console.log(r),$(".loading").hide()},cache:!0,timeout:2e4}),!0}},0)},$scope.dateToYYYYMMDD=function(I){var P="";return I&&(P=I.substr(6,4)+I.substr(3,2)+I.substr(0,2)),P},$scope.telephoneToDdd=function(I){var P="";return I&&(P=I.substr(1,2)),P},$scope.telephoneToNumber=function(I){var P="";return I&&(P=I.substr(5,10).replace(/[^0-9]+/g,"")),P},$scope.open_or_update_lead=function(I){if($scope.attemptedOpen?($scope.setConnectionStatus("Updating lead"),$scope.update_lead()):($scope.setConnectionStatus("Opening lead"),$scope.open_lead()),"loan_value_other"==I.target.name){var P=$(I.target).closest("form").attr("name");$scope.validate_loan_other_value(I.target.value,P)}$scope.sendFieldValidityToAnalytics(I)},$scope.validate_loan_other_value=function(I,P){$scope.lead.loan_value_other=$scope.lead.loan_value_other.replace(/[^0-9 ]/g,""),$scope.lead.loan_value_other<1e4&&$scope[P].loan_value_other.$setValidity("invalid",!0)},$scope.interceptPaste=function(I,P,G){var e=I.originalEvent.clipboardData.getData("text/plain"),g=I.target,h=$(g),a=getFormName(h),r=g.name,p=g.value,n=h.attr("maxLength");console.log("Paste intercepted with "+e),console.log("formName = "+a),console.log("name = "+r),console.log("value = "+p),console.log("maxlength = "+n),console.log("nameMaskFunction "+P),console.log("nameValidateFunction "+G);var s=$scope[P],t=$scope[G];return setTimeout(function(){s(I);var c=g.value;console.log("New value "+c),0<parseInt(n,10)&&("string"==typeof c||c instanceof String)&&(console.log("Truncating to "+n),c=c.substring(0,n),$scope.$apply(function(){$scope.lead[r]=c,t(c)?(console.log("New value valid"),$scope[a][r].$setValidity("invalid",!0)):(console.log("New value invalid"),$scope[a][r].$setValidity("invalid",!1))}))},100),!1},$scope.sendFieldValidityToAnalytics=function(I){setTimeout(function(){var P=I.target,G=$(P),e=getFormName(G);window.formsonspeed.registerFieldFilledIn(P.name,P.value,!$scope[e][P.name].$invalid)},100)},$scope.open_lead=function(I){$scope.saveCompleted=function(){$scope.lead=angular.extend($scope.leadOnServer.fields,$scope.lead),"function"==typeof $window[I]&&$window[I]($scope.lead)},$scope.leadOnServer=Lead.save($scope.leadForSubmission(!1),$scope.saveCompleted),$scope.attemptedOpen=!0},$scope.update_lead=function(){$scope.leadOnServer.id?($scope.setConnectionStatus("Server ready for update"),$scope.leadOnServer.fields=$scope.lead,$scope.leadOnServer.$update()):$scope.setConnectionStatus("Server NOT ready for update")},$scope.close_lead=function(){$scope.leadOnServer.id?($scope.leadOnServer.fields=$scope.lead,$scope.leadOnServer.complete=!0,$scope.leadOnServer.$update($scope.leadForSubmission(!0)),$scope.setConnectionStatus("Server link closed")):$scope.setConnectionStatus("Server NOT ready for closing")},$scope.setConnectionStatus=function(I){$scope.connectionStatus=I,console.log(I)},$scope.leadForSubmission=function(I){return{complete:I,email:$scope.lead.email,fields:$scope.lead}},$scope.update=function(I){$scope.master=angular.copy(I)},$scope.submitAndClose=function(I){var P;if(window.vemm.submitFilter){try{P=window.vemm.submitFilter($scope.lead,$scope.step)}catch{console.log("error: on skipping submitAndClose")}if(P)return}$scope.create_final_field_from_basicAndOther_fields();var G=getFormName(I.target);console.log("Submit clicked"),$scope.attemptedSubmit[$scope.step]=!0,$scope[G].$valid&&($scope.step++,$scope.lead.complete=!0,console.log("Enable Captcha:"),console.log(window.ENABLE_CAPTCHA),window.ENABLE_CAPTCHA&&($scope.lead["g-recaptcha-response"]=grecaptcha.getResponse(),console.log($scope.lead["g-recaptcha-response"])),$scope.copyClickerData(),$scope.update_lead(),console.log("Lead updated with complete=true"),window.formsonspeed.registerGoogleAnalyticsTransaction(),window.formsonspeed.registerConversion(),console.log("Google Analytics updated."),window.formsonspeed.registerVisualWebsiteOptimizerConversion(),console.log("VWO updated."),window.formsonspeed.runThankYouScripts(),console.log("Ran thank you scripts."),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"lead-successfully-submitted"}),document.getElementsByClassName("js-submit-scroll")[0].scrollIntoView(!0))},$scope.create_final_field_from_basicAndOther_fields=function(){var I=[];$("input, select, textarea").each(function(g){var h=$(this);I.push(h.attr("name"))});for(var P=0;P<I.length;P++)if(I[P].includes("_basic"))for(var G=I[P].replace("_basic",""),e=0;e<I.length;e++)I[e]==G+"_other"&&($scope.lead[G]="other"==$scope.lead[I[P]]?$scope.lead[I[e]]:$scope.lead[I[P]])},$scope.copyClickerData=function(){if(window.vemm){var I=window.vemm.clickerData;if(I)for(var P in I)I.hasOwnProperty(P)&&($scope.lead[P]=$scope.lead[P]||I[P])}},$scope.submit=function(I){var P;if(window.vemm.submitFilter){try{P=window.vemm.submitFilter($scope.lead,$scope.step)}catch{console.log("error: on skipping submit")}if(P)return}$scope.attemptedSubmit[$scope.step]=!0;var G=getFormName(I.target);$scope[G].$valid&&($scope.step++,$scope.update_lead(),document.getElementsByClassName("js-submit-scroll")[0].scrollIntoView(!0))},$scope.previous=function(I){$scope.step--,$scope.step<=0&&($scope.step=1)},$scope.next=function(I){$scope.step++},$scope.MascaraCelularOrTelefone=function(I){tel=I.target,0==mascaraInteiro(tel)&&(I.returnValue=!1);var P="",G=tel.value.toString().substring(1,3),e=tel.value.toString().substring(5,6);return ddd9DigitosCelular(G)?tel.maxLength=(P="9"==e?"(00) 00000-0000":"(00) 0000-00000",15):(P="(00) 0000-00000",tel.maxLength=15),formataCampo(tel,P,I)},$scope.MascaraCelular=function(I){tel=I.target;var G,P=tel.value.toString().trim().replace(/^\+/,"");return 0==mascaraInteiro(tel)&&(I.returnValue=!1),G=ddd9DigitosCelular(P.substring(0,2))?"(00) 00000-0000":10==P.length?"(00) 0000-0000":"(00) 0000-00000",tel.maxLength=15,formataCampo(tel,G,I)},$scope.MascaraTelefone=function(I){return tel=I.target,0==mascaraInteiro(tel)&&(I.returnValue=!1),formataCampo(tel,"(00) 0000-0000",I)},$scope.MascaraCpf=function(I){return cpf=I.target,0==mascaraInteiro(cpf)&&(I.returnValue=!1),formataCampo(cpf,"000.000.000-00",I)},$scope.MascaraCep=function(I){return cep=I.target,0==mascaraInteiro(cep)&&(I.returnValue=!1),formataCampo(cep,"00000-000",I)},$scope.MascaraPlaca=function(I){return placa=I.target,0==mascaraInteiro(placa)&&(I.returnValue=!1),formataCampo(placa,"000-0000",I)},$scope.MascaraCnpj=function(I){return cnpj=I.target,0==mascaraInteiro(cnpj)&&(I.returnValue=!1),formataCampo(cnpj,"00.000.000/0000-00",I)},$scope.ValidaCep=function(I){if(null!=I)return I=I.replace(/[^\w\s]|\s/gi,""),!!/\d{8}/.test(I)},$scope.ValidatePlaca=function(I){if(null!=I)return I=I.replace(/[^\w\s]|\s/gi,""),!!/^[a-zA-Z]{3}\d{4}$/.test(I)},$scope.ValidaCnpj=function(cnpj){var valida=new Array(6,5,4,3,2,9,8,7,6,5,4,3,2),dig1=new Number,dig2=new Number;exp=/\.|\-|\//g,cnpj=cnpj.toString().replace(exp,"");var digito=new Number(eval(cnpj.charAt(12)+cnpj.charAt(13)));for(i=0;i<valida.length;i++)dig1+=0<i?cnpj.charAt(i-1)*valida[i]:0,dig2+=cnpj.charAt(i)*valida[i];return dig1=dig1%11<2?0:11-dig1%11,dig2=dig2%11<2?0:11-dig2%11,10*dig1+dig2==digito},$scope.ValidaCpf2=function(I){if(""==(I=I.replace(/[^\d]+/g,""))||11!=I.length||"00000000000"==I||"11111111111"==I||"22222222222"==I||"33333333333"==I||"44444444444"==I||"55555555555"==I||"66666666666"==I||"77777777777"==I||"88888888888"==I||"99999999999"==I)return!1;var P=0;for(i=0;i<9;i++)P+=parseInt(I.charAt(i))*(10-i);var G=11-P%11;if(10!=G&&11!=G||(G=0),G!=parseInt(I.charAt(9)))return!1;for(P=0,i=0;i<10;i++)P+=parseInt(I.charAt(i))*(11-i);return 10!=(G=11-P%11)&&11!=G||(G=0),G==parseInt(I.charAt(10))},$scope.ValidaGenericPhone=function(I){return!!$scope.ValidaCelular(I)||!!$scope.ValidaTelefone(I)},$scope.ValidaCelular=function(I){var P=(I=(I=I||"00").replace(/[^\w\s]|\s/gi,"")).substring(0,2);if(console.log("DDD-> "+P),!dddValid(P))return!1;if(I=I.substring(2),11<=P&&P<=19)var G=/^9[4-9]\d{7}$/;else 21<=P&&P<=29||91<=P&&P<=99?G=/^9\d{8}$/:(31<=P&&P<=35||37<=P&&P<=38||41<=P&&P<=49||53<=P&&P<=55||61<=P&&P<=69||73<=P&&P<=75||81<=P&&P<=89||51==P||71==P||77==P||79==P||56<=P&&P<=59||36==P||39==P||52==P||72==P||76==P||78==P)&&(G=/^9[2-9]\d{7}$/);return!!G.test(I)},$scope.ValidaTelefone=function(I){return""==(I=I.replace(/[^\w\s]|\s/gi,""))||!!/(10|[1-9][1-9])\d{8}/.test(I)},$scope.ValidaEmail=function(I){return exp=/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}/,!!exp.test(I)},$scope.ValidaUrl=function(I){return!!/^(https?:\/\/)?([\dA-Za-z\.-]+\.)+([A-Za-z]{2,4})(\/.*)?$|^N\/A$/i.test(I)},$scope.getVehicleModelYears=function(){if(null!=vemm.vehicle_model){var I=new Array,P=$scope.lead,e=P.vehicle_model;return angular.forEach(vemm["Carro"==P.vehicle_type?"vehicle_model":"motos_model"][P.vehicle_manufacturer],function(h,a){h.name==e&&(I=h.years.split(","))}),I}},$scope.assigsProfileValues=function(){var I=$scope.lead;I.vehicle_type&&I.vehicle_model&&I.vehicle_manufacturer&&""!=I.vehicle_year?null==I.vehicle_model&&null==I.vehicle_model||null==I.vehicle_manufacturer&&null==I.vehicle_manufacturer||null==I.vehicle_year&&null==I.vehicle_year||$http.get(vehiclesBaseURL+"/getProfiles",{params:{vehicle_models:I.vehicle_model,vehicle_manufacturers:I.vehicle_manufacturer,vehicle_years:I.vehicle_year,vehicle_type:"Carro"==I.vehicle_type?"vehicle_model":"motos_model"}}).then(function(e){var g=e.data;""!=g&&null!=g||($scope.lead.vehicle_manufacturer=null,angular.element("#vehicle_manufacturer_value").scope().searchStr="",$scope.lead.vehicle_model=null,angular.element("#vehicle_model_value").scope().searchStr="",$scope.lead.vehicle_year=null,replace_dropdown_options("vehicle_year",$scope.modelYears.split(","))),angular.forEach(g,function(h,a){I[a]=h})}):""!=I.vehicle_year&&null!=I.vehicle_year&&(console.log("we haven't got vehicle_manufacturer and model from API yet , wait and call assign profile again"),setTimeout(function(){$scope.assigsProfileValues()},500))},$scope.checkModelINList=function(I){var P=!1,G=$scope.lead;return null!=$scope.lead.vehicle_model&&null!=$scope.lead.vehicle_manufacturer?$http.get(vehiclesBaseURL+"/checkModelINList",{params:{vehicle_models:G.vehicle_model,vehicle_manufacturers:G.vehicle_manufacturer,vehicle_type:"Carro"==$scope.lead.vehicle_type?"vehicle_model":"motos_model"}}).then(function(a){a.data.result?I(P=!0):(15<angular.element("#vehicle_model_value").scope().searchStr.split("").length&&(angular.element("#vehicle_model_value").scope().searchStr="",$scope.vehicle_year=null),I(P=!1))},function(a){console.log("======================================================="),console.log("server erorrrrrrrrrrrrr vemmVehicles")}):null==$scope.lead.vehicle_model&&null!=$scope.lead.vehicle_manufacturer&&$http.get(vehiclesBaseURL+"/manufactureValidate",{params:{q:$scope.lead.vehicle_manufacturer,vehicle_type:$scope.lead.vehicle_type}}).then(function(a){I(P=!!a.data.results[0].flag)}),P},$scope.validateVehicleManufacturerAPI=function(I,P){var G;$http.get(vehiclesBaseURL+"/manufactureValidate",{params:{q:I,vehicle_type:$scope.lead.vehicle_type}}).then(function(g){return P(G=g.data.results[0].flag),G})},$scope.getmodelInfobasedonFIPE=function(I,P){var G;$http.get(vehiclesBaseURL+"/getmodelInfobasedonFIPE",{params:{q:I,vehicle_type:$scope.lead.vehicle_type}}).then(function(g){return P(G=g.data),G})},$scope.ValidaFullName=function(I){return 1<(I=I||"").split(" ").length},$scope.MonitorLenght=function(I){var P=I.target.value.match(/[^\w\s]|\s/gi),G=P?P.length:0,e=parseInt(I.target.max);0!=G&&(e+=G),I.target.value.length>=e&&(I.target.value=I.target.value.substring(0,e))}}]),formsOnSpeed.directive("vemmRadioSet",["$parse",function(I){return{restrict:"EA",replace:!1,transclude:!0,priority:100,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmRadioSet(g);return replaceElementHtml(P,h),function(a,r,p,n,s){setFormNameinElement(r);var t=r.find(".radio-buttons"),c=t.children();t.replaceWith(c),a.$watch("lead.vehicle_type",function(u){u&&a.$broadcast("angucomplete-alt:clearInput","vehicle_model")}),a.$watch("lead.vehicle_manufacturer",function(u){u&&a.$broadcast("angucomplete-alt:clearInput","vehicle_model")})}}}}]),formsOnSpeed.directive("vemmDateDropdowns",function($parse){return{restrict:"EA",compile:function compile(element,attrs){var vemmCondition=attrs,v=getAttrValues(attrs,"Data"),modelAccessor=$parse("lead."+v.field),html=vemmDateDropdownsWithFormName(v,"text","","Data deve ser uma data com o formato seguinte (DD/MM/AAAA).","");return replaceElementHtml(element,html),function(scope,element,attrs,ngModelCtrl){setFormNameinElement(element);var updateDateField=function(I,P){var G=scope.lead[v.field+"_day"],e=monthsInPortuguese.indexOf(scope.lead[v.field+"_month"]);if(e===parseInt(e)&&(e+=1),e)var g=scope.lead[v.field+"_year"];if(G&&e&&g){var h=padNumberString(e,2)+"/"+padNumberString(G,2)+"/"+g;scope.lead[v.field]=padNumberString(G,2)+"/"+padNumberString(e,2)+"/"+g,isValidDate(h)?setValidityOfDate(scope,element,v,!0):setValidityOfDate(scope,element,v,!1)}else setValidityOfDate(scope,element,v,!1)},lead=scope.lead,subFieldStub="lead."+v.field;scope.$watch(subFieldStub+"_day",function(){var lead=scope.lead,executeDecisionPoint=scope.executeDecisionPoint;v.conditional&&eval(v.conditional)&&updateDateField(subFieldStub)}),scope.$watch(subFieldStub+"_month",function(){var lead=scope.lead,executeDecisionPoint=scope.executeDecisionPoint;v.conditional&&eval(v.conditional)&&updateDateField(subFieldStub)}),scope.$watch(subFieldStub+"_year",function(){var lead=scope.lead,executeDecisionPoint=scope.executeDecisionPoint;v.conditional&&eval(v.conditional)&&updateDateField(subFieldStub)})}}}});var setValidityOfDate=function(I,P,G,e){console.log(e?"Date OK":"Date Invalid");var g=getFormName(P);I[g][G.field+"_day"].$setValidity("invalid",e),I[g][G.field+"_month"].$setValidity("invalid",e),I[g][G.field+"_year"].$setValidity("invalid",e)},padNumberString=function(I,P){var G=I.toString(),e=P-G.length;return 0<e&&(G="0000000".substring(1,e+1)+G),G},isValidDate=function(I){var P=I.match(/^(\d{2,2})(\/)(\d{2,2})\2(\d{4}|\d{4})$/);if(null==P)return alert("Date must be in MM/DD/YYYY format"),!1;if(month=P[1],day=P[3],year=P[4],month<1||12<month)return alert("Month must be between 1 and 12"),!1;if(day<1||31<day)return alert("Day must be between 1 and 31"),!1;if((4==month||6==month||9==month||11==month)&&31==day)return alert("M\xeas "+month+" n\xe3o tem 31 dias!"),!1;if(2==month){var G=year%4==0&&(year%100!=0||year%400==0);if(29<day||29==day&&!G)return alert("Fevereiro "+year+" n\xe3o tem "+day+" dias!"),!1}return!0};formsOnSpeed.directive("vemmLeadCreate",["$parse",function(I){return{restrict:"EA",template:"",link:function(P,G,e,g){setFormNameinElement(G);var h=getAttrValues(e,"").vemmCallback;P.open_lead(h)}}}]),formsOnSpeed.directive("vemmDatepicker",function(I){return{restrict:"EA",require:"^ngModel",compile:function(P,G){var e=getAttrValues(G,"Data");e.placeholder=e.label.replace(/:|\*/gi,""),I("lead."+e.field);var g=vemmCompleteInput(e,"text","","Data deve ser uma data com o formato seguinte (DD/MM/AAAA).","");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a);var n=a.find("input");$.datepicker.setDefaults($.datepicker.regional["pt-BR"]);var s={dateFormat:"dd/mm/yy",inline:!0,onSelect:function(t){h.$apply(function(){p.$setViewValue(t)}),setTimeout(function(){setFocusToNextField(a)},0)}};null!=r.vemmDateFuture&&(s.minDate=new Date),$(function(){n.datepicker(s)})}}}});var setFocusToNextField=function(I){for(var P=$("input"),G=I[0],e=!0,g=0;g<P.length;g++)if(isAfter(P[g],G)){if(!e){P[g].focus();break}e=!1}},isAfter=function(I,P){return $("*").index($(I).last())>$("*").index($(P).first())};function replace_dropdown_options(I,P){if(angular.isArray(P)){var G=$("select[name='"+I+"']");G.empty(),G.append("<option value=''>----- Selecione... -----</option>"),$.each(P,function(e,g){var h=new Option(g,g);G.append(h)})}}formsOnSpeed.directive("vemmDateFuture",function(){return{require:"^ngModel",link:function(I,P,G,e){getFormName(P)}}}),formsOnSpeed.directive("vemmCep",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Insira somente n\xfameros"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Preencha o CEP corretamente.","vemm-validate-cep  ng-blur='MascaraCep($event)' ng-keyup='MonitorLenght($event);RequestEnrichedCEPData($event);' ng-keydown='MonitorLenght($event);' ng-paste='RequestEnrichedCEPData($event);' max=8","MascaraCep","ValidaCep");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCep",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaCep(g)?(console.log("CEP valid"),e.$setValidity("invalid",!0),g):(console.log("CEP invalid"),void e.$setValidity("invalid",!1))})}}}),formsOnSpeed.directive("vemmVehiclePlaca",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Digite o n\xfamero do ve\xedculo"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Preencha o n\xfamero correto do ve\xedculo.","vemm-validate-placa  ng-blur='MascaraPlaca($event);' ng-keyup='MonitorLenght($event);get_placa_API($event)' ng-keydown='MonitorLenght($event);' ng-paste='get_placa_API($event)' max=10","MascaraPlaca","ValidatePlaca");return replaceElementHtml(P,g),function(h,a,r,p){h.$watch("lead.vehicle_placa",function(n){n&&(h.lead.vehicle_placa=h.lead.vehicle_placa.toUpperCase())}),setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidatePlaca",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidatePlaca(g)?(e.$setValidity("invalid",!0),g):(console.log("vehicle number is invalid"),void e.$setValidity("invalid",!1))})}}}),formsOnSpeed.directive("vemmCpf",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"XXX.XXX.XXX-XX"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Preencha o seu CPF corretamente.","vemm-validate-cpf  ng-blur='MascaraCpf($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=11 ","MascaraCpf","ValidaCpf2");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCpf",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaCpf2(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmCnpj",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"CNPJ"),g=vemmCompleteInputWithMaskAndForm(e,"text","","O CNPJ &eacute; inv&aacute;lido.","vemm-validate-cnpj ng-blur='MascaraCnpj($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=18 ","MascaraCnpj","ValidaCnpj");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCnpj",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaCnpj(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmCaptcha",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,""),g=vemmRecaptcha(e,"hidden","Este campo &eacute; obrigat&oacute;rio.","O CAPTCHA &eacute; inv&aacute;lido.","vemm-validate-captcha ","MascaraCnpj","ValidaCnpj");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCaptcha",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return g?(alert("Setting CAPTCHA invalid to TRUE"),e.$setValidity("invalid",!0),g):(alert("Setting CAPTCHA invalid to FALSE"),void e.$setValidity("invalid",!1))})}}}),formsOnSpeed.directive("vemmCelularOrTelefone",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"DDD + N\xfamero"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Preencha o n&uacute;mero de telefone corretamente.","vemm-validate-celular-or-telefone  ng-blur='MascaraCelularOrTelefone($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=18 ","MascaraCelularOrTelefone","ValidaGenericPhone");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCelularOrTelefone",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaGenericPhone(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmCelular",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"DDD + N\xfamero"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Preencha o n&uacute;mero de celular corretamente.","vemm-validate-celular  ng-blur='MascaraCelular($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=11","MascaraCelular","ValidaCelular");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateCelular",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){var h=P.data("mismatch");return void 0===h&&(h=!1),I.ValidaCelular(g)?(e.$setValidity("invalid",!0),g):(e.$setValidity("invalid",h),void(I.lead.ddd=g.substr(0,2)))})}}}),formsOnSpeed.directive("vemmTelefone",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"DDD + N\xfamero"),g=vemmCompleteInputWithMaskAndForm(e,"text","","O n&uacute;mero de telefone &eacute; inv&aacute;lido.","vemm-validate-telefone  ng-blur='MascaraTelefone($event);' ng-keyup='MonitorLenght($event)' ng-keydown='MonitorLenght($event)' max=10","MascaraTelefone","ValidaTelefone");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateTelefone",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaTelefone(g)?(e.$setValidity("invalid",!0),g):(e.$setValidity("invalid",!1),void(I.lead.ddd=g.substr(1,2)))})}}}),formsOnSpeed.directive("vemmWebsiteUrl",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Qual a URL do site?"),g=vemmCompleteInputWithElement(e,"text","","O Website url &eacute; inv&aacute;lido.","vemm-validate-url");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateUrl",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaUrl(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmEmail",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Email"),g=vemmCompleteInputWithElement(e,"email","","Digite seu e-mail corretamente.","vemm-validate-email");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmValidateEmail",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaEmail(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmCompanyName",["$parse",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Company Name"),g=vemmCompleteInputWithMaskAndForm(e,"text","","Por favor escreva o seu Nome e Sobrenome.","");return console.log(),replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}]),formsOnSpeed.directive("vemmFullName",["$parse",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Nome"),g=vemmCompleteInputWithElement(e,"text","","Por favor escreva o seu Nome e Sobrenome.","vemm-validate-full-name");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}]),formsOnSpeed.directive("vemmValidateFullName",function(){return{require:"ngModel",link:function(I,P,G,e){e.$parsers.unshift(function(g){return I.ValidaFullName(g)?(e.$setValidity("invalid",!0),g):void e.$setValidity("invalid",!1)})}}}),formsOnSpeed.directive("vemmText",["$parse",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"Nome"),g=vemmCompleteInput(e,"text","",e.label+" is invalid","");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}]),formsOnSpeed.directive("vemmNumber",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,"N&uacute;mero"),g=vemmCompleteInput(e,"number","",e.label+" &eacute; inv&aacute;lido.","");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmCheckbox",function(I){return{restrict:"EA",compile:function(P,G){var e=getAttrValues(G,""),g=vemmCompleteInputLabelSurround(e,"checkbox","",e.label+" &eacute; inv&aacute;lido.","");return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}),formsOnSpeed.directive("vemmAutocomplete",["$parse",function(I){return{restrict:"EA",replace:!1,transclude:!0,priority:100,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmAutocomplete(g);return replaceElementHtml(P,h),function(a,r,p,n,s){a[g.local_data]=window.vemm[g.local_data],null==a.autocomplete&&(a.autocomplete={}),a.autocomplete[g.local_data]=function(t){null!=t&&(a.lead[g.field]=t.originalObject.code,a.lead.vehicle_model_fipe=t.originalObject.fipe,a.lead.fipe=t.originalObject.fipe+"-"+t.originalObject.e)},setFormNameinElement(r)}}}}]),formsOnSpeed.directive("checkBlankOrFilled",function(I){return{require:"^form",link:function(P,G,e,g){P.$watch(function(){if(vehicle_manufacturer_Hide_condition&&null==P.lead.vehicle_manufacturer&&(P[e.vemmFormName].vehicle_manufacturer.$pristine=!1),vehicle_manufacturer_Hide_in_case_of_vehicle_placa&&null!=P.lead.vehicle_manufacturer&&(P[e.vemmFormName].vehicle_manufacturer.$pristine=!0),vehicle_model_Hide_in_case_of_vehicle_placa){var r=e.vemmFormName;P[r].vehicle_manufacturer.$pristine=!1,P[r].vehicle_model.$pristine=!1}getAttrValues(e,"");var p=P.lead;return"Carro"!=p.vehicle_type&&"Moto"!=p.vehicle_type&&g.vehicle_model.$setValidity("invalid",!0),G.find("input").val()},function(h,a){0<(str=h).length&&h!=a&&(P.lead[e.checkBlankOrFilled]=h,null==P.lead.vehicle_model&&null!=P.lead.vehicle_manufacturer?P.checkModelINList(function(r){g.vehicle_manufacturer.$setValidity("invalid",!!r)})?g.vehicle_manufacturer.$setValidity("invalid",!0):g.vehicle_manufacturer.$setValidity("invalid",!1):null!=P.lead.vehicle_model&&null!=P.lead.vehicle_manufacturer&&(P.checkModelINList(function(r){g.vehicle_model.$setValidity("invalid",!!r)})?g.vehicle_model.$setValidity("invalid",!0):g.vehicle_model.$setValidity("invalid",!1)))})}}}),formsOnSpeed.directive("vemmAutocompleteRemote",["$parse",function(I){return{restrict:"EA",replace:!1,transclude:!0,priority:100,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmAutocompleteRemote(g);return replaceElementHtml(P,h),function(a,r,p,n,s){a[g.local_data]=window.vemm[g.local_data],null==a.autocomplete&&(a.autocomplete={}),a.autocomplete[g.local_data]=function(t){null!=t&&(a.lead.vehicle_model_fipe=t.originalObject.fipe,a.lead.fipe=t.originalObject.fipe+"-"+t.originalObject.e,replace_dropdown_options("vehicle_year",t.originalObject.years.split(",")))},setFormNameinElement(r)}}}}]),formsOnSpeed.directive("vemmHiddenField",["$parse",function(I){return{restrict:"EA",replace:!1,transclude:!0,priority:100,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmHiddenField(g);return replaceElementHtml(P,h),function(a,r,p,n,s){setFormNameinElement(r)}}}}]),formsOnSpeed.directive("vemmDropdown",["$parse",function(I){return{restrict:"EA",replace:!1,transclude:!0,priority:100,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmDropdown(g);return replaceElementHtml(P,h),function(a,r,p,n,s){setFormNameinElement(r);var t=r.find(".dummySelect"),c=t.children();t.replaceWith(c),a.$watch("lead."+g.field,function(u,o){"vehicle_year"==g.field&&a.assigsProfileValues(),u!==o&&("vehicle_type"!=g.field||""==o||""==u||vehicle_info_based_on_placa||(a.lead.vehicle_manufacturer=null,angular.element("#vehicle_manufacturer_value").scope().searchStr="",a.lead.vehicle_model=null,angular.element("#vehicle_model_value").scope().searchStr="",a.lead.vehicle_year=null),r.find("select").val(u))}),setTimeout(function(){var u=a.lead[g.field];a.$apply(function(){a.lead[g.field]=""}),a.$apply(function(){a.lead[g.field]=u})},500)}}}}]),formsOnSpeed.directive("vemmOptionsFrom",["$parse",function(I){return{link:function(P,G,e,g){var h=e.vemmOptionsFrom,a=e.vemmOptionsRoute,r="<option value=''>"+e.vemmOptionsHeader+"</option>",p=G.find("select").first();P.$watch("lead."+h,function(n,s){n&&n!=s?p.load(a+n+".html",function(){p.prepend(r),p.find("option:first-child").prop("selected",!0)}):n||n==s||(p.children().remove(),p.append(r))})}}}]),formsOnSpeed.directive("vemmOption",["$parse",function(I){return{restrict:"EA",replace:!0,compile:function(P,G,e){var g=getAttrValues(G,""),h=vemmOption(g);return replaceElementHtml(P,h),function(a,r,p,n,s){}}}}]),formsOnSpeed.directive("ieSelectFix",[function(){return{restrict:"A",require:"ngModel",link:function(I,P,G,e){if(document.attachEvent){var g=P[0];I.$watch(G.ieSelectFix,function(){var h=document.createElement("option");g.add(h,null),g.remove(g.options.length-1)})}}}}]),formsOnSpeed.directive("vemmHtml",["$parse",function(I){return{restrict:"EA",transclude:!0,compile:function(P,G){var e=getAttrValues(G,""),g=vemmContainingDivWithTransclude(e)+vemmContainingDivClose(e);return replaceElementHtml(P,g),function(h,a,r,p){setFormNameinElement(a)}}}}]),formsOnSpeed.directive("vemmUrlParam",["$parse",function(I){return{restrict:"EA",template:"",link:function(P,G,e,g){setFormNameinElement(G);var h=getAttrValues(e,""),a=P.originalParams[h.param];if(a)switch(h.field){case"vehicle_manufacturer":P.validateVehicleManufacturerAPI(a,function(t){t&&(P.lead[h.field]=decodeURIComponent(a))});break;case"fipe":console.log("call from car sale"),P.lead[h.field]=decodeURIComponent(a),P.getmodelInfobasedonFIPE(a,function(t){angular.equals(t,{})?console.log("***********Fipe not exist**************"):(console.log(t),P.lead.vehicle_manufacturer=t.vehicle_manufacturer,P.lead.vehicle_model=t.vehicle_model,P.modelYears=t.years,replace_dropdown_options("vehicle_year",t.years.split(",")))});break;case"auto_click":P.lead[h.field]=decodeURIComponent(a),"1"==a&&setTimeout(function(){window.vemm.callSubmitIfautoClickYes()},2100);break;case"cellphone":P.ValidaCelular(a)?(P.lead[h.field]=decodeURIComponent(a),setTimeout(function(){window.vemm.cellularBlurEvent()},100)):console.log("********INVALID cellular in URL*****");break;case"name":P.ValidaFullName(a)?P.lead[h.field]=decodeURIComponent(a):console.log("********INVALID name in URL*****");break;case"postal_code":P.ValidaCep(a)?(P.lead[h.field]=decodeURIComponent(a),setTimeout(function(){window.vemm.cepBlurEvent()},100)):console.log("********INVALID CEP in URL*****");break;case"email":P.ValidaEmail(a)?P.lead[h.field]=decodeURIComponent(a):console.log("********INVALID email in URL*****");break;case"vehicle_placa":P.ValidatePlaca(a)?(P.lead[h.field]=decodeURIComponent(a),setTimeout(function(){window.vemm.placaBlurEvent()},100)):console.log("********INVALID vehicle placa in URL*****");break;case"vehicle_bought_already":if(1==a){var r="Sim";P.lead[h.field]=decodeURIComponent(r)}else 2==a?(r="N\xe3o, mas estou negociando.",P.lead[h.field]=decodeURIComponent(r)):3==a&&(r="N\xe3o, estou apenas pesquisando.",P.lead[h.field]=decodeURIComponent(r));break;case"vehicle_type":for(var p=["Carro","Moto","Caminh\xe3o"],n=0;n<p.length;n++)if(a.toLowerCase()==p[n].toLowerCase())var s=p[n];P.lead[h.field]=decodeURIComponent(s);break;case"vehicle_year":setTimeout(function(){P.lead[h.field]=decodeURIComponent(a)},100);break;default:P.lead[h.field]=decodeURIComponent(a)}}}}]),formsOnSpeed.directive("vemmGlobal",["$parse",function(I){return{restrict:"EA",template:"",link:function(P,G,e,g){setFormNameinElement(G);var h=getAttrValues(e,""),a=window[h.field];a&&(P[h.field]=a)}}}]),formsOnSpeed.directive("vemmHidden",["$parse",function(I){return{restrict:"EA",template:"",link:function(P,G,e,g){setFormNameinElement(G);var h=getAttrValues(e,"");h.value&&(P.lead[h.field]=h.value)}}}]),formsOnSpeed.directive("vemmFieldset",["$parse",function(I){return{restrict:"EA",replace:!0,transclude:!0,scope:{vemmLabel:"@vemmLabel"},compile:function(P,G){var e=getAttrValues(G,""),g=vemmFieldset(e);return replaceElementHtml(P,g),function(h,a,r){setFormNameinElement(a)}}}}]),formsOnSpeed.directive("vemmMustEqualField",function(I){return{require:"^ngModel",link:function(P,G,e,g){P.$watch(function(){return I(e.vemmMustEqualField)(P)===g.$modelValue},function(h){g.$setValidity("mismatch",h)})}}}),formsOnSpeed.directive("vemmRedirectToPost",["$parse",function(I){return{restrict:"EA",transclude:!0,compile:function(P,G){var e=getAttrValues(G,""),g=randomId(),h=vemmRedirectToPost(e,g);return replaceElementHtml(P,h),function(a,r,p,n){setFormNameinElement(r),a.$watch(e.conditional,function(s,t){s!=t&&s&&(window.formsonspeed.registerExitClick(e.field,e.url),$("#"+g).submit())})}}}}]),formsOnSpeed.directive("vemmTest",["$parse",function(I){return{restrict:"EA",replace:!0,template:"<fieldset><legend>{{vemmTest}}</legend><div ng-transclude></div></fieldset>",transclude:!0,scope:{vemmLabel:"@vemmLabel"},compile:function(P,G){return replaceElementHtml(P,html),alert("vemmTest compile"+P.html()),function(e,g,h){alert("vemmTest link"+g.html()),setFormNameinElement(g)}}}}]);var randomId=function(){return"vemmId-"+(Math.random().toString(36)+"00000000000000000").slice(2,7)},vemmDropdown=function(I){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+"<select name='"+I.field+"' class='"+I.fieldClass+"' ng-model='lead."+I.field+"' ng-init='"+I.field+" = "+I.field+" || String(null)' ng-show='"+I.conditional+"' "+I.required+"ie-select-fix='lead.name' ng-transclude ng-blur='open_or_update_lead($event);' ><option value=''>----- Selecione... -----</option></select>"+errorDivsWithElement(I,"","")+vemmContainingDivClose(I)},vemmRadioSet=function(I){return vemmContainingDiv(I)+"<div class='pergunta prompt_ques strong'>"+I.label+"</div><div name='"+I.field+"' class='"+I.fieldClass+"' ng-model='lead."+I.field+"' ng-init='"+I.field+" = "+I.field+" || String(null)' ng-show='"+I.conditional+"' "+I.required+"ie-select-fix='lead.name' ng-transclude  ></div>"+errorDivsWithElement(I,"","")+vemmContainingDivClose(I)},vemmOption=function(I){return"<option value='"+I.label+"'>"+I.label+"</option>"},vemmAutocomplete=function(I){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+"<div class='' ng-show='"+I.conditional+"'>  <angucomplete-alt id='"+I.field+"' input-class='form-control form-control-small "+I.fieldClass+"' selected-object='autocomplete."+I.field+"' ng-init='"+I.field+" = "+I.field+" || String(null)' ng-show='"+I.conditional+"' "+I.required+"' placeholder='"+I.placeholder+"' maxlength='"+I.maxlength+"' text-no-results='"+I.noResults+"' local-data='"+I.local_data+"["+I.key+"]' search-fields='name'title-field='name' minlength='0' input-class='form-control form-control-small' match-class='highlight' text-searching='Procurando...' auto-match='true' />"+vemmContainingDivClose(I)+errorDivsWithElement(I,"","")+"</div>"},vemmAutocompleteRemote=function(I){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+"<div class='' ng-show='"+I.conditional+"'>  <angucomplete-alt id='"+I.field+"' input-class='form-control form-control-small "+I.fieldClass+"' selected-object='autocomplete."+I.field+"' ng-init='"+I.field+" = "+I.field+" || String(null)' ng-show='"+I.conditional+"' "+I.required+"' placeholder='"+I.placeholder+"' maxlength='"+I.maxlength+"' text-no-results='"+I.noResults+"' remote-url='"+I.remote_url+"' search-fields='name'remote-url-request-formatter='makeModelInfo'remote-url-data-field='results'initial-value=lead."+I.field+" title-field='name' minlength='0' input-class='form-control form-control-small' match-class='highlight' text-searching='Procurando...' auto-match='true' />"+vemmContainingDivClose(I)+errorDivsWithElement(I,"","")+"</div>"},vemmHiddenField=function(I){return vemmContainingDiv(I)+vemmInput(I,"hidden","")+vemmContainingDivClose(I)},vemmFieldset=function(I){return"<fieldset><legend>"+I.label+"</legend><div ng-transclude></div></fieldset>"},vemmRedirectToPost=function(I,P){return"<form method='post' action='"+I.url+"' id='"+P+"' action='"+I.url+"' ng-show=\""+I.conditional+'" ><div ng-transclude></div></form>'},vemmContainingDiv=function(I){return"<div ng-show='"+I.conditional+"'>"},vemmContainingDivWithTransclude=function(I){return"<div ng-show='"+I.conditional+"' ng-transclude>"},vemmContainingDivClose=function(I){return"</div>"},vemmInput=function(I,P,G){return"<input id='"+I.field+"' type='"+P+"' name='"+I.field+"' class='"+I.fieldClass+"'  ng-model='lead."+I.field+"' ng-show='"+I.conditional+"' placeholder='"+I.placeholder+"' "+I.required+G+" ng-blur='open_or_update_lead($event);' "+I.validations.join(" ")+" />"},vemmInputWithMask=function(I,P,G,e,g){return"<input id='"+I.field+"' type='"+P+"' name='"+I.field+"' class='"+I.fieldClass+"'  ng-model='lead."+I.field+"' ng-show='"+I.conditional+"' placeholder='"+I.placeholder+"' "+I.required+G+" ng-blur='open_or_update_lead($event);' ng-paste='interceptPaste($event, \""+e+'", "'+g+"\")' "+I.validations.join(" ")+" />"},vemmLabel=function(I){return"<label for='"+I.field+"' class='"+I.labelClass+"' ng-show='"+I.conditional+"'>"},vemmLabelClose=function(){return"</label>"},vemmDateDropdowns=function(I,P,G,e,g){var h=rangeToOptions(createRange(31,1)),a=rangeToOptions(monthsInPortuguese),r=rangeToOptions(createRange(78,1920).reverse());return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmSelect(I,"Dia",h,"_day")+vemmSelect(I,"M\xeas",a,"_month")+vemmSelect(I,"Ano",r,"_year")+vemmContainingDivClose(I)+errorDivsSubField(I,"Dia \xe9 requerido.","Dia \xe9 invalido.",I.field,"_day")+errorDivsSubField(I,"M\xeas \xe9 requerido.","M\xeas \xe9 invalido.",I.field,"_month")+errorDivsSubField(I,"Ano \xe9 requerido.","Ano \xe9 invalido.",I.field,"_year")},vemmDateDropdownsWithFormName=function(I,P,G,e,g){var h=rangeToOptions(createRange(31,1)),a=rangeToOptions(monthsInPortuguese),r=(new Date).getFullYear(),p=rangeToOptions(createRange(r-18-1920+1,1920).reverse());return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmSelect(I,"Dia",h,"_day")+vemmSelect(I,"M\xeas",a,"_month")+vemmSelect(I,"Ano",p,"_year")+vemmContainingDivClose(I)+errorDivsSubFieldWithFormName(I,"Dia \xe9 requerido.","Dia \xe9 invalido.",I.field,"_day")+errorDivsSubFieldWithFormName(I,"M\xeas \xe9 requerido.","M\xeas \xe9 invalido.",I.field,"_month")+errorDivsSubFieldWithFormName(I,"Ano \xe9 requerido.","Ano \xe9 invalido.",I.field,"_year")},monthsInPortuguese=["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],createRange=function(I,P){var G=Array(I);for(i=0;i<I;i++)G[i]=i+P;return G},rangeToOptions=function(I){var P="",G=I.length;for(P=P+"<option class='greyed-out'>"+I[0]+"</option>",i=1;i<G;i++)P=P+"<option>"+I[i]+"</option>";return P},vemmSelect=function(I,P,G,e){var g=I.field+e;return"<select name='"+g+"' class='"+I.fieldClass+" date-dropdowns' ng-model='lead."+g+"' ng-init='"+g+" = "+g+" || String(null)' ng-show='"+I.conditional+"' "+I.required+"ie-select-fix='lead.name'><option value=''>"+P+"</option>"+G+"</select>"},vemmCompleteInputWithElement=function(I,P,G,e,g,h){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmInput(I,P,g)+errorDivsWithElement(I,G,e,h)+vemmContainingDivClose(I)},vemmCompleteInput=function(I,P,G,e,g){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmInput(I,P,g)+errorDivs(I,G,e)+vemmContainingDivClose(I)},vemmCompleteInputWithMask=function(I,P,G,e,g,h,a){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmInputWithMask(I,P,g,h,a)+errorDivs(I,G,e)+vemmContainingDivClose(I)},vemmCompleteInputWithMaskAndForm=function(I,P,G,e,g,h,a){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmInputWithMask(I,P,g,h,a)+errorDivsWithElement(I,G,e)+vemmContainingDivClose(I)},vemmCompleteInputLabelSurround=function(I,P,G,e,g){return vemmContainingDiv(I)+vemmLabel(I)+vemmInput(I,P,g)+I.label+vemmLabelClose()+errorDivs(I,G,e)+vemmContainingDivClose(I)},vemmRecaptcha=function(I,P,G,e,g){return vemmContainingDiv(I)+vemmLabel(I)+I.label+vemmLabelClose()+vemmInput(I,P,g)+errorDivsWithElement(I,G,e)+vemmContainingDivClose(I)},getAttrValues=function(I,P){var G="("+(I.vemmConditional||"true")+")",e=I.vemmField,g=null!=I.vemmHideIfFilled;g&&(G=G+"&&!((lead."+e+"!=undefined)&&("+(I.vemmFormName||"leadForm")+"."+e+".$pristine))");var a={field:e,label:I.vemmLabel+("required"in I&&"false"!=I.vemmLabelShowRequired?" *":""),fieldClass:(I.vemmFieldClass||"")+" ",labelClass:(I.vemmLabelClass||"")+" ",confirmationField:I.vemmMustEqualField||"",url:I.vemmUrl||"#",conditional:G,required:"required"in I?" ng-required='"+G+"' ":"",placeholder:I.vemmPlaceholder||P,param:I.vemmParam,value:I.vemmValue,form_name:I.vemmFormName,local_data:I.vemmLocalData,hideIfFilled:g,validations:new Array,maxlength:I.maxlength||"25",key:"lead."+(I.vemmKey||"keyMissing"),noResults:I.vemmNoResults||"Sem resultados",vemmCallback:I.vemmCallback,remote_url:I.vemmRemoteUrl},r=["vemmDateFuture"];for(i=0;i<r.length;i++)null!=(s=I[n=r[i]])&&a.validations.push(camelCaseToSnakeCase(n));var p=["min","max","ngMinlength","ngMaxlength","vemmMustEqualField"];for(i=0;i<p.length;i++){var n,s;(s=I[n=p[i]])&&a.validations.push(camelCaseToSnakeCase(n)+"='"+s+"'")}return a},camelCaseToSnakeCase=function(I){return I.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},errorDivs=function(I,P,G){return""==P&&(P="Este campo &eacute; requerido."),""==G&&(G="Este campo &eacute; inv&aacute;lido."),"<div class='error' ng-show='((leadForm."+I.field+".$dirty)||(attemptedSubmit[step])) && leadForm."+I.field+".$invalid'>"+(I.required?"<span ng-show='leadForm."+I.field+".$error.required'>"+P+" </span>":"")+"<span ng-show='leadForm."+I.field+".$error.invalid'>"+G+" </span><span ng-show='leadForm."+I.field+".$error.mismatch'>O valor n\xe3o corresponde </span><span ng-show='leadForm."+I.field+".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='leadForm."+I.field+".$error.maxlength'>O valor &eacute; muito longo. </span></div>"},errorDivsWithElement=function(I,P,G){""==P&&(P="Este campo &eacute; requerido."),""==G&&(G="Este campo &eacute; inv&aacute;lido.");var e=I.form_name||"leadForm";return"<div class='error' ng-show='(("+e+"."+I.field+".$dirty)||(attemptedSubmit[step])) && "+e+"."+I.field+".$invalid'>"+(I.required?"<span ng-show='"+e+"."+I.field+".$error.required'>"+P+" </span>":"")+"<span ng-show='"+e+"."+I.field+".$error.invalid'>"+G+" </span><span ng-show='"+e+"."+I.field+".$error.mismatch'>O valor n\xe3o corresponde </span><span ng-show='"+e+"."+I.field+".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='"+e+"."+I.field+".$error.maxlength'>O valor &eacute; muito longo. </span></div>"},errorDivsSubField=function(I,P,G,e,g){""==P&&(P="Este campo &eacute; requerido."),""==G&&(G="Este campo &eacute; inv&aacute;lido.");var h=I.required?"<span ng-show='leadForm."+a+".$error.required'>"+P+" </span>":"",a=e+g;return"<div class='error' ng-show='(((leadForm."+e+"_day.$dirty)&&(leadForm."+e+"_month.$dirty)&&(leadForm."+e+"_year.$dirty))||(attemptedSubmit[step])) && leadForm."+a+".$invalid'> "+h+"<span ng-show='leadForm."+a+".$error.invalid'>"+G+" </span><span ng-show='leadForm."+a+".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='leadForm."+a+".$error.maxlength'>O valor &eacute; muito longo. </span></div>"},errorDivsSubFieldWithFormName=function(I,P,G,e,g){""==P&&(P="Este campo &eacute; requerido."),""==G&&(G="Este campo &eacute; inv&aacute;lido.");var h=I.form_name||"leadForm",a=I.required?"<span ng-show='"+h+"."+r+".$error.required'>"+P+" </span>":"",r=e+g;return"<div class='error' ng-show='((("+h+"."+e+"_day.$dirty)&&("+h+"."+e+"_month.$dirty)&&("+h+"."+e+"_year.$dirty))||(attemptedSubmit[step])) && "+h+"."+r+".$invalid'> "+a+"<span ng-show='"+h+"."+r+".$error.invalid'>"+G+" </span><span ng-show='"+h+"."+r+".$error.minlength'>O valor &eacute; muito curto. </span><span ng-show='"+h+"."+r+".$error.maxlength'>O valor &eacute; muito longo. </span></div>"},replaceElementHtml=function(I,P){I.html(P)},replaceElementHtmlAndChildren=function(I,P,G){var e=$(P);e.innerHTML=G.innerHTML,I.replaceWith(e)},addTrackingVariablesToLead=function(I,P){I.lead.user_agent=P.navigator.userAgent,addRemoteIpToTrackingVariables(I),addReferrertoTrackingVariables(I)},addRemoteIpToTrackingVariables=function(I){$.getJSON("https://jsonip.com/?callback=?",function(P){I.$apply(function(){I.lead.remote_ip=P.ip})})},addReferrertoTrackingVariables=function(I){var P=document.referrer;I.lead.referer=P},hashToUrlParams=function(I){var P=[];for(var G in I)I.hasOwnProperty(G)&&P.push(encodeURIComponent(G)+"="+encodeURIComponent(I[G]));return P.join("&")},getFormName=function(I){return $(I).closest("form").attr("name")},setFormNameinElement=function(I){var P=getFormName(I),G=$(I.html()).attr("ng-show");null!=G&&I.attr("ng-show",G.replace("leadForm",P))},setFormNameinElementHtml=function(I){var P=getFormName(I);$(I.html()),I.find("div,span,input,label").each(function(){var G=$(this).attr("ng-show"),e=$(this).attr("ng-required");$(this).attr("ng-show",G.replace(/leadForm/g,P)),null!=e&&$(this).attr("ng-required",e.replace(/leadForm/g,P))})};function mascaraInteiro(I){return!(I.keyCode<48||57<I.keyCode)||(I.returnValue=!1)}function formataCampo(I,P,G){if(""==I.value)return!0;var e=G.keyCode;exp=/\-|\.|\/|\(|\)| /g,campoSoNumeros=I.value.toString().replace(exp,"");var g=0,h="",a=campoSoNumeros.length;if(8==e)return!0;for(i=0;i<=a;i++)"-"==P.charAt(i)||"."==P.charAt(i)||"/"==P.charAt(i)||"("==P.charAt(i)||")"==P.charAt(i)||" "==P.charAt(i)?(h+=P.charAt(i),a++):(h+=campoSoNumeros.charAt(g),g++);return I.value=h,!0}function setFosScopeVariable(I,P){var G=angular.element($("#formController")).scope();G.$apply(function(){G[I]=P})}window.formsonspeed.getConfigParam=function(I){},window.formsonspeed.registerGoogleAnalyticsTransaction=function(){console.log("Recording transaction on Google Analytics"),"function"==typeof gtag?gtag("event","purchase",{transaction_id:"1234",affiliation:this.configParams.formName,value:this.configParams.dummyValue,currency:"BRL",tax:"0.0",shipping:"0",items:[{id:this.configParams.analyticsSku,name:this.configParams.analyticsProduct,list_name:"Search Results",brand:"Google",category:this.configParams.analyticsCategory,price:this.configParams.dummyValue,quantity:"1"}]}):"function"==typeof ga&&(ga("ecommerce:addTransaction",{id:"1234",affiliation:this.configParams.formName,revenue:this.configParams.dummyValue,shipping:"0",tax:"0.0"}),ga("ecommerce:addItem",{id:"1234",name:this.configParams.analyticsProduct,sku:this.configParams.analyticsSku,category:this.configParams.analyticsCategory,price:this.configParams.dummyValue,quantity:"1"}),ga("ecommerce:send"))},window.formsonspeed.registerVisualWebsiteOptimizerConversion=function(){if("function"==typeof _vis_opt_top_initialize){var I=window.vemm.VWOGoalNumber||232;_vis_opt_goal_conversion(I),console.log("VWO goal registered:"),console.log(I),_vis_opt_pause(500)}},window.formsonspeed.runThankYouScripts=function(){var I=document.write;document.write=function(P){$("body").append(P)},$("#thankyou-node").load("thankyou_scripts.html",function(){console.log("Thank you scripts loaded successfully"),setTimeout(function(){document.write=I},100)})},window.formsonspeed.sendGoogleAnalyticsEvent=function(I,P,G){if("function"==typeof gtag){var e={};P||(P=""),I&&(e.event_category=I),G&&(e.event_label=G),gtag("event",P,e)}else"function"==typeof ga&&ga("send","event",I,P,G)},window.formsonspeed.registerFieldFilledIn=function(I,P,G){window.formsonspeed.sendGoogleAnalyticsEvent(G?"FieldOk":"FieldError",I,P)},window.formsonspeed.registerExitClick=function(I,P){window.formsonspeed.sendGoogleAnalyticsEvent("ExitClick",I,P)},window.formsonspeed.registerConversion=function(){console.log("Registered form submission with Analytics"),window.formsonspeed.sendGoogleAnalyticsEvent("FormSubmitted")};var leadModule=angular.module("leadModule",[]);function _typeof4(I){return(_typeof4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(I)}function _typeof(I){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(I)}leadModule.factory("Lead",function(I){return I("//formsonspeed.herokuapp.com/vleads/:id",{id:"@id"},{update:{method:"PUT"}})}),formsOnSpeed.directive("vemmStep",function(){return{restrict:"A",link:function(I,P,G){I._incrementSteps();var e=I.steps;I.$watch("step",function(g){g===e?P.removeClass("ng-hide"):P.addClass("ng-hide")})}}}),function(I){if("object"===(typeof exports>"u"?"undefined":_typeof4(exports))&&typeof module<"u")module.exports=I();else if("function"==typeof define&&define.amd)define([],I);else{var P;((P=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).Twilio||(P.Twilio={})).Chat=I()}}(function(){return function e(g,h,a){function r(s,t){if(!h[s]){if(!g[s]){var c="function"==typeof require&&require;if(!t&&c)return c(s,!0);if(p)return p(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var o=h[s]={exports:{}};g[s][0].call(o.exports,function(l){return r(g[s][1][l]||l)},o,o.exports,e,g,h,a)}return h[s].exports}for(var p="function"==typeof require&&require,n=0;n<a.length;n++)r(a[n]);return r}({1:[function(e,g,h){"use strict";var a=w(e("babel-runtime/core-js/get-iterator")),r=w(e("babel-runtime/regenerator")),p=w(e("babel-runtime/core-js/map")),n=w(e("babel-runtime/core-js/json/stringify")),s=w(e("babel-runtime/core-js/number/is-integer")),t=w(e("babel-runtime/core-js/object/get-prototype-of")),c=w(e("babel-runtime/helpers/classCallCheck")),u=w(e("babel-runtime/helpers/createClass")),o=w(e("babel-runtime/helpers/possibleConstructorReturn")),l=w(e("babel-runtime/helpers/inherits")),f=w(e("babel-runtime/core-js/promise"));function w(J){return J&&J.__esModule?J:{default:J}}var k=function(J,Q,U,N){return new(U||(U=f.default))(function(D,ie){function Z(te){try{re(N.next(te))}catch(ye){ie(ye)}}function ue(te){try{re(N.throw(te))}catch(ye){ie(ye)}}function re(te){te.done?D(te.value):new U(function(ye){ye(te.value)}).then(Z,ue)}re((N=N.apply(J,Q||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var O=e("events"),M=e("./logger"),b=e("./data/members"),A=e("./member"),_=e("./data/messages"),E=e("./util"),y=M.Logger.scope(""),m={attributes:"attributes",createdBy:"createdBy",dateCreated:"dateCreated",dateUpdated:"dateUpdated",friendlyName:"friendlyName",lastConsumedMessageIndex:"lastConsumedMessageIndex",name:"friendlyName",sid:"sid",status:"status",type:"type",uniqueName:"uniqueName"};function R(J){try{return new Date(J)}catch{return null}}function F(J){return"notParticipating"===J?"known":J}h.filterStatus=F;var B=function(J){function Q(U,N,D){(0,c.default)(this,Q);var ie=(0,o.default)(this,(Q.__proto__||(0,t.default)(Q)).call(this)),Z=N.attributes||{},ue=N.createdBy,re=R(N.dateCreated),te=R(N.dateUpdated),ye=N.name||N.friendlyName||null,Se=(0,s.default)(N.lastConsumedMessageIndex)?N.lastConsumedMessageIndex:null,Ee=N.uniqueName||null;try{(0,n.default)(Z)}catch{throw new Error("Attributes must be a valid JSON object.")}return ie.services=U,ie.sid=D,ie.entityName=N.channel,ie.state={uniqueName:Ee,status:"known",type:N.type,attributes:Z,createdBy:ue,dateCreated:re,dateUpdated:te,friendlyName:ye,lastConsumedMessageIndex:Se},ie.members=new p.default,ie.membersEntity=new b.Members(ie,ie.services,ie.members),ie.membersEntity.on("memberJoined",ie.emit.bind(ie,"memberJoined")),ie.membersEntity.on("memberLeft",ie.emit.bind(ie,"memberLeft")),ie.membersEntity.on("memberUpdated",ie.emit.bind(ie,"memberUpdated")),ie.messagesEntity=new _.Messages(ie,U),ie.messagesEntity.on("messageAdded",function(V){return ie._onMessageAdded(V)}),ie.messagesEntity.on("messageUpdated",ie.emit.bind(ie,"messageUpdated")),ie.messagesEntity.on("messageRemoved",ie.emit.bind(ie,"messageRemoved")),ie}return(0,l.default)(Q,J),(0,u.default)(Q,[{key:"_subscribe",value:function(){var U=this;return this.entityPromise?this.entityPromise:this.entityPromise=this.entityPromise||this.services.syncClient.document({uniqueName:this.entityName,mode:"open"}).then(function(N){return U.entity=N,U.entity.on("updated",function(D){U._update(D)}),U.entity.on("removed",function(){return U.emit("removed",U)}),U._update(U.entity.value),N}).catch(function(N){throw U.entity=null,U.entityPromise=null,y.error("Failed to get channel object",N),N})}},{key:"_subscribeStreams",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){var N,D;return r.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._subscribe();case 3:return y.trace("_subscribeStreams, this.entity.value=",this.entity.value),N=this.entity.value.messages,D=this.entity.value.roster,ie.next=8,f.default.all([this.messagesEntity.subscribe(N),this.membersEntity.subscribe(D)]);case 8:ie.next=14;break;case 10:throw ie.prev=10,ie.t0=ie.catch(0),y.error("Failed to subscribe on channel objects",this.sid,ie.t0),ie.t0;case 14:case"end":return ie.stop()}},U,this,[[0,10]])}))}},{key:"_unsubscribe",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(this.isPrivate&&this.entity)return N.next=3,this.entity.close();N.next=5;break;case 3:this.entity=null,this.entityPromise=null;case 5:return N.abrupt("return",f.default.all([this.membersEntity.unsubscribe(),this.messagesEntity.unsubscribe()]));case 6:case"end":return N.stop()}},U,this)}))}},{key:"_setStatus",value:function(U,N){this.statusSource=N,this.state.status!==U&&("joined"===(this.state.status=U)?this._subscribeStreams():"invited"===U?this._subscribe():this.entityPromise&&this._unsubscribe())}},{key:"_statusSource",value:function(){return this.statusSource}},{key:"_update",value:function(U){y.trace("_update",U),Q.preprocessUpdate(U,this.sid);var N=!1;for(var D in U){var ie=m[D];ie&&(ie===m.status?U.status&&"unknown"!=U.status&&(this.state.status=F(U.status)):ie===m.attributes?E.isDeepEqual(this.state.attributes,U.attributes)||(this.state.attributes=U.attributes,N=!0):U[D]instanceof Date?this.state[ie]&&this.state[ie].getTime()===U[D].getTime()||(this.state[ie]=U[D],N=!0):this[ie]!==U[D]&&(this.state[ie]=U[D],N=!0))}N&&this.emit("updated",this)}},{key:"_onMessageAdded",value:function(U){var N=!0,D=!1,ie=void 0;try{for(var Z,ue=(0,a.default)(this.members.values());!(N=(Z=ue.next()).done);N=!0){var re=Z.value;if(re.identity===U.author){re._endTyping();break}}}catch(te){D=!0,ie=te}finally{try{!N&&ue.return&&ue.return()}finally{if(D)throw ie}}this.emit("messageAdded",U)}},{key:"add",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(U&&"string"==typeof U){D.next=2;break}throw new Error("Channel.add requires an <String>identity parameter");case 2:return D.abrupt("return",this.membersEntity.add(U));case 3:case"end":return D.stop()}},N,this)}))}},{key:"advanceLastConsumedMessageIndex",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if((0,s.default)(U)){D.next=2;break}throw new Error("Channel.advanceLastConsumedMessageIndex requires an integral <Number>index parameter");case 2:if(null!==this.lastConsumedMessageIndex&&U<=this.lastConsumedMessageIndex)return D.abrupt("return");D.next=4;break;case 4:return D.next=6,this._subscribeStreams();case 6:return this.services.consumptionHorizon.advanceLastConsumedMessageIndexForChannel(this.sid,U),D.abrupt("return",this);case 8:case"end":return D.stop()}},N,this)}))}},{key:"decline",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.services.session.addCommand("declineInvitation",{channelSid:this.sid});case 2:return N.abrupt("return",this);case 3:case"end":return N.stop()}},U,this)}))}},{key:"delete",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.services.session.addCommand("destroyChannel",{channelSid:this.sid});case 2:return N.abrupt("return",this);case 3:case"end":return N.stop()}},U,this)}))}},{key:"getAttributes",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this._subscribe();case 2:return N.abrupt("return",this.attributes);case 3:case"end":return N.stop()}},U,this)}))}},{key:"getMessages",value:function(U,N,D){return k(this,void 0,void 0,r.default.mark(function ie(){return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(void 0===N||(0,s.default)(N)){Z.next=2;break}throw new Error("Anchor should be a valid message index");case 2:return Z.next=4,this._subscribeStreams();case 4:return Z.abrupt("return",this.messagesEntity.getMessages(U,N,D));case 5:case"end":return Z.stop()}},ie,this)}))}},{key:"getMembers",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this._subscribeStreams();case 2:return N.abrupt("return",this.membersEntity.getMembers());case 3:case"end":return N.stop()}},U,this)}))}},{key:"getMembersCount",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){var D;return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.services.session.getSessionLinks();case 2:return D=new E.UriBuilder(Z.sent.publicChannelsUrl).path(this.sid).build(),Z.next=6,this.services.network.get(D);case 6:return Z.abrupt("return",Z.sent.body.members_count);case 8:case"end":return Z.stop()}},U,this)}))}},{key:"getMessagesCount",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){var D;return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.services.session.getSessionLinks();case 2:return D=new E.UriBuilder(Z.sent.publicChannelsUrl).path(this.sid).build(),Z.next=6,this.services.network.get(D);case 6:return Z.abrupt("return",Z.sent.body.messages_count);case 8:case"end":return Z.stop()}},U,this)}))}},{key:"getUnconsumedMessagesCount",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){var D,ie;return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.services.session.getSessionLinks();case 2:return D=new E.UriBuilder(Z.sent.myChannelsUrl).arg("ChannelSid",this.sid).build(),Z.next=6,this.services.network.get(D);case 6:if((ie=Z.sent).body.channels.length)return Z.abrupt("return",ie.body.channels[0].unread_messages_count||0);Z.next=9;break;case 9:throw new Error("Channel is not in user channels list");case 10:case"end":return Z.stop()}},U,this)}))}},{key:"invite",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if("string"==typeof U&&U.length){D.next=2;break}throw new Error("Channel.invite requires an <String>identity parameter");case 2:return D.abrupt("return",this.membersEntity.invite(U));case 3:case"end":return D.stop()}},N,this)}))}},{key:"join",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.services.session.addCommand("joinChannel",{channelSid:this.sid});case 2:return N.abrupt("return",this);case 3:case"end":return N.stop()}},U,this)}))}},{key:"leave",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if("joined"===this.state.status)return N.next=3,this.services.session.addCommand("leaveChannel",{channelSid:this.sid});N.next=3;break;case 3:return N.abrupt("return",this);case 4:case"end":return N.stop()}},U,this)}))}},{key:"removeMember",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(U&&("string"==typeof U||U instanceof A.Member)){D.next=2;break}throw new Error("Channel.removeMember requires a <String|Member>member parameter.");case 2:return D.abrupt("return",this.membersEntity.remove("string"==typeof U?U:U.identity));case 3:case"end":return D.stop()}},N,this)}))}},{key:"sendMessage",value:function(U,N){return k(this,void 0,void 0,r.default.mark(function D(){return r.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if("string"==typeof U)return ue.next=3,this.messagesEntity.send(U,N);ue.next=7;break;case 3:case 9:return ue.abrupt("return",ue.sent.messageId);case 7:return ue.next=9,this.messagesEntity.sendMedia(U,N);case 11:case"end":return ue.stop()}},D,this)}))}},{key:"setAllMessagesConsumed",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){var N;return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this._subscribeStreams();case 2:return D.next=4,this.getMessages(1);case 4:if(0<(N=D.sent).items.length)return D.next=8,this.advanceLastConsumedMessageIndex(N.items[0].index);D.next=8;break;case 8:return D.abrupt("return",this);case 9:case"end":return D.stop()}},U,this)}))}},{key:"setNoMessagesConsumed",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this._subscribeStreams();case 2:return this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,null),N.abrupt("return",this);case 4:case"end":return N.stop()}},U,this)}))}},{key:"typing",value:function(){return this.services.typingIndicator.send(this.sid)}},{key:"updateAttributes",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(U){D.next=4;break}throw new Error("Attributes can't be null");case 4:if(U.constructor!==Object)throw new Error("Attributes must be a valid JSON object.");D.next=6;break;case 6:return D.next=8,this.services.session.addCommand("editAttributes",{channelSid:this.sid,attributes:(0,n.default)(U)});case 8:return D.abrupt("return",this);case 9:case"end":return D.stop()}},N,this)}))}},{key:"updateFriendlyName",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.state.friendlyName!==U)return D.next=3,this.services.session.addCommand("editFriendlyName",{channelSid:this.sid,friendlyName:U});D.next=3;break;case 3:return D.abrupt("return",this);case 4:case"end":return D.stop()}},N,this)}))}},{key:"updateLastConsumedMessageIndex",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if((0,s.default)(U)||null===U){D.next=2;break}throw new Error('Incorrect argument "index": integer number or null expected');case 2:return D.next=4,this._subscribeStreams();case 4:return this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,U),D.abrupt("return",this);case 6:case"end":return D.stop()}},N,this)}))}},{key:"updateUniqueName",value:function(U){return k(this,void 0,void 0,r.default.mark(function N(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.state.uniqueName!==U)return D.next=3,this.services.session.addCommand("editUniqueName",{channelSid:this.sid,uniqueName:U});D.next=3;break;case 3:return D.abrupt("return",this);case 4:case"end":return D.stop()}},N,this)}))}},{key:"getUserDescriptors",value:function(){return k(this,void 0,void 0,r.default.mark(function U(){return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",this.services.users.getChannelUserDescriptors(this.sid));case 1:case"end":return N.stop()}},U,this)}))}},{key:"status",get:function(){return this.state.status}},{key:"type",get:function(){return this.state.type}},{key:"uniqueName",get:function(){return this.state.uniqueName}},{key:"isPrivate",get:function(){return"private"===this.state.type}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"createdBy",get:function(){return this.state.createdBy}},{key:"attributes",get:function(){return this.state.attributes}},{key:"lastConsumedMessageIndex",get:function(){return this.state.lastConsumedMessageIndex}}],[{key:"preprocessUpdate",value:function(U,N){try{"string"==typeof U.attributes?U.attributes=JSON.parse(U.attributes):U.attributes&&(0,n.default)(U.attributes)}catch{y.warn("Retrieved malformed attributes from the server for channel: "+N),U.attributes={}}try{U.dateCreated&&(U.dateCreated=new Date(U.dateCreated))}catch{y.warn("Retrieved malformed attributes from the server for channel: "+N),delete U.dateCreated}try{U.dateUpdated&&(U.dateUpdated=new Date(U.dateUpdated))}catch{y.warn("Retrieved malformed attributes from the server for channel: "+N),delete U.dateUpdated}}}]),Q}(O.EventEmitter);h.Channel=B},{"./data/members":6,"./data/messages":7,"./logger":14,"./member":16,"./util":30,"babel-runtime/core-js/get-iterator":32,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/map":35,"babel-runtime/core-js/number/is-integer":36,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],2:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(h,"__esModule",{value:!0});var n=e("./logger"),s=e("./channel"),t=new n.Logger;function c(o){try{return new Date(o)}catch{return null}}var u=function(){function o(l,f){(0,a.default)(this,o),this.client=l,(this.descriptor=f).sid?(this.sid=f.sid,this.channel=f.sid+".channel"):(this.sid=f.channel_sid,this.channel=f.channel_sid+".channel"),this.uniqueName=f.unique_name,this.friendlyName=f.friendly_name,this.attributes=function(w){try{return JSON.parse(w)}catch(k){t.warn("Failed to parse channel attributes",k)}return{}}(f.attributes),this.createdBy=f.created_by,this.dateCreated=c(f.date_created),this.dateUpdated=c(f.date_updated),this.messagesCount=f.messages_count,this.membersCount=f.members_count,this.type=f.type,this.isPrivate="private"==f.type,this.lastConsumedMessageIndex=f.last_consumed_message_index,this.status=f.status?s.filterStatus(f.status):"unknown"}return(0,r.default)(o,[{key:"getChannel",value:function(){return this.client.getChannelBySid(this.sid)}}]),o}();h.ChannelDescriptor=u},{"./channel":1,"./logger":14,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],3:[function(e,g,h){"use strict";var a=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/helpers/extends")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/createClass")),s=o(e("babel-runtime/helpers/possibleConstructorReturn")),t=o(e("babel-runtime/helpers/inherits")),c=o(e("babel-runtime/helpers/classCallCheck")),u=o(e("babel-runtime/core-js/promise"));function o(V){return V&&V.__esModule?V:{default:V}}var l=function(V,Y,z,T){return new(z||(z=u.default))(function(C,X){function se(Me){try{be(T.next(Me))}catch($e){X($e)}}function ne(Me){try{be(T.throw(Me))}catch($e){X($e)}}function be(Me){Me.done?C(Me.value):new z(function($e){$e(Me.value)}).then(se,ne)}be((T=T.apply(V,Y||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("events"),w=e("./logger"),k=e("./configuration"),O=e("./user");h.User=O.User;var M=e("./data/publicchannels"),b=e("./services/network"),A=e("./interfaces/notificationtypes"),_=e("./synclist"),E=e("twilsock"),y=e("twilio-notifications"),m=e("twilio-transport"),R=e("twilio-sync"),F=e("twilio-ems-client"),B=e("twilio-mcs-client"),J=e("./session"),Q=e("./data/channels"),U=e("./data/users"),N=e("./services/typingindicator"),D=e("./services/consumptionhorizon"),ie=e("./data/userchannels"),Z=e("./pushnotification");h.PushNotification=Z.PushNotification;var ue=e("./util"),re=w.Logger.scope(""),te=e("./../package.json").version,ye="A valid Twilio token should be provided",Se=function V(){(0,c.default)(this,V)},Ee=function(V){function Y(z,T){(0,c.default)(this,Y);var C=(0,s.default)(this,(Y.__proto__||(0,p.default)(Y)).call(this));if(C.connectionState="connecting",C.initializePromise=null,C.sessionPromise=null,C.channelsPromise=null,C.options=T||{},C.options.logLevel=C.options.logLevel||"error",C.options.productId="ip_messaging",C.options.Sync=C.options.Sync||{},C.options.Sync.enableSessionStorage||(C.options.Sync.enableSessionStorage=!1),!z)throw new Error(ye);return re.setLevel(C.options.logLevel),C.services=new Se,C.config=new k.Configuration(null,C.options),C.options.twilsockClient=C.options.twilsockClient||new E(z,C.options),C.options.transport=C.options.transport||new m.Transport(C.options.twilsockClient,C.options),C.options.emsClient=C.options.emsClient||new F.EmsClient(C.options),C.options.notificationsClient=C.options.notificationsClient||new y(z,C.options),C.options.syncClient=C.options.syncClient||new R.SyncClient(z,C.options),C.services.emsClient=C.options.emsClient,C.services.syncClient=C.options.syncClient,C.services.transport=C.options.transport,C.services.twilsockClient=C.options.twilsockClient,C.services.notificationClient=C.options.notificationsClient,C.services.session=new J.Session(C.services,C.config),C.sessionPromise=C.services.session.initialize(z),C.services.network=new b.Network(C.config,C.services),C.services.users=new U.Users({session:C.services.session,network:C.services.network,syncClient:C.services.syncClient}),C.services.users.on("userSubscribed",C.emit.bind(C,"userSubscribed")),C.services.users.on("userUpdated",C.emit.bind(C,"userUpdated")),C.services.users.on("userUnsubscribed",C.emit.bind(C,"userUnsubscribed")),C.services.consumptionHorizon=new D.ConsumptionHorizon(C.services),C.services.typingIndicator=new N.TypingIndicator(C.config,{transport:C.services.transport,notificationClient:C.services.notificationClient},C.getChannelBySid.bind(C)),C.services.syncList=new _.SyncList(C.services),C.channels=new Q.Channels(C.services),C.channelsPromise=C.sessionPromise.then(function(){return C.channels.on("channelAdded",C.emit.bind(C,"channelAdded")),C.channels.on("channelRemoved",C.emit.bind(C,"channelRemoved")),C.channels.on("channelInvited",C.emit.bind(C,"channelInvited")),C.channels.on("channelJoined",C.emit.bind(C,"channelJoined")),C.channels.on("channelLeft",C.emit.bind(C,"channelLeft")),C.channels.on("channelUpdated",C.emit.bind(C,"channelUpdated")),C.channels.on("memberJoined",C.emit.bind(C,"memberJoined")),C.channels.on("memberLeft",C.emit.bind(C,"memberLeft")),C.channels.on("memberUpdated",C.emit.bind(C,"memberUpdated")),C.channels.on("messageAdded",C.emit.bind(C,"messageAdded")),C.channels.on("messageUpdated",C.emit.bind(C,"messageUpdated")),C.channels.on("messageRemoved",C.emit.bind(C,"messageRemoved")),C.channels.on("typingStarted",C.emit.bind(C,"typingStarted")),C.channels.on("typingEnded",C.emit.bind(C,"typingEnded")),C.channels.fetchChannels()}).then(function(){return C.channels}),C.services.notificationClient.on("transportReady",function(X){X?(C.connectionState="connected",C.services.session.syncToken().catch(function(se){re.error("Failed to sync session token",se)})):C.connectionState="rejected"===C.services.twilsockClient.state?"denied":"connecting",C.emit("connectionStateChanged",C.connectionState)}),C.fpaToken=z,C.initializePromise=C._initialize(),C}return(0,t.default)(Y,V),(0,n.default)(Y,[{key:"_initialize",value:function(){return l(this,void 0,void 0,a.default.mark(function z(){var C,X,se=this;return a.default.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,this.services.emsClient.setToken(this.fpaToken);case 2:return this.config.updateToken(ne.sent.token),ne.next=6,this.sessionPromise;case 6:return Y.supportedPushChannels.forEach(function(be){return se.subscribeToPushNotifications(be)}),ne.next=9,this.services.session.getSessionLinks();case 9:return this.services.publicChannels=new M.PublicChannels(this,this.services,(C=ne.sent).publicChannelsUrl),this.services.userChannels=new ie.UserChannels(this,this.services,C.myChannelsUrl),(X=(0,r.default)(this.options)).transport=null,this.services.mcsClient=new B.McsClient(this.config.token,C.mediaServiceUrl,X),ne.next=17,this.services.typingIndicator.initialize();case 17:case"end":return ne.stop()}},z,this)}))}},{key:"subscribeToPushNotifications",value:function(z){var T=this;[A.NotificationTypes.NEW_MESSAGE,A.NotificationTypes.ADDED_TO_CHANNEL,A.NotificationTypes.INVITED_TO_CHANNEL,A.NotificationTypes.REMOVED_FROM_CHANNEL,A.NotificationTypes.TYPING_INDICATOR,A.NotificationTypes.CONSUMPTION_UPDATE].forEach(function(C){T.services.notificationClient.subscribe(C,z)})}},{key:"initialize",value:function(){var z=this;return this.initializePromise.then(function(){return z})}},{key:"shutdown",value:function(){return this.services.twilsockClient.disconnect()}},{key:"updateToken",value:function(z){return l(this,void 0,void 0,a.default.mark(function T(){var C=this;return a.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(re.info("updateToken"),z){X.next=3;break}throw new Error(ye);case 3:if(z===this.fpaToken)return X.abrupt("return",this);X.next=5;break;case 5:return X.abrupt("return",this.services.emsClient.setToken(z).then(function(se){if("NEW"===se.status)throw re.error("Can't extend token:",se.reason),new Error("Can't extend token:"+se.reason);return se.token}).then(function(se){return C.services.twilsockClient.updateToken(z).then(function(){return C.services.syncClient.updateToken(z)}).then(function(){return C.services.notificationClient.updateToken(z)}).then(function(){return C.services.mcsClient.updateToken(z)}).then(function(){return C.sessionPromise}).then(function(){return C.services.session.updateToken(se)}).then(function(){return se})}).then(function(se){return C.config.updateToken(se),C.fpaToken=z,C}));case 6:case"end":return X.stop()}},T,this)}))}},{key:"getChannelBySid",value:function(z){return l(this,void 0,void 0,a.default.mark(function T(){var C=this;return a.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(z&&"string"==typeof z){X.next=2;break}throw new Error("Client.getChannelBySid requires a <String>channelSid parameter");case 2:return X.abrupt("return",this.channels.getChannel(z).then(function(se){return se||C.services.publicChannels.getChannelBySid(z).then(function(ne){return C.channels.pushChannel(ne)})}));case 3:case"end":return X.stop()}},T,this)}))}},{key:"getChannelByUniqueName",value:function(z){return l(this,void 0,void 0,a.default.mark(function T(){var C=this;return a.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(z&&"string"==typeof z){X.next=2;break}throw new Error("Client.getChannelByUniqueName requires a <String>uniqueName parameter");case 2:return X.abrupt("return",this.services.publicChannels.getChannelByUniqueName(z).then(function(se){return C.channels.pushChannel(se)}));case 3:case"end":return X.stop()}},T,this)}))}},{key:"getSubscribedChannels",value:function(z){return this.channelsPromise.then(function(T){return T.getChannels(z)})}},{key:"getPublicChannelDescriptors",value:function(){return this.services.publicChannels.getChannels()}},{key:"getUserChannelDescriptors",value:function(){return this.services.userChannels.getChannels()}},{key:"createChannel",value:function(z){return z=z||{},this.channelsPromise.then(function(T){return T.addChannel(z)})}},{key:"setPushRegistrationId",value:function(z,T){if(-1===Y.supportedPushChannels.indexOf(z))throw new Error("Invalid or unsupported channelType: "+z);this.services.notificationClient.setPushRegistrationId(T,z)}},{key:"handlePushNotification",value:function(z){return l(this,void 0,void 0,a.default.mark(function T(){return a.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:re.debug("handlePushNotification, notificationPayload=",z),this.emit("pushNotification",Y.parsePushNotification(z));case 2:case"end":return C.stop()}},T,this)}))}},{key:"getUser",value:function(z){return this.services.users.getUser(z)}},{key:"getUserDescriptor",value:function(z){return l(this,void 0,void 0,a.default.mark(function T(){return a.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.services.users.getUserDescriptor(z));case 1:case"end":return C.stop()}},T,this)}))}},{key:"getSubscribedUsers",value:function(){return l(this,void 0,void 0,a.default.mark(function z(){return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.services.users.getSubscribedUsers());case 1:case"end":return T.stop()}},z,this)}))}},{key:"user",get:function(){return this.services.users.myself}},{key:"reachabilityEnabled",get:function(){return this.services.session.reachabilityEnabled}},{key:"token",get:function(){return this.config.token}}],[{key:"create",value:function(z,T){return l(this,void 0,void 0,a.default.mark(function C(){var X;return a.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return X=new Y(z,T),se.next=3,X.initialize();case 3:return se.abrupt("return",X);case 4:case"end":return se.stop()}},C,this)}))}},{key:"parsePushNotificationChatData",value:function(z){var T={};for(var C in Y.supportedPushDataFields)null!=z[C]&&("message_index"===C?null!==ue.parseToNumber(z[C])&&(T[Y.supportedPushDataFields[C]]=Number(z[C])):T[Y.supportedPushDataFields[C]]=z[C]);return T}},{key:"parsePushNotification",value:function(z){if(re.debug("parsePushNotification, notificationPayload=",z),null==z)throw new Error("Push notification payload should be provided");if(void 0!==z.aps){var T=null,C=null,X={};if(void 0!==z.data&&(X=Y.parsePushNotificationChatData(z.data)),!z.type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var se=z.aps;return"string"==typeof se.alert?T=se.alert||null:(T=se.alert.body||null,C=se.alert.title||null),new Z.PushNotification({title:C,body:T,sound:se.sound||null,badge:se.badge||null,action:se.category||null,type:z.type,data:X})}if(void 0===z.data)throw new Error("Provided push notification payload is not Programmable Chat notification");var $e=z.data;if($e.twi_message_type){var Ue=Y.parsePushNotificationChatData(z.data);return new Z.PushNotification({title:$e.twi_title||null,body:$e.twi_body||null,sound:$e.twi_sound||null,badge:null,action:$e.twi_action||null,type:$e.twi_message_type,data:Ue})}throw new Error("Provided push notification payload does not contain Programmable Chat push notification type")}}]),Y}(f.EventEmitter);Ee.version=te,Ee.supportedPushChannels=["fcm","apn","gcm"],Ee.supportedPushDataFields={channel_sid:"channelSid",message_sid:"messageSid",message_index:"messageIndex"},h.Client=Ee,h.default=Ee},{"./../package.json":291,"./configuration":4,"./data/channels":5,"./data/publicchannels":8,"./data/userchannels":9,"./data/users":11,"./interfaces/notificationtypes":12,"./logger":14,"./pushnotification":18,"./services/consumptionhorizon":20,"./services/network":21,"./services/typingindicator":22,"./session":23,"./synclist":25,"./user":27,"./util":30,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214,"twilio-ems-client":229,"twilio-mcs-client":235,"twilio-notifications":242,"twilio-sync":253,"twilio-transport":273,twilsock:276}],4:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function s(t,c){(0,a.default)(this,s),this.options=(c=c||{}).Chat||c.IPMessaging||c||{};var u=this.options.apiUri||this.options.typingUri||"https://aim.twilio.com";this.token=t,this.baseUrl=u}return(0,r.default)(s,[{key:"updateToken",value:function(t){this.token=t}},{key:"typingIndicatorUri",get:function(){return this.baseUrl+"/v1/typing"}},{key:"typingIndicatorTimeoutDefault",get:function(){return 5e3}},{key:"httpCacheIntervalDefault",get:function(){return"PT5S"}},{key:"consumptionReportIntervalDefault",get:function(){return"PT5S"}},{key:"userInfosToSubscribeDefault",get:function(){return 100}},{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}},{key:"backoffConfigOverride",get:function(){return this.options.backoffConfigOverride}},{key:"retryWhenThrottledDefault",get:function(){return!0}},{key:"retryWhenThrottledOverride",get:function(){return this.options.retryWhenThrottledOverride}},{key:"typingIndicatorTimeoutOverride",get:function(){return this.options.typingIndicatorTimeoutOverride}},{key:"httpCacheIntervalOverride",get:function(){return this.options.httpCacheIntervalOverride}},{key:"consumptionReportIntervalOverride",get:function(){return this.options.consumptionReportIntervalOverride}},{key:"userInfosToSubscribeOverride",get:function(){return this.options.userInfosToSubscribeOverride}}]),s}();h.Configuration=n},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],5:[function(e,g,h){"use strict";var a=f(e("babel-runtime/regenerator")),r=f(e("babel-runtime/core-js/json/stringify")),p=f(e("babel-runtime/core-js/set")),n=f(e("babel-runtime/core-js/map")),s=f(e("babel-runtime/core-js/object/get-prototype-of")),t=f(e("babel-runtime/helpers/classCallCheck")),c=f(e("babel-runtime/helpers/createClass")),u=f(e("babel-runtime/helpers/possibleConstructorReturn")),o=f(e("babel-runtime/helpers/inherits")),l=f(e("babel-runtime/core-js/promise"));function f(_){return _&&_.__esModule?_:{default:_}}var w=function(_,E,y,m){return new(y||(y=l.default))(function(R,F){function B(U){try{Q(m.next(U))}catch(N){F(N)}}function J(U){try{Q(m.throw(U))}catch(N){F(N)}}function Q(U){U.done?R(U.value):new y(function(N){N(U.value)}).then(B,J)}Q((m=m.apply(_,E||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var k=e("events"),O=e("../logger"),M=e("../channel");h.Channel=M.Channel;var b=O.Logger.scope(""),A=function(_){function E(y){(0,t.default)(this,E);var m=(0,u.default)(this,(E.__proto__||(0,s.default)(E)).call(this));return m.services=y,m.channels=new n.default,m.thumbstones=new p.default,m.syncListFetched=!1,m}return(0,o.default)(E,_),(0,c.default)(E,[{key:"getMap",value:function(){var y=this;return this.services.session.getMyChannelsId().then(function(m){return y.services.syncClient.map({uniqueName:m,mode:"open"})})}},{key:"addChannel",value:function(y){return w(this,void 0,void 0,a.default.mark(function m(){var R,F,B,J,Q;return a.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.services.session.addCommand("createChannel",{friendlyName:y.friendlyName,uniqueName:y.uniqueName,type:y.isPrivate?"private":"public",attributes:(0,r.default)(y.attributes)});case 2:if(B="channel"in(R=U.sent)?R.channel:null,J=this.channels.get(F="channelSid"in R?R.channelSid:null))return U.next=9,J._subscribe();U.next=10;break;case 9:return U.abrupt("return",J);case 10:return Q=new M.Channel(this.services,{channel:B,name:null,entityName:null,uniqueName:null,attributes:null,createdBy:null,friendlyName:null,lastConsumedMessageIndex:null,type:y.isPrivate?"private":"public",dateCreated:null,dateUpdated:null},F),this.channels.set(Q.sid,Q),this.registerForEvents(Q),U.next=15,Q._subscribe();case 15:return this.emit("channelAdded",Q),U.abrupt("return",Q);case 17:case"end":return U.stop()}},m,this)}))}},{key:"fetchChannels",value:function(){var y=this;this.getMap().then(function(m){return w(y,void 0,void 0,a.default.mark(function R(){var F,B,J=this;return a.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return m.on("itemAdded",function(U){J.upsertChannel("sync",U.key,U.value)}),m.on("itemRemoved",function(U){J.syncListFetched||J.thumbstones.add(U);var N=J.channels.get(U);N&&("joined"!==N.status&&"invited"!==N.status||(N._setStatus("known","sync"),J.emit("channelLeft",N)),N.isPrivate&&(J.channels.delete(U),J.emit("channelRemoved",N)))}),m.on("itemUpdated",function(U){J.upsertChannel("sync",U.key,U.value)}),F=[],Q.next=6,this.services.syncList.getPage();case 6:(B=Q.sent).items.forEach(function(U){F.push(J.upsertChannel("chat",U.channel_sid,U.descriptor))});case 9:if(B.hasNextPage)return Q.next=12,B.nextPage();Q.next=16;break;case 12:(B=Q.sent).items.forEach(function(U){F.push(J.upsertChannel("chat",U.channel_sid,U.descriptor))}),Q.next=9;break;case 16:return Q.abrupt("return",l.default.all(F));case 17:case"end":return Q.stop()}},R,this)}))}).then(function(){y.syncListFetched=!0,y.thumbstones.clear(),b.debug("Channels list fetched")}).then(function(){return y}).catch(function(m){throw b.error("Failed to get channels list",m),m})}},{key:"_wrapPaginator",value:function(y,m){var R=this;return m(y.items).then(function(F){return{items:F,hasNextPage:y.hasNextPage,hasPrevPage:y.hasPrevPage,nextPage:function(){return y.nextPage().then(function(B){return R._wrapPaginator(B,m)})},prevPage:function(){return y.prevPage().then(function(B){return R._wrapPaginator(B,m)})}}})}},{key:"getChannels",value:function(y){var m=this;return this.getMap().then(function(R){return R.getItems(y)}).then(function(R){return m._wrapPaginator(R,function(F){return l.default.all(F.map(function(B){return m.upsertChannel("sync",B.key,B.value)}))})})}},{key:"getChannel",value:function(y){var m=this;return this.getMap().then(function(R){return R.getItems({key:y})}).then(function(R){return R.items.map(function(F){return m.upsertChannel("sync",F.key,F.value)})}).then(function(R){return 0<R.length?R[0]:null})}},{key:"pushChannel",value:function(y){var m=y.sid;return this.upsertChannel("chat",m,{name:null,entityName:null,lastConsumedMessageIndex:y.lastConsumedMessageIndex,type:y.type,status:y.status,friendlyName:y.friendlyName,dateUpdated:y.dateUpdated,dateCreated:y.dateCreated,uniqueName:y.uniqueName,createdBy:y.createdBy,attributes:y.attributes,channel:y.channel,sid:m})}},{key:"upsertChannel",value:function(y,m,R){var F=this;b.trace("upsertChannel(sid="+m+", data=",R);var B=this.channels.get(m);return B?(b.trace("upsertChannel: channel "+m+" is known and it's status is known from source "+B._statusSource()+" and update came from source "+y,B),void 0===B._statusSource()||y===B._statusSource()||"sync"===y?"joined"===R.status&&"joined"!==B.status?(B._setStatus("joined",y),void 0!==R.lastConsumedMessageIndex&&B._update({lastConsumedMessageIndex:R.lastConsumedMessageIndex}),B._subscribe().then(function(){F.emit("channelJoined",B)})):"invited"===R.status&&"invited"!==B.status?(B._setStatus("invited",y),B._subscribe().then(function(){F.emit("channelInvited",B)})):"known"!==R.status||"invited"!==B.status&&"joined"!==B.status?"notParticipating"!==R.status&&"known"!==R.status||"private"!==R.type?B._update(R):B._subscribe():(B._setStatus("known",y),B._update(R),B._subscribe().then(function(){F.emit("channelLeft",B)})):b.trace("upsertChannel: channel is known from sync and came from chat, ignoring",{sid:m,data:R.status,channel:B.status}),B._subscribe().then(function(){return B})):"chat"===y&&this.thumbstones.has(m)?void b.trace("upsertChannel: channel is deleted and came again from chat, ignoring",m):(b.trace("upsertChannel: creating local channel object with sid "+m,R),B=new M.Channel(this.services,R,m),this.registerForEvents(B),this.channels.set(m,B),B._subscribe().then(function(){return F.emit("channelAdded",B),"joined"===R.status?(B._setStatus("joined",y),F.emit("channelJoined",B)):"invited"===R.status&&(B._setStatus("invited",y),F.emit("channelInvited",B)),B}))}},{key:"onChannelRemoved",value:function(y){var m=this.channels.get(y);m&&(this.channels.delete(y),this.emit("channelRemoved",m))}},{key:"registerForEvents",value:function(y){var m=this;y.on("removed",function(){return m.onChannelRemoved(y.sid)}),y.on("updated",function(){return m.emit("channelUpdated",y)}),y.on("memberJoined",this.emit.bind(this,"memberJoined")),y.on("memberLeft",this.emit.bind(this,"memberLeft")),y.on("memberUpdated",this.emit.bind(this,"memberUpdated")),y.on("messageAdded",this.emit.bind(this,"messageAdded")),y.on("messageUpdated",this.emit.bind(this,"messageUpdated")),y.on("messageRemoved",this.emit.bind(this,"messageRemoved")),y.on("typingStarted",this.emit.bind(this,"typingStarted")),y.on("typingEnded",this.emit.bind(this,"typingEnded"))}}]),E}(k.EventEmitter);h.Channels=A},{"../channel":1,"../logger":14,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/core-js/set":47,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],6:[function(e,g,h){"use strict";var a=u(e("babel-runtime/regenerator")),r=u(e("babel-runtime/core-js/object/get-prototype-of")),p=u(e("babel-runtime/helpers/classCallCheck")),n=u(e("babel-runtime/helpers/createClass")),s=u(e("babel-runtime/helpers/possibleConstructorReturn")),t=u(e("babel-runtime/helpers/inherits")),c=u(e("babel-runtime/core-js/promise"));function u(O){return O&&O.__esModule?O:{default:O}}var o=function(O,M,b,A){return new(b||(b=c.default))(function(_,E){function y(F){try{R(A.next(F))}catch(B){E(B)}}function m(F){try{R(A.throw(F))}catch(B){E(B)}}function R(F){F.done?_(F.value):new b(function(B){B(F.value)}).then(y,m)}R((A=A.apply(O,M||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var l=e("events"),f=e("../member"),w=e("../logger").Logger.scope("Members"),k=function(O){function M(b,A,_){(0,p.default)(this,M);var E=(0,s.default)(this,(M.__proto__||(0,r.default)(M)).call(this));return E.services=A,E.channel=b,E.members=_,E}return(0,t.default)(M,O),(0,n.default)(M,[{key:"unsubscribe",value:function(){return o(this,void 0,void 0,a.default.mark(function b(){return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.rosterEntityPromise)return A.next=3,this.rosterEntityPromise;A.next=6;break;case 3:A.sent.close(),this.rosterEntityPromise=null;case 6:case"end":return A.stop()}},b,this)}))}},{key:"subscribe",value:function(b){var A=this;return this.rosterEntityPromise=this.rosterEntityPromise||this.services.syncClient.map({uniqueName:b,mode:"open"}).then(function(_){_.on("itemAdded",function(y){A.upsertMember(y.key,y.value).then(function(m){A.emit("memberJoined",m)})}),_.on("itemRemoved",function(y){if(A.members.has(y)){var m=A.members.get(y);A.members.delete(y),A.emit("memberLeft",m)}}),_.on("itemUpdated",function(y){A.upsertMember(y.key,y.value)});var E=[];return _.forEach(function(y){E.push(A.upsertMember(y.key,y.value))}).then(function(){return c.default.all(E)}).then(function(){return _})}).catch(function(_){throw A.rosterEntityPromise=null,w.error("Failed to get roster object for channel",A.channel.sid,_),_})}},{key:"upsertMember",value:function(b,A){return o(this,void 0,void 0,a.default.mark(function _(){var E,y=this;return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(E=this.members.get(b))return m.abrupt("return",E._update(A));m.next=3;break;case 3:return E=new f.Member(this.services,this.channel,A,b),this.members.set(b,E),E.on("updated",function(){return y.emit("memberUpdated",E)}),m.abrupt("return",E);case 7:case"end":return m.stop()}},_,this)}))}},{key:"getMembers",value:function(){var b=this;return this.rosterEntityPromise.then(function(){var A=[];return b.members.forEach(function(_){return A.push(_)}),A})}},{key:"add",value:function(b){return this.services.session.addCommand("addMember",{channelSid:this.channel.sid,username:b})}},{key:"invite",value:function(b){return this.services.session.addCommand("inviteMember",{channelSid:this.channel.sid,username:b})}},{key:"remove",value:function(b){return this.services.session.addCommand("removeMember",{channelSid:this.channel.sid,username:b})}}]),M}(l.EventEmitter);h.Members=k},{"../logger":14,"../member":16,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],7:[function(e,g,h){"use strict";var a=l(e("babel-runtime/core-js/json/stringify")),r=l(e("babel-runtime/regenerator")),p=l(e("babel-runtime/core-js/map")),n=l(e("babel-runtime/core-js/object/get-prototype-of")),s=l(e("babel-runtime/helpers/classCallCheck")),t=l(e("babel-runtime/helpers/createClass")),c=l(e("babel-runtime/helpers/possibleConstructorReturn")),u=l(e("babel-runtime/helpers/inherits")),o=l(e("babel-runtime/core-js/promise"));function l(_){return _&&_.__esModule?_:{default:_}}var f=function(_,E,y,m){return new(y||(y=o.default))(function(R,F){function B(U){try{Q(m.next(U))}catch(N){F(N)}}function J(U){try{Q(m.throw(U))}catch(N){F(N)}}function Q(U){U.done?R(U.value):new y(function(N){N(U.value)}).then(B,J)}Q((m=m.apply(_,E||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var w=e("events"),k=e("../logger"),O=e("../message"),M=e("isomorphic-form-data"),b=k.Logger.scope(""),A=function(_){function E(y,m){(0,s.default)(this,E);var R=(0,c.default)(this,(E.__proto__||(0,n.default)(E)).call(this));return R.channel=y,R.services=m,R.messagesByIndex=new p.default,R.messagesListPromise=null,R}return(0,u.default)(E,_),(0,t.default)(E,[{key:"subscribe",value:function(y){var m=this;return this.messagesListPromise=this.messagesListPromise||this.services.syncClient.list({uniqueName:y,mode:"open"}).then(function(R){return R.on("itemAdded",function(F){var B=new O.Message(m.channel,m.services,F.index,F.value);m.messagesByIndex.has(B.index)?b.debug("Message arrived, but already known and ignored",m.channel.sid,B.index):(m.messagesByIndex.set(B.index,B),B.on("updated",function(){return m.emit("messageUpdated",B)}),m.emit("messageAdded",B))}),R.on("itemRemoved",function(F){if(m.messagesByIndex.has(F)){var B=m.messagesByIndex.get(F);m.messagesByIndex.delete(B.index),B.removeAllListeners("updated"),m.emit("messageRemoved",B)}}),R.on("itemUpdated",function(F){var B=m.messagesByIndex.get(F.index);B&&B._update(F.value)}),R}).catch(function(R){throw m.messagesListPromise=null,b.error("Failed to get messages object for channel",m.channel.sid,R),R})}},{key:"unsubscribe",value:function(){return f(this,void 0,void 0,r.default.mark(function y(){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.messagesListPromise)return m.next=3,this.messagesListPromise;m.next=6;break;case 3:m.sent.close(),this.messagesListPromise=null;case 6:case"end":return m.stop()}},y,this)}))}},{key:"send",value:function(y){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,r.default.mark(function R(){return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(b.debug("Sending text message",y,m),m.constructor!==Object)throw new Error("Attributes must be a valid JSON object");F.next=3;break;case 3:return F.abrupt("return",this.services.session.addCommand("sendMessage",{channelSid:this.channel.sid,text:y,attributes:(0,a.default)(m)}));case 4:case"end":return F.stop()}},R,this)}))}},{key:"sendMedia",value:function(y){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,r.default.mark(function R(){var F,B;return r.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(b.debug("Sending media message",y,m),m.constructor!==Object)throw new Error("Attributes must be a valid JSON object");J.next=3;break;case 3:if(F=void 0,y instanceof M)return b.debug("Sending media message as FormData",y,m),J.next=8,this.services.mcsClient.postFormData(y);J.next=11;break;case 8:F=J.sent,J.next=16;break;case 11:return b.debug("Sending media message as SendMediaOptions",y,m),B=y,J.next=15,this.services.mcsClient.post(B.contentType,B.media);case 15:F=J.sent;case 16:return J.abrupt("return",this.services.session.addCommand("sendMediaMessage",{channelSid:this.channel.sid,mediaSid:F.sid,attributes:(0,a.default)(m)}));case 17:case"end":return J.stop()}},R,this)}))}},{key:"getMessages",value:function(y,m,R){return this._getMessages(y,m=void 0!==m?m:"end",R=R||"backwards")}},{key:"wrapPaginator",value:function(y,m,R){var F=this,B="desc"===y,J=function(){return m.nextPage().then(function(U){return F.wrapPaginator(y,U,R)})},Q=function(){return m.prevPage().then(function(U){return F.wrapPaginator(y,U,R)})};return R(m.items).then(function(U){return{items:U.sort(function(N,D){return N.index-D.index}),hasPrevPage:B?m.hasNextPage:m.hasPrevPage,hasNextPage:B?m.hasPrevPage:m.hasNextPage,prevPage:B?J:Q,nextPage:B?Q:J}})}},{key:"_upsertMessage",value:function(y,m){var R=this,F=this.messagesByIndex.get(y);if(F)return F;var B=new O.Message(this.channel,this.services,y,m);return this.messagesByIndex.set(B.index,B),B.on("updated",function(){return R.emit("messageUpdated",B)}),B}},{key:"_getMessages",value:function(y,m,R){var F=this;m=void 0!==m?m:"end",y=y||30;var B="backwards"===R?"desc":"asc";return this.messagesListPromise.then(function(J){return J.getItems({from:"end"!==m?m:void 0,pageSize:y,order:B})}).then(function(J){return F.wrapPaginator(B,J,function(Q){return o.default.all(Q.map(function(U){return F._upsertMessage(U.index,U.value)}))})})}}]),E}(w.EventEmitter);h.Messages=A},{"../logger":14,"../message":17,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214,"isomorphic-form-data":216}],8:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(f){return f&&f.__esModule?f:{default:f}}var t=function(f,w,k,O){return new(k||(k=n.default))(function(M,b){function A(y){try{E(O.next(y))}catch(m){b(m)}}function _(y){try{E(O.throw(y))}catch(m){b(m)}}function E(y){y.done?M(y.value):new k(function(m){m(y.value)}).then(A,_)}E((O=O.apply(f,w||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=e("../util/index"),u=e("../restpaginator"),o=e("../channeldescriptor"),l=function(){function f(w,k,O){(0,r.default)(this,f),this.client=w,this.services=k,this.url=O}return(0,p.default)(f,[{key:"getChannels",value:function(){var w=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t(this,void 0,void 0,a.default.mark(function k(){var O,M,b=this;return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return O=new c.UriBuilder(this.url).arg("PageToken",w.pageToken).build(),A.next=3,this.services.network.get(O);case 3:return A.abrupt("return",new u.RestPaginator((M=A.sent).body.channels.map(function(_){return new o.ChannelDescriptor(b.client,_)}),function(_){return b.getChannels({pageToken:_})},M.body.meta.previous_token,M.body.meta.next_token));case 5:case"end":return A.stop()}},k,this)}))}},{key:"getChannelBySid",value:function(w){return t(this,void 0,void 0,a.default.mark(function k(){var O;return a.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return O=new c.UriBuilder(this.url).path(w).build(),b.next=3,this.services.network.get(O);case 3:return b.abrupt("return",new o.ChannelDescriptor(this.client,b.sent.body));case 5:case"end":return b.stop()}},k,this)}))}},{key:"getChannelByUniqueName",value:function(w){return t(this,void 0,void 0,a.default.mark(function k(){var O;return a.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return O=new c.UriBuilder(this.url).path(w).build(),b.next=3,this.services.network.get(O);case 3:return b.abrupt("return",new o.ChannelDescriptor(this.client,b.sent.body));case 5:case"end":return b.stop()}},k,this)}))}}]),f}();h.PublicChannels=l},{"../channeldescriptor":2,"../restpaginator":19,"../util/index":30,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],9:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(f){return f&&f.__esModule?f:{default:f}}var t=function(f,w,k,O){return new(k||(k=n.default))(function(M,b){function A(y){try{E(O.next(y))}catch(m){b(m)}}function _(y){try{E(O.throw(y))}catch(m){b(m)}}function E(y){y.done?M(y.value):new k(function(m){m(y.value)}).then(A,_)}E((O=O.apply(f,w||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=e("../util/index"),u=e("../restpaginator"),o=e("../channeldescriptor"),l=function(){function f(w,k,O){(0,r.default)(this,f),this.client=w,this.services=k,this.url=O}return(0,p.default)(f,[{key:"getChannels",value:function(){var w=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t(this,void 0,void 0,a.default.mark(function k(){var O,M,b=this;return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return O=new c.UriBuilder(this.url).arg("PageToken",w.pageToken).build(),A.next=3,this.services.network.get(O);case 3:return A.abrupt("return",new u.RestPaginator((M=A.sent).body.channels.map(function(_){return new o.ChannelDescriptor(b.client,_)}),function(_){return b.getChannels({pageToken:_})},M.body.meta.previous_token,M.body.meta.next_token));case 5:case"end":return A.stop()}},k,this)}))}}]),f}();h.UserChannels=l},{"../channeldescriptor":2,"../restpaginator":19,"../util/index":30,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],10:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(f){return f&&f.__esModule?f:{default:f}}var t=function(f,w,k,O){return new(k||(k=n.default))(function(M,b){function A(y){try{E(O.next(y))}catch(m){b(m)}}function _(y){try{E(O.throw(y))}catch(m){b(m)}}function E(y){y.done?M(y.value):new k(function(m){m(y.value)}).then(A,_)}E((O=O.apply(f,w||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=e("../util/index"),u=e("../restpaginator"),o=e("../userdescriptor"),l=function(){function f(w,k){(0,r.default)(this,f),this.services=w,this.url=k}return(0,p.default)(f,[{key:"getUserDescriptor",value:function(w){return t(this,void 0,void 0,a.default.mark(function k(){var O;return a.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return O=new c.UriBuilder(this.url).path(w).build(),b.next=3,this.services.network.get(O);case 3:return b.abrupt("return",new o.UserDescriptor(this.services,b.sent.body));case 5:case"end":return b.stop()}},k,this)}))}},{key:"getChannelUserDescriptors",value:function(w){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t(this,void 0,void 0,a.default.mark(function O(){var M,b,A=this;return a.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return M=new c.UriBuilder(this.url).arg("ChannelSid",w).arg("PageToken",k.pageToken).build(),_.next=3,this.services.network.get(M);case 3:return _.abrupt("return",new u.RestPaginator((b=_.sent).body.users.map(function(E){return new o.UserDescriptor(A.services,E)}),function(E){return A.getChannelUserDescriptors(w,E)},b.body.meta.prev_token,b.body.meta.next_token));case 5:case"end":return _.stop()}},O,this)}))}}]),f}();h.UserDescriptors=l},{"../restpaginator":19,"../userdescriptor":28,"../util/index":30,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],11:[function(e,g,h){"use strict";var a=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/core-js/map")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(M){return M&&M.__esModule?M:{default:M}}var l=function(M,b,A,_){return new(A||(A=u.default))(function(E,y){function m(B){try{F(_.next(B))}catch(J){y(J)}}function R(B){try{F(_.throw(B))}catch(J){y(J)}}function F(B){B.done?E(B.value):new A(function(J){J(B.value)}).then(m,R)}F((_=_.apply(M,b||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("events"),w=e("../user"),k=e("./userdescriptors"),O=function(M){function b(A){(0,n.default)(this,b);var _=(0,t.default)(this,(b.__proto__||(0,p.default)(b)).call(this));return _.services=A,_.fifoStack=[],_.fifoStackMaxLength=100,_.myself=new w.User(null,null,_.services),_.myself.on("updated",function(){return _.emit("userUpdated",_.myself)}),_.myself.on("userSubscribed",function(){return _.emit("userSubscribed",_.myself)}),_.myself.on("userUnsubscribed",function(){_.emit("userUnsubscribed",_.myself),_.myself._ensureFetched()}),_.services=A,_.subscribedUsers=new r.default,_.userDescriptorsPromise=_.services.session.getSessionLinks().then(function(E){return _.userDescriptors=new k.UserDescriptors({users:_,network:_.services.network},E.usersUrl),_.userDescriptors}),_.services.session.getMaxUserInfosToSubscribe().then(function(E){_.fifoStackMaxLength=E}),_.services.session.getUsersData().then(function(E){return _.myself.identity=E.identity,_.myself.entityName=E.user,_.myself._ensureFetched()}),_}return(0,c.default)(b,M),(0,s.default)(b,[{key:"handleUnsubscribeUser",value:function(A){this.subscribedUsers.has(A.identity)&&this.subscribedUsers.delete(A.identity);var _=-1;this.fifoStack.find(function(E,y){return E==A.identity&&(_=y,!0)})&&this.fifoStack.splice(_,1),this.emit("userUnsubscribed",A)}},{key:"handleSubscribeUser",value:function(A){this.subscribedUsers.has(A.identity)||(this.fifoStack.length>=this.fifoStackMaxLength&&this.subscribedUsers.get(this.fifoStack.shift()).unsubscribe(),this.fifoStack.push(A.identity),this.subscribedUsers.set(A.identity,A),this.emit("userSubscribed",A))}},{key:"getUser",value:function(A){var _=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return l(this,void 0,void 0,a.default.mark(function E(){var y,R=this;return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.services.session.getUsersData();case 2:return F.next=4,this.myself._ensureFetched();case 4:if(A==this.myself.identity)return F.abrupt("return",this.myself);F.next=6;break;case 6:if(y=this.subscribedUsers.get(A)){F.next=19;break}if(_){F.next=13;break}return F.next=11,this.getUserDescriptor(A);case 11:_=F.sent._getDescriptor().sync_unique_name;case 13:return(y=new w.User(A,_,this.services)).on("updated",function(){return R.emit("userUpdated",y)}),y.on("userSubscribed",function(){return R.handleSubscribeUser(y)}),y.on("userUnsubscribed",function(){return R.handleUnsubscribeUser(y)}),F.next=19,y._ensureFetched();case 19:return F.abrupt("return",y);case 20:case"end":return F.stop()}},E,this)}))}},{key:"getUserDescriptor",value:function(A){return l(this,void 0,void 0,a.default.mark(function _(){return a.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.userDescriptorsPromise;case 2:return E.abrupt("return",this.userDescriptors.getUserDescriptor(A));case 3:case"end":return E.stop()}},_,this)}))}},{key:"getChannelUserDescriptors",value:function(A){return l(this,void 0,void 0,a.default.mark(function _(){return a.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.userDescriptorsPromise;case 2:return E.abrupt("return",this.userDescriptors.getChannelUserDescriptors(A));case 3:case"end":return E.stop()}},_,this)}))}},{key:"getSubscribedUsers",value:function(){return l(this,void 0,void 0,a.default.mark(function A(){var _;return a.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.services.session.getUsersData();case 2:return E.next=4,this.myself._ensureFetched();case 4:return _=[this.myself],this.subscribedUsers.forEach(function(y){return _.push(y)}),E.abrupt("return",_);case 7:case"end":return E.stop()}},A,this)}))}}]),b}(f.EventEmitter);h.Users=O},{"../user":27,"./userdescriptors":10,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],12:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0});var n=function s(){(0,p.default)(this,s)};n.TYPING_INDICATOR="twilio.ipmsg.typing_indicator",n.NEW_MESSAGE="twilio.channel.new_message",n.ADDED_TO_CHANNEL="twilio.channel.added_to_channel",n.INVITED_TO_CHANNEL="twilio.channel.invited_to_channel",n.REMOVED_FROM_CHANNEL="twilio.channel.removed_from_channel",n.CONSUMPTION_UPDATE="twilio.channel.consumption_update",h.NotificationTypes=n},{"babel-runtime/helpers/classCallCheck":50}],13:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0});var n=function s(){(0,p.default)(this,s)};n.HTTP_200_OK=200,n.HTTP_400_BAD_REQUEST=400,n.HTTP_404_NOT_FOUND=404,n.ACCESS_FORBIDDEN_FOR_IDENTITY=54007,n.LIST_NOT_FOUND=54150,h.ResponseCodes=n},{"babel-runtime/helpers/classCallCheck":50}],14:[function(e,g,h){"use strict";var a=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/createClass")),p=n(e("babel-runtime/core-js/array/from"));function n(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var s=e("loglevel");function t(u,o){return[u].concat((0,p.default)(o))}var c=function(){function u(){(0,a.default)(this,u),this.prefix=""}return(0,r.default)(u,[{key:"setLevel",value:function(o){s.setLevel(o)}},{key:"trace",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.trace.apply(null,t("Chat T:"+this.prefix,l))}},{key:"debug",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.debug.apply(null,t("Chat D:"+this.prefix,l))}},{key:"info",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.info.apply(null,t("Chat I:"+this.prefix,l))}},{key:"warn",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.warn.apply(null,t("Chat W:"+this.prefix,l))}},{key:"error",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.error.apply(null,t("Chat E:"+this.prefix,l))}}],[{key:"scope",value:function(o){return new u}},{key:"setLevel",value:function(o){s.setLevel(o)}},{key:"trace",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.trace.apply(null,t("Chat T:",l))}},{key:"debug",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.debug.apply(null,t("Chat D:",l))}},{key:"info",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.info.apply(null,t("Chat I:",l))}},{key:"warn",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.warn.apply(null,t("Chat W:",l))}},{key:"error",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.error.apply(null,t("Chat E:",l))}}]),u}();h.Logger=c},{"babel-runtime/core-js/array/from":31,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,loglevel:219}],15:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function u(o,l){(0,r.default)(this,u),this.mcsMedia=null,this.services=l,this.state={sid:o.sid,filename:o.filename,contentType:o.contentType,size:o.size}}return(0,p.default)(u,[{key:"getContentUrl",value:function(){return function(u,o,l,f){return new(l||(l=n.default))(function(w,k){function O(A){try{b(f.next(A))}catch(_){k(_)}}function M(A){try{b(f.throw(A))}catch(_){k(_)}}function b(A){A.done?w(A.value):new l(function(_){_(A.value)}).then(O,M)}b((f=f.apply(u,[])).next())})}(this,0,void 0,a.default.mark(function o(){return a.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.mcsMedia){l.next=8;break}if(this.services.mcsClient)return l.next=4,this.services.mcsClient.get(this.state.sid);l.next=7;break;case 4:this.mcsMedia=l.sent,l.next=8;break;case 7:throw new Error("Media Content Service is unavailable");case 8:return l.abrupt("return",this.mcsMedia.getContentUrl());case 9:case"end":return l.stop()}},o,this)}))}},{key:"sid",get:function(){return this.state.sid}},{key:"filename",get:function(){return this.state.filename}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}}]),u}();h.Media=c},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],16:[function(e,g,h){"use strict";var a=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/core-js/number/is-integer")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/possibleConstructorReturn")),t=o(e("babel-runtime/helpers/createClass")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(w){return w&&w.__esModule?w:{default:w}}var l=function(w,k,O,M){return new(O||(O=u.default))(function(b,A){function _(m){try{y(M.next(m))}catch(R){A(R)}}function E(m){try{y(M.throw(m))}catch(R){A(R)}}function y(m){m.done?b(m.value):new O(function(R){R(m.value)}).then(_,E)}y((M=M.apply(w,k||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=function(w){function k(O,M,b,A){(0,n.default)(this,k);var _=(0,s.default)(this,(k.__proto__||(0,p.default)(k)).call(this));if(_.channel=M,_.services=O,_.state={sid:A,typingTimeout:null,isTyping:!1,identity:b.identity,roleSid:b.roleSid||null,lastConsumedMessageIndex:(0,r.default)(b.lastConsumedMessageIndex)?b.lastConsumedMessageIndex:null,lastConsumptionTimestamp:b.lastConsumptionTimestamp?new Date(b.lastConsumptionTimestamp):null,userInfo:b.userInfo},!b.identity)throw new Error("Received invalid Member object from server: Missing identity.");return _}return(0,c.default)(k,w),(0,t.default)(k,[{key:"sid",get:function(){return this.state.sid}},{key:"identity",get:function(){return this.state.identity}},{key:"isTyping",get:function(){return this.state.isTyping}},{key:"lastConsumedMessageIndex",get:function(){return this.state.lastConsumedMessageIndex}},{key:"lastConsumptionTimestamp",get:function(){return this.state.lastConsumptionTimestamp}},{key:"roleSid",get:function(){return this.state.roleSid}}]),(0,t.default)(k,[{key:"_startTyping",value:function(O){var M=this;return clearTimeout(this.state.typingTimeout),this.state.isTyping=!0,this.emit("typingStarted",this),this.channel.emit("typingStarted",this),this.state.typingTimeout=setTimeout(function(){return M._endTyping()},O),this}},{key:"_endTyping",value:function(){this.state.typingTimeout&&(this.state.isTyping=!1,this.emit("typingEnded",this),this.channel.emit("typingEnded",this),clearInterval(this.state.typingTimeout),this.state.typingTimeout=null)}},{key:"_update",value:function(O){var M=!1;if(O.roleSid&&this.state.roleSid!==O.roleSid&&(this.state.roleSid=O.roleSid,M=!0),!(0,r.default)(O.lastConsumedMessageIndex)&&null!==O.lastConsumedMessageIndex||this.state.lastConsumedMessageIndex===O.lastConsumedMessageIndex||(this.state.lastConsumedMessageIndex=O.lastConsumedMessageIndex,M=!0),O.lastConsumptionTimestamp){var b=new Date(O.lastConsumptionTimestamp);this.state.lastConsumptionTimestamp&&this.state.lastConsumptionTimestamp.getTime()===b.getTime()||(this.state.lastConsumptionTimestamp=b,M=!0)}return M&&this.emit("updated",this),this}},{key:"getUserDescriptor",value:function(){return l(this,void 0,void 0,a.default.mark(function O(){return a.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",this.services.users.getUserDescriptor(this.state.identity));case 1:case"end":return M.stop()}},O,this)}))}},{key:"getUser",value:function(){return l(this,void 0,void 0,a.default.mark(function O(){return a.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",this.services.users.getUser(this.state.identity,this.state.userInfo));case 1:case"end":return M.stop()}},O,this)}))}},{key:"remove",value:function(){return this.channel.removeMember(this)}}]),k}(e("events").EventEmitter);h.Member=f},{"babel-runtime/core-js/number/is-integer":36,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],17:[function(e,g,h){"use strict";var a=o(e("babel-runtime/core-js/json/stringify")),r=o(e("babel-runtime/regenerator")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(_){return _&&_.__esModule?_:{default:_}}var l=function(_,E,y,m){return new(y||(y=u.default))(function(R,F){function B(U){try{Q(m.next(U))}catch(N){F(N)}}function J(U){try{Q(m.throw(U))}catch(N){F(N)}}function Q(U){U.done?R(U.value):new y(function(N){N(U.value)}).then(B,J)}Q((m=m.apply(_,E||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("events"),w=e("./util/index"),k=e("./logger"),O=e("./media"),M=new k.Logger;function b(_,E){try{return E?JSON.parse(E):{}}catch{return M.warn("Got malformed attributes for the message",_),{}}}var A=function(_){function E(y,m,R,F){(0,n.default)(this,E);var B=(0,t.default)(this,(E.__proto__||(0,p.default)(E)).call(this));B.channel=y,B.services=m;var J=new Date(F.timestamp);return B.state={sid:F.sid,index:R,author:F.author,body:F.text,timestamp:J,dateUpdated:F.dateUpdated?new Date(F.dateUpdated):null,lastUpdatedBy:F.lastUpdatedBy?F.lastUpdatedBy:null,attributes:b(F.sid,F.attributes),type:F.type?F.type:"text",media:F.type&&"media"===F.type&&F.media?new O.Media(F.media,B.services):null},B}return(0,c.default)(E,_),(0,s.default)(E,[{key:"_update",value:function(y){var m=!1;!y.text&&"string"!=typeof y.text||y.text===this.state.body||(this.state.body=y.text,m=!0),y.lastUpdatedBy&&y.lastUpdatedBy!==this.state.lastUpdatedBy&&(this.state.lastUpdatedBy=y.lastUpdatedBy,m=!0),y.dateUpdated&&new Date(y.dateUpdated).getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=new Date(y.dateUpdated),m=!0);var R=b(this.sid,y.attributes);w.isDeepEqual(this.state.attributes,R)||(this.state.attributes=R,m=!0),m&&this.emit("updated",this)}},{key:"remove",value:function(){return l(this,void 0,void 0,r.default.mark(function y(){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.services.session.addCommand("deleteMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString()});case 2:return m.abrupt("return",this);case 3:case"end":return m.stop()}},y,this)}))}},{key:"updateBody",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if("string"!=typeof y)throw new Error("Body <String> is a required parameter for updateBody");R.next=2;break;case 2:return R.next=4,this.services.session.addCommand("editMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString(),text:y});case 4:return R.abrupt("return",this);case 5:case"end":return R.stop()}},m,this)}))}},{key:"updateAttributes",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(void 0===y)throw new Error("Attributes is a required parameter for updateAttributes");R.next=4;break;case 4:if(y.constructor!==Object)throw new Error("Attributes must be a valid JSON object");R.next=6;break;case 6:return R.next=8,this.services.session.addCommand("editMessageAttributes",{channelSid:this.channel.sid,messageIdx:this.index,attributes:(0,a.default)(y)});case 8:return R.abrupt("return",this);case 9:case"end":return R.stop()}},m,this)}))}},{key:"sid",get:function(){return this.state.sid}},{key:"author",get:function(){return this.state.author}},{key:"body",get:function(){return this.state.body}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"index",get:function(){return this.state.index}},{key:"lastUpdatedBy",get:function(){return this.state.lastUpdatedBy}},{key:"timestamp",get:function(){return this.state.timestamp}},{key:"attributes",get:function(){return this.state.attributes}},{key:"type",get:function(){return this.state.type}},{key:"media",get:function(){return this.state.media}}]),E}(f.EventEmitter);h.Message=A},{"./logger":14,"./media":15,"./util/index":30,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],18:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0}),h.PushNotification=function n(s){(0,p.default)(this,n),this.title=s.title||null,this.body=s.body||null,this.sound=s.sound||null,this.badge=s.badge||null,this.action=s.action||null,this.type=s.type||null,this.data=s.data||{}}},{"babel-runtime/helpers/classCallCheck":50}],19:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/promise")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function t(c,u,o,l){(0,r.default)(this,t),this.state={prevToken:o,nextToken:l,source:u,items:c}}return(0,p.default)(t,[{key:"nextPage",value:function(){return this.hasNextPage?this.state.source(this.state.nextToken):a.default.reject(new Error("No next page"))}},{key:"prevPage",value:function(){return this.hasPrevPage?this.state.source(this.state.prevToken):a.default.reject(new Error("No previous page"))}},{key:"hasNextPage",get:function(){return!!this.state.nextToken}},{key:"hasPrevPage",get:function(){return!!this.state.prevToken}},{key:"items",get:function(){return this.state.items}}]),t}();h.RestPaginator=s},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],20:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/map")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function t(c){(0,r.default)(this,t),this.services=c,this.consumptionHorizonReports=new a.default,this.consumptionHorizonUpdateTimer=null}return(0,p.default)(t,[{key:"getReportInterval",value:function(){return this.services.session.getConsumptionReportInterval().then(function(c){return 1e3*c.seconds})}},{key:"delayedSendConsumptionHorizon",value:function(c){var u=this;null===this.consumptionHorizonUpdateTimer&&(this.consumptionHorizonUpdateTimer=setTimeout(function(){var o=[];u.consumptionHorizonReports.forEach(function(l){return o.push(l)}),0<o.length&&u.services.session.addCommand("consumptionReport",{report:o}),u.consumptionHorizonUpdateTimer=null,u.consumptionHorizonReports.clear()},c))}},{key:"updateLastConsumedMessageIndexForChannel",value:function(c,u){var o=this;this.consumptionHorizonReports.set(c,{channelSid:c,messageIdx:u}),this.getReportInterval().then(function(l){return o.delayedSendConsumptionHorizon(l)})}},{key:"advanceLastConsumedMessageIndexForChannel",value:function(c,u){var o=this,l=this.consumptionHorizonReports.get(c);l&&l.messageIdx>=u||(this.consumptionHorizonReports.set(c,{channelSid:c,messageIdx:u}),this.getReportInterval().then(function(f){return o.delayedSendConsumptionHorizon(f)}))}}]),t}();h.ConsumptionHorizon=s},{"babel-runtime/core-js/map":35,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],21:[function(e,g,h){"use strict";var a=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/helpers/slicedToArray")),p=o(e("babel-runtime/core-js/get-iterator")),n=o(e("babel-runtime/helpers/extends")),s=o(e("babel-runtime/core-js/map")),t=o(e("babel-runtime/helpers/classCallCheck")),c=o(e("babel-runtime/helpers/createClass")),u=o(e("babel-runtime/core-js/promise"));function o(k){return k&&k.__esModule?k:{default:k}}Object.defineProperty(h,"__esModule",{value:!0});var f=e("operation-retrier"),w=function(){function k(O,M){var b=this;(0,t.default)(this,k),this.config=O,this.services=M,this.cache=new s.default,this.cacheLifetime=0,this.services.session.getHttpCacheInterval().then(function(A){b.cacheLifetime=1e3*A.seconds,b.cleanupCache()})}return(0,c.default)(k,[{key:"backoffConfig",value:function(){return(0,n.default)(this.config.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return void 0!==this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:void 0!==this.config.retryWhenThrottledDefault&&this.config.retryWhenThrottledDefault}},{key:"isExpired",value:function(O){return!this.cacheLifetime||Date.now()-O>this.cacheLifetime}},{key:"cleanupCache",value:function(){var O=!0,M=!1,b=void 0;try{for(var A,_=(0,p.default)(this.cache);!(O=(A=_.next()).done);O=!0){var E=(0,r.default)(A.value,2),y=E[0];this.isExpired(E[1].timestamp)&&this.cache.delete(y)}}catch(R){M=!0,b=R}finally{try{!O&&_.return&&_.return()}finally{if(M)throw b}}0===this.cache.size&&clearInterval(this.timer)}},{key:"pokeTimer",value:function(){var O=this;this.timer=this.timer||setInterval(function(){return O.cleanupCache()},2*this.cacheLifetime)}},{key:"executeWithRetry",value:function(O){var M=this,b=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return new u.default(function(A,_){var E=[502,503,504];b&&E.push(429);var y=new f.default(M.backoffConfig());y.on("attempt",function(){O().then(function(m){return y.succeeded(m)}).catch(function(m){-1<E.indexOf(m.status)||"Twilsock disconnected"===m.message?y.failed(m):(y.removeAllListeners(),y.cancel(),_(m))})}),y.on("succeeded",function(m){A(m)}),y.on("cancelled",function(m){return _(m)}),y.on("failed",function(m){return _(m)}),y.start()})}},{key:"get",value:function(O){return function(k,O,M,b){return new(M||(M=u.default))(function(A,_){function E(R){try{m(b.next(R))}catch(F){_(F)}}function y(R){try{m(b.throw(R))}catch(F){_(F)}}function m(R){R.done?A(R.value):new M(function(F){F(R.value)}).then(E,y)}m((b=b.apply(k,[])).next())})}(this,0,void 0,a.default.mark(function M(){var b,A,_,E=this;return a.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if((b=this.cache.get(O))&&!this.isExpired(b.timestamp))return y.abrupt("return",b.response);y.next=3;break;case 3:return A={"X-Twilio-Token":this.config.token},y.next=6,this.executeWithRetry(function(){return E.services.transport.get(O,A)},this.retryWhenThrottled());case 6:return this.cache.set(O,{response:_=y.sent,timestamp:Date.now()}),this.pokeTimer(),y.abrupt("return",_);case 10:case"end":return y.stop()}},M,this)}))}}]),k}();h.Network=w},{"babel-runtime/core-js/get-iterator":32,"babel-runtime/core-js/map":35,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/slicedToArray":55,"babel-runtime/regenerator":57,"operation-retrier":220}],22:[function(e,g,h){"use strict";var a=s(e("babel-runtime/core-js/promise")),r=s(e("babel-runtime/core-js/map")),p=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass"));function s(l){return l&&l.__esModule?l:{default:l}}Object.defineProperty(h,"__esModule",{value:!0});var t=e("../logger"),c=e("../interfaces/notificationtypes"),u=t.Logger.scope("TypingIndicator"),o=function(){function l(f,w,k){(0,p.default)(this,l),this.config=f,this.services=w,this.getChannel=k,this.serviceTypingTimeout=null,this.sentUpdates=new r.default}return(0,n.default)(l,[{key:"initialize",value:function(){var f=this;this.services.notificationClient.subscribe(c.NotificationTypes.TYPING_INDICATOR,"twilsock"),this.services.notificationClient.on("message",function(w,k){w===c.NotificationTypes.TYPING_INDICATOR&&f.handleRemoteTyping(k)})}},{key:"handleRemoteTyping",value:function(f){var w=this;u.trace("Got new typing indicator ",f),this.getChannel(f.channel_sid).then(function(k){k&&k.members.forEach(function(O){O.identity===f.identity&&O._startTyping(w.typingTimeout)})}).catch(function(k){throw u.error(k),k})}},{key:"send",value:function(f){var w=this.sentUpdates.get(f);return w&&w>Date.now()-this.typingTimeout?a.default.resolve():(this.sentUpdates.set(f,Date.now()),this._send(f))}},{key:"_send",value:function(f){var w=this;return u.trace("Sending typing indicator"),this.services.transport.post(this.config.typingIndicatorUri,{"X-Twilio-Token":this.config.token,"Content-Type":"application/x-www-form-urlencoded"},"ChannelSid="+f).then(function(b){b.body.hasOwnProperty("typing_timeout")&&(w.serviceTypingTimeout=1e3*b.body.typing_timeout)}).catch(function(b){throw u.error("Failed to send typing indicator:",b),b})}},{key:"typingTimeout",get:function(){return this.config.typingIndicatorTimeoutOverride||this.serviceTypingTimeout||this.config.typingIndicatorTimeoutDefault}}]),l}();h.TypingIndicator=o},{"../interfaces/notificationtypes":12,"../logger":14,"babel-runtime/core-js/map":35,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],23:[function(e,g,h){"use strict";var a=c(e("babel-runtime/regenerator")),r=c(e("babel-runtime/helpers/extends")),p=c(e("babel-runtime/core-js/map")),n=c(e("babel-runtime/helpers/createClass")),s=c(e("babel-runtime/helpers/classCallCheck")),t=c(e("babel-runtime/core-js/promise"));function c(y){return y&&y.__esModule?y:{default:y}}var u=function(y,m,R,F){return new(R||(R=t.default))(function(B,J){function Q(D){try{N(F.next(D))}catch(ie){J(ie)}}function U(D){try{N(F.throw(D))}catch(ie){J(ie)}}function N(D){D.done?B(D.value):new R(function(ie){ie(D.value)}).then(Q,U)}N((F=F.apply(y,m||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var o=e("uuid"),l=e("platform"),f=e("durational"),w=e("./interfaces/responsecodes"),k=e("./logger"),O=e("./sessionerror"),M=e("./util/deferred"),b=e("./../package.json").version,A=k.Logger.scope("Session"),_=function y(){(0,s.default)(this,y)},E=function(){function y(m,R){(0,s.default)(this,y);var F=typeof navigator<"u"?l.parse(navigator.userAgent):l;this.services=m,this.config=R,this.sessionInfo=new M.Deferred,this.currentContext={},this.token=null,this.tokenSynced=!0,this.pendingCommands=new p.default,this.sessionStreamPromise=null,this.endpointPlatform=["js",b,F.os,F.name,F.version].join("|")}return(0,n.default)(y,[{key:"handleContextUpdate",value:function(m){var R;A.info("Session context updated"),A.debug("new session context:",m),this.currentContext=m,R=m,["identity","userInfo","links","myChannels","channels"].some(function(F){return!R.hasOwnProperty(F)})||(A.info("new session context accepted"),this.sessionInfo.set(m))}},{key:"initialize",value:function(m){var R=this;return this.token=m,this.tokenSynced=!1,this.sessionStreamPromise=this.services.syncClient.list({purpose:"com.twilio.rtd.ipmsg",context:{type:"IpMsgSession",apiVersion:"3",endpointPlatform:this.endpointPlatform,token:m}}).then(function(B){return A.info("Session created",B.sid),R.tokenSynced=!0,B.on("itemAdded",function(J){return R.processCommandResponse(J)}),B.on("itemUpdated",function(J){return R.processCommandResponse(J)}),B.on("contextUpdatedRemotely",function(J){return R.handleContextUpdate(J)}),B}).catch(function(B){throw A.error("Failed to create session",B),B}),this.sessionStreamPromise}},{key:"addCommand",value:function(m,R){return this.processCommand(m,R)}},{key:"processCommand",value:function(m,R){var F=this,B=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],J=new _;return J.request=R,J.request.action=m,J.commandId=o.v4(),A.info("Adding command: ",m,J.commandId),A.debug("command arguments:",R,B),new t.default(function(Q,U){F.sessionStreamPromise.then(function(N){return F.pendingCommands.set(J.commandId,{resolve:Q,reject:U,commandId:J.commandId,request:J.request}),N.push(J)}).then(function(){return A.debug("Command accepted by server",J.commandId)}).catch(function(N){F.pendingCommands.delete(J.commandId),A.error("Failed to add a command to the session",N),N.code!=w.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY&&N.code!==w.ResponseCodes.LIST_NOT_FOUND||!B?U(new Error("Can't add command: "+N.message)):(A.info("recreating session..."),F.initialize(F.token),Q(F.processCommand(m,R,!1)))})})}},{key:"processCommandResponse",value:function(m){if(m.value.hasOwnProperty("response")&&m.value.hasOwnProperty("commandId")&&this.pendingCommands.has(m.value.commandId)){var R=m.value,F=m.value.commandId;if(R.response.status===w.ResponseCodes.HTTP_200_OK){A.debug("Command succeeded: ",R);var B=this.pendingCommands.get(F).resolve;this.pendingCommands.delete(F),B(R.response)}else{A.error("Command failed: ",R);var J=this.pendingCommands.get(F).reject;this.pendingCommands.delete(F),J(new O.SessionError(R.response.statusText,R.response.status))}}}},{key:"updateToken",value:function(m){return this.token=m,this.tokenSynced=!1,this.syncToken()}},{key:"syncToken",value:function(){var m=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return u(this,void 0,void 0,a.default.mark(function R(){var F,B;return a.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(this.tokenSynced||this.tokenSyncInProgress)return A.trace("token is already synced or sync is in progress"),Q.abrupt("return");Q.next=3;break;case 3:return this.tokenSyncInProgress=!0,Q.prev=4,Q.next=7,this.getSessionContext();case 7:return F=Q.sent,Q.next=10,this.sessionStreamPromise;case 10:return B=Q.sent,Q.next=13,B.updateContext((0,r.default)(F,{token:this.token}));case 13:this.tokenSynced=!0,this.tokenSyncInProgress=!1,Q.next=27;break;case 17:if(Q.prev=17,Q.t0=Q.catch(4),Q.t0.code!=w.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY&&Q.t0.code!==w.ResponseCodes.LIST_NOT_FOUND||!m){Q.next=23;break}return A.info("recreating session..."),this.initialize(this.token),Q.abrupt("return",this.syncToken(!1));case 23:throw A.error("Couldn't update the token in session context",Q.t0),this.tokenSyncInProgress=!1,new O.SessionError("Couldn't update the token in session context",Q.t0.code);case 27:case"end":return Q.stop()}},R,this,[[4,17]])}))}},{key:"getSessionContext",value:function(){return this.sessionStreamPromise.then(function(m){return m.getContext()})}},{key:"getSessionLinks",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){var R;return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.sessionInfo.promise;case 2:return F.abrupt("return",{publicChannelsUrl:this.config.baseUrl+(R=F.sent).links.publicChannelsUrl,myChannelsUrl:this.config.baseUrl+R.links.myChannelsUrl,typingUrl:this.config.baseUrl+R.links.typingUrl,syncListUrl:this.config.baseUrl+R.links.syncListUrl,usersUrl:this.config.baseUrl+R.links.usersUrl,mediaServiceUrl:R.links.mediaServiceUrl});case 4:case"end":return F.stop()}},m,this)}))}},{key:"getChannelsId",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.sessionInfo.promise;case 2:return F.abrupt("return",F.sent.channels);case 4:case"end":return F.stop()}},m,this)}))}},{key:"getMyChannelsId",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.sessionInfo.promise;case 2:return F.abrupt("return",F.sent.myChannels);case 4:case"end":return F.stop()}},m,this)}))}},{key:"getMaxUserInfosToSubscribe",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){var R;return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.sessionInfo.promise;case 2:return R=F.sent,F.abrupt("return",this.config.userInfosToSubscribeOverride||R.userInfosToSubscribe||this.config.userInfosToSubscribeDefault);case 4:case"end":return F.stop()}},m,this)}))}},{key:"getUsersData",value:function(){return this.sessionInfo.promise.then(function(m){return{user:m.userInfo,identity:m.identity}})}},{key:"getConsumptionReportInterval",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){var R,F;return a.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.getSessionContext();case 2:return R=B.sent,F=this.config.consumptionReportIntervalOverride||R.consumptionReportInterval||this.config.consumptionReportIntervalDefault,B.prev=4,B.abrupt("return",f.fromString(F));case 8:return B.prev=8,B.t0=B.catch(4),A.error("Failed to parse consumption report interval",F,"using default value",this.config.consumptionReportIntervalDefault),B.abrupt("return",f.fromString(this.config.consumptionReportIntervalDefault));case 12:case"end":return B.stop()}},m,this,[[4,8]])}))}},{key:"getHttpCacheInterval",value:function(){return u(this,void 0,void 0,a.default.mark(function m(){var R,F;return a.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.getSessionContext();case 2:return R=B.sent,F=this.config.httpCacheIntervalOverride||R.httpCacheInterval||this.config.httpCacheIntervalDefault,B.prev=4,B.abrupt("return",f.fromString(F));case 8:return B.prev=8,B.t0=B.catch(4),A.error("Failed to parse cache interval",F,"using default value",this.config.httpCacheIntervalDefault),B.abrupt("return",f.fromString(this.config.httpCacheIntervalDefault));case 12:case"end":return B.stop()}},m,this,[[4,8]])}))}},{key:"identity",get:function(){return this.sessionInfo.current.identity}},{key:"reachabilityEnabled",get:function(){return this.currentContext.reachabilityEnabled}}]),y}();h.Session=E},{"./../package.json":291,"./interfaces/responsecodes":13,"./logger":14,"./sessionerror":24,"./util/deferred":29,"babel-runtime/core-js/map":35,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/regenerator":57,durational:212,platform:221,uuid:283}],24:[function(e,g,h){"use strict";var a=s(e("babel-runtime/core-js/object/get-prototype-of")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/possibleConstructorReturn")),n=s(e("babel-runtime/helpers/inherits"));function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var t=function(c){function u(o,l){(0,r.default)(this,u);var f=(0,p.default)(this,(u.__proto__||(0,a.default)(u)).call(this));return f.name=f.constructor.name,f.message=o,f.code=l,Error.captureStackTrace?Error.captureStackTrace(f,f.constructor):f.stack=(new Error).stack,f}return(0,n.default)(u,c),u}(Error);h.SessionError=t},{"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54}],25:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(f){return f&&f.__esModule?f:{default:f}}Object.defineProperty(h,"__esModule",{value:!0});var c=e("./util/index"),u=e("./restpaginator"),o=e("./synclistdescriptor"),l=function(){function f(w){(0,r.default)(this,f),this.services=w}return(0,p.default)(f,[{key:"getPage",value:function(w){return function(f,w,k,O){return new(k||(k=n.default))(function(M,b){function A(y){try{E(O.next(y))}catch(m){b(m)}}function _(y){try{E(O.throw(y))}catch(m){b(m)}}function E(y){y.done?M(y.value):new k(function(m){m(y.value)}).then(A,_)}E((O=O.apply(f,[])).next())})}(this,0,void 0,a.default.mark(function k(){var M,b,A=this;return a.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return w=w||{},_.next=3,this.services.session.getSessionLinks();case 3:return M=new c.UriBuilder(_.sent.syncListUrl).arg("PageToken",w.pageToken).build(),_.next=7,this.services.network.get(M);case 7:return _.abrupt("return",new u.RestPaginator((b=_.sent).body.channels.map(function(E){return new o.SyncListDescriptor(E)}),function(E){return A.getPage({pageToken:E})},b.body.meta.previous_token,b.body.meta.next_token));case 9:case"end":return _.stop()}},k,this)}))}}]),f}();h.SyncList=l},{"./restpaginator":19,"./synclistdescriptor":26,"./util/index":30,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],26:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0}),h.SyncListDescriptor=function n(s){(0,p.default)(this,n),this.descriptor=s,this.channel_sid=s.channel_sid,this.status=s.status,this.channel=s.channel,this.messages=s.messages,this.roster=s.roster,this.lastConsumedMessageIndex=s.last_consumed_message_index,this.status=s.status}},{"babel-runtime/helpers/classCallCheck":50}],27:[function(e,g,h){"use strict";var a=o(e("babel-runtime/core-js/json/stringify")),r=o(e("babel-runtime/regenerator")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(O){return O&&O.__esModule?O:{default:O}}var l=function(O,M,b,A){return new(b||(b=u.default))(function(_,E){function y(F){try{R(A.next(F))}catch(B){E(B)}}function m(F){try{R(A.throw(F))}catch(B){E(B)}}function R(F){F.done?_(F.value):new b(function(B){B(F.value)}).then(y,m)}R((A=A.apply(O,M||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("events"),w=e("./logger").Logger.scope("User"),k=function(O){function M(b,A,_){(0,n.default)(this,M);var E=(0,t.default)(this,(M.__proto__||(0,p.default)(M)).call(this));return E.subscribed="initializing",E.setMaxListeners(0),E.services=_,E.state={identity:b,entityName:A,friendlyName:null,attributes:{},online:null,notifiable:null},E}return(0,c.default)(M,O),(0,s.default)(M,[{key:"_update",value:function(b,A){switch(w.debug("User for",this.state.identity,"updated:",b,A),b){case"friendlyName":this.state.friendlyName=A.value;break;case"attributes":try{this.state.attributes=JSON.parse(A.value)}catch{this.state.attributes={}}break;case"reachability":this.state.online=A.online,this.state.notifiable=A.notifiable;break;default:return}this.emit("updated",this)}},{key:"_updateReachabilityInfo",value:function(b,A){var _=this;return this.services.session.reachabilityEnabled?b.get("reachability").then(A).catch(function(E){w.warn("Failed to get reachability info for ",_.state.identity,E)}):u.default.resolve()}},{key:"_fetch",value:function(){return l(this,void 0,void 0,r.default.mark(function b(){var A,_=this;return r.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(this.state.entityName){E.next=2;break}return E.abrupt("return",this);case 2:return A=function(y){return _._update(y.key,y.value)},this.promiseToFetch=this.services.syncClient.map({uniqueName:this.state.entityName,mode:"open",optimistic:!0}).then(function(y){return(_.entity=y).on("itemUpdated",A),u.default.all([y.get("friendlyName").then(A),y.get("attributes").then(A),_._updateReachabilityInfo(y,A)])}).then(function(){return w.debug("Fetched for",_.identity),_.subscribed="subscribed",_.emit("userSubscribed",_),_}).catch(function(y){throw _.promiseToFetch=null,y}),E.abrupt("return",this.promiseToFetch);case 5:case"end":return E.stop()}},b,this)}))}},{key:"_ensureFetched",value:function(){return this.promiseToFetch||this._fetch()}},{key:"updateAttributes",value:function(b){return l(this,void 0,void 0,r.default.mark(function A(){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(b&&b.constructor===Object){_.next=2;break}throw new Error("Attributes must be an object");case 2:if("unsubscribed"==this.subscribed)throw new Error("Can't modify unsubscribed object");_.next=4;break;case 4:return _.next=6,this.services.session.addCommand("editUserAttributes",{username:this.state.identity,attributes:(0,a.default)(b)});case 6:return _.abrupt("return",this);case 7:case"end":return _.stop()}},A,this)}))}},{key:"updateFriendlyName",value:function(b){return l(this,void 0,void 0,r.default.mark(function A(){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(b&&"string"!=typeof b)throw new Error("friendlyName must be string or empty");_.next=2;break;case 2:if("unsubscribed"==this.subscribed)throw new Error("Can't modify unsubscribed object");_.next=4;break;case 4:return _.next=6,this.services.session.addCommand("editUserFriendlyName",{username:this.state.identity,friendlyName:b});case 6:return _.abrupt("return",this);case 7:case"end":return _.stop()}},A,this)}))}},{key:"unsubscribe",value:function(){return l(this,void 0,void 0,r.default.mark(function b(){return r.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.promiseToFetch)return A.next=3,this.promiseToFetch;A.next=7;break;case 3:this.entity.close(),this.promiseToFetch=null,this.subscribed="unsubscribed",this.emit("userUnsubscribed",this);case 7:case"end":return A.stop()}},b,this)}))}},{key:"identity",get:function(){return this.state.identity},set:function(b){this.state.identity=b}},{key:"entityName",set:function(b){this.state.entityName=b}},{key:"attributes",get:function(){return this.state.attributes}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"online",get:function(){return this.state.online}},{key:"notifiable",get:function(){return this.state.notifiable}},{key:"isSubscribed",get:function(){return"subscribed"==this.subscribed}}]),M}(f.EventEmitter);h.User=k},{"./logger":14,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214}],28:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var n=e("./logger").Logger.scope("UserDescriptor"),s=function(){function t(c,u){(0,a.default)(this,t),this.services=c,this.descriptor=u,this.identity=u.identity,this.friendlyName=u.friendly_name,this.attributes=function(o){try{return JSON.parse(o)}catch(l){n.warn("Failed to parse user attributes",l)}return{}}(u.attributes),this.online=u.is_online,this.notifiable=u.is_notifiable}return(0,r.default)(t,[{key:"subscribe",value:function(){return this.services.users.getUser(this.identity,this.descriptor.sync_unique_name)}},{key:"_getDescriptor",value:function(){return this.descriptor}}]),t}();h.UserDescriptor=s},{"./logger":14,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],29:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/promise")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function t(){var c=this;(0,r.default)(this,t),this._promise=new a.default(function(u,o){c._resolve=u,c._reject=o})}return(0,p.default)(t,[{key:"update",value:function(c){this._resolve(c)}},{key:"set",value:function(c){this.current=c,this._resolve(c)}},{key:"fail",value:function(c){this._reject(c)}},{key:"promise",get:function(){return this._promise}}]),t}();h.Deferred=s},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],30:[function(e,g,h){"use strict";var a=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/createClass")),p=n(e("babel-runtime/core-js/json/stringify"));function n(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var s=e("rfc6902");h.isDeepEqual=function(c,u){return 0===s.createPatch(c,u).length},h.deepClone=function(c){return JSON.parse((0,p.default)(c))},h.parseToNumber=function(c){return void 0===c||isNaN(Number(c))?null:Number(c)};var t=function(){function c(u){(0,a.default)(this,c),this.base=u.replace(/\/$/,""),this.args=[],this.paths=[]}return(0,r.default)(c,[{key:"arg",value:function(u,o){return void 0!==o&&this.args.push(encodeURIComponent(u)+"="+encodeURIComponent(o)),this}},{key:"path",value:function(u){return this.paths.push(encodeURIComponent(u)),this}},{key:"build",value:function(){var u=this.base;return this.paths.length&&(u+="/"+this.paths.join("/")),this.args.length&&(u+="?"+this.args.join("&")),u}}]),c}();h.UriBuilder=t},{"babel-runtime/core-js/json/stringify":34,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,rfc6902:228}],31:[function(e,g,h){g.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":72}],32:[function(e,g,h){g.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":73}],33:[function(e,g,h){g.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":74}],34:[function(e,g,h){g.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":75}],35:[function(e,g,h){g.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":76}],36:[function(e,g,h){g.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":77}],37:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":78}],38:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":79}],39:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/define-properties"),__esModule:!0}},{"core-js/library/fn/object/define-properties":80}],40:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":81}],41:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":82}],42:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":83}],43:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":84}],44:[function(e,g,h){g.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":85}],45:[function(e,g,h){g.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":86}],46:[function(e,g,h){g.exports={default:e("core-js/library/fn/reflect/construct"),__esModule:!0}},{"core-js/library/fn/reflect/construct":87}],47:[function(e,g,h){g.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":88}],48:[function(e,g,h){g.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":89}],49:[function(e,g,h){g.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":90}],50:[function(e,g,h){"use strict";h.__esModule=!0,h.default=function(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}},{}],51:[function(e,g,h){"use strict";h.__esModule=!0;var a,p=(a=e("../core-js/object/define-property"))&&a.__esModule?a:{default:a};h.default=function(){function n(s,t){for(var c=0;c<t.length;c++){var u=t[c];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),(0,p.default)(s,u.key,u)}}return function(s,t,c){return t&&n(s.prototype,t),c&&n(s,c),s}}()},{"../core-js/object/define-property":40}],52:[function(e,g,h){"use strict";h.__esModule=!0;var a,p=(a=e("../core-js/object/assign"))&&a.__esModule?a:{default:a};h.default=p.default||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(n[c]=t[c])}return n}},{"../core-js/object/assign":37}],53:[function(e,g,h){"use strict";h.__esModule=!0;var a=n(e("../core-js/object/set-prototype-of")),r=n(e("../core-js/object/create")),p=n(e("../helpers/typeof"));function n(s){return s&&s.__esModule?s:{default:s}}h.default=function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,p.default)(t)));s.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(s,t):s.__proto__=t)}},{"../core-js/object/create":38,"../core-js/object/set-prototype-of":44,"../helpers/typeof":56}],54:[function(e,g,h){"use strict";h.__esModule=!0;var a,p=(a=e("../helpers/typeof"))&&a.__esModule?a:{default:a};h.default=function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==(void 0===s?"undefined":(0,p.default)(s))&&"function"!=typeof s?n:s}},{"../helpers/typeof":56}],55:[function(e,g,h){"use strict";h.__esModule=!0;var a=p(e("../core-js/is-iterable")),r=p(e("../core-js/get-iterator"));function p(n){return n&&n.__esModule?n:{default:n}}h.default=function(n,s){if(Array.isArray(n))return n;if((0,a.default)(Object(n)))return function(t,c){var u=[],o=!0,l=!1,f=void 0;try{for(var w,k=(0,r.default)(t);!(o=(w=k.next()).done)&&(u.push(w.value),!c||u.length!==c);o=!0);}catch(O){l=!0,f=O}finally{try{!o&&k.return&&k.return()}finally{if(l)throw f}}return u}(n,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{"../core-js/get-iterator":32,"../core-js/is-iterable":33}],56:[function(e,g,h){"use strict";h.__esModule=!0;var a=n(e("../core-js/symbol/iterator")),r=n(e("../core-js/symbol")),p="function"==typeof r.default&&"symbol"===_typeof4(a.default)?function(s){return _typeof4(s)}:function(s){return s&&"function"==typeof r.default&&s.constructor===r.default&&s!==r.default.prototype?"symbol":_typeof4(s)};function n(s){return s&&s.__esModule?s:{default:s}}h.default="function"==typeof r.default&&"symbol"===p(a.default)?function(s){return void 0===s?"undefined":p(s)}:function(s){return s&&"function"==typeof r.default&&s.constructor===r.default&&s!==r.default.prototype?"symbol":void 0===s?"undefined":p(s)}},{"../core-js/symbol":48,"../core-js/symbol/iterator":49}],57:[function(e,g,h){g.exports=e("regenerator-runtime")},{"regenerator-runtime":226}],58:[function(e,g,h){var a=e("./lib/backoff"),r=e("./lib/strategy/exponential"),p=e("./lib/strategy/fibonacci"),n=e("./lib/function_call.js");g.exports.Backoff=a,g.exports.FunctionCall=n,g.exports.FibonacciStrategy=p,g.exports.ExponentialStrategy=r,g.exports.fibonacci=function(s){return new a(new p(s))},g.exports.exponential=function(s){return new a(new r(s))},g.exports.call=function(s,t,c){var u=Array.prototype.slice.call(arguments);return s=u[0],t=u.slice(1,u.length-1),new n(s,t,c=u[u.length-1])}},{"./lib/backoff":59,"./lib/function_call.js":60,"./lib/strategy/exponential":61,"./lib/strategy/fibonacci":62}],59:[function(e,g,h){var a=e("events"),r=e("precond");function p(n){a.EventEmitter.call(this),this.backoffStrategy_=n,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}e("util").inherits(p,a.EventEmitter),p.prototype.failAfter=function(n){r.checkArgument(0<n,"Expected a maximum number of retry greater than 0 but got %s.",n),this.maxNumberOfRetry_=n},p.prototype.backoff=function(n){r.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",n),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,n))},p.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},p.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},g.exports=p},{events:214,precond:222,util:282}],60:[function(e,g,h){var a=e("events"),r=e("precond"),p=e("util"),n=e("./backoff"),s=e("./strategy/fibonacci");function t(c,u,o){a.EventEmitter.call(this),r.checkIsFunction(c,"Expected fn to be a function."),r.checkIsArray(u,"Expected args to be an array."),r.checkIsFunction(o,"Expected callback to be a function."),this.function_=c,this.arguments_=u,this.callback_=o,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=t.DEFAULT_RETRY_PREDICATE_,this.state_=t.State_.PENDING}p.inherits(t,a.EventEmitter),t.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},t.DEFAULT_RETRY_PREDICATE_=function(c){return!0},t.prototype.isPending=function(){return this.state_==t.State_.PENDING},t.prototype.isRunning=function(){return this.state_==t.State_.RUNNING},t.prototype.isCompleted=function(){return this.state_==t.State_.COMPLETED},t.prototype.isAborted=function(){return this.state_==t.State_.ABORTED},t.prototype.setStrategy=function(c){return r.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=c,this},t.prototype.retryIf=function(c){return r.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=c,this},t.prototype.getLastResult=function(){return this.lastResult_.concat()},t.prototype.getNumRetries=function(){return this.numRetries_},t.prototype.failAfter=function(c){return r.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=c,this},t.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=t.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},t.prototype.start=function(c){r.checkState(!this.isAborted(),"FunctionCall is aborted."),r.checkState(this.isPending(),"FunctionCall already started.");var u=this.strategy_||new s;this.backoff_=c?c(u):new n(u),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),0<this.failAfter_&&this.backoff_.failAfter(this.failAfter_),this.state_=t.State_.RUNNING,this.doCall_(!1)},t.prototype.doCall_=function(c){c&&this.numRetries_++;var u=["call"].concat(this.arguments_);a.EventEmitter.prototype.emit.apply(this,u);var o=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(o))},t.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},t.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var c=Array.prototype.slice.call(arguments);this.lastResult_=c,a.EventEmitter.prototype.emit.apply(this,["callback"].concat(c));var u=c[0];u&&this.retryPredicate_(u)?this.backoff_.backoff(u):(this.state_=t.State_.COMPLETED,this.doCallback_())}},t.prototype.handleBackoff_=function(c,u,o){this.emit("backoff",c,u,o)},g.exports=t},{"./backoff":59,"./strategy/fibonacci":62,events:214,precond:222,util:282}],61:[function(e,g,h){var a=e("util"),r=e("precond"),p=e("./strategy");function n(s){p.call(this,s),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=n.DEFAULT_FACTOR,s&&void 0!==s.factor&&(r.checkArgument(1<s.factor,"Exponential factor should be greater than 1 but got %s.",s.factor),this.factor_=s.factor)}a.inherits(n,p),n.DEFAULT_FACTOR=2,n.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},n.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},g.exports=n},{"./strategy":63,precond:222,util:282}],62:[function(e,g,h){var a=e("util"),r=e("./strategy");function p(n){r.call(this,n),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}a.inherits(p,r),p.prototype.next_=function(){var n=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=n},p.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},g.exports=p},{"./strategy":63,util:282}],63:[function(e,g,h){function a(p){return null!=p}function r(p){if(a((p=p||{}).initialDelay)&&p.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(a(p.maxDelay)&&p.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=p.initialDelay||100,this.maxDelay_=p.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(a(p.randomisationFactor)&&(p.randomisationFactor<0||1<p.randomisationFactor))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=p.randomisationFactor||0}e("events"),e("util"),r.prototype.getMaxDelay=function(){return this.maxDelay_},r.prototype.getInitialDelay=function(){return this.initialDelay_},r.prototype.next=function(){var p=this.next_(),n=1+Math.random()*this.randomisationFactor_;return Math.round(p*n)},r.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},r.prototype.reset=function(){this.reset_()},r.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},g.exports=r},{events:214,util:282}],64:[function(e,g,h){"use strict";h.byteLength=function(o){return 3*o.length/4-c(o)},h.toByteArray=function(o){var l,f,w,k,O,M=o.length;k=c(o),O=new p(3*M/4-k),f=0<k?M-4:M;var b=0;for(l=0;l<f;l+=4)w=r[o.charCodeAt(l)]<<18|r[o.charCodeAt(l+1)]<<12|r[o.charCodeAt(l+2)]<<6|r[o.charCodeAt(l+3)],O[b++]=w>>16&255,O[b++]=w>>8&255,O[b++]=255&w;return 2===k?(w=r[o.charCodeAt(l)]<<2|r[o.charCodeAt(l+1)]>>4,O[b++]=255&w):1===k&&(w=r[o.charCodeAt(l)]<<10|r[o.charCodeAt(l+1)]<<4|r[o.charCodeAt(l+2)]>>2,O[b++]=w>>8&255,O[b++]=255&w),O},h.fromByteArray=function(o){for(var l,f=o.length,w=f%3,k="",O=[],M=0,b=f-w;M<b;M+=16383)O.push(u(o,M,b<M+16383?b:M+16383));return 1===w?(k+=a[(l=o[f-1])>>2],k+=a[l<<4&63],k+="=="):2===w&&(k+=a[(l=(o[f-2]<<8)+o[f-1])>>10],k+=a[l>>4&63],k+=a[l<<2&63],k+="="),O.push(k),O.join("")};for(var a=[],r=[],p=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,t=n.length;s<t;++s)a[s]=n[s],r[n.charCodeAt(s)]=s;function c(o){var l=o.length;if(0<l%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[l-2]?2:"="===o[l-1]?1:0}function u(o,l,f){for(var k,O=[],M=l;M<f;M+=3)O.push(a[(k=(o[M]<<16)+(o[M+1]<<8)+o[M+2])>>18&63]+a[k>>12&63]+a[k>>6&63]+a[63&k]);return O.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],65:[function(e,g,h){(function(a,r){var p,n;p=function(){return function t(c,u,o){function l(k,O){if(!u[k]){if(!c[k]){var M="function"==typeof e&&e;if(!O&&M)return M(k,!0);if(f)return f(k,!0);var b=new Error("Cannot find module '"+k+"'");throw b.code="MODULE_NOT_FOUND",b}var A=u[k]={exports:{}};c[k][0].call(A.exports,function(_){return l(c[k][1][_]||_)},A,A.exports,t,c,u,o)}return u[k].exports}for(var f="function"==typeof e&&e,w=0;w<o.length;w++)l(o[w]);return l}({1:[function(t,c,u){"use strict";c.exports=function(o){var l=o._SomePromiseArray;function f(w){var k=new l(w),O=k.promise();return k.setHowMany(1),k.setUnwrap(),k.init(),O}o.any=function(w){return f(w)},o.prototype.any=function(){return f(this)}}},{}],2:[function(t,c,u){"use strict";var o;try{throw new Error}catch(A){o=A}var l=t("./schedule.js"),f=t("./queue.js"),w=t("./util.js");function k(){this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._trampolineEnabled=!0;var A=this;this.drainQueues=function(){A._drainQueues()},this._schedule=l.isStatic?l(this.drainQueues):l}function O(A,_,E){this._lateQueue.push(A,_,E),this._queueTick()}function M(A,_,E){this._normalQueue.push(A,_,E),this._queueTick()}function b(A){this._normalQueue._pushOne(A),this._queueTick()}k.prototype.disableTrampolineIfNecessary=function(){w.hasDevTools&&(this._trampolineEnabled=!1)},k.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(A){setTimeout(A,0)})},k.prototype.haveItemsQueued=function(){return 0<this._normalQueue.length()},k.prototype.throwLater=function(A,_){if(1===arguments.length&&(_=A,A=function(){throw _}),typeof setTimeout<"u")setTimeout(function(){A(_)},0);else try{this._schedule(function(){A(_)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},k.prototype.settlePromises=w.hasDevTools?(l.isStatic&&(l=function(A){setTimeout(A,0)}),k.prototype.invokeLater=function(A,_,E){this._trampolineEnabled?O.call(this,A,_,E):this._schedule(function(){setTimeout(function(){A.call(_,E)},100)})},k.prototype.invoke=function(A,_,E){this._trampolineEnabled?M.call(this,A,_,E):this._schedule(function(){A.call(_,E)})},function(A){this._trampolineEnabled?b.call(this,A):this._schedule(function(){A._settlePromises()})}):(k.prototype.invokeLater=O,k.prototype.invoke=M,b),k.prototype.invokeFirst=function(A,_,E){this._normalQueue.unshift(A,_,E),this._queueTick()},k.prototype._drainQueue=function(A){for(;0<A.length();){var _=A.shift();if("function"==typeof _){var E=A.shift(),y=A.shift();_.call(E,y)}else _._settlePromises()}},k.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},k.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},k.prototype._reset=function(){this._isTickUsed=!1},c.exports=new k,c.exports.firstLineError=o},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,c,u){"use strict";c.exports=function(o,l,f){var w=function(b,A){this._reject(A)},k=function(b,A){A.promiseRejectionQueued=!0,A.bindingPromise._then(w,w,null,this,b)},O=function(b,A){this._isPending()&&this._resolveCallback(A.target)},M=function(b,A){A.promiseRejectionQueued||this._reject(b)};o.prototype.bind=function(b){var A=f(b),_=new o(l);_._propagateFrom(this,1);var E=this._target();if(_._setBoundTo(A),A instanceof o){var y={promiseRejectionQueued:!1,promise:_,target:E,bindingPromise:A};E._then(l,k,_._progress,_,y),A._then(O,M,_._progress,_,y)}else _._resolveCallback(E);return _},o.prototype._setBoundTo=function(b){void 0!==b?(this._bitField=131072|this._bitField,this._boundTo=b):this._bitField=-131073&this._bitField},o.prototype._isBound=function(){return 131072==(131072&this._bitField)},o.bind=function(b,A){var _=f(b),E=new o(l);return E._setBoundTo(_),_ instanceof o?_._then(function(){E._resolveCallback(A)},E._reject,E._progress,E,null):E._resolveCallback(A),E}}},{}],4:[function(t,c,u){"use strict";var o;typeof Promise<"u"&&(o=Promise);var l=t("./promise.js")();l.noConflict=function(){try{Promise===l&&(Promise=o)}catch{}return l},c.exports=l},{"./promise.js":23}],5:[function(t,c,u){"use strict";var o=Object.create;if(o){var l=o(null),f=o(null);l[" size"]=f[" size"]=0}c.exports=function(w){var O=t("./util.js"),M=O.canEvaluate;function A(y){return function b(y,m){var R;if(null!=y&&(R=y[m]),"function"==typeof R)return R;var F="Object "+O.classString(y)+" has no method '"+O.toString(m)+"'";throw new w.TypeError(F)}(y,this.pop()).apply(y,this)}function _(y){return y[this]}function E(y){var m=+this;return m<0&&(m=Math.max(0,m+y.length)),y[m]}w.prototype.call=function(y){for(var m=arguments.length,R=new Array(m-1),F=1;F<m;++F)R[F-1]=arguments[F];return R.push(y),this._then(A,void 0,void 0,R,void 0)},w.prototype.get=function(y){var m;if("number"==typeof y)m=E;else if(M){var R=(void 0)(y);m=null!==R?R:_}else m=_;return this._then(m,void 0,void 0,y,void 0)}}},{"./util.js":38}],6:[function(t,c,u){"use strict";c.exports=function(o){var l=t("./errors.js"),f=t("./async.js"),w=l.CancellationError;o.prototype._cancel=function(k){if(!this.isCancellable())return this;for(var O,M=this;void 0!==(O=M._cancellationParent)&&O.isCancellable();)M=O;this._unsetCancellable(),M._target()._rejectCallback(k,!1,!0)},o.prototype.cancel=function(k){return this.isCancellable()&&(void 0===k&&(k=new w),f.invokeLater(this._cancel,this,k)),this},o.prototype.cancellable=function(){return this._cancellable()||(f.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0),this},o.prototype.uncancellable=function(){var k=this.then();return k._unsetCancellable(),k},o.prototype.fork=function(k,O,M){var b=this._then(k,O,M,void 0,void 0);return b._setCancellable(),b._cancellationParent=void 0,b}}},{"./async.js":2,"./errors.js":13}],7:[function(t,c,u){"use strict";c.exports=function(){var o,l=t("./async.js"),f=t("./util.js"),w=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,k=null,O=null,M=!1;function b(J){this._parent=J;var Q=this._length=1+(void 0===J?0:J._length);F(this,b),32<Q&&this.uncycle()}function A(J){for(var Q=[],U=0;U<J.length;++U){var N=J[U],D=k.test(N)||"    (No stack trace)"===N,ie=D&&E(N);D&&!ie&&(M&&" "!==N.charAt(0)&&(N="    "+N),Q.push(N))}return Q}function _(J){var Q,U;if("function"==typeof J)Q="[function "+(J.name||"anonymous")+"]";else{if(Q=J.toString(),/\[object [a-zA-Z0-9$_]+\]/.test(Q))try{Q=JSON.stringify(J)}catch{}0===Q.length&&(Q="(empty array)")}return"(<"+((U=Q).length<41?U:U.substr(0,38)+"...")+">, no stack trace)"}f.inherits(b,Error),b.prototype.uncycle=function(){var J=this._length;if(!(J<2)){for(var Q=[],U={},N=0,D=this;void 0!==D;++N)Q.push(D),D=D._parent;for(N=(J=this._length=N)-1;0<=N;--N){var ie=Q[N].stack;void 0===U[ie]&&(U[ie]=N)}for(N=0;N<J;++N){var Z=U[Q[N].stack];if(void 0!==Z&&Z!==N){0<Z&&(Q[Z-1]._parent=void 0,Q[Z-1]._length=1),Q[N]._parent=void 0,Q[N]._length=1;var ue=0<N?Q[N-1]:this;Z<J-1?(ue._parent=Q[Z+1],ue._parent.uncycle(),ue._length=ue._parent._length+1):(ue._parent=void 0,ue._length=1);for(var re=ue._length+1,te=N-2;0<=te;--te)Q[te]._length=re,re++;return}}}},b.prototype.parent=function(){return this._parent},b.prototype.hasParent=function(){return void 0!==this._parent},b.prototype.attachExtraTrace=function(J){if(!J.__stackCleaned__){this.uncycle();for(var Q=b.parseStackAndMessage(J),U=Q.message,N=[Q.stack],D=this;void 0!==D;)N.push(A(D.stack.split("\n"))),D=D._parent;(function(ie){for(var Z=ie[0],ue=1;ue<ie.length;++ue){for(var re=ie[ue],te=Z.length-1,ye=Z[te],Se=-1,Ee=re.length-1;0<=Ee;--Ee)if(re[Ee]===ye){Se=Ee;break}for(Ee=Se;0<=Ee&&Z[te]===re[Ee];--Ee)Z.pop(),te--;Z=re}})(N),function(ie){for(var Z=0;Z<ie.length;++Z)(0===ie[Z].length||Z+1<ie.length&&ie[Z][0]===ie[Z+1][0])&&(ie.splice(Z,1),Z--)}(N),f.notEnumerableProp(J,"stack",function(ie,Z){for(var ue=0;ue<Z.length-1;++ue)Z[ue].push("From previous event:"),Z[ue]=Z[ue].join("\n");return ue<Z.length&&(Z[ue]=Z[ue].join("\n")),ie+"\n"+Z.join("\n")}(U,N)),f.notEnumerableProp(J,"__stackCleaned__",!0)}},b.parseStackAndMessage=function(J){var Q=J.stack;return{message:J.toString(),stack:A(Q="string"==typeof Q&&0<Q.length?function(U){for(var N=U.stack.replace(/\s+$/g,"").split("\n"),D=0;D<N.length;++D){var ie=N[D];if("    (No stack trace)"===ie||k.test(ie))break}return 0<D&&(N=N.slice(D)),N}(J):["    (No stack trace)"])}},b.formatAndLogError=function(J,Q){var U;typeof console<"u"&&(U="object"===_typeof4(J)||"function"==typeof J?Q+O(J.stack,J):Q+String(J),"function"==typeof o?o(U):"function"!=typeof console.log&&"object"!==_typeof4(console.log)||console.log(U))},b.unhandledRejection=function(J){b.formatAndLogError(J,"^--- With additional stack trace: ")},b.isSupported=function(){return"function"==typeof F},b.fireRejectionEvent=function(J,Q,U,N){var D=!1;try{"function"==typeof Q&&(D=!0,"rejectionHandled"===J?Q(N):Q(U,N))}catch(ue){l.throwLater(ue)}var ie=!1;try{ie=B(J,U,N)}catch(ue){ie=!0,l.throwLater(ue)}var Z=!1;if(R)try{Z=R(J.toLowerCase(),{reason:U,promise:N})}catch(ue){Z=!0,l.throwLater(ue)}ie||D||Z||"unhandledRejection"!==J||b.formatAndLogError(U,"Unhandled rejection ")};var E=function(){return!1},y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function m(J){var Q=J.match(y);if(Q)return{fileName:Q[1],line:parseInt(Q[2],10)}}b.setBounds=function(J,Q){if(b.isSupported()){for(var U,N,D=J.stack.split("\n"),ie=Q.stack.split("\n"),Z=-1,ue=-1,re=0;re<D.length;++re)if(te=m(D[re])){U=te.fileName,Z=te.line;break}for(re=0;re<ie.length;++re){var te;if(te=m(ie[re])){N=te.fileName,ue=te.line;break}}Z<0||ue<0||!U||!N||U!==N||ue<=Z||(E=function(ye){if(w.test(ye))return!0;var Se=m(ye);return!!(Se&&Se.fileName===U&&Z<=Se.line&&Se.line<=ue)})}};var R,F=function(){var J=/^\s*at\s*/,Q=function(ie,Z){return"string"==typeof ie?ie:void 0!==Z.name&&void 0!==Z.message?Z.toString():_(Z)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,k=J,O=Q;var U=Error.captureStackTrace;return E=function(ie){return w.test(ie)},function(ie,Z){Error.stackTraceLimit=Error.stackTraceLimit+6,U(ie,Z),Error.stackTraceLimit=Error.stackTraceLimit-6}}var N,D=new Error;if("string"==typeof D.stack&&0<=D.stack.split("\n")[0].indexOf("stackDetection@"))return k=/@/,O=Q,M=!0,function(ie){ie.stack=(new Error).stack};try{throw new Error}catch(ie){N="stack"in ie}return"stack"in D||!N||"number"!=typeof Error.stackTraceLimit?(O=function(ie,Z){return"string"==typeof ie?ie:"object"!==_typeof4(Z)&&"function"!=typeof Z||void 0===Z.name||void 0===Z.message?_(Z):Z.toString()},null):(k=J,O=Q,function(ie){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(Z){ie.stack=Z.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),B=function(){if(f.isNode)return function(ie,Z,ue){return"rejectionHandled"===ie?a.emit(ie,ue):a.emit(ie,Z,ue)};var J=!1,Q=!0;try{var U=new self.CustomEvent("test");J=U instanceof CustomEvent}catch{}if(!J)try{var N=document.createEvent("CustomEvent");N.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(N)}catch{Q=!1}Q&&(R=function(ie,Z){var ue;return J?ue=new self.CustomEvent(ie,{detail:Z,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(ue=document.createEvent("CustomEvent")).initCustomEvent(ie,!1,!0,Z),!!ue&&!self.dispatchEvent(ue)});var D={};return D.unhandledRejection="onunhandledRejection".toLowerCase(),D.rejectionHandled="onrejectionHandled".toLowerCase(),function(ie,Z,ue){var te=self[D[ie]];return!!te&&("rejectionHandled"===ie?te.call(self,ue):te.call(self,Z,ue),!0)}}();return typeof console<"u"&&void 0!==console.warn&&(o=function(J){console.warn(J)},f.isNode&&a.stderr.isTTY?o=function(J){a.stderr.write("\x1b[31m"+J+"\x1b[39m\n")}:f.isNode||"string"!=typeof(new Error).stack||(o=function(J){console.warn("%c"+J,"color: red")})),b}},{"./async.js":2,"./util.js":38}],8:[function(t,c,u){"use strict";c.exports=function(o){var l=t("./util.js"),f=t("./errors.js"),w=l.tryCatch,k=l.errorObj,O=t("./es5.js").keys,M=f.TypeError;function b(_,E,y){this._instances=_,this._callback=E,this._promise=y}function A(_,E){var y={},m=w(_).call(y,E);return m===k?m:O(y).length?(k.e=new M("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),k):m}return b.prototype.doFilter=function(_){for(var E=this._callback,y=this._promise._boundValue(),m=0,R=this._instances.length;m<R;++m){var F=this._instances[m],B=F===Error||null!=F&&F.prototype instanceof Error;if(B&&_ instanceof F)return(J=w(E).call(y,_))===k?(o.e=J.e,o):J;if("function"==typeof F&&!B){var J,Q=A(F,_);if(Q===k){_=k.e;break}if(Q)return(J=w(E).call(y,_))===k?(o.e=J.e,o):J}}return o.e=_,o},b}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,c,u){"use strict";c.exports=function(o,l,f){var w=[];function k(){this._trace=new l(O())}function O(){var M=w.length-1;if(0<=M)return w[M]}return k.prototype._pushContext=function(){f()&&void 0!==this._trace&&w.push(this._trace)},k.prototype._popContext=function(){f()&&void 0!==this._trace&&w.pop()},o.prototype._peekContext=O,o.prototype._pushContext=k.prototype._pushContext,o.prototype._popContext=k.prototype._popContext,function(){if(f())return new k}}},{}],10:[function(t,c,u){"use strict";c.exports=function(o,l){var f,w,k=o._getDomain,O=t("./async.js"),M=t("./errors.js").Warning,b=t("./util.js"),A=b.canAttachTrace,_=b.isNode&&(!!a.env.BLUEBIRD_DEBUG||"development"===a.env.NODE_ENV);return b.isNode&&0==a.env.BLUEBIRD_DEBUG&&(_=!1),_&&O.disableTrampolineIfNecessary(),o.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},o.prototype._ensurePossibleRejectionHandled=function(){!(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),O.invokeLater(this._notifyUnhandledRejection,this,void 0))},o.prototype._notifyUnhandledRejectionIsHandled=function(){l.fireRejectionEvent("rejectionHandled",f,void 0,this)},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var E=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),l.fireRejectionEvent("unhandledRejection",w,E,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},o.prototype._isUnhandledRejectionNotified=function(){return 0<(524288&this._bitField)},o.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return 0<(2097152&this._bitField)},o.prototype._setCarriedStackTrace=function(E){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=E},o.prototype._isCarryingStackTrace=function(){return 0<(1048576&this._bitField)},o.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},o.prototype._captureStackTrace=function(){return _&&(this._trace=new l(this._peekContext())),this},o.prototype._attachExtraTrace=function(E,y){if(_&&A(E)){var m=this._trace;if(void 0!==m&&y&&(m=m._parent),void 0!==m)m.attachExtraTrace(E);else if(!E.__stackCleaned__){var R=l.parseStackAndMessage(E);b.notEnumerableProp(E,"stack",R.message+"\n"+R.stack.join("\n")),b.notEnumerableProp(E,"__stackCleaned__",!0)}}},o.prototype._warn=function(E){var y=new M(E),m=this._peekContext();if(m)m.attachExtraTrace(y);else{var R=l.parseStackAndMessage(y);y.stack=R.message+"\n"+R.stack.join("\n")}l.formatAndLogError(y,"")},o.onPossiblyUnhandledRejection=function(E){var y=k();w="function"==typeof E?null===y?E:y.bind(E):void 0},o.onUnhandledRejectionHandled=function(E){var y=k();f="function"==typeof E?null===y?E:y.bind(E):void 0},o.longStackTraces=function(){if(O.haveItemsQueued()&&!1===_)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(_=l.isSupported())&&O.disableTrampolineIfNecessary()},o.hasLongStackTraces=function(){return _&&l.isSupported()},l.isSupported()||(o.longStackTraces=function(){},_=!1),function(){return _}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,c,u){"use strict";var o=t("./util.js").isPrimitive;c.exports=function(l){var f=function(){return this},w=function(){throw this},k=function(){},O=function(){throw void 0},M=function(b,A){return 1===A?function(){throw b}:2===A?function(){return b}:void 0};l.prototype.return=l.prototype.thenReturn=function(b){return void 0===b?this.then(k):o(b)?this._then(M(b,2),void 0,void 0,void 0,void 0):(b instanceof l&&b._ignoreRejections(),this._then(f,void 0,void 0,b,void 0))},l.prototype.throw=l.prototype.thenThrow=function(b){return void 0===b?this.then(O):o(b)?this._then(M(b,1),void 0,void 0,void 0,void 0):this._then(w,void 0,void 0,b,void 0)}}},{"./util.js":38}],12:[function(t,c,u){"use strict";c.exports=function(o,l){var f=o.reduce;o.prototype.each=function(w){return f(this,w,null,l)},o.each=function(w,k){return f(w,k,null,l)}}},{}],13:[function(t,c,u){"use strict";var o,l,f=t("./es5.js"),w=f.freeze,k=t("./util.js"),O=k.inherits,M=k.notEnumerableProp;function b(Q,U){function N(D){if(!(this instanceof N))return new N(D);M(this,"message","string"==typeof D?D:U),M(this,"name",Q),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return O(N,Error),N}var A=b("Warning","warning"),_=b("CancellationError","cancellation error"),E=b("TimeoutError","timeout error"),y=b("AggregateError","aggregate error");try{o=TypeError,l=RangeError}catch{o=b("TypeError","type error"),l=b("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),R=0;R<m.length;++R)"function"==typeof Array.prototype[m[R]]&&(y.prototype[m[R]]=Array.prototype[m[R]]);f.defineProperty(y.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),y.prototype.isOperational=!0;var F=0;function B(Q){if(!(this instanceof B))return new B(Q);M(this,"name","OperationalError"),M(this,"message",Q),this.cause=Q,this.isOperational=!0,Q instanceof Error?(M(this,"message",Q.message),M(this,"stack",Q.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}y.prototype.toString=function(){var Q=Array(4*F+1).join(" "),U="\n"+Q+"AggregateError of:\n";F++,Q=Array(4*F+1).join(" ");for(var N=0;N<this.length;++N){for(var D=this[N]===this?"[Circular AggregateError]":this[N]+"",ie=D.split("\n"),Z=0;Z<ie.length;++Z)ie[Z]=Q+ie[Z];U+=(D=ie.join("\n"))+"\n"}return F--,U},O(B,Error);var J=Error.__BluebirdErrorTypes__;J||(J=w({CancellationError:_,TimeoutError:E,OperationalError:B,RejectionError:B,AggregateError:y}),M(Error,"__BluebirdErrorTypes__",J)),c.exports={Error,TypeError:o,RangeError:l,CancellationError:J.CancellationError,OperationalError:J.OperationalError,TimeoutError:J.TimeoutError,AggregateError:J.AggregateError,Warning:A}},{"./es5.js":14,"./util.js":38}],14:[function(t,c,u){var o=function(){"use strict";return void 0===this}();if(o)c.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function(O,M){var b=Object.getOwnPropertyDescriptor(O,M);return!(b&&!b.writable&&!b.set)}};else{var l={}.hasOwnProperty,f={}.toString,w={}.constructor.prototype,k=function(O){var M=[];for(var b in O)l.call(O,b)&&M.push(b);return M};c.exports={isArray:function(O){try{return"[object Array]"===f.call(O)}catch{return!1}},keys:k,names:k,defineProperty:function(O,M,b){return O[M]=b.value,O},getDescriptor:function(O,M){return{value:O[M]}},freeze:function(O){return O},getPrototypeOf:function(O){try{return Object(O).constructor.prototype}catch{return w}},isES5:o,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,c,u){"use strict";c.exports=function(o,l){var f=o.map;o.prototype.filter=function(w,k){return f(this,w,k,l)},o.filter=function(w,k,O){return f(w,k,O,l)}}},{}],16:[function(t,c,u){"use strict";c.exports=function(o,l,f){var w=t("./util.js"),k=w.isPrimitive,O=w.thrower;function M(){return this}function b(){throw this}function A(y,m,R){var F,B,J;return F=k(m)?R?(B=m,function(){return B}):(J=m,function(){throw J}):R?M:b,y._then(F,O,void 0,m,void 0)}function _(y){var m=this.promise,R=this.handler,F=m._isBound()?R.call(m._boundValue()):R();if(void 0!==F){var B=f(F,m);if(B instanceof o)return A(B=B._target(),y,m.isFulfilled())}return m.isRejected()?(l.e=y,l):y}function E(y){var m=this.promise,R=this.handler,F=m._isBound()?R.call(m._boundValue(),y):R(y);if(void 0!==F){var B=f(F,m);if(B instanceof o)return A(B=B._target(),y,!0)}return y}o.prototype._passThroughHandler=function(y,m){return"function"!=typeof y?this.then():this._then(m?_:E,m?_:void 0,void 0,{promise:this,handler:y},void 0)},o.prototype.lastly=o.prototype.finally=function(y){return this._passThroughHandler(y,!0)},o.prototype.tap=function(y){return this._passThroughHandler(y,!1)}}},{"./util.js":38}],17:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./errors.js").TypeError,O=t("./util.js"),M=O.errorObj,b=O.tryCatch,A=[];function _(E,y,m,R){(this._promise=new o(f))._captureStackTrace(),this._stack=R,this._generatorFunction=E,this._receiver=y,this._generator=void 0,this._yieldHandlers="function"==typeof m?[m].concat(A):A}_.prototype.promise=function(){return this._promise},_.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},_.prototype._continue=function(E){if(E===M)return this._promise._rejectCallback(E.e,!1,!0);var y=E.value;if(!0===E.done)this._promise._resolveCallback(y);else{var m=w(y,this._promise);if(!(m instanceof o)&&null===(m=function(R,F,B){for(var J=0;J<F.length;++J){B._pushContext();var Q=b(F[J])(R);if(B._popContext(),Q===M){B._pushContext();var U=o.reject(M.e);return B._popContext(),U}var N=w(Q,B);if(N instanceof o)return N}return null}(m,this._yieldHandlers,this._promise)))return void this._throw(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",y)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));m._then(this._next,this._throw,void 0,this,null)}},_.prototype._throw=function(E){this._promise._attachExtraTrace(E),this._promise._pushContext();var y=b(this._generator.throw).call(this._generator,E);this._promise._popContext(),this._continue(y)},_.prototype._next=function(E){this._promise._pushContext();var y=b(this._generator.next).call(this._generator,E);this._promise._popContext(),this._continue(y)},o.coroutine=function(E,y){if("function"!=typeof E)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var m=Object(y).yieldHandler,R=_,F=(new Error).stack;return function(){var B=E.apply(this,arguments),J=new R(void 0,void 0,m,F);return J._generator=B,J._next(void 0),J.promise()}},o.coroutine.addYieldHandler=function(E){if("function"!=typeof E)throw new k("fn must be a function\n\n    See http://goo.gl/916lJJ\n");A.push(E)},o.spawn=function(E){if("function"!=typeof E)return l("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var y=new _(E,this),m=y.promise();return y._run(o.spawn),m}}},{"./errors.js":13,"./util.js":38}],18:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){t("./util.js"),o.join=function(){var O,M=arguments.length-1;0<M&&"function"==typeof arguments[M]&&(O=arguments[M]);for(var b=arguments.length,A=new Array(b),_=0;_<b;++_)A[_]=arguments[_];O&&A.pop();var E=new l(A).promise();return void 0!==O?E.spread(O):E}}},{"./util.js":38}],19:[function(t,c,u){"use strict";c.exports=function(o,l,f,w,k){var O=o._getDomain,M=t("./async.js"),b=t("./util.js"),A=b.tryCatch,_=b.errorObj,E={},y=[];function m(B,J,Q,U){this.constructor$(B),this._promise._captureStackTrace();var N=O();this._callback=null===N?J:N.bind(J),this._preservedValues=U===k?new Array(this.length()):null,this._limit=Q,this._inFlight=0,this._queue=1<=Q?[]:y,M.invoke(R,this,void 0)}function R(){this._init$(void 0,-2)}function F(B,J,Q,U){var N="object"===_typeof4(Q)&&null!==Q?Q.concurrency:0;return new m(B,J,N="number"==typeof N&&isFinite(N)&&1<=N?N:0,U)}b.inherits(m,l),m.prototype._init=function(){},m.prototype._promiseFulfilled=function(B,J){var Q=this._values,U=this.length(),N=this._preservedValues,D=this._limit;if(Q[J]===E){if(Q[J]=B,1<=D&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=D&&this._inFlight>=D)return Q[J]=B,void this._queue.push(J);null!==N&&(N[J]=B);var ie=this._callback,Z=this._promise._boundValue();this._promise._pushContext();var ue=A(ie).call(Z,B,J,U);if(this._promise._popContext(),ue===_)return this._reject(ue.e);var re=w(ue,this._promise);if(re instanceof o){if((re=re._target())._isPending())return 1<=D&&this._inFlight++,Q[J]=E,re._proxyPromiseArray(this,J);if(!re._isFulfilled())return this._reject(re._reason());ue=re._value()}Q[J]=ue}U<=++this._totalResolved&&(null!==N?this._filter(Q,N):this._resolve(Q))},m.prototype._drainQueue=function(){for(var B=this._queue,J=this._limit,Q=this._values;0<B.length&&this._inFlight<J;){if(this._isResolved())return;var U=B.pop();this._promiseFulfilled(Q[U],U)}},m.prototype._filter=function(B,J){for(var Q=J.length,U=new Array(Q),N=0,D=0;D<Q;++D)B[D]&&(U[N++]=J[D]);U.length=N,this._resolve(U)},m.prototype.preservedValues=function(){return this._preservedValues},o.prototype.map=function(B,J){return"function"!=typeof B?f("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):F(this,B,J,null).promise()},o.map=function(B,J,Q,U){return"function"!=typeof J?f("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):F(B,J,Q,U).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./util.js"),O=k.tryCatch;o.method=function(M){if("function"!=typeof M)throw new o.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var b=new o(l);b._captureStackTrace(),b._pushContext();var A=O(M).apply(this,arguments);return b._popContext(),b._resolveFromSyncValue(A),b}},o.attempt=o.try=function(M,b,A){if("function"!=typeof M)return w("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var _=new o(l);_._captureStackTrace(),_._pushContext();var E=k.isArray(b)?O(M).apply(A,b):O(M).call(A,b);return _._popContext(),_._resolveFromSyncValue(E),_},o.prototype._resolveFromSyncValue=function(M){M===k.errorObj?this._rejectCallback(M.e,!1,!0):this._resolveCallback(M,!0)}}},{"./util.js":38}],21:[function(t,c,u){"use strict";c.exports=function(o){var l=t("./util.js"),f=t("./async.js"),w=l.tryCatch,k=l.errorObj;function O(A,_){if(!l.isArray(A))return M.call(this,A,_);var E=w(_).apply(this._boundValue(),[null].concat(A));E===k&&f.throwLater(E.e)}function M(A,_){var E=this._boundValue(),y=void 0===A?w(_).call(E,null):w(_).call(E,null,A);y===k&&f.throwLater(y.e)}function b(A,_){if(!A){var E=this._target()._getCarriedStackTrace();E.cause=A,A=E}var y=w(_).call(this._boundValue(),A);y===k&&f.throwLater(y.e)}o.prototype.asCallback=o.prototype.nodeify=function(A,_){if("function"==typeof A){var E=M;void 0!==_&&Object(_).spread&&(E=O),this._then(E,b,void 0,this,A)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,c,u){"use strict";c.exports=function(o,l){var f=t("./util.js"),w=t("./async.js"),k=f.tryCatch,O=f.errorObj;o.prototype.progressed=function(M){return this._then(void 0,void 0,M,void 0,void 0)},o.prototype._progress=function(M){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(M)},o.prototype._progressHandlerAt=function(M){return 0===M?this._progressHandler0:this[(M<<2)+M-5+2]},o.prototype._doProgressWith=function(M){var b=M.value,_=M.promise,E=M.receiver,y=k(M.handler).call(E,b);if(y===O){if(null!=y.e&&"StopProgressPropagation"!==y.e.name){var m=f.canAttachTrace(y.e)?y.e:new Error(f.toString(y.e));_._attachExtraTrace(m),_._progress(y.e)}}else y instanceof o?y._then(_._progress,null,null,_,void 0):_._progress(y)},o.prototype._progressUnchecked=function(M){for(var b=this._length(),A=this._progress,_=0;_<b;_++){var E=this._progressHandlerAt(_),y=this._promiseAt(_);if(y instanceof o)"function"==typeof E?w.invoke(this._doProgressWith,this,{handler:E,promise:y,receiver:this._receiverAt(_),value:M}):w.invoke(A,y,M);else{var m=this._receiverAt(_);"function"==typeof E?E.call(m,M,y):m instanceof l&&!m._isResolved()&&m._promiseProgressed(M,y)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,c,u){"use strict";c.exports=function(){var o,l=function(){return new A("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},f=function(){return new Z.PromiseInspection(this._target())},w=function(re){return Z.reject(new A(re))},k=t("./util.js");k.notEnumerableProp(Z,"_getDomain",o=k.isNode?function(){var re=a.domain;return void 0===re&&(re=null),re}:function(){return null});var O={},M=t("./async.js"),b=t("./errors.js"),A=Z.TypeError=b.TypeError;Z.RangeError=b.RangeError,Z.CancellationError=b.CancellationError,Z.TimeoutError=b.TimeoutError,Z.OperationalError=b.OperationalError,Z.RejectionError=b.OperationalError,Z.AggregateError=b.AggregateError;var _=function(){},E={},y={e:null},m=t("./thenables.js")(Z,_),R=t("./promise_array.js")(Z,_,m,w),F=t("./captured_trace.js")(),B=t("./debuggability.js")(Z,F),J=t("./context.js")(Z,F,B),Q=t("./catch_filter.js")(y),U=t("./promise_resolver.js"),N=U._nodebackForPromise,D=k.errorObj,ie=k.tryCatch;function Z(re){if("function"!=typeof re)throw new A("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==Z)throw new A("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,re!==_&&this._resolveFromResolver(re)}function ue(re){var te=new Z(_);te._fulfillmentHandler0=re,te._rejectionHandler0=re,te._progressHandler0=re,te._promise0=re,te._receiver0=re,te._settledValue=re}return Z.prototype.toString=function(){return"[object Promise]"},Z.prototype.caught=Z.prototype.catch=function(re){var te=arguments.length;if(1<te){var ye,Se=new Array(te-1),Ee=0;for(ye=0;ye<te-1;++ye){var V=arguments[ye];if("function"!=typeof V)return Z.reject(new A("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));Se[Ee++]=V}Se.length=Ee;var Y=new Q(Se,re=arguments[ye],this);return this._then(void 0,Y.doFilter,void 0,Y,void 0)}return this._then(void 0,re,void 0,void 0,void 0)},Z.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},Z.prototype.then=function(re,te,ye){if(B()&&0<arguments.length&&"function"!=typeof re&&"function"!=typeof te){var Se=".then() only accepts functions but was passed: "+k.classString(re);1<arguments.length&&(Se+=", "+k.classString(te)),this._warn(Se)}return this._then(re,te,ye,void 0,void 0)},Z.prototype.done=function(re,te,ye){this._then(re,te,ye,void 0,void 0)._setIsFinal()},Z.prototype.spread=function(re,te){return this.all()._then(re,te,void 0,E,void 0)},Z.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},Z.prototype.toJSON=function(){var re={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(re.fulfillmentValue=this.value(),re.isFulfilled=!0):this.isRejected()&&(re.rejectionReason=this.reason(),re.isRejected=!0),re},Z.prototype.all=function(){return new R(this).promise()},Z.prototype.error=function(re){return this.caught(k.originatesFromRejection,re)},Z.getNewLibraryCopy=c.exports,Z.is=function(re){return re instanceof Z},Z.fromNode=function(re){var te=new Z(_),ye=ie(re)(N(te));return ye===D&&te._rejectCallback(ye.e,!0,!0),te},Z.all=function(re){return new R(re).promise()},Z.defer=Z.pending=function(){var re=new Z(_);return new U(re)},Z.resolve=Z.fulfilled=Z.cast=function(re){var te=m(re);if(!(te instanceof Z)){var ye=te;(te=new Z(_))._fulfillUnchecked(ye)}return te},Z.reject=Z.rejected=function(re){var te=new Z(_);return te._captureStackTrace(),te._rejectCallback(re,!0),te},Z.setScheduler=function(re){if("function"!=typeof re)throw new A("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var te=M._schedule;return M._schedule=re,te},Z.prototype._then=function(re,te,ye,Se,Ee){var V=void 0!==Ee,Y=V?Ee:new Z(_);V||(Y._propagateFrom(this,5),Y._captureStackTrace());var z=this._target();z!==this&&(void 0===Se&&(Se=this._boundTo),V||Y._setIsMigrated());var T=z._addCallbacks(re,te,ye,Y,Se,o());return z._isResolved()&&!z._isSettlePromisesQueued()&&M.invoke(z._settlePromiseAtPostResolution,z,T),Y},Z.prototype._settlePromiseAtPostResolution=function(re){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(re)},Z.prototype._length=function(){return 131071&this._bitField},Z.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(939524096&this._bitField)},Z.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},Z.prototype._setLength=function(re){this._bitField=-131072&this._bitField|131071&re},Z.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},Z.prototype._setRejected=function(){this._bitField=134217728|this._bitField},Z.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},Z.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},Z.prototype._isFinal=function(){return 0<(33554432&this._bitField)},Z.prototype._cancellable=function(){return 0<(67108864&this._bitField)},Z.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},Z.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},Z.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},Z.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},Z.prototype._isMigrated=function(){return 0<(4194304&this._bitField)},Z.prototype._receiverAt=function(re){var te=0===re?this._receiver0:this[5*re-5+4];if(te!==O)return void 0===te&&this._isBound()?this._boundValue():te},Z.prototype._promiseAt=function(re){return 0===re?this._promise0:this[5*re-5+3]},Z.prototype._fulfillmentHandlerAt=function(re){return 0===re?this._fulfillmentHandler0:this[5*re-5+0]},Z.prototype._rejectionHandlerAt=function(re){return 0===re?this._rejectionHandler0:this[5*re-5+1]},Z.prototype._boundValue=function(){var re=this._boundTo;return void 0!==re&&re instanceof Z?re.isFulfilled()?re.value():void 0:re},Z.prototype._migrateCallbacks=function(re,te){var ye=re._fulfillmentHandlerAt(te),Se=re._rejectionHandlerAt(te),Ee=re._progressHandlerAt(te),V=re._promiseAt(te),Y=re._receiverAt(te);V instanceof Z&&V._setIsMigrated(),void 0===Y&&(Y=O),this._addCallbacks(ye,Se,Ee,V,Y,null)},Z.prototype._addCallbacks=function(re,te,ye,Se,Ee,V){var Y=this._length();if(131066<=Y&&(Y=0,this._setLength(0)),0===Y)this._promise0=Se,void 0!==Ee&&(this._receiver0=Ee),"function"!=typeof re||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===V?re:V.bind(re)),"function"==typeof te&&(this._rejectionHandler0=null===V?te:V.bind(te)),"function"==typeof ye&&(this._progressHandler0=null===V?ye:V.bind(ye));else{var z=5*Y-5;this[z+3]=Se,this[z+4]=Ee,"function"==typeof re&&(this[z+0]=null===V?re:V.bind(re)),"function"==typeof te&&(this[z+1]=null===V?te:V.bind(te)),"function"==typeof ye&&(this[z+2]=null===V?ye:V.bind(ye))}return this._setLength(Y+1),Y},Z.prototype._setProxyHandlers=function(re,te){var ye=this._length();if(131066<=ye&&(ye=0,this._setLength(0)),0===ye)this._promise0=te,this._receiver0=re;else{var Se=5*ye-5;this[Se+3]=te,this[Se+4]=re}this._setLength(ye+1)},Z.prototype._proxyPromiseArray=function(re,te){this._setProxyHandlers(re,te)},Z.prototype._resolveCallback=function(re,te){if(!this._isFollowingOrFulfilledOrRejected()){if(re===this)return this._rejectCallback(l(),!1,!0);var ye=m(re,this);if(!(ye instanceof Z))return this._fulfill(re);this._propagateFrom(ye,1|(te?4:0));var Ee=ye._target();if(Ee._isPending()){for(var V=this._length(),Y=0;Y<V;++Y)Ee._migrateCallbacks(this,Y);this._setFollowing(),this._setLength(0),this._setFollowee(Ee)}else Ee._isFulfilled()?this._fulfillUnchecked(Ee._value()):this._rejectUnchecked(Ee._reason(),Ee._getCarriedStackTrace())}},Z.prototype._rejectCallback=function(re,te,ye){ye||k.markAsOriginatingFromRejection(re);var Se=k.ensureErrorObject(re),Ee=Se===re;this._attachExtraTrace(Se,!!te&&Ee),this._reject(re,Ee?void 0:Se)},Z.prototype._resolveFromResolver=function(re){var te=this;this._captureStackTrace(),this._pushContext();var ye=!0,Se=ie(re)(function(Ee){null!==te&&(te._resolveCallback(Ee),te=null)},function(Ee){null!==te&&(te._rejectCallback(Ee,ye),te=null)});ye=!1,this._popContext(),void 0!==Se&&Se===D&&null!==te&&(te._rejectCallback(Se.e,!0,!0),te=null)},Z.prototype._settlePromiseFromHandler=function(re,te,ye,Se){var Ee;if(!Se._isRejected())if(Se._pushContext(),Ee=te!==E||this._isRejected()?ie(re).call(te,ye):ie(re).apply(this._boundValue(),ye),Se._popContext(),Ee===D||Ee===Se||Ee===y){var V=Ee===Se?l():Ee.e;Se._rejectCallback(V,!1,!0)}else Se._resolveCallback(Ee)},Z.prototype._target=function(){for(var re=this;re._isFollowing();)re=re._followee();return re},Z.prototype._followee=function(){return this._rejectionHandler0},Z.prototype._setFollowee=function(re){this._rejectionHandler0=re},Z.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},Z.prototype._propagateFrom=function(re,te){0<(1&te)&&re._cancellable()&&(this._setCancellable(),this._cancellationParent=re),0<(4&te)&&re._isBound()&&this._setBoundTo(re._boundTo)},Z.prototype._fulfill=function(re){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(re)},Z.prototype._reject=function(re,te){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(re,te)},Z.prototype._settlePromiseAt=function(re){var te=this._promiseAt(re),ye=te instanceof Z;if(ye&&te._isMigrated())return te._unsetIsMigrated(),M.invoke(this._settlePromiseAt,this,re);var Se=this._isFulfilled()?this._fulfillmentHandlerAt(re):this._rejectionHandlerAt(re),Ee=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,V=this._settledValue,Y=this._receiverAt(re);this._clearCallbackDataAtIndex(re),"function"==typeof Se?ye?this._settlePromiseFromHandler(Se,Y,V,te):Se.call(Y,V,te):Y instanceof R?Y._isResolved()||(this._isFulfilled()?Y._promiseFulfilled(V,te):Y._promiseRejected(V,te)):ye&&(this._isFulfilled()?te._fulfill(V):te._reject(V,Ee)),4<=re&&4==(31&re)&&M.invokeLater(this._setLength,this,0)},Z.prototype._clearCallbackDataAtIndex=function(re){if(0===re)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var te=5*re-5;this[te+3]=this[te+4]=this[te+0]=this[te+1]=this[te+2]=void 0}},Z.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},Z.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},Z.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},Z.prototype._queueSettlePromises=function(){M.settlePromises(this),this._setSettlePromisesQueued()},Z.prototype._fulfillUnchecked=function(re){if(re===this){var te=l();return this._attachExtraTrace(te),this._rejectUnchecked(te,void 0)}this._setFulfilled(),this._settledValue=re,this._cleanValues(),0<this._length()&&this._queueSettlePromises()},Z.prototype._rejectUncheckedCheckError=function(re){var te=k.ensureErrorObject(re);this._rejectUnchecked(re,te===re?void 0:te)},Z.prototype._rejectUnchecked=function(re,te){if(re===this){var ye=l();return this._attachExtraTrace(ye),this._rejectUnchecked(ye)}this._setRejected(),this._settledValue=re,this._cleanValues(),this._isFinal()?M.throwLater(function(Se){throw"stack"in Se&&M.invokeFirst(F.unhandledRejection,void 0,Se),Se},void 0===te?re:te):(void 0!==te&&te!==re&&this._setCarriedStackTrace(te),0<this._length()?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},Z.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var re=this._length(),te=0;te<re;te++)this._settlePromiseAt(te)},k.notEnumerableProp(Z,"_makeSelfResolutionError",l),t("./progress.js")(Z,R),t("./method.js")(Z,_,m,w),t("./bind.js")(Z,_,m),t("./finally.js")(Z,y,m),t("./direct_resolve.js")(Z),t("./synchronous_inspection.js")(Z),t("./join.js")(Z,R,m,_),Z.version="2.11.0",Z.Promise=Z,t("./map.js")(Z,R,w,m,_),t("./cancel.js")(Z),t("./using.js")(Z,w,m,J),t("./generators.js")(Z,w,_,m),t("./nodeify.js")(Z),t("./call_get.js")(Z),t("./props.js")(Z,R,m,w),t("./race.js")(Z,_,m,w),t("./reduce.js")(Z,R,w,m,_),t("./settle.js")(Z,R),t("./some.js")(Z,R,w),t("./promisify.js")(Z,_),t("./any.js")(Z),t("./each.js")(Z,_),t("./timers.js")(Z,_),t("./filter.js")(Z,_),k.toFastProperties(Z),k.toFastProperties(Z.prototype),ue({a:1}),ue({b:2}),ue({c:3}),ue(1),ue(function(){}),ue(void 0),ue(!1),ue(new Z(_)),F.setBounds(M.firstLineError,k.lastLineError),Z}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./util.js").isArray;function O(M){var A=this._promise=new o(l);M instanceof o&&A._propagateFrom(M,5),this._values=M,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return O.prototype.length=function(){return this._length},O.prototype.promise=function(){return this._promise},O.prototype._init=function M(b,A){var _=f(this._values,this._promise);if(_ instanceof o){if(_=_._target(),!(this._values=_)._isFulfilled())return _._isPending()?void _._then(M,this._reject,void 0,this,A):void this._reject(_._reason());if(_=_._value(),!k(_)){var E=new o.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(E)}}else if(!k(_))return void this._promise._reject(w("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==_.length){var y=this.getActualLength(_.length);this._length=y,this._values=this.shouldCopyValues()?new Array(y):this._values;for(var m=this._promise,R=0;R<y;++R){var F=this._isResolved(),B=f(_[R],m);B instanceof o?(B=B._target(),F?B._ignoreRejections():B._isPending()?B._proxyPromiseArray(this,R):B._isFulfilled()?this._promiseFulfilled(B._value(),R):this._promiseRejected(B._reason(),R)):F||this._promiseFulfilled(B,R)}}else-5===A?this._resolveEmptyArray():this._resolve(function(J){switch(J){case-2:return[];case-3:return{}}}(A))},O.prototype._isResolved=function(){return null===this._values},O.prototype._resolve=function(M){this._values=null,this._promise._fulfill(M)},O.prototype.__hardReject__=O.prototype._reject=function(M){this._values=null,this._promise._rejectCallback(M,!1,!0)},O.prototype._promiseProgressed=function(M,b){this._promise._progress({index:b,value:M})},O.prototype._promiseFulfilled=function(M,b){this._values[b]=M,++this._totalResolved>=this._length&&this._resolve(this._values)},O.prototype._promiseRejected=function(M,b){this._totalResolved++,this._reject(M)},O.prototype.shouldCopyValues=function(){return!0},O.prototype.getActualLength=function(M){return M},O}},{"./util.js":38}],25:[function(t,c,u){"use strict";var b,o=t("./util.js"),l=o.maybeWrapAsError,f=t("./errors.js"),w=f.TimeoutError,k=f.OperationalError,O=o.haveGetters,M=t("./es5.js"),A=/^(?:name|message|stack|cause)$/;function E(m){return function(R,F){if(null!==m){if(R){var B=function _(m){var R,Q;if((Q=m)instanceof Error&&M.getPrototypeOf(Q)===Error.prototype){(R=new k(m)).name=m.name,R.message=m.message,R.stack=m.stack;for(var F=M.keys(m),B=0;B<F.length;++B){var J=F[B];A.test(J)||(R[J]=m[J])}return R}return o.markAsOriginatingFromRejection(m),m}(l(R));m._attachExtraTrace(B),m._reject(B)}else if(2<arguments.length){for(var J=arguments.length,Q=new Array(J-1),U=1;U<J;++U)Q[U-1]=arguments[U];m._fulfill(Q)}else m._fulfill(F);m=null}}}if(b=O?function(m){this.promise=m}:function(m){this.promise=m,this.asCallback=E(m),this.callback=this.asCallback},O){var y={get:function(){return E(this.promise)}};M.defineProperty(b.prototype,"asCallback",y),M.defineProperty(b.prototype,"callback",y)}b._nodebackForPromise=E,b.prototype.toString=function(){return"[object PromiseResolver]"},b.prototype.resolve=b.prototype.fulfill=function(m){if(!(this instanceof b))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(m)},b.prototype.reject=function(m){if(!(this instanceof b))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(m)},b.prototype.progress=function(m){if(!(this instanceof b))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(m)},b.prototype.cancel=function(m){this.promise.cancel(m)},b.prototype.timeout=function(){this.reject(new w("timeout"))},b.prototype.isResolved=function(){return this.promise.isResolved()},b.prototype.toJSON=function(){return this.promise.toJSON()},c.exports=b},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,c,u){"use strict";c.exports=function(o,l){var f={},w=t("./util.js"),k=t("./promise_resolver.js")._nodebackForPromise,O=w.withAppended,M=w.maybeWrapAsError,b=w.canEvaluate,A=t("./errors").TypeError,_={__isPromisified__:!0},E=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),y=function(D){return w.isIdentifier(D)&&"_"!==D.charAt(0)&&"constructor"!==D};function m(D){return!E.test(D)}function R(D){try{return!0===D.__isPromisified__}catch{return!1}}function F(D,ie,Z){var ue=w.getDataPropertyOrDefault(D,ie+Z,_);return!!ue&&R(ue)}var Q=function(D){return D.replace(/([$])/,"\\$")},U=b?void 0:function(D,ie,Z,ue){var re=function(){return this}(),te=D;function ye(){var Se=ie;ie===f&&(Se=this);var Ee=new o(l);Ee._captureStackTrace();var V="string"==typeof te&&this!==re?this[te]:D,Y=k(Ee);try{V.apply(Se,O(arguments,Y))}catch(z){Ee._rejectCallback(M(z),!0,!0)}return Ee}return"string"==typeof te&&(D=ue),w.notEnumerableProp(ye,"__isPromisified__",!0),ye};function N(D,ie,Z,ue){for(var re=new RegExp(Q(ie)+"$"),te=function B(D,ie,Z,ue){for(var re=w.inheritedDataKeys(D),te=[],ye=0;ye<re.length;++ye){var Se=re[ye],Ee=D[Se],V=ue===y||y(Se,Ee,D);"function"!=typeof Ee||R(Ee)||F(D,Se,ie)||!ue(Se,Ee,D,V)||te.push(Se,Ee)}return function(Y,z,T){for(var C=0;C<Y.length;C+=2){var X=Y[C];if(T.test(X))for(var se=X.replace(T,""),ne=0;ne<Y.length;ne+=2)if(Y[ne]===se)throw new A("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",z))}}(te,ie,Z),te}(D,ie,re,Z),ye=0,Se=te.length;ye<Se;ye+=2){var Ee=te[ye],V=te[ye+1],Y=Ee+ie;if(ue===U)D[Y]=U(Ee,f,Ee,V,ie);else{var z=ue(V,function(){return U(Ee,f,Ee,V,ie)});w.notEnumerableProp(z,"__isPromisified__",!0),D[Y]=z}}return w.toFastProperties(D),D}o.promisify=function(D,ie){if("function"!=typeof D)throw new A("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(R(D))return D;var ue,Z=U(ue=D,arguments.length<2?f:ie,void 0,ue);return w.copyDescriptors(D,Z,m),Z},o.promisifyAll=function(D,ie){if("function"!=typeof D&&"object"!==_typeof4(D))throw new A("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var Z=(ie=Object(ie)).suffix;"string"!=typeof Z&&(Z="Async");var ue=ie.filter;"function"!=typeof ue&&(ue=y);var re=ie.promisifier;if("function"!=typeof re&&(re=U),!w.isIdentifier(Z))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var te=w.inheritedDataKeys(D),ye=0;ye<te.length;++ye){var Se=D[te[ye]];"constructor"!==te[ye]&&w.isClass(Se)&&(N(Se.prototype,Z,ue,re),N(Se,Z,ue,re))}return N(D,Z,ue,re)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./util.js"),O=k.isObject,M=t("./es5.js");function b(_){for(var E=M.keys(_),y=E.length,m=new Array(2*y),R=0;R<y;++R){var F=E[R];m[R]=_[F],m[R+y]=F}this.constructor$(m)}function A(_){var E,y=f(_);return O(y)?(E=y instanceof o?y._then(o.props,void 0,void 0,void 0,void 0):new b(y).promise(),y instanceof o&&E._propagateFrom(y,4),E):w("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}k.inherits(b,l),b.prototype._init=function(){this._init$(void 0,-3)},b.prototype._promiseFulfilled=function(_,E){if(this._values[E]=_,++this._totalResolved>=this._length){for(var y={},m=this.length(),R=0,F=this.length();R<F;++R)y[this._values[R+m]]=this._values[R];this._resolve(y)}},b.prototype._promiseProgressed=function(_,E){this._promise._progress({key:this._values[E+this.length()],value:_})},b.prototype.shouldCopyValues=function(){return!1},b.prototype.getActualLength=function(_){return _>>1},o.prototype.props=function(){return A(this)},o.props=function(_){return A(_)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,c,u){"use strict";function o(l){this._capacity=l,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(l){return this._capacity<l},o.prototype._pushOne=function(l){var f=this.length();this._checkCapacity(f+1),this[this._front+f&this._capacity-1]=l,this._length=f+1},o.prototype._unshiftOne=function(l){var f=this._capacity;this._checkCapacity(this.length()+1);var w=(this._front-1&f-1^f)-f;this[w]=l,this._front=w,this._length=this.length()+1},o.prototype.unshift=function(l,f,w){this._unshiftOne(w),this._unshiftOne(f),this._unshiftOne(l)},o.prototype.push=function(l,f,w){var k=this.length()+3;if(this._willBeOverCapacity(k))return this._pushOne(l),this._pushOne(f),void this._pushOne(w);var O=this._front+k-3;this._checkCapacity(k);var M=this._capacity-1;this[O+0&M]=l,this[O+1&M]=f,this[O+2&M]=w,this._length=k},o.prototype.shift=function(){var l=this._front,f=this[l];return this[l]=void 0,this._front=l+1&this._capacity-1,this._length--,f},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(l){this._capacity<l&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(l){var f=this._capacity;this._capacity=l,function(w,k,O,M,b){for(var A=0;A<b;++A)O[A+M]=w[A+0],w[A+0]=void 0}(this,0,this,f,this._front+this._length&f-1)},c.exports=o},{}],29:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./util.js").isArray,O=function(b){return b.then(function(A){return M(A,b)})};function M(b,A){var _=f(b);if(_ instanceof o)return O(_);if(!k(b))return w("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var E=new o(l);void 0!==A&&E._propagateFrom(A,5);for(var y=E._fulfill,m=E._reject,R=0,F=b.length;R<F;++R){var B=b[R];(void 0!==B||R in b)&&o.cast(B)._then(y,m,void 0,E,null)}return E}o.race=function(b){return M(b,void 0)},o.prototype.race=function(){return M(this,void 0)}}},{"./util.js":38}],30:[function(t,c,u){"use strict";c.exports=function(o,l,f,w,k){var O=o._getDomain,M=t("./async.js"),b=t("./util.js"),A=b.tryCatch,_=b.errorObj;function E(R,F,B,J){this.constructor$(R),this._promise._captureStackTrace(),this._preservedValues=J===k?[]:null,this._zerothIsAccum=void 0===B,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var Q=w(B,this._promise),U=!1,N=Q instanceof o;N&&((Q=Q._target())._isPending()?Q._proxyPromiseArray(this,-1):Q._isFulfilled()?(B=Q._value(),this._gotAccum=!0):(this._reject(Q._reason()),U=!0)),N||this._zerothIsAccum||(this._gotAccum=!0);var D=O();this._callback=null===D?F:D.bind(F),this._accum=B,U||M.invoke(y,this,void 0)}function y(){this._init$(void 0,-5)}function m(R,F,B,J){return"function"!=typeof F?f("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new E(R,F,B,J).promise()}b.inherits(E,l),E.prototype._init=function(){},E.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},E.prototype._promiseFulfilled=function(R,F){var B=this._values;B[F]=R;var J,Q=this.length(),U=this._preservedValues,N=null!==U,D=this._gotAccum,ie=this._valuesPhase;if(!ie)for(ie=this._valuesPhase=new Array(Q),J=0;J<Q;++J)ie[J]=0;if(J=ie[F],0===F&&this._zerothIsAccum?(this._accum=R,this._gotAccum=D=!0,ie[F]=0===J?1:2):-1===F?(this._accum=R,this._gotAccum=D=!0):0===J?ie[F]=1:(ie[F]=2,this._accum=R),D){for(var Z,ue=this._callback,re=this._promise._boundValue(),te=this._reducingIndex;te<Q;++te)if(2!==(J=ie[te])){if(1!==J)return;if(R=B[te],this._promise._pushContext(),Z=N?(U.push(R),A(ue).call(re,R,te,Q)):A(ue).call(re,this._accum,R,te,Q),this._promise._popContext(),Z===_)return this._reject(Z.e);var ye=w(Z,this._promise);if(ye instanceof o){if((ye=ye._target())._isPending())return ie[te]=4,ye._proxyPromiseArray(this,te);if(!ye._isFulfilled())return this._reject(ye._reason());Z=ye._value()}this._reducingIndex=te+1,this._accum=Z}else this._reducingIndex=te+1;this._resolve(N?U:this._accum)}},o.prototype.reduce=function(R,F){return m(this,R,F,null)},o.reduce=function(R,F,B,J){return m(R,F,B,J)}}},{"./async.js":2,"./util.js":38}],31:[function(t,c,u){"use strict";var o,l=t("./util");if(l.isNode&&typeof MutationObserver>"u"){var f=r.setImmediate,w=a.nextTick;o=l.isRecentNode?function(k){f.call(r,k)}:function(k){w.call(a,k)}}else typeof MutationObserver>"u"||typeof window<"u"&&window.navigator&&window.navigator.standalone?o=typeof setImmediate<"u"?function(k){setImmediate(k)}:typeof setTimeout<"u"?function(k){setTimeout(k,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(o=function(k){var O=document.createElement("div");return new MutationObserver(k).observe(O,{attributes:!0}),function(){O.classList.toggle("foo")}}).isStatic=!0;c.exports=o},{"./util":38}],32:[function(t,c,u){"use strict";c.exports=function(o,l){var f=o.PromiseInspection;function w(k){this.constructor$(k)}t("./util.js").inherits(w,l),w.prototype._promiseResolved=function(k,O){this._values[k]=O,++this._totalResolved>=this._length&&this._resolve(this._values)},w.prototype._promiseFulfilled=function(k,O){var M=new f;M._bitField=268435456,M._settledValue=k,this._promiseResolved(O,M)},w.prototype._promiseRejected=function(k,O){var M=new f;M._bitField=134217728,M._settledValue=k,this._promiseResolved(O,M)},o.settle=function(k){return new w(k).promise()},o.prototype.settle=function(){return new w(this).promise()}}},{"./util.js":38}],33:[function(t,c,u){"use strict";c.exports=function(o,l,f){var w=t("./util.js"),k=t("./errors.js").RangeError,O=t("./errors.js").AggregateError,M=w.isArray;function b(_){this.constructor$(_),this._howMany=0,this._unwrap=!1,this._initialized=!1}function A(_,E){if((0|E)!==E||E<0)return f("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var y=new b(_),m=y.promise();return y.setHowMany(E),y.init(),m}w.inherits(b,l),b.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var _=M(this._values);!this._isResolved()&&_&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},b.prototype.init=function(){this._initialized=!0,this._init()},b.prototype.setUnwrap=function(){this._unwrap=!0},b.prototype.howMany=function(){return this._howMany},b.prototype.setHowMany=function(_){this._howMany=_},b.prototype._promiseFulfilled=function(_){this._addFulfilled(_),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},b.prototype._promiseRejected=function(_){if(this._addRejected(_),this.howMany()>this._canPossiblyFulfill()){for(var E=new O,y=this.length();y<this._values.length;++y)E.push(this._values[y]);this._reject(E)}},b.prototype._fulfilled=function(){return this._totalResolved},b.prototype._rejected=function(){return this._values.length-this.length()},b.prototype._addRejected=function(_){this._values.push(_)},b.prototype._addFulfilled=function(_){this._values[this._totalResolved++]=_},b.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},b.prototype._getRangeError=function(_){return new k("Input array must contain at least "+this._howMany+" items but contains only "+_+" items")},b.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},o.some=function(_,E){return A(_,E)},o.prototype.some=function(_){return A(this,_)},o._SomePromiseArray=b}},{"./errors.js":13,"./util.js":38}],34:[function(t,c,u){"use strict";c.exports=function(o){function l(f){void 0!==f?(f=f._target(),this._bitField=f._bitField,this._settledValue=f._settledValue):(this._bitField=0,this._settledValue=void 0)}l.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},l.prototype.error=l.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},l.prototype.isFulfilled=o.prototype._isFulfilled=function(){return 0<(268435456&this._bitField)},l.prototype.isRejected=o.prototype._isRejected=function(){return 0<(134217728&this._bitField)},l.prototype.isPending=o.prototype._isPending=function(){return 0==(402653184&this._bitField)},l.prototype.isResolved=o.prototype._isResolved=function(){return 0<(402653184&this._bitField)},o.prototype.isPending=function(){return this._target()._isPending()},o.prototype.isRejected=function(){return this._target()._isRejected()},o.prototype.isFulfilled=function(){return this._target()._isFulfilled()},o.prototype.isResolved=function(){return this._target()._isResolved()},o.prototype._value=function(){return this._settledValue},o.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},o.prototype.value=function(){var f=this._target();if(!f.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return f._settledValue},o.prototype.reason=function(){var f=this._target();if(!f.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return f._unsetRejectionIsUnhandled(),f._settledValue},o.PromiseInspection=l}},{}],35:[function(t,c,u){"use strict";c.exports=function(o,l){var f=t("./util.js"),w=f.errorObj,k=f.isObject;function O(b){return b.then}var M={}.hasOwnProperty;return function(b,A){if(k(b)){if(b instanceof o)return b;if(M.call(b,"_promise0")){var _=new o(l);return b._then(_._fulfillUnchecked,_._rejectUncheckedCheckError,_._progressUnchecked,_,null),_}var E=f.tryCatch(O)(b);if(E===w)return A&&A._pushContext(),_=o.reject(E.e),A&&A._popContext(),_;if("function"==typeof E)return function(y,m,R){var F=new o(l),B=F;R&&R._pushContext(),F._captureStackTrace(),R&&R._popContext();var J=!0,Q=f.tryCatch(m).call(y,function(U){F&&(F._resolveCallback(U),F=null)},function(U){F&&(F._rejectCallback(U,J,!0),F=null)},function(U){F&&"function"==typeof F._progress&&F._progress(U)});return J=!1,F&&Q===w&&(F._rejectCallback(Q.e,!0,!0),F=null),B}(b,E,A)}return b}}},{"./util.js":38}],36:[function(t,c,u){"use strict";c.exports=function(o,l){var f=t("./util.js"),w=o.TimeoutError,k=function(A){return O(+this).thenReturn(A)},O=o.delay=function(A,_){if(void 0!==_)return _=+_,o.resolve(A)._then(k,null,null,_,void 0);_=A,A=void 0;var E=new o(l);return setTimeout(function(){E._fulfill()},_),E};function M(A){var _=this;return _ instanceof Number&&(_=+_),clearTimeout(_),A}function b(A){var _=this;throw _ instanceof Number&&(_=+_),clearTimeout(_),A}o.prototype.delay=function(A){return O(this,A)},o.prototype.timeout=function(A,_){A=+A;var E=this.then().cancellable();E._cancellationParent=this;var y=setTimeout(function(){var m,R,F;R=_,(m=E).isPending()&&(F=!f.isPrimitive(R)&&R instanceof Error?R:("string"!=typeof R&&(R="operation timed out"),new w(R)),f.markAsOriginatingFromRejection(F),m._attachExtraTrace(F),m._cancel(F))},A);return E._then(M,b,void 0,y,void 0)}}},{"./util.js":38}],37:[function(t,c,u){"use strict";c.exports=function(o,l,f,w){var k=t("./errors.js").TypeError,O=t("./util.js").inherits,M=o.PromiseInspection;function b(B){for(var J=B.length,Q=0;Q<J;++Q){var U=B[Q];if(U.isRejected())return o.reject(U.error());B[Q]=U._settledValue}return B}function A(B){setTimeout(function(){throw B},0)}function _(B,J){var Q=0,U=B.length,N=o.defer();return function D(){if(U<=Q)return N.resolve();var Z,ue,ie=(Z=B[Q++],(ue=f(Z))!==Z&&"function"==typeof Z._isDisposable&&"function"==typeof Z._getDisposer&&Z._isDisposable()&&ue._setDisposable(Z._getDisposer()),ue);if(ie instanceof o&&ie._isDisposable()){try{ie=f(ie._getDisposer().tryDispose(J),B.promise)}catch(Z){return A(Z)}if(ie instanceof o)return ie._then(D,A,null,null,null)}D()}(),N.promise}function E(B){var J=new M;return J._settledValue=B,J._bitField=268435456,_(this,J).thenReturn(B)}function y(B){var J=new M;return J._settledValue=B,J._bitField=134217728,_(this,J).thenThrow(B)}function m(B,J,Q){this._data=B,this._promise=J,this._context=Q}function R(B,J,Q){this.constructor$(B,J,Q)}function F(B){return m.isDisposer(B)?(this.resources[this.index]._setDisposable(B),B.promise()):B}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},m.prototype.tryDispose=function(B){var J=this.resource(),Q=this._context;void 0!==Q&&Q._pushContext();var U=null!==J?this.doDispose(J,B):null;return void 0!==Q&&Q._popContext(),this._promise._unsetDisposable(),this._data=null,U},m.isDisposer=function(B){return null!=B&&"function"==typeof B.resource&&"function"==typeof B.tryDispose},O(R,m),R.prototype.doDispose=function(B,J){return this.data().call(B,B,J)},o.using=function(){var B=arguments.length;if(B<2)return l("you must pass at least 2 arguments to Promise.using");var J,Q=arguments[B-1];if("function"!=typeof Q)return l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var U=!0;2===B&&Array.isArray(arguments[0])?(B=(J=arguments[0]).length,U=!1):(J=arguments,B--);for(var N=new Array(B),D=0;D<B;++D){var ie=J[D];if(m.isDisposer(ie)){var Z=ie;(ie=ie.promise())._setDisposable(Z)}else{var ue=f(ie);ue instanceof o&&(ie=ue._then(F,null,null,{resources:N,index:D},void 0))}N[D]=ie}var re=o.settle(N).then(b).then(function(te){var ye;re._pushContext();try{ye=U?Q.apply(void 0,te):Q.call(void 0,te)}finally{re._popContext()}return ye})._then(E,y,void 0,N,void 0);return N.promise=re},o.prototype._setDisposable=function(B){this._bitField=262144|this._bitField,this._disposer=B},o.prototype._isDisposable=function(){return 0<(262144&this._bitField)},o.prototype._getDisposer=function(){return this._disposer},o.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},o.prototype.disposer=function(B){if("function"==typeof B)return new R(B,this,w());throw new k}}},{"./errors.js":13,"./util.js":38}],38:[function(t,c,u){"use strict";var k,o=t("./es5.js"),l=typeof navigator>"u",f=function(){try{var z={};return o.defineProperty(z,"f",{get:function(){return 3}}),3===z.f}catch{return!1}}(),w={e:{}};function O(){try{var z=k;return k=null,z.apply(this,arguments)}catch(T){return w.e=T,w}}function A(z){return null==z||!0===z||!1===z||"string"==typeof z||"number"==typeof z}function R(z,T,C){return A(z)||o.defineProperty(z,T,{value:C,configurable:!0,enumerable:!1,writable:!0}),z}var B=function(){var z=[Array.prototype,Object.prototype,Function.prototype],T=function(se){for(var ne=0;ne<z.length;++ne)if(z[ne]===se)return!0;return!1};if(o.isES5){var C=Object.getOwnPropertyNames;return function(se){for(var ne=[],be=Object.create(null);null!=se&&!T(se);){var Me;try{Me=C(se)}catch{return ne}for(var $e=0;$e<Me.length;++$e){var Ue=Me[$e];if(!be[Ue]){be[Ue]=!0;var Fe=Object.getOwnPropertyDescriptor(se,Ue);null!=Fe&&null==Fe.get&&null==Fe.set&&ne.push(Ue)}}se=o.getPrototypeOf(se)}return ne}}var X={}.hasOwnProperty;return function(se){if(T(se))return[];var ne=[];e:for(var be in se)if(X.call(se,be))ne.push(be);else{for(var Me=0;Me<z.length;++Me)if(X.call(z[Me],be))continue e;ne.push(be)}return ne}}(),J=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i;function Z(z){try{return z+""}catch{return"[no string representation]"}}function te(z){return z instanceof Error&&o.propertyIsWritable(z,"stack")}var ye="stack"in new Error?function(z){return te(z)?z:new Error(Z(z))}:function(z){if(te(z))return z;try{throw new Error(Z(z))}catch(T){return T}};function Se(z){return{}.toString.call(z)}var Y,V={isClass:function Q(z){try{if("function"==typeof z){var T=o.names(z.prototype),C=o.isES5&&1<T.length,X=0<T.length&&!(1===T.length&&"constructor"===T[0]),se=J.test(z+"")&&0<o.names(z).length;if(C||X||se)return!0}return!1}catch{return!1}},isIdentifier:function D(z){return N.test(z)},inheritedDataKeys:B,getDataPropertyOrDefault:function m(z,T,C){if(!o.isES5)return{}.hasOwnProperty.call(z,T)?z[T]:void 0;var X=Object.getOwnPropertyDescriptor(z,T);return null!=X?null==X.get&&null==X.set?X.value:C:void 0},thrower:function F(z){throw z},isArray:o.isArray,haveGetters:f,notEnumerableProp:R,isPrimitive:A,isObject:function _(z){return!A(z)},canEvaluate:l,errorObj:w,tryCatch:function M(z){return k=z,O},inherits:function(z,T){var C={}.hasOwnProperty;function X(){for(var se in this.constructor=z,(this.constructor$=T).prototype)C.call(T.prototype,se)&&"$"!==se.charAt(se.length-1)&&(this[se+"$"]=T.prototype[se])}return X.prototype=T.prototype,z.prototype=new X,z.prototype},withAppended:function y(z,T){var C,X=z.length,se=new Array(X+1);for(C=0;C<X;++C)se[C]=z[C];return se[C]=T,se},maybeWrapAsError:function E(z){return A(z)?new Error(Z(z)):z},toFastProperties:function U(z){function T(){}T.prototype=z;for(var C=8;C--;)new T;return z},filledRange:function ie(z,T,C){for(var X=new Array(z),se=0;se<z;++se)X[se]=T+se+C;return X},toString:Z,canAttachTrace:te,ensureErrorObject:ye,originatesFromRejection:function re(z){return null!=z&&(z instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===z.isOperational)},markAsOriginatingFromRejection:function ue(z){try{R(z,"isOperational",!0)}catch{}},classString:Se,copyDescriptors:function Ee(z,T,C){for(var X=o.names(z),se=0;se<X.length;++se){var ne=X[se];if(C(ne))try{o.defineProperty(T,ne,o.getDescriptor(z,ne))}catch{}}},hasDevTools:typeof chrome<"u"&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==a&&"[object process]"===Se(a).toLowerCase()};V.isRecentNode=V.isNode&&(0===(Y=a.versions.node.split(".").map(Number))[0]&&10<Y[1]||0<Y[0]),V.isNode&&V.toFastProperties(a);try{throw new Error}catch(z){V.lastLineError=z}c.exports=V},{"./es5.js":14}]},{},[4])(4)},"object"==_typeof4(h)&&void 0!==g?g.exports=p():(typeof window<"u"?n=window:void 0!==r?n=r:typeof self<"u"&&(n=self),n.Promise=p()),typeof window<"u"&&null!==window?window.P=window.Promise:typeof self<"u"&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:225}],66:[function(e,g,h){(function(){var a,r=function(n,s){return function(){return n.apply(s,arguments)}},p=[].slice;a=function(){function n(s,t,c,u,o){this.maxNb=s??0,this.minTime=t??0,this.highWater=c??-1,this.strategy=u??n.prototype.strategy.LEAK,this.rejectOnDrop=null!=o&&o,this.schedulePriority=r(this.schedulePriority,this),this.submitPriority=r(this.submitPriority,this),this.submit=r(this.submit,this),this._nextRequest=Date.now(),this._nbRunning=0,this._queues=this._makeQueues(),this._running={},this._nextIndex=0,this._unblockTime=0,this.penalty=15*this.minTime||5e3,this.interrupt=!1,this.reservoir=null,this.limiter=null,this.events={}}return(n.default=n).strategy=n.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},n.Cluster=n.prototype.Cluster=e("./Cluster"),n.DLList=n.prototype.DLList=e("./DLList"),n.Promise=n.prototype.Promise=function(){try{return e("bluebird")}catch(s){return typeof Promise<"u"&&null!==Promise?Promise:function(){throw new Error("Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support")}}}(),n.prototype._trigger=function(s,t){return this.rejectOnDrop&&"dropped"===s&&t[0].cb.apply({},[new Error("This job has been dropped by Bottleneck")]),setTimeout((c=this,function(){var u;return null!=(u=c.events[s])?u.forEach(function(o){return o.apply({},t)}):void 0}),0);var c},n.prototype._makeQueues=function(){var s,t;for(t=[],s=1;s<=10;++s)t.push(new n.prototype.DLList);return t},n.prototype.chain=function(s){return this.limiter=s,this},n.prototype.isBlocked=function(){return this._unblockTime>=Date.now()},n.prototype._sanitizePriority=function(s){var t;return(t=~~s!==s?5:s)<0?0:9<t?9:t},n.prototype._find=function(s,t){var c,u,o,l;for(c=u=0,o=s.length;u<o;c=++u)if(t(l=s[c]))return l;return[]},n.prototype.nbQueued=function(s){return null!=s?this._queues[this._sanitizePriority(s)].length:this._queues.reduce(function(t,c){return t+c.length},0)},n.prototype.nbRunning=function(){return this._nbRunning},n.prototype._getFirst=function(s){return this._find(s,function(t){return 0<t.length})},n.prototype._conditionsCheck=function(){return(this.nbRunning()<this.maxNb||this.maxNb<=0)&&(null==this.reservoir||0<this.reservoir)},n.prototype.check=function(){return this._conditionsCheck()&&this._nextRequest-Date.now()<=0},n.prototype._tryToRun=function(){var s,t,c,u,o,l;return!!(this._conditionsCheck()&&0<(u=this.nbQueued()))&&(this._nbRunning++,null!=this.reservoir&&this.reservoir--,o=Math.max(this._nextRequest-Date.now(),0),this._nextRequest=Date.now()+o+this.minTime,c=this._getFirst(this._queues).shift(),1===u&&this._trigger("empty",[]),s=!1,t=this._nextIndex++,this._running[t]={timeout:setTimeout((l=this,function(){var f;return f=function(){var w;if(!s&&(s=!0,delete l._running[t],l._nbRunning--,l._tryToRun(),0===l.nbRunning()&&0===l.nbQueued()&&l._trigger("idle",[]),!l.interrupt))return null!=(w=c.cb)?w.apply({},Array.prototype.slice.call(arguments,0)):void 0},null!=l.limiter?l.limiter.submit.apply(l.limiter,Array.prototype.concat(c.task,c.args,f)):c.task.apply({},c.args.concat(f))}),o),job:c},!0)},n.prototype.submit=function(){var s;return s=1<=arguments.length?p.call(arguments,0):[],this.submitPriority.apply({},Array.prototype.concat(5,s))},n.prototype.submitPriority=function(){var s,t,c,u,o;return c=arguments[0],t={task:arguments[1],args:4<=arguments.length?p.call(arguments,2,s=arguments.length-1):(s=2,[]),cb:arguments[s++]},c=this._sanitizePriority(c),u=0<=this.highWater&&this.nbQueued()===this.highWater&&!this.check(),this.strategy===n.prototype.strategy.BLOCK&&(u||this.isBlocked())?(this._unblockTime=Date.now()+this.penalty,this._nextRequest=this._unblockTime+this.minTime,this._queues=this._makeQueues(),this._trigger("dropped",[t]),!0):(u&&(null!=(o=this.strategy===n.prototype.strategy.LEAK?this._getFirst(this._queues.slice(c).reverse()).shift():this.strategy===n.prototype.strategy.OVERFLOW_PRIORITY?this._getFirst(this._queues.slice(c+1).reverse()).shift():this.strategy===n.prototype.strategy.OVERFLOW?t:void 0)&&this._trigger("dropped",[o]),null==o||this.strategy===n.prototype.strategy.OVERFLOW)||(this._queues[c].push(t),this._tryToRun()),u)},n.prototype.schedule=function(){var s;return s=1<=arguments.length?p.call(arguments,0):[],this.schedulePriority.apply({},Array.prototype.concat(5,s))},n.prototype.schedulePriority=function(){var s,t,c,u,o;return t=arguments[0],c=arguments[1],s=3<=arguments.length?p.call(arguments,2):[],u=function(){var l,f,w;return l=2<=arguments.length?p.call(arguments,0,w=arguments.length-1):(w=0,[]),f=arguments[w++],c.apply({},l).then(function(){var k;return k=1<=arguments.length?p.call(arguments,0):[],f.apply({},Array.prototype.concat(null,k))}).catch(function(){var k;return k=1<=arguments.length?p.call(arguments,0):[],f.apply({},k)})},new n.prototype.Promise((o=this,function(l,f){return o.submitPriority.apply({},Array.prototype.concat(t,u,s,function(){var w;return(null!=(w=1<=arguments.length?p.call(arguments,0):[])[0]?f:(w.shift(),l)).apply({},w)}))}))},n.prototype.changeSettings=function(s,t,c,u,o){for(this.maxNb=s??this.maxNb,this.minTime=t??this.minTime,this.highWater=c??this.highWater,this.strategy=u??this.strategy,this.rejectOnDrop=o??this.rejectOnDrop;this._tryToRun(););return this},n.prototype.changePenalty=function(s){return this.penalty=s??this.penalty,this},n.prototype.changeReservoir=function(s){for(this.reservoir=s;this._tryToRun(););return this},n.prototype.incrementReservoir=function(s){return null==s&&(s=0),this.changeReservoir(this.reservoir+s),this},n.prototype.on=function(s,t){return null!=this.events[s]?this.events[s].push(t):this.events[s]=[t],this},n.prototype.removeAllListeners=function(s){return null==s&&(s=null),null!=s?delete this.events[s]:this.events={},this},n.prototype.stopAll=function(s){var t,c,u,o,l,f,w;for(this.interrupt=s??this.interrupt,t=0,f=(o=Object.keys(this._running)).length;t<f;t++)u=o[t],clearTimeout(this._running[u].timeout);if(this._tryToRun=function(){},this.check=function(){return!1},this.submit=this.submitPriority=function(){var k;return 2<=arguments.length?p.call(arguments,0,k=arguments.length-1):k=0,(0,arguments[k++])(new Error("This limiter is stopped"))},this.schedule=this.schedulePriority=function(){return Promise.reject(new Error("This limiter is stopped"))},this.interrupt)for(l=0,w=o.length;l<w;l++)this._trigger("dropped",[this._running[u=o[l]].job]);for(;c=this._getFirst(this._queues).shift();)this._trigger("dropped",[c]);return this._trigger("empty",[]),0===this.nbRunning()&&this._trigger("idle",[]),this},n}(),g.exports=a}).call(this)},{"./Cluster":67,"./DLList":68,bluebird:65}],67:[function(e,g,h){(function(){var a,r={}.hasOwnProperty;a=function(){function p(n,s,t,c,u){this.maxNb=n,this.minTime=s,this.highWater=t,this.strategy=c,this.rejectOnDrop=u,this.limiters={},this.Bottleneck=e("./Bottleneck"),this.timeout=3e5,this.startAutoCleanup()}return p.prototype.key=function(n){var s;return null==n&&(n=""),null!=(s=this.limiters[n])?s:this.limiters[n]=new this.Bottleneck(this.maxNb,this.minTime,this.highWater,this.strategy,this.rejectOnDrop)},p.prototype.deleteKey=function(n){return null==n&&(n=""),delete this.limiters[n]},p.prototype.all=function(n){var s,t,c;for(s in c=[],t=this.limiters)r.call(t,s)&&c.push(n(t[s]));return c},p.prototype.keys=function(){return Object.keys(this.limiters)},p.prototype.startAutoCleanup=function(){var n,s;return this.stopAutoCleanup(),"function"==typeof(n=this.interval=setInterval((s=this,function(){var t,c,u,o;for(t in o=Date.now(),u=[],c=s.limiters)u.push(c[t]._nextRequest+s.timeout<o?s.deleteKey(t):void 0);return u}),this.timeout/10)).unref?n.unref():void 0},p.prototype.stopAutoCleanup=function(){return clearInterval(this.interval)},p.prototype.changeTimeout=function(n){return this.timeout=n,this.startAutoCleanup()},p}(),g.exports=a}).call(this)},{"./Bottleneck":66}],68:[function(e,g,h){(function(){var a;a=function(){function r(){this._first=null,this._last=null,this.length=0}return r.prototype.push=function(p){var n;this.length++,n={value:p,next:null},null!=this._last?(this._last.next=n,this._last=n):this._first=this._last=n},r.prototype.shift=function(){var p,n;if(null!=this._first)return this.length--,n=this._first.value,this._first=null!=(p=this._first.next)?p:this._last=null,n},r.prototype.getArray=function(){var p,n,s;for(p=this._first,s=[];null!=p;)s.push((p=(n=p).next,n.value));return s},r}(),g.exports=a}).call(this)},{}],69:[function(e,g,h){(function(a){(function(){g.exports=e("./Bottleneck"),null!=a.window&&(a.window.Bottleneck=g.exports)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./Bottleneck":66}],70:[function(e,g,h){},{}],71:[function(e,g,h){"use strict";var a=e("base64-js"),r=e("ieee754");h.Buffer=s,h.SlowBuffer=function(T){return+T!=T&&(T=0),s.alloc(+T)},h.INSPECT_MAX_BYTES=50;var p=2147483647;function n(T){if(p<T)throw new RangeError("Invalid typed array length");var C=new Uint8Array(T);return C.__proto__=s.prototype,C}function s(T,C,X){if("number"!=typeof T)return t(T,C,X);if("string"==typeof C)throw new Error("If encoding is specified then the first argument must be a string");return u(T)}function t(T,C,X){if("number"==typeof T)throw new TypeError('"value" argument must not be a number');return V(T)?function(se,ne,be){if(ne<0||se.byteLength<ne)throw new RangeError("'offset' is out of bounds");if(se.byteLength<ne+(be||0))throw new RangeError("'length' is out of bounds");var Me;return(Me=void 0===ne&&void 0===be?new Uint8Array(se):void 0===be?new Uint8Array(se,ne):new Uint8Array(se,ne,be)).__proto__=s.prototype,Me}(T,C,X):"string"==typeof T?function(se,ne){if("string"==typeof ne&&""!==ne||(ne="utf8"),!s.isEncoding(ne))throw new TypeError('"encoding" must be a valid string encoding');var be=0|f(se,ne),Me=n(be),$e=Me.write(se,ne);return $e!==be&&(Me=Me.slice(0,$e)),Me}(T,C):function(se){if(s.isBuffer(se)){var ne=0|l(se.length),be=n(ne);return 0===be.length||se.copy(be,0,0,ne),be}if(se){if(Y(se)||"length"in se)return"number"!=typeof se.length||z(se.length)?n(0):o(se);if("Buffer"===se.type&&Array.isArray(se.data))return o(se.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(T)}function c(T){if("number"!=typeof T)throw new TypeError('"size" argument must be a number');if(T<0)throw new RangeError('"size" argument must not be negative')}function u(T){return c(T),n(T<0?0:0|l(T))}function o(T){for(var C=T.length<0?0:0|l(T.length),X=n(C),se=0;se<C;se+=1)X[se]=255&T[se];return X}function l(T){if(p<=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|T}function f(T,C){if(s.isBuffer(T))return T.length;if(Y(T)||V(T))return T.byteLength;"string"!=typeof T&&(T=""+T);var X=T.length;if(0===X)return 0;for(var se=!1;;)switch(C){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":case void 0:return ye(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return Se(T).length;default:if(se)return ye(T).length;C=(""+C).toLowerCase(),se=!0}}function w(T,C,X){var se=T[C];T[C]=T[X],T[X]=se}function k(T,C,X,se,ne){if(0===T.length)return-1;if("string"==typeof X?(se=X,X=0):2147483647<X?X=2147483647:X<-2147483648&&(X=-2147483648),z(X=+X)&&(X=ne?0:T.length-1),X<0&&(X=T.length+X),X>=T.length){if(ne)return-1;X=T.length-1}else if(X<0){if(!ne)return-1;X=0}if("string"==typeof C&&(C=s.from(C,se)),s.isBuffer(C))return 0===C.length?-1:O(T,C,X,se,ne);if("number"==typeof C)return C&=255,"function"==typeof Uint8Array.prototype.indexOf?ne?Uint8Array.prototype.indexOf.call(T,C,X):Uint8Array.prototype.lastIndexOf.call(T,C,X):O(T,[C],X,se,ne);throw new TypeError("val must be string, number or Buffer")}function O(T,C,X,se,ne){var be,Me=1,$e=T.length,Ue=C.length;if(void 0!==se&&("ucs2"===(se=String(se).toLowerCase())||"ucs-2"===se||"utf16le"===se||"utf-16le"===se)){if(T.length<2||C.length<2)return-1;$e/=Me=2,Ue/=2,X/=2}function Fe(ot,ht){return 1===Me?ot[ht]:ot.readUInt16BE(ht*Me)}if(ne){var qe=-1;for(be=X;be<$e;be++)if(Fe(T,be)===Fe(C,-1===qe?0:be-qe)){if(-1===qe&&(qe=be),be-qe+1===Ue)return qe*Me}else-1!==qe&&(be-=be-qe),qe=-1}else for($e<X+Ue&&(X=$e-Ue),be=X;0<=be;be--){for(var Mt=!0,tt=0;tt<Ue;tt++)if(Fe(T,be+tt)!==Fe(C,tt)){Mt=!1;break}if(Mt)return be}return-1}function M(T,C,X,se){X=Number(X)||0;var ne=T.length-X;se?ne<(se=Number(se))&&(se=ne):se=ne;var be=C.length;if(be%2!=0)throw new TypeError("Invalid hex string");be/2<se&&(se=be/2);for(var Me=0;Me<se;++Me){var $e=parseInt(C.substr(2*Me,2),16);if(z($e))return Me;T[X+Me]=$e}return Me}function b(T,C,X,se){return Ee(ye(C,T.length-X),T,X,se)}function A(T,C,X,se){return Ee(function(ne){for(var be=[],Me=0;Me<ne.length;++Me)be.push(255&ne.charCodeAt(Me));return be}(C),T,X,se)}function _(T,C,X,se){return A(T,C,X,se)}function E(T,C,X,se){return Ee(Se(C),T,X,se)}function y(T,C,X,se){return Ee(function(ne,be){for(var Me,$e,Fe=[],qe=0;qe<ne.length&&!((be-=2)<0);++qe)$e=(Me=ne.charCodeAt(qe))>>8,Fe.push(Me%256),Fe.push($e);return Fe}(C,T.length-X),T,X,se)}function m(T,C,X){return a.fromByteArray(0===C&&X===T.length?T:T.slice(C,X))}function R(T,C,X){X=Math.min(T.length,X);for(var se=[],ne=C;ne<X;){var be,Me,$e,Ue,Fe=T[ne],qe=null,Mt=239<Fe?4:223<Fe?3:191<Fe?2:1;if(ne+Mt<=X)switch(Mt){case 1:Fe<128&&(qe=Fe);break;case 2:128==(192&(be=T[ne+1]))&&127<(Ue=(31&Fe)<<6|63&be)&&(qe=Ue);break;case 3:Me=T[ne+2],128==(192&(be=T[ne+1]))&&128==(192&Me)&&2047<(Ue=(15&Fe)<<12|(63&be)<<6|63&Me)&&(Ue<55296||57343<Ue)&&(qe=Ue);break;case 4:Me=T[ne+2],$e=T[ne+3],128==(192&(be=T[ne+1]))&&128==(192&Me)&&128==(192&$e)&&65535<(Ue=(15&Fe)<<18|(63&be)<<12|(63&Me)<<6|63&$e)&&Ue<1114112&&(qe=Ue)}null===qe?(qe=65533,Mt=1):65535<qe&&(se.push((qe-=65536)>>>10&1023|55296),qe=56320|1023&qe),se.push(qe),ne+=Mt}return function(tt){var ot=tt.length;if(ot<=F)return String.fromCharCode.apply(String,tt);for(var ht="",kt=0;kt<ot;)ht+=String.fromCharCode.apply(String,tt.slice(kt,kt+=F));return ht}(se)}h.kMaxLength=p,(s.TYPED_ARRAY_SUPPORT=function(){try{var T=new Uint8Array(1);return T.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===T.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(T,C,X){return t(T,C,X)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(T,C,X){return ne=C,be=X,c(se=T),se<=0?n(se):void 0!==ne?"string"==typeof be?n(se).fill(ne,be):n(se).fill(ne):n(se);var se,ne,be},s.allocUnsafe=function(T){return u(T)},s.allocUnsafeSlow=function(T){return u(T)},s.isBuffer=function(T){return null!=T&&!0===T._isBuffer},s.compare=function(T,C){if(!s.isBuffer(T)||!s.isBuffer(C))throw new TypeError("Arguments must be Buffers");if(T===C)return 0;for(var X=T.length,se=C.length,ne=0,be=Math.min(X,se);ne<be;++ne)if(T[ne]!==C[ne]){X=T[ne],se=C[ne];break}return X<se?-1:se<X?1:0},s.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(T,C){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(0===T.length)return s.alloc(0);var X;if(void 0===C)for(X=C=0;X<T.length;++X)C+=T[X].length;var se=s.allocUnsafe(C),ne=0;for(X=0;X<T.length;++X){var be=T[X];if(!s.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(se,ne),ne+=be.length}return se},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var T=this.length;if(T%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var C=0;C<T;C+=2)w(this,C,C+1);return this},s.prototype.swap32=function(){var T=this.length;if(T%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var C=0;C<T;C+=4)w(this,C,C+3),w(this,C+1,C+2);return this},s.prototype.swap64=function(){var T=this.length;if(T%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var C=0;C<T;C+=8)w(this,C,C+7),w(this,C+1,C+6),w(this,C+2,C+5),w(this,C+3,C+4);return this},s.prototype.toString=function(){var T=this.length;return 0===T?"":0===arguments.length?R(this,0,T):function(C,X,se){var ne=!1;if((void 0===X||X<0)&&(X=0),X>this.length||((void 0===se||se>this.length)&&(se=this.length),se<=0)||(se>>>=0)<=(X>>>=0))return"";for(C||(C="utf8");;)switch(C){case"hex":return Q(this,X,se);case"utf8":case"utf-8":return R(this,X,se);case"ascii":return B(this,X,se);case"latin1":case"binary":return J(this,X,se);case"base64":return m(this,X,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,X,se);default:if(ne)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),ne=!0}}.apply(this,arguments)},s.prototype.equals=function(T){if(!s.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T||0===s.compare(this,T)},s.prototype.inspect=function(){var T="",C=h.INSPECT_MAX_BYTES;return 0<this.length&&(T=this.toString("hex",0,C).match(/.{2}/g).join(" "),this.length>C&&(T+=" ... ")),"<Buffer "+T+">"},s.prototype.compare=function(T,C,X,se,ne){if(!s.isBuffer(T))throw new TypeError("Argument must be a Buffer");if(void 0===C&&(C=0),void 0===X&&(X=T?T.length:0),void 0===se&&(se=0),void 0===ne&&(ne=this.length),C<0||X>T.length||se<0||ne>this.length)throw new RangeError("out of range index");if(ne<=se&&X<=C)return 0;if(ne<=se)return-1;if(X<=C)return 1;if(this===T)return 0;for(var be=(ne>>>=0)-(se>>>=0),Me=(X>>>=0)-(C>>>=0),$e=Math.min(be,Me),Ue=this.slice(se,ne),Fe=T.slice(C,X),qe=0;qe<$e;++qe)if(Ue[qe]!==Fe[qe]){be=Ue[qe],Me=Fe[qe];break}return be<Me?-1:Me<be?1:0},s.prototype.includes=function(T,C,X){return-1!==this.indexOf(T,C,X)},s.prototype.indexOf=function(T,C,X){return k(this,T,C,X,!0)},s.prototype.lastIndexOf=function(T,C,X){return k(this,T,C,X,!1)},s.prototype.write=function(T,C,X,se){if(void 0===C)se="utf8",X=this.length,C=0;else if(void 0===X&&"string"==typeof C)se=C,X=this.length,C=0;else{if(!isFinite(C))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");C>>>=0,isFinite(X)?(X>>>=0,void 0===se&&(se="utf8")):(se=X,X=void 0)}var ne=this.length-C;if((void 0===X||ne<X)&&(X=ne),0<T.length&&(X<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var be=!1;;)switch(se){case"hex":return M(this,T,C,X);case"utf8":case"utf-8":return b(this,T,C,X);case"ascii":return A(this,T,C,X);case"latin1":case"binary":return _(this,T,C,X);case"base64":return E(this,T,C,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,T,C,X);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),be=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function B(T,C,X){var se="";X=Math.min(T.length,X);for(var ne=C;ne<X;++ne)se+=String.fromCharCode(127&T[ne]);return se}function J(T,C,X){var se="";X=Math.min(T.length,X);for(var ne=C;ne<X;++ne)se+=String.fromCharCode(T[ne]);return se}function Q(T,C,X){var se=T.length;(!C||C<0)&&(C=0),(!X||X<0||se<X)&&(X=se);for(var ne="",be=C;be<X;++be)ne+=te(T[be]);return ne}function U(T,C,X){for(var se=T.slice(C,X),ne="",be=0;be<se.length;be+=2)ne+=String.fromCharCode(se[be]+256*se[be+1]);return ne}function N(T,C,X){if(T%1!=0||T<0)throw new RangeError("offset is not uint");if(X<T+C)throw new RangeError("Trying to access beyond buffer length")}function D(T,C,X,se,ne,be){if(!s.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne<C||C<be)throw new RangeError('"value" argument is out of bounds');if(X+se>T.length)throw new RangeError("Index out of range")}function ie(T,C,X,se,ne,be){if(X+se>T.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Z(T,C,X,se,ne){return C=+C,X>>>=0,ne||ie(T,0,X,4),r.write(T,C,X,se,23,4),X+4}function ue(T,C,X,se,ne){return C=+C,X>>>=0,ne||ie(T,0,X,8),r.write(T,C,X,se,52,8),X+8}s.prototype.slice=function(T,C){var X=this.length;(T=~~T)<0?(T+=X)<0&&(T=0):X<T&&(T=X),(C=void 0===C?X:~~C)<0?(C+=X)<0&&(C=0):X<C&&(C=X),C<T&&(C=T);var se=this.subarray(T,C);return se.__proto__=s.prototype,se},s.prototype.readUIntLE=function(T,C,X){T>>>=0,C>>>=0,X||N(T,C,this.length);for(var se=this[T],ne=1,be=0;++be<C&&(ne*=256);)se+=this[T+be]*ne;return se},s.prototype.readUIntBE=function(T,C,X){T>>>=0,C>>>=0,X||N(T,C,this.length);for(var se=this[T+--C],ne=1;0<C&&(ne*=256);)se+=this[T+--C]*ne;return se},s.prototype.readUInt8=function(T,C){return T>>>=0,C||N(T,1,this.length),this[T]},s.prototype.readUInt16LE=function(T,C){return T>>>=0,C||N(T,2,this.length),this[T]|this[T+1]<<8},s.prototype.readUInt16BE=function(T,C){return T>>>=0,C||N(T,2,this.length),this[T]<<8|this[T+1]},s.prototype.readUInt32LE=function(T,C){return T>>>=0,C||N(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+16777216*this[T+3]},s.prototype.readUInt32BE=function(T,C){return T>>>=0,C||N(T,4,this.length),16777216*this[T]+(this[T+1]<<16|this[T+2]<<8|this[T+3])},s.prototype.readIntLE=function(T,C,X){T>>>=0,C>>>=0,X||N(T,C,this.length);for(var se=this[T],ne=1,be=0;++be<C&&(ne*=256);)se+=this[T+be]*ne;return(ne*=128)<=se&&(se-=Math.pow(2,8*C)),se},s.prototype.readIntBE=function(T,C,X){T>>>=0,C>>>=0,X||N(T,C,this.length);for(var se=C,ne=1,be=this[T+--se];0<se&&(ne*=256);)be+=this[T+--se]*ne;return(ne*=128)<=be&&(be-=Math.pow(2,8*C)),be},s.prototype.readInt8=function(T,C){return T>>>=0,C||N(T,1,this.length),128&this[T]?-1*(255-this[T]+1):this[T]},s.prototype.readInt16LE=function(T,C){T>>>=0,C||N(T,2,this.length);var X=this[T]|this[T+1]<<8;return 32768&X?4294901760|X:X},s.prototype.readInt16BE=function(T,C){T>>>=0,C||N(T,2,this.length);var X=this[T+1]|this[T]<<8;return 32768&X?4294901760|X:X},s.prototype.readInt32LE=function(T,C){return T>>>=0,C||N(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},s.prototype.readInt32BE=function(T,C){return T>>>=0,C||N(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},s.prototype.readFloatLE=function(T,C){return T>>>=0,C||N(T,4,this.length),r.read(this,T,!0,23,4)},s.prototype.readFloatBE=function(T,C){return T>>>=0,C||N(T,4,this.length),r.read(this,T,!1,23,4)},s.prototype.readDoubleLE=function(T,C){return T>>>=0,C||N(T,8,this.length),r.read(this,T,!0,52,8)},s.prototype.readDoubleBE=function(T,C){return T>>>=0,C||N(T,8,this.length),r.read(this,T,!1,52,8)},s.prototype.writeUIntLE=function(T,C,X,se){T=+T,C>>>=0,X>>>=0,se||D(this,T,C,X,Math.pow(2,8*X)-1,0);var ne=1,be=0;for(this[C]=255&T;++be<X&&(ne*=256);)this[C+be]=T/ne&255;return C+X},s.prototype.writeUIntBE=function(T,C,X,se){T=+T,C>>>=0,X>>>=0,se||D(this,T,C,X,Math.pow(2,8*X)-1,0);var ne=X-1,be=1;for(this[C+ne]=255&T;0<=--ne&&(be*=256);)this[C+ne]=T/be&255;return C+X},s.prototype.writeUInt8=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,1,255,0),this[C]=255&T,C+1},s.prototype.writeUInt16LE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,2,65535,0),this[C]=255&T,this[C+1]=T>>>8,C+2},s.prototype.writeUInt16BE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,2,65535,0),this[C]=T>>>8,this[C+1]=255&T,C+2},s.prototype.writeUInt32LE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,4,4294967295,0),this[C+3]=T>>>24,this[C+2]=T>>>16,this[C+1]=T>>>8,this[C]=255&T,C+4},s.prototype.writeUInt32BE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,4,4294967295,0),this[C]=T>>>24,this[C+1]=T>>>16,this[C+2]=T>>>8,this[C+3]=255&T,C+4},s.prototype.writeIntLE=function(T,C,X,se){if(T=+T,C>>>=0,!se){var ne=Math.pow(2,8*X-1);D(this,T,C,X,ne-1,-ne)}var be=0,Me=1,$e=0;for(this[C]=255&T;++be<X&&(Me*=256);)T<0&&0===$e&&0!==this[C+be-1]&&($e=1),this[C+be]=(T/Me>>0)-$e&255;return C+X},s.prototype.writeIntBE=function(T,C,X,se){if(T=+T,C>>>=0,!se){var ne=Math.pow(2,8*X-1);D(this,T,C,X,ne-1,-ne)}var be=X-1,Me=1,$e=0;for(this[C+be]=255&T;0<=--be&&(Me*=256);)T<0&&0===$e&&0!==this[C+be+1]&&($e=1),this[C+be]=(T/Me>>0)-$e&255;return C+X},s.prototype.writeInt8=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,1,127,-128),T<0&&(T=255+T+1),this[C]=255&T,C+1},s.prototype.writeInt16LE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,2,32767,-32768),this[C]=255&T,this[C+1]=T>>>8,C+2},s.prototype.writeInt16BE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,2,32767,-32768),this[C]=T>>>8,this[C+1]=255&T,C+2},s.prototype.writeInt32LE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,4,2147483647,-2147483648),this[C]=255&T,this[C+1]=T>>>8,this[C+2]=T>>>16,this[C+3]=T>>>24,C+4},s.prototype.writeInt32BE=function(T,C,X){return T=+T,C>>>=0,X||D(this,T,C,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[C]=T>>>24,this[C+1]=T>>>16,this[C+2]=T>>>8,this[C+3]=255&T,C+4},s.prototype.writeFloatLE=function(T,C,X){return Z(this,T,C,!0,X)},s.prototype.writeFloatBE=function(T,C,X){return Z(this,T,C,!1,X)},s.prototype.writeDoubleLE=function(T,C,X){return ue(this,T,C,!0,X)},s.prototype.writeDoubleBE=function(T,C,X){return ue(this,T,C,!1,X)},s.prototype.copy=function(T,C,X,se){if(X||(X=0),se||0===se||(se=this.length),C>=T.length&&(C=T.length),C||(C=0),0<se&&se<X&&(se=X),se===X||0===T.length||0===this.length)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("sourceStart out of bounds");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),T.length-C<se-X&&(se=T.length-C+X);var ne,be=se-X;if(this===T&&X<C&&C<se)for(ne=be-1;0<=ne;--ne)T[ne+C]=this[ne+X];else if(be<1e3)for(ne=0;ne<be;++ne)T[ne+C]=this[ne+X];else Uint8Array.prototype.set.call(T,this.subarray(X,X+be),C);return be},s.prototype.fill=function(T,C,X,se){if("string"==typeof T){if("string"==typeof C?(se=C,C=0,X=this.length):"string"==typeof X&&(se=X,X=this.length),1===T.length){var ne=T.charCodeAt(0);ne<256&&(T=ne)}if(void 0!==se&&"string"!=typeof se)throw new TypeError("encoding must be a string");if("string"==typeof se&&!s.isEncoding(se))throw new TypeError("Unknown encoding: "+se)}else"number"==typeof T&&(T&=255);if(C<0||this.length<C||this.length<X)throw new RangeError("Out of range index");if(X<=C)return this;var be;if(C>>>=0,X=void 0===X?this.length:X>>>0,T||(T=0),"number"==typeof T)for(be=C;be<X;++be)this[be]=T;else{var Me=s.isBuffer(T)?T:new s(T,se),$e=Me.length;for(be=0;be<X-C;++be)this[be+C]=Me[be%$e]}return this};var re=/[^+/0-9A-Za-z-_]/g;function te(T){return T<16?"0"+T.toString(16):T.toString(16)}function ye(T,C){var X;C=C||1/0;for(var se=T.length,ne=null,be=[],Me=0;Me<se;++Me){if(55295<(X=T.charCodeAt(Me))&&X<57344){if(!ne){if(56319<X){-1<(C-=3)&&be.push(239,191,189);continue}if(Me+1===se){-1<(C-=3)&&be.push(239,191,189);continue}ne=X;continue}if(X<56320){-1<(C-=3)&&be.push(239,191,189),ne=X;continue}X=65536+(ne-55296<<10|X-56320)}else ne&&-1<(C-=3)&&be.push(239,191,189);if(ne=null,X<128){if((C-=1)<0)break;be.push(X)}else if(X<2048){if((C-=2)<0)break;be.push(X>>6|192,63&X|128)}else if(X<65536){if((C-=3)<0)break;be.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;be.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return be}function Se(T){return a.toByteArray(function(C){if((C=C.trim().replace(re,"")).length<2)return"";for(;C.length%4!=0;)C+="=";return C}(T))}function Ee(T,C,X,se){for(var ne=0;ne<se&&!(ne+X>=C.length||ne>=T.length);++ne)C[ne+X]=T[ne];return ne}function V(T){return T instanceof ArrayBuffer||null!=T&&null!=T.constructor&&"ArrayBuffer"===T.constructor.name&&"number"==typeof T.byteLength}function Y(T){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(T)}function z(T){return T!=T}},{"base64-js":64,ieee754:215}],72:[function(e,g,h){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),g.exports=e("../../modules/_core").Array.from},{"../../modules/_core":106,"../../modules/es6.array.from":180,"../../modules/es6.string.iterator":196}],73:[function(e,g,h){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),g.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":178,"../modules/es6.string.iterator":196,"../modules/web.dom.iterable":208}],74:[function(e,g,h){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),g.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":179,"../modules/es6.string.iterator":196,"../modules/web.dom.iterable":208}],75:[function(e,g,h){var a=e("../../modules/_core"),r=a.JSON||(a.JSON={stringify:JSON.stringify});g.exports=function(p){return r.stringify.apply(r,arguments)}},{"../../modules/_core":106}],76:[function(e,g,h){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),g.exports=e("../modules/_core").Map},{"../modules/_core":106,"../modules/es6.map":182,"../modules/es6.object.to-string":192,"../modules/es6.string.iterator":196,"../modules/es7.map.from":198,"../modules/es7.map.of":199,"../modules/es7.map.to-json":200,"../modules/web.dom.iterable":208}],77:[function(e,g,h){e("../../modules/es6.number.is-integer"),g.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":106,"../../modules/es6.number.is-integer":183}],78:[function(e,g,h){e("../../modules/es6.object.assign"),g.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":106,"../../modules/es6.object.assign":184}],79:[function(e,g,h){e("../../modules/es6.object.create");var a=e("../../modules/_core").Object;g.exports=function(r,p){return a.create(r,p)}},{"../../modules/_core":106,"../../modules/es6.object.create":185}],80:[function(e,g,h){e("../../modules/es6.object.define-properties");var a=e("../../modules/_core").Object;g.exports=function(r,p){return a.defineProperties(r,p)}},{"../../modules/_core":106,"../../modules/es6.object.define-properties":186}],81:[function(e,g,h){e("../../modules/es6.object.define-property");var a=e("../../modules/_core").Object;g.exports=function(r,p,n){return a.defineProperty(r,p,n)}},{"../../modules/_core":106,"../../modules/es6.object.define-property":187}],82:[function(e,g,h){e("../../modules/es6.object.freeze"),g.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":106,"../../modules/es6.object.freeze":188}],83:[function(e,g,h){e("../../modules/es6.object.get-prototype-of"),g.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":106,"../../modules/es6.object.get-prototype-of":189}],84:[function(e,g,h){e("../../modules/es6.object.keys"),g.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":106,"../../modules/es6.object.keys":190}],85:[function(e,g,h){e("../../modules/es6.object.set-prototype-of"),g.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":106,"../../modules/es6.object.set-prototype-of":191}],86:[function(e,g,h){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),g.exports=e("../modules/_core").Promise},{"../modules/_core":106,"../modules/es6.object.to-string":192,"../modules/es6.promise":193,"../modules/es6.string.iterator":196,"../modules/es7.promise.finally":201,"../modules/es7.promise.try":202,"../modules/web.dom.iterable":208}],87:[function(e,g,h){e("../../modules/es6.reflect.construct"),g.exports=e("../../modules/_core").Reflect.construct},{"../../modules/_core":106,"../../modules/es6.reflect.construct":194}],88:[function(e,g,h){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),g.exports=e("../modules/_core").Set},{"../modules/_core":106,"../modules/es6.object.to-string":192,"../modules/es6.set":195,"../modules/es6.string.iterator":196,"../modules/es7.set.from":203,"../modules/es7.set.of":204,"../modules/es7.set.to-json":205,"../modules/web.dom.iterable":208}],89:[function(e,g,h){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),g.exports=e("../../modules/_core").Symbol},{"../../modules/_core":106,"../../modules/es6.object.to-string":192,"../../modules/es6.symbol":197,"../../modules/es7.symbol.async-iterator":206,"../../modules/es7.symbol.observable":207}],90:[function(e,g,h){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),g.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":175,"../../modules/es6.string.iterator":196,"../../modules/web.dom.iterable":208}],91:[function(e,g,h){g.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],92:[function(e,g,h){g.exports=function(){}},{}],93:[function(e,g,h){g.exports=function(a,r,p,n){if(!(a instanceof r)||void 0!==n&&n in a)throw TypeError(p+": incorrect invocation!");return a}},{}],94:[function(e,g,h){var a=e("./_is-object");g.exports=function(r){if(!a(r))throw TypeError(r+" is not an object!");return r}},{"./_is-object":127}],95:[function(e,g,h){var a=e("./_for-of");g.exports=function(r,p){var n=[];return a(r,!1,n.push,n,p),n}},{"./_for-of":116}],96:[function(e,g,h){var a=e("./_to-iobject"),r=e("./_to-length"),p=e("./_to-absolute-index");g.exports=function(n){return function(s,t,c){var u,o=a(s),l=r(o.length),f=p(c,l);if(n&&t!=t){for(;f<l;)if((u=o[f++])!=u)return!0}else for(;f<l;f++)if((n||f in o)&&o[f]===t)return n||f||0;return!n&&-1}}},{"./_to-absolute-index":166,"./_to-iobject":168,"./_to-length":169}],97:[function(e,g,h){var a=e("./_ctx"),r=e("./_iobject"),p=e("./_to-object"),n=e("./_to-length"),s=e("./_array-species-create");g.exports=function(t,c){var u=1==t,o=2==t,l=3==t,f=4==t,w=6==t,k=5==t||w,O=c||s;return function(M,b,A){for(var _,E,y=p(M),m=r(y),R=a(b,A,3),F=n(m.length),B=0,J=u?O(M,F):o?O(M,0):void 0;B<F;B++)if((k||B in m)&&(E=R(_=m[B],B,y),t))if(u)J[B]=E;else if(E)switch(t){case 3:return!0;case 5:return _;case 6:return B;case 2:J.push(_)}else if(f)return!1;return w?-1:l||f?f:J}}},{"./_array-species-create":99,"./_ctx":108,"./_iobject":123,"./_to-length":169,"./_to-object":170}],98:[function(e,g,h){var a=e("./_is-object"),r=e("./_is-array"),p=e("./_wks")("species");g.exports=function(n){var s;return r(n)&&("function"!=typeof(s=n.constructor)||s!==Array&&!r(s.prototype)||(s=void 0),a(s)&&null===(s=s[p])&&(s=void 0)),void 0===s?Array:s}},{"./_is-array":125,"./_is-object":127,"./_wks":176}],99:[function(e,g,h){var a=e("./_array-species-constructor");g.exports=function(r,p){return new(a(r))(p)}},{"./_array-species-constructor":98}],100:[function(e,g,h){"use strict";var a=e("./_a-function"),r=e("./_is-object"),p=e("./_invoke"),n=[].slice,s={};g.exports=Function.bind||function(t){var c=a(this),u=n.call(arguments,1),o=function l(){var f=u.concat(n.call(arguments));return this instanceof l?function(w,k,O){if(!(k in s)){for(var M=[],b=0;b<k;b++)M[b]="a["+b+"]";s[k]=Function("F,a","return new F("+M.join(",")+")")}return s[k](w,O)}(c,f.length,f):p(c,f,t)};return r(c.prototype)&&(o.prototype=c.prototype),o}},{"./_a-function":91,"./_invoke":122,"./_is-object":127}],101:[function(e,g,h){var a=e("./_cof"),r=e("./_wks")("toStringTag"),p="Arguments"==a(function(){return arguments}());g.exports=function(n){var s,t,c;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(u,o){try{return u[o]}catch{}}(s=Object(n),r))?t:p?a(s):"Object"==(c=a(s))&&"function"==typeof s.callee?"Arguments":c}},{"./_cof":102,"./_wks":176}],102:[function(e,g,h){var a={}.toString;g.exports=function(r){return a.call(r).slice(8,-1)}},{}],103:[function(e,g,h){"use strict";var a=e("./_object-dp").f,r=e("./_object-create"),p=e("./_redefine-all"),n=e("./_ctx"),s=e("./_an-instance"),t=e("./_for-of"),c=e("./_iter-define"),u=e("./_iter-step"),o=e("./_set-species"),l=e("./_descriptors"),f=e("./_meta").fastKey,w=e("./_validate-collection"),k=l?"_s":"size",O=function(M,b){var A,_=f(b);if("F"!==_)return M._i[_];for(A=M._f;A;A=A.n)if(A.k==b)return A};g.exports={getConstructor:function(M,b,A,_){var E=M(function(y,m){s(y,E,b,"_i"),y._t=b,y._i=r(null),y._f=void 0,y._l=void 0,y[k]=0,null!=m&&t(m,A,y[_],y)});return p(E.prototype,{clear:function(){for(var y=w(this,b),m=y._i,R=y._f;R;R=R.n)R.r=!0,R.p&&(R.p=R.p.n=void 0),delete m[R.i];y._f=y._l=void 0,y[k]=0},delete:function(y){var m=w(this,b),R=O(m,y);if(R){var F=R.n,B=R.p;delete m._i[R.i],R.r=!0,B&&(B.n=F),F&&(F.p=B),m._f==R&&(m._f=F),m._l==R&&(m._l=B),m[k]--}return!!R},forEach:function(y){w(this,b);for(var m,R=n(y,1<arguments.length?arguments[1]:void 0,3);m=m?m.n:this._f;)for(R(m.v,m.k,this);m&&m.r;)m=m.p},has:function(y){return!!O(w(this,b),y)}}),l&&a(E.prototype,"size",{get:function(){return w(this,b)[k]}}),E},def:function(M,b,A){var _,E,y=O(M,b);return y?y.v=A:(M._l=y={i:E=f(b,!0),k:b,v:A,p:_=M._l,n:void 0,r:!1},M._f||(M._f=y),_&&(_.n=y),M[k]++,"F"!==E&&(M._i[E]=y)),M},getEntry:O,setStrong:function(M,b,A){c(M,b,function(_,E){this._t=w(_,b),this._k=E,this._l=void 0},function(){for(var _=this._k,E=this._l;E&&E.r;)E=E.p;return this._t&&(this._l=E=E?E.n:this._t._f)?u(0,"keys"==_?E.k:"values"==_?E.v:[E.k,E.v]):(this._t=void 0,u(1))},A?"entries":"values",!A,!0),o(b)}}},{"./_an-instance":93,"./_ctx":108,"./_descriptors":110,"./_for-of":116,"./_iter-define":130,"./_iter-step":132,"./_meta":135,"./_object-create":139,"./_object-dp":140,"./_redefine-all":154,"./_set-species":159,"./_validate-collection":173}],104:[function(e,g,h){var a=e("./_classof"),r=e("./_array-from-iterable");g.exports=function(p){return function(){if(a(this)!=p)throw TypeError(p+"#toJSON isn't generic");return r(this)}}},{"./_array-from-iterable":95,"./_classof":101}],105:[function(e,g,h){"use strict";var a=e("./_global"),r=e("./_export"),p=e("./_meta"),n=e("./_fails"),s=e("./_hide"),t=e("./_redefine-all"),c=e("./_for-of"),u=e("./_an-instance"),o=e("./_is-object"),l=e("./_set-to-string-tag"),f=e("./_object-dp").f,w=e("./_array-methods")(0),k=e("./_descriptors");g.exports=function(O,M,b,A,_,E){var y=a[O],m=y,R=_?"set":"add",F=m&&m.prototype,B={};return k&&"function"==typeof m&&(E||F.forEach&&!n(function(){(new m).entries().next()}))?(m=M(function(J,Q){u(J,m,O,"_c"),J._c=new y,null!=Q&&c(Q,_,J[R],J)}),w("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(J){var Q="add"==J||"set"==J;J in F&&(!E||"clear"!=J)&&s(m.prototype,J,function(U,N){if(u(this,m,J),!Q&&E&&!o(U))return"get"==J&&void 0;var D=this._c[J](0===U?0:U,N);return Q?this:D})}),E||f(m.prototype,"size",{get:function(){return this._c.size}})):(m=A.getConstructor(M,O,_,R),t(m.prototype,b),p.NEED=!0),l(m,O),B[O]=m,r(r.G+r.W+r.F,B),E||A.setStrong(m,O,_),m}},{"./_an-instance":93,"./_array-methods":97,"./_descriptors":110,"./_export":114,"./_fails":115,"./_for-of":116,"./_global":117,"./_hide":119,"./_is-object":127,"./_meta":135,"./_object-dp":140,"./_redefine-all":154,"./_set-to-string-tag":160}],106:[function(e,g,h){var a=g.exports={version:"2.5.1"};"number"==typeof __e&&(__e=a)},{}],107:[function(e,g,h){"use strict";var a=e("./_object-dp"),r=e("./_property-desc");g.exports=function(p,n,s){n in p?a.f(p,n,r(0,s)):p[n]=s}},{"./_object-dp":140,"./_property-desc":153}],108:[function(e,g,h){var a=e("./_a-function");g.exports=function(r,p,n){if(a(r),void 0===p)return r;switch(n){case 1:return function(s){return r.call(p,s)};case 2:return function(s,t){return r.call(p,s,t)};case 3:return function(s,t,c){return r.call(p,s,t,c)}}return function(){return r.apply(p,arguments)}}},{"./_a-function":91}],109:[function(e,g,h){g.exports=function(a){if(null==a)throw TypeError("Can't call method on  "+a);return a}},{}],110:[function(e,g,h){g.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":115}],111:[function(e,g,h){var a=e("./_is-object"),r=e("./_global").document,p=a(r)&&a(r.createElement);g.exports=function(n){return p?r.createElement(n):{}}},{"./_global":117,"./_is-object":127}],112:[function(e,g,h){g.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],113:[function(e,g,h){var a=e("./_object-keys"),r=e("./_object-gops"),p=e("./_object-pie");g.exports=function(n){var s=a(n),t=r.f;if(t)for(var c,u=t(n),o=p.f,l=0;u.length>l;)o.call(n,c=u[l++])&&s.push(c);return s}},{"./_object-gops":145,"./_object-keys":148,"./_object-pie":149}],114:[function(e,g,h){var a=e("./_global"),r=e("./_core"),p=e("./_ctx"),n=e("./_hide"),s=function t(c,u,o){var l,f,w,k=c&t.F,O=c&t.G,M=c&t.S,b=c&t.P,A=c&t.B,_=c&t.W,E=O?r:r[u]||(r[u]={}),y=E.prototype,m=O?a:M?a[u]:(a[u]||{}).prototype;for(l in O&&(o=u),o)(f=!k&&m&&void 0!==m[l])&&l in E||(w=f?m[l]:o[l],E[l]=O&&"function"!=typeof m[l]?o[l]:A&&f?p(w,a):_&&m[l]==w?function(R){var F=function(B,J,Q){if(this instanceof R){switch(arguments.length){case 0:return new R;case 1:return new R(B);case 2:return new R(B,J)}return new R(B,J,Q)}return R.apply(this,arguments)};return F.prototype=R.prototype,F}(w):b&&"function"==typeof w?p(Function.call,w):w,b&&((E.virtual||(E.virtual={}))[l]=w,c&t.R&&y&&!y[l]&&n(y,l,w)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,g.exports=s},{"./_core":106,"./_ctx":108,"./_global":117,"./_hide":119}],115:[function(e,g,h){g.exports=function(a){try{return!!a()}catch{return!0}}},{}],116:[function(e,g,h){var a=e("./_ctx"),r=e("./_iter-call"),p=e("./_is-array-iter"),n=e("./_an-object"),s=e("./_to-length"),t=e("./core.get-iterator-method"),c={},u={};(h=g.exports=function(o,l,f,w,k){var O,M,b,A,_=k?function(){return o}:t(o),E=a(f,w,l?2:1),y=0;if("function"!=typeof _)throw TypeError(o+" is not iterable!");if(p(_)){for(O=s(o.length);y<O;y++)if((A=l?E(n(M=o[y])[0],M[1]):E(o[y]))===c||A===u)return A}else for(b=_.call(o);!(M=b.next()).done;)if((A=r(b,E,M.value,l))===c||A===u)return A}).BREAK=c,h.RETURN=u},{"./_an-object":94,"./_ctx":108,"./_is-array-iter":124,"./_iter-call":128,"./_to-length":169,"./core.get-iterator-method":177}],117:[function(e,g,h){var a=g.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},{}],118:[function(e,g,h){var a={}.hasOwnProperty;g.exports=function(r,p){return a.call(r,p)}},{}],119:[function(e,g,h){var a=e("./_object-dp"),r=e("./_property-desc");g.exports=e("./_descriptors")?function(p,n,s){return a.f(p,n,r(1,s))}:function(p,n,s){return p[n]=s,p}},{"./_descriptors":110,"./_object-dp":140,"./_property-desc":153}],120:[function(e,g,h){var a=e("./_global").document;g.exports=a&&a.documentElement},{"./_global":117}],121:[function(e,g,h){g.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":110,"./_dom-create":111,"./_fails":115}],122:[function(e,g,h){g.exports=function(a,r,p){var n=void 0===p;switch(r.length){case 0:return n?a():a.call(p);case 1:return n?a(r[0]):a.call(p,r[0]);case 2:return n?a(r[0],r[1]):a.call(p,r[0],r[1]);case 3:return n?a(r[0],r[1],r[2]):a.call(p,r[0],r[1],r[2]);case 4:return n?a(r[0],r[1],r[2],r[3]):a.call(p,r[0],r[1],r[2],r[3])}return a.apply(p,r)}},{}],123:[function(e,g,h){var a=e("./_cof");g.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return"String"==a(r)?r.split(""):Object(r)}},{"./_cof":102}],124:[function(e,g,h){var a=e("./_iterators"),r=e("./_wks")("iterator"),p=Array.prototype;g.exports=function(n){return void 0!==n&&(a.Array===n||p[r]===n)}},{"./_iterators":133,"./_wks":176}],125:[function(e,g,h){var a=e("./_cof");g.exports=Array.isArray||function(r){return"Array"==a(r)}},{"./_cof":102}],126:[function(e,g,h){var a=e("./_is-object"),r=Math.floor;g.exports=function(p){return!a(p)&&isFinite(p)&&r(p)===p}},{"./_is-object":127}],127:[function(e,g,h){g.exports=function(a){return"object"===_typeof4(a)?null!==a:"function"==typeof a}},{}],128:[function(e,g,h){var a=e("./_an-object");g.exports=function(r,p,n,s){try{return s?p(a(n)[0],n[1]):p(n)}catch(c){var t=r.return;throw void 0!==t&&a(t.call(r)),c}}},{"./_an-object":94}],129:[function(e,g,h){"use strict";var a=e("./_object-create"),r=e("./_property-desc"),p=e("./_set-to-string-tag"),n={};e("./_hide")(n,e("./_wks")("iterator"),function(){return this}),g.exports=function(s,t,c){s.prototype=a(n,{next:r(1,c)}),p(s,t+" Iterator")}},{"./_hide":119,"./_object-create":139,"./_property-desc":153,"./_set-to-string-tag":160,"./_wks":176}],130:[function(e,g,h){"use strict";var a=e("./_library"),r=e("./_export"),p=e("./_redefine"),n=e("./_hide"),s=e("./_has"),t=e("./_iterators"),c=e("./_iter-create"),u=e("./_set-to-string-tag"),o=e("./_object-gpo"),l=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),w=function(){return this};g.exports=function(k,O,M,b,A,_,E){c(M,O,b);var y,m,R,F=function(ue){if(!f&&ue in U)return U[ue];switch(ue){case"keys":case"values":return function(){return new M(this,ue)}}return function(){return new M(this,ue)}},B=O+" Iterator",J="values"==A,Q=!1,U=k.prototype,N=U[l]||U["@@iterator"]||A&&U[A],D=N||F(A),ie=A?J?F("entries"):D:void 0,Z="Array"==O&&U.entries||N;if(Z&&(R=o(Z.call(new k)))!==Object.prototype&&R.next&&(u(R,B,!0),a||s(R,l)||n(R,l,w)),J&&N&&"values"!==N.name&&(Q=!0,D=function(){return N.call(this)}),a&&!E||!f&&!Q&&U[l]||n(U,l,D),t[O]=D,t[B]=w,A)if(y={values:J?D:F("values"),keys:_?D:F("keys"),entries:ie},E)for(m in y)m in U||p(U,m,y[m]);else r(r.P+r.F*(f||Q),O,y);return y}},{"./_export":114,"./_has":118,"./_hide":119,"./_iter-create":129,"./_iterators":133,"./_library":134,"./_object-gpo":146,"./_redefine":155,"./_set-to-string-tag":160,"./_wks":176}],131:[function(e,g,h){var a=e("./_wks")("iterator"),r=!1;try{var p=[7][a]();p.return=function(){r=!0},Array.from(p,function(){throw 2})}catch{}g.exports=function(n,s){if(!s&&!r)return!1;var t=!1;try{var c=[7],u=c[a]();u.next=function(){return{done:t=!0}},c[a]=function(){return u},n(c)}catch{}return t}},{"./_wks":176}],132:[function(e,g,h){g.exports=function(a,r){return{value:r,done:!!a}}},{}],133:[function(e,g,h){g.exports={}},{}],134:[function(e,g,h){g.exports=!0},{}],135:[function(e,g,h){var a=e("./_uid")("meta"),r=e("./_is-object"),p=e("./_has"),n=e("./_object-dp").f,s=0,t=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return t(Object.preventExtensions({}))}),u=function(l){n(l,a,{value:{i:"O"+ ++s,w:{}}})},o=g.exports={KEY:a,NEED:!1,fastKey:function(l,f){if(!r(l))return"symbol"==_typeof4(l)?l:("string"==typeof l?"S":"P")+l;if(!p(l,a)){if(!t(l))return"F";if(!f)return"E";u(l)}return l[a].i},getWeak:function(l,f){if(!p(l,a)){if(!t(l))return!0;if(!f)return!1;u(l)}return l[a].w},onFreeze:function(l){return c&&o.NEED&&t(l)&&!p(l,a)&&u(l),l}}},{"./_fails":115,"./_has":118,"./_is-object":127,"./_object-dp":140,"./_uid":172}],136:[function(e,g,h){var a=e("./_global"),r=e("./_task").set,p=a.MutationObserver||a.WebKitMutationObserver,n=a.process,s=a.Promise,t="process"==e("./_cof")(n);g.exports=function(){var c,u,o,l=function(){var O,M;for(t&&(O=n.domain)&&O.exit();c;){M=c.fn,c=c.next;try{M()}catch(b){throw c?o():u=void 0,b}}u=void 0,O&&O.enter()};if(t)o=function(){n.nextTick(l)};else if(p){var f=!0,w=document.createTextNode("");new p(l).observe(w,{characterData:!0}),o=function(){w.data=f=!f}}else if(s&&s.resolve){var k=s.resolve();o=function(){k.then(l)}}else o=function(){r.call(a,l)};return function(O){var M={fn:O,next:void 0};u&&(u.next=M),c||(c=M,o()),u=M}}},{"./_cof":102,"./_global":117,"./_task":165}],137:[function(e,g,h){"use strict";var a=e("./_a-function");function r(p){var n,s;this.promise=new p(function(t,c){if(void 0!==n||void 0!==s)throw TypeError("Bad Promise constructor");n=t,s=c}),this.resolve=a(n),this.reject=a(s)}g.exports.f=function(p){return new r(p)}},{"./_a-function":91}],138:[function(e,g,h){"use strict";var a=e("./_object-keys"),r=e("./_object-gops"),p=e("./_object-pie"),n=e("./_to-object"),s=e("./_iobject"),t=Object.assign;g.exports=!t||e("./_fails")(function(){var c={},u={},o=Symbol(),l="abcdefghijklmnopqrst";return c[o]=7,l.split("").forEach(function(f){u[f]=f}),7!=t({},c)[o]||Object.keys(t({},u)).join("")!=l})?function(c,u){for(var o=n(c),l=arguments.length,f=1,w=r.f,k=p.f;f<l;)for(var O,M=s(arguments[f++]),b=w?a(M).concat(w(M)):a(M),A=b.length,_=0;_<A;)k.call(M,O=b[_++])&&(o[O]=M[O]);return o}:t},{"./_fails":115,"./_iobject":123,"./_object-gops":145,"./_object-keys":148,"./_object-pie":149,"./_to-object":170}],139:[function(e,g,h){var a=e("./_an-object"),r=e("./_object-dps"),p=e("./_enum-bug-keys"),n=e("./_shared-key")("IE_PROTO"),s=function(){},t=function(){var c,u=e("./_dom-create")("iframe"),o=p.length;for(u.style.display="none",e("./_html").appendChild(u),u.src="javascript:",(c=u.contentWindow.document).open(),c.write("<script>document.F=Object<\/script>"),c.close(),t=c.F;o--;)delete t.prototype[p[o]];return t()};g.exports=Object.create||function(c,u){var o;return null!==c?(s.prototype=a(c),o=new s,s.prototype=null,o[n]=c):o=t(),void 0===u?o:r(o,u)}},{"./_an-object":94,"./_dom-create":111,"./_enum-bug-keys":112,"./_html":120,"./_object-dps":141,"./_shared-key":161}],140:[function(e,g,h){var a=e("./_an-object"),r=e("./_ie8-dom-define"),p=e("./_to-primitive"),n=Object.defineProperty;h.f=e("./_descriptors")?Object.defineProperty:function(s,t,c){if(a(s),t=p(t,!0),a(c),r)try{return n(s,t,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(s[t]=c.value),s}},{"./_an-object":94,"./_descriptors":110,"./_ie8-dom-define":121,"./_to-primitive":171}],141:[function(e,g,h){var a=e("./_object-dp"),r=e("./_an-object"),p=e("./_object-keys");g.exports=e("./_descriptors")?Object.defineProperties:function(n,s){r(n);for(var t,c=p(s),u=c.length,o=0;o<u;)a.f(n,t=c[o++],s[t]);return n}},{"./_an-object":94,"./_descriptors":110,"./_object-dp":140,"./_object-keys":148}],142:[function(e,g,h){var a=e("./_object-pie"),r=e("./_property-desc"),p=e("./_to-iobject"),n=e("./_to-primitive"),s=e("./_has"),t=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;h.f=e("./_descriptors")?c:function(u,o){if(u=p(u),o=n(o,!0),t)try{return c(u,o)}catch{}if(s(u,o))return r(!a.f.call(u,o),u[o])}},{"./_descriptors":110,"./_has":118,"./_ie8-dom-define":121,"./_object-pie":149,"./_property-desc":153,"./_to-iobject":168,"./_to-primitive":171}],143:[function(e,g,h){var a=e("./_to-iobject"),r=e("./_object-gopn").f,p={}.toString,n="object"==(typeof window>"u"?"undefined":_typeof4(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];g.exports.f=function(s){return n&&"[object Window]"==p.call(s)?function(t){try{return r(t)}catch{return n.slice()}}(s):r(a(s))}},{"./_object-gopn":144,"./_to-iobject":168}],144:[function(e,g,h){var a=e("./_object-keys-internal"),r=e("./_enum-bug-keys").concat("length","prototype");h.f=Object.getOwnPropertyNames||function(p){return a(p,r)}},{"./_enum-bug-keys":112,"./_object-keys-internal":147}],145:[function(e,g,h){h.f=Object.getOwnPropertySymbols},{}],146:[function(e,g,h){var a=e("./_has"),r=e("./_to-object"),p=e("./_shared-key")("IE_PROTO"),n=Object.prototype;g.exports=Object.getPrototypeOf||function(s){return s=r(s),a(s,p)?s[p]:"function"==typeof s.constructor&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?n:null}},{"./_has":118,"./_shared-key":161,"./_to-object":170}],147:[function(e,g,h){var a=e("./_has"),r=e("./_to-iobject"),p=e("./_array-includes")(!1),n=e("./_shared-key")("IE_PROTO");g.exports=function(s,t){var c,u=r(s),o=0,l=[];for(c in u)c!=n&&a(u,c)&&l.push(c);for(;t.length>o;)a(u,c=t[o++])&&(~p(l,c)||l.push(c));return l}},{"./_array-includes":96,"./_has":118,"./_shared-key":161,"./_to-iobject":168}],148:[function(e,g,h){var a=e("./_object-keys-internal"),r=e("./_enum-bug-keys");g.exports=Object.keys||function(p){return a(p,r)}},{"./_enum-bug-keys":112,"./_object-keys-internal":147}],149:[function(e,g,h){h.f={}.propertyIsEnumerable},{}],150:[function(e,g,h){var a=e("./_export"),r=e("./_core"),p=e("./_fails");g.exports=function(n,s){var t=(r.Object||{})[n]||Object[n],c={};c[n]=s(t),a(a.S+a.F*p(function(){t(1)}),"Object",c)}},{"./_core":106,"./_export":114,"./_fails":115}],151:[function(e,g,h){g.exports=function(a){try{return{e:!1,v:a()}}catch(r){return{e:!0,v:r}}}},{}],152:[function(e,g,h){var a=e("./_an-object"),r=e("./_is-object"),p=e("./_new-promise-capability");g.exports=function(n,s){if(a(n),r(s)&&s.constructor===n)return s;var t=p.f(n);return(0,t.resolve)(s),t.promise}},{"./_an-object":94,"./_is-object":127,"./_new-promise-capability":137}],153:[function(e,g,h){g.exports=function(a,r){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:r}}},{}],154:[function(e,g,h){var a=e("./_hide");g.exports=function(r,p,n){for(var s in p)n&&r[s]?r[s]=p[s]:a(r,s,p[s]);return r}},{"./_hide":119}],155:[function(e,g,h){g.exports=e("./_hide")},{"./_hide":119}],156:[function(e,g,h){"use strict";var a=e("./_export"),r=e("./_a-function"),p=e("./_ctx"),n=e("./_for-of");g.exports=function(s){a(a.S,s,{from:function(t){var c,u,o,l,f=arguments[1];return r(this),(c=void 0!==f)&&r(f),null==t?new this:(u=[],c?(o=0,l=p(f,arguments[2],2),n(t,!1,function(w){u.push(l(w,o++))})):n(t,!1,u.push,u),new this(u))}})}},{"./_a-function":91,"./_ctx":108,"./_export":114,"./_for-of":116}],157:[function(e,g,h){"use strict";var a=e("./_export");g.exports=function(r){a(a.S,r,{of:function(){for(var p=arguments.length,n=Array(p);p--;)n[p]=arguments[p];return new this(n)}})}},{"./_export":114}],158:[function(e,g,h){var a=e("./_is-object"),r=e("./_an-object"),p=function(n,s){if(r(n),!a(s)&&null!==s)throw TypeError(s+": can't set as prototype!")};g.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(n,s,t){try{(t=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(n,[]),s=!(n instanceof Array)}catch{s=!0}return function(c,u){return p(c,u),s?c.__proto__=u:t(c,u),c}}({},!1):void 0),check:p}},{"./_an-object":94,"./_ctx":108,"./_is-object":127,"./_object-gopd":142}],159:[function(e,g,h){"use strict";var a=e("./_global"),r=e("./_core"),p=e("./_object-dp"),n=e("./_descriptors"),s=e("./_wks")("species");g.exports=function(t){var c="function"==typeof r[t]?r[t]:a[t];n&&c&&!c[s]&&p.f(c,s,{configurable:!0,get:function(){return this}})}},{"./_core":106,"./_descriptors":110,"./_global":117,"./_object-dp":140,"./_wks":176}],160:[function(e,g,h){var a=e("./_object-dp").f,r=e("./_has"),p=e("./_wks")("toStringTag");g.exports=function(n,s,t){n&&!r(n=t?n:n.prototype,p)&&a(n,p,{configurable:!0,value:s})}},{"./_has":118,"./_object-dp":140,"./_wks":176}],161:[function(e,g,h){var a=e("./_shared")("keys"),r=e("./_uid");g.exports=function(p){return a[p]||(a[p]=r(p))}},{"./_shared":162,"./_uid":172}],162:[function(e,g,h){var a=e("./_global"),r=a["__core-js_shared__"]||(a["__core-js_shared__"]={});g.exports=function(p){return r[p]||(r[p]={})}},{"./_global":117}],163:[function(e,g,h){var a=e("./_an-object"),r=e("./_a-function"),p=e("./_wks")("species");g.exports=function(n,s){var t,c=a(n).constructor;return void 0===c||null==(t=a(c)[p])?s:r(t)}},{"./_a-function":91,"./_an-object":94,"./_wks":176}],164:[function(e,g,h){var a=e("./_to-integer"),r=e("./_defined");g.exports=function(p){return function(n,s){var t,c,u=String(r(n)),o=a(s),l=u.length;return o<0||l<=o?p?"":void 0:(t=u.charCodeAt(o))<55296||56319<t||o+1===l||(c=u.charCodeAt(o+1))<56320||57343<c?p?u.charAt(o):t:p?u.slice(o,o+2):c-56320+(t-55296<<10)+65536}}},{"./_defined":109,"./_to-integer":167}],165:[function(e,g,h){var a,r,p,n=e("./_ctx"),s=e("./_invoke"),t=e("./_html"),c=e("./_dom-create"),u=e("./_global"),o=u.process,l=u.setImmediate,f=u.clearImmediate,w=u.MessageChannel,k=u.Dispatch,O=0,M={},b=function(){var _=+this;if(M.hasOwnProperty(_)){var E=M[_];delete M[_],E()}},A=function(_){b.call(_.data)};l&&f||(l=function(_){for(var E=[],y=1;arguments.length>y;)E.push(arguments[y++]);return M[++O]=function(){s("function"==typeof _?_:Function(_),E)},a(O),O},f=function(_){delete M[_]},"process"==e("./_cof")(o)?a=function(_){o.nextTick(n(b,_,1))}:k&&k.now?a=function(_){k.now(n(b,_,1))}:w?(p=(r=new w).port2,r.port1.onmessage=A,a=n(p.postMessage,p,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(a=function(_){u.postMessage(_+"","*")},u.addEventListener("message",A,!1)):a="onreadystatechange"in c("script")?function(_){t.appendChild(c("script")).onreadystatechange=function(){t.removeChild(this),b.call(_)}}:function(_){setTimeout(n(b,_,1),0)}),g.exports={set:l,clear:f}},{"./_cof":102,"./_ctx":108,"./_dom-create":111,"./_global":117,"./_html":120,"./_invoke":122}],166:[function(e,g,h){var a=e("./_to-integer"),r=Math.max,p=Math.min;g.exports=function(n,s){return(n=a(n))<0?r(n+s,0):p(n,s)}},{"./_to-integer":167}],167:[function(e,g,h){var a=Math.ceil,r=Math.floor;g.exports=function(p){return isNaN(p=+p)?0:(0<p?r:a)(p)}},{}],168:[function(e,g,h){var a=e("./_iobject"),r=e("./_defined");g.exports=function(p){return a(r(p))}},{"./_defined":109,"./_iobject":123}],169:[function(e,g,h){var a=e("./_to-integer"),r=Math.min;g.exports=function(p){return 0<p?r(a(p),9007199254740991):0}},{"./_to-integer":167}],170:[function(e,g,h){var a=e("./_defined");g.exports=function(r){return Object(a(r))}},{"./_defined":109}],171:[function(e,g,h){var a=e("./_is-object");g.exports=function(r,p){if(!a(r))return r;var n,s;if(p&&"function"==typeof(n=r.toString)&&!a(s=n.call(r))||"function"==typeof(n=r.valueOf)&&!a(s=n.call(r))||!p&&"function"==typeof(n=r.toString)&&!a(s=n.call(r)))return s;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":127}],172:[function(e,g,h){var a=0,r=Math.random();g.exports=function(p){return"Symbol(".concat(void 0===p?"":p,")_",(++a+r).toString(36))}},{}],173:[function(e,g,h){var a=e("./_is-object");g.exports=function(r,p){if(!a(r)||r._t!==p)throw TypeError("Incompatible receiver, "+p+" required!");return r}},{"./_is-object":127}],174:[function(e,g,h){var a=e("./_global"),r=e("./_core"),p=e("./_library"),n=e("./_wks-ext"),s=e("./_object-dp").f;g.exports=function(t){var c=r.Symbol||(r.Symbol=p?{}:a.Symbol||{});"_"==t.charAt(0)||t in c||s(c,t,{value:n.f(t)})}},{"./_core":106,"./_global":117,"./_library":134,"./_object-dp":140,"./_wks-ext":175}],175:[function(e,g,h){h.f=e("./_wks")},{"./_wks":176}],176:[function(e,g,h){var a=e("./_shared")("wks"),r=e("./_uid"),p=e("./_global").Symbol,n="function"==typeof p;(g.exports=function(s){return a[s]||(a[s]=n&&p[s]||(n?p:r)("Symbol."+s))}).store=a},{"./_global":117,"./_shared":162,"./_uid":172}],177:[function(e,g,h){var a=e("./_classof"),r=e("./_wks")("iterator"),p=e("./_iterators");g.exports=e("./_core").getIteratorMethod=function(n){if(null!=n)return n[r]||n["@@iterator"]||p[a(n)]}},{"./_classof":101,"./_core":106,"./_iterators":133,"./_wks":176}],178:[function(e,g,h){var a=e("./_an-object"),r=e("./core.get-iterator-method");g.exports=e("./_core").getIterator=function(p){var n=r(p);if("function"!=typeof n)throw TypeError(p+" is not iterable!");return a(n.call(p))}},{"./_an-object":94,"./_core":106,"./core.get-iterator-method":177}],179:[function(e,g,h){var a=e("./_classof"),r=e("./_wks")("iterator"),p=e("./_iterators");g.exports=e("./_core").isIterable=function(n){var s=Object(n);return void 0!==s[r]||"@@iterator"in s||p.hasOwnProperty(a(s))}},{"./_classof":101,"./_core":106,"./_iterators":133,"./_wks":176}],180:[function(e,g,h){"use strict";var a=e("./_ctx"),r=e("./_export"),p=e("./_to-object"),n=e("./_iter-call"),s=e("./_is-array-iter"),t=e("./_to-length"),c=e("./_create-property"),u=e("./core.get-iterator-method");r(r.S+r.F*!e("./_iter-detect")(function(o){Array.from(o)}),"Array",{from:function(o){var l,f,w,k,O=p(o),M="function"==typeof this?this:Array,b=arguments.length,A=1<b?arguments[1]:void 0,_=void 0!==A,E=0,y=u(O);if(_&&(A=a(A,2<b?arguments[2]:void 0,2)),null==y||M==Array&&s(y))for(f=new M(l=t(O.length));E<l;E++)c(f,E,_?A(O[E],E):O[E]);else for(k=y.call(O),f=new M;!(w=k.next()).done;E++)c(f,E,_?n(k,A,[w.value,E],!0):w.value);return f.length=E,f}})},{"./_create-property":107,"./_ctx":108,"./_export":114,"./_is-array-iter":124,"./_iter-call":128,"./_iter-detect":131,"./_to-length":169,"./_to-object":170,"./core.get-iterator-method":177}],181:[function(e,g,h){"use strict";var a=e("./_add-to-unscopables"),r=e("./_iter-step"),p=e("./_iterators"),n=e("./_to-iobject");g.exports=e("./_iter-define")(Array,"Array",function(s,t){this._t=n(s),this._i=0,this._k=t},function(){var s=this._t,t=this._k,c=this._i++;return!s||c>=s.length?(this._t=void 0,r(1)):r(0,"keys"==t?c:"values"==t?s[c]:[c,s[c]])},"values"),p.Arguments=p.Array,a("keys"),a("values"),a("entries")},{"./_add-to-unscopables":92,"./_iter-define":130,"./_iter-step":132,"./_iterators":133,"./_to-iobject":168}],182:[function(e,g,h){"use strict";var a=e("./_collection-strong"),r=e("./_validate-collection");g.exports=e("./_collection")("Map",function(p){return function(){return p(this,0<arguments.length?arguments[0]:void 0)}},{get:function(p){var n=a.getEntry(r(this,"Map"),p);return n&&n.v},set:function(p,n){return a.def(r(this,"Map"),0===p?0:p,n)}},a,!0)},{"./_collection":105,"./_collection-strong":103,"./_validate-collection":173}],183:[function(e,g,h){var a=e("./_export");a(a.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":114,"./_is-integer":126}],184:[function(e,g,h){var a=e("./_export");a(a.S+a.F,"Object",{assign:e("./_object-assign")})},{"./_export":114,"./_object-assign":138}],185:[function(e,g,h){var a=e("./_export");a(a.S,"Object",{create:e("./_object-create")})},{"./_export":114,"./_object-create":139}],186:[function(e,g,h){var a=e("./_export");a(a.S+a.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":110,"./_export":114,"./_object-dps":141}],187:[function(e,g,h){var a=e("./_export");a(a.S+a.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":110,"./_export":114,"./_object-dp":140}],188:[function(e,g,h){var a=e("./_is-object"),r=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(p){return function(n){return p&&a(n)?p(r(n)):n}})},{"./_is-object":127,"./_meta":135,"./_object-sap":150}],189:[function(e,g,h){var a=e("./_to-object"),r=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(p){return r(a(p))}})},{"./_object-gpo":146,"./_object-sap":150,"./_to-object":170}],190:[function(e,g,h){var a=e("./_to-object"),r=e("./_object-keys");e("./_object-sap")("keys",function(){return function(p){return r(a(p))}})},{"./_object-keys":148,"./_object-sap":150,"./_to-object":170}],191:[function(e,g,h){var a=e("./_export");a(a.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":114,"./_set-proto":158}],192:[function(e,g,h){arguments[4][70][0].apply(h,arguments)},{dup:70}],193:[function(e,g,h){"use strict";var a,r,p,n,s=e("./_library"),t=e("./_global"),c=e("./_ctx"),u=e("./_classof"),o=e("./_export"),l=e("./_is-object"),f=e("./_a-function"),w=e("./_an-instance"),k=e("./_for-of"),O=e("./_species-constructor"),M=e("./_task").set,b=e("./_microtask")(),A=e("./_new-promise-capability"),_=e("./_perform"),E=e("./_promise-resolve"),y=t.TypeError,m=t.process,R=t.Promise,F="process"==u(m),B=function(){},J=r=A.f,Q=!!function(){try{var te=R.resolve(1),ye=(te.constructor={})[e("./_wks")("species")]=function(Se){Se(B,B)};return(F||"function"==typeof PromiseRejectionEvent)&&te.then(B)instanceof ye}catch{}}(),U=function(te){var ye;return!(!l(te)||"function"!=typeof(ye=te.then))&&ye},N=function(te,ye){if(!te._n){te._n=!0;var Se=te._c;b(function(){for(var Ee=te._v,V=1==te._s,Y=0,z=function(T){var C,X,se=V?T.ok:T.fail,ne=T.resolve,be=T.reject,Me=T.domain;try{se?(V||(2==te._h&&Z(te),te._h=1),!0===se?C=Ee:(Me&&Me.enter(),C=se(Ee),Me&&Me.exit()),C===T.promise?be(y("Promise-chain cycle")):(X=U(C))?X.call(C,ne,be):ne(C)):be(Ee)}catch($e){be($e)}};Se.length>Y;)z(Se[Y++]);te._c=[],te._n=!1,ye&&!te._h&&D(te)})}},D=function(te){M.call(t,function(){var ye,Se,Ee,V=te._v,Y=ie(te);if(Y&&(ye=_(function(){F?m.emit("unhandledRejection",V,te):(Se=t.onunhandledrejection)?Se({promise:te,reason:V}):(Ee=t.console)&&Ee.error&&Ee.error("Unhandled promise rejection",V)}),te._h=F||ie(te)?2:1),te._a=void 0,Y&&ye.e)throw ye.v})},ie=function te(ye){if(1==ye._h)return!1;for(var Se,Ee=ye._a||ye._c,V=0;Ee.length>V;)if((Se=Ee[V++]).fail||!te(Se.promise))return!1;return!0},Z=function(te){M.call(t,function(){var ye;F?m.emit("rejectionHandled",te):(ye=t.onrejectionhandled)&&ye({promise:te,reason:te._v})})},ue=function(te){var ye=this;ye._d||(ye._d=!0,(ye=ye._w||ye)._v=te,ye._s=2,ye._a||(ye._a=ye._c.slice()),N(ye,!0))},re=function te(ye){var Se,Ee=this;if(!Ee._d){Ee._d=!0,Ee=Ee._w||Ee;try{if(Ee===ye)throw y("Promise can't be resolved itself");(Se=U(ye))?b(function(){var V={_w:Ee,_d:!1};try{Se.call(ye,c(te,V,1),c(ue,V,1))}catch(Y){ue.call(V,Y)}}):(Ee._v=ye,Ee._s=1,N(Ee,!1))}catch(V){ue.call({_w:Ee,_d:!1},V)}}};Q||(R=function(te){w(this,R,"Promise","_h"),f(te),a.call(this);try{te(c(re,this,1),c(ue,this,1))}catch(ye){ue.call(this,ye)}},(a=function(te){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e("./_redefine-all")(R.prototype,{then:function(te,ye){var Se=J(O(this,R));return Se.ok="function"!=typeof te||te,Se.fail="function"==typeof ye&&ye,Se.domain=F?m.domain:void 0,this._c.push(Se),this._a&&this._a.push(Se),this._s&&N(this,!1),Se.promise},catch:function(te){return this.then(void 0,te)}}),p=function(){var te=new a;this.promise=te,this.resolve=c(re,te,1),this.reject=c(ue,te,1)},A.f=J=function(te){return te===R||te===n?new p(te):r(te)}),o(o.G+o.W+o.F*!Q,{Promise:R}),e("./_set-to-string-tag")(R,"Promise"),e("./_set-species")("Promise"),n=e("./_core").Promise,o(o.S+o.F*!Q,"Promise",{reject:function(te){var ye=J(this);return(0,ye.reject)(te),ye.promise}}),o(o.S+o.F*(s||!Q),"Promise",{resolve:function(te){return E(s&&this===n?R:this,te)}}),o(o.S+o.F*!(Q&&e("./_iter-detect")(function(te){R.all(te).catch(B)})),"Promise",{all:function(te){var ye=this,Se=J(ye),Ee=Se.resolve,V=Se.reject,Y=_(function(){var z=[],T=0,C=1;k(te,!1,function(X){var se=T++,ne=!1;z.push(void 0),C++,ye.resolve(X).then(function(be){ne||(ne=!0,z[se]=be,--C||Ee(z))},V)}),--C||Ee(z)});return Y.e&&V(Y.v),Se.promise},race:function(te){var ye=this,Se=J(ye),Ee=Se.reject,V=_(function(){k(te,!1,function(Y){ye.resolve(Y).then(Se.resolve,Ee)})});return V.e&&Ee(V.v),Se.promise}})},{"./_a-function":91,"./_an-instance":93,"./_classof":101,"./_core":106,"./_ctx":108,"./_export":114,"./_for-of":116,"./_global":117,"./_is-object":127,"./_iter-detect":131,"./_library":134,"./_microtask":136,"./_new-promise-capability":137,"./_perform":151,"./_promise-resolve":152,"./_redefine-all":154,"./_set-species":159,"./_set-to-string-tag":160,"./_species-constructor":163,"./_task":165,"./_wks":176}],194:[function(e,g,h){var a=e("./_export"),r=e("./_object-create"),p=e("./_a-function"),n=e("./_an-object"),s=e("./_is-object"),t=e("./_fails"),c=e("./_bind"),u=(e("./_global").Reflect||{}).construct,o=t(function(){function f(){}return!(u(function(){},[],f)instanceof f)}),l=!t(function(){u(function(){})});a(a.S+a.F*(o||l),"Reflect",{construct:function(f,w){p(f),n(w);var k=arguments.length<3?f:p(arguments[2]);if(l&&!o)return u(f,w,k);if(f==k){switch(w.length){case 0:return new f;case 1:return new f(w[0]);case 2:return new f(w[0],w[1]);case 3:return new f(w[0],w[1],w[2]);case 4:return new f(w[0],w[1],w[2],w[3])}var O=[null];return O.push.apply(O,w),new(c.apply(f,O))}var M=k.prototype,b=r(s(M)?M:Object.prototype),A=Function.apply.call(f,b,w);return s(A)?A:b}})},{"./_a-function":91,"./_an-object":94,"./_bind":100,"./_export":114,"./_fails":115,"./_global":117,"./_is-object":127,"./_object-create":139}],195:[function(e,g,h){"use strict";var a=e("./_collection-strong"),r=e("./_validate-collection");g.exports=e("./_collection")("Set",function(p){return function(){return p(this,0<arguments.length?arguments[0]:void 0)}},{add:function(p){return a.def(r(this,"Set"),p=0===p?0:p,p)}},a)},{"./_collection":105,"./_collection-strong":103,"./_validate-collection":173}],196:[function(e,g,h){"use strict";var a=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(r){this._t=String(r),this._i=0},function(){var r,p=this._t,n=this._i;return n>=p.length?{value:void 0,done:!0}:(r=a(p,n),this._i+=r.length,{value:r,done:!1})})},{"./_iter-define":130,"./_string-at":164}],197:[function(e,g,h){"use strict";var a=e("./_global"),r=e("./_has"),p=e("./_descriptors"),n=e("./_export"),s=e("./_redefine"),t=e("./_meta").KEY,c=e("./_fails"),u=e("./_shared"),o=e("./_set-to-string-tag"),l=e("./_uid"),f=e("./_wks"),w=e("./_wks-ext"),k=e("./_wks-define"),O=e("./_enum-keys"),M=e("./_is-array"),b=e("./_an-object"),A=e("./_to-iobject"),_=e("./_to-primitive"),E=e("./_property-desc"),y=e("./_object-create"),m=e("./_object-gopn-ext"),R=e("./_object-gopd"),F=e("./_object-dp"),B=e("./_object-keys"),J=R.f,Q=F.f,U=m.f,N=a.Symbol,D=a.JSON,ie=D&&D.stringify,Z=f("_hidden"),ue=f("toPrimitive"),re={}.propertyIsEnumerable,te=u("symbol-registry"),ye=u("symbols"),Se=u("op-symbols"),Ee=Object.prototype,V="function"==typeof N,Y=a.QObject,z=!Y||!Y.prototype||!Y.prototype.findChild,T=p&&c(function(){return 7!=y(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a})?function(ot,ht,kt){var wt=J(Ee,ht);wt&&delete Ee[ht],Q(ot,ht,kt),wt&&ot!==Ee&&Q(Ee,ht,wt)}:Q,C=function(ot){var ht=ye[ot]=y(N.prototype);return ht._k=ot,ht},X=V&&"symbol"==_typeof4(N.iterator)?function(ot){return"symbol"==_typeof4(ot)}:function(ot){return ot instanceof N},se=function(ot,ht,kt){return ot===Ee&&se(Se,ht,kt),b(ot),ht=_(ht,!0),b(kt),r(ye,ht)?(kt.enumerable?(r(ot,Z)&&ot[Z][ht]&&(ot[Z][ht]=!1),kt=y(kt,{enumerable:E(0,!1)})):(r(ot,Z)||Q(ot,Z,E(1,{})),ot[Z][ht]=!0),T(ot,ht,kt)):Q(ot,ht,kt)},ne=function(ot,ht){b(ot);for(var kt,wt=O(ht=A(ht)),Ht=0,Yt=wt.length;Ht<Yt;)se(ot,kt=wt[Ht++],ht[kt]);return ot},be=function(ot){var ht=re.call(this,ot=_(ot,!0));return!(this===Ee&&r(ye,ot)&&!r(Se,ot))&&(!(ht||!r(this,ot)||!r(ye,ot)||r(this,Z)&&this[Z][ot])||ht)},Me=function(ot,ht){if(ot=A(ot),ht=_(ht,!0),ot!==Ee||!r(ye,ht)||r(Se,ht)){var kt=J(ot,ht);return!kt||!r(ye,ht)||r(ot,Z)&&ot[Z][ht]||(kt.enumerable=!0),kt}},$e=function(ot){for(var ht,kt=U(A(ot)),wt=[],Ht=0;kt.length>Ht;)r(ye,ht=kt[Ht++])||ht==Z||ht==t||wt.push(ht);return wt},Ue=function(ot){for(var ht,kt=ot===Ee,wt=U(kt?Se:A(ot)),Ht=[],Yt=0;wt.length>Yt;)!r(ye,ht=wt[Yt++])||kt&&!r(Ee,ht)||Ht.push(ye[ht]);return Ht};V||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var ot=l(0<arguments.length?arguments[0]:void 0);return p&&z&&T(Ee,ot,{configurable:!0,set:function ht(kt){this===Ee&&ht.call(Se,kt),r(this,Z)&&r(this[Z],ot)&&(this[Z][ot]=!1),T(this,ot,E(1,kt))}}),C(ot)}).prototype,"toString",function(){return this._k}),R.f=Me,F.f=se,e("./_object-gopn").f=m.f=$e,e("./_object-pie").f=be,e("./_object-gops").f=Ue,p&&!e("./_library")&&s(Ee,"propertyIsEnumerable",be,!0),w.f=function(ot){return C(f(ot))}),n(n.G+n.W+n.F*!V,{Symbol:N});for(var Fe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),qe=0;Fe.length>qe;)f(Fe[qe++]);for(var Mt=B(f.store),tt=0;Mt.length>tt;)k(Mt[tt++]);n(n.S+n.F*!V,"Symbol",{for:function(ot){return r(te,ot+="")?te[ot]:te[ot]=N(ot)},keyFor:function(ot){if(!X(ot))throw TypeError(ot+" is not a symbol!");for(var ht in te)if(te[ht]===ot)return ht},useSetter:function(){z=!0},useSimple:function(){z=!1}}),n(n.S+n.F*!V,"Object",{create:function(ot,ht){return void 0===ht?y(ot):ne(y(ot),ht)},defineProperty:se,defineProperties:ne,getOwnPropertyDescriptor:Me,getOwnPropertyNames:$e,getOwnPropertySymbols:Ue}),D&&n(n.S+n.F*(!V||c(function(){var ot=N();return"[null]"!=ie([ot])||"{}"!=ie({a:ot})||"{}"!=ie(Object(ot))})),"JSON",{stringify:function(ot){if(void 0!==ot&&!X(ot)){for(var ht,kt,wt=[ot],Ht=1;arguments.length>Ht;)wt.push(arguments[Ht++]);return"function"==typeof(ht=wt[1])&&(kt=ht),!kt&&M(ht)||(ht=function(Yt,Ln){if(kt&&(Ln=kt.call(this,Yt,Ln)),!X(Ln))return Ln}),wt[1]=ht,ie.apply(D,wt)}}}),N.prototype[ue]||e("./_hide")(N.prototype,ue,N.prototype.valueOf),o(N,"Symbol"),o(Math,"Math",!0),o(a.JSON,"JSON",!0)},{"./_an-object":94,"./_descriptors":110,"./_enum-keys":113,"./_export":114,"./_fails":115,"./_global":117,"./_has":118,"./_hide":119,"./_is-array":125,"./_library":134,"./_meta":135,"./_object-create":139,"./_object-dp":140,"./_object-gopd":142,"./_object-gopn":144,"./_object-gopn-ext":143,"./_object-gops":145,"./_object-keys":148,"./_object-pie":149,"./_property-desc":153,"./_redefine":155,"./_set-to-string-tag":160,"./_shared":162,"./_to-iobject":168,"./_to-primitive":171,"./_uid":172,"./_wks":176,"./_wks-define":174,"./_wks-ext":175}],198:[function(e,g,h){e("./_set-collection-from")("Map")},{"./_set-collection-from":156}],199:[function(e,g,h){e("./_set-collection-of")("Map")},{"./_set-collection-of":157}],200:[function(e,g,h){var a=e("./_export");a(a.P+a.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":104,"./_export":114}],201:[function(e,g,h){"use strict";var a=e("./_export"),r=e("./_core"),p=e("./_global"),n=e("./_species-constructor"),s=e("./_promise-resolve");a(a.P+a.R,"Promise",{finally:function(t){var c=n(this,r.Promise||p.Promise),u="function"==typeof t;return this.then(u?function(o){return s(c,t()).then(function(){return o})}:t,u?function(o){return s(c,t()).then(function(){throw o})}:t)}})},{"./_core":106,"./_export":114,"./_global":117,"./_promise-resolve":152,"./_species-constructor":163}],202:[function(e,g,h){"use strict";var a=e("./_export"),r=e("./_new-promise-capability"),p=e("./_perform");a(a.S,"Promise",{try:function(n){var s=r.f(this),t=p(n);return(t.e?s.reject:s.resolve)(t.v),s.promise}})},{"./_export":114,"./_new-promise-capability":137,"./_perform":151}],203:[function(e,g,h){e("./_set-collection-from")("Set")},{"./_set-collection-from":156}],204:[function(e,g,h){e("./_set-collection-of")("Set")},{"./_set-collection-of":157}],205:[function(e,g,h){var a=e("./_export");a(a.P+a.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":104,"./_export":114}],206:[function(e,g,h){e("./_wks-define")("asyncIterator")},{"./_wks-define":174}],207:[function(e,g,h){e("./_wks-define")("observable")},{"./_wks-define":174}],208:[function(e,g,h){e("./es6.array.iterator");for(var a=e("./_global"),r=e("./_hide"),p=e("./_iterators"),n=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),t=0;t<s.length;t++){var c=s[t],u=a[c],o=u&&u.prototype;o&&!o[n]&&r(o,n,c),p[c]=p.Array}},{"./_global":117,"./_hide":119,"./_iterators":133,"./_wks":176,"./es6.array.iterator":181}],209:[function(e,g,h){h.UINT32=e("./lib/uint32"),h.UINT64=e("./lib/uint64")},{"./lib/uint32":210,"./lib/uint64":211}],210:[function(e,g,h){!function(a){function r(t,c){return this instanceof r?(this._low=0,this._high=0,this.remainder=null,void 0===c?n.call(this,t):"string"==typeof t?s.call(this,t,c):void p.call(this,t,c)):new r(t,c)}function p(t,c){return this._low=0|t,this._high=0|c,this}function n(t){return this._low=65535&t,this._high=t>>>16,this}function s(t,c){var u=parseInt(t,c||10);return this._low=65535&u,this._high=u>>>16,this}r(Math.pow(36,5)),r(Math.pow(16,7)),r(Math.pow(10,9)),r(Math.pow(2,30)),r(36),r(16),r(10),r(2),r.prototype.fromBits=p,r.prototype.fromNumber=n,r.prototype.fromString=s,r.prototype.toNumber=function(){return 65536*this._high+this._low},r.prototype.toString=function(t){return this.toNumber().toString(t||10)},r.prototype.add=function(t){var c=this._low+t._low,u=c>>>16;return u+=this._high+t._high,this._low=65535&c,this._high=65535&u,this},r.prototype.subtract=function(t){return this.add(t.clone().negate())},r.prototype.multiply=function(t){var c,u,l=this._low,w=t._low;return c=(u=l*w)>>>16,c+=this._high*w,c&=65535,c+=l*t._high,this._low=65535&u,this._high=65535&c,this},r.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new r(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new r(0),this._low=1,this._high=0,this;for(var c=t.clone(),u=-1;!this.lt(c);)c.shiftLeft(1,!0),u++;for(this.remainder=this.clone(),this._low=0,this._high=0;0<=u;u--)c.shiftRight(1),this.remainder.lt(c)||(this.remainder.subtract(c),16<=u?this._high|=1<<u-16:this._low|=1<<u);return this},r.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},r.prototype.greaterThan=r.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},r.prototype.lessThan=r.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},r.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},r.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},r.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},r.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},r.prototype.shiftRight=r.prototype.shiftr=function(t){return 16<t?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},r.prototype.shiftLeft=r.prototype.shiftl=function(t,c){return 16<t?(this._high=this._low<<t-16,this._low=0,c||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,c||(this._high&=65535)),this},r.prototype.rotateLeft=r.prototype.rotl=function(t){var c=this._high<<16|this._low;return this._low=65535&(c=c<<t|c>>>32-t),this._high=c>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(t){var c=this._high<<16|this._low;return this._low=65535&(c=c>>>t|c<<32-t),this._high=c>>>16,this},r.prototype.clone=function(){return new r(this._low,this._high)},void 0!==g&&g.exports?g.exports=r:a.UINT32=r}(this)},{}],211:[function(e,g,h){!function(a){var r={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},p={16:n(16),10:n(10),2:n(2)};function n(u,o,l,f){return this instanceof n?(this.remainder=null,"string"==typeof u?c.call(this,u,o):void 0===o?t.call(this,u):void s.apply(this,arguments)):new n(u,o,l,f)}function s(u,o,l,f){return void 0===l?(this._a00=65535&u,this._a16=u>>>16,this._a32=65535&o,this._a48=o>>>16):(this._a00=0|u,this._a16=0|o,this._a32=0|l,this._a48=0|f),this}function t(u){return this._a00=65535&u,this._a16=u>>>16,this._a32=0,this._a48=0,this}function c(u,o){o=o||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var l=r[o]||new n(Math.pow(o,5)),f=0,w=u.length;f<w;f+=5){var k=Math.min(5,w-f),O=parseInt(u.slice(f,f+k),o);this.multiply(k<5?new n(Math.pow(o,k)):l).add(new n(O))}return this}n.prototype.fromBits=s,n.prototype.fromNumber=t,n.prototype.fromString=c,n.prototype.toNumber=function(){return 65536*this._a16+this._a00},n.prototype.toString=function(u){var o=p[u=u||10]||new n(u);if(!this.gt(o))return this.toNumber().toString(u);for(var l=this.clone(),f=new Array(64),w=63;0<=w&&(l.div(o),f[w]=l.remainder.toNumber().toString(u),l.gt(o));w--);return f[w-1]=l.toNumber().toString(u),f.join("")},n.prototype.add=function(u){var o=this._a00+u._a00,l=o>>>16,f=(l+=this._a16+u._a16)>>>16,w=(f+=this._a32+u._a32)>>>16;return w+=this._a48+u._a48,this._a00=65535&o,this._a16=65535&l,this._a32=65535&f,this._a48=65535&w,this},n.prototype.subtract=function(u){return this.add(u.clone().negate())},n.prototype.multiply=function(u){var o=this._a00,l=this._a16,f=this._a32,k=u._a00,O=u._a16,M=u._a32,b=o*k,A=b>>>16,_=(A+=o*O)>>>16;A&=65535,_+=(A+=l*k)>>>16;var E=(_+=o*M)>>>16;return _&=65535,E+=(_+=l*O)>>>16,_&=65535,E+=(_+=f*k)>>>16,E+=o*u._a48,E&=65535,E+=l*M,E&=65535,E+=f*O,E&=65535,E+=this._a48*k,this._a00=65535&b,this._a16=65535&A,this._a32=65535&_,this._a48=65535&E,this},n.prototype.div=function(u){if(0==u._a16&&0==u._a32&&0==u._a48){if(0==u._a00)throw Error("division by zero");if(1==u._a00)return this.remainder=new n(0),this}if(u.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(u))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var o=u.clone(),l=-1;!this.lt(o);)o.shiftLeft(1,!0),l++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;0<=l;l--)o.shiftRight(1),this.remainder.lt(o)||(this.remainder.subtract(o),48<=l?this._a48|=1<<l-48:32<=l?this._a32|=1<<l-32:16<=l?this._a16|=1<<l-16:this._a00|=1<<l);return this},n.prototype.negate=function(){var u=1+(65535&~this._a00);return this._a00=65535&u,this._a16=65535&(u=(65535&~this._a16)+(u>>>16)),this._a32=65535&(u=(65535&~this._a32)+(u>>>16)),this._a48=~this._a48+(u>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(u){return this._a48==u._a48&&this._a00==u._a00&&this._a32==u._a32&&this._a16==u._a16},n.prototype.greaterThan=n.prototype.gt=function(u){return this._a48>u._a48||!(this._a48<u._a48)&&(this._a32>u._a32||!(this._a32<u._a32)&&(this._a16>u._a16||!(this._a16<u._a16)&&this._a00>u._a00))},n.prototype.lessThan=n.prototype.lt=function(u){return this._a48<u._a48||!(this._a48>u._a48)&&(this._a32<u._a32||!(this._a32>u._a32)&&(this._a16<u._a16||!(this._a16>u._a16)&&this._a00<u._a00))},n.prototype.or=function(u){return this._a00|=u._a00,this._a16|=u._a16,this._a32|=u._a32,this._a48|=u._a48,this},n.prototype.and=function(u){return this._a00&=u._a00,this._a16&=u._a16,this._a32&=u._a32,this._a48&=u._a48,this},n.prototype.xor=function(u){return this._a00^=u._a00,this._a16^=u._a16,this._a32^=u._a32,this._a48^=u._a48,this},n.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},n.prototype.shiftRight=n.prototype.shiftr=function(u){return 48<=(u%=64)?(this._a00=this._a48>>u-48,this._a16=0,this._a32=0,this._a48=0):32<=u?(this._a00=65535&(this._a32>>(u-=32)|this._a48<<16-u),this._a16=this._a48>>u&65535,this._a32=0,this._a48=0):16<=u?(this._a00=65535&(this._a16>>(u-=16)|this._a32<<16-u),this._a16=65535&(this._a32>>u|this._a48<<16-u),this._a32=this._a48>>u&65535,this._a48=0):(this._a00=65535&(this._a00>>u|this._a16<<16-u),this._a16=65535&(this._a16>>u|this._a32<<16-u),this._a32=65535&(this._a32>>u|this._a48<<16-u),this._a48=this._a48>>u&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(u,o){return 48<=(u%=64)?(this._a48=this._a00<<u-48,this._a32=0,this._a16=0,this._a00=0):32<=u?(this._a48=this._a16<<(u-=32)|this._a00>>16-u,this._a32=this._a00<<u&65535,this._a16=0,this._a00=0):16<=u?(this._a48=this._a32<<(u-=16)|this._a16>>16-u,this._a32=65535&(this._a16<<u|this._a00>>16-u),this._a16=this._a00<<u&65535,this._a00=0):(this._a48=this._a48<<u|this._a32>>16-u,this._a32=65535&(this._a32<<u|this._a16>>16-u),this._a16=65535&(this._a16<<u|this._a00>>16-u),this._a00=this._a00<<u&65535),o||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(u){if(0==(u%=64))return this;if(32<=u){var o=this._a00;if(this._a00=this._a32,this._a32=o,o=this._a48,this._a48=this._a16,this._a16=o,32==u)return this;u-=32}var l=this._a48<<16|this._a32,f=this._a16<<16|this._a00,w=l<<u|f>>>32-u,k=f<<u|l>>>32-u;return this._a00=65535&k,this._a16=k>>>16,this._a32=65535&w,this._a48=w>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(u){if(0==(u%=64))return this;if(32<=u){var o=this._a00;if(this._a00=this._a32,this._a32=o,o=this._a48,this._a48=this._a16,this._a16=o,32==u)return this;u-=32}var l=this._a48<<16|this._a32,f=this._a16<<16|this._a00,w=l>>>u|f<<32-u,k=f>>>u|l<<32-u;return this._a00=65535&k,this._a16=k>>>16,this._a32=65535&w,this._a48=w>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},void 0!==g&&g.exports?g.exports=n:a.UINT64=n}(this)},{}],212:[function(e,g,h){g.exports=e("./lib")},{"./lib":213}],213:[function(e,g,h){var a=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;function r(p){return void 0===p?0:parseInt(p,10)}h.fromSeconds=function(p){if("number"!=typeof p)throw new TypeError("Argument `seconds` must be a number");var n=p%60,s=(p-n)%3600;return{hours:(p-n-s)/3600,minutes:s/60,seconds:n}},h.fromString=function(p){if("string"!=typeof p)throw new TypeError("Argument `string` must be a string");var n=p.match(a);if(null===n||void 0===n[1]&&void 0===n[2]&&void 0===n[3])throw new Error('Could not parse "'+p+'" as a duration.');return{hours:r(n[1]),minutes:r(n[2]),seconds:r(n[3])}},h.toString=function(p){"number"==typeof p&&(p=h.fromSeconds(p));var n="PT";return 0<p.hours&&(n+=p.hours+"H"),0<p.minutes&&(n+=p.minutes+"M"),0<p.seconds&&(n+=p.seconds+"S"),"PT"===n&&(n+="0S"),n},h.toSeconds=function(p){var n=p;return"string"==typeof p&&(n=h.fromString(p)),3600*n.hours+60*n.minutes+n.seconds}},{}],214:[function(e,g,h){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(s){return"function"==typeof s}function p(s){return"object"===_typeof4(s)&&null!==s}function n(s){return void 0===s}((g.exports=a).EventEmitter=a).prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(s){if("number"!=typeof s||s<0||isNaN(s))throw TypeError("n must be a positive number");return this._maxListeners=s,this},a.prototype.emit=function(s){var t,c,u,o,l,f;if(this._events||(this._events={}),"error"===s&&(!this._events.error||p(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var w=new Error('Uncaught, unspecified "error" event. ('+t+")");throw w.context=t,w}if(n(c=this._events[s]))return!1;if(r(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),c.apply(this,o)}else if(p(c))for(o=Array.prototype.slice.call(arguments,1),u=(f=c.slice()).length,l=0;l<u;l++)f[l].apply(this,o);return!0},a.prototype.on=a.prototype.addListener=function(s,t){var c;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,r(t.listener)?t.listener:t),this._events[s]?p(this._events[s])?this._events[s].push(t):this._events[s]=[this._events[s],t]:this._events[s]=t,p(this._events[s])&&!this._events[s].warned&&(c=n(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&0<c&&this._events[s].length>c&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),"function"==typeof console.trace&&console.trace()),this},a.prototype.once=function(s,t){if(!r(t))throw TypeError("listener must be a function");var c=!1;function u(){this.removeListener(s,u),c||(c=!0,t.apply(this,arguments))}return u.listener=t,this.on(s,u),this},a.prototype.removeListener=function(s,t){var c,u,o,l;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[s])return this;if(o=(c=this._events[s]).length,u=-1,c===t||r(c.listener)&&c.listener===t)delete this._events[s],this._events.removeListener&&this.emit("removeListener",s,t);else if(p(c)){for(l=o;0<l--;)if(c[l]===t||c[l].listener&&c[l].listener===t){u=l;break}if(u<0)return this;1===c.length?(c.length=0,delete this._events[s]):c.splice(u,1),this._events.removeListener&&this.emit("removeListener",s,t)}return this},a.prototype.removeAllListeners=function(s){var t,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[s]&&delete this._events[s],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(c=this._events[s]))this.removeListener(s,c);else if(c)for(;c.length;)this.removeListener(s,c[c.length-1]);return delete this._events[s],this},a.prototype.listeners=function(s){return this._events&&this._events[s]?r(this._events[s])?[this._events[s]]:this._events[s].slice():[]},a.prototype.listenerCount=function(s){if(this._events){var t=this._events[s];if(r(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(s,t){return s.listenerCount(t)}},{}],215:[function(e,g,h){h.read=function(a,r,p,n,s){var t,c,u=8*s-n-1,o=(1<<u)-1,l=o>>1,f=-7,w=p?s-1:0,k=p?-1:1,O=a[r+w];for(w+=k,t=O&(1<<-f)-1,O>>=-f,f+=u;0<f;t=256*t+a[r+w],w+=k,f-=8);for(c=t&(1<<-f)-1,t>>=-f,f+=n;0<f;c=256*c+a[r+w],w+=k,f-=8);if(0===t)t=1-l;else{if(t===o)return c?NaN:1/0*(O?-1:1);c+=Math.pow(2,n),t-=l}return(O?-1:1)*c*Math.pow(2,t-n)},h.write=function(a,r,p,n,s,t){var c,u,o,l=8*t-s-1,f=(1<<l)-1,w=f>>1,k=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:t-1,M=n?1:-1,b=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,c=f):(c=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-c))<1&&(c--,o*=2),2<=(r+=1<=c+w?k/o:k*Math.pow(2,1-w))*o&&(c++,o/=2),f<=c+w?(u=0,c=f):1<=c+w?(u=(r*o-1)*Math.pow(2,s),c+=w):(u=r*Math.pow(2,w-1)*Math.pow(2,s),c=0));8<=s;a[p+O]=255&u,O+=M,u/=256,s-=8);for(c=c<<s|u,l+=s;0<l;a[p+O]=255&c,O+=M,c/=256,l-=8);a[p+O-M]|=128*b}},{}],216:[function(e,g,h){g.exports=window.FormData},{}],217:[function(e,g,h){var a;a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(r,p){var n="string"==typeof r.initial?{state:r.initial}:r.initial,s=r.terminal||r.final,t=p||r.target||{},c=r.events||[],u=r.callbacks||{},o={},l={},f=function(O){var M=Array.isArray(O.from)?O.from:O.from?[O.from]:[a.WILDCARD];o[O.name]=o[O.name]||{};for(var b=0;b<M.length;b++)l[M[b]]=l[M[b]]||[],l[M[b]].push(O.name),o[O.name][M[b]]=O.to||M[b];O.to&&(l[O.to]=l[O.to]||[])};n&&(n.event=n.event||"startup",f({name:n.event,from:"none",to:n.state}));for(var w=0;w<c.length;w++)f(c[w]);for(var k in o)o.hasOwnProperty(k)&&(t[k]=a.buildEvent(k,o[k]));for(var k in u)u.hasOwnProperty(k)&&(t[k]=u[k]);return t.current="none",t.is=function(O){return Array.isArray(O)?0<=O.indexOf(this.current):this.current===O},t.can=function(O){return!this.transition&&void 0!==o[O]&&(o[O].hasOwnProperty(this.current)||o[O].hasOwnProperty(a.WILDCARD))},t.cannot=function(O){return!this.can(O)},t.transitions=function(){return(l[this.current]||[]).concat(l[a.WILDCARD]||[])},t.isFinished=function(){return this.is(s)},t.error=r.error||function(O,M,b,A,_,E,y){throw y||E},t.states=function(){return Object.keys(l).sort()},n&&!n.defer&&t[n.event](),t},doCallback:function(r,p,n,s,t,c){if(p)try{return p.apply(r,[n,s,t].concat(c))}catch(u){return r.error(n,s,t,c,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",u)}},beforeAnyEvent:function(r,p,n,s,t){return a.doCallback(r,r.onbeforeevent,p,n,s,t)},afterAnyEvent:function(r,p,n,s,t){return a.doCallback(r,r.onafterevent||r.onevent,p,n,s,t)},leaveAnyState:function(r,p,n,s,t){return a.doCallback(r,r.onleavestate,p,n,s,t)},enterAnyState:function(r,p,n,s,t){return a.doCallback(r,r.onenterstate||r.onstate,p,n,s,t)},changeState:function(r,p,n,s,t){return a.doCallback(r,r.onchangestate,p,n,s,t)},beforeThisEvent:function(r,p,n,s,t){return a.doCallback(r,r["onbefore"+p],p,n,s,t)},afterThisEvent:function(r,p,n,s,t){return a.doCallback(r,r["onafter"+p]||r["on"+p],p,n,s,t)},leaveThisState:function(r,p,n,s,t){return a.doCallback(r,r["onleave"+n],p,n,s,t)},enterThisState:function(r,p,n,s,t){return a.doCallback(r,r["onenter"+s]||r["on"+s],p,n,s,t)},beforeEvent:function(r,p,n,s,t){if(!1===a.beforeThisEvent(r,p,n,s,t)||!1===a.beforeAnyEvent(r,p,n,s,t))return!1},afterEvent:function(r,p,n,s,t){a.afterThisEvent(r,p,n,s,t),a.afterAnyEvent(r,p,n,s,t)},leaveState:function(r,p,n,s,t){var c=a.leaveThisState(r,p,n,s,t),u=a.leaveAnyState(r,p,n,s,t);return!1!==c&&!1!==u&&(a.ASYNC===c||a.ASYNC===u?a.ASYNC:void 0)},enterState:function(r,p,n,s,t){a.enterThisState(r,p,n,s,t),a.enterAnyState(r,p,n,s,t)},buildEvent:function(r,p){return function(){var n=this.current,s=p[n]||(p[a.WILDCARD]!=a.WILDCARD?p[a.WILDCARD]:n)||n,t=Array.prototype.slice.call(arguments);if(this.transition)return this.error(r,n,s,t,a.Error.PENDING_TRANSITION,"event "+r+" inappropriate because previous transition did not complete");if(this.cannot(r))return this.error(r,n,s,t,a.Error.INVALID_TRANSITION,"event "+r+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,r,n,s,t))return a.Result.CANCELLED;if(n===s)return a.afterEvent(this,r,n,s,t),a.Result.NOTRANSITION;var c=this;this.transition=function(){return c.transition=null,c.current=s,a.enterState(c,r,n,s,t),a.changeState(c,r,n,s,t),a.afterEvent(c,r,n,s,t),a.Result.SUCCEEDED},this.transition.cancel=function(){c.transition=null,a.afterEvent(c,r,n,s,t)};var u=a.leaveState(this,r,n,s,t);return!1===u?(this.transition=null,a.Result.CANCELLED):a.ASYNC===u?a.Result.PENDING:this.transition?this.transition():void 0}}},void 0!==h?(void 0!==g&&g.exports&&(h=g.exports=a),h.StateMachine=a):typeof window<"u"?window.StateMachine=a:typeof self<"u"&&(self.StateMachine=a)},{}],218:[function(e,g,h){"use strict";var a=t(e("babel-runtime/regenerator")),r=t(e("babel-runtime/core-js/get-iterator")),p=t(e("babel-runtime/core-js/symbol/iterator")),n=t(e("babel-runtime/helpers/classCallCheck")),s=t(e("babel-runtime/helpers/createClass"));function t(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function o(l,f){(0,n.default)(this,o),this.balanceFactor=0,this.key=l,this.value=f,this.parent=null,this.left=null,this.right=null}return(0,s.default)(o,[{key:"update",value:function(l){this.value=l}},{key:"replace",value:function(l,f){l&&(this.left===f?this.left=f:this.right===f&&(this.right=f))}},{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}}]),o}(),u=function(){function o(l,f){(0,n.default)(this,o),this.isLessThan=l||function(w,k){return w<k},this.isEqual=f||function(w,k){return w===k},this.root=null,this.count=null}return(0,s.default)(o,[{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(l,f){var w=this.getNode(l);w?w.update(f):this.insert(l,f)}},{key:"insert",value:function(l,f){var w=new c(l,f);if(this.count++,this.root){for(var k=this.root;;)if(this.isLessThan(l,k.key)){if(!k.left){k.left=w;break}k=k.left}else{if(!k.right){k.right=w;break}k=k.right}for(w.parent=k,k=w;k.parent;){var O=k.parent,M=O.balanceFactor;if(k.isLeftChild?O.balanceFactor++:O.balanceFactor--,Math.abs(O.balanceFactor)<Math.abs(M))break;if(O.balanceFactor<-1||1<O.balanceFactor){this.rebalance(O);break}k=O}}else this.root=w}},{key:"get",value:function(l){for(var f=this.root;f;){if(this.isEqual(l,f.key))return f.value;f=this.isLessThan(l,f.key)?f.left:f.right}return null}},{key:"delete",value:function(l){var f=this.getNode(l);if(!f||f.key!==l)return null;var w=f.parent,k=f.left,O=f.right;if(!!k!=!!O){var M=k||O;w||M?w&&!M?this.root=M:(w.replace(f,null),this.rebalance(w)):this.root=null}else{for(var b=f.left;b.right;)b=b.right;if(f.left===b)f.isRoot?(this.root=b).parent=null:(f.isLeftChild?f.parent.left=b:f.parent.right=b,b.parent=f.parent),b.right=f.right,(b.right.parent=b).balanceFactor=f.balanceFactor,f={parent:b,isLeftChild:!0};else{var A=b.parent,_=b.left;(A.right=_)&&(_.parent=A),f.isRoot?(this.root=b).parent=null:(f.isLeftChild?f.parent.left=b:f.parent.right=b,b.parent=f.parent),b.right=f.right,(b.right.parent=b).left=f.left,(b.left.parent=b).balanceFactor=f.balanceFactor,f={parent:A,isLeftChild:!1}}}for(this.count--;f.parent;){var E=f.parent,y=E.balanceFactor;if(f.isLeftChild?E.balanceFactor-=1:E.balanceFactor+=1,Math.abs(E.balanceFactor)>Math.abs(y)){if(!(E.balanceFactor<-1||1<E.balanceFactor)||(this.rebalance(E),0!==E.parent.balanceFactor))break;f=E.parent}else f=E}return null}},{key:"getNode",value:function(l){for(var f=this.root;f;){if(this.isEqual(l,f.key))return f;f=this.isLessThan(l,f.key)?f.left:f.right}return null}},{key:"rebalance",value:function(l){l.balanceFactor<0?(0<l.right.balanceFactor&&this.rotateRight(l.right),this.rotateLeft(l)):0<l.balanceFactor&&(l.left.balanceFactor<0&&this.rotateLeft(l.left),this.rotateRight(l))}},{key:"rotateLeft",value:function(l){var f=l.right;l.right=f.left,null!==f.left&&(f.left.parent=l),f.parent=l.parent,null===f.parent?this.root=f:l.isLeftChild?f.parent.left=f:f.parent.right=f,(f.left=l).parent=f,l.balanceFactor=l.balanceFactor+1-Math.min(f.balanceFactor,0),f.balanceFactor=f.balanceFactor+1-Math.max(l.balanceFactor,0)}},{key:"rotateRight",value:function(l){var f=l.left;l.left=f.right,null!==f.right&&(f.right.parent=l),f.parent=l.parent,null===f.parent?this.root=f:l.isLeftChild?f.parent.left=f:f.parent.right=f,(f.right=l).parent=f,l.balanceFactor=l.balanceFactor-1-Math.min(f.balanceFactor,0),f.balanceFactor=f.balanceFactor-1-Math.max(l.balanceFactor,0)}},{key:p.default,value:a.default.mark(function l(){var f,w,k,O,M,b;return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:w=!(f=!0),k=void 0,A.prev=3,O=(0,r.default)(this.getIterator());case 5:if(f=(M=O.next()).done){A.next=12;break}return b=M.value,A.next=9,b;case 9:f=!0,A.next=5;break;case 12:A.next=18;break;case 14:A.prev=14,A.t0=A.catch(3),w=!0,k=A.t0;case 18:A.prev=18,A.prev=19,!f&&O.return&&O.return();case 21:if(A.prev=21,w)throw k;A.next=24;break;case 24:return A.finish(21);case 25:return A.finish(18);case 26:case"end":return A.stop()}},l,this,[[3,14,18,26],[19,,21,25]])})},{key:"getIterator",value:a.default.mark(function l(){var f,w,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return a.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:f=this.root;case 1:if(!f){O.next=7;break}if(this.isEqual(k,f.key)||null===k&&!f.left)return O.abrupt("break",7);O.next=4;break;case 4:f=this.isLessThan(k,f.key)||null===k?f.left:f.right,O.next=1;break;case 7:if(f){O.next=9;break}return O.abrupt("return",null);case 9:w=!0;case 10:if(w)return O.next=13,[f.key,f.value];O.next=28;break;case 13:if(w=!1,!f.right){O.next=20;break}for(f=f.right;f.left;)f=f.left;w=!0,O.next=26;break;case 20:if(!f.parent){O.next=25;break}w=f.parent.left===f,f=f.parent,O.next=26;break;case 25:return O.abrupt("break",36);case 26:O.next=34;break;case 28:if(!f.parent){O.next=33;break}w=f.parent.left===f,f=f.parent,O.next=34;break;case 33:return O.abrupt("break",36);case 34:O.next=10;break;case 36:return O.abrupt("return",null);case 37:case"end":return O.stop()}},l,this)})},{key:"getReverseIterator",value:a.default.mark(function l(){var f,w,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return a.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:f=this.root;case 1:if(!f){O.next=7;break}if(this.isEqual(k,f.key)||null===k&&!f.right)return O.abrupt("break",7);O.next=4;break;case 4:f=this.isLessThan(k,f.key)&&null!==k?f.left:f.right,O.next=1;break;case 7:if(f){O.next=9;break}return O.abrupt("return",null);case 9:w=!0;case 10:if(w)return O.next=13,[f.key,f.value];O.next=28;break;case 13:if(w=!1,!f.left){O.next=20;break}for(f=f.left;f.right;)f=f.right;w=!0,O.next=26;break;case 20:if(!f.parent){O.next=25;break}w=f.parent.right===f,f=f.parent,O.next=26;break;case 25:return O.abrupt("break",36);case 26:O.next=34;break;case 28:if(!f.parent){O.next=33;break}w=f.parent.right===f,f=f.parent,O.next=34;break;case 33:return O.abrupt("break",36);case 34:O.next=10;break;case 36:return O.abrupt("return",null);case 37:case"end":return O.stop()}},l,this)})},{key:"size",get:function(){return this.count}}]),o}();h.TreeMap=u},{"babel-runtime/core-js/get-iterator":32,"babel-runtime/core-js/symbol/iterator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],219:[function(e,g,h){!function(a,r){"use strict";"object"===_typeof4(g)&&g.exports?g.exports=r():a.log=r()}(this,function(){"use strict";var a=function(){},r="undefined",p=["trace","debug","info","warn","error"];function n(f,w){var k=f[w];if("function"==typeof k.bind)return k.bind(f);try{return Function.prototype.bind.call(k,f)}catch{return function(){return Function.prototype.apply.apply(k,[f,arguments])}}}function s(f,w){for(var k=0;k<p.length;k++){var O=p[k];this[O]=k<f?a:this.methodFactory(O,f,w)}this.log=this.debug}function t(f,w,k){return"debug"===(O=f)&&(O="log"),(typeof console>"u"?"undefined":_typeof4(console))!==r&&(void 0!==console[O]?n(console,O):void 0!==console.log?n(console,"log"):a)||function(O,M,b){return function(){(typeof console>"u"?"undefined":_typeof4(console))!==r&&(s.call(this,M,b),this[O].apply(this,arguments))}}.apply(this,arguments);var O}function c(f,w,k){var O,M=this,b="loglevel";function A(){var E;if((typeof window>"u"?"undefined":_typeof4(window))!==r){try{E=window.localStorage[b]}catch{}if(_typeof4(E)===r)try{var y=window.document.cookie,m=y.indexOf(encodeURIComponent(b)+"=");-1!==m&&(E=/^([^;]+)/.exec(y.slice(m))[1])}catch{}return void 0===M.levels[E]&&(E=void 0),E}}f&&(b+=":"+f),M.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},M.methodFactory=k||t,M.getLevel=function(){return O},M.setLevel=function(E,y){if("string"==typeof E&&void 0!==M.levels[E.toUpperCase()]&&(E=M.levels[E.toUpperCase()]),!("number"==typeof E&&0<=E&&E<=M.levels.SILENT))throw"log.setLevel() called with invalid level: "+E;if(O=E,!1!==y&&function(m){var R=(p[m]||"silent").toUpperCase();if((typeof window>"u"?"undefined":_typeof4(window))!==r){try{return window.localStorage[b]=R}catch{}try{window.document.cookie=encodeURIComponent(b)+"="+R+";"}catch{}}}(E),s.call(M,E,f),(typeof console>"u"?"undefined":_typeof4(console))===r&&E<M.levels.SILENT)return"No console available for logging"},M.setDefaultLevel=function(E){A()||M.setLevel(E,!1)},M.enableAll=function(E){M.setLevel(M.levels.TRACE,E)},M.disableAll=function(E){M.setLevel(M.levels.SILENT,E)};var _=A();null==_&&(_=w??"WARN"),M.setLevel(_,!1)}var u=new c,o={};u.getLogger=function(f){if("string"!=typeof f||""===f)throw new TypeError("You must supply a name when creating a logger.");var w=o[f];return w||(w=o[f]=new c(f,u.getLevel(),u.methodFactory)),w};var l=(typeof window>"u"?"undefined":_typeof4(window))!==r?window.log:void 0;return u.noConflict=function(){return(typeof window>"u"?"undefined":_typeof4(window))!==r&&window.log===u&&(window.log=l),u},u})},{}],220:[function(e,g,h){"use strict";var a,r=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var t in s)s.hasOwnProperty(t)&&(n[t]=s[t])},function(n,s){function t(){this.constructor=n}a(n,s),n.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var p=function(n){function s(t){var c=n.call(this)||this;return c.minDelay=t.min,c.maxDelay=t.max,c.initialDelay=t.initial||0,c.maxAttemptsCount=t.maxAttemptsCount||0,c.maxAttemptsTime=t.maxAttemptsTime||0,c.randomness=t.randomness||0,c.inProgress=!1,c.attemptNum=0,c.prevDelay=0,c.currDelay=0,c}return r(s,n),s.prototype.attempt=function(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)},s.prototype.nextDelay=function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;var c=this.currDelay+this.prevDelay;return this.prevDelay=this.currDelay,this.currDelay=c},s.prototype.randomize=function(t){var c=t*this.randomness,u=Math.round(Math.random()*c*2-c);return Math.max(0,t+u)},s.prototype.scheduleAttempt=function(t){var c=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));var u=this.nextDelay(t);u=this.randomize(u),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+u&&(this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),this.reject(new Error("Maximum attempt time limit reached"))),this.timeout=setTimeout(function(){return c.attempt()},u)},s.prototype.cleanup=function(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0},s.prototype.start=function(){var t=this;if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise(function(c,u){t.resolve=c,t.reject=u,t.startTimestamp=Date.now(),t.scheduleAttempt(t.initialDelay)})},s.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))},s.prototype.succeeded=function(t){this.emit("succeeded",t),this.resolve(t)},s.prototype.failed=function(t,c){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(c)},s.prototype.run=function(t){var c=this;return this.on("attempt",function(){t().then(function(u){return c.succeeded(u)}).catch(function(u){return c.failed(u)})}),this.start()},s}(e("events").EventEmitter);h.Retrier=p,h.default=p},{events:214}],221:[function(e,g,h){(function(a){(function(){"use strict";var r={function:!0,object:!0},p=r[typeof window>"u"?"undefined":_typeof4(window)]&&window||this,n=p,s=r[_typeof4(h)]&&h,t=r[_typeof4(g)]&&g&&!g.nodeType&&g,c=s&&t&&"object"==_typeof4(a)&&a;!c||c.global!==c&&c.window!==c&&c.self!==c||(p=c);var u=Math.pow(2,53)-1,o=/\bOpera/,l=this,f=Object.prototype,w=f.hasOwnProperty,k=f.toString;function O(F){return(F=String(F)).charAt(0).toUpperCase()+F.slice(1)}function M(F){return F=m(F),/^(?:webOS|i(?:OS|P))/.test(F)?F:O(F)}function b(F,B){for(var J in F)w.call(F,J)&&B(F[J],J,F)}function A(F){return null==F?O(F):k.call(F).slice(8,-1)}function _(F,B){var J=null!=F?_typeof4(F[B]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(J)||"object"==J&&!F[B])}function E(F){return String(F).replace(/([ -])(?!$)/g,"$1?")}function y(F,B){var J=null;return function(Q,U){var N=-1,D=Q?Q.length:0;if("number"==typeof D&&-1<D&&D<=u)for(;++N<D;)U(Q[N],N);else b(Q,U)}(F,function(Q,U){J=B(J,Q,U,F)}),J}function m(F){return String(F).replace(/^ +| +$/g,"")}var R=function F(B){var J=p,Q=B&&"object"==_typeof4(B)&&"String"!=A(B);Q&&(J=B,B=null);var U=J.navigator||{},N=U.userAgent||"";B||(B=N);var D,ie,Z=Q||l==n,ue=Q?!!U.likeChrome:/\bChrome\b/.test(B)&&!/internal|\n/i.test(k.toString()),re=Q?"Object":"ScriptBridgingProxyObject",te=Q?"Object":"Environment",ye=Q&&J.java?"JavaPackage":A(J.java),Se=Q?"Object":"RuntimeObject",Ee=/\bJava/.test(ye)&&J.java,V=Ee&&A(J.environment)==te,Y=Ee?"a":"\u03b1",z=Ee?"b":"\u03b2",T=J.document||{},C=J.operamini||J.opera,X=o.test(X=Q&&C?C["[[Class]]"]:A(C))?X:C=null,se=B,ne=[],be=null,Me=B==N,$e=Me&&C&&"function"==typeof C.version&&C.version(),Ue=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(kt,wt){return kt||RegExp("\\b"+(wt.pattern||E(wt))+"\\b","i").exec(B)&&(wt.label||wt)}),Fe=y(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(wt,Ht){return wt||RegExp("\\b"+(Ht.pattern||E(Ht))+"\\b","i").exec(B)&&(Ht.label||Ht)}),qe=ot([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Mt=y({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(wt,Ht,Yt){return wt||(Ht[qe]||Ht[/^[a-z]+(?: +[a-z]+\b)*/i.exec(qe)]||RegExp("\\b"+E(Yt)+"(?:\\b|\\w*\\d)","i").exec(B))&&Yt}),tt=y(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(wt,Ht){var Ln,Yn,Zn,ce,Yt=Ht.pattern||E(Ht);return!wt&&(wt=RegExp("\\b"+Yt+"(?:/[\\d.]+|[ \\w.]*)","i").exec(B))&&(Ln=wt,Zn=Ht.label||Ht,ce={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},(Yn=Yt)&&Zn&&/^Win/i.test(Ln)&&!/^Windows Phone /i.test(Ln)&&(ce=ce[/[\d.]+$/.exec(Ln)])&&(Ln="Windows "+ce),Ln=String(Ln),Yn&&Zn&&(Ln=Ln.replace(RegExp(Yn,"i"),Zn)),wt=M(Ln.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),wt});function ot(kt){return y(kt,function(wt,Ht){var Yt=Ht.pattern||E(Ht);return!wt&&(wt=RegExp("\\b"+Yt+" *\\d+[.\\w_]*","i").exec(B)||RegExp("\\b"+Yt+" *\\w+-[\\w]*","i").exec(B)||RegExp("\\b"+Yt+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(B))&&((wt=String(Ht.label&&!RegExp(Yt,"i").test(Ht.label)?Ht.label:wt).split("/"))[1]&&!/[\d.]+/.test(wt[0])&&(wt[0]+=" "+wt[1]),Ht=Ht.label||Ht,wt=M(wt[0].replace(RegExp(Yt,"i"),Ht).replace(RegExp("; *(?:"+Ht+"[_-])?","i")," ").replace(RegExp("("+Ht+")[-_.]?(\\w)","i"),"$1 $2"))),wt})}if(Ue&&(Ue=[Ue]),Mt&&!qe&&(qe=ot([Mt])),(D=/\bGoogle TV\b/.exec(qe))&&(qe=D[0]),/\bSimulator\b/i.test(B)&&(qe=(qe?qe+" ":"")+"Simulator"),"Opera Mini"==Fe&&/\bOPiOS\b/.test(B)&&ne.push("running in Turbo/Uncompressed mode"),"IE"==Fe&&/\blike iPhone OS\b/.test(B)?(Mt=(D=F(B.replace(/like iPhone OS/,""))).manufacturer,qe=D.product):/^iP/.test(qe)?(Fe||(Fe="Safari"),tt="iOS"+((D=/ OS ([\d_]+)/i.exec(B))?" "+D[1].replace(/_/g,"."):"")):"Konqueror"!=Fe||/buntu/i.test(tt)?Mt&&"Google"!=Mt&&(/Chrome/.test(Fe)&&!/\bMobile Safari\b/i.test(B)||/\bVita\b/.test(qe))||/\bAndroid\b/.test(tt)&&/^Chrome/.test(Fe)&&/\bVersion\//i.test(B)?(Fe="Android Browser",tt=/\bAndroid\b/.test(tt)?tt:"Android"):"Silk"==Fe?(/\bMobi/i.test(B)||(tt="Android",ne.unshift("desktop mode")),/Accelerated *= *true/i.test(B)&&ne.unshift("accelerated")):"PaleMoon"==Fe&&(D=/\bFirefox\/([\d.]+)\b/.exec(B))?ne.push("identifying as Firefox "+D[1]):"Firefox"==Fe&&(D=/\b(Mobile|Tablet|TV)\b/i.exec(B))?(tt||(tt="Firefox OS"),qe||(qe=D[1])):!Fe||(D=!/\bMinefield\b/i.test(B)&&/\b(?:Firefox|Safari)\b/.exec(Fe))?(Fe&&!qe&&/[\/,]|^[^(]+?\)/.test(B.slice(B.indexOf(D+"/")+8))&&(Fe=null),(D=qe||Mt||tt)&&(qe||Mt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(tt))&&(Fe=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(tt)?tt:D)+" Browser")):"Electron"==Fe&&(D=(/\bChrome\/([\d.]+)\b/.exec(B)||0)[1])&&ne.push("Chromium "+D):tt="Kubuntu",$e||($e=y(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",E(Fe),"(?:Firefox|Minefield|NetFront)"],function(kt,wt){return kt||(RegExp(wt+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(B)||0)[1]||null})),(D=("iCab"==Ue&&3<parseFloat($e)?"WebKit":/\bOpera\b/.test(Fe)&&(/\bOPR\b/.test(B)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(B)&&!/^(?:Trident|EdgeHTML)$/.test(Ue)&&"WebKit"||!Ue&&/\bMSIE\b/i.test(B)&&("Mac OS"==tt?"Tasman":"Trident")||"WebKit"==Ue&&/\bPlayStation\b(?! Vita\b)/i.test(Fe)&&"NetFront")&&(Ue=[D]),"IE"==Fe&&(D=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(B)||0)[1])?(Fe+=" Mobile",tt="Windows Phone "+(/\+$/.test(D)?D:D+".x"),ne.unshift("desktop mode")):/\bWPDesktop\b/i.test(B)?(Fe="IE Mobile",tt="Windows Phone 8.x",ne.unshift("desktop mode"),$e||($e=(/\brv:([\d.]+)/.exec(B)||0)[1])):"IE"!=Fe&&"Trident"==Ue&&(D=/\brv:([\d.]+)/.exec(B))&&(Fe&&ne.push("identifying as "+Fe+($e?" "+$e:"")),Fe="IE",$e=D[1]),Me){if(_(J,"global"))if(Ee&&(se=(D=Ee.lang.System).getProperty("os.arch"),tt=tt||D.getProperty("os.name")+" "+D.getProperty("os.version")),Z&&_(J,"system")&&(D=[J.system])[0]){tt||(tt=D[0].os||null);try{D[1]=J.require("ringo/engine").version,$e=D[1].join("."),Fe="RingoJS"}catch{D[0].global.system==J.system&&(Fe="Narwhal")}}else"object"==_typeof4(J.process)&&!J.process.browser&&(D=J.process)?"object"==_typeof4(D.versions)?"string"==typeof D.versions.electron?(ne.push("Node "+D.versions.node),Fe="Electron",$e=D.versions.electron):"string"==typeof D.versions.nw&&(ne.push("Chromium "+$e,"Node "+D.versions.node),Fe="NW.js",$e=D.versions.nw):(Fe="Node.js",se=D.arch,tt=D.platform,$e=($e=/[\d.]+/.exec(D.version))?$e[0]:"unknown"):V&&(Fe="Rhino");else A(D=J.runtime)==re?(Fe="Adobe AIR",tt=D.flash.system.Capabilities.os):A(D=J.phantom)==Se?(Fe="PhantomJS",$e=(D=D.version||null)&&D.major+"."+D.minor+"."+D.patch):"number"==typeof T.documentMode&&(D=/\bTrident\/(\d+)/i.exec(B))?((D=+D[1]+4)!=($e=[$e,T.documentMode])[1]&&(ne.push("IE "+$e[1]+" mode"),Ue&&(Ue[1]=""),$e[1]=D),$e="IE"==Fe?String($e[1].toFixed(1)):$e[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(Fe)&&(ne.push("masking as "+Fe+" "+$e),Fe="IE",$e="11.0",Ue=["Trident"],tt="Windows");tt=tt&&M(tt)}if($e&&(D=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec($e)||/(?:alpha|beta)(?: ?\d)?/i.exec(B+";"+(Me&&U.appMinorVersion))||/\bMinefield\b/i.test(B)&&"a")&&(be=/b/i.test(D)?"beta":"alpha",$e=$e.replace(RegExp(D+"\\+?$"),"")+("beta"==be?z:Y)+(/\d+\+?/.exec(D)||"")),"Fennec"==Fe||"Firefox"==Fe&&/\b(?:Android|Firefox OS)\b/.test(tt))Fe="Firefox Mobile";else if("Maxthon"==Fe&&$e)$e=$e.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(qe))"Xbox 360"==qe&&(tt=null),"Xbox 360"==qe&&/\bIEMobile\b/.test(B)&&ne.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Fe)&&(!Fe||qe||/Browser|Mobi/.test(Fe))||"Windows CE"!=tt&&!/Mobi/i.test(B))if("IE"==Fe&&Me)try{null===J.external&&ne.unshift("platform preview")}catch{ne.unshift("embedded")}else(/\bBlackBerry\b/.test(qe)||/\bBB10\b/.test(B))&&(D=(RegExp(qe.replace(/ +/g," *")+"/([.\\d]+)","i").exec(B)||0)[1]||$e)?(tt=((D=[D,/BB10/.test(B)])[1]?(qe=null,Mt="BlackBerry"):"Device Software")+" "+D[0],$e=null):this!=b&&"Wii"!=qe&&(Me&&C||/Opera/.test(Fe)&&/\b(?:MSIE|Firefox)\b/i.test(B)||"Firefox"==Fe&&/\bOS X (?:\d+\.){2,}/.test(tt)||"IE"==Fe&&(tt&&!/^Win/.test(tt)&&5.5<$e||/\bWindows XP\b/.test(tt)&&8<$e||8==$e&&!/\bTrident\b/.test(B)))&&!o.test(D=F.call(b,B.replace(o,"")+";"))&&D.name&&(D="ing as "+D.name+((D=D.version)?" "+D:""),o.test(Fe)?(/\bIE\b/.test(D)&&"Mac OS"==tt&&(tt=null),D="identify"+D):(D="mask"+D,Fe=X?M(X.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(D)&&(tt=null),Me||($e=null)),Ue=["Presto"],ne.push(D));else Fe+=" Mobile";(D=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(B)||0)[1])&&(D=[parseFloat(D.replace(/\.(\d)$/,".0$1")),D],"Safari"==Fe&&"+"==D[1].slice(-1)?(Fe="WebKit Nightly",be="alpha",$e=D[1].slice(0,-1)):$e!=D[1]&&$e!=(D[2]=(/\bSafari\/([\d.]+\+?)/i.exec(B)||0)[1])||($e=null),D[1]=(/\bChrome\/([\d.]+)/i.exec(B)||0)[1],537.36==D[0]&&537.36==D[2]&&28<=parseFloat(D[1])&&"WebKit"==Ue&&(Ue=["Blink"]),D=Me&&(ue||D[1])?(Ue&&(Ue[1]="like Chrome"),D[1]||((D=D[0])<530?1:D<532?2:D<532.05?3:D<533?4:D<534.03?5:D<534.07?6:D<534.1?7:D<534.13?8:D<534.16?9:D<534.24?10:D<534.3?11:D<535.01?12:D<535.02?"13+":D<535.07?15:D<535.11?16:D<535.19?17:D<536.05?18:D<536.1?19:D<537.01?20:D<537.11?"21+":D<537.13?23:D<537.18?24:D<537.24?25:D<537.36?26:"Blink"!=Ue?"27":"28")):(Ue&&(Ue[1]="like Safari"),(D=D[0])<400?1:D<500?2:D<526?3:D<533?4:D<534?"4+":D<535?5:D<537?6:D<538?7:D<601?8:"8"),Ue&&(Ue[1]+=" "+(D+="number"==typeof D?".x":/[.+]/.test(D)?"":"+")),"Safari"==Fe&&(!$e||45<parseInt($e))&&($e=D)),"Opera"==Fe&&(D=/\bzbov|zvav$/.exec(tt))?(Fe+=" ",ne.unshift("desktop mode"),"zvav"==D?(Fe+="Mini",$e=null):Fe+="Mobile",tt=tt.replace(RegExp(" *"+D+"$"),"")):"Safari"==Fe&&/\bChrome\b/.exec(Ue&&Ue[1])&&(ne.unshift("desktop mode"),Fe="Chrome Mobile",$e=null,tt=/\bOS X\b/.test(tt)?(Mt="Apple","iOS 4.3+"):null),$e&&0==$e.indexOf(D=/[\d.]+$/.exec(tt))&&-1<B.indexOf("/"+D+"-")&&(tt=m(tt.replace(D,""))),Ue&&!/\b(?:Avant|Nook)\b/.test(Fe)&&(/Browser|Lunascape|Maxthon/.test(Fe)||"Safari"!=Fe&&/^iOS/.test(tt)&&/\bSafari\b/.test(Ue[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(Fe)&&Ue[1])&&(D=Ue[Ue.length-1])&&ne.push(D),ne.length&&(ne=["("+ne.join("; ")+")"]),Mt&&qe&&qe.indexOf(Mt)<0&&ne.push("on "+Mt),qe&&ne.push((/^on /.test(ne[ne.length-1])?"":"on ")+qe),tt&&(D=/ ([\d.+]+)$/.exec(tt),ie=D&&"/"==tt.charAt(tt.length-D[0].length-1),tt={architecture:32,family:D&&!ie?tt.replace(D[0],""):tt,version:D?D[1]:null,toString:function(){var kt=this.version;return this.family+(kt&&!ie?" "+kt:"")+(64==this.architecture?" 64-bit":"")}}),(D=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(se))&&!/\bi686\b/i.test(se)?(tt&&(tt.architecture=64,tt.family=tt.family.replace(RegExp(" *"+D),"")),Fe&&(/\bWOW64\b/i.test(B)||Me&&/\w(?:86|32)$/.test(U.cpuClass||U.platform)&&!/\bWin64; x64\b/i.test(B))&&ne.unshift("32-bit")):tt&&/^OS X/.test(tt.family)&&"Chrome"==Fe&&39<=parseFloat($e)&&(tt.architecture=64),B||(B=null);var ht={};return ht.description=B,ht.layout=Ue&&Ue[0],ht.manufacturer=Mt,ht.name=Fe,ht.prerelease=be,ht.product=qe,ht.ua=B,ht.version=Fe&&$e,ht.os=tt||{architecture:null,family:null,version:null,toString:function(){return"null"}},ht.parse=F,ht.toString=function(){return this.description||""},ht.version&&ne.unshift($e),ht.name&&ne.unshift(Fe),tt&&Fe&&(tt!=String(tt).split(" ")[0]||tt!=Fe.split(" ")[0]&&!qe)&&ne.push(qe?"("+tt+")":"on "+tt),ne.length&&(ht.description=ne.join(" ")),ht}();s&&t?b(R,function(F,B){s[B]=F}):p.platform=R}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],222:[function(e,g,h){g.exports=e("./lib/checks")},{"./lib/checks":223}],223:[function(e,g,h){var a=e("util"),r=g.exports=e("./errors");function p(c,u,o,l){var f=new c(a.format.apply(this,[o=o||""].concat(l)));throw Error.captureStackTrace(f,u),f}function n(c,u,o){p(r.IllegalArgumentError,c,u,o)}function s(c){var u=_typeof4(c);if("object"==u){if(!c)return"null";if(c instanceof Array)return"array"}return u}function t(c){return function(u,o){var l=s(u);if(l==c)return u;n(arguments.callee,o||'Expected "'+c+'" but got "'+l+'".',Array.prototype.slice.call(arguments,2))}}g.exports.checkArgument=function(c,u){c||n(arguments.callee,u,Array.prototype.slice.call(arguments,2))},g.exports.checkState=function(c,u){var o,l,f;c||(o=arguments.callee,l=u,f=Array.prototype.slice.call(arguments,2),p(r.IllegalStateError,o,l,f))},g.exports.checkIsDef=function(c,u){if(void 0!==c)return c;n(arguments.callee,u||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},g.exports.checkIsDefAndNotNull=function(c,u){if(null!=c)return c;n(arguments.callee,u||'Expected value to be defined and not null but got "'+s(c)+'".',Array.prototype.slice.call(arguments,2))},g.exports.checkIsString=t("string"),g.exports.checkIsArray=t("array"),g.exports.checkIsNumber=t("number"),g.exports.checkIsBoolean=t("boolean"),g.exports.checkIsFunction=t("function"),g.exports.checkIsObject=t("object")},{"./errors":224,util:282}],224:[function(e,g,h){var a=e("util");function r(n){Error.call(this,n),this.message=n}function p(n){Error.call(this,n),this.message=n}a.inherits(r,Error),r.prototype.name="IllegalArgumentError",a.inherits(p,Error),p.prototype.name="IllegalStateError",g.exports.IllegalStateError=p,g.exports.IllegalArgumentError=r},{util:282}],225:[function(e,g,h){var a,r,p=g.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function t(M){if(a===setTimeout)return setTimeout(M,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(M,0);try{return a(M,0)}catch{try{return a.call(null,M,0)}catch{return a.call(this,M,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:n}catch{a=n}try{r="function"==typeof clearTimeout?clearTimeout:s}catch{r=s}}();var c,u=[],o=!1,l=-1;function f(){o&&c&&(o=!1,c.length?u=c.concat(u):l=-1,u.length&&w())}function w(){if(!o){var M=t(f);o=!0;for(var b=u.length;b;){for(c=u,u=[];++l<b;)c&&c[l].run();l=-1,b=u.length}c=null,o=!1,function(A){if(r===clearTimeout)return clearTimeout(A);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(A);try{r(A)}catch{try{return r.call(null,A)}catch{return r.call(this,A)}}}(M)}}function k(M,b){this.fun=M,this.array=b}function O(){}p.nextTick=function(M){var b=new Array(arguments.length-1);if(1<arguments.length)for(var A=1;A<arguments.length;A++)b[A-1]=arguments[A];u.push(new k(M,b)),1!==u.length||o||t(w)},k.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=O,p.addListener=O,p.once=O,p.off=O,p.removeListener=O,p.removeAllListeners=O,p.emit=O,p.prependListener=O,p.prependOnceListener=O,p.listeners=function(M){return[]},p.binding=function(M){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(M){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],226:[function(e,g,h){var a=function(){return this}()||Function("return this")(),r=a.regeneratorRuntime&&0<=Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime"),p=r&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,g.exports=e("./runtime"),r)a.regeneratorRuntime=p;else try{delete a.regeneratorRuntime}catch{a.regeneratorRuntime=void 0}},{"./runtime":227}],227:[function(e,g,h){!function(a){"use strict";var r,p=Object.prototype,n=p.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},t=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",o="object"===_typeof4(g),l=a.regeneratorRuntime;if(l)o&&(g.exports=l);else{(l=a.regeneratorRuntime=o?g.exports:{}).wrap=y;var f="suspendedStart",w="suspendedYield",k="executing",O="completed",M={},b={};b[t]=function(){return this};var A=Object.getPrototypeOf,_=A&&A(A(Z([])));_&&_!==p&&n.call(_,t)&&(b=_);var E=B.prototype=R.prototype=Object.create(b);F.prototype=E.constructor=B,B.constructor=F,B[u]=F.displayName="GeneratorFunction",l.isGeneratorFunction=function(re){var te="function"==typeof re&&re.constructor;return!!te&&(te===F||"GeneratorFunction"===(te.displayName||te.name))},l.mark=function(re){return Object.setPrototypeOf?Object.setPrototypeOf(re,B):(re.__proto__=B,u in re||(re[u]="GeneratorFunction")),re.prototype=Object.create(E),re},l.awrap=function(re){return{__await:re}},J(Q.prototype),Q.prototype[c]=function(){return this},l.AsyncIterator=Q,l.async=function(re,te,ye,Se){var Ee=new Q(y(re,te,ye,Se));return l.isGeneratorFunction(te)?Ee:Ee.next().then(function(V){return V.done?V.value:Ee.next()})},J(E),E[u]="Generator",E[t]=function(){return this},E.toString=function(){return"[object Generator]"},l.keys=function(re){var te=[];for(var ye in re)te.push(ye);return te.reverse(),function Se(){for(;te.length;){var Ee=te.pop();if(Ee in re)return Se.value=Ee,Se.done=!1,Se}return Se.done=!0,Se}},l.values=Z,ie.prototype={constructor:ie,reset:function(re){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!re)for(var te in this)"t"===te.charAt(0)&&n.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=r)},stop:function(){this.done=!0;var re=this.tryEntries[0].completion;if("throw"===re.type)throw re.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var te=this;function ye(T,C){return V.type="throw",V.arg=re,te.next=T,C&&(te.method="next",te.arg=r),!!C}for(var Se=this.tryEntries.length-1;0<=Se;--Se){var Ee=this.tryEntries[Se],V=Ee.completion;if("root"===Ee.tryLoc)return ye("end");if(Ee.tryLoc<=this.prev){var Y=n.call(Ee,"catchLoc"),z=n.call(Ee,"finallyLoc");if(Y&&z){if(this.prev<Ee.catchLoc)return ye(Ee.catchLoc,!0);if(this.prev<Ee.finallyLoc)return ye(Ee.finallyLoc)}else if(Y){if(this.prev<Ee.catchLoc)return ye(Ee.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<Ee.finallyLoc)return ye(Ee.finallyLoc)}}}},abrupt:function(re,te){for(var ye=this.tryEntries.length-1;0<=ye;--ye){var Se=this.tryEntries[ye];if(Se.tryLoc<=this.prev&&n.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var Ee=Se;break}}Ee&&("break"===re||"continue"===re)&&Ee.tryLoc<=te&&te<=Ee.finallyLoc&&(Ee=null);var V=Ee?Ee.completion:{};return V.type=re,V.arg=te,Ee?(this.method="next",this.next=Ee.finallyLoc,M):this.complete(V)},complete:function(re,te){if("throw"===re.type)throw re.arg;return"break"===re.type||"continue"===re.type?this.next=re.arg:"return"===re.type?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):"normal"===re.type&&te&&(this.next=te),M},finish:function(re){for(var te=this.tryEntries.length-1;0<=te;--te){var ye=this.tryEntries[te];if(ye.finallyLoc===re)return this.complete(ye.completion,ye.afterLoc),D(ye),M}},catch:function(re){for(var te=this.tryEntries.length-1;0<=te;--te){var ye=this.tryEntries[te];if(ye.tryLoc===re){var Se=ye.completion;if("throw"===Se.type){var Ee=Se.arg;D(ye)}return Ee}}throw new Error("illegal catch attempt")},delegateYield:function(re,te,ye){return this.delegate={iterator:Z(re),resultName:te,nextLoc:ye},"next"===this.method&&(this.arg=r),M}}}function y(re,te,ye,Se){var z,T,C,X,V=Object.create((te&&te.prototype instanceof R?te:R).prototype),Y=new ie(Se||[]);return V._invoke=(z=re,T=ye,C=Y,X=f,function(se,ne){if(X===k)throw new Error("Generator is already running");if(X===O){if("throw"===se)throw ne;return ue()}for(C.method=se,C.arg=ne;;){var be=C.delegate;if(be){var Me=U(be,C);if(Me){if(Me===M)continue;return Me}}if("next"===C.method)C.sent=C._sent=C.arg;else if("throw"===C.method){if(X===f)throw X=O,C.arg;C.dispatchException(C.arg)}else"return"===C.method&&C.abrupt("return",C.arg);X=k;var $e=m(z,T,C);if("normal"===$e.type){if(X=C.done?O:w,$e.arg===M)continue;return{value:$e.arg,done:C.done}}"throw"===$e.type&&(X=O,C.method="throw",C.arg=$e.arg)}}),V}function m(re,te,ye){try{return{type:"normal",arg:re.call(te,ye)}}catch(Se){return{type:"throw",arg:Se}}}function R(){}function F(){}function B(){}function J(re){["next","throw","return"].forEach(function(te){re[te]=function(ye){return this._invoke(te,ye)}})}function Q(re){var te;this._invoke=function(ye,Se){function Ee(){return new Promise(function(V,Y){!function z(T,C,X,se){var ne=m(re[T],re,C);if("throw"!==ne.type){var be=ne.arg,Me=be.value;return Me&&"object"===_typeof4(Me)&&n.call(Me,"__await")?Promise.resolve(Me.__await).then(function($e){z("next",$e,X,se)},function($e){z("throw",$e,X,se)}):Promise.resolve(Me).then(function($e){be.value=$e,X(be)},se)}se(ne.arg)}(ye,Se,V,Y)})}return te=te?te.then(Ee,Ee):Ee()}}function U(re,te){var ye=re.iterator[te.method];if(ye===r){if(te.delegate=null,"throw"===te.method){if(re.iterator.return&&(te.method="return",te.arg=r,U(re,te),"throw"===te.method))return M;te.method="throw",te.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}var Se=m(ye,re.iterator,te.arg);if("throw"===Se.type)return te.method="throw",te.arg=Se.arg,te.delegate=null,M;var Ee=Se.arg;return Ee?Ee.done?(te[re.resultName]=Ee.value,te.next=re.nextLoc,"return"!==te.method&&(te.method="next",te.arg=r),te.delegate=null,M):Ee:(te.method="throw",te.arg=new TypeError("iterator result is not an object"),te.delegate=null,M)}function N(re){var te={tryLoc:re[0]};1 in re&&(te.catchLoc=re[1]),2 in re&&(te.finallyLoc=re[2],te.afterLoc=re[3]),this.tryEntries.push(te)}function D(re){var te=re.completion||{};te.type="normal",delete te.arg,re.completion=te}function ie(re){this.tryEntries=[{tryLoc:"root"}],re.forEach(N,this),this.reset(!0)}function Z(re){if(re){var te=re[t];if(te)return te.call(re);if("function"==typeof re.next)return re;if(!isNaN(re.length)){var ye=-1,Se=function Ee(){for(;++ye<re.length;)if(n.call(re,ye))return Ee.value=re[ye],Ee.done=!1,Ee;return Ee.value=r,Ee.done=!0,Ee};return Se.next=Se}}return{next:ue}}function ue(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},{}],228:[function(e,g,h){(function(a){!function(r){"object"===_typeof4(h)&&void 0!==g?g.exports=r():(typeof window<"u"?window:void 0!==a?a:typeof self<"u"?self:this).rfc6902=r()}(function(){return function r(p,n,s){function t(o,l){if(!n[o]){if(!p[o]){var f="function"==typeof e&&e;if(!l&&f)return f(o,!0);if(c)return c(o,!0);var w=new Error("Cannot find module '"+o+"'");throw w.code="MODULE_NOT_FOUND",w}var k=n[o]={exports:{}};p[o][0].call(k.exports,function(O){return t(p[o][1][O]||O)},k,k.exports,r,p,n,s)}return n[o].exports}for(var c="function"==typeof e&&e,u=0;u<s.length;u++)t(s[u]);return t}({1:[function(r,p,n){"use strict";var s=function(M,b){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M)){for(var A,_=[],E=M[Symbol.iterator]();!(A=E.next()).done&&(_.push(A.value),!b||_.length!==b););return _}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=function(M){if(Array.isArray(M)){for(var b=0,A=Array(M.length);b<M.length;b++)A[b]=M[b];return A}return Array.from(M)};n.isDestructive=function(M){var b=M.op;return"remove"===b||"replace"===b||"copy"===b||"move"===b},n.subtract=u,n.intersection=o,n.objectType=l,n.diffArrays=f,n.diffObjects=w,n.diffValues=k,n.diffAny=O,Object.defineProperty(n,"__esModule",{value:!0});var c=r("./equal").compare;function u(M,b){var A={};for(var _ in M)A[_]=1;for(var E in b)delete A[E];return Object.keys(A)}function o(M){var b={};M.forEach(function(E){for(var y in E)b[y]=(b[y]||0)+1});var A=M.length;for(var _ in b)b[_]<A&&delete b[_];return Object.keys(b)}function l(M){return void 0===M?"undefined":null===M?"null":Array.isArray(M)?"array":_typeof4(M)}function f(M,b,A){var _={"0,0":{operations:[],cost:0}},E=isNaN(M.length)||M.length<=0?0:M.length,y=isNaN(b.length)||b.length<=0?0:b.length,m=function B(J,Q){var U=_[J+","+Q];if(void 0===U){if(c(M[J-1],b[Q-1]))U=B(J-1,Q-1);else{var N=[];if(0<J){var D=B(J-1,Q);N.push({operations:D.operations.concat({op:"remove",index:J-1}),cost:D.cost+1})}if(0<Q){var ie=B(J,Q-1);N.push({operations:ie.operations.concat({op:"add",index:J-1,value:b[Q-1]}),cost:ie.cost+1})}if(0<J&&0<Q){var Z=B(J-1,Q-1);N.push({operations:Z.operations.concat({op:"replace",index:J-1,original:M[J-1],value:b[Q-1]}),cost:Z.cost+1})}U=N.sort(function(ue,re){return ue.cost-re.cost})[0]}_[J+","+Q]=U}return U}(E,y).operations.reduce(function(B,J){var Q=s(B,2),U=Q[0],N=Q[1];if("add"===J.op){var D=J.index+1+N,ie=D<E+N?String(D):"-",Z={op:J.op,path:A.add(ie).toString(),value:J.value};return[U.concat(Z),N+1]}if("remove"===J.op)return Z={op:J.op,path:A.add(String(J.index+N)).toString()},[U.concat(Z),N-1];var ue=A.add(String(J.index+N)),re=O(J.original,J.value,ue);return[U.concat.apply(U,t(re)),N]},[[],0]);return s(m,2)[0]}function w(M,b,A){var _=[];return u(M,b).forEach(function(E){_.push({op:"remove",path:A.add(E).toString()})}),u(b,M).forEach(function(E){_.push({op:"add",path:A.add(E).toString(),value:b[E]})}),o([M,b]).forEach(function(E){_.push.apply(_,t(O(M[E],b[E],A.add(E))))}),_}function k(M,b,A){return c(M,b)?[]:[{op:"replace",path:A.toString(),value:b}]}function O(M,b,A){var _=l(M),E=l(b);return"array"==_&&"array"==E?f(M,b,A):"object"==_&&"object"==E?w(M,b,A):k(M,b,A)}},{"./equal":2}],2:[function(r,p,n){"use strict";function s(c,u){return c.length===u.length&&function(o,l){for(var f=[],w=0,k=o.length;w<k;w++)f.push([o[w],l[w]]);return f}(c,u).every(function(o){return t(o[0],o[1])})}function t(c,u){return c===u||(Array.isArray(c)&&Array.isArray(u)?s(c,u):Object(c)===c&&Object(u)===u&&(o=c,l=u,!!s(f=Object.keys(o),Object.keys(l))&&f.every(function(w){return t(o[w],l[w])})));var o,l,f}n.compare=t,Object.defineProperty(n,"__esModule",{value:!0})},{}],3:[function(r,p,n){"use strict";var s=function u(o,l,f){var w=Object.getOwnPropertyDescriptor(o,l);if(void 0===w){var k=Object.getPrototypeOf(o);return null===k?void 0:u(k,l,f)}if("value"in w&&w.writable)return w.value;var O=w.get;return void 0!==O?O.call(f):void 0},t=function(u,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+_typeof4(o));u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(u.__proto__=o)},c=function(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0}),n.MissingError=function(u){function o(l){c(this,o),s(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,"Value required at path: "+l),this.path=l,this.name=this.constructor.name}return t(o,u),o}(Error),n.InvalidOperationError=function(u){function o(l){c(this,o),s(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,"Invalid operation: "+l),this.op=l,this.name=this.constructor.name}return t(o,u),o}(Error),n.TestError=function(u){function o(l,f){c(this,o),s(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,"Test failed: "+l+" != "+f),this.actual=l,this.expected=f,this.name=this.constructor.name,this.actual=l,this.expected=f}return t(o,u),o}(Error)},{}],4:[function(r,p,n){"use strict";n.applyPatch=function(k,O){return O.map(function(M){var b=u[M.op];return void 0===b?new t(M.op):b(k,M)})},n.createPatch=function(k,O){var M=new c;return l(k,O,M)},n.createTests=function(k,O){var M=new Array;return O.filter(f).forEach(function(b){var A=w(k,b.path);if(A&&M.push(A),"from"in b){var _=w(k,b.from);_&&M.push(_)}}),M},Object.defineProperty(n,"__esModule",{value:!0});var s,t=r("./errors").InvalidOperationError,c=r("./pointer").Pointer,u=(s=r("./patch"))&&s.__esModule?s:{default:s},o=r("./diff"),l=o.diffAny,f=o.isDestructive;function w(k,O){var M=c.fromJSON(O).evaluate(k);if(void 0!==M)return{op:"test",path:O,value:M.value}}},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(r,p,n){"use strict";n.add=function(w,k){var O=s.fromJSON(k.path).evaluate(w);return void 0!==O.parent?(l(O.parent,O.key,k.value),null):new u(k.path)},n.remove=function(w,k){var O=s.fromJSON(k.path).evaluate(w);return void 0!==O.value?(f(O.parent,O.key),null):new u(k.path)},n.replace=function(w,k){var O=s.fromJSON(k.path).evaluate(w);return void 0!==O.value?(O.parent[O.key]=k.value,null):new u(k.path)},n.move=function(w,k){var O=s.fromJSON(k.from).evaluate(w);if(void 0===O.value)return new u(k.from);var M=s.fromJSON(k.path).evaluate(w);return void 0!==M.parent?(f(O.parent,O.key),l(M.parent,M.key,O.value),null):new u(k.path)},n.copy=function(w,k){var O=s.fromJSON(k.from).evaluate(w);if(void 0===O.value)return new u(k.from);var M=s.fromJSON(k.path).evaluate(w);return void 0!==M.parent?(f(O.parent,O.key),l(M.parent,M.key,O.value),null):new u(k.path)},n.test=function(w,k){var O=s.fromJSON(k.path).evaluate(w);return t(O.value,k.value)?null:new o(O.value,k.value)},Object.defineProperty(n,"__esModule",{value:!0});var s=r("./pointer").Pointer,t=r("./equal").compare,c=r("./errors"),u=c.MissingError,o=c.TestError;function l(w,k,O){Array.isArray(w)?"-"==k?w.push(O):w.splice(k,0,O):w[k]=O}function f(w,k){Array.isArray(w)?w.splice(k,1):delete w[k]}},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(r,p,n){"use strict";var s=function(){function u(o,l){for(var f in l){var w=l[f];w.configurable=!0,w.value&&(w.writable=!0)}Object.defineProperties(o,l)}return function(o,l,f){return l&&u(o.prototype,l),f&&u(o,f),o}}();function t(u){return u.replace(/~1/g,"/").replace(/~0/g,"~")}function c(u){return u.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(n,"__esModule",{value:!0}),n.Pointer=function(){function u(){var o=void 0===arguments[0]?[""]:arguments[0];(function(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")})(this,u),this.tokens=o}return s(u,{toString:{value:function(){return this.tokens.map(c).join("/")}},evaluate:{value:function(o){for(var l=null,f=null,w=1,k=this.tokens.length;w<k;w++)o=((l=o)||{})[f=this.tokens[w]];return{parent:l,key:f,value:o}}},push:{value:function(o){this.tokens.push(o)}},add:{value:function(o){return new u(this.tokens.concat(String(o)))}}},{fromJSON:{value:function(o){var l=o.split("/").map(t);if(""!==l[0])throw new Error("Invalid JSON Pointer: "+o);return new u(l)}}}),u}()},{}]},{},[4])(4)})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],229:[function(e,g,h){"use strict";var a=u(e("babel-runtime/regenerator")),r=u(e("babel-runtime/core-js/object/get-prototype-of")),p=u(e("babel-runtime/helpers/createClass")),n=u(e("babel-runtime/helpers/possibleConstructorReturn")),s=u(e("babel-runtime/helpers/inherits")),t=u(e("babel-runtime/helpers/classCallCheck")),c=u(e("babel-runtime/core-js/promise"));function u(E){return E&&E.__esModule?E:{default:E}}var o=function(E,y,m,R){return new(m||(m=c.default))(function(F,B){function J(N){try{U(R.next(N))}catch(D){B(D)}}function Q(N){try{U(R.throw(N))}catch(D){B(D)}}function U(N){N.done?F(N.value):new m(function(D){D(N.value)}).then(J,Q)}U((R=R.apply(E,y||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var l=e("events"),f=e("operation-retrier"),w=e("./configuration"),k=e("./logger"),O=e("./persistentState"),M=e("twilio-transport"),b=function E(){(0,t.default)(this,E)},A=function(E){function y(m){(0,t.default)(this,y);var R=(0,n.default)(this,(y.__proto__||(0,r.default)(y)).call(this));return(m=m||{}).transport=m.transport||new M.Transport(m.twilsockClient||null),R.state=new O.PersistentState,R.config=new w.default(m),R.twilsock=m.twilsockClient,R.transport=m.transport,R}return(0,s.default)(y,E),(0,p.default)(y,[{key:"setToken",value:function(m){return o(this,void 0,void 0,a.default.mark(function R(){var F;return a.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return this.currentFpaToken!==m&&(this.currentFpaToken=m,F=this.currentTokenRequest,this.currentTokenRequest=this.establishToken(m),this.notifyRejected(F)),B.abrupt("return",this.currentTokenRequest.promise);case 2:case"end":return B.stop()}},R,this)}))}},{key:"notifyRejected",value:function(m){m&&setTimeout(function(){return m.reject(new Error("Operation has been cancelled by next token"))},0)}},{key:"establishToken",value:function(m){var R=this,F=new b,B=new c.default(function(J,Q){R.establishTokenImpl(m).then(J).catch(Q),F.resolve=J,F.reject=Q});return F.promise=B,F}},{key:"establishTokenImpl",value:function(m){return o(this,void 0,void 0,a.default.mark(function R(){var F=this;return a.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",new f.default({min:500,max:2e3}).run(function(){return F.requestRtdToken(m)}).then(function(J){if("ok"!=J.status)throw J.exception;if(F.currentFpaToken===m){F.state.continuationToken=J.response.continuation_token;var Q=J.response.twilio_rtd_token;F.emit("NEW"===J.response.status.status?"tokenCreated":"tokenUpdated",Q),F.emit("token",Q);var U={token:J.response.twilio_rtd_token,ttl:J.response.ttl,status:J.response.status.status,reason:J.response.status.reason||null,identity:J.response.identity||null,accountSid:J.response.account_sid,serviceSids:J.response.instance_sids};return F.emit("response",U),U}}).catch(function(J){throw k.default.error(J),J}));case 1:case"end":return B.stop()}},R,this)}))}},{key:"requestRtdToken",value:function(m){return o(this,void 0,void 0,a.default.mark(function R(){var F,B,J;return a.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return F={"Content-Type":"application/json"},k.default.debug("Token request",B={fpa_token:m,continuation_token:this.state.continuationToken}),Q.prev=3,Q.next=6,this.transport.post(this.config.url,F,B);case 6:return k.default.debug("Token response:",J=Q.sent),Q.abrupt("return",{status:"ok",token:m,response:J.body});case 11:if(Q.prev=11,Q.t0=Q.catch(3),401===Q.t0.status||403===Q.t0.status)return Q.t0 instanceof Error||(Q.t0.body?Q.t0=new Error(Q.t0.body.message):Q.t0.description&&(Q.t0=new Error(Q.t0.description))),Q.abrupt("return",{status:"denied",exception:Q.t0,token:null,response:null});Q.next=16;break;case 16:throw Q.t0;case 17:case"end":return Q.stop()}},R,this,[[3,11]])}))}}]),y}(l.EventEmitter),_=h.EmsClient=A;h.EMSClient=_,h.default=_},{"./configuration":230,"./logger":231,"./persistentState":232,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214,"operation-retrier":220,"twilio-transport":273}],230:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function n(s){(0,p.default)(this,n);var t=s.emsClient||{};this.url=t.url||t.emsUri||t.emsUrl||"https://ems."+(s.realm||"us1")+".twilio.com/v1/token"}},{"babel-runtime/helpers/classCallCheck":50}],231:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/core-js/array/from"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0});var n=e("loglevel");function s(t,c){return[t].concat((0,p.default)(c))}h.default={setLevel:function(t){n.setLevel(t)},trace:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.trace.apply(null,s("EMS T:",c))},debug:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.debug.apply(null,s("EMS D:",c))},info:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.info.apply(null,s("EMS I:",c))},warn:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.warn.apply(null,s("EMS W:",c))},error:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.error.apply(null,s("EMS E:",c))}}},{"babel-runtime/core-js/array/from":31,loglevel:219}],232:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var n=e("./logger"),s=function(){function t(){(0,a.default)(this,t),this.cachedContinuationToken=null,this.myInstanceNumber=this.initializeInstanceId()}return(0,r.default)(t,[{key:"initializeInstanceId",value:function(){var c=function(){try{if(sessionStorage)return parseInt(sessionStorage.getItem("Twilio::RTD::EmsClient::InstanceId"))||0}catch{return 0}}();t.instancesCounter<c&&(t.instancesCounter=c);var u=t.instancesCounter++;try{sessionStorage&&(sessionStorage.setItem("Twilio::RTD::EmsClient::InstanceId",t.instancesCounter.toString()),window&&window.addEventListener("beforeunload",function(){sessionStorage.removeItem("Twilio::RTD::EmsClient::InstanceId")}))}catch{}return u}},{key:"shouldUsePersistentToken",get:function(){return 0===this.myInstanceNumber}},{key:"continuationToken",get:function(){if(this.cachedContinuationToken)return this.cachedContinuationToken;try{if(this.shouldUsePersistentToken&&sessionStorage)return this.cachedContinuationToken=sessionStorage.getItem("Twilio::RTD::EndpointId"),this.cachedContinuationToken}catch(c){n.default.info("Can't access persistent storage",c.message)}return null},set:function(c){this.cachedContinuationToken=c;try{this.shouldUsePersistentToken&&sessionStorage&&sessionStorage.setItem("Twilio::RTD::EndpointId",c)}catch(u){n.default.info("Can't access persistent storage",u.message)}}}]),t}();s.instancesCounter=0,h.PersistentState=s},{"./logger":231,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],233:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(b){return b&&b.__esModule?b:{default:b}}var t=function(b,A,_,E){return new(_||(_=n.default))(function(y,m){function R(J){try{B(E.next(J))}catch(Q){m(Q)}}function F(J){try{B(E.throw(J))}catch(Q){m(Q)}}function B(J){J.done?y(J.value):new _(function(Q){Q(J.value)}).then(R,F)}B((E=E.apply(b,A||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=e("./logger"),u=e("./configuration"),o=e("./media");h.Media=o.Media,h.McsMedia=o.Media;var l=e("twilio-transport"),f=e("./services/network"),w=c.Logger.scope(""),k=e("./../package.json").version,O="A valid Twilio token should be provided",M=function(){function b(A,_,E){if((0,r.default)(this,b),this.options=E||{},this.options.logLevel=this.options.logLevel||"error",this.config=new u.Configuration(A,_,this.options),!A)throw new Error(O);w.setLevel(this.options.logLevel),this.options.transport=this.options.transport||new l.Transport(null,this.options),this.transport=this.options.transport,this.network=new f.Network(this.config,this.transport)}return(0,p.default)(b,[{key:"updateToken",value:function(A){if(w.info("updateToken"),!A)throw new Error(O);this.config.updateToken(A)}},{key:"get",value:function(A){return t(this,void 0,void 0,a.default.mark(function _(){return a.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.network.get(this.config.baseUrl+"/"+A);case 2:return y.abrupt("return",new o.Media(this.config,this.network,y.sent.body));case 4:case"end":return y.stop()}},_,this)}))}},{key:"post",value:function(A,_){return t(this,void 0,void 0,a.default.mark(function E(){return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.network.post(this.config.baseUrl,_,A);case 2:return m.abrupt("return",new o.Media(this.config,this.network,m.sent.body));case 4:case"end":return m.stop()}},E,this)}))}},{key:"postFormData",value:function(A){return t(this,void 0,void 0,a.default.mark(function _(){return a.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.network.post(this.config.baseUrl,A);case 2:return y.abrupt("return",new o.Media(this.config,this.network,y.sent.body));case 4:case"end":return y.stop()}},_,this)}))}}]),b}();M.version=k,h.Client=M,h.McsClient=M,h.default=M},{"./../package.json":239,"./configuration":234,"./logger":236,"./media":237,"./services/network":238,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57,"twilio-transport":273}],234:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function s(t,c,u){(0,a.default)(this,s),this.options=u.MCS||u||{},this.token=t,this.baseUrl=(void 0===this.options.realm?"https://mcs.us1.twilio.com":"https://mcs."+this.options.realm+".twilio.com")+c}return(0,r.default)(s,[{key:"updateToken",value:function(t){this.token=t}},{key:"backoffConfigOverride",get:function(){return this.options.backoffConfigOverride}},{key:"retryWhenThrottledOverride",get:function(){return this.options.retryWhenThrottledOverride}}],[{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}},{key:"retryWhenThrottledDefault",get:function(){return!0}}]),s}();h.Configuration=n},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],235:[function(e,g,h){"use strict";var a=e("./client");g.exports=a},{"./client":233}],236:[function(e,g,h){"use strict";var a=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/createClass")),p=n(e("babel-runtime/core-js/array/from"));function n(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var s=e("loglevel");function t(u,o){return[u].concat((0,p.default)(o))}var c=function(){function u(){(0,a.default)(this,u),this.prefix=""}return(0,r.default)(u,[{key:"setLevel",value:function(o){s.setLevel(o)}},{key:"trace",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.trace.apply(null,t("MCS T:"+this.prefix,l))}},{key:"debug",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.debug.apply(null,t("MCS D:"+this.prefix,l))}},{key:"info",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.info.apply(null,t("MCS I:"+this.prefix,l))}},{key:"warn",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.warn.apply(null,t("MCS W:"+this.prefix,l))}},{key:"error",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.error.apply(null,t("MCS E:"+this.prefix,l))}}],[{key:"scope",value:function(o){return new u}},{key:"setLevel",value:function(o){s.setLevel(o)}},{key:"trace",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.trace.apply(null,t("MCS T:",l))}},{key:"debug",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.debug.apply(null,t("MCS D:",l))}},{key:"info",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.info.apply(null,t("MCS I:",l))}},{key:"warn",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.warn.apply(null,t("MCS W:",l))}},{key:"error",value:function(){for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];s.error.apply(null,t("MCS E:",l))}}]),u}();h.Logger=c},{"babel-runtime/core-js/array/from":31,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,loglevel:219}],237:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function u(o,l,f){(0,r.default)(this,u),this.config=o,this.network=l,this._update(f)}return(0,p.default)(u,[{key:"getContentUrl",value:function(){return function(u,o,l,f){return new(l||(l=n.default))(function(w,k){function O(A){try{b(f.next(A))}catch(_){k(_)}}function M(A){try{b(f.throw(A))}catch(_){k(_)}}function b(A){A.done?w(A.value):new l(function(_){_(A.value)}).then(O,M)}b((f=f.apply(u,[])).next())})}(this,0,void 0,a.default.mark(function o(){return a.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.network.get(this.config.baseUrl+"/"+this.sid);case 2:return this._update(f.sent.body),f.abrupt("return",n.default.resolve(this.state.contentDirectUrl));case 5:case"end":return f.stop()}},o,this)}))}},{key:"_update",value:function(o){this.state={sid:o.sid,serviceSid:o.service_sid,channelSid:o.channel_sid,messageSid:o.message_sid,dateCreated:o.date_created?new Date(o.date_created):null,dateUpdated:o.date_updated?new Date(o.date_updated):null,size:o.size,contentType:o.content_type,url:o.url,contentUrl:o.links.content,contentDirectUrl:o.links.content_direct_temporary,filename:o.filename?o.filename:null}}},{key:"sid",get:function(){return this.state.sid}},{key:"serviceSid",get:function(){return this.state.serviceSid}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}},{key:"fileName",get:function(){return this.state.filename}}]),u}();h.Media=c},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],238:[function(e,g,h){"use strict";var a=t(e("babel-runtime/regenerator")),r=t(e("babel-runtime/helpers/extends")),p=t(e("babel-runtime/helpers/classCallCheck")),n=t(e("babel-runtime/helpers/createClass")),s=t(e("babel-runtime/core-js/promise"));function t(O){return O&&O.__esModule?O:{default:O}}var c=function(O,M,b,A){return new(b||(b=s.default))(function(_,E){function y(F){try{R(A.next(F))}catch(B){E(B)}}function m(F){try{R(A.throw(F))}catch(B){E(B)}}function R(F){F.done?_(F.value):new b(function(B){B(F.value)}).then(y,m)}R((A=A.apply(O,M||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var u=e("operation-retrier"),o=e("../logger"),l=e("../configuration"),f=e("isomorphic-form-data"),w=o.Logger.scope(""),k=function(){function O(M,b){(0,p.default)(this,O),this.config=M,this.transport=b}return(0,n.default)(O,[{key:"backoffConfig",value:function(){return(0,r.default)(l.Configuration.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return void 0!==this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:void 0!==l.Configuration.retryWhenThrottledDefault&&l.Configuration.retryWhenThrottledDefault}},{key:"executeWithRetry",value:function(M){var b=this,A=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return new s.default(function(_,E){var y=[502,503,504];A&&y.push(429);var m=new u.default(b.backoffConfig());m.on("attempt",function(){M().then(function(R){return m.succeeded(R)}).catch(function(R){-1<y.indexOf(R.status)||"Twilsock disconnected"===R.message?m.failed(R):(m.removeAllListeners(),m.cancel(),E(R))})}),m.on("succeeded",function(R){_(R)}),m.on("cancelled",function(R){return E(R)}),m.on("failed",function(R){return E(R)}),m.start()})}},{key:"get",value:function(M){return c(this,void 0,void 0,a.default.mark(function b(){var A,_,E=this;return a.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return w.trace("sending GET request to ",M," headers ",A={"X-Twilio-Token":this.config.token}),y.next=4,this.executeWithRetry(function(){return E.transport.get(M,A)},this.retryWhenThrottled());case 4:return w.trace("response",_=y.sent),y.abrupt("return",_);case 7:case"end":return y.stop()}},b,this)}))}},{key:"post",value:function(M,b,A){return c(this,void 0,void 0,a.default.mark(function _(){var E,y;return a.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return E={"X-Twilio-Token":this.config.token},b instanceof f||!A||(0,r.default)(E,{"Content-Type":A}),y=void 0,w.trace("sending POST request to ",M," headers ",E),m.prev=4,m.next=7,this.transport.post(M,E,b);case 7:y=m.sent,m.next=17;break;case 10:if(m.prev=10,m.t0=m.catch(4),m.t0 instanceof TypeError)throw new TypeError("Posting FormData supported only with browser engine's FormData");m.next=16;break;case 16:throw m.t0;case 17:return w.trace("response",y),m.abrupt("return",y);case 19:case"end":return m.stop()}},_,this,[[4,10]])}))}}]),O}();h.Network=k},{"../configuration":234,"../logger":236,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/regenerator":57,"isomorphic-form-data":216,"operation-retrier":220}],239:[function(e,g,h){g.exports={_args:[[{raw:"twilio-mcs-client@^0.0.4",scope:null,escapedName:"twilio-mcs-client",name:"twilio-mcs-client",rawSpec:"^0.0.4",spec:">=0.0.4 <0.0.5",type:"range"},"/var/lib/jenkins/jobs/twilio-chat.js/workspace"]],_from:"twilio-mcs-client@>=0.0.4 <0.0.5",_id:"twilio-mcs-client@0.0.4",_inCache:!0,_location:"/twilio-mcs-client",_nodeVersion:"8.4.0",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/twilio-mcs-client-0.0.4.tgz_1507280871206_0.1071092204656452"},_npmUser:{name:"twilio-ci",email:"mroberts+twilio-ci@twilio.com"},_npmVersion:"5.3.0",_phantomChildren:{},_requested:{raw:"twilio-mcs-client@^0.0.4",scope:null,escapedName:"twilio-mcs-client",name:"twilio-mcs-client",rawSpec:"^0.0.4",spec:">=0.0.4 <0.0.5",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.0.4.tgz",_shasum:"369ccc8f1dfef9e914192dcd5d2c05377468a1da",_shrinkwrap:null,_spec:"twilio-mcs-client@^0.0.4",_where:"/var/lib/jenkins/jobs/twilio-chat.js/workspace",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{"body-parser":"^1.18.2",dotenv:"^4.0.0","isomorphic-form-data":"^1.0.0",loglevel:"^1.5.0","operation-retrier":"^1.3.2",pug:"^2.0.0-rc.4","twilio-transport":"^0.1.4"},description:"Twilio Media Content Service client library",devDependencies:{"@types/chai":"^3.5.2","@types/chai-as-promised":"0.0.31","@types/chai-datetime":"0.0.30","@types/chai-string":"^1.1.30","@types/core-js":"^0.9.42","@types/form-data":"0.0.33","@types/mocha":"^2.2.43","@types/node":"^7.0.18","@types/sinon":"^2.3.5","@types/sinon-chai":"^2.7.27",async:"^2.5.0","async-test-tools":"^1.0.7","babel-eslint":"^7.2.3","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-istanbul":"^4.1.5","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-require":"^1.0.1","babel-runtime":"^6.23.0",babelify:"^7.3.0",browserify:"^14.3.0",chai:"^3.5.0","chai-as-promised":"^6.0.0","chai-datetime":"^1.5.0","chai-string":"^1.3.0",cheerio:"^0.22.0",del:"^3.0.0",express:"^4.16.1",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-insert":"^0.5.0","gulp-mocha":"^4.3.1","gulp-rename":"^1.2.2","gulp-tap":"^1.0.1","gulp-tslint":"^8.0.0","gulp-typescript":"^3.2.1","gulp-uglify":"^3.0.0","gulp-util":"^3.0.8",gulpclass:"^0.1.2","ink-docstrap":"^1.3.0",jsdoc:"^3.5.3","jsdoc-strip-async-await":"^0.1.0",karma:"^1.7.0","karma-babel-preprocessor":"^6.0.1","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.3","karma-sinon-chai":"^1.3.1","karma-sinon-ie":"^2.0.0","karma-typescript":"^3.0.7","loglevel-message-prefix":"^2.0.1",nyc:"^11.2.1",proxyquire:"^1.8.0",sinon:"^2.3.8","sinon-chai":"^2.14.0",t:"^0.5.1","ts-node":"^3.2.0",tslint:"^5.5.0",twilio:"^3.7.0",typescript:"^2.5.3","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},directories:{},dist:{integrity:"sha512-4NWzSInfENIP48G58gyN13E5XlqItX8hU93yVsMX+FrIvcpUS3A4snXko6NvIt1ZTMhG+sXrt6OF3Mx555tTPw==",shasum:"369ccc8f1dfef9e914192dcd5d2c05377468a1da",tarball:"https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.0.4.tgz"},engines:{node:">=6"},gitHead:"339764692c93f2bd32b56889048ea7a05266abdd",license:"MIT",main:"lib/index.js",maintainers:[{name:"twilio-ci",email:"mroberts+twilio-ci@twilio.com"}],name:"twilio-mcs-client",optionalDependencies:{},readme:"ERROR: No README data found!",scripts:{start:"node app.js"},types:"./lib/client.d.ts",version:"0.0.4"}},{}],240:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=b(e("babel-runtime/core-js/promise")),r=b(e("babel-runtime/core-js/object/define-properties")),p=b(e("babel-runtime/core-js/object/get-prototype-of")),n=b(e("babel-runtime/helpers/classCallCheck")),s=b(e("babel-runtime/helpers/createClass")),t=b(e("babel-runtime/helpers/possibleConstructorReturn")),c=b(e("babel-runtime/helpers/inherits")),u=b(e("./configuration")),o=b(e("events")),l=b(e("./logger")),f=b(e("bottleneck")),w=b(e("./registrar")),k=b(e("twilsock")),O=b(e("twilio-transport")),M=e("twilio-ems-client");function b(_){return _&&_.__esModule?_:{default:_}}var A=function(_){function E(y,m){(0,n.default)(this,E);var R=(0,t.default)(this,(E.__proto__||(0,p.default)(E)).call(this));if(!y)throw new Error("Token is required for Notifications client");(m=m||{}).logLevel=m.logLevel||"error",l.default.setLevel(m.logLevel);var F=m.minTokenRefreshInterval||1e4,B=m.productId||"notifications";m.twilsockClient=m.twilsockClient||new k.default(y,m),m.transport=m.transport||new O.default(m.twilsockClient),m.emsClient=m.emsClient||new M.EMSClient(m);var J,U,N,D=m.twilsockClient,ie=m.transport,Z=new u.default(null,m);return(0,r.default)(R,{_config:{value:Z},_emsClient:{value:m.emsClient},_registrar:{value:new w.default(B,ie,D,Z)},_twilsock:{value:D},_reliableTransportState:{value:{overall:!1,transport:!1,registration:!1,lastEmitted:null}},updateToken:{value:(J=R._updateToken.bind(R),U=F,N=new f.default(1,U,1,f.default.strategy.LEAK),function(){var ue=Array.prototype.slice.call(arguments,0);return ue.unshift(J),N.schedule.apply(N,ue)}),enumerable:!0},connectionState:{get:function(){return"disconnected"===R._twilsock.state?"disconnected":"disconnecting"===R._twilsock.state?"disconnecting":"connected"===R._twilsock.state&&R._reliableTransportState.registration?"connected":"rejected"===R._twilsock.state?"denied":"connecting"}}}),R._emsClient.setToken(y).then(function(ue){R._config.updateToken(ue.token),R._registrar.updateToken()}).catch(function(ue){l.default.warn("Failed to set token",ue)}),R._onTransportStateChange(R._twilsock.connected),R._registrar.on("transportReady",function(ue){R._onRegistrationStateChange(ue?"registered":"")}),R._registrar.on("stateChanged",function(ue){R._onRegistrationStateChange(ue)}),R._registrar.on("needReliableTransport",R._onNeedReliableTransport.bind(R)),R._twilsock.on("message",function(ue,re){return R._routeMessage(ue,re)}),R._twilsock.on("connected",function(ue){R._onTransportStateChange(!0),R._registrar.setNotificationId("twilsock",ue)}),R._twilsock.on("disconnected",function(){R._onTransportStateChange(!1)}),R}return(0,c.default)(E,_),(0,s.default)(E,[{key:"_routeMessage",value:function(y,m){l.default.trace("Message arrived: ",y,m),this.emit("message",y,m)}},{key:"_onNeedReliableTransport",value:function(y){y?this._twilsock.connect():this._twilsock.disconnect()}},{key:"_onRegistrationStateChange",value:function(y){this._reliableTransportState.registration="registered"===y,this._updateTransportState()}},{key:"_onTransportStateChange",value:function(y){this._reliableTransportState.transport=y,this._updateTransportState()}},{key:"_updateTransportState",value:function(){var y=this._reliableTransportState.transport&&this._reliableTransportState.registration;this._reliableTransportState.overall!==y&&(this._reliableTransportState.overall=y,l.default.info("Transport ready "+y),this.emit("transportReady",y)),this._reliableTransportState.lastEmitted!==this.connectionState&&(this._reliableTransportState.lastEmitted=this.connectionState,this.emit("connectionStateChanged",this.connectionState))}},{key:"subscribe",value:function(y,m){return l.default.trace("Add subscriptions for message type: ",y,m=m||"twilsock"),this._registrar.subscribe(y,m)}},{key:"unsubscribe",value:function(y,m){return l.default.trace("Remove subscriptions for message type: ",y,m=m||"twilsock"),this._registrar.unsubscribe(y,m)}},{key:"handlePushNotification",value:function(y){l.default.warn("Push message passed, but no functionality implemented yet: "+y)}},{key:"setPushRegistrationId",value:function(y,m){this._registrar.setNotificationId(m||"gcm",y)}},{key:"_updateToken",value:function(y){var m=this;return l.default.info("authTokenUpdated"),this._fpaToken===y?a.default.resolve():(this._twilsock.updateToken(y),this._emsClient.setToken(y).then(function(R){return R.token}).then(function(R){m._config.updateToken(R),m._registrar.updateToken()}))}}]),E}(o.default);h.default=A,g.exports=h.default},{"./configuration":241,"./logger":243,"./registrar":245,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,bottleneck:69,events:214,"twilio-ems-client":229,"twilio-transport":273,twilsock:276}],241:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=n(e("babel-runtime/core-js/object/define-properties")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(c,u){var o=this;(0,r.default)(this,t);var l=(u=(u||{}).Notification||{}).ersUri||"https://ers.twilio.com";(0,a.default)(this,{_registrarUri:{value:l+"/v1/registrations"},_token:{value:c,writable:!0},registrarUri:{get:function(){return o._registrarUri}},token:{get:function(){return o._token}}})}return(0,p.default)(t,[{key:"updateToken",value:function(c){this._token=c}}]),t}();h.default=s,g.exports=h.default},{"babel-runtime/core-js/object/define-properties":39,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],242:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a,p=(a=e("./client"))&&a.__esModule?a:{default:a};h.default=p.default,g.exports=h.default},{"./client":240}],243:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=p(e("babel-runtime/core-js/array/from")),r=p(e("loglevel"));function p(s){return s&&s.__esModule?s:{default:s}}function n(s,t){return[s].concat((0,a.default)(t))}h.default={setLevel:function(s){r.default.setLevel(s)},trace:function(){r.default.trace.apply(null,n("Notify T:",arguments))},debug:function(){r.default.debug.apply(null,n("Notify D:",arguments))},info:function(){r.default.info.apply(null,n("Notify I:",arguments))},warn:function(){r.default.warn.apply(null,n("Notify W:",arguments))},error:function(){r.default.error.apply(null,n("Notify E:",arguments))}},g.exports=h.default},{"babel-runtime/core-js/array/from":31,loglevel:219}],244:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=O(e("babel-runtime/core-js/object/freeze")),r=O(e("babel-runtime/core-js/promise")),p=O(e("babel-runtime/core-js/set")),n=O(e("babel-runtime/core-js/object/define-properties")),s=O(e("babel-runtime/core-js/object/get-prototype-of")),t=O(e("babel-runtime/helpers/classCallCheck")),c=O(e("babel-runtime/helpers/createClass")),u=O(e("babel-runtime/helpers/possibleConstructorReturn")),o=O(e("babel-runtime/helpers/inherits")),l=O(e("events")),f=O(e("./logger")),w=O(e("javascript-state-machine")),k=O(e("backoff"));function O(A){return A&&A.__esModule?A:{default:A}}function M(A){var _=[];return A.forEach(function(E){return _.push(E)}),_}var b=function(A){function _(E,y,m,R){(0,t.default)(this,_);var F=(0,u.default)(this,(_.__proto__||(0,s.default)(_)).call(this)),B=w.default.create({initial:{state:"unregistered",event:"init",defer:!0},events:[{name:"userUpdate",from:["unregistered"],to:"registering"},{name:"userUpdate",from:["registered"],to:"unregistering"},{name:"registered",from:["registering","retrying"],to:"registered"},{name:"unregistered",from:["unregistering"],to:"unregistered"},{name:"retry",from:["retrying"],to:"retrying"},{name:"failure",from:["registering"],to:"retrying"},{name:"failure",from:["retrying"],to:"retrying"},{name:"failure",from:["unregistering"],to:"unregistered"}],callbacks:{onregistering:function(Q,U,N,D){return F._register(D)},onunregistering:function(){return F._unregister()},onregistered:function(){return F._onRegistered()},onunregistered:function(){return F._onUnregistered()},onretrying:function(Q,U,N,D){return F._initRetry(D)},onfailure:function(Q,U,N,D){"retrying"===U&&F._initRetry(D)}}}),J=k.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return J.on("ready",function(){F._retry()}),(0,n.default)(F,{_transport:{value:y},_context:{value:E},_url:{value:m.registrarUri,writable:!1},_config:{value:m},_fsm:{value:B},_backoff:{value:J},_channelType:{value:R},_registrationId:{value:!1,writable:!0},_notificationId:{value:!1,writable:!0},_messageTypes:{value:new p.default,writable:!0},_pendingUpdate:{value:null,writable:!0}}),B.init(),F}return(0,o.default)(_,A),(0,c.default)(_,[{key:"setNotificationId",value:function(E){this._notificationId!==E&&(this._notificationId=E,this._updateRegistration())}},{key:"updateToken",value:function(){return this._updateRegistration()}},{key:"has",value:function(E){return this._messageTypes.has(E)}},{key:"subscribe",value:function(E){return this._messageTypes.has(E)?(f.default.debug("Message type already registered ",E),!1):(this._messageTypes.add(E),this._updateRegistration(),!0)}},{key:"unsubscribe",value:function(E){return!!this._messageTypes.has(E)&&(this._messageTypes.delete(E),0<this._messageTypes.size?this._updateRegistration():this._removeRegistration(),!0)}},{key:"_updateRegistration",value:function(){this._notificationId&&this._update(this._notificationId,M(this._messageTypes))}},{key:"_removeRegistration",value:function(){this._notificationId&&this._update(this._notificationId,M(this._messageTypes))}},{key:"_update",value:function(E,y){var m={notificationId:E,messageTypes:y};this._fsm.is("unregistered")?m.notificationId&&0<m.messageTypes.length&&this._fsm.userUpdate(m):(this._fsm.is("registered")&&this._fsm.userUpdate(m),this._setPendingUpdate(m))}},{key:"_setPendingUpdate",value:function(E){this._pendingUpdate=E}},{key:"_checkPendingUpdate",value:function(){if(this._pendingUpdate){var E=this._pendingUpdate;this._pendingUpdate=null,this._updateRegistration(E.notificationId,E.messageTypes)}}},{key:"_initRetry",value:function(E){this._pendingUpdate||this._setPendingUpdate(E),this._backoff.backoff()}},{key:"_retry",value:function(){if(this._pendingUpdate){var E=this._pendingUpdate;this._pendingUpdate=null,this._register(E)}}},{key:"_onRegistered",value:function(){this._backoff.reset(),this.emit("stateChanged","registered"),this._checkPendingUpdate()}},{key:"_onUnregistered",value:function(){this._backoff.reset(),this.emit("stateChanged","unregistered"),this._checkPendingUpdate()}},{key:"_register",value:function(E){var y=this,m={endpoint_platform:this._context.platform,channel_type:this._channelType,version:"2",message_types:E.messageTypes,data:{},ttl:"PT24H"};"twilsock"===this._channelType?m.data.url=E.notificationId:m.data.registration_id=E.notificationId;var R=this._url+"?productId="+this._context.productId,F={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return f.default.trace("Creating registration for channel ",this._channelType),this._transport.post(R,F,m).then(function(B){y._registrationId=B.body.id,y._registrationData=E,f.default.debug("Registration created: ",B),y._fsm.registered()}).catch(function(B){return f.default.error("Registration failed: ",B),y._fsm.failure(E),B})}},{key:"_unregister",value:function(){var E=this;if(!this._registrationId)return r.default.resolve();var y=this._url+"/"+this._registrationId+"?productId="+this._context.productId,m={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return f.default.trace("Removing registration for ",this._channelType),this._transport.delete(y,m).then(function(){f.default.debug("Registration removed for ",E._channelType),E._registrationId=!1,E._fsm.unregistered()}).catch(function(R){return f.default.error("Failed to remove of registration ",E.channelType,R),E._fsm.failure(),R})}}]),_}(l.default);h.default=b,(0,a.default)(b),g.exports=h.default},{"./logger":243,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/core-js/set":47,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,backoff:58,events:214,"javascript-state-machine":217}],245:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=w(e("babel-runtime/core-js/object/freeze")),r=w(e("babel-runtime/core-js/map")),p=w(e("babel-runtime/core-js/object/define-properties")),n=w(e("babel-runtime/core-js/object/get-prototype-of")),s=w(e("babel-runtime/helpers/classCallCheck")),t=w(e("babel-runtime/helpers/createClass")),c=w(e("babel-runtime/helpers/possibleConstructorReturn")),u=w(e("babel-runtime/helpers/inherits")),o=w(e("events")),l=w(e("./registrar.connector")),f=w(e("./twilsock.connector"));function w(O){return O&&O.__esModule?O:{default:O}}var k=function(O){function M(b,A,_,E){(0,s.default)(this,M);var y=(0,c.default)(this,(M.__proto__||(0,n.default)(M)).call(this));(0,p.default)(y,{_conf:{value:E},_connectors:{value:new r.default}});var m=y._detectPlatform();return y._connectors.set("twilsock",new f.default({productId:b,platform:m},_,E)),y._connectors.set("gcm",new l.default({productId:b,platform:m},A,E,"gcm")),y._connectors.set("fcm",new l.default({productId:b,platform:m},A,E,"fcm")),y._connectors.set("apn",new l.default({productId:b,platform:m},A,E,"apn")),y._connectors.get("twilsock").on("transportReady",function(R){return y.emit("transportReady",R)}),y}return(0,u.default)(M,O),(0,t.default)(M,[{key:"setNotificationId",value:function(b,A){this._connector(b).setNotificationId(A)}},{key:"hasSubscription",value:function(b,A){this._connector(A).has(b)}},{key:"subscribe",value:function(b,A){this._connector(A).subscribe(b)}},{key:"unsubscribe",value:function(b,A){this._connector(A).unsubscribe(b)}},{key:"updateToken",value:function(){this._connectors.forEach(function(b){return b.updateToken()})}},{key:"_connector",value:function(b){var A=this._connectors.get(b);if(!A)throw new Error("Unknown channel type: "+b);return A}},{key:"_detectPlatform",value:function(){var b="";return typeof navigator<"u"?(b="unknown",void 0!==navigator.product&&(b=navigator.product),void 0!==navigator.userAgent&&(b=navigator.userAgent)):b="web",b.substring(0,128)}}]),M}(o.default);h.default=k,(0,a.default)(k),g.exports=h.default},{"./registrar.connector":244,"./twilsock.connector":246,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,events:214}],246:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=w(e("babel-runtime/core-js/object/freeze")),r=w(e("babel-runtime/core-js/set")),p=w(e("babel-runtime/core-js/object/define-properties")),n=w(e("babel-runtime/core-js/object/get-prototype-of")),s=w(e("babel-runtime/helpers/classCallCheck")),t=w(e("babel-runtime/helpers/createClass")),c=w(e("babel-runtime/helpers/possibleConstructorReturn")),u=w(e("babel-runtime/helpers/inherits")),o=w(e("uuid")),l=w(e("./logger"));function w(O){return O&&O.__esModule?O:{default:O}}var k=function(O){function M(b,A,_){(0,s.default)(this,M);var E=(0,c.default)(this,(M.__proto__||(0,n.default)(M)).call(this));return b.id=o.default.v4(),(0,p.default)(E,{_twilsock:{value:A},_messageTypes:{value:new r.default},config:{value:_},context:{value:b}}),A.on("stateChanged",function(y){"connected"!==y&&E.emit("transportReady",!1)}),A.on("registered",function(y){b&&y===b.id&&"connected"===A.state&&E.emit("transportReady",!0)}),E}return(0,u.default)(M,O),(0,t.default)(M,[{key:"setNotificationId",value:function(){return!1}},{key:"updateToken",value:function(){this._twilsock.removeNotificationsContext(this.context.id),this.context.id=o.default.v4(),this._updateContext()}},{key:"has",value:function(b){return this._messageTypes.has(b)}},{key:"subscribe",value:function(b){return this._messageTypes.has(b)?(l.default.trace("Message type already registered ",b),!1):(this._messageTypes.add(b),this._updateContext(),!0)}},{key:"unsubscribe",value:function(b){return!!this._messageTypes.has(b)&&(this._messageTypes.delete(b),0<this._messageTypes.size?this._updateContext():this._twilsock.removeNotificationsContext(this.context.id),!0)}},{key:"_updateContext",value:function(){if(this.config.token){var A,_=(A=[],this._messageTypes.forEach(function(y){return A.push(y)}),A),E={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,ttl:172800,token:this.config.token,message_types:_};this.emit("transportReady",!1),this._twilsock.setNotificationsContext(this.context.id,E)}}}]),M}(w(e("events")).default);h.default=k,(0,a.default)(k),g.exports=h.default},{"./logger":243,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/set":47,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,events:214,uuid:283}],247:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var n=e("karibu"),s=function(){function u(o,l){(0,a.default)(this,u),this.value=o,this.revision=l||0}return(0,r.default)(u,[{key:"isValid",get:function(){return!0}}]),u}(),t=function(){function u(o){(0,a.default)(this,u),this.revision=o}return(0,r.default)(u,[{key:"isValid",get:function(){return!1}}]),u}(),c=function(){function u(){(0,a.default)(this,u),this.items=new n.TreeMap}return(0,r.default)(u,[{key:"store",value:function(o,l,f){var w=this.items.get(o);return w&&w.revision>f?w.isValid?w.value:null:(this.items.set(o,new s(l,f)),l)}},{key:"delete",value:function(o,l){var f=this.items.get(o);(!f||f.revision<l)&&this.items.set(o,new t(l))}},{key:"isKnown",value:function(o,l){var f=this.items.get(o);return f&&f.revision>=l}},{key:"get",value:function(o){var l=this.items.get(o);return l&&l.isValid?l.value:null}},{key:"has",value:function(o){var l=this.items.get(o);return l&&l.isValid}}]),u}();h.Cache=c,h.default=c},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,karibu:218}],248:[function(e,g,h){"use strict";var a=u(e("babel-runtime/regenerator")),r=u(e("babel-runtime/core-js/object/get-prototype-of")),p=u(e("babel-runtime/helpers/classCallCheck")),n=u(e("babel-runtime/helpers/createClass")),s=u(e("babel-runtime/helpers/possibleConstructorReturn")),t=u(e("babel-runtime/helpers/inherits")),c=u(e("babel-runtime/core-js/promise"));function u(Se){return Se&&Se.__esModule?Se:{default:Se}}var o=function(Se,Ee,V,Y){return new(V||(V=c.default))(function(z,T){function C(ne){try{se(Y.next(ne))}catch(be){T(be)}}function X(ne){try{se(Y.throw(ne))}catch(be){T(be)}}function se(ne){ne.done?z(ne.value):new V(function(be){be(ne.value)}).then(C,X)}se((Y=Y.apply(Se,Ee||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var l=e("events"),f=e("xxhashjs"),w=e("twilsock"),k=e("twilio-transport"),O=e("twilio-ems-client"),M=e("twilio-notifications"),b=e("./utils"),A=e("./logger"),_=e("./configuration"),E=e("./subscriptions"),y=e("./router"),m=e("./network"),R=e("./syncdocument"),F=e("./synclist"),B=e("./syncmap"),J=e("./clientInfo"),Q=e("./entitiesCache"),U=e("./services/storage"),N=e("./utils"),D=e("./utils/deferred"),ie=e("./syncerror"),Z=e("./topics/synctopic"),ue=e("../package.json").version;function re(Se){return Se._subscribe(),Se}function te(Se){return Se?"string"==typeof Se?{id:Se,purpose:null,data:null,context:null,mode:null,optimistic:!1}:{id:Se.uniqueName||Se.sid||Se.id,purpose:Se.purpose,data:Se.data,context:Se.context,mode:Se.mode,optimistic:!!Se.optimistic}:{id:null,purpose:null,data:null,context:null,mode:null,optimistic:!1}}var ye=function(Se){function Ee(V){var Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,p.default)(this,Ee);var z=(0,s.default)(this,(Ee.__proto__||(0,r.default)(Ee)).call(this));if(!V)throw new Error("Sync library needs a valid Twilio token to be passed");Y.hasOwnProperty("logLevel")&&A.default.setLevel(Y.logLevel),z.productId=Y.productId=Y.productId||"data_sync";var T=Y.twilsockClient=Y.twilsockClient||new w(V,Y),C=Y.transport=Y.transport||new k.Transport(Y.twilsockClient,{concurrentHttpRequestLimit:20}),X=Y.emsClient=Y.emsClient||new O.EmsClient(Y),se=Y.notificationsClient=Y.notificationsClient||new M(V,Y),ne=new _.Configuration(null,Y),be=new m.Network(z.productId,new J.ClientInfo(ue),ne,C),Me=new U.SessionStorage(ne);z.localStorageId=null,z.fpaToken=V,z.authData=new D.Deferred,z.authData.promise.then(function(Fe){return z.handleEmsResponse(Fe)}),X.once("response",function(Fe){return z.authData.update(Fe)}),X.setToken(V).catch(function(Fe){A.default.warn("Failed to set token",Fe)}),T.connect(),z.services={config:ne,twilsock:T,notifications:se,network:be,emsClient:X,storage:Me,router:null,subscriptions:null};var $e=new E.Subscriptions(z.services),Ue=new y.Router({config:ne,subscriptions:$e,notifications:se});return z.services.router=Ue,z.services.subscriptions=$e,z.entities=new Q.EntitiesCache,se.on("connectionStateChanged",function(){z.emit("connectionStateChanged",z.services.notifications.connectionState)}),z}return(0,t.default)(Ee,Se),(0,n.default)(Ee,[{key:"handleEmsResponse",value:function(V){this.services.config.updateToken(V.token);try{var Y=V.identity,z=V.serviceSids[this.productId],T=f.h64().update("TW::"+Y+"::"+z).digest().toString(16);this.services.storage.updateStorageId(T)}catch(C){A.default.error("Failed to initialize persistent storage",C)}}},{key:"ensureReady",value:function(){return o(this,void 0,void 0,a.default.mark(function V(){return a.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.authData.promise;case 2:case"end":return Y.stop()}},V,this)}))}},{key:"storeRootInSessionCache",value:function(V,Y,z){if(this.services.config.sessionStorageEnabled&&Y){var T=N.deepClone(z);V!==F.SyncList.type&&V!==B.SyncMap.type||(T.last_event_id=null,delete T.items),this.services.storage.store(V,Y,T)}}},{key:"readRootFromSessionCache",value:function(V,Y){return this.services.config.sessionStorageEnabled&&Y?this.services.storage.read(V,Y):null}},{key:"_get",value:function(V,Y){var z=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return o(this,void 0,void 0,a.default.mark(function T(){var C;return a.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(Y){se.next=2;break}return se.abrupt("return",null);case 2:return C=new b.UriBuilder(V).pathSegment(Y).queryParam("Include",z?"items":void 0).build(),se.prev=3,se.next=6,this.services.network.get(C);case 6:return se.abrupt("return",se.sent.body);case 10:if(se.prev=10,se.t0=se.catch(3),404===se.t0.status)return se.abrupt("return",null);se.next=14;break;case 14:throw se.t0;case 15:case"end":return se.stop()}},T,this,[[3,10]])}))}},{key:"_createDocument",value:function(V,Y){return this.services.network.post(this.services.config.documentsUri,{unique_name:V,data:Y}).then(function(T){return T.body})}},{key:"_getDocument",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){return a.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",this.readRootFromSessionCache(R.SyncDocument.type,V)||this._get(this.services.config.documentsUri,V));case 1:case"end":return z.stop()}},Y,this)}))}},{key:"_createList",value:function(V,Y,z){return this.services.network.post(this.services.config.listsUri,{unique_name:V,purpose:Y,context:z,data:void 0}).then(function(C){return C.body})}},{key:"_getList",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){return a.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",this.readRootFromSessionCache(F.SyncList.type,V)||this._get(this.services.config.listsUri,V));case 1:case"end":return z.stop()}},Y,this)}))}},{key:"_createMap",value:function(V){return this.services.network.post(this.services.config.mapsUri,{unique_name:V}).then(function(z){return z.body})}},{key:"_getMap",value:function(V){var Y=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return o(this,void 0,void 0,a.default.mark(function z(){return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.readRootFromSessionCache(B.SyncMap.type,V)||this._get(this.services.config.mapsUri,V,Y));case 1:case"end":return T.stop()}},z,this)}))}},{key:"_getTopic",value:function(V){var Y=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return o(this,void 0,void 0,a.default.mark(function z(){return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.readRootFromSessionCache(Z.SyncTopic.type,V)||this._get(this.services.config.topicsUri,V,Y));case 1:case"end":return T.stop()}},z,this)}))}},{key:"_createTopic",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){var z;return a.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return z={unique_name:V},X.next=3,this.services.network.post(this.services.config.topicsUri,z);case 3:return X.abrupt("return",X.sent.body);case 6:case"end":return X.stop()}},Y,this)}))}},{key:"getCached",value:function(V,Y){return V&&this.entities.get(V,Y)||null}},{key:"removeFromCacheAndSession",value:function(V,Y,z){this.entities.remove(Y),this.services.config.sessionStorageEnabled&&this.services.storage.remove(V,Y,z)}},{key:"document",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){var z,T,C,X,se,ne,be,Me=this;return a.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.ensureReady();case 2:if(z=te(V),C=z.data,X=z.mode,se=this.getCached(T=z.id,"document"))return $e.abrupt("return",se);$e.next=8;break;case 8:return $e.next=10,this._getDocument(T);case 10:if(ne=$e.sent){$e.next=29;break}if("open"===X)throw new ie.default("Not found",404);$e.next=16;break;case 16:return $e.prev=16,$e.next=19,this._createDocument(T,C);case 19:ne=$e.sent,$e.next=29;break;case 22:if($e.prev=22,$e.t0=$e.catch(16),409===$e.t0.status)return $e.abrupt("return",this.document(V));$e.next=28;break;case 28:throw $e.t0;case 29:return this.storeRootInSessionCache(R.SyncDocument.type,T,ne),be=new R.SyncDocument(this.services,ne,function(Ue,Fe,qe){return Me.removeFromCacheAndSession(Ue,Fe,qe)}),be=this.entities.store(be),$e.abrupt("return",re(be));case 33:case"end":return $e.stop()}},Y,this,[[16,22]])}))}},{key:"map",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){var z,T,C,X,se,ne,be,Me=this;return a.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.ensureReady();case 2:if(z=te(V),C=z.mode,X=z.optimistic,se=this.getCached(T=z.id,"map"))return $e.abrupt("return",se);$e.next=8;break;case 8:return $e.next=10,this._getMap(T,X);case 10:if(ne=$e.sent){$e.next=29;break}if("open"===C)throw new ie.default("Not found",404);$e.next=16;break;case 16:return $e.prev=16,$e.next=19,this._createMap(T);case 19:ne=$e.sent,$e.next=29;break;case 22:if($e.prev=22,$e.t0=$e.catch(16),409===$e.t0.status)return $e.abrupt("return",this.map(V));$e.next=28;break;case 28:throw $e.t0;case 29:return this.storeRootInSessionCache(B.SyncMap.type,T,ne),be=new B.SyncMap(this.services,ne,function(Ue,Fe,qe){return Me.removeFromCacheAndSession(Ue,Fe,qe)}),be=this.entities.store(be),$e.abrupt("return",re(be));case 33:case"end":return $e.stop()}},Y,this,[[16,22]])}))}},{key:"list",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){var z,T,C,X,se,ne,be,Me,$e=this;return a.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.ensureReady();case 2:if(z=te(V),C=z.purpose,X=z.context,se=z.mode,ne=this.getCached(T=z.id,"list"))return Ue.abrupt("return",ne);Ue.next=8;break;case 8:return Ue.next=10,this._getList(T);case 10:if(be=Ue.sent){Ue.next=29;break}if("open"===se)throw new ie.default("Not found",404);Ue.next=16;break;case 16:return Ue.prev=16,Ue.next=19,this._createList(T,C,X);case 19:be=Ue.sent,Ue.next=29;break;case 22:if(Ue.prev=22,Ue.t0=Ue.catch(16),409===Ue.t0.status)return Ue.abrupt("return",this.list(V));Ue.next=28;break;case 28:throw Ue.t0;case 29:return this.storeRootInSessionCache(F.SyncList.type,T,be),Me=new F.SyncList(this.services,be,function(Fe,qe,Mt){return $e.removeFromCacheAndSession(Fe,qe,Mt)}),Me=this.entities.store(Me),Ue.abrupt("return",re(Me));case 33:case"end":return Ue.stop()}},Y,this,[[16,22]])}))}},{key:"topic",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){var z,T,C,X,se,ne,Me,$e=this;return a.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.ensureReady();case 2:if(z=te(V),C=z.mode,X=z.optimistic,se=this.getCached(T=z.id,Z.SyncTopic.type))return Ue.abrupt("return",se);Ue.next=8;break;case 8:return Ue.next=10,this._getTopic(T,X);case 10:if(ne=Ue.sent){Ue.next=29;break}if("open"===C)throw new ie.default("Not found",404);Ue.next=16;break;case 16:return Ue.prev=16,Ue.next=19,this._createTopic(T);case 19:ne=Ue.sent,Ue.next=29;break;case 22:if(Ue.prev=22,Ue.t0=Ue.catch(16),409===Ue.t0.status)return Ue.abrupt("return",this.topic(V));Ue.next=28;break;case 28:throw Ue.t0;case 29:return this.storeRootInSessionCache(Z.SyncTopic.type,T,ne),Me=new Z.SyncTopic(this.services,ne,function(Fe,qe,Mt){return $e.removeFromCacheAndSession(Fe,qe,Mt)}),Me=this.entities.store(Me),Ue.abrupt("return",re(Me));case 34:case"end":return Ue.stop()}},Y,this,[[16,22]])}))}},{key:"shutdown",value:function(){return o(this,void 0,void 0,a.default.mark(function V(){return a.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.services.subscriptions.shutdown();case 2:return Y.next=4,this.services.twilsock.disconnect();case 4:case"end":return Y.stop()}},V,this)}))}},{key:"updateToken",value:function(V){return o(this,void 0,void 0,a.default.mark(function Y(){return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.services.emsClient.setToken(V);case 2:return this.services.config.updateToken(T.sent.token),T.next=6,c.default.all([this.services.notifications.updateToken(V),this.services.twilsock.updateToken(V)]);case 6:this.fpaToken=V;case 7:case"end":return T.stop()}},Y,this)}))}},{key:"connectionState",get:function(){return this.services.notifications.connectionState}}],[{key:"version",get:function(){return ue}}]),Ee}(l.EventEmitter);h.SyncClient=ye,h.Client=ye,h.default=ye},{"../package.json":271,"./clientInfo":249,"./configuration":250,"./entitiesCache":251,"./logger":255,"./network":257,"./router":260,"./services/storage":261,"./subscriptions":262,"./syncdocument":264,"./syncerror":265,"./synclist":266,"./syncmap":267,"./topics/synctopic":268,"./utils":269,"./utils/deferred":270,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,events:214,"twilio-ems-client":229,"twilio-notifications":242,"twilio-transport":273,twilsock:276,xxhashjs:288}],249:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/helpers/classCallCheck"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0});var n=e("platform"),s=function t(c){(0,p.default)(this,t),this.sdk="js",this.sdkVer=c,this.os=n.os.family,this.osVer=n.os.version,this.pl=n.name,this.plVer=n.version};h.ClientInfo=s,h.default=s},{"babel-runtime/helpers/classCallCheck":50,platform:221}],250:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function s(t,c){(0,a.default)(this,s);var u,o,f=(c=(c=c||{}).Sync||c.DataSync||{}).cdsUri||"https://cds.twilio.com";this._token=t,this.settings={subscriptionsUri:f+"/v4/Subscriptions",documentsUri:f+"/v3/Documents",listsUri:f+"/v3/Lists",mapsUri:f+"/v3/Maps",topicsUri:f+"/v3/Topics",sessionStorageEnabled:(u=c,o="enableSessionStorage",!u||void 0===u[o]||u[o])}}return(0,r.default)(s,[{key:"updateToken",value:function(t){this._token=t}},{key:"token",get:function(){return this._token}},{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"topicsUri",get:function(){return this.settings.topicsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}}]),s}();h.Configuration=n},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],251:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/map")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function t(){(0,r.default)(this,t),this.names=new a.default,this.entities=new a.default}return(0,p.default)(t,[{key:"store",value:function(c){return this.entities.get(c.sid)||(this.entities.set(c.sid,c),c.uniqueName&&this.names.set(c.type+"::"+c.uniqueName,c.sid),c)}},{key:"getResolved",value:function(c,u){var o=this.names.get(u+"::"+c);return o?this.entities.get(o):null}},{key:"get",value:function(c,u){return this.entities.get(c)||this.getResolved(c,u)||null}},{key:"remove",value:function(c){var u=this.entities.get(c);u&&(this.entities.delete(c),u.uniqueName&&this.names.delete(u.type+"::"+u.uniqueName))}}]),t}();h.EntitiesCache=s},{"babel-runtime/core-js/map":35,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],252:[function(e,g,h){"use strict";var a=t(e("babel-runtime/core-js/object/get-prototype-of")),r=t(e("babel-runtime/helpers/classCallCheck")),p=t(e("babel-runtime/helpers/createClass")),n=t(e("babel-runtime/helpers/possibleConstructorReturn")),s=t(e("babel-runtime/helpers/inherits"));function t(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var c=function(u){function o(l,f){(0,r.default)(this,o);var w=(0,n.default)(this,(o.__proto__||(0,a.default)(o)).call(this));return w.services=l,w.removalHandler=f,w.subscriptionState="none",w}return(0,s.default)(o,u),(0,p.default)(o,[{key:"_advanceLastEventId",value:function(l,f){}},{key:"reportFailure",value:function(l){404===l.status?this.onRemoved(!1):this.emit("failure",l)}},{key:"_subscribe",value:function(){return this.services.router.subscribe(this.sid,this),this}},{key:"_unsubscribe",value:function(){return this.services.router.unsubscribe(this.sid,this),this}},{key:"_setSubscriptionState",value:function(l){this.subscriptionState=l,this.emit("_subscriptionStateChanged",l)}},{key:"close",value:function(){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName)}}]),o}(e("events").EventEmitter);h.SyncEntity=c,h.default=c},{"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,events:214}],253:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=e("./client");h.SyncClient=a.SyncClient;var r=e("./syncdocument");h.SyncDocument=r.SyncDocument;var p=e("./synclist");h.SyncList=p.SyncList;var n=e("./listitem");h.SyncListItem=n.ListItem;var s=e("./syncmap");h.SyncMap=s.SyncMap;var t=e("./mapitem");h.SyncMapItem=t.MapItem,h.default=a.SyncClient,g.exports=a.SyncClient,g.exports.SyncClient=a.SyncClient},{"./client":248,"./listitem":254,"./mapitem":256,"./syncdocument":264,"./synclist":266,"./syncmap":267}],254:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function s(t){(0,a.default)(this,s),this.data=t}return(0,r.default)(s,[{key:"update",value:function(t,c,u){return this.data.lastEventId=t,this.data.revision=c,this.data.value=u,this}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"index",get:function(){return this.data.index}},{key:"value",get:function(){return this.data.value}}]),s}();h.ListItem=n,h.default=n},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],255:[function(e,g,h){"use strict";var a,p=(a=e("babel-runtime/core-js/array/from"))&&a.__esModule?a:{default:a};Object.defineProperty(h,"__esModule",{value:!0});var n=e("loglevel");function s(t,c){return[t].concat((0,p.default)(c))}h.default={setLevel:function(t){n.setLevel(t)},trace:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.trace.apply(null,s("Sync T:",c))},debug:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.debug.apply(null,s("Sync D:",c))},info:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.info.apply(null,s("Sync I:",c))},warn:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.warn.apply(null,s("Sync W:",c))},error:function(){for(var t=arguments.length,c=Array(t),u=0;u<t;u++)c[u]=arguments[u];n.error.apply(null,s("Sync E:",c))}}},{"babel-runtime/core-js/array/from":31,loglevel:219}],256:[function(e,g,h){"use strict";var a=p(e("babel-runtime/helpers/classCallCheck")),r=p(e("babel-runtime/helpers/createClass"));function p(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function s(t){(0,a.default)(this,s),this.descriptor=t}return(0,r.default)(s,[{key:"update",value:function(t,c,u){return this.descriptor.last_event_id=t,this.descriptor.revision=c,this.descriptor.data=u,this}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"key",get:function(){return this.descriptor.key}},{key:"value",get:function(){return this.descriptor.data}}]),s}();h.MapItem=n,h.default=n},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],257:[function(e,g,h){"use strict";var a=t(e("babel-runtime/core-js/promise")),r=t(e("babel-runtime/helpers/extends")),p=t(e("babel-runtime/core-js/json/stringify")),n=t(e("babel-runtime/helpers/classCallCheck")),s=t(e("babel-runtime/helpers/createClass"));function t(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(h,"__esModule",{value:!0});var c=e("uuid"),u=e("./logger"),o=e("./syncerror"),l=e("./syncNetworkError"),f=e("operation-retrier"),w=e("twilio-transport");function k(A){if(A.body&&A.body.message)return A.body.message;switch(A.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function O(A){return A.body?A.body.code:0}function M(A){return 409===A.status?new l.SyncNetworkError(k(A),A.status,O(A),A.body):A.status?new o.SyncError(k(A),A.status,O(A)):A instanceof w.TwilsockUnavailableError?A:new o.SyncError(A.message,0,0)}var b=function(){function A(_,E,y,m){(0,n.default)(this,A),this.productId=_,this.clientInfo=E,this.config=y,this.transport=m}return(0,s.default)(A,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":(0,p.default)(this.clientInfo),"Twilio-Request-Id":"RQ"+c.v4().replace(/-/g,""),"X-Twilio-Product-Id":this.productId,"X-Twilio-Token":this.config.token}}},{key:"backoffConfig",value:function(){return(0,r.default)({min:4e3,max:6e4,maxAttemptsTime:9e4,randomness:.2},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(_){var E=this,y=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new a.default(function(m,R){var F=[502,503,504];y&&F.push(429);var B=new f.default(E.backoffConfig());B.on("attempt",function(){_().then(function(J){return B.succeeded(J)}).catch(function(J){if(-1!==F.indexOf(J.status)){var Q=parseInt(J.headers?J.headers["Retry-After"]:null);B.failed(M(J),isNaN(Q)?null:1e3*Q)}else"Twilsock disconnected"===J.message?B.failed(M(J)):(B.removeAllListeners(),B.cancel(),R(M(J)))})}),B.on("succeeded",function(J){m(J)}),B.on("cancelled",function(J){return R(M(J))}),B.on("failed",function(J){return R(M(J))}),B.start()})}},{key:"get",value:function(_){var E=this,y=this.createHeaders();return u.default.debug("GET",_,"ID:",y["Twilio-Request-Id"]),this.executeWithRetry(function(){return E.transport.get(_,y)},!0)}},{key:"post",value:function(_,E,y,m){var R=this,F=this.createHeaders();return null!=y&&(F["If-Match"]=y),u.default.debug("POST",_,"ID:",F["Twilio-Request-Id"]),this.executeWithRetry(function(){return R.transport.post(_,F,E,m)},!1)}},{key:"put",value:function(_,E,y){var m=this,R=this.createHeaders();return null!=y&&(R["If-Match"]=y),u.default.debug("PUT",_,"ID:",R["Twilio-Request-Id"]),this.executeWithRetry(function(){return m.transport.put(_,R,E)},!1)}},{key:"delete",value:function(_){var E=this,y=this.createHeaders();return u.default.debug("DELETE",_,"ID:",y["Twilio-Request-Id"]),this.executeWithRetry(function(){return E.transport.delete(_,y)},!1)}}]),A}();h.Network=b,h.default=b},{"./logger":255,"./syncNetworkError":263,"./syncerror":265,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"operation-retrier":220,"twilio-transport":273,uuid:283}],258:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(u){return u&&u.__esModule?u:{default:u}}var t=function(u,o,l,f){return new(l||(l=n.default))(function(w,k){function O(A){try{b(f.next(A))}catch(_){k(_)}}function M(A){try{b(f.throw(A))}catch(_){k(_)}}function b(A){A.done?w(A.value):new l(function(_){_(A.value)}).then(O,M)}b((f=f.apply(u,o||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function u(o,l,f,w){(0,r.default)(this,u),this.prevToken=f,this.nextToken=w,this.items=o,this.source=l}return(0,p.default)(u,[{key:"nextPage",value:function(){return t(this,void 0,void 0,a.default.mark(function o(){return a.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.hasNextPage){l.next=2;break}throw new Error("No next page");case 2:return l.abrupt("return",this.source(this.nextToken));case 3:case"end":return l.stop()}},o,this)}))}},{key:"prevPage",value:function(){return t(this,void 0,void 0,a.default.mark(function o(){return a.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.hasPrevPage){l.next=2;break}throw new Error("No previous page");case 2:return l.abrupt("return",this.source(this.prevToken));case 3:case"end":return l.stop()}},o,this)}))}},{key:"hasNextPage",get:function(){return!!this.nextToken}},{key:"hasPrevPage",get:function(){return!!this.prevToken}}]),u}();h.Paginator=c,h.default=c},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],259:[function(e,g,h){"use strict";var a=s(e("babel-runtime/core-js/object/freeze")),r=s(e("babel-runtime/core-js/promise")),p=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass"));function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var t=function(){function c(){(0,p.default)(this,c),this.queue=new Array,this.isActive=!1}return(0,n.default)(c,[{key:"wakeupQueue",value:function(){var u=this;!this.isActive&&0<this.queue.length&&(this.isActive=!0,setTimeout(function(){return u.executeTask(u.queue[0])},0))}},{key:"pickNext",value:function(){var u=this;this.queue.shift(),0!==this.queue.length?setTimeout(function(){return u.executeTask(u.queue[0])},0):this.isActive=!1}},{key:"pickSame",value:function(u){var o=this;this.queue[0].arg=u,setTimeout(function(){return o.executeTask(o.queue[0])},0)}},{key:"executeTask",value:function(u){var o=this;u.task(u.context,u.arg).then(function(l){o.pickNext(),u.resolve(l)}).catch(function(l){try{if(!u.handle)throw l;u.handle(l).then(function(f){return o.pickSame(f)}).catch(u.reject)}catch{u.reject(l)}})}},{key:"add",value:function(u,o,l,f){var w=this;return new r.default(function(k,O){w.queue.push({task:u,context:o,arg:l,handle:f,resolve:k,reject:O}),w.wakeupQueue()})}}]),c}();h.RetryingQueue=t,(0,a.default)(t),h.default=t},{"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],260:[function(e,g,h){"use strict";var a=s(e("babel-runtime/regenerator")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/createClass")),n=s(e("babel-runtime/core-js/promise"));function s(o){return o&&o.__esModule?o:{default:o}}var t=function(o,l,f,w){return new(f||(f=n.default))(function(k,O){function M(_){try{A(w.next(_))}catch(E){O(E)}}function b(_){try{A(w.throw(_))}catch(E){O(E)}}function A(_){_.done?k(_.value):new f(function(E){E(_.value)}).then(M,b)}A((w=w.apply(o,l||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var c=e("./logger"),u=function(){function o(l){var f=this;(0,r.default)(this,o),this.config=l.config,this.subscriptions=l.subscriptions,this.notifications=l.notifications,this.notifications.subscribe("twilio.sync.event"),this.notifications.subscribe("com.twilio.rtd.cds.document"),this.notifications.subscribe("com.twilio.rtd.cds.list"),this.notifications.subscribe("com.twilio.rtd.cds.map"),this.notifications.on("message",function(w,k){return f.onMessage(w,k)}),this.notifications.on("transportReady",function(w){return f.onConnectionStateChanged(w)})}return(0,p.default)(o,[{key:"onMessage",value:function(l,f){switch(c.default.trace("Notification type:",l,"content:",f),l){case"com.twilio.rtd.cds.document":case"com.twilio.rtd.cds.list":case"com.twilio.rtd.cds.map":this.subscriptions.acceptMessage(f,!1);break;case"twilio.sync.event":this.subscriptions.acceptMessage(f,!0)}}},{key:"subscribe",value:function(l,f){return t(this,void 0,void 0,a.default.mark(function w(){return a.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.subscriptions.add(l,f);case 2:case"end":return k.stop()}},w,this)}))}},{key:"unsubscribe",value:function(l,f){return t(this,void 0,void 0,a.default.mark(function w(){return a.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.subscriptions.remove(l);case 2:case"end":return k.stop()}},w,this)}))}},{key:"onConnectionStateChanged",value:function(l){this.subscriptions.onConnectionStateChanged(l)}}]),o}();h.Router=u,h.default=u},{"./logger":255,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],261:[function(e,g,h){"use strict";var a=s(e("babel-runtime/helpers/extends")),r=s(e("babel-runtime/core-js/json/stringify")),p=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass"));function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var t=function(){function c(u,o){(0,p.default)(this,c),this.config=u,this.storageId=null;try{this.storage=o||sessionStorage}catch{}}return(0,n.default)(c,[{key:"storageKey",value:function(u,o){return this.storageId+"::"+u+"::"+o}},{key:"updateStorageId",value:function(u){this.storageId=u}},{key:"store",value:function(u,o,l){return this.isReady?this._store(this.storageKey(u,o),l):null}},{key:"read",value:function(u,o){return this.isReady?this._read(this.storageKey(u,o)):null}},{key:"remove",value:function(u,o,l){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(u,o)),l&&this.storage.removeItem(this.storageKey(u,l))}catch{}}},{key:"update",value:function(u,o,l,f){if(!this.isReady)return null;this._apply(this.storageKey(u,o),f),l&&this._apply(this.storageKey(u,l),f)}},{key:"_store",value:function(u,o){try{this.storage.setItem(u,(0,r.default)(o))}catch{}}},{key:"_read",value:function(u){try{var o=this.storage.getItem(u);if(o)return JSON.parse(o)}catch{}return null}},{key:"_apply",value:function(u,o){var l=this._read(u);if(!l)return!1;this._store(u,(0,a.default)(l,o))}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}}]),c}();h.SessionStorage=t},{"babel-runtime/core-js/json/stringify":34,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52}],262:[function(e,g,h){"use strict";var a=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/helpers/slicedToArray")),p=o(e("babel-runtime/core-js/get-iterator")),n=o(e("babel-runtime/helpers/extends")),s=o(e("babel-runtime/core-js/map")),t=o(e("babel-runtime/helpers/classCallCheck")),c=o(e("babel-runtime/helpers/createClass")),u=o(e("babel-runtime/core-js/promise"));function o(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(h,"__esModule",{value:!0});var f=e("backoff"),w=e("./logger"),k=e("./syncerror"),O=e("twilio-transport"),M=function(){function A(_){(0,t.default)(this,A),this.localObject=_,this.pendingCorrelationId=null,this.established=!1,this.retryCount=0}return(0,c.default)(A,[{key:"update",value:function(_,E){this.localObject._update(_,E)}},{key:"reset",value:function(){this.pendingCorrelationId=null,this.retryCount=0,this.established=!1,this.localObject._setSubscriptionState("none")}},{key:"markAsFailed",value:function(_){this.rejectedWithError=_.error,this.pendingCorrelationId=null,this.localObject.reportFailure(new k.SyncError("Failed to subscribe on service events: "+_.error.message,_.error.status,_.error.code))}},{key:"complete",value:function(_){this.pendingCorrelationId=null,this.established=!0,this.localObject._advanceLastEventId(_)}},{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"isInTransition",get:function(){return null!==this.pendingCorrelationId}},{key:"isEstablished",get:function(){return this.established}}]),A}(),b=function(){function A(_){var E=this;(0,t.default)(this,A),this.isConnected=!1,this.maxBatchSize=100,this.subscriptionTtlTimer=null,this.pendingPokeReason=null,this.services=_,this.subscriptions=new s.default,this.persisted=new s.default,this.latestPokeResponseArrivalTimestampByCorrelationId=new s.default,this.backoff=f.exponential((0,n.default)({randomisationFactor:.2,initialDelay:100,maxDelay:12e4},this.services.config.backoffConfig)),this.backoff.on("ready",function(){var y=E.getSubscriptionUpdateBatch(),m=y.action;m?E.applyNewSubscriptionUpdateBatch(m,y.subscriptions):(E.backoff.reset(),w.default.info("All subscriptions resolved."))})}return(0,c.default)(A,[{key:"getSubscriptionUpdateBatch",value:function(){function _(m,R,F,B){var J=[],Q=!0,U=!1,N=void 0;try{for(var D,ie=(0,p.default)(m);!(Q=(D=ie.next()).done);Q=!0){var Z=(0,r.default)(D.value,2),re=Z[1];if(!R.get(Z[0])&&(F||!re.isInTransition)&&!re.rejectedWithError&&(J.push(re),B&&J.length>=B))break}}catch(te){U=!0,N=te}finally{try{!Q&&ie.return&&ie.return()}finally{if(U)throw N}}return J}var E=_(this.subscriptions,this.persisted,!1,this.maxBatchSize);if(0<E.length)return{action:"establish",subscriptions:E};var y=_(this.persisted,this.subscriptions,!0,this.maxBatchSize);return 0<y.length?{action:"cancel",subscriptions:y}:{action:null,subscriptions:null}}},{key:"persist",value:function(){try{this.backoff.backoff()}catch{}}},{key:"applyNewSubscriptionUpdateBatch",value:function(_,E){return function(A,_,E,y){return new(E||(E=u.default))(function(m,R){function F(Q){try{J(y.next(Q))}catch(U){R(U)}}function B(Q){try{J(y.throw(Q))}catch(U){R(U)}}function J(Q){Q.done?m(Q.value):new E(function(U){U(Q.value)}).then(F,B)}J((y=y.apply(A,[])).next())})}(this,0,void 0,a.default.mark(function y(){var m,R,F,B,J,Q,N,D,ie,Z,re,ye,Se,Ee,V,Y,T=this;return a.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(this.isConnected){C.next=4;break}return w.default.debug("Twilsock connection (required for subscription) not ready; waiting\u2026"),this.backoff.reset(),C.abrupt("return");case 4:for(E=this.processLocalActions(_,E),m=(new Date).getTime(),F=!(R=!0),B=void 0,C.prev=9,J=(0,p.default)(E);!(R=(Q=J.next()).done);R=!0)this.recordActionAttemptOn(Q.value,_,m);C.next=17;break;case 13:C.prev=13,C.t0=C.catch(9),F=!0,B=C.t0;case 17:C.prev=17,C.prev=18,!R&&J.return&&J.return();case 20:if(C.prev=20,F)throw B;C.next=23;break;case 23:return C.finish(20);case 24:return C.finish(17);case 25:return N=this.pendingPokeReason,this.pendingPokeReason=null,C.prev=27,C.next=30,this.request(_,m,N,E);case 30:ie=(D=C.sent).body.max_batch_size,!isNaN(parseInt(ie))&&isFinite(ie)&&0<ie&&(this.maxBatchSize=ie),this.subscriptionTtlTimer||(Z=D.body.ttl_in_s,!isNaN(parseFloat(Z))&&isFinite(Z)&&0<Z&&(this.subscriptionTtlTimer=setTimeout(function(){return T.onSubscriptionTtlElapsed()},1e3*Z))),"establish"===_&&(re=D.body.estimated_delivery_in_ms,!isNaN(parseFloat(re))&&isFinite(re)&&0<re?setTimeout(function(){return T.verifyPokeDelivery(m,re,E)},re):w.default.error("Invalid timeout: "+re),E.filter(function(X){return X.pendingCorrelationId===m}).forEach(function(X){return X.localObject._setSubscriptionState("response_in_flight")})),this.backoff.reset(),C.next=60;break;case 38:for(C.prev=38,C.t1=C.catch(27),Se=!(ye=!0),Ee=void 0,C.prev=43,V=(0,p.default)(E);!(ye=(Y=V.next()).done);ye=!0)this.recordActionFailureOn(Y.value,_);C.next=51;break;case 47:C.prev=47,C.t2=C.catch(43),Se=!0,Ee=C.t2;case 51:C.prev=51,C.prev=52,!ye&&V.return&&V.return();case 54:if(C.prev=54,Se)throw Ee;C.next=57;break;case 57:return C.finish(54);case 58:return C.finish(51);case 59:C.t1 instanceof O.TwilsockUnavailableError?(w.default.debug("Twilsock connection (required for subscription) not ready (c:"+m+"); waiting\u2026"),this.backoff.reset()):(w.default.debug("Failed an attempt to "+_+" subscriptions (c:"+m+"); retrying",C.t1),this.persist());case 60:case"end":return C.stop()}},y,this,[[9,13,17,25],[18,,20,24],[27,38],[43,47,51,59],[52,,54,58]])}))}},{key:"verifyPokeDelivery",value:function(_,E,y){var m=this,R=this.latestPokeResponseArrivalTimestampByCorrelationId.get(_),F=R?(new Date).getTime()-R:E;E<=F?(y.filter(function(B){return B.pendingCorrelationId===_}).forEach(function(B){B.pendingCorrelationId=null,B.retryCount++,m.persisted.delete(B.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(_)):setTimeout(function(){return m.verifyPokeDelivery(_,E,y)},E-F)}},{key:"processLocalActions",value:function(_,E){return"cancel"===_?E.filter(function(y){return!y.rejectedWithError}):E}},{key:"recordActionAttemptOn",value:function(_,E,y){if(_.localObject._setSubscriptionState("request_in_flight"),"establish"===E)this.persisted.set(_.sid,_),_.pendingCorrelationId=y;else{var m=this.persisted.get(_.sid);m&&(m.pendingCorrelationId=y)}}},{key:"recordActionFailureOn",value:function(_,E){_.localObject._setSubscriptionState("none"),_.pendingCorrelationId=null,"establish"===E&&this.persisted.delete(_.sid)}},{key:"request",value:function(_,E,y,m){var R=m.map(function(J){return{object_sid:J.sid,object_type:J.type,last_event_id:"establish"===_?J.lastEventId:void 0}}),F=m.filter(function(J){return 0<J.retryCount}).length;w.default.debug("Attempting '"+_+"' request (c:"+E+"):",R);var B={event_protocol_version:3,action:_,correlation_id:E,retried_requests:F,ttl_in_s:-1,requests:R};return"ttl"===y&&(B.reason=y),this.services.network.post(this.services.config.subscriptionsUri,B,null,!0)}},{key:"add",value:function(_,E){w.default.debug("Establishing intent to subscribe to "+_);var y=this.subscriptions.get(_);y&&y.lastEventId===E.lastEventId||(this.persisted.delete(_),this.subscriptions.set(_,new M(E)),this.persist())}},{key:"remove",value:function(_){w.default.debug("Establishing intent to unsubscribe from "+_),this.subscriptions.delete(_)&&this.persist()}},{key:"acceptMessage",value:function(_,E){switch(w.default.trace("Subscriptions received",_),_.correlation_id&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(_.correlation_id,(new Date).getTime()),_.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(_.event,_.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(_.event,_.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(_.event,_.correlation_id);break;case(_.event_type.match(/^(?:map|list|document|topic)_/)||{}).input:this.applyEventToSubscribedEntity(_.event_type.match(/^map_/)?_.event.map_sid:_.event_type.match(/^list_/)?_.event.list_sid:_.event_type.match(/^document_/)?_.event.document_sid:_.event_type.match(/^topic_/)?_.event.topic_sid:void 0,_,E);break;default:w.default.debug("Dropping unknown message type "+_.event_type)}}},{key:"applySubscriptionEstablishedMessage",value:function(_,E){var y=_.object_sid,m=this.persisted.get(_.object_sid);m&&m.pendingCorrelationId===E?"interrupted"===_.replay_status?(w.default.debug("Event Replay for subscription to "+y+" (c:"+E+") interrupted; continuing eagerly."),m.pendingCorrelationId=null,this.persisted.delete(m.sid),this.backoff.reset()):"completed"===_.replay_status&&(w.default.debug("Event Replay for subscription to "+y+" (c:"+E+") completed. Subscription is ready."),m.complete(_.last_event_id),this.persisted.set(_.object_sid,m),m.localObject._setSubscriptionState("established"),this.backoff.reset()):w.default.debug("Late message for "+_.object_sid+" (c:"+E+") dropped."),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(_,E){var y=this.persisted.get(_.object_sid);y&&y.pendingCorrelationId===E?(y.pendingCorrelationId=null,y.localObject._setSubscriptionState("none"),this.persisted.delete(_.object_sid)):w.default.debug("Late message for "+_.object_sid+" (c:"+E+") dropped."),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(_,E){var y=_.object_sid,m=this.subscriptions.get(y),R=this.persisted.get(y);m&&R?R.pendingCorrelationId===E&&(w.default.error("Failed to subscribe on "+R.sid,_.error),R.markAsFailed(_),R.localObject._setSubscriptionState("none")):!m&&R&&(this.persisted.delete(y),R.localObject._setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(_,E,y){if(_){var m;y=y||(m=this.persisted.get(_))&&m.isEstablished;var R=this.subscriptions.get(_);R?(E.event.type=E.event_type,R.update(E.event,y)):w.default.debug("Message dropped for SID '"+_+"', for which there is no subscription.")}}},{key:"onConnectionStateChanged",value:function(_){(this.isConnected=_)&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(_){w.default.info("Triggering event replay for all subscriptions, reason="+_),this.pendingPokeReason=_,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var E=[],y=!0,m=!1,R=void 0;try{for(var F,B=(0,p.default)(this.persisted.values());!(y=(F=B.next()).done);y=!0){var J=F.value;J.reset(),J.rejectedWithError&&E.push(J)}}catch(ue){m=!0,R=ue}finally{try{!y&&B.return&&B.return()}finally{if(m)throw R}}this.persisted.clear();var Q=!0,U=!1,N=void 0;try{for(var D,ie=(0,p.default)(E);!(Q=(D=ie.next()).done);Q=!0){var Z=D.value;this.persisted.set(Z.sid,Z)}}catch(ue){U=!0,N=ue}finally{try{!Q&&ie.return&&ie.return()}finally{if(U)throw N}}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),A}();h.Subscriptions=b,h.default=b},{"./logger":255,"./syncerror":265,"babel-runtime/core-js/get-iterator":32,"babel-runtime/core-js/map":35,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/slicedToArray":55,"babel-runtime/regenerator":57,backoff:58,"twilio-transport":273}],263:[function(e,g,h){"use strict";var a=s(e("babel-runtime/core-js/object/get-prototype-of")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/possibleConstructorReturn")),n=s(e("babel-runtime/helpers/inherits"));function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var t=function(c){function u(o){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,w=arguments[3];(0,r.default)(this,u);var k=(0,p.default)(this,(u.__proto__||(0,a.default)(u)).call(this,o,l,f));return k.body=w,k}return(0,n.default)(u,c),u}(e("./syncerror").SyncError);h.SyncNetworkError=t,h.default=t},{"./syncerror":265,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54}],264:[function(e,g,h){"use strict";var a=o(e("babel-runtime/helpers/extends")),r=o(e("babel-runtime/regenerator")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(A){return A&&A.__esModule?A:{default:A}}var l=function(A,_,E,y){return new(E||(E=u.default))(function(m,R){function F(Q){try{J(y.next(Q))}catch(U){R(U)}}function B(Q){try{J(y.throw(Q))}catch(U){R(U)}}function J(Q){Q.done?m(Q.value):new E(function(U){U(Q.value)}).then(F,B)}J((y=y.apply(A,_||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("./logger"),w=e("./entity"),k=e("rfc6902"),O=e("./retryingqueue"),M=e("./utils"),b=function(A){function _(E,y,m){(0,n.default)(this,_);var R=(0,t.default)(this,(_.__proto__||(0,p.default)(_)).call(this,E,m));return R.actionQueue=new O.RetryingQueue,R.descriptor=y,R.descriptor.data=R.descriptor.data||{},R}return(0,c.default)(_,A),(0,s.default)(_,[{key:"_update",value:function(E){switch(E.type){case"document_updated":if(E.id>this.lastEventId){var y=this.descriptor.data;this.descriptor.last_event_id=E.id,this.descriptor.revision=E.document_revision,this.descriptor.data=E.document_data,this.traverse(y,E.document_data,!1),this.emit("updated",E.document_data,!1),this.emit("updatedRemotely",E.document_data),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:E.id,revision:E.document_revision,data:E.document_data})}break;case"document_removed":this.onRemoved(!1)}}},{key:"traverse",value:function(E,y,m){var R=this;k.createPatch(E,y).forEach(function(F){"add"===F.op?(R.emit("keyAdded",F.path,F.value,m),m||R.emit("keyAddedRemotely",F.path,F.value)):"replace"===F.op?(R.emit("keyUpdated",F.path,F.value,m),m||R.emit("keyUpdatedRemotely",F.path,F.value)):"remove"===F.op&&(R.emit("keyRemoved",F.path,m),m||R.emit("keyRemovedRemotely",F.path))})}},{key:"get",value:function(E){return this.value}},{key:"set",value:function(E,y){return this._actualSet(E,y?function(){throw new Error("Revision mismatch")}:null)}},{key:"_actualSet",value:function(E,y){var m=this,R=void 0,F={data:E,revision:y?this.revision:void 0};return y&&(R=function(B){return l(m,void 0,void 0,r.default.mark(function J(){return r.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(412===B.status)return Q.next=3,this.softSync();Q.next=4;break;case 3:return Q.abrupt("return",{revision:this.revision,data:y(M.deepClone(this.value))});case 4:throw B;case 5:case"end":return Q.stop()}},J,this)}))}),this.actionQueue.add(this._set.bind(this),this.uri,F,R).then(function(B){return B.last_event_id>m.descriptor.last_event_id&&(m.descriptor.revision=B.revision,m.descriptor.data=B.data,m.descriptor.last_event_id=B.last_event_id,m.services.storage.update(m.type,m.sid,m.uniqueName,{last_event_id:B.last_event_id,revision:B.revision,data:B.data})),m.emit("updated",m.value,!0),m.value})}},{key:"mutate",value:function(E){return l(this,void 0,void 0,r.default.mark(function y(){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this._actualSet(E(M.deepClone(this.value)),E));case 1:case"end":return m.stop()}},y,this)}))}},{key:"update",value:function(E){return this.mutate(function(y){return(0,a.default)(y,E)})}},{key:"_set",value:function(E,y){return l(this,void 0,void 0,r.default.mark(function m(){var R;return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.services.network.post(this.uri,{data:y.data},y.revision);case 2:return F.abrupt("return",{revision:(R=F.sent).body.revision,data:y.data,last_event_id:R.body.last_event_id});case 4:case"end":return F.stop()}},m,this)}))}},{key:"softSync",value:function(){var E=this;return this.services.network.get(this.uri).then(function(y){return E._update({type:"document_updated",id:y.body.last_event_id,document_revision:y.body.revision,document_data:y.body.data}),E}).catch(function(y){404===y.status?E.onRemoved(!1):f.default.error("Can't get updates for "+E.sid+":",y)})}},{key:"onRemoved",value:function(E){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",E),E||this.emit("removedRemotely")}},{key:"removeDocument",value:function(){return l(this,void 0,void 0,r.default.mark(function E(){return r.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return y.stop()}},E,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"type",get:function(){return"document"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"value",get:function(){return this.descriptor.data}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"document"}}]),_}(w.SyncEntity);h.SyncDocument=b,h.default=b},{"./entity":252,"./logger":255,"./retryingqueue":259,"./utils":269,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,rfc6902:228}],265:[function(e,g,h){"use strict";var a=s(e("babel-runtime/core-js/object/get-prototype-of")),r=s(e("babel-runtime/helpers/classCallCheck")),p=s(e("babel-runtime/helpers/possibleConstructorReturn")),n=s(e("babel-runtime/helpers/inherits"));function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(h,"__esModule",{value:!0});var t=function(c){function u(o){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(0,r.default)(this,u);var w=(0,p.default)(this,(u.__proto__||(0,a.default)(u)).call(this));return w.name=w.constructor.name,w.message=o,w.status=l,w.code=f,w}return(0,n.default)(u,c),u}(Error);h.SyncError=t,h.default=t},{"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54}],266:[function(e,g,h){"use strict";var a=o(e("babel-runtime/helpers/extends")),r=o(e("babel-runtime/regenerator")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(E){return E&&E.__esModule?E:{default:E}}var l=function(E,y,m,R){return new(m||(m=u.default))(function(F,B){function J(N){try{U(R.next(N))}catch(D){B(D)}}function Q(N){try{U(R.throw(N))}catch(D){B(D)}}function U(N){N.done?F(N.value):new m(function(D){D(N.value)}).then(J,Q)}U((R=R.apply(E,y||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("./utils"),w=e("./logger"),k=e("./entity"),O=e("./retryingqueue"),M=e("./listitem"),b=e("./paginator"),A=e("./cache"),_=function(E){function y(m,R,F){(0,n.default)(this,y);var B=(0,t.default)(this,(y.__proto__||(0,p.default)(y)).call(this,m,F));return B.actionQueue=new O.RetryingQueue,B.cache=new A.Cache,B.descriptor=R,B}return(0,c.default)(y,E),(0,s.default)(y,[{key:"__set",value:function(m,R){return l(this,void 0,void 0,r.default.mark(function F(){var B;return r.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.services.network.post(m,{data:R.data},R.revision);case 2:return(B=J.sent).body.data=R.data,J.abrupt("return",B.body);case 5:case"end":return J.stop()}},F,this)}))}},{key:"push",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){var F,B,J;return r.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.services.network.post(this.links.items,{data:m});case 2:return F=Q.sent,B=Number(F.body.index),J=this.cache.store(B,new M.ListItem({index:B,revision:F.body.revision,lastEventId:F.body.last_event_id,uri:F.body.url,value:m}),F.body.last_event_id),this.emit("itemAdded",J,!0),Q.abrupt("return",J);case 7:case"end":return Q.stop()}},R,this)}))}},{key:"set",value:function(m,R){return this._actualSet(m,R)}},{key:"_actualSet",value:function(m,R,F){return l(this,void 0,void 0,r.default.mark(function B(){var J,Q,U,N=this;return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.get(m);case 2:if(J=D.sent,Q=void 0,F){D.next=10;break}return D.next=7,this.__set(J.uri,{data:R,revision:void 0});case 7:Q=D.sent,D.next=14;break;case 10:return U=function(ie){return l(N,void 0,void 0,r.default.mark(function Z(){var ue;return r.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(412===ie.status)return re.next=3,this._get(J.index);re.next=5;break;case 3:return re.abrupt("return",{revision:(ue=re.sent).revision,data:F(f.deepClone(ue.value))});case 5:throw ie;case 6:case"end":return re.stop()}},Z,this)}))},D.next=13,this.actionQueue.add(this.__set.bind(this),J.uri,{revision:J.revision,data:R},U);case 13:Q=D.sent;case 14:return(J=this.cache.get(J.index))&&Q.last_event_id>J.lastEventId&&(J.update(Q.last_event_id,Q.revision,Q.data),this.emit("itemUpdated",J,!0)),D.abrupt("return",J);case 17:case"end":return D.stop()}},B,this)}))}},{key:"mutate",value:function(m,R){return l(this,void 0,void 0,r.default.mark(function F(){return r.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.get(m);case 2:return J.abrupt("return",this._actualSet(m,R(f.deepClone(J.sent.value)),R));case 4:case"end":return J.stop()}},F,this)}))}},{key:"update",value:function(m,R){return l(this,void 0,void 0,r.default.mark(function F(){return r.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",this.mutate(m,function(J){return(0,a.default)(J,R)}));case 1:case"end":return B.stop()}},F,this)}))}},{key:"remove",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){var F;return r.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.get(m);case 2:return F=J.sent,J.next=5,this.services.network.delete(F.uri);case 5:this.cache.delete(m,J.sent.body.last_event_id),this.emit("itemRemoved",m,!0);case 8:case"end":return J.stop()}},R,this)}))}},{key:"get",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){var F;return r.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(F=this.cache.get(m))return B.abrupt("return",F);B.next=3;break;case 3:return B.abrupt("return",this._get(m));case 4:case"end":return B.stop()}},R,this)}))}},{key:"_get",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){var F;return r.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.queryItems({index:m});case 2:if((F=B.sent).items.length<1)throw new Error("No item with index "+m+" found");B.next=5;break;case 5:return B.abrupt("return",F.items[0]);case 6:case"end":return B.stop()}},R,this)}))}},{key:"queryItems",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){var F,B,J,Q,U=this;return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return m=m||{},F=new f.UriBuilder(this.links.items).queryParam("From",m.from).queryParam("PageSize",m.limit).queryParam("Index",m.index).queryParam("PageToken",m.pageToken).queryParam("Order",m.order).build(),N.next=4,this.services.network.get(F);case 4:return J=(B=N.sent).body.items.map(function(D){return U.cache.get(D.index)?U._handleItemUpdated(D.index,D.url,D.last_event_id,D.revision,D.data):U.cache.store(Number(D.index),new M.ListItem({index:Number(D.index),uri:D.url,revision:D.revision,lastEventId:D.last_event_id,value:D.data}),D.last_event_id),U.cache.get(D.index)}),N.abrupt("return",new b.Paginator(J,function(D){return U.queryItems({pageToken:D})},(Q=B.body.meta).previous_token,Q.next_token));case 8:case"end":return N.stop()}},R,this)}))}},{key:"getItems",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return(m=m||{}).limit=m.pageSize||m.limit||50,m.order=m.order||"asc",F.abrupt("return",this.queryItems(m));case 4:case"end":return F.stop()}},R,this)}))}},{key:"getContext",value:function(){return l(this,void 0,void 0,r.default.mark(function m(){var R;return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.context){F.next=5;break}return F.next=3,this.services.network.get(this.links.context);case 3:R=F.sent,(!this.context||R.body.last_event_id>this.lastEventId)&&(this.context=R.body.data);case 5:return F.abrupt("return",this.context);case 6:case"end":return F.stop()}},m,this)}))}},{key:"updateContext",value:function(m){return l(this,void 0,void 0,r.default.mark(function R(){return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,this.services.network.post(this.links.context,{data:m});case 3:return this.context=m,this.emit("contextUpdated",m,!0),F.abrupt("return",this);case 8:throw F.prev=8,F.t0=F.catch(0),w.default.error("Failed to update context",F.t0),F.t0;case 12:case"end":return F.stop()}},R,this,[[0,8]])}))}},{key:"removeList",value:function(){return l(this,void 0,void 0,r.default.mark(function m(){return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return R.stop()}},m,this)}))}},{key:"onRemoved",value:function(m){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("collectionRemoved",m),m||this.emit("collectionRemovedRemotely")}},{key:"shouldIgnoreEvent",value:function(m,R){return this.cache.isKnown(m,R)}},{key:"_update",value:function(m,R){var F=Number(m.item_index);switch(m.type){case"list_item_added":this._handleItemAdded(F,m.item_url,m.id,m.item_revision,m.item_data);break;case"list_item_updated":this._handleItemUpdated(F,m.item_url,m.id,m.item_revision,m.item_data);break;case"list_item_removed":this._handleItemRemoved(F,m.id,m.item_data);break;case"list_context_updated":this._handleContextUpdate(m.context_data,m.id);break;case"list_removed":this.onRemoved(!1)}R&&this._advanceLastEventId(m.id,m.list_revision)}},{key:"_advanceLastEventId",value:function(m,R){this.lastEventId<m&&(this.descriptor.last_event_id=m,R&&(this.descriptor.revision=R))}},{key:"_handleItemAdded",value:function(m,R,F,B,J){if(!this.cache.isKnown(m,F)){var Q=new M.ListItem({index:m,uri:R,lastEventId:F,revision:B,value:J});this.cache.store(m,Q,F),this.emit("itemAdded",Q,!1),this.emit("itemAddedRemotely",Q)}}},{key:"_handleItemUpdated",value:function(m,R,F,B,J){var Q=this.cache.get(m);Q||this.shouldIgnoreEvent(m,F)?Q&&F>Q.lastEventId&&(Q.update(F,B,J),this.emit("itemUpdated",Q,!1),this.emit("itemUpdatedRemotely",Q)):(Q=this.cache.store(m,new M.ListItem({index:m,uri:R,lastEventId:F,revision:B,value:J}),F),this.emit("itemUpdated",Q,!1),this.emit("itemUpdatedRemotely",Q))}},{key:"_handleItemRemoved",value:function(m,R,F){this.cache.delete(m,R),this.emit("itemRemoved",m,!1),this.emit("itemRemovedRemotely",m,F)}},{key:"_handleContextUpdate",value:function(m,R){this.lastEventId<R&&(this.context=m,this.emit("contextUpdated",m,!1),this.emit("contextUpdatedRemotely",m))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"type",get:function(){return"list"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"list"}}]),y}(k.SyncEntity);h.SyncList=_,h.default=_},{"./cache":247,"./entity":252,"./listitem":254,"./logger":255,"./paginator":258,"./retryingqueue":259,"./utils":269,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57}],267:[function(e,g,h){"use strict";var a=o(e("babel-runtime/helpers/extends")),r=o(e("babel-runtime/regenerator")),p=o(e("babel-runtime/core-js/object/get-prototype-of")),n=o(e("babel-runtime/helpers/classCallCheck")),s=o(e("babel-runtime/helpers/createClass")),t=o(e("babel-runtime/helpers/possibleConstructorReturn")),c=o(e("babel-runtime/helpers/inherits")),u=o(e("babel-runtime/core-js/promise"));function o(_){return _&&_.__esModule?_:{default:_}}var l=function(_,E,y,m){return new(y||(y=u.default))(function(R,F){function B(U){try{Q(m.next(U))}catch(N){F(N)}}function J(U){try{Q(m.throw(U))}catch(N){F(N)}}function Q(U){U.done?R(U.value):new y(function(N){N(U.value)}).then(B,J)}Q((m=m.apply(_,E||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var f=e("./utils"),w=e("./entity"),k=e("./retryingqueue"),O=e("./mapitem"),M=e("./paginator"),b=e("./cache"),A=function(_){function E(y,m,R){(0,n.default)(this,E);var F=(0,t.default)(this,(E.__proto__||(0,p.default)(E)).call(this,y,R));return F.actionQueue=new k.RetryingQueue,F.cache=new b.Cache,(F.descriptor=m).items&&m.items.forEach(function(B){F.cache.store(B.key,new O.MapItem(B),B.last_event_id)}),F}return(0,c.default)(E,_),(0,s.default)(E,[{key:"_get",value:function(y){return this.queryItems({key:y}).then(function(m){if(m.items.length<1)throw new Error("No item with key "+y+" found");return m.items[0]})}},{key:"__set",value:function(y,m){return this.services.network.post(y,{data:m.data},m.revision).then(function(R){return(R=R.body).data=m.data,R})}},{key:"_set",value:function(y,m,R){return l(this,void 0,void 0,r.default.mark(function F(){var B,J=this;return r.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(R){Q.next=2;break}return Q.abrupt("return",this.__set(y,{data:m.data}));case 2:return B=function(U){return l(J,void 0,void 0,r.default.mark(function N(){var D;return r.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(412===U.status)return ie.next=3,this._get(m.key);ie.next=5;break;case 3:return ie.abrupt("return",{revision:(D=ie.sent).revision,data:R(f.deepClone(D.value))});case 5:throw U;case 6:case"end":return ie.stop()}},N,this)}))},Q.abrupt("return",this.actionQueue.add(this.__set.bind(this),y,{revision:m.revision,data:m.data},B));case 4:case"end":return Q.stop()}},F,this)}))}},{key:"_tryAddOrUpdate",value:function(y,m,R){return l(this,void 0,void 0,r.default.mark(function F(){var B,J,U,N;return r.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this.services.network.post(y,m);case 3:return(B=ie.sent).body.data=m.data,ie.abrupt("return",{added:!0,value:B.body});case 8:if(ie.prev=8,ie.t0=ie.catch(0),409!==ie.t0.status)throw ie.t0;ie.next=12;break;case 12:if(J=ie.t0.body.links.item,R){ie.next=20;break}return ie.next=16,this._set(J,m,R);case 16:case 26:return ie.abrupt("return",{added:!1,value:ie.sent});case 20:return ie.next=22,this.services.network.get(J);case 22:return N=R(f.deepClone((U=ie.sent).body.data)),ie.next=26,this._set(J,{key:U.body.key,revision:U.body.revision,data:N},R);case 28:case"end":return ie.stop()}},F,this,[[0,8]])}))}},{key:"getContext",value:function(){return l(this,void 0,void 0,r.default.mark(function y(){var m;return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(this.context){R.next=5;break}return R.next=3,this.services.network.get(this.links.context);case 3:m=R.sent,(!this.context||m.body.last_event_id>this.lastEventId)&&(this.context=m.body.data);case 5:return R.abrupt("return",this.context);case 6:case"end":return R.stop()}},y,this)}))}},{key:"updateContext",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.services.network.post(this.links.context,{data:y});case 2:this.context=y,this.emit("contextUpdated",y,!0);case 4:case"end":return R.stop()}},m,this)}))}},{key:"set",value:function(y,m){return this._actualSet(y,m)}},{key:"_actualSet",value:function(y,m,R){return l(this,void 0,void 0,r.default.mark(function F(){var B,J,Q,U,N;return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(J=B=void 0,Q=this.cache.get(y))return U={key:y,data:m,revision:Q.revision||void 0},D.next=7,this._set(Q.uri,U,R);D.next=11;break;case 7:B=D.sent,J=!1,D.next=16;break;case 11:return D.next=13,this._tryAddOrUpdate(this.links.items,{key:y,data:m},R);case 13:B=(N=D.sent).value,J=N.added;case 16:return(Q=this.cache.get(y))&&B.last_event_id>Q.lastEventId?(Q.update(B.last_event_id,B.revision,B.data),this.emit("itemUpdated",Q,!0)):Q||(Q=this.cache.store(y,new O.MapItem(B),B.last_event_id),this.emit(J?"itemAdded":"itemUpdated",Q,!0)),D.abrupt("return",Q);case 19:case"end":return D.stop()}},F,this)}))}},{key:"get",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){var R;return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(this.cache.has(y))return F.abrupt("return",this.cache.get(y));F.next=2;break;case 2:return F.next=4,this.queryItems({key:y});case 4:if((R=F.sent).items.length<1)throw new Error("No item with key "+y+" found");F.next=7;break;case 7:return F.abrupt("return",R.items[0]);case 8:case"end":return F.stop()}},m,this)}))}},{key:"mutate",value:function(y,m){return l(this,void 0,void 0,r.default.mark(function R(){return r.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.get(y).then(function(J){return J.value}).catch(function(){return{}});case 2:return B.abrupt("return",this._actualSet(y,m(f.deepClone(B.sent)),m));case 4:case"end":return B.stop()}},R,this)}))}},{key:"update",value:function(y,m){return l(this,void 0,void 0,r.default.mark(function R(){return r.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",this.mutate(y,function(B){return(0,a.default)(B,m)}));case 1:case"end":return F.stop()}},R,this)}))}},{key:"remove",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){var R;return r.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(void 0===y)throw new Error("Key argument is invalid");B.next=2;break;case 2:return B.next=4,this.get(y);case 4:return R=B.sent,B.next=7,this.services.network.delete(R.uri);case 7:this.cache.delete(y,B.sent.body.last_event_id),this.emit("itemRemoved",y,!0);case 10:case"end":return B.stop()}},m,this)}))}},{key:"queryItems",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){var R,F,B,J,Q=this;return r.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return y=y||{},R=new f.UriBuilder(this.links.items).queryParam("From",y.from).queryParam("PageSize",y.limit).queryParam("Key",y.key).queryParam("PageToken",y.pageToken).queryParam("Order",y.order).build(),U.next=4,this.services.network.get(R);case 4:return B=(F=U.sent).body.items.map(function(N){return Q.cache.get(N.key)?Q._handleItemUpdated(N.key,N.url,N.last_event_id,N.revision,N.data):Q.cache.store(N.key,new O.MapItem(N),N.last_event_id),Q.cache.get(N.key)}),U.abrupt("return",new M.Paginator(B,function(N){return Q.queryItems({pageToken:N})},(J=F.body.meta).previous_token,J.next_token));case 8:case"end":return U.stop()}},m,this)}))}},{key:"getItems",value:function(y){return l(this,void 0,void 0,r.default.mark(function m(){return r.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(y=y||{}).limit=y.pageSize||y.limit||50,y.order=y.order||"asc",R.abrupt("return",this.queryItems(y));case 4:case"end":return R.stop()}},m,this)}))}},{key:"forEach",value:function(y){var m=this;return new u.default(function(R,F){m.queryItems().then(function B(J){J.items.forEach(function(Q){return y(Q)}),J.hasNextPage?J.nextPage().then(B).catch(F):R()}).catch(F)})}},{key:"shouldIgnoreEvent",value:function(y,m){return this.cache.isKnown(y,m)}},{key:"_update",value:function(y,m){switch(y.type){case"map_item_added":this._handleItemAdded(y.item_key,y.item_url,y.id,y.item_revision,y.item_data);break;case"map_item_updated":this._handleItemUpdated(y.item_key,y.item_url,y.id,y.item_revision,y.item_data);break;case"map_item_removed":this._handleItemRemoved(y.item_key,y.id,y.item_data);break;case"map_context_updated":this._handleContextUpdate(y.context_data,y.id);break;case"map_removed":this.onRemoved(!1)}m&&this._advanceLastEventId(y.id,y.map_revision)}},{key:"_advanceLastEventId",value:function(y,m){this.lastEventId<y&&(this.descriptor.last_event_id=y,m&&(this.descriptor.revision=m))}},{key:"_handleItemAdded",value:function(y,m,R,F,B){if(!this.cache.has(y)&&!this.shouldIgnoreEvent(y,R)){var J=new O.MapItem({key:y,url:m,last_event_id:R,revision:F,data:B});this.cache.store(y,J,R),this.emit("itemAdded",J,!1),this.emit("itemAddedRemotely",J)}}},{key:"_handleItemUpdated",value:function(y,m,R,F,B){var J=this.cache.get(y);J||this.shouldIgnoreEvent(y,R)?J&&R>J.lastEventId&&(J.update(R,F,B),this.emit("itemUpdated",J,!1),this.emit("itemUpdatedRemotely",J)):(J=new O.MapItem({key:y,url:m,last_event_id:R,revision:F,data:B}),this.cache.store(y,J,R),this.emit("itemUpdated",J,!1),this.emit("itemUpdatedRemotely",J))}},{key:"_handleItemRemoved",value:function(y,m,R){this.cache.delete(y,m),this.emit("itemRemoved",y,!1),this.emit("itemRemovedRemotely",y,R)}},{key:"_handleContextUpdate",value:function(y,m){this.lastEventId<m&&(this.context=y,this.emit("contextUpdated",y,!1),this.emit("contextUpdatedRemotely",y))}},{key:"onRemoved",value:function(y){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("collectionRemoved",y),y||this.emit("collectionRemovedRemotely")}},{key:"removeMap",value:function(){return l(this,void 0,void 0,r.default.mark(function y(){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return m.stop()}},y,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"type",get:function(){return"map"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"map"}}]),E}(w.SyncEntity);h.SyncMap=A,h.default=A},{"./cache":247,"./entity":252,"./mapitem":256,"./paginator":258,"./retryingqueue":259,"./utils":269,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/extends":52,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57}],268:[function(e,g,h){"use strict";var a=u(e("babel-runtime/regenerator")),r=u(e("babel-runtime/core-js/object/get-prototype-of")),p=u(e("babel-runtime/helpers/classCallCheck")),n=u(e("babel-runtime/helpers/createClass")),s=u(e("babel-runtime/helpers/possibleConstructorReturn")),t=u(e("babel-runtime/helpers/inherits")),c=u(e("babel-runtime/core-js/promise"));function u(f){return f&&f.__esModule?f:{default:f}}var o=function(f,w,k,O){return new(k||(k=c.default))(function(M,b){function A(y){try{E(O.next(y))}catch(m){b(m)}}function _(y){try{E(O.throw(y))}catch(m){b(m)}}function E(y){y.done?M(y.value):new k(function(m){m(y.value)}).then(A,_)}E((O=O.apply(f,w||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var l=function(f){function w(k,O,M){(0,p.default)(this,w);var b=(0,s.default)(this,(w.__proto__||(0,r.default)(w)).call(this,k,M));return b.descriptor=O,b}return(0,t.default)(w,f),(0,n.default)(w,[{key:"publishMessage",value:function(k){return o(this,void 0,void 0,a.default.mark(function O(){var M,_;return a.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return M={data:k},E.next=3,this.services.network.post(this.links.messages,M);case 3:return _=this._handleMessagePublished(E.sent.body.sid,k,!1),E.abrupt("return",_);case 7:case"end":return E.stop()}},O,this)}))}},{key:"removeTopic",value:function(){return o(this,void 0,void 0,a.default.mark(function k(){return a.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return O.stop()}},k,this)}))}},{key:"_update",value:function(k){switch(k.type){case"topic_message_published":this._handleMessagePublished(k.message_sid,k.message_data,!0);break;case"topic_removed":this.onRemoved(!1)}}},{key:"_handleMessagePublished",value:function(k,O,M){var b={sid:k,value:O,remote:M};return this.emit("messagePublished",b),M&&this.emit("messagePublishedRemotely",b),b}},{key:"onRemoved",value:function(k){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("topicRemoved",k),k||this.emit("topicRemovedRemotely")}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"type",get:function(){return"topic"}},{key:"lastEventId",get:function(){return null}}],[{key:"type",get:function(){return"topic"}}]),w}(e("../entity").SyncEntity);h.SyncTopic=l,h.default=l},{"../entity":252,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57}],269:[function(e,g,h){"use strict";var a=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/createClass")),p=n(e("babel-runtime/core-js/json/stringify"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0}),h.deepClone=function(t){return JSON.parse((0,p.default)(t))};var s=function(){function t(c){(0,a.default)(this,t),this.base=c,this.args=new Array,this.paths=new Array}return(0,r.default)(t,[{key:"pathSegment",value:function(c){return this.paths.push(encodeURIComponent(c)),this}},{key:"queryParam",value:function(c,u){return void 0!==u&&this.args.push(encodeURIComponent(c)+"="+encodeURIComponent(u)),this}},{key:"build",value:function(){var c=this.base;return this.paths.length&&(c+="/"+this.paths.join("/")),this.args.length&&(c+="?"+this.args.join("&")),c}}]),t}();h.UriBuilder=s},{"babel-runtime/core-js/json/stringify":34,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],270:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/promise")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function t(){var c=this;(0,r.default)(this,t),this._promise=new a.default(function(u,o){c._resolve=u,c._reject=o})}return(0,p.default)(t,[{key:"update",value:function(c){this._resolve(c)}},{key:"set",value:function(c){this.current=c,this._resolve(c)}},{key:"fail",value:function(c){this._reject(c)}},{key:"promise",get:function(){return this._promise}}]),t}();h.Deferred=s},{"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],271:[function(e,g,h){g.exports={_args:[[{raw:"twilio-sync@^0.5.10",scope:null,escapedName:"twilio-sync",name:"twilio-sync",rawSpec:"^0.5.10",spec:">=0.5.10 <0.6.0",type:"range"},"/var/lib/jenkins/jobs/twilio-chat.js/workspace"]],_from:"twilio-sync@>=0.5.10 <0.6.0",_id:"twilio-sync@0.5.10",_inCache:!0,_location:"/twilio-sync",_nodeVersion:"7.7.1",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/twilio-sync-0.5.10.tgz_1503303914949_0.8794955047778785"},_npmUser:{name:"twilio-ci",email:"mroberts+twilio-ci@twilio.com"},_npmVersion:"4.1.2",_phantomChildren:{},_requested:{raw:"twilio-sync@^0.5.10",scope:null,escapedName:"twilio-sync",name:"twilio-sync",rawSpec:"^0.5.10",spec:">=0.5.10 <0.6.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.10.tgz",_shasum:"38fcfbd31fe72b48ac0fe29b37baf8c215d0bc76",_shrinkwrap:null,_spec:"twilio-sync@^0.5.10",_where:"/var/lib/jenkins/jobs/twilio-chat.js/workspace",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{"babel-runtime":"^6.23.0",karibu:"^1.0.1",loglevel:"^1.4.1","operation-retrier":"^1.1.2",platform:"^1.3.3",rfc6902:"^1.3.0","twilio-ems-client":"^0.2.0","twilio-notifications":"^0.4.0","twilio-transport":"^0.1.2",twilsock:"^0.3.0",uuid:"^3.0.1",xxhashjs:"^0.2.1"},description:"Twilio Sync client library",devDependencies:{"@types/chai":"^3.4.35","@types/chai-as-promised":"0.0.29","@types/loglevel":"^1.4.29","@types/mocha":"^2.2.39","@types/node":"^7.0.5","@types/sinon":"^2.3.3","@types/sinon-chai":"^2.7.27","async-test-tools":"^1.0.6","babel-cli":"^6.23.0","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-array-includes":"^2.0.3","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.22.0",babelify:"^7.3.0",backoff:"^2.5.0",browserify:"^14.1.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",cheerio:"^0.22.0",del:"^2.2.2",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-exit":"0.0.2","gulp-insert":"^0.5.0","gulp-istanbul":"^1.1.1","gulp-mocha":"^4.0.1","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-tap":"^0.1.3","gulp-tslint":"^7.1.0","gulp-typescript":"^3.1.5","gulp-uglify":"^2.0.1","gulp-util":"^3.0.8","ink-docstrap":"^1.3.0",isparta:"^4.0.0",jsdoc:"^3.4.3",jsonwebtoken:"^7.3.0",karma:"^1.5.0","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","run-sequence":"^1.2.2",sinon:"^2.3.3","sinon-chai":"^2.8.0","ts-node":"^3.0.0",tslint:"^4.5.1",twilio:"^3.3.0-edge",typescript:"2.2.1",underscore:"^1.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},directories:{},dist:{shasum:"38fcfbd31fe72b48ac0fe29b37baf8c215d0bc76",tarball:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.10.tgz"},engines:{node:">=6"},gitHead:"cfefba94f7be630b924854ff63a9766218b2bdcd",license:"MIT",main:"lib/index.js",maintainers:[{name:"schertkov",email:"schertkov@twilio.com"},{name:"twilio-ci",email:"mroberts+twilio-ci@twilio.com"}],name:"twilio-sync",optionalDependencies:{},readme:"ERROR: No README data found!",scripts:{prepublish:"gulp build",test:"gulp unit-test"},version:"0.5.10"}},{}],272:[function(e,g,h){"use strict";var a=n(e("babel-runtime/core-js/json/stringify")),r=n(e("babel-runtime/core-js/promise")),p=n(e("babel-runtime/core-js/object/define-property"));function n(u){return u&&u.__esModule?u:{default:u}}Object.defineProperty(h,"__esModule",{value:!0});var s=function(){function u(o,l){for(var f=0;f<l.length;f++){var w=l[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),(0,p.default)(o,w.key,w)}}return function(o,l,f){return l&&u(o.prototype,l),f&&u(o,f),o}}(),t=typeof XMLHttpRequest>"u"?e("xmlhttprequest").XMLHttpRequest:XMLHttpRequest,c=function(){function u(){!function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}(this,u)}return s(u,null,[{key:"request",value:function(o,l){return new r.default(function(f,w){var k=new t;for(var O in k.open(o,l.url,!0),k.onreadystatechange=function(){if(4===k.readyState){var M,b=(M=k.getAllResponseHeaders())?M.split("\r\n").map(function(_){return _.split(": ")}).filter(function(_){return 2===_.length&&0<_[1].length}).reduce(function(_,E){return _[E[0]]=E[1],_},{}):{},A=function(_){var E=_.getResponseHeader("Content-Type");if(!E||0!==E.indexOf("application/json")||0===_.responseText.length)return _.responseText;try{return JSON.parse(_.responseText)}catch{return _.responseText}}(k);200<=k.status&&k.status<300?f({status:k.status,headers:b,body:A}):w({status:k.status,description:k.statusText,headers:b,body:A})}},l.headers)k.setRequestHeader(O,l.headers[O]),"Content-Type"===O&&"application/json"===l.headers[O]&&(l.body=(0,a.default)(l.body));k.send(l.body)})}},{key:"get",value:function(o){return this.request("GET",o)}},{key:"post",value:function(o){return this.request("POST",o)}},{key:"put",value:function(o){return this.request("PUT",o)}},{key:"delete",value:function(o){return this.request("DELETE",o)}}]),u}();h.default=c,g.exports=c,g.exports=h.default},{"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/object/define-property":40,"babel-runtime/core-js/promise":45,xmlhttprequest:70}],273:[function(e,g,h){"use strict";var a=w(e("babel-runtime/core-js/promise")),r=w(e("babel-runtime/core-js/map")),p=w(e("babel-runtime/core-js/object/define-properties")),n=w(e("babel-runtime/core-js/object/keys")),s=w(e("babel-runtime/core-js/object/get-prototype-of")),t=w(e("babel-runtime/core-js/array/from")),c=w(e("babel-runtime/core-js/reflect/construct")),u=w(e("babel-runtime/core-js/object/set-prototype-of")),o=w(e("babel-runtime/core-js/object/create")),l=w(e("babel-runtime/helpers/typeof")),f=w(e("babel-runtime/core-js/object/define-property"));function w(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(h,"__esModule",{value:!0}),h.TwilsockUnavailableError=h.Transport=void 0;var k,O=function(){function U(N,D){for(var ie=0;ie<D.length;ie++){var Z=D[ie];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),(0,f.default)(N,Z.key,Z)}}return function(N,D,ie){return D&&U(N.prototype,D),ie&&U(N,ie),N}}(),b=(k=e("./httprequest"))&&k.__esModule?k:{default:k};function A(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function E(U,N){var D=function(Z){var ue=Z.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(ue){var re={protocol:ue[1],host:ue[2],hostname:ue[3],port:ue[4],pathname:ue[5],search:ue[6],hash:ue[7]};if(0<re.search.length){var te=re.search.substring(1);re.params=te.split("&").map(function(ye){return ye.split("=")}).reduce(function(ye,Se){return ye.hasOwnProperty(Se[0])?Array.isArray(ye[Se[0]])?ye[Se[0]].push(Se[1]):ye[Se[0]]=[ye[Se[0]],Se[1]]:ye[Se[0]]=Se[1],ye},{})}return re}throw new Error("Incorrect URI: "+Z)}(N),ie={method:U,host:D.host,path:D.pathname};return D.params&&(ie.params=D.params),ie}function y(U,N,D,ie){return{to:E(U,N),headers:D,body:ie}}function m(U){return{status:U.header.http_status,headers:U.header.http_headers,body:U.body}}function R(U,N,D){return{url:U,headers:N,body:D}}function F(U){try{U.body=JSON.parse(U.body)}catch{}return U}function B(U){for(var N=(0,n.default)(U.headers),D=N.length,ie={};D--;){var Z=N[D];ie[Z.toLowerCase()]=U.headers[Z]}return U.headers=ie,U}var J=function(U){function N(){return A(this,N),function(D,ie){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ie||"object"!==(void 0===ie?"undefined":(0,l.default)(ie))&&"function"!=typeof ie?D:ie}(this,(N.__proto__||(0,s.default)(N)).call(this))}return function(D,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Super expression must either be null or a function, not "+(void 0===ie?"undefined":(0,l.default)(ie)));D.prototype=(0,o.default)(ie&&ie.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),ie&&(u.default?(0,u.default)(D,ie):D.__proto__=ie)}(N,function _(U){function N(){var D=(0,c.default)(U,(0,t.default)(arguments));return(0,u.default)(D,(0,s.default)(this)),D}return N.prototype=(0,o.default)(U.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),u.default?(0,u.default)(N,U):N.__proto__=U,N}(Error)),N}(),Q=function(){function U(N){var D=this,ie=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};A(this,U),(0,p.default)(this,{_activeGetRequests:{value:new r.default},_twilsock:{value:N},_http:{value:b.default},_twilsockIsAvailable:{get:function(){return D._twilsock&&D._twilsock.isConnected}},_concurrentHttpRequestLimit:{value:ie.concurrentHttpRequestLimit||1/0},_concurrentHttpRequestCount:{value:0,writable:!0},_requestQueue:{value:[]}}),N&&(N.connect(),N.on("connected",function(){return D._processQueuedRequests()}))}return O(U,[{key:"get",value:function(N,D,ie){var Z=this;if(this._activeGetRequests.has(N))return this._activeGetRequests.get(N);var ue=this._get(N,D,ie).then(function(re){return Z._activeGetRequests.delete(N),re}).catch(function(re){throw Z._activeGetRequests.delete(N),re});return this._activeGetRequests.set(N,ue),ue}},{key:"_oneOfBasedOnChannelAvailability",value:function(N,D){var ie,Z,ue,re=this;return(ie=N,Z=ie.sendViaTwilsock,ue=ie.sendDirectHttp,re._twilsockIsAvailable?Z():D?a.default.reject(new J):re._concurrentHttpRequestCount>=re._concurrentHttpRequestLimit?new a.default(function(te,ye){return re._requestQueue.push({sendingOptions:N,resolve:te,reject:ye})}):(re._concurrentHttpRequestCount++,ue().then(function(te){return re._concurrentHttpRequestCount--,re._processQueuedRequests(),te}).catch(function(te){throw re._concurrentHttpRequestCount--,re._processQueuedRequests(),te}))).then(B)}},{key:"_processQueuedRequests",value:function(){for(;0<this._requestQueue.length&&(this._twilsockIsAvailable||this._concurrentHttpRequestCount<this._concurrentHttpRequestLimit);){var N=this._requestQueue.shift();this._oneOfBasedOnChannelAvailability(N.sendingOptions,!1).then(N.resolve).catch(N.reject)}}},{key:"_get",value:function(N,D,ie){var Z=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return Z._twilsock.send(y("GET",N,D)).then(m)},sendDirectHttp:function(){return Z._http.get(R(N,D)).then(F)}},ie)}},{key:"post",value:function(N,D,ie,Z){var ue=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return ue._twilsock.send(y("POST",N,D,ie)).then(m)},sendDirectHttp:function(){return ue._http.post(R(N,D,ie)).then(F)}},Z)}},{key:"put",value:function(N,D,ie,Z){var ue=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return ue._twilsock.send(y("PUT",N,D,ie)).then(m)},sendDirectHttp:function(){return ue._http.put(R(N,D,ie)).then(F)}},Z)}},{key:"delete",value:function(N,D,ie){var Z=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return Z._twilsock.send(y("DELETE",N,D)).then(m)},sendDirectHttp:function(){return Z._http.delete(R(N,D)).then(F)}},ie)}}]),U}();h.default=Q,h.Transport=Q,h.TwilsockUnavailableError=J},{"./httprequest":272,"babel-runtime/core-js/array/from":31,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/create":38,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/define-property":40,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/object/keys":43,"babel-runtime/core-js/object/set-prototype-of":44,"babel-runtime/core-js/promise":45,"babel-runtime/core-js/reflect/construct":46,"babel-runtime/helpers/typeof":56}],274:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=A(e("babel-runtime/core-js/object/freeze")),r=A(e("babel-runtime/core-js/set")),p=A(e("babel-runtime/core-js/promise")),n=A(e("babel-runtime/core-js/map")),s=A(e("babel-runtime/core-js/object/define-properties")),t=A(e("babel-runtime/core-js/object/get-prototype-of")),c=A(e("babel-runtime/helpers/classCallCheck")),u=A(e("babel-runtime/helpers/createClass")),o=A(e("babel-runtime/helpers/possibleConstructorReturn")),l=A(e("babel-runtime/helpers/inherits")),f=A(e("events")),w=A(e("./logger")),k=A(e("uuid")),O=A(e("./configuration")),M=A(e("./twilsock")),b=A(e("./packetinterface"));function A(E){return E&&E.__esModule?E:{default:E}}var _=function(E){function y(m,R){(0,c.default)(this,y);var F=(0,o.default)(this,(y.__proto__||(0,t.default)(y)).call(this));(R=R||{}).logLevel=R.logLevel||"error",w.default.setLevel(R.logLevel);var B=new O.default(m,R),J=new M.default(B),Q=new b.default(J);return(0,s.default)(F,{_config:{value:B},_socket:{value:J},_packet:{value:Q},_registrations:{value:new n.default},_registrationsInProgress:{value:new n.default},isConnected:{get:function(){return F._socket.isConnected}},connected:{get:function(){return F._socket.isConnected}},state:{get:function(){return F._socket.state}}}),F._socket.on("message",function(U,N){return setTimeout(function(){F.emit("message",U,N)},0)}),F._socket.on("connected",function(){return F._updateRegistrations()}),F._socket.on("connected",function(){return F.emit("connected")}),F._socket.on("disconnected",function(){return F.emit("disconnected")}),F._socket.on("stateChanged",function(U){return F.emit("stateChanged",U)}),F}return(0,l.default)(y,E),(0,u.default)(y,[{key:"send",value:function(m){return this._packet.send(m.to,m.headers,m.body)}},{key:"updateToken",value:function(m){return w.default.info("updateToken"),this._config.token===m||(this._config.updateToken(m),this._socket.updateToken()),p.default.resolve()}},{key:"_updateRegistration",value:function(m,R){var F=this;w.default.info("update registration for context",m);var B=this._registrationsInProgress.get(m);B||(B=new r.default,this._registrationsInProgress.set(m,B));var J=k.default.v4();return B.add(J),this._packet.putNotificationContext(m,R).then(function(){w.default.info("registration attempt succeeded for context",R),B.delete(J),0===(void 0!==B.size?B.size:(B._c||{}).size)&&(F._registrationsInProgress.delete(m),F.emit("registered",m))}).catch(function(Q){w.default.info("registration attempt failed for context",R),w.default.debug(Q),B.delete(J),0===(void 0!==B.size?B.size:(B._c||{}).size)&&(F._registrationsInProgress.delete(m),F.emit("registrationFailed",m,Q))})}},{key:"_updateRegistrations",value:function(){var m=this;w.default.info("refreshing all registrations"),this._registrations.forEach(function(R,F){m._updateRegistration(F,R)})}},{key:"setNotificationsContext",value:function(m,R){if(!m||!R)throw new Error("Invalid arguments provided");this._registrations.set(m,R),this._socket.isConnected&&this._updateRegistration(m,R)}},{key:"removeNotificationsContext",value:function(m){this._registrations.has(m)&&(this._registrations.delete(m),this._socket.isConnected&&this._packet.deleteNotificationContext(m))}},{key:"connect",value:function(){return this._socket.connect()}},{key:"disconnect",value:function(){return this._socket.disconnect()}}]),y}(f.default);h.default=_,(0,a.default)(_),g.exports=h.default},{"./configuration":275,"./logger":277,"./packetinterface":278,"./twilsock":279,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/core-js/set":47,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,events:214,uuid:283}],275:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=n(e("babel-runtime/core-js/object/define-properties")),r=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(c,u){var o=this;(0,r.default)(this,t);var l=((u=u||{}).Twilsock||{}).uri||u.wsServer||"wss://tsock.twilio.com";(0,a.default)(this,{_twilsockWsHost:{value:l+"/v3/wsconnect"},_token:{value:c,writable:!0},twilsockUri:{get:function(){return o._twilsockWsHost}},token:{get:function(){return o._token}}})}return(0,p.default)(t,[{key:"updateToken",value:function(c){this._token=c}}]),t}();h.default=s,g.exports=h.default},{"babel-runtime/core-js/object/define-properties":39,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],276:[function(e,g,h){arguments[4][242][0].apply(h,arguments)},{"./client":274,dup:242}],277:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=p(e("babel-runtime/core-js/array/from")),r=p(e("loglevel"));function p(s){return s&&s.__esModule?s:{default:s}}function n(s,t){return[s].concat((0,a.default)(t))}h.default={setLevel:function(s){r.default.setLevel(s)},trace:function(){r.default.trace.apply(null,n("Twilsock T:",arguments))},debug:function(){r.default.debug.apply(null,n("Twilsock D:",arguments))},info:function(){r.default.info.apply(null,n("Twilsock I:",arguments))},warn:function(){r.default.warn.apply(null,n("Twilsock W:",arguments))},error:function(){r.default.error.apply(null,n("Twilsock E:",arguments))}},g.exports=h.default},{"babel-runtime/core-js/array/from":31,loglevel:219}],278:[function(e,g,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var a=c(e("babel-runtime/core-js/promise")),r=c(e("babel-runtime/core-js/map")),p=c(e("babel-runtime/core-js/object/define-properties")),n=c(e("babel-runtime/helpers/classCallCheck")),s=c(e("babel-runtime/helpers/createClass")),t=c(e("./logger"));function c(l){return l&&l.__esModule?l:{default:l}}function u(l){return 200<=l&&l<300}var o=function(){function l(f){var w=this;(0,n.default)(this,l),(0,p.default)(this,{_activeRequests:{value:new r.default},_socket:{value:f}}),this._socket.on("reply",this._processReply.bind(this)),this._socket.on("disconnected",function(){w._activeRequests.forEach(function(k){clearTimeout(k.timeout),k.reject(new Error("Twilsock disconnected"))}),w._activeRequests.clear()})}return(0,s.default)(l,[{key:"_processReply",value:function(f){var w=this._activeRequests.get(f.id);w&&(clearTimeout(w.timeout),this._activeRequests.delete(f.id),setTimeout(function(){var k;u(f.status.code)?(k=f)&&k.header&&k.header.http_status&&!u(f.header.http_status.code)?w.reject({status:f.header.http_status.code,description:f.header.http_status.status,body:f.body}):w.resolve(f):w.reject(new Error("Transport failure: "+f.status.status))},0))}},{key:"_storeRequest",value:function(f,w,k){var O={resolve:w,reject:k,timeout:setTimeout(function(){t.default.debug("request",f,"is timed out"),k(new Error("Twilsock: request timeout: "+f))},3e4)};this._activeRequests.set(f,O)}},{key:"send",value:function(f,w,k){var O=this;return new a.default(function(M,b){O._socket.isConnected||(t.default.info("Can not send upstream message. Twilsock is not in connected state"),b(new Error("Twilsock is not connected")));var A=O._socket.sendUpstreamMessage(f,w,k);t.default.trace("message sent: ",{id:A,address:f,headers:w,body:k}),O._storeRequest(A,M,b)})}},{key:"putNotificationContext",value:function(f,w){var k=this;return new a.default(function(O,M){k._socket.isConnected||(t.default.info("Can not send put notification context. Twilsock is not in connected state"),M(new Error("Twilsock is not connected")));var A=k._socket.send({method:"put_notification_ctx",notification_ctx_id:f},w);k._storeRequest(A,O,M)})}},{key:"deleteNotificationContext",value:function(f){var w=this;return new a.default(function(k,O){w._socket.isConnected||(t.default.info("Can not send delete notification context. Twilsock is not in connected state"),O(new Error("Twilsock is not connected")));var b=w._socket.send({method:"delete_notification_ctx",notification_ctx_id:f});w._storeRequest(b,k,O)})}},{key:"shutdown",value:function(){this._activeRequests.forEach(function(f){clearTimeout(f.timeout),f.reject(new Error("Twilsock: request cancelled by user"))}),this._activeRequests.clear()}}]),l}();h.default=o,g.exports=h.default},{"./logger":277,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],279:[function(e,g,h){(function(a){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var r=y(e("babel-runtime/core-js/object/freeze")),p=y(e("babel-runtime/core-js/promise")),n=y(e("babel-runtime/helpers/slicedToArray")),s=y(e("babel-runtime/core-js/get-iterator")),t=y(e("babel-runtime/core-js/map")),c=y(e("babel-runtime/core-js/object/define-properties")),u=y(e("babel-runtime/core-js/object/get-prototype-of")),o=y(e("babel-runtime/helpers/classCallCheck")),l=y(e("babel-runtime/helpers/createClass")),f=y(e("babel-runtime/helpers/possibleConstructorReturn")),w=y(e("babel-runtime/helpers/inherits")),k=y(e("babel-runtime/core-js/json/stringify")),O=y(e("babel-runtime/helpers/typeof")),M=y(e("events")),b=y(e("./logger")),A=y(e("uuid")),_=y(e("backoff")),E=y(e("javascript-state-machine"));function y(Q){return Q&&Q.__esModule?Q:{default:Q}}var m=a.WebSocket||a.MozWebSocket||e("ws");function R(Q){return encodeURIComponent(Q).replace(/%([0-9A-F]{2})/g,function(U,N){return String.fromCharCode("0x"+N)}).length}function F(Q){var U=Array.prototype.map.call(Q,function(N){return String.fromCharCode(N)}).join("").replace(/(.)/g,function(N,D){var ie=D.charCodeAt(0).toString(16).toUpperCase();return ie.length<2&&(ie="0"+ie),"%"+ie});return decodeURIComponent(U)}function B(Q){var U=F(Q);try{return JSON.parse(U)}catch(N){throw b.default.error("failed to parse input: ",U),N}}var J=function(Q){function U(N){(0,o.default)(this,U);var D=(0,f.default)(this,(U.__proto__||(0,u.default)(U)).call(this));N.logLevel&&b.default.setLevel(N.logLevel);var ie=_.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return ie.on("ready",function(){D._retry()}),D.on("reply",function(Z){D._processReply(Z)}),(0,c.default)(D,{_config:{value:N},_transportReady:{value:!1,writable:!0},_disconnectedPromiseResolve:{value:null,writable:!0},_backoffDefault:{value:ie},_backoff:{value:ie,writable:!0},_fsm:{value:null,writable:!0},_watchTimer:{value:null,writable:!0},_timestamp:{value:0,writable:!0},_socket:{value:null,writable:!0},_activeToken:{value:null,writable:!0},activeToken:{enumerable:!0,get:function(){return D._activeToken}},state:{enumberable:!0,get:function(){return D._getState()}},isConnected:{enumberable:!0,get:function(){return D._isConnected()}},_activeRequests:{value:new t.default},_disconnectingTimer:{value:null,writable:!0},_isDeferredUpdate:{value:!1,writable:!0}}),D._fsm=E.default.create({initial:"disconnected",events:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"}],callbacks:{onconnecting:function(){D._startWatchdogTimer(),D._setupSocket(),D.emit("connecting")},onenterinitialising:function(){D._sendInit()},onleaveinitialising:function(){D._cancelInit()},onenterupdating:function(){D._sendUpdate()},onleaveupdating:function(){D._cancelUpdate()},onenterretrying:function(){D._initRetry(),D.emit("connecting")},onenterconnected:function(){D._resetBackoff(),D._onConnected()},onuserUpdateToken:function(){D._resetBackoff()},ontokenRejected:function(){D._resetBackoff(),D._closeSocket(),D._finalizeSocket()},onuserDisconnect:function(){D._closeSocket()},onenterdisconnecting:function(){D._startDisconnectTimer()},onleavedisconnecting:function(){D._cancelDisconnectTimer()},onenterwaitSocketClosed:function(){D._startDisconnectTimer()},onleavewaitSocketClosed:function(){D._cancelDisconnectTimer()},onenterwaitOffloadSocketClosed:function(){D._startDisconnectTimer()},onleavewaitOffloadSocketClosed:function(){D._cancelDisconnectTimer()},ondisconnected:function(){D._resetBackoff(),D._finalizeSocket()},onreceiveClose:function(Z,ue,re,te){b.default.debug("onreceiveClose: ",te),D._onCloseReceived(te)},onreceiveOffload:function(Z,ue,re,te){b.default.debug("onreceiveoffload: ",te),D._modifyBackoff(te.body),D._onCloseReceived(te.status)},onunsupported:function(){D._closeSocket(),D._finalizeSocket()},onerror:function(){D._closeSocket(),D._finalizeSocket()},onenterstate:function(Z,ue,re){D._changeState(Z,ue,re)}},error:function(){b.default.warn("FSM: unexpected transition",arguments)}}),D}return(0,w.default)(U,Q),(0,l.default)(U,[{key:"_changeState",value:function(N,D,ie){var Z=this;b.default.debug("FSM: ",N,": ",D,">>",ie),this.emit("stateChanged",this.state),this._isDeferredUpdate&&(this._isDeferredUpdate=!1,setTimeout(function(){Z.updateToken()},0))}},{key:"_resetBackoff",value:function(){b.default.trace("_resetBackoff"),this._backoff=this._backoffDefault,this._backoff.reset()}},{key:"_modifyBackoff",value:function(N){b.default.trace("_modifyBackoff",N);var D=N?N.backoff_policy:null;if(D){var ie=D.reconnect_min_ms||2e3,Z=D.reconnect_max_ms||12e4;b.default.debug("new backoff policy",ie,Z),this._backoff=_.default.exponential({randomisationFactor:.2,initialDelay:ie,maxDelay:Z})}}},{key:"_startDisconnectTimer",value:function(){var N=this;b.default.trace("_startDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null),this._disconnectingTimer=setTimeout(function(){b.default.debug("disconnecting is timed out"),N._closeSocket()},3e3)}},{key:"_cancelDisconnectTimer",value:function(){b.default.trace("_cancelDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null)}},{key:"_processReply",value:function(N){b.default.debug("receive reply:",N);var D=this._activeRequests.get(N.id);if(D)switch(clearTimeout(D.timeout),this._activeRequests.delete(N.id),D.reqType){case"init":200<=N.status.code&&N.status.code<300?this._fsm.initSuccess(N.body):401===N.status.code||403===N.status.code?this._fsm.tokenRejected(N.status):(429===N.status.code&&this._modifyBackoff(N.body),this._fsm.initError(N.status));break;case"update":200<=N.status.code&&N.status.code<300?this._fsm.updateSuccess(N.body):401===N.status.code||403===N.status.code?this._fsm.tokenRejected(N.status):(429===N.status.code&&this._modifyBackoff(N.body),this._fsm.updateError(N.status));break;default:b.default.error("unexpected reply")}}},{key:"_storeRequest",value:function(N,D,ie){var Z=this;b.default.trace("_storeRequest");var ue={reqType:D,timeout:setTimeout(function(){b.default.debug("request",D,": ",N,"is timed out"),"init"!==D&&"update"!==D&&b.default.error("unknown request type",D),Z._closeSocket()},ie)};this._activeRequests.set(N,ue)}},{key:"_isConnected",value:function(){return this.state===U.state.CONNECTED&&this._socket&&1===this._socket.readyState}},{key:"_getState",value:function(){if(!this._fsm)return U.state.DISCONNECTED;switch(this._fsm.current){case"connecting":case"initialising":case"retrying":case"error":return U.state.CONNECTING;case"updating":case"connected":return U.state.CONNECTED;case"rejected":return U.state.REJECTED;case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return U.state.DISCONNECTING;default:return U.state.DISCONNECTED}}},{key:"_initRetry",value:function(){b.default.trace("_initRetry"),this._backoff.backoff()}},{key:"_retry",value:function(){b.default.trace("_retry"),this._socket=null,this._activeToken=null,this._fsm.userRetry()}},{key:"_onConnected",value:function(){this.emit("connected")}},{key:"_finalizeSocket",value:function(){if(b.default.trace("_finalizeSocket"),this._stopWatchdogTimer(),this._onDisconnected(),this._disconnectedPromiseResolve){var N=this._disconnectedPromiseResolve;this._disconnectedPromiseResolve=null,N()}}},{key:"_onDisconnected",value:function(){this._socket=null,this._activeToken=null,this.emit("disconnected")}},{key:"_setupSocket",value:function(){b.default.trace("_setupSocket:",this._config.token);var N=this,D=this._config.twilsockUri;b.default.debug("try to connect to:",D);var ie=new m(D);ie.binaryType="arraybuffer",ie.onopen=function(){b.default.info("socket opened"),N._fsm.socketConnected()},ie.onclose=function(Z){b.default.info("socket closed",Z),N._fsm.socketClosed()},ie.onerror=function(Z){b.default.error("error: ",Z)},ie.onmessage=function(Z){b.default.trace("data: ",Z.data);var ue=new Uint8Array(Z.data),re=function(V){for(var Y="",z=0;z<V.length;++z){var T=String.fromCharCode(V[z]);if(Y+=T,"\r"===T){z+=2;break}}var C=Y.split(" ");return{size:z,protocol:C[0],version:C[1],headerSize:Number(C[2])}}(ue);if("TWILSOCK"!==re.protocol||"V3.0"!==re.version)return b.default.error("unsupported protocol: "+re.protocol+" ver "+re.version),void N._fsm.unsupportedProtocol();var te=null;try{te=B(ue.subarray(re.size,re.size+re.headerSize))}catch(V){return b.default.error("failed to parse message header",V,Z),void N._fsm.protocolError()}b.default.trace("message received: ",te);var ye=null;if(0<te.payload_size){var Se=2+re.size+re.headerSize,Ee=te.payload_size;if(te.hasOwnProperty("payload_type")&&0!==te.payload_type.indexOf("application/json"))0===te.payload_type.indexOf("text/plain")&&(ye=F(ue.subarray(Se,Se+Ee)));else try{ye=B(ue.subarray(Se,Se+Ee))}catch(V){return b.default.error("failed to parse message body",V,Z),void N._fsm.protocolError()}}N._updateActivityTimestamp(),"notification"===te.method?(N._confirmReceiving(te),N.emit("message",te.message_type,ye)):"reply"===te.method?N.emit("reply",{id:te.id,status:te.status,header:te,body:ye}):"ping"===te.method?N._confirmReceiving(te):"close"===te.method&&(b.default.trace("connection close initated by server"),N._confirmReceiving(te),308===te.status.code?(b.default.info("connection has been offloaded"),N._fsm.receiveOffload({status:te.status.status,body:ye})):406===te.status.code?(b.default.error("connection has been rejected because server can not parse protocol"),N._fsm.receiveFatalClose()):417===te.status.code?(b.default.info("connection has been rejected because server could not understand client`s reply"),N._fsm.receiveFatalClose(te.status.status)):410===te.status.code?(b.default.info("connection has expired"),N._fsm.receiveClose(te.status.status)):401===te.status.code?(b.default.info("connection is not authenticate"),N._fsm.receiveClose(te.status.status)):(b.default.error("unexpected close: ",te.status),N._fsm.receiveOffload({status:te.status.status,body:null})))},this._activeToken=this._config.token,this._socket=ie}},{key:"_sendInit",value:function(){b.default.trace("_sendInit");var N={id:A.default.v4(),method:"init",token:this._activeToken};this._sendPacket(N),this._storeRequest(N.id,"init",5e3)}},{key:"_sendUpdate",value:function(){b.default.trace("_sendUpdate");var N={id:A.default.v4(),method:"update",token:this._activeToken};this._sendPacket(N),this._storeRequest(N.id,"update",5e3)}},{key:"_cancelInit",value:function(){b.default.trace("_cancelInit");var N=!0,D=!1,ie=void 0;try{for(var Z,ue=(0,s.default)(this._activeRequests);!(N=(Z=ue.next()).done);N=!0){var re=(0,n.default)(Z.value,2),te=re[0],ye=re[1];ye&&"init"===ye.reqType&&(clearTimeout(ye.timeout),this._activeRequests.delete(te))}}catch(Se){D=!0,ie=Se}finally{try{!N&&ue.return&&ue.return()}finally{if(D)throw ie}}}},{key:"_cancelUpdate",value:function(){b.default.trace("_cancelUpdate");var N=!0,D=!1,ie=void 0;try{for(var Z,ue=(0,s.default)(this._activeRequests);!(N=(Z=ue.next()).done);N=!0){var re=(0,n.default)(Z.value,2),te=re[0],ye=re[1];ye&&"update"===ye.reqType&&(clearTimeout(ye.timeout),this._activeRequests.delete(te))}}catch(Se){D=!0,ie=Se}finally{try{!N&&ue.return&&ue.return()}finally{if(D)throw ie}}}},{key:"_confirmReceiving",value:function(N){b.default.trace("_confirmReceiving");var D={method:"reply",id:N.id,payload_type:"application/json",status:{code:200,status:"OK"}};try{this._sendPacket(D)}catch(ie){b.default.debug("failed to confirm packet receiving",ie)}}},{key:"_sendPacket",value:function(N,D){var ie=function(Se){switch(void 0===Se?"undefined":(0,O.default)(Se)){case"undefined":return"";case"object":return(0,k.default)(Se);default:return Se}}(D);N.payload_size=R(ie);var Z=(0,k.default)(N)+"\r\n",ue="TWILSOCK V3.0 "+(R(Z)-2)+"\r\n";b.default.debug("send request:",ue+Z+ie);var re,te,ye=(re=encodeURIComponent(ue+Z+ie).replace(/%([0-9A-F]{2})/g,function(Se,Ee){return String.fromCharCode("0x"+Ee)}),te=new Uint8Array(re.length),Array.prototype.forEach.call(re,function(Se,Ee){te[Ee]=Se.charCodeAt(0)}),te);try{this._socket.send(ye.buffer)}catch(Se){throw b.default.info("failed to send ",N,Se),b.default.info(Se.stack),Se}}},{key:"_closeSocket",value:function(){b.default.trace("_closeSocket"),this._socket&&(this._socket.onopen=null,this._socket.onclose=null,this._socket.onerror=null,this._socket.onmessage=null,this._socket.close()),this._fsm.socketClosed()}},{key:"connect",value:function(){b.default.trace("connect"),this._fsm.userConnect()}},{key:"disconnect",value:function(){var N=this;return b.default.trace("disconnect"),this._fsm.is("disconnected")?p.default.resolve():new p.default(function(D){N._disconnectedPromiseResolve=D,N._fsm.userDisconnect()})}},{key:"updateToken",value:function(){if(b.default.trace("updateToken:",this._config.token),"initialising"===this._fsm.current||"updating"===this._fsm.current||"waitSocketClosed"===this._fsm.current||"waitOffloadSocketClosed"===this._fsm.current)return b.default.debug("defer updateToken because of",this._fsm.current,"is in progress"),void(this._isDeferredUpdate=!0);this._isDeferredUpdate=!1,this._activeToken=this._config.token,this._fsm.userUpdateToken()}},{key:"sendUpstreamMessage",value:function(N,D,ie){var Z=A.default.v4(),ue={host:N.host,path:N.path,method:N.method};N.hasOwnProperty("params")&&(ue.params=N.params);var re={method:"message",id:Z,http_request:ue};return D&&(re.http_request.headers=D),D&&D.hasOwnProperty("Content-Type")&&(re.payload_type=D["Content-Type"]),this._sendPacket(re,ie),Z}},{key:"send",value:function(N,D){return N.id=N.id||A.default.v4(),this._sendPacket(N,D),N.id}},{key:"_onCloseReceived",value:function(N){b.default.trace("_onCloseReceived"),b.default.info("connection closed by server, reason is",N),this._socket&&(this._socket.onopen=null,this._socket.onerror=null,this._socket.onmessage=null)}},{key:"_startWatchdogTimer",value:function(){var N=this;b.default.trace("_startWatchdogTimer"),this._timestamp=Date.now(),this._watchTimer=setInterval(function(){43e3<Date.now()-N._timestamp&&N._socket&&N._socket.close()},5e3)}},{key:"_stopWatchdogTimer",value:function(){b.default.trace("_stopWatchdogTimer"),clearInterval(this._watchTimer)}},{key:"_updateActivityTimestamp",value:function(){b.default.trace("_updateActivityTimestamp"),this._timestamp=Date.now()}}]),U}(M.default);(h.default=J).state={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",ERROR:"error",REJECTED:"rejected"},(0,r.default)(J.state),(0,r.default)(J),g.exports=h.default}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./logger":277,"babel-runtime/core-js/get-iterator":32,"babel-runtime/core-js/json/stringify":34,"babel-runtime/core-js/map":35,"babel-runtime/core-js/object/define-properties":39,"babel-runtime/core-js/object/freeze":41,"babel-runtime/core-js/object/get-prototype-of":42,"babel-runtime/core-js/promise":45,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/helpers/slicedToArray":55,"babel-runtime/helpers/typeof":56,backoff:58,events:214,"javascript-state-machine":217,uuid:283,ws:70}],280:[function(e,g,h){g.exports="function"==typeof Object.create?function(a,r){a.super_=r,a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,r){a.super_=r;var p=function(){};p.prototype=r.prototype,a.prototype=new p,a.prototype.constructor=a}},{}],281:[function(e,g,h){g.exports=function(a){return a&&"object"===_typeof4(a)&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],282:[function(e,g,h){(function(a,r){var p=/%[sdj%]/g;h.format=function(U){if(!b(U)){for(var N=[],D=0;D<arguments.length;D++)N.push(t(arguments[D]));return N.join(" ")}D=1;for(var ie=arguments,Z=ie.length,ue=String(U).replace(p,function(te){if("%%"===te)return"%";if(Z<=D)return te;switch(te){case"%s":return String(ie[D++]);case"%d":return Number(ie[D++]);case"%j":try{return JSON.stringify(ie[D++])}catch{return"[Circular]"}default:return te}}),re=ie[D];D<Z;re=ie[++D])O(re)||!E(re)?ue+=" "+re:ue+=" "+t(re);return ue},h.deprecate=function(U,N){if(A(r.process))return function(){return h.deprecate(U,N).apply(this,arguments)};if(!0===a.noDeprecation)return U;var D=!1;return function(){if(!D){if(a.throwDeprecation)throw new Error(N);a.traceDeprecation?console.trace(N):console.error(N),D=!0}return U.apply(this,arguments)}};var n,s={};function t(U,N){var D={seen:[],stylize:u};return 3<=arguments.length&&(D.depth=arguments[2]),4<=arguments.length&&(D.colors=arguments[3]),k(N)?D.showHidden=N:N&&h._extend(D,N),A(D.showHidden)&&(D.showHidden=!1),A(D.depth)&&(D.depth=2),A(D.colors)&&(D.colors=!1),A(D.customInspect)&&(D.customInspect=!0),D.colors&&(D.stylize=c),o(D,U,D.depth)}function c(U,N){var D=t.styles[N];return D?"\x1b["+t.colors[D][0]+"m"+U+"\x1b["+t.colors[D][1]+"m":U}function u(U,N){return U}function o(U,N,D){if(U.customInspect&&N&&R(N.inspect)&&N.inspect!==h.inspect&&(!N.constructor||N.constructor.prototype!==N)){var ie=N.inspect(D,U);return b(ie)||(ie=o(U,ie,D)),ie}var Z=function(Y,z){if(A(z))return Y.stylize("undefined","undefined");if(b(z)){var T="'"+JSON.stringify(z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Y.stylize(T,"string")}return M(z)?Y.stylize(""+z,"number"):k(z)?Y.stylize(""+z,"boolean"):O(z)?Y.stylize("null","null"):void 0}(U,N);if(Z)return Z;var z,ue=Object.keys(N),re=(z={},ue.forEach(function(T,C){z[T]=!0}),z);if(U.showHidden&&(ue=Object.getOwnPropertyNames(N)),m(N)&&(0<=ue.indexOf("message")||0<=ue.indexOf("description")))return l(N);if(0===ue.length){if(R(N))return U.stylize("[Function"+(N.name?": "+N.name:"")+"]","special");if(_(N))return U.stylize(RegExp.prototype.toString.call(N),"regexp");if(y(N))return U.stylize(Date.prototype.toString.call(N),"date");if(m(N))return l(N)}var ye,Se="",Ee=!1,V=["{","}"];return w(N)&&(Ee=!0,V=["[","]"]),R(N)&&(Se=" [Function"+(N.name?": "+N.name:"")+"]"),_(N)&&(Se=" "+RegExp.prototype.toString.call(N)),y(N)&&(Se=" "+Date.prototype.toUTCString.call(N)),m(N)&&(Se=" "+l(N)),0!==ue.length||Ee&&0!=N.length?D<0?_(N)?U.stylize(RegExp.prototype.toString.call(N),"regexp"):U.stylize("[Object]","special"):(U.seen.push(N),ye=Ee?function(Y,z,T,C,X){for(var se=[],ne=0,be=z.length;ne<be;++ne)Q(z,String(ne))?se.push(f(Y,z,T,C,String(ne),!0)):se.push("");return X.forEach(function(Me){Me.match(/^\d+$/)||se.push(f(Y,z,T,C,Me,!0))}),se}(U,N,D,re,ue):ue.map(function(Y){return f(U,N,D,re,Y,Ee)}),U.seen.pop(),function(Y,z,T){return 60<Y.reduce(function(C,X){return X.indexOf("\n"),C+X.replace(/\u001b\[\d\d?m/g,"").length+1},0)?T[0]+(""===z?"":z+"\n ")+" "+Y.join(",\n  ")+" "+T[1]:T[0]+z+" "+Y.join(", ")+" "+T[1]}(ye,Se,V)):V[0]+Se+V[1]}function l(U){return"["+Error.prototype.toString.call(U)+"]"}function f(U,N,D,ie,Z,ue){var re,te,ye;if((ye=Object.getOwnPropertyDescriptor(N,Z)||{value:N[Z]}).get?te=U.stylize(ye.set?"[Getter/Setter]":"[Getter]","special"):ye.set&&(te=U.stylize("[Setter]","special")),Q(ie,Z)||(re="["+Z+"]"),te||(U.seen.indexOf(ye.value)<0?-1<(te=O(D)?o(U,ye.value,null):o(U,ye.value,D-1)).indexOf("\n")&&(te=ue?te.split("\n").map(function(Se){return"  "+Se}).join("\n").substr(2):"\n"+te.split("\n").map(function(Se){return"   "+Se}).join("\n")):te=U.stylize("[Circular]","special")),A(re)){if(ue&&Z.match(/^\d+$/))return te;re=(re=JSON.stringify(""+Z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),U.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),U.stylize(re,"string"))}return re+": "+te}function w(U){return Array.isArray(U)}function k(U){return"boolean"==typeof U}function O(U){return null===U}function M(U){return"number"==typeof U}function b(U){return"string"==typeof U}function A(U){return void 0===U}function _(U){return E(U)&&"[object RegExp]"===F(U)}function E(U){return"object"===_typeof4(U)&&null!==U}function y(U){return E(U)&&"[object Date]"===F(U)}function m(U){return E(U)&&("[object Error]"===F(U)||U instanceof Error)}function R(U){return"function"==typeof U}function F(U){return Object.prototype.toString.call(U)}function B(U){return U<10?"0"+U.toString(10):U.toString(10)}h.debuglog=function(U){if(A(n)&&(n=a.env.NODE_DEBUG||""),U=U.toUpperCase(),!s[U])if(new RegExp("\\b"+U+"\\b","i").test(n)){var N=a.pid;s[U]=function(){var D=h.format.apply(h,arguments);console.error("%s %d: %s",U,N,D)}}else s[U]=function(){};return s[U]},(h.inspect=t).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},t.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=w,h.isBoolean=k,h.isNull=O,h.isNullOrUndefined=function(U){return null==U},h.isNumber=M,h.isString=b,h.isSymbol=function(U){return"symbol"===_typeof4(U)},h.isUndefined=A,h.isRegExp=_,h.isObject=E,h.isDate=y,h.isError=m,h.isFunction=R,h.isPrimitive=function(U){return null===U||"boolean"==typeof U||"number"==typeof U||"string"==typeof U||"symbol"===_typeof4(U)||void 0===U},h.isBuffer=e("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Q(U,N){return Object.prototype.hasOwnProperty.call(U,N)}h.log=function(){var U,N;console.log("%s - %s",(N=[B((U=new Date).getHours()),B(U.getMinutes()),B(U.getSeconds())].join(":"),[U.getDate(),J[U.getMonth()],N].join(" ")),h.format.apply(h,arguments))},h.inherits=e("inherits"),h._extend=function(U,N){if(!N||!E(N))return U;for(var D=Object.keys(N),ie=D.length;ie--;)U[D[ie]]=N[D[ie]];return U}}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":281,_process:225,inherits:280}],283:[function(e,g,h){var a=e("./v1"),r=e("./v4"),p=r;p.v1=a,p.v4=r,g.exports=p},{"./v1":286,"./v4":287}],284:[function(e,g,h){for(var a=[],r=0;r<256;++r)a[r]=(r+256).toString(16).substr(1);g.exports=function(p,n){var s=n||0;return a[p[s++]]+a[p[s++]]+a[p[s++]]+a[p[s++]]+"-"+a[p[s++]]+a[p[s++]]+"-"+a[p[s++]]+a[p[s++]]+"-"+a[p[s++]]+a[p[s++]]+"-"+a[p[s++]]+a[p[s++]]+a[p[s++]]+a[p[s++]]+a[p[s++]]+a[p[s++]]}},{}],285:[function(e,g,h){(function(a){var r,p=a.crypto||a.msCrypto;if(p&&p.getRandomValues){var n=new Uint8Array(16);r=function(){return p.getRandomValues(n),n}}if(!r){var s=new Array(16);r=function(){for(var t,c=0;c<16;c++)!(3&c)&&(t=4294967296*Math.random()),s[c]=t>>>((3&c)<<3)&255;return s}}g.exports=r}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],286:[function(e,g,h){var a=e("./lib/rng"),r=e("./lib/bytesToUuid"),p=a(),n=[1|p[0],p[1],p[2],p[3],p[4],p[5]],s=16383&(p[6]<<8|p[7]),t=0,c=0;g.exports=function(u,o,l){var f=o&&l||0,w=o||[],k=void 0!==(u=u||{}).clockseq?u.clockseq:s,O=void 0!==u.msecs?u.msecs:(new Date).getTime(),M=void 0!==u.nsecs?u.nsecs:c+1,b=O-t+(M-c)/1e4;if(b<0&&void 0===u.clockseq&&(k=k+1&16383),(b<0||t<O)&&void 0===u.nsecs&&(M=0),1e4<=M)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");t=O,s=k;var A=(1e4*(268435455&(O+=122192928e5))+(c=M))%4294967296;w[f++]=A>>>24&255,w[f++]=A>>>16&255,w[f++]=A>>>8&255,w[f++]=255&A;var _=O/4294967296*1e4&268435455;w[f++]=_>>>8&255,w[f++]=255&_,w[f++]=_>>>24&15|16,w[f++]=_>>>16&255,w[f++]=k>>>8|128,w[f++]=255&k;for(var E=u.node||n,y=0;y<6;++y)w[f+y]=E[y];return o||r(w)}},{"./lib/bytesToUuid":284,"./lib/rng":285}],287:[function(e,g,h){var a=e("./lib/rng"),r=e("./lib/bytesToUuid");g.exports=function(p,n,s){var t=n&&s||0;"string"==typeof p&&(n="binary"==p?new Array(16):null,p=null);var c=(p=p||{}).random||(p.rng||a)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,n)for(var u=0;u<16;++u)n[t+u]=c[u];return n||r(c)}},{"./lib/bytesToUuid":284,"./lib/rng":285}],288:[function(e,g,h){g.exports={h32:e("./xxhash"),h64:e("./xxhash64")}},{"./xxhash":289,"./xxhash64":290}],289:[function(e,g,h){(function(a){var r=e("cuint").UINT32;r.prototype.xxh_update=function(l,f){var w,k,O=n._low,M=n._high;w=(k=l*O)>>>16,w+=f*O,w&=65535;var b=this._low+(65535&k),A=b>>>16,_=(A+=this._high+(65535&(w+=l*M)))<<16|65535&b;A=(_=_<<13|_>>>19)>>>16,w=(k=(b=65535&_)*(O=p._low))>>>16,w+=A*O,w&=65535,w+=b*(M=p._high),this._low=65535&k,this._high=65535&w};var p=r("2654435761"),n=r("2246822519"),s=r("3266489917"),t=r("668265263"),c=r("374761393");function u(){return 2==arguments.length?new u(arguments[1]).update(arguments[0]).digest():this instanceof u?void o.call(this,arguments[0]):new u(arguments[0])}function o(l){return this.seed=l instanceof r?l.clone():r(l),this.v1=this.seed.clone().add(p).add(n),this.v2=this.seed.clone().add(n),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(p),this.total_len=0,this.memsize=0,this.memory=null,this}u.prototype.init=o,u.prototype.update=function(l){var f,w="string"==typeof l;w&&(l=function(_){for(var E=[],y=0,m=_.length;y<m;y++){var R=_.charCodeAt(y);R<128?E.push(R):R<2048?E.push(192|R>>6,128|63&R):R<55296||57344<=R?E.push(224|R>>12,128|R>>6&63,128|63&R):(y++,R=65536+((1023&R)<<10|1023&_.charCodeAt(y)),E.push(240|R>>18,128|R>>12&63,128|R>>6&63,128|63&R))}return new Uint8Array(E)}(l),f=!(w=!1)),typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer&&(f=!0,l=new Uint8Array(l));var k=0,O=l.length,M=k+O;if(0==O)return this;if(this.total_len+=O,0==this.memsize&&(this.memory=w?"":f?new Uint8Array(16):new a(16)),this.memsize+O<16)return w?this.memory+=l:f?this.memory.set(l.subarray(0,O),this.memsize):l.copy(this.memory,this.memsize,0,O),this.memsize+=O,this;if(0<this.memsize){w?this.memory+=l.slice(0,16-this.memsize):f?this.memory.set(l.subarray(0,16-this.memsize),this.memsize):l.copy(this.memory,this.memsize,0,16-this.memsize);var b=0;w?(this.v1.xxh_update(this.memory.charCodeAt(b+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2)),this.v2.xxh_update(this.memory.charCodeAt((b+=4)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2)),this.v3.xxh_update(this.memory.charCodeAt((b+=4)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2)),this.v4.xxh_update(this.memory.charCodeAt((b+=4)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2))):(this.v1.xxh_update(this.memory[b+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2]),this.v2.xxh_update(this.memory[(b+=4)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2]),this.v3.xxh_update(this.memory[(b+=4)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2]),this.v4.xxh_update(this.memory[(b+=4)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2])),k+=16-this.memsize,this.memsize=0,w&&(this.memory="")}if(k<=M-16)for(var A=M-16;w?(this.v1.xxh_update(l.charCodeAt(k+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2)),this.v2.xxh_update(l.charCodeAt((k+=4)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2)),this.v3.xxh_update(l.charCodeAt((k+=4)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2)),this.v4.xxh_update(l.charCodeAt((k+=4)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2))):(this.v1.xxh_update(l[k+1]<<8|l[k],l[k+3]<<8|l[k+2]),this.v2.xxh_update(l[(k+=4)+1]<<8|l[k],l[k+3]<<8|l[k+2]),this.v3.xxh_update(l[(k+=4)+1]<<8|l[k],l[k+3]<<8|l[k+2]),this.v4.xxh_update(l[(k+=4)+1]<<8|l[k],l[k+3]<<8|l[k+2])),(k+=4)<=A;);return k<M&&(w?this.memory+=l.slice(k):f?this.memory.set(l.subarray(k,M),this.memsize):l.copy(this.memory,this.memsize,k,M),this.memsize=M-k),this},u.prototype.digest=function(){var l,f,w=this.memory,k="string"==typeof w,O=0,M=this.memsize,b=new r;for((l=16<=this.total_len?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(c)).add(b.fromNumber(this.total_len));O<=M-4;)k?b.fromBits(w.charCodeAt(O+1)<<8|w.charCodeAt(O),w.charCodeAt(O+3)<<8|w.charCodeAt(O+2)):b.fromBits(w[O+1]<<8|w[O],w[O+3]<<8|w[O+2]),l.add(b.multiply(s)).rotl(17).multiply(t),O+=4;for(;O<M;)b.fromBits(k?w.charCodeAt(O++):w[O++],0),l.add(b.multiply(c)).rotl(11).multiply(p);return f=l.clone().shiftRight(15),l.xor(f).multiply(n),f=l.clone().shiftRight(13),l.xor(f).multiply(s),f=l.clone().shiftRight(16),l.xor(f),this.init(this.seed),l},g.exports=u}).call(this,e("buffer").Buffer)},{buffer:71,cuint:209}],290:[function(e,g,h){(function(a){var r=e("cuint").UINT64,p=r("11400714785074694791"),n=r("14029467366897019727"),s=r("1609587929392839161"),t=r("9650029242287828579"),c=r("2870177450012600261");function u(){return 2==arguments.length?new u(arguments[1]).update(arguments[0]).digest():this instanceof u?void o.call(this,arguments[0]):new u(arguments[0])}function o(l){return this.seed=l instanceof r?l.clone():r(l),this.v1=this.seed.clone().add(p).add(n),this.v2=this.seed.clone().add(n),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(p),this.total_len=0,this.memsize=0,this.memory=null,this}u.prototype.init=o,u.prototype.update=function(l){var f,w="string"==typeof l;w&&(l=function(E){for(var y=[],m=0,R=E.length;m<R;m++){var F=E.charCodeAt(m);F<128?y.push(F):F<2048?y.push(192|F>>6,128|63&F):F<55296||57344<=F?y.push(224|F>>12,128|F>>6&63,128|63&F):(m++,F=65536+((1023&F)<<10|1023&E.charCodeAt(m)),y.push(240|F>>18,128|F>>12&63,128|F>>6&63,128|63&F))}return new Uint8Array(y)}(l),f=!(w=!1)),typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer&&(f=!0,l=new Uint8Array(l));var k=0,O=l.length,M=k+O;if(0==O)return this;if(this.total_len+=O,0==this.memsize&&(this.memory=w?"":f?new Uint8Array(32):new a(32)),this.memsize+O<32)return w?this.memory+=l:f?this.memory.set(l.subarray(0,O),this.memsize):l.copy(this.memory,this.memsize,0,O),this.memsize+=O,this;if(0<this.memsize){w?this.memory+=l.slice(0,32-this.memsize):f?this.memory.set(l.subarray(0,32-this.memsize),this.memsize):l.copy(this.memory,this.memsize,0,32-this.memsize);var b=0;w?(_=r(this.memory.charCodeAt(b+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2),this.memory.charCodeAt(b+5)<<8|this.memory.charCodeAt(b+4),this.memory.charCodeAt(b+7)<<8|this.memory.charCodeAt(b+6)),this.v1.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory.charCodeAt((b+=8)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2),this.memory.charCodeAt(b+5)<<8|this.memory.charCodeAt(b+4),this.memory.charCodeAt(b+7)<<8|this.memory.charCodeAt(b+6)),this.v2.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory.charCodeAt((b+=8)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2),this.memory.charCodeAt(b+5)<<8|this.memory.charCodeAt(b+4),this.memory.charCodeAt(b+7)<<8|this.memory.charCodeAt(b+6)),this.v3.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory.charCodeAt((b+=8)+1)<<8|this.memory.charCodeAt(b),this.memory.charCodeAt(b+3)<<8|this.memory.charCodeAt(b+2),this.memory.charCodeAt(b+5)<<8|this.memory.charCodeAt(b+4),this.memory.charCodeAt(b+7)<<8|this.memory.charCodeAt(b+6)),this.v4.add(_.multiply(n)).rotl(31).multiply(p)):(_=r(this.memory[b+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2],this.memory[b+5]<<8|this.memory[b+4],this.memory[b+7]<<8|this.memory[b+6]),this.v1.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory[(b+=8)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2],this.memory[b+5]<<8|this.memory[b+4],this.memory[b+7]<<8|this.memory[b+6]),this.v2.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory[(b+=8)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2],this.memory[b+5]<<8|this.memory[b+4],this.memory[b+7]<<8|this.memory[b+6]),this.v3.add(_.multiply(n)).rotl(31).multiply(p),_=r(this.memory[(b+=8)+1]<<8|this.memory[b],this.memory[b+3]<<8|this.memory[b+2],this.memory[b+5]<<8|this.memory[b+4],this.memory[b+7]<<8|this.memory[b+6]),this.v4.add(_.multiply(n)).rotl(31).multiply(p)),k+=32-this.memsize,this.memsize=0,w&&(this.memory="")}if(k<=M-32){var A=M-32;do{var _;w?(_=r(l.charCodeAt(k+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2),l.charCodeAt(k+5)<<8|l.charCodeAt(k+4),l.charCodeAt(k+7)<<8|l.charCodeAt(k+6)),this.v1.add(_.multiply(n)).rotl(31).multiply(p),_=r(l.charCodeAt((k+=8)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2),l.charCodeAt(k+5)<<8|l.charCodeAt(k+4),l.charCodeAt(k+7)<<8|l.charCodeAt(k+6)),this.v2.add(_.multiply(n)).rotl(31).multiply(p),_=r(l.charCodeAt((k+=8)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2),l.charCodeAt(k+5)<<8|l.charCodeAt(k+4),l.charCodeAt(k+7)<<8|l.charCodeAt(k+6)),this.v3.add(_.multiply(n)).rotl(31).multiply(p),_=r(l.charCodeAt((k+=8)+1)<<8|l.charCodeAt(k),l.charCodeAt(k+3)<<8|l.charCodeAt(k+2),l.charCodeAt(k+5)<<8|l.charCodeAt(k+4),l.charCodeAt(k+7)<<8|l.charCodeAt(k+6)),this.v4.add(_.multiply(n)).rotl(31).multiply(p)):(_=r(l[k+1]<<8|l[k],l[k+3]<<8|l[k+2],l[k+5]<<8|l[k+4],l[k+7]<<8|l[k+6]),this.v1.add(_.multiply(n)).rotl(31).multiply(p),_=r(l[(k+=8)+1]<<8|l[k],l[k+3]<<8|l[k+2],l[k+5]<<8|l[k+4],l[k+7]<<8|l[k+6]),this.v2.add(_.multiply(n)).rotl(31).multiply(p),_=r(l[(k+=8)+1]<<8|l[k],l[k+3]<<8|l[k+2],l[k+5]<<8|l[k+4],l[k+7]<<8|l[k+6]),this.v3.add(_.multiply(n)).rotl(31).multiply(p),_=r(l[(k+=8)+1]<<8|l[k],l[k+3]<<8|l[k+2],l[k+5]<<8|l[k+4],l[k+7]<<8|l[k+6]),this.v4.add(_.multiply(n)).rotl(31).multiply(p)),k+=8}while(k<=A)}return k<M&&(w?this.memory+=l.slice(k):f?this.memory.set(l.subarray(k,M),this.memsize):l.copy(this.memory,this.memsize,k,M),this.memsize=M-k),this},u.prototype.digest=function(){var l,f,w=this.memory,k="string"==typeof w,O=0,M=this.memsize,b=new r;for(32<=this.total_len?((l=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),l.add(this.v3.clone().rotl(12)),l.add(this.v4.clone().rotl(18)),l.xor(this.v1.multiply(n).rotl(31).multiply(p)),l.multiply(p).add(t),l.xor(this.v2.multiply(n).rotl(31).multiply(p)),l.multiply(p).add(t),l.xor(this.v3.multiply(n).rotl(31).multiply(p)),l.multiply(p).add(t),l.xor(this.v4.multiply(n).rotl(31).multiply(p)),l.multiply(p).add(t)):l=this.seed.clone().add(c),l.add(b.fromNumber(this.total_len));O<=M-8;)k?b.fromBits(w.charCodeAt(O+1)<<8|w.charCodeAt(O),w.charCodeAt(O+3)<<8|w.charCodeAt(O+2),w.charCodeAt(O+5)<<8|w.charCodeAt(O+4),w.charCodeAt(O+7)<<8|w.charCodeAt(O+6)):b.fromBits(w[O+1]<<8|w[O],w[O+3]<<8|w[O+2],w[O+5]<<8|w[O+4],w[O+7]<<8|w[O+6]),b.multiply(n).rotl(31).multiply(p),l.xor(b).rotl(27).multiply(p).add(t),O+=8;for(O+4<=M&&(k?b.fromBits(w.charCodeAt(O+1)<<8|w.charCodeAt(O),w.charCodeAt(O+3)<<8|w.charCodeAt(O+2),0,0):b.fromBits(w[O+1]<<8|w[O],w[O+3]<<8|w[O+2],0,0),l.xor(b.multiply(p)).rotl(23).multiply(n).add(s),O+=4);O<M;)b.fromBits(k?w.charCodeAt(O++):w[O++],0,0,0),l.xor(b.multiply(c)).rotl(11).multiply(p);return f=l.clone().shiftRight(33),l.xor(f).multiply(n),f=l.clone().shiftRight(29),l.xor(f).multiply(s),f=l.clone().shiftRight(32),l.xor(f),this.init(this.seed),l},g.exports=u}).call(this,e("buffer").Buffer)},{buffer:71,cuint:209}],291:[function(e,g,h){g.exports={name:"twilio-chat",version:"1.2.1",description:"Twilio Chat service client library",main:"lib/index.js",browser:"browser/index.js",types:"./lib/client.d.ts",author:"Twilio",license:"MIT",dependencies:{"twilio-mcs-client":"^0.0.4",durational:"^1.1.0","isomorphic-form-data":"^1.0.0",loglevel:"^1.5.0","operation-retrier":"^1.3.2",platform:"^1.3.4",rfc6902:"^1.3.0","twilio-ems-client":"^0.2.6","twilio-notifications":"^0.4.4","twilio-sync":"^0.5.10","twilio-transport":"^0.1.4",twilsock:"^0.3.5",uuid:"^3.1.0"},devDependencies:{"@types/chai":"^3.4.35","@types/chai-as-promised":"0.0.31","@types/chai-string":"^1.1.30","@types/core-js":"^0.9.41","@types/mocha":"^2.2.43","@types/node":"^7.0.5","@types/sinon":"^2.3.5","@types/sinon-chai":"^2.7.27",async:"^2.1.5","async-test-tools":"^1.0.6","babel-eslint":"^7.2.3","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-istanbul":"^4.1.5","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-require":"^1.0.1","babel-runtime":"^6.23.0",babelify:"^7.3.0",browserify:"^14.1.0","browserify-replace":"^0.9.0",chai:"^3.5.0","chai-as-promised":"^6.0.0","chai-string":"^1.4.0",cheerio:"^0.22.0",del:"^3.0.0",fs:"0.0.1-security",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-insert":"^0.5.0","gulp-mocha":"^4.1.0","gulp-rename":"^1.2.2","gulp-tap":"^1.0.1","gulp-tslint":"^8.1.0","gulp-typescript":"^3.1.7","gulp-uglify":"^3.0.0","gulp-util":"^3.0.8",gulpclass:"^0.1.2","ink-docstrap":"^1.3.0",jsdoc:"3.4.3","jsdoc-strip-async-await":"^0.1.0",karma:"^1.5.0","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","karma-sinon-ie":"^2.0.0","loglevel-message-prefix":"^2.0.1","mocha.parallel":"^0.15.0",nyc:"^11.2.1",path:"^0.12.7",sinon:"^2.3.2","sinon-chai":"^2.14.0","ts-node":"^3.0.4",tslint:"^5.4.2",twilio:"^3.7.0",typescript:"^2.5.3","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},engines:{node:">=6"}}},{}]},{},[3])(3)}),function(I,P){"object"==(typeof exports>"u"?"undefined":_typeof(exports))&&typeof module<"u"?module.exports=P():"function"==typeof define&&define.amd?define(P):I.moment=P()}(this,function(){"use strict";function I(){return ut.apply(null,arguments)}function P(x){return"[object Array]"===Object.prototype.toString.call(x)}function G(x){return x instanceof Date||"[object Date]"===Object.prototype.toString.call(x)}function e(x,ee){var he,Ce=[];for(he=0;he<x.length;++he)Ce.push(ee(x[he],he));return Ce}function g(x,ee){return Object.prototype.hasOwnProperty.call(x,ee)}function h(x,ee){for(var he in ee)g(ee,he)&&(x[he]=ee[he]);return g(ee,"toString")&&(x.toString=ee.toString),g(ee,"valueOf")&&(x.valueOf=ee.valueOf),x}function a(x,ee,he,Ce){return Ht(x,ee,he,Ce,!0).utc()}function r(x){return null==x._pf&&(x._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),x._pf}function p(x){if(null==x._isValid){var ee=r(x);x._isValid=!(isNaN(x._d.getTime())||!(ee.overflow<0)||ee.empty||ee.invalidMonth||ee.invalidWeekday||ee.nullInput||ee.invalidFormat||ee.userInvalidated),x._strict&&(x._isValid=x._isValid&&0===ee.charsLeftOver&&0===ee.unusedTokens.length&&void 0===ee.bigHour)}return x._isValid}function n(x){var ee=a(NaN);return null!=x?h(r(ee),x):r(ee).userInvalidated=!0,ee}function s(x){return void 0===x}function t(x,ee){var he,Ce,Le;if(s(ee._isAMomentObject)||(x._isAMomentObject=ee._isAMomentObject),s(ee._i)||(x._i=ee._i),s(ee._f)||(x._f=ee._f),s(ee._l)||(x._l=ee._l),s(ee._strict)||(x._strict=ee._strict),s(ee._tzm)||(x._tzm=ee._tzm),s(ee._isUTC)||(x._isUTC=ee._isUTC),s(ee._offset)||(x._offset=ee._offset),s(ee._pf)||(x._pf=r(ee)),s(ee._locale)||(x._locale=ee._locale),0<zt.length)for(he in zt)s(Le=ee[Ce=zt[he]])||(x[Ce]=Le);return x}function c(x){t(this,x),this._d=new Date(null!=x._d?x._d.getTime():NaN),!1===tn&&(tn=!0,I.updateOffset(this),tn=!1)}function u(x){return x instanceof c||null!=x&&null!=x._isAMomentObject}function o(x){return x<0?Math.ceil(x):Math.floor(x)}function l(x){var ee=+x,he=0;return 0!==ee&&isFinite(ee)&&(he=o(ee)),he}function f(x,ee,he){var Ce,Le=Math.min(x.length,ee.length),He=Math.abs(x.length-ee.length),Qe=0;for(Ce=0;Ce<Le;Ce++)(he&&x[Ce]!==ee[Ce]||!he&&l(x[Ce])!==l(ee[Ce]))&&Qe++;return Qe+He}function w(){}function k(x){return x&&x.toLowerCase().replace("_","-")}function O(x){var ee=null;if(!Nt[x]&&typeof module<"u"&&module&&module.exports)try{ee=ft._abbr,require("./locale/"+x),M(ee)}catch{}return Nt[x]}function M(x,ee){var he;return x&&(he=s(ee)?A(x):b(x,ee))&&(ft=he),ft._abbr}function b(x,ee){return null!==ee?(ee.abbr=x,Nt[x]=Nt[x]||new w,Nt[x].set(ee),M(x),Nt[x]):(delete Nt[x],null)}function A(x){var ee;if(x&&x._locale&&x._locale._abbr&&(x=x._locale._abbr),!x)return ft;if(!P(x)){if(ee=O(x))return ee;x=[x]}return function(he){for(var Ce,Le,He,Qe,vt=0;vt<he.length;){for(Ce=(Qe=k(he[vt]).split("-")).length,Le=(Le=k(he[vt+1]))?Le.split("-"):null;0<Ce;){if(He=O(Qe.slice(0,Ce).join("-")))return He;if(Le&&Le.length>=Ce&&f(Qe,Le,!0)>=Ce-1)break;Ce--}vt++}return null}(x)}function _(x,ee){var he=x.toLowerCase();nn[he]=nn[he+"s"]=nn[ee]=x}function E(x){return"string"==typeof x?nn[x]||nn[x.toLowerCase()]:void 0}function y(x){var ee,he,Ce={};for(he in x)g(x,he)&&(ee=E(he))&&(Ce[ee]=x[he]);return Ce}function m(x){return x instanceof Function||"[object Function]"===Object.prototype.toString.call(x)}function R(x,ee){return function(he){return null!=he?(B(this,x,he),I.updateOffset(this,ee),this):F(this,x)}}function F(x,ee){return x.isValid()?x._d["get"+(x._isUTC?"UTC":"")+ee]():NaN}function B(x,ee,he){x.isValid()&&x._d["set"+(x._isUTC?"UTC":"")+ee](he)}function J(x,ee){var he;if("object"==_typeof(x))for(he in x)this.set(he,x[he]);else if(m(this[x=E(x)]))return this[x](ee);return this}function Q(x,ee,he){var Ce=""+Math.abs(x);return(0<=x?he?"+":"":"-")+Math.pow(10,Math.max(0,ee-Ce.length)).toString().substr(1)+Ce}function U(x,ee,he,Ce){var Le=Ce;"string"==typeof Ce&&(Le=function(){return this[Ce]()}),x&&(Jt[x]=Le),ee&&(Jt[ee[0]]=function(){return Q(Le.apply(this,arguments),ee[1],ee[2])}),he&&(Jt[he]=function(){return this.localeData().ordinal(Le.apply(this,arguments),x)})}function N(x){return x.match(/\[[\s\S]/)?x.replace(/^\[|\]$/g,""):x.replace(/\\/g,"")}function D(x,ee){return x.isValid()?(ee=ie(ee,x.localeData()),Pt[ee]=Pt[ee]||function(he){var Ce,Le,He=he.match(pn);for(Ce=0,Le=He.length;Ce<Le;Ce++)He[Ce]=Jt[He[Ce]]?Jt[He[Ce]]:N(He[Ce]);return function(Qe){var vt="";for(Ce=0;Ce<Le;Ce++)vt+=He[Ce]instanceof Function?He[Ce].call(Qe,he):He[Ce];return vt}}(ee),Pt[ee](x)):x.localeData().invalidDate()}function ie(x,ee){function he(Le){return ee.longDateFormat(Le)||Le}var Ce=5;for(on.lastIndex=0;0<=Ce&&on.test(x);)x=x.replace(on,he),on.lastIndex=0,Ce-=1;return x}function Z(x,ee,he){yi[x]=m(ee)?ee:function(Ce,Le){return Ce&&he?he:ee}}function ue(x,ee){return g(yi,x)?yi[x](ee._strict,ee._locale):new RegExp(re(x.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Ce,Le,He,Qe,vt){return Le||He||Qe||vt})))}function re(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(x,ee){var he,Ce=ee;for("string"==typeof x&&(x=[x]),"number"==typeof ee&&(Ce=function(Le,He){He[ee]=l(Le)}),he=0;he<x.length;he++)or[x[he]]=Ce}function ye(x,ee){te(x,function(he,Ce,Le,He){Le._w=Le._w||{},ee(he,Le._w,Le,He)})}function Se(x,ee,he){null!=ee&&g(or,x)&&or[x](ee,he._a,he,x)}function Ee(x,ee){return new Date(Date.UTC(x,ee+1,0)).getUTCDate()}function V(x,ee){var he;return x.isValid()&&("string"==typeof ee&&"number"!=typeof(ee=x.localeData().monthsParse(ee))||(he=Math.min(x.date(),Ee(x.year(),ee)),x._d["set"+(x._isUTC?"UTC":"")+"Month"](ee,he))),x}function Y(x){return null!=x?(V(this,x),I.updateOffset(this,!0),this):F(this,"Month")}function z(){function x(Qe,vt){return vt.length-Qe.length}var ee,he,Ce=[],Le=[],He=[];for(ee=0;ee<12;ee++)he=a([2e3,ee]),Ce.push(this.monthsShort(he,"")),Le.push(this.months(he,"")),He.push(this.months(he,"")),He.push(this.monthsShort(he,""));for(Ce.sort(x),Le.sort(x),He.sort(x),ee=0;ee<12;ee++)Ce[ee]=re(Ce[ee]),Le[ee]=re(Le[ee]),He[ee]=re(He[ee]);this._monthsRegex=new RegExp("^("+He.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+Le.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+Ce.join("|")+")$","i")}function T(x){var ee,he=x._a;return he&&-2===r(x).overflow&&(ee=he[mr]<0||11<he[mr]?mr:he[gr]<1||he[gr]>Ee(he[Vn],he[mr])?gr:he[Fn]<0||24<he[Fn]||24===he[Fn]&&(0!==he[lr]||0!==he[wr]||0!==he[kr])?Fn:he[lr]<0||59<he[lr]?lr:he[wr]<0||59<he[wr]?wr:he[kr]<0||999<he[kr]?kr:-1,r(x)._overflowDayOfYear&&(ee<Vn||gr<ee)&&(ee=gr),r(x)._overflowWeeks&&-1===ee&&(ee=es),r(x)._overflowWeekday&&-1===ee&&(ee=Mi),r(x).overflow=ee),x}function C(x){!1===I.suppressDeprecationWarnings&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+x)}function X(x,ee){var he=!0;return h(function(){return he&&(C(x+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),he=!1),ee.apply(this,arguments)},ee)}function se(x){var ee,he,Ce,Le,He,Qe,vt=x._i,Dt=Zr.exec(vt)||Ni.exec(vt);if(Dt){for(r(x).iso=!0,ee=0,he=nr.length;ee<he;ee++)if(nr[ee][1].exec(Dt[1])){Le=nr[ee][0],Ce=!1!==nr[ee][2];break}if(null==Le)return void(x._isValid=!1);if(Dt[3]){for(ee=0,he=ki.length;ee<he;ee++)if(ki[ee][1].exec(Dt[3])){He=(Dt[2]||" ")+ki[ee][0];break}if(null==He)return void(x._isValid=!1)}if(!Ce&&null!=He)return void(x._isValid=!1);if(Dt[4]){if(!wi.exec(Dt[4]))return void(x._isValid=!1);Qe="Z"}x._f=Le+(He||"")+(Qe||""),ht(x)}else x._isValid=!1}function ne(x){var ee=new Date(Date.UTC.apply(null,arguments));return x<100&&0<=x&&isFinite(ee.getUTCFullYear())&&ee.setUTCFullYear(x),ee}function be(x){return Me(x)?366:365}function Me(x){return x%4==0&&x%100!=0||x%400==0}function $e(x,ee,he){var Ce=7+ee-he;return-(7+ne(x,0,Ce).getUTCDay()-ee)%7+Ce-1}function Ue(x,ee,he,Ce,Le){var He,Qe,vt=1+7*(ee-1)+(7+he-Ce)%7+$e(x,Ce,Le);return Qe=vt<=0?be(He=x-1)+vt:vt>be(x)?(He=x+1,vt-be(x)):(He=x,vt),{year:He,dayOfYear:Qe}}function Fe(x,ee,he){var Ce,Le,He=$e(x.year(),ee,he),Qe=Math.floor((x.dayOfYear()-He-1)/7)+1;return Qe<1?Ce=Qe+qe(Le=x.year()-1,ee,he):Qe>qe(x.year(),ee,he)?(Ce=Qe-qe(x.year(),ee,he),Le=x.year()+1):(Le=x.year(),Ce=Qe),{week:Ce,year:Le}}function qe(x,ee,he){var Ce=$e(x,ee,he),Le=$e(x+1,ee,he);return(be(x)-Ce+Le)/7}function Mt(x,ee,he){return x??ee??he}function ot(x){var ee,he,Ce,Le,Qe,vt,Dt,rn,vn,$n,jn,Tn,Or,He=[];if(!x._d){for(Ce=function tt(x){var ee=new Date(I.now());return x._useUTC?[ee.getUTCFullYear(),ee.getUTCMonth(),ee.getUTCDate()]:[ee.getFullYear(),ee.getMonth(),ee.getDate()]}(x),x._w&&null==x._a[gr]&&null==x._a[mr]&&(void 0,Dt=void 0,rn=void 0,vn=void 0,$n=void 0,jn=void 0,Tn=void 0,Or=void 0,null!=(vt=(Qe=x)._w).GG||null!=vt.W||null!=vt.E?($n=1,jn=4,Dt=Mt(vt.GG,Qe._a[Vn],Fe(Yt(),1,4).year),rn=Mt(vt.W,1),((vn=Mt(vt.E,1))<1||7<vn)&&(Or=!0)):($n=Qe._locale._week.dow,jn=Qe._locale._week.doy,Dt=Mt(vt.gg,Qe._a[Vn],Fe(Yt(),$n,jn).year),rn=Mt(vt.w,1),null!=vt.d?((vn=vt.d)<0||6<vn)&&(Or=!0):null!=vt.e?(vn=vt.e+$n,(vt.e<0||6<vt.e)&&(Or=!0)):vn=$n),rn<1||rn>qe(Dt,$n,jn)?r(Qe)._overflowWeeks=!0:null!=Or?r(Qe)._overflowWeekday=!0:(Tn=Ue(Dt,rn,vn,$n,jn),Qe._a[Vn]=Tn.year,Qe._dayOfYear=Tn.dayOfYear)),x._dayOfYear&&(Le=Mt(x._a[Vn],Ce[Vn]),x._dayOfYear>be(Le)&&(r(x)._overflowDayOfYear=!0),he=ne(Le,0,x._dayOfYear),x._a[mr]=he.getUTCMonth(),x._a[gr]=he.getUTCDate()),ee=0;ee<3&&null==x._a[ee];++ee)x._a[ee]=He[ee]=Ce[ee];for(;ee<7;ee++)x._a[ee]=He[ee]=null==x._a[ee]?2===ee?1:0:x._a[ee];24===x._a[Fn]&&0===x._a[lr]&&0===x._a[wr]&&0===x._a[kr]&&(x._nextDay=!0,x._a[Fn]=0),x._d=(x._useUTC?ne:function(Qe,vt,Dt,rn,vn,$n,jn){var Tn=new Date(Qe,vt,Dt,rn,vn,$n,jn);return Qe<100&&0<=Qe&&isFinite(Tn.getFullYear())&&Tn.setFullYear(Qe),Tn}).apply(null,He),null!=x._tzm&&x._d.setUTCMinutes(x._d.getUTCMinutes()-x._tzm),x._nextDay&&(x._a[Fn]=24)}}function ht(x){if(x._f!==I.ISO_8601){x._a=[],r(x).empty=!0;var ee,he,Ce,Le,He,Qe=""+x._i,vt=Qe.length,Dt=0;for(Ce=ie(x._f,x._locale).match(pn)||[],ee=0;ee<Ce.length;ee++)(he=(Qe.match(ue(Le=Ce[ee],x))||[])[0])&&(0<(He=Qe.substr(0,Qe.indexOf(he))).length&&r(x).unusedInput.push(He),Qe=Qe.slice(Qe.indexOf(he)+he.length),Dt+=he.length),Jt[Le]?(he?r(x).empty=!1:r(x).unusedTokens.push(Le),Se(Le,he,x)):x._strict&&!he&&r(x).unusedTokens.push(Le);r(x).charsLeftOver=vt-Dt,0<Qe.length&&r(x).unusedInput.push(Qe),!0===r(x).bigHour&&x._a[Fn]<=12&&0<x._a[Fn]&&(r(x).bigHour=void 0),x._a[Fn]=(rn=x._locale,vn=x._a[Fn],null==($n=x._meridiem)?vn:null!=rn.meridiemHour?rn.meridiemHour(vn,$n):(null!=rn.isPM&&((jn=rn.isPM($n))&&vn<12&&(vn+=12),jn||12!==vn||(vn=0)),vn)),ot(x),T(x)}else se(x);var rn,vn,$n,jn}function kt(x){var ee=x._i,he=x._f;return x._locale=x._locale||A(x._l),null===ee||void 0===he&&""===ee?n({nullInput:!0}):("string"==typeof ee&&(x._i=ee=x._locale.preparse(ee)),u(ee)?new c(T(ee)):(P(he)?function(Ce){var Le,He,Qe,vt,Dt;if(0===Ce._f.length)return r(Ce).invalidFormat=!0,Ce._d=new Date(NaN);for(vt=0;vt<Ce._f.length;vt++)Dt=0,Le=t({},Ce),null!=Ce._useUTC&&(Le._useUTC=Ce._useUTC),Le._f=Ce._f[vt],ht(Le),p(Le)&&(Dt+=r(Le).charsLeftOver,Dt+=10*r(Le).unusedTokens.length,r(Le).score=Dt,(null==Qe||Dt<Qe)&&(Qe=Dt,He=Le));h(Ce,He||Le)}(x):he?ht(x):G(ee)?x._d=ee:function wt(x){var ee=x._i;void 0===ee?x._d=new Date(I.now()):G(ee)?x._d=new Date(+ee):"string"==typeof ee?function(he){var Ce=ts.exec(he._i);null!==Ce?he._d=new Date(+Ce[1]):(se(he),!1===he._isValid&&(delete he._isValid,I.createFromInputFallback(he)))}(x):P(ee)?(x._a=e(ee.slice(0),function(he){return parseInt(he,10)}),ot(x)):"object"==_typeof(ee)?function(he){if(!he._d){var Ce=y(he._i);he._a=e([Ce.year,Ce.month,Ce.day||Ce.date,Ce.hour,Ce.minute,Ce.second,Ce.millisecond],function(Le){return Le&&parseInt(Le,10)}),ot(he)}}(x):"number"==typeof ee?x._d=new Date(ee):I.createFromInputFallback(x)}(x),p(x)||(x._d=null),x))}function Ht(x,ee,he,Ce,Le){var vt,He={};return"boolean"==typeof he&&(Ce=he,he=void 0),He._isAMomentObject=!0,He._useUTC=He._isUTC=Le,He._l=he,He._i=x,He._f=ee,He._strict=Ce,(vt=new c(T(kt(He))))._nextDay&&(vt.add(1,"d"),vt._nextDay=void 0),vt}function Yt(x,ee,he,Ce){return Ht(x,ee,he,Ce,!1)}function Ln(x,ee){var he,Ce;if(1===ee.length&&P(ee[0])&&(ee=ee[0]),!ee.length)return Yt();for(he=ee[0],Ce=1;Ce<ee.length;++Ce)(!ee[Ce].isValid()||ee[Ce][x](he))&&(he=ee[Ce]);return he}function Yn(x){var ee=y(x),he=ee.year||0,Ce=ee.quarter||0,Le=ee.month||0,He=ee.week||0,Qe=ee.day||0;this._milliseconds=+(ee.millisecond||0)+1e3*(ee.second||0)+6e4*(ee.minute||0)+36e5*(ee.hour||0),this._days=+Qe+7*He,this._months=+Le+3*Ce+12*he,this._data={},this._locale=A(),this._bubble()}function Zn(x){return x instanceof Yn}function ce(x,ee){U(x,0,0,function(){var he=this.utcOffset(),Ce="+";return he<0&&(he=-he,Ce="-"),Ce+Q(~~(he/60),2)+ee+Q(~~he%60,2)})}function pe(x,ee){var he=(ee||"").match(x)||[],Ce=((he[he.length-1]||[])+"").match(Li)||["-",0,0],Le=60*Ce[1]+l(Ce[2]);return"+"===Ce[0]?Le:-Le}function ve(x,ee){var he,Ce;return ee._isUTC?(he=ee.clone(),Ce=(u(x)||G(x)?+x:+Yt(x))-+he,he._d.setTime(+he._d+Ce),I.updateOffset(he,!1),he):Yt(x).local()}function K(x){return 15*-Math.round(x._d.getTimezoneOffset()/15)}function oe(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ae(x,ee){var he,Ce,Le,vt,Dt,rn,He=x,Qe=null;return Zn(x)?He={ms:x._milliseconds,d:x._days,M:x._months}:"number"==typeof x?(He={},ee?He[ee]=x:He.milliseconds=x):(Qe=Tr.exec(x))?(he="-"===Qe[1]?-1:1,He={y:0,d:l(Qe[gr])*he,h:l(Qe[Fn])*he,m:l(Qe[lr])*he,s:l(Qe[wr])*he,ms:l(Qe[kr])*he}):(Qe=ei.exec(x))?He={y:De(Qe[2],he="-"===Qe[1]?-1:1),M:De(Qe[3],he),d:De(Qe[4],he),h:De(Qe[5],he),m:De(Qe[6],he),s:De(Qe[7],he),w:De(Qe[8],he)}:null==He?He={}:"object"==_typeof(He)&&("from"in He||"to"in He)&&(vt=Yt(He.from),Dt=Yt(He.to),Le=vt.isValid()&&Dt.isValid()?(Dt=ve(Dt,vt),vt.isBefore(Dt)?rn=ze(vt,Dt):((rn=ze(Dt,vt)).milliseconds=-rn.milliseconds,rn.months=-rn.months),rn):{milliseconds:0,months:0},(He={}).ms=Le.milliseconds,He.M=Le.months),Ce=new Yn(He),Zn(x)&&g(x,"_locale")&&(Ce._locale=x._locale),Ce}function De(x,ee){var he=x&&parseFloat(x.replace(",","."));return(isNaN(he)?0:he)*ee}function ze(x,ee){var he={milliseconds:0,months:0};return he.months=ee.month()-x.month()+12*(ee.year()-x.year()),x.clone().add(he.months,"M").isAfter(ee)&&--he.months,he.milliseconds=+ee-+x.clone().add(he.months,"M"),he}function Oe(x,ee){return function(he,Ce){var Le,He;return null===Ce||isNaN(+Ce)||(_i[He=ee]||(C("moment()."+ee+"(period, number) is deprecated. Please use moment()."+ee+"(number, period)."),_i[He]=!0),Le=he,he=Ce,Ce=Le),bt(this,Ae(he="string"==typeof he?+he:he,Ce),x),this}}function bt(x,ee,he,Ce){var Le=ee._milliseconds,He=ee._days,Qe=ee._months;x.isValid()&&(Ce=null==Ce||Ce,Le&&x._d.setTime(+x._d+Le*he),He&&B(x,"Date",F(x,"Date")+He*he),Qe&&V(x,F(x,"Month")+Qe*he),Ce&&I.updateOffset(x,He||Qe))}function It(x){var ee;return void 0===x?this._locale._abbr:(null!=(ee=A(x))&&(this._locale=ee),this)}function gt(){return this._locale}function Rt(x,ee){U(0,[x,x.length],0,ee)}function Xt(x,ee,he,Ce,Le){var He;return null==x?Fe(this,Ce,Le).year:((He=qe(x,Ce,Le))<ee&&(ee=He),function(Qe,vt,Dt,rn,vn){var $n=Ue(Qe,vt,Dt,rn,vn),jn=ne($n.year,0,$n.dayOfYear);return this.year(jn.getUTCFullYear()),this.month(jn.getUTCMonth()),this.date(jn.getUTCDate()),this}.call(this,x,ee,he,Ce,Le))}function Ft(){return this.hours()%12||12}function Qt(x,ee){U(x,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ee)})}function Lt(x,ee){return ee._meridiemParse}function Ut(x,ee){ee[kr]=l(1e3*("0."+x))}function $t(x){return x}function xt(x,ee,he,Ce){var Le=A(),He=a().set(Ce,ee);return Le[he](He,x)}function Et(x,ee,he,Ce,Le){if("number"==typeof x&&(ee=x,x=void 0),x=x||"",null!=ee)return xt(x,ee,he,Le);var He,Qe=[];for(He=0;He<Ce;He++)Qe[He]=xt(x,He,he,Le);return Qe}function _t(x,ee,he,Ce){var Le=Ae(ee,he);return x._milliseconds+=Ce*Le._milliseconds,x._days+=Ce*Le._days,x._months+=Ce*Le._months,x._bubble()}function en(x){return x<0?Math.floor(x):Math.ceil(x)}function Ct(x){return 4800*x/146097}function We(x){return 146097*x/4800}function Je(x){return function(){return this.as(x)}}function at(x){return function(){return this._data[x]}}function it(){var x,ee,he=$i(this._milliseconds)/1e3,Ce=$i(this._days),Le=$i(this._months);ee=o((x=o(he/60))/60),he%=60,x%=60;var He=o(Le/12),Qe=Le%=12,vt=Ce,Dt=ee,rn=x,vn=he,$n=this.asSeconds();return $n?($n<0?"-":"")+"P"+(He?He+"Y":"")+(Qe?Qe+"M":"")+(vt?vt+"D":"")+(Dt||rn||vn?"T":"")+(Dt?Dt+"H":"")+(rn?rn+"M":"")+(vn?vn+"S":""):"P0D"}var ut,ft,zt=I.momentProperties=[],tn=!1,Nt={},nn={},pn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,on=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pt={},Jt={},qt=/\d/,Tt=/\d\d/,At=/\d{3}/,sn=/\d{4}/,hn=/[+-]?\d{6}/,Kt=/\d\d?/,dn=/\d\d\d\d?/,Rn=/\d\d\d\d\d\d?/,Sn=/\d{1,3}/,Nn=/\d{1,4}/,Un=/[+-]?\d{1,6}/,Xn=/\d+/,Hn=/[+-]?\d+/,Qn=/Z|[+-]\d\d:?\d\d/gi,ci=/Z|[+-]\d\d(?::?\d\d)?/gi,Kr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,yi={},or={},Vn=0,mr=1,gr=2,Fn=3,lr=4,wr=5,kr=6,es=7,Mi=8;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(x){return this.localeData().monthsShort(this,x)}),U("MMMM",0,0,function(x){return this.localeData().months(this,x)}),_("month","M"),Z("M",Kt),Z("MM",Kt,Tt),Z("MMM",function(x,ee){return ee.monthsShortRegex(x)}),Z("MMMM",function(x,ee){return ee.monthsRegex(x)}),te(["M","MM"],function(x,ee){ee[mr]=l(x)-1}),te(["MMM","MMMM"],function(x,ee,he,Ce){var Le=he._locale.monthsParse(x,Ce,he._strict);null!=Le?ee[mr]=Le:r(he).invalidMonth=x});var hi=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Di="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xi=Kr,Pi=Kr,_i={},Zr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ni=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,wi=/Z|[+-]\d\d(?::?\d\d)?/,nr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,I.suppressDeprecationWarnings=!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ki=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ts=/^\/?Date\((\-?\d+)/i;I.createFromInputFallback=X("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(x){x._d=new Date(x._i+(x._useUTC?" UTC":""))}),U("Y",0,0,function(){var x=this.year();return x<=9999?""+x:"+"+x}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),_("year","y"),Z("Y",Hn),Z("YY",Kt,Tt),Z("YYYY",Nn,sn),Z("YYYYY",Un,hn),Z("YYYYYY",Un,hn),te(["YYYYY","YYYYYY"],Vn),te("YYYY",function(x,ee){ee[Vn]=2===x.length?I.parseTwoDigitYear(x):l(x)}),te("YY",function(x,ee){ee[Vn]=I.parseTwoDigitYear(x)}),te("Y",function(x,ee){ee[Vn]=parseInt(x,10)});var qr=R("FullYear",!(I.parseTwoDigitYear=function(x){return l(x)+(68<l(x)?1900:2e3)}));I.ISO_8601=function(){};var fi=X("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var x=Yt.apply(null,arguments);return this.isValid()&&x.isValid()?x<this?this:x:n()}),Fi=X("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var x=Yt.apply(null,arguments);return this.isValid()&&x.isValid()?this<x?this:x:n()});ce("Z",":"),ce("ZZ",""),Z("Z",ci),Z("ZZ",ci),te(["Z","ZZ"],function(x,ee,he){he._useUTC=!0,he._tzm=pe(ci,x)});var Li=/([\+\-]|\d\d)/gi;I.updateOffset=function(){};var Tr=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ei=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ae.fn=Yn.prototype;var Ci=Oe(1,"add"),Ui=Oe(-1,"subtract");I.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ti=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(x){return void 0===x?this.localeData():this.locale(x)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Rt("gggg","weekYear"),Rt("ggggg","weekYear"),Rt("GGGG","isoWeekYear"),Rt("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),Z("G",Hn),Z("g",Hn),Z("GG",Kt,Tt),Z("gg",Kt,Tt),Z("GGGG",Nn,sn),Z("gggg",Nn,sn),Z("GGGGG",Un,hn),Z("ggggg",Un,hn),ye(["gggg","ggggg","GGGG","GGGGG"],function(x,ee,he,Ce){ee[Ce.substr(0,2)]=l(x)}),ye(["gg","GG"],function(x,ee,he,Ce){ee[Ce]=I.parseTwoDigitYear(x)}),U("Q",0,"Qo","quarter"),_("quarter","Q"),Z("Q",qt),te("Q",function(x,ee){ee[mr]=3*(l(x)-1)}),U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),Z("w",Kt),Z("ww",Kt,Tt),Z("W",Kt),Z("WW",Kt,Tt),ye(["w","ww","W","WW"],function(x,ee,he,Ce){ee[Ce.substr(0,1)]=l(x)}),U("D",["DD",2],"Do","date"),_("date","D"),Z("D",Kt),Z("DD",Kt,Tt),Z("Do",function(x,ee){return x?ee._ordinalParse:ee._ordinalParseLenient}),te(["D","DD"],gr),te("Do",function(x,ee){ee[gr]=l(x.match(Kt)[0])});var ni=R("Date",!0);U("d",0,"do","day"),U("dd",0,0,function(x){return this.localeData().weekdaysMin(this,x)}),U("ddd",0,0,function(x){return this.localeData().weekdaysShort(this,x)}),U("dddd",0,0,function(x){return this.localeData().weekdays(this,x)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),Z("d",Kt),Z("e",Kt),Z("E",Kt),Z("dd",Kr),Z("ddd",Kr),Z("dddd",Kr),ye(["dd","ddd","dddd"],function(x,ee,he,Ce){var Le=he._locale.weekdaysParse(x,Ce,he._strict);null!=Le?ee.d=Le:r(he).invalidWeekday=x}),ye(["d","e","E"],function(x,ee,he,Ce){ee[Ce]=l(x)});var Hr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ns="Su_Mo_Tu_We_Th_Fr_Sa".split("_");U("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),Z("DDD",Sn),Z("DDDD",At),te(["DDD","DDDD"],function(x,ee,he){he._dayOfYear=l(x)}),U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ft),U("hmm",0,0,function(){return""+Ft.apply(this)+Q(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ft.apply(this)+Q(this.minutes(),2)+Q(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+Q(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+Q(this.minutes(),2)+Q(this.seconds(),2)}),Qt("a",!0),Qt("A",!1),_("hour","h"),Z("a",Lt),Z("A",Lt),Z("H",Kt),Z("h",Kt),Z("HH",Kt,Tt),Z("hh",Kt,Tt),Z("hmm",dn),Z("hmmss",Rn),Z("Hmm",dn),Z("Hmmss",Rn),te(["H","HH"],Fn),te(["a","A"],function(x,ee,he){he._isPm=he._locale.isPM(x),he._meridiem=x}),te(["h","hh"],function(x,ee,he){ee[Fn]=l(x),r(he).bigHour=!0}),te("hmm",function(x,ee,he){var Ce=x.length-2;ee[Fn]=l(x.substr(0,Ce)),ee[lr]=l(x.substr(Ce)),r(he).bigHour=!0}),te("hmmss",function(x,ee,he){var Ce=x.length-4,Le=x.length-2;ee[Fn]=l(x.substr(0,Ce)),ee[lr]=l(x.substr(Ce,2)),ee[wr]=l(x.substr(Le)),r(he).bigHour=!0}),te("Hmm",function(x,ee,he){var Ce=x.length-2;ee[Fn]=l(x.substr(0,Ce)),ee[lr]=l(x.substr(Ce))}),te("Hmmss",function(x,ee,he){var Ce=x.length-4,Le=x.length-2;ee[Fn]=l(x.substr(0,Ce)),ee[lr]=l(x.substr(Ce,2)),ee[wr]=l(x.substr(Le))});var Nr=R("Hours",!0);U("m",["mm",2],0,"minute"),_("minute","m"),Z("m",Kt),Z("mm",Kt,Tt),te(["m","mm"],lr);var qn=R("Minutes",!1);U("s",["ss",2],0,"second"),_("second","s"),Z("s",Kt),Z("ss",Kt,Tt),te(["s","ss"],wr);var Kn,Hi=R("Seconds",!1);for(U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),_("millisecond","ms"),Z("S",Sn,qt),Z("SS",Sn,Tt),Z("SSS",Sn,At),Kn="SSSS";Kn.length<=9;Kn+="S")Z(Kn,Xn);for(Kn="S";Kn.length<=9;Kn+="S")te(Kn,Ut);var vr=R("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var dt=c.prototype;dt.add=Ci,dt.calendar=function(x,ee){var he=x||Yt(),Ce=ve(he,this).startOf("day"),Le=this.diff(Ce,"days",!0),He=Le<-6?"sameElse":Le<-1?"lastWeek":Le<0?"lastDay":Le<1?"sameDay":Le<2?"nextDay":Le<7?"nextWeek":"sameElse",Qe=ee&&(m(ee[He])?ee[He]():ee[He]);return this.format(Qe||this.localeData().calendar(He,this,Yt(he)))},dt.clone=function(){return new c(this)},dt.diff=function(x,ee,he){var Ce,Le,He,Qe,vt,Dt,$n,jn;return this.isValid()&&(Ce=ve(x,this)).isValid()?(Le=6e4*(Ce.utcOffset()-this.utcOffset()),"year"===(ee=E(ee))||"month"===ee||"quarter"===ee?(vt=this,Qe=-(($n=12*((Dt=Ce).year()-vt.year())+(Dt.month()-vt.month()))+(Dt-(jn=vt.clone().add($n,"months"))<0?(Dt-jn)/(jn-vt.clone().add($n-1,"months")):(Dt-jn)/(vt.clone().add($n+1,"months")-jn))),"quarter"===ee?Qe/=3:"year"===ee&&(Qe/=12)):(He=this-Ce,Qe="second"===ee?He/1e3:"minute"===ee?He/6e4:"hour"===ee?He/36e5:"day"===ee?(He-Le)/864e5:"week"===ee?(He-Le)/6048e5:He),he?Qe:o(Qe)):NaN},dt.endOf=function(x){return void 0===(x=E(x))||"millisecond"===x?this:this.startOf(x).add(1,"isoWeek"===x?"week":x).subtract(1,"ms")},dt.format=function(x){var ee=D(this,x||I.defaultFormat);return this.localeData().postformat(ee)},dt.from=function(x,ee){return this.isValid()&&(u(x)&&x.isValid()||Yt(x).isValid())?Ae({to:this,from:x}).locale(this.locale()).humanize(!ee):this.localeData().invalidDate()},dt.fromNow=function(x){return this.from(Yt(),x)},dt.to=function(x,ee){return this.isValid()&&(u(x)&&x.isValid()||Yt(x).isValid())?Ae({from:this,to:x}).locale(this.locale()).humanize(!ee):this.localeData().invalidDate()},dt.toNow=function(x){return this.to(Yt(),x)},dt.get=J,dt.invalidAt=function(){return r(this).overflow},dt.isAfter=function(x,ee){var he=u(x)?x:Yt(x);return!(!this.isValid()||!he.isValid())&&("millisecond"===(ee=E(s(ee)?"millisecond":ee))?+he<+this:+he<+this.clone().startOf(ee))},dt.isBefore=function(x,ee){var he=u(x)?x:Yt(x);return!(!this.isValid()||!he.isValid())&&("millisecond"===(ee=E(s(ee)?"millisecond":ee))?+this<+he:+this.clone().endOf(ee)<+he)},dt.isBetween=function(x,ee,he){return this.isAfter(x,he)&&this.isBefore(ee,he)},dt.isSame=function(x,ee){var he,Ce=u(x)?x:Yt(x);return!(!this.isValid()||!Ce.isValid())&&("millisecond"===(ee=E(ee||"millisecond"))?+this==+Ce:(he=+Ce,+this.clone().startOf(ee)<=he&&he<=+this.clone().endOf(ee)))},dt.isSameOrAfter=function(x,ee){return this.isSame(x,ee)||this.isAfter(x,ee)},dt.isSameOrBefore=function(x,ee){return this.isSame(x,ee)||this.isBefore(x,ee)},dt.isValid=function(){return p(this)},dt.lang=ti,dt.locale=It,dt.localeData=gt,dt.max=Fi,dt.min=fi,dt.parsingFlags=function(){return h({},r(this))},dt.set=J,dt.startOf=function(x){switch(x=E(x)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===x&&this.weekday(0),"isoWeek"===x&&this.isoWeekday(1),"quarter"===x&&this.month(3*Math.floor(this.month()/3)),this},dt.subtract=Ui,dt.toArray=function(){var x=this;return[x.year(),x.month(),x.date(),x.hour(),x.minute(),x.second(),x.millisecond()]},dt.toObject=function(){var x=this;return{years:x.year(),months:x.month(),date:x.date(),hours:x.hours(),minutes:x.minutes(),seconds:x.seconds(),milliseconds:x.milliseconds()}},dt.toDate=function(){return this._offset?new Date(+this):this._d},dt.toISOString=function(){var x=this.clone().utc();return 0<x.year()&&x.year()<=9999?m(Date.prototype.toISOString)?this.toDate().toISOString():D(x,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):D(x,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},dt.toJSON=function(){return this.isValid()?this.toISOString():"null"},dt.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},dt.unix=function(){return Math.floor(+this/1e3)},dt.valueOf=function(){return+this._d-6e4*(this._offset||0)},dt.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},dt.year=qr,dt.isLeapYear=function(){return Me(this.year())},dt.weekYear=function(x){return Xt.call(this,x,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},dt.isoWeekYear=function(x){return Xt.call(this,x,this.isoWeek(),this.isoWeekday(),1,4)},dt.quarter=dt.quarters=function(x){return null==x?Math.ceil((this.month()+1)/3):this.month(3*(x-1)+this.month()%3)},dt.month=Y,dt.daysInMonth=function(){return Ee(this.year(),this.month())},dt.week=dt.weeks=function(x){var ee=this.localeData().week(this);return null==x?ee:this.add(7*(x-ee),"d")},dt.isoWeek=dt.isoWeeks=function(x){var ee=Fe(this,1,4).week;return null==x?ee:this.add(7*(x-ee),"d")},dt.weeksInYear=function(){var x=this.localeData()._week;return qe(this.year(),x.dow,x.doy)},dt.isoWeeksInYear=function(){return qe(this.year(),1,4)},dt.date=ni,dt.day=dt.days=function(x){if(!this.isValid())return null!=x?this:NaN;var he,Ce,ee=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=x?(he=x,Ce=this.localeData(),x="string"!=typeof he?he:isNaN(he)?"number"==typeof(he=Ce.weekdaysParse(he))?he:null:parseInt(he,10),this.add(x-ee,"d")):ee},dt.weekday=function(x){if(!this.isValid())return null!=x?this:NaN;var ee=(this.day()+7-this.localeData()._week.dow)%7;return null==x?ee:this.add(x-ee,"d")},dt.isoWeekday=function(x){return this.isValid()?null==x?this.day()||7:this.day(this.day()%7?x:x-7):null!=x?this:NaN},dt.dayOfYear=function(x){var ee=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==x?ee:this.add(x-ee,"d")},dt.hour=dt.hours=Nr,dt.minute=dt.minutes=qn,dt.second=dt.seconds=Hi,dt.millisecond=dt.milliseconds=vr,dt.utcOffset=function(x,ee){var he,Ce=this._offset||0;return this.isValid()?null!=x?("string"==typeof x?x=pe(ci,x):Math.abs(x)<16&&(x*=60),!this._isUTC&&ee&&(he=K(this)),this._offset=x,this._isUTC=!0,null!=he&&this.add(he,"m"),Ce!==x&&(!ee||this._changeInProgress?bt(this,Ae(x-Ce,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,I.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?Ce:K(this):null!=x?this:NaN},dt.utc=function(x){return this.utcOffset(0,x)},dt.local=function(x){return this._isUTC&&(this.utcOffset(0,x),this._isUTC=!1,x&&this.subtract(K(this),"m")),this},dt.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(pe(Qn,this._i)),this},dt.hasAlignedHourOffset=function(x){return!!this.isValid()&&(x=x?Yt(x).utcOffset():0,(this.utcOffset()-x)%60==0)},dt.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},dt.isDSTShifted=function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var x={};if(t(x,this),(x=kt(x))._a){var ee=x._isUTC?a(x._a):Yt(x._a);this._isDSTShifted=this.isValid()&&0<f(x._a,ee.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},dt.isLocal=function(){return!!this.isValid()&&!this._isUTC},dt.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},dt.isUtc=oe,dt.isUTC=oe,dt.zoneAbbr=function(){return this._isUTC?"UTC":""},dt.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},dt.dates=X("dates accessor is deprecated. Use date instead.",ni),dt.months=X("months accessor is deprecated. Use month instead",Y),dt.years=X("years accessor is deprecated. Use year instead",qr),dt.zone=X("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(x,ee){return null!=x?("string"!=typeof x&&(x=-x),this.utcOffset(x,ee),this):-this.utcOffset()});var Si=dt,fn=w.prototype;fn._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},fn.calendar=function(x,ee,he){var Ce=this._calendar[x];return m(Ce)?Ce.call(ee,he):Ce},fn._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},fn.longDateFormat=function(x){var ee=this._longDateFormat[x],he=this._longDateFormat[x.toUpperCase()];return ee||!he?ee:(this._longDateFormat[x]=he.replace(/MMMM|MM|DD|dddd/g,function(Ce){return Ce.slice(1)}),this._longDateFormat[x])},fn._invalidDate="Invalid date",fn.invalidDate=function(){return this._invalidDate},fn._ordinal="%d",fn.ordinal=function(x){return this._ordinal.replace("%d",x)},fn._ordinalParse=/\d{1,2}/,fn.preparse=$t,fn.postformat=$t,fn._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},fn.relativeTime=function(x,ee,he,Ce){var Le=this._relativeTime[he];return m(Le)?Le(x,ee,he,Ce):Le.replace(/%d/i,x)},fn.pastFuture=function(x,ee){var he=this._relativeTime[0<x?"future":"past"];return m(he)?he(ee):he.replace(/%s/i,ee)},fn.set=function(x){var ee,he;for(he in x)m(ee=x[he])?this[he]=ee:this["_"+he]=ee;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},fn.months=function(x,ee){return P(this._months)?this._months[x.month()]:this._months[hi.test(ee)?"format":"standalone"][x.month()]},fn._months=Di,fn.monthsShort=function(x,ee){return P(this._monthsShort)?this._monthsShort[x.month()]:this._monthsShort[hi.test(ee)?"format":"standalone"][x.month()]},fn._monthsShort=bi,fn.monthsParse=function(x,ee,he){var Ce,Le,He;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Ce=0;Ce<12;Ce++)if(Le=a([2e3,Ce]),he&&!this._longMonthsParse[Ce]&&(this._longMonthsParse[Ce]=new RegExp("^"+this.months(Le,"").replace(".","")+"$","i"),this._shortMonthsParse[Ce]=new RegExp("^"+this.monthsShort(Le,"").replace(".","")+"$","i")),he||this._monthsParse[Ce]||(He="^"+this.months(Le,"")+"|^"+this.monthsShort(Le,""),this._monthsParse[Ce]=new RegExp(He.replace(".",""),"i")),he&&"MMMM"===ee&&this._longMonthsParse[Ce].test(x)||he&&"MMM"===ee&&this._shortMonthsParse[Ce].test(x)||!he&&this._monthsParse[Ce].test(x))return Ce},fn._monthsRegex=Pi,fn.monthsRegex=function(x){return this._monthsParseExact?(g(this,"_monthsRegex")||z.call(this),x?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&x?this._monthsStrictRegex:this._monthsRegex},fn._monthsShortRegex=xi,fn.monthsShortRegex=function(x){return this._monthsParseExact?(g(this,"_monthsRegex")||z.call(this),x?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&x?this._monthsShortStrictRegex:this._monthsShortRegex},fn.week=function(x){return Fe(x,this._week.dow,this._week.doy).week},fn._week={dow:0,doy:6},fn.firstDayOfYear=function(){return this._week.doy},fn.firstDayOfWeek=function(){return this._week.dow},fn.weekdays=function(x,ee){return P(this._weekdays)?this._weekdays[x.day()]:this._weekdays[this._weekdays.isFormat.test(ee)?"format":"standalone"][x.day()]},fn._weekdays=Hr,fn.weekdaysMin=function(x){return this._weekdaysMin[x.day()]},fn._weekdaysMin=ns,fn.weekdaysShort=function(x){return this._weekdaysShort[x.day()]},fn._weekdaysShort=Bi,fn.weekdaysParse=function(x,ee,he){var Ce,Le,He;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Ce=0;Ce<7;Ce++)if(Le=Yt([2e3,1]).day(Ce),he&&!this._fullWeekdaysParse[Ce]&&(this._fullWeekdaysParse[Ce]=new RegExp("^"+this.weekdays(Le,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[Ce]=new RegExp("^"+this.weekdaysShort(Le,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[Ce]=new RegExp("^"+this.weekdaysMin(Le,"").replace(".",".?")+"$","i")),this._weekdaysParse[Ce]||(He="^"+this.weekdays(Le,"")+"|^"+this.weekdaysShort(Le,"")+"|^"+this.weekdaysMin(Le,""),this._weekdaysParse[Ce]=new RegExp(He.replace(".",""),"i")),he&&"dddd"===ee&&this._fullWeekdaysParse[Ce].test(x)||he&&"ddd"===ee&&this._shortWeekdaysParse[Ce].test(x)||he&&"dd"===ee&&this._minWeekdaysParse[Ce].test(x)||!he&&this._weekdaysParse[Ce].test(x))return Ce},fn.isPM=function(x){return"p"===(x+"").toLowerCase().charAt(0)},fn._meridiemParse=/[ap]\.?m?\.?/i,fn.meridiem=function(x,ee,he){return 11<x?he?"pm":"PM":he?"am":"AM"},M("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(x){var ee=x%10;return x+(1===l(x%100/10)?"th":1===ee?"st":2===ee?"nd":3===ee?"rd":"th")}}),I.lang=X("moment.lang is deprecated. Use moment.locale instead.",M),I.langData=X("moment.langData is deprecated. Use moment.localeData instead.",A);var Cr=Math.abs,ri=Je("ms"),rs=Je("s"),di=Je("m"),Vr=Je("h"),pi=Je("d"),Ei=Je("w"),Vi=Je("M"),zi=Je("y"),is=at("milliseconds"),Ar=at("seconds"),Wi=at("minutes"),ss=at("hours"),os=at("days"),Mr=at("months"),yr=at("years"),Fr=Math.round,Dr={s:45,m:45,h:22,d:26,M:11},$i=Math.abs,kn=Yn.prototype;return kn.abs=function(){var x=this._data;return this._milliseconds=Cr(this._milliseconds),this._days=Cr(this._days),this._months=Cr(this._months),x.milliseconds=Cr(x.milliseconds),x.seconds=Cr(x.seconds),x.minutes=Cr(x.minutes),x.hours=Cr(x.hours),x.months=Cr(x.months),x.years=Cr(x.years),this},kn.add=function(x,ee){return _t(this,x,ee,1)},kn.subtract=function(x,ee){return _t(this,x,ee,-1)},kn.as=function(x){var ee,he,Ce=this._milliseconds;if("month"===(x=E(x))||"year"===x)return he=this._months+Ct(ee=this._days+Ce/864e5),"month"===x?he:he/12;switch(ee=this._days+Math.round(We(this._months)),x){case"week":return ee/7+Ce/6048e5;case"day":return ee+Ce/864e5;case"hour":return 24*ee+Ce/36e5;case"minute":return 1440*ee+Ce/6e4;case"second":return 86400*ee+Ce/1e3;case"millisecond":return Math.floor(864e5*ee)+Ce;default:throw new Error("Unknown unit "+x)}},kn.asMilliseconds=ri,kn.asSeconds=rs,kn.asMinutes=di,kn.asHours=Vr,kn.asDays=pi,kn.asWeeks=Ei,kn.asMonths=Vi,kn.asYears=zi,kn.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*l(this._months/12)},kn._bubble=function(){var x,ee,he,Ce,Le,He=this._milliseconds,Qe=this._days,vt=this._months,Dt=this._data;return 0<=He&&0<=Qe&&0<=vt||He<=0&&Qe<=0&&vt<=0||(He+=864e5*en(We(vt)+Qe),vt=Qe=0),Dt.milliseconds=He%1e3,x=o(He/1e3),Dt.seconds=x%60,ee=o(x/60),Dt.minutes=ee%60,he=o(ee/60),Dt.hours=he%24,vt+=Le=o(Ct(Qe+=o(he/24))),Qe-=en(We(Le)),Ce=o(vt/12),vt%=12,Dt.days=Qe,Dt.months=vt,Dt.years=Ce,this},kn.get=function(x){return this[(x=E(x))+"s"]()},kn.milliseconds=is,kn.seconds=Ar,kn.minutes=Wi,kn.hours=ss,kn.days=os,kn.weeks=function(){return o(this.days()/7)},kn.months=Mr,kn.years=yr,kn.humanize=function(x){var Le,He,Qe,vt,Dt,rn,vn,$n,jn,Tn,ee=this.localeData(),he=(Le=!x,He=ee,Qe=Ae(this).abs(),vt=Fr(Qe.as("s")),Dt=Fr(Qe.as("m")),rn=Fr(Qe.as("h")),vn=Fr(Qe.as("d")),$n=Fr(Qe.as("M")),jn=Fr(Qe.as("y")),(Tn=vt<Dr.s&&["s",vt]||Dt<=1&&["m"]||Dt<Dr.m&&["mm",Dt]||rn<=1&&["h"]||rn<Dr.h&&["hh",rn]||vn<=1&&["d"]||vn<Dr.d&&["dd",vn]||$n<=1&&["M"]||$n<Dr.M&&["MM",$n]||jn<=1&&["y"]||["yy",jn])[2]=Le,Tn[3]=0<+this,Tn[4]=He,function(Or,Gi,as,zr,mi){return mi.relativeTime(Gi||1,!!as,Or,zr)}.apply(null,Tn));return x&&(he=ee.pastFuture(+this,he)),ee.postformat(he)},kn.toISOString=it,kn.toString=it,kn.toJSON=it,kn.locale=It,kn.localeData=gt,kn.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",it),kn.lang=ti,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Hn),Z("X",/[+-]?\d+(\.\d{1,3})?/),te("X",function(x,ee,he){he._d=new Date(1e3*parseFloat(x,10))}),te("x",function(x,ee,he){he._d=new Date(l(x))}),I.version="2.11.1",ut=Yt,I.fn=Si,I.min=function(){return Ln("isBefore",[].slice.call(arguments,0))},I.max=function(){return Ln("isAfter",[].slice.call(arguments,0))},I.now=function(){return Date.now?Date.now():+new Date},I.utc=a,I.unix=function(x){return Yt(1e3*x)},I.months=function(x,ee){return Et(x,ee,"months",12,"month")},I.isDate=G,I.locale=M,I.invalid=n,I.duration=Ae,I.isMoment=u,I.weekdays=function(x,ee){return Et(x,ee,"weekdays",7,"day")},I.parseZone=function(){return Yt.apply(null,arguments).parseZone()},I.localeData=A,I.isDuration=Zn,I.monthsShort=function(x,ee){return Et(x,ee,"monthsShort",12,"month")},I.weekdaysMin=function(x,ee){return Et(x,ee,"weekdaysMin",7,"day")},I.defineLocale=b,I.weekdaysShort=function(x,ee){return Et(x,ee,"weekdaysShort",7,"day")},I.normalizeUnits=E,I.relativeTimeThreshold=function(x,ee){return void 0!==Dr[x]&&(void 0===ee?Dr[x]:(Dr[x]=ee,!0))},I.prototype=Si,I}),function(I,P){"object"==(typeof exports>"u"?"undefined":_typeof(exports))&&"object"==(typeof module>"u"?"undefined":_typeof(module))?module.exports=P():"function"==typeof define&&define.amd?define([],P):"object"==(typeof exports>"u"?"undefined":_typeof(exports))?exports.Pusher=P():I.Pusher=P()}(this,function(){return function(I){function P(e){if(G[e])return G[e].exports;var g=G[e]={exports:{},id:e,loaded:!1};return I[e].call(g.exports,g,g.exports,P),g.loaded=!0,g.exports}var G={};return P.m=I,P.c=G,P.p="",P(0)}([function(I,P,G){"use strict";var e=G(1);I.exports=e.default},function(I,P,G){"use strict";var e=G(2),g=G(9),h=G(24),a=G(39),r=G(40),p=G(41),n=G(12),s=G(5),t=G(71),c=G(8),u=G(43),o=G(14),l=function(){function f(w,k){var O=this;if(function(b){if(null==b)throw"You must pass your app key when you instantiate Pusher."}(w),!(k=k||{}).cluster&&!k.wsHost&&!k.httpHost){var M=o.default.buildLogSuffix("javascriptQuickStart");c.default.warn("You should always specify a cluster when connecting. "+M)}this.key=w,this.config=g.extend(t.getGlobalConfig(),k.cluster?t.getClusterConfig(k.cluster):{},k),this.channels=u.default.createChannels(),this.global_emitter=new h.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.default(this.key,this.sessionID,{cluster:this.config.cluster,features:f.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:r.default.INFO,version:s.default.VERSION}),this.config.disableStats||(this.timelineSender=u.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+e.default.TimelineTransport.name})),this.connection=u.default.createConnectionManager(this.key,g.extend({getStrategy:function(b){var A=g.extend({},O.config,b);return p.build(e.default.getDefaultStrategy(A),A)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",function(){O.subscribeAll(),O.timelineSender&&O.timelineSender.send(O.connection.isUsingTLS())}),this.connection.bind("message",function(b){var A=0===b.event.indexOf("pusher_internal:");if(b.channel){var _=O.channel(b.channel);_&&_.handleEvent(b.event,b.data)}A||O.global_emitter.emit(b.event,b.data)}),this.connection.bind("connecting",function(){O.channels.disconnect()}),this.connection.bind("disconnected",function(){O.channels.disconnect()}),this.connection.bind("error",function(b){c.default.warn("Error",b)}),f.instances.push(this),this.timeline.info({instances:f.instances.length}),f.isReady&&this.connect()}return f.ready=function(){f.isReady=!0;for(var w=0,k=f.instances.length;w<k;w++)f.instances[w].connect()},f.log=function(w){f.logToConsole&&window.console&&window.console.log&&window.console.log(w)},f.getClientFeatures=function(){return g.keys(g.filterObject({ws:e.default.Transports.ws},function(w){return w.isSupported({})}))},f.prototype.channel=function(w){return this.channels.find(w)},f.prototype.allChannels=function(){return this.channels.all()},f.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var w=this.connection.isUsingTLS(),k=this.timelineSender;this.timelineSenderTimer=new n.PeriodicTimer(6e4,function(){k.send(w)})}},f.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},f.prototype.bind=function(w,k,O){return this.global_emitter.bind(w,k,O),this},f.prototype.unbind=function(w,k,O){return this.global_emitter.unbind(w,k,O),this},f.prototype.bind_global=function(w){return this.global_emitter.bind_global(w),this},f.prototype.unbind_global=function(w){return this.global_emitter.unbind_global(w),this},f.prototype.unbind_all=function(w){return this.global_emitter.unbind_all(),this},f.prototype.subscribeAll=function(){var w;for(w in this.channels.channels)this.channels.channels.hasOwnProperty(w)&&this.subscribe(w)},f.prototype.subscribe=function(w){var k=this.channels.add(w,this);return k.subscriptionPending&&k.subscriptionCancelled?k.reinstateSubscription():k.subscriptionPending||"connected"!==this.connection.state||k.subscribe(),k},f.prototype.unsubscribe=function(w){var k=this.channels.find(w);k&&k.subscriptionPending?k.cancelSubscription():(k=this.channels.remove(w))&&"connected"===this.connection.state&&k.unsubscribe()},f.prototype.send_event=function(w,k,O){return this.connection.send_event(w,k,O)},f.prototype.shouldUseTLS=function(){return"https:"===e.default.getProtocol()||!0===this.config.forceTLS||Boolean(this.config.encrypted)},f.instances=[],f.isReady=!1,f.logToConsole=!1,f.Runtime=e.default,f.ScriptReceivers=e.default.ScriptReceivers,f.DependenciesReceivers=e.default.DependenciesReceivers,f.auth_callbacks=e.default.auth_callbacks,f}();P.__esModule=!0,P.default=l,e.default.setup(l)},function(I,P,G){"use strict";var e=G(3),g=G(7),h=G(15),a=G(16),r=G(17),p=G(4),n=G(18),s=G(19),t=G(26),c=G(27),u=G(28),o=G(29),l={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:p.ScriptReceivers,DependenciesReceivers:e.DependenciesReceivers,getDefaultStrategy:c.default,Transports:s.default,transportConnectionInitializer:u.default,HTTPFactory:o.default,TimelineTransport:n.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(f){var w=this;window.Pusher=f;var k=function(){w.onDocumentBody(f.ready)};window.JSON?k():e.Dependencies.load("json2",{},k)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:g.default,jsonp:h.default}},onDocumentBody:function(f){var w=this;document.body?f():setTimeout(function(){w.onDocumentBody(f)},0)},createJSONPRequest:function(f,w){return new r.default(f,w)},createScriptRequest:function(f){return new a.default(f)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return t.Network},createWebSocket:function(f){return new(this.getWebSocketAPI())(f)},createSocketRequest:function(f,w){if(this.isXHRSupported())return this.HTTPFactory.createXHR(f,w);if(this.isXDRSupported(0===w.indexOf("https:")))return this.HTTPFactory.createXDR(f,w);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var f=this.getXHRAPI();return Boolean(f)&&void 0!==(new f).withCredentials},isXDRSupported:function(f){var w=f?"https:":"http:",k=this.getProtocol();return Boolean(window.XDomainRequest)&&k===w},addUnloadListener:function(f){void 0!==window.addEventListener?window.addEventListener("unload",f,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",f)},removeUnloadListener:function(f){void 0!==window.addEventListener?window.removeEventListener("unload",f,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",f)}};P.__esModule=!0,P.default=l},function(I,P,G){"use strict";var e=G(4),g=G(5),h=G(6);P.DependenciesReceivers=new e.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),P.Dependencies=new h.default({cdn_http:g.default.cdn_http,cdn_https:g.default.cdn_https,version:g.default.VERSION,suffix:g.default.dependency_suffix,receivers:P.DependenciesReceivers})},function(I,P){"use strict";var G=function(){function e(g,h){this.lastId=0,this.prefix=g,this.name=h}return e.prototype.create=function(g){this.lastId++;var h=this.lastId,p=!1;return{number:h,id:this.prefix+h,name:this.name+"["+h+"]",callback:this[h]=function(){p||(g.apply(null,arguments),p=!0)}}},e.prototype.remove=function(g){delete this[g.number]},e}();P.ScriptReceiverFactory=G,P.ScriptReceivers=new G("_pusher_script_","Pusher.ScriptReceivers")},function(I,P){"use strict";P.__esModule=!0,P.default={VERSION:"4.3.1",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:".min"}},function(I,P,G){"use strict";var e=G(4),g=G(2),h=function(){function a(r){this.options=r,this.receivers=r.receivers||e.ScriptReceivers,this.loading={}}return a.prototype.load=function(r,p,n){var s=this;if(s.loading[r]&&0<s.loading[r].length)s.loading[r].push(n);else{s.loading[r]=[n];var t=g.default.createScriptRequest(s.getPath(r,p)),c=s.receivers.create(function(u){if(s.receivers.remove(c),s.loading[r]){var o=s.loading[r];delete s.loading[r];for(var l=function(w){w||t.cleanup()},f=0;f<o.length;f++)o[f](u,l)}});t.send(c)}},a.prototype.getRoot=function(r){var p=g.default.getDocument().location.protocol;return(r&&r.useTLS||"https:"===p?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},a.prototype.getPath=function(r,p){return this.getRoot(p)+"/"+r+this.options.suffix+".js"},a}();P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=G(8),g=G(2),h=G(14);P.__esModule=!0,P.default=function(a,r,p){var n;for(var s in(n=g.default.createXHR()).open("POST",this.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)n.setRequestHeader(s,this.authOptions.headers[s]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t,c=!1;try{t=JSON.parse(n.responseText),c=!0}catch{p(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}c&&p(!1,t)}else{var u=h.default.buildLogSuffix("authenticationEndpoint");e.default.warn("Couldn't retrieve authentication info. "+n.status+"Clients must be authenticated to join private or presence channels. "+u),p(!0,n.status)}},n.send(this.composeQuery(r)),n}},function(I,P,G){"use strict";var e=G(9),g=G(1),h={debug:function(){for(var a=[],r=0;r<arguments.length;r++)a[r-0]=arguments[r];g.default.log&&g.default.log(e.stringify.apply(this,arguments))},warn:function(){for(var a=[],r=0;r<arguments.length;r++)a[r-0]=arguments[r];var p=e.stringify.apply(this,arguments);g.default.log?g.default.log(p):window.console&&(window.console.warn?window.console.warn(p):window.console.log&&window.console.log(p))}};P.__esModule=!0,P.default=h},function(I,P,G){"use strict";function e(u,o){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&o(u[l],l,u)}function g(u,o){for(var l=[],f=0;f<u.length;f++)l.push(o(u[f],f,u,l));return l}function h(u,o){var l={};return e(u,function(f,w){l[w]=o(f)}),l}function a(u,o){var l={};return e(u,function(f,w){(o&&o(f,w,u,l)||Boolean(f))&&(l[w]=f)}),l}function r(u){var o=[];return e(u,function(l,f){o.push([f,l])}),o}function p(u){return h(u,function(o){return"object"==_typeof(o)&&(o=s(o)),encodeURIComponent(t.default(o.toString()))})}function n(u){var o=[],l=[];return function f(w,k){var O,M,b;switch(_typeof(w)){case"object":if(!w)return null;for(O=0;O<o.length;O+=1)if(o[O]===w)return{$ref:l[O]};if(o.push(w),l.push(k),"[object Array]"===Object.prototype.toString.apply(w))for(b=[],O=0;O<w.length;O+=1)b[O]=f(w[O],k+"["+O+"]");else for(M in b={},w)Object.prototype.hasOwnProperty.call(w,M)&&(b[M]=f(w[M],k+"["+JSON.stringify(M)+"]"));return b;case"number":case"string":case"boolean":return w}}(u,"$")}function s(u){try{return JSON.stringify(u)}catch{return JSON.stringify(n(u))}}var t=G(10),c=G(11);P.extend=function u(o){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];for(var w=0;w<l.length;w++){var k=l[w];for(var O in k)o[O]=k[O]&&k[O].constructor&&k[O].constructor===Object?u(o[O]||{},k[O]):k[O]}return o},P.stringify=function(){for(var u=["Pusher"],o=0;o<arguments.length;o++)u.push("string"==typeof arguments[o]?arguments[o]:s(arguments[o]));return u.join(" : ")},P.arrayIndexOf=function(u,o){var l=Array.prototype.indexOf;if(null===u)return-1;if(l&&u.indexOf===l)return u.indexOf(o);for(var f=0,w=u.length;f<w;f++)if(u[f]===o)return f;return-1},P.objectApply=e,P.keys=function(u){var o=[];return e(u,function(l,f){o.push(f)}),o},P.values=function(u){var o=[];return e(u,function(l){o.push(l)}),o},P.apply=function(u,o,l){for(var f=0;f<u.length;f++)o.call(l||window,u[f],f,u)},P.map=g,P.mapObject=h,P.filter=function(u,o){o=o||function(w){return!!w};for(var l=[],f=0;f<u.length;f++)o(u[f],f,u,l)&&l.push(u[f]);return l},P.filterObject=a,P.flatten=r,P.any=function(u,o){for(var l=0;l<u.length;l++)if(o(u[l],l,u))return!0;return!1},P.all=function(u,o){for(var l=0;l<u.length;l++)if(!o(u[l],l,u))return!1;return!0},P.encodeParamsObject=p,P.buildQueryString=function(u){return g(r(p(a(u,function(o){return void 0!==o}))),c.default.method("join","=")).join("&")},P.decycleObject=n,P.safeJSONStringify=s},function(I,P,G){"use strict";P.__esModule=!0,P.default=function(c){return t(n(c))};for(var e=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h={},a=0,r=g.length;a<r;a++)h[g.charAt(a)]=a;var p=function(c){var u=c.charCodeAt(0);return u<128?c:u<2048?e(192|u>>>6)+e(128|63&u):e(224|u>>>12&15)+e(128|u>>>6&63)+e(128|63&u)},n=function(c){return c.replace(/[^\x00-\x7F]/g,p)},s=function(c){var u=[0,2,1][c.length%3],o=c.charCodeAt(0)<<16|(1<c.length?c.charCodeAt(1):0)<<8|(2<c.length?c.charCodeAt(2):0);return[g.charAt(o>>>18),g.charAt(o>>>12&63),2<=u?"=":g.charAt(o>>>6&63),1<=u?"=":g.charAt(63&o)].join("")},t=window.btoa||function(c){return c.replace(/[\s\S]{1,3}/g,s)}},function(I,P,G){"use strict";var e=G(12),g={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(h){return new e.OneOffTimer(0,h)},method:function(h){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];var p=Array.prototype.slice.call(arguments,1);return function(n){return n[h].apply(n,p.concat(arguments))}}};P.__esModule=!0,P.default=g},function(I,P,G){"use strict";function e(n){window.clearTimeout(n)}function g(n){window.clearInterval(n)}var h=this&&this.__extends||function(n,s){function t(){this.constructor=n}for(var c in s)s.hasOwnProperty(c)&&(n[c]=s[c]);n.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)},a=G(13),r=function(n){function s(t,c){n.call(this,setTimeout,e,t,function(u){return c(),null})}return h(s,n),s}(a.default);P.OneOffTimer=r;var p=function(n){function s(t,c){n.call(this,setInterval,g,t,function(u){return c(),u})}return h(s,n),s}(a.default);P.PeriodicTimer=p},function(I,P){"use strict";var G=function(){function e(g,h,a,r){var p=this;this.clear=h,this.timer=g(function(){p.timer&&(p.timer=r(p.timer))},a)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}();P.__esModule=!0,P.default=G},function(I,P){"use strict";var G={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"}}};P.__esModule=!0,P.default={buildLogSuffix:function(e){var g,h=G.urls[e];return h?(h.fullUrl?g=h.fullUrl:h.path&&(g=G.baseUrl+h.path),g?"See: "+g:""):""}}},function(I,P,G){"use strict";var e=G(8);P.__esModule=!0,P.default=function(g,h,a){void 0!==this.authOptions.headers&&e.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=g.nextAuthCallbackID.toString();g.nextAuthCallbackID++;var p=g.getDocument(),n=p.createElement("script");g.auth_callbacks[r]=function(c){a(!1,c)},n.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+r+"']")+"&"+this.composeQuery(h);var t=p.getElementsByTagName("head")[0]||p.documentElement;t.insertBefore(n,t.firstChild)}},function(I,P){"use strict";var G=function(){function e(g){this.src=g}return e.prototype.send=function(g){var h=this,a="Error loading "+h.src;h.script=document.createElement("script"),h.script.id=g.id,h.script.src=h.src,h.script.type="text/javascript",h.script.charset="UTF-8",h.script.addEventListener?(h.script.onerror=function(){g.callback(a)},h.script.onload=function(){g.callback(null)}):h.script.onreadystatechange=function(){"loaded"!==h.script.readyState&&"complete"!==h.script.readyState||g.callback(null)},void 0===h.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(h.errorScript=document.createElement("script"),h.errorScript.id=g.id+"_error",h.errorScript.text=g.name+"('"+a+"');",h.script.async=h.errorScript.async=!1):h.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(h.script,r.firstChild),h.errorScript&&r.insertBefore(h.errorScript,h.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}();P.__esModule=!0,P.default=G},function(I,P,G){"use strict";var e=G(9),g=G(2),h=function(){function a(r,p){this.url=r,this.data=p}return a.prototype.send=function(r){if(!this.request){var p=e.buildQueryString(this.data);this.request=g.default.createScriptRequest(this.url+"/"+r.number+"?"+p),this.request.send(r)}},a.prototype.cleanup=function(){this.request&&this.request.cleanup()},a}();P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=G(2),g=G(4),h={name:"jsonp",getAgent:function(a,r){return function(p,n){var t=e.default.createJSONPRequest("http"+(r?"s":"")+"://"+(a.host||a.options.host)+a.options.path,p),c=e.default.ScriptReceivers.create(function(u,o){g.ScriptReceivers.remove(c),t.cleanup(),o&&o.host&&(a.host=o.host),n&&n(u,o)});t.send(c)}}};P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=G(20),g=G(22),h=G(21),a=G(2),r=G(3),p=G(9),n=new g.default({file:"sockjs",urls:h.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(u,o){return new window.SockJS(u,null,{js_path:r.Dependencies.getPath("sockjs",{useTLS:o.useTLS}),ignore_null_origin:o.ignoreNullOrigin})},beforeOpen:function(u,o){u.send(JSON.stringify({path:o}))}}),s={isSupported:function(u){return a.default.isXDRSupported(u.useTLS)}},t=new g.default(p.extend({},e.streamingConfiguration,s)),c=new g.default(p.extend({},e.pollingConfiguration,s));e.default.xdr_streaming=t,e.default.xdr_polling=c,e.default.sockjs=n,P.__esModule=!0,P.default=e.default},function(I,P,G){"use strict";var e=G(21),g=G(22),h=G(9),a=G(2),r=new g.default({urls:e.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(a.default.getWebSocketAPI())},isSupported:function(){return Boolean(a.default.getWebSocketAPI())},getSocket:function(t){return a.default.createWebSocket(t)}}),p={urls:e.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};P.streamingConfiguration=h.extend({getSocket:function(t){return a.default.HTTPFactory.createStreamingSocket(t)}},p),P.pollingConfiguration=h.extend({getSocket:function(t){return a.default.HTTPFactory.createPollingSocket(t)}},p);var n={isSupported:function(){return a.default.isXHRSupported()}},s={ws:r,xhr_streaming:new g.default(h.extend({},P.streamingConfiguration,n)),xhr_polling:new g.default(h.extend({},P.pollingConfiguration,n))};P.__esModule=!0,P.default=s},function(I,P,G){"use strict";function e(a,r,p){return a+(r.useTLS?"s":"")+"://"+(r.useTLS?r.hostTLS:r.hostNonTLS)+p}function g(a,r){return"/app/"+a+"?protocol="+h.default.PROTOCOL+"&client=js&version="+h.default.VERSION+(r?"&"+r:"")}var h=G(5);P.ws={getInitial:function(a,r){return e("ws",r,(r.httpPath||"")+g(a,"flash=false"))}},P.http={getInitial:function(a,r){return e("http",r,(r.httpPath||"/pusher")+g(a))}},P.sockjs={getInitial:function(a,r){return e("http",r,r.httpPath||"/pusher")},getPath:function(a,r){return g(a)}}},function(I,P,G){"use strict";var e=G(23),g=function(){function h(a){this.hooks=a}return h.prototype.isSupported=function(a){return this.hooks.isSupported(a)},h.prototype.createConnection=function(a,r,p,n){return new e.default(this.hooks,a,r,p,n)},h}();P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=this&&this.__extends||function(s,t){function c(){this.constructor=s}for(var u in t)t.hasOwnProperty(u)&&(s[u]=t[u]);s.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)},g=G(11),h=G(9),a=G(24),r=G(8),p=G(2),n=function(s){function t(c,u,o,l,f){s.call(this),this.initialize=p.default.transportConnectionInitializer,this.hooks=c,this.name=u,this.priority=o,this.key=l,this.options=f,this.state="new",this.timeline=f.timeline,this.activityTimeout=f.activityTimeout,this.id=this.timeline.generateUniqueID()}return e(t,s),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var c=this;if(this.socket||"initialized"!==this.state)return!1;var u=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(u,this.options)}catch(o){return g.default.defer(function(){c.onError(o),c.changeState("closed")}),!1}return this.bindListeners(),r.default.debug("Connecting",{transport:this.name,url:u}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(c){var u=this;return"open"===this.state&&(g.default.defer(function(){u.socket&&u.socket.send(c)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(c){this.emit("error",{type:"WebSocketError",error:c}),this.timeline.error(this.buildTimelineMessage({error:c.toString()}))},t.prototype.onClose=function(c){c?this.changeState("closed",{code:c.code,reason:c.reason,wasClean:c.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(c){this.emit("message",c)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var c=this;this.socket.onopen=function(){c.onOpen()},this.socket.onerror=function(u){c.onError(u)},this.socket.onclose=function(u){c.onClose(u)},this.socket.onmessage=function(u){c.onMessage(u)},this.supportsPing()&&(this.socket.onactivity=function(){c.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(c,u){this.state=c,this.timeline.info(this.buildTimelineMessage({state:c,params:u})),this.emit(c,u)},t.prototype.buildTimelineMessage=function(c){return h.extend({cid:this.id},c)},t}(a.default);P.__esModule=!0,P.default=n},function(I,P,G){"use strict";var e=G(9),g=G(25),h=function(){function a(r){this.callbacks=new g.default,this.global_callbacks=[],this.failThrough=r}return a.prototype.bind=function(r,p,n){return this.callbacks.add(r,p,n),this},a.prototype.bind_global=function(r){return this.global_callbacks.push(r),this},a.prototype.unbind=function(r,p,n){return this.callbacks.remove(r,p,n),this},a.prototype.unbind_global=function(r){return this.global_callbacks=r?e.filter(this.global_callbacks||[],function(p){return p!==r}):[],this},a.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},a.prototype.emit=function(r,p){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](r,p);var s=this.callbacks.get(r);if(s&&0<s.length)for(n=0;n<s.length;n++)s[n].fn.call(s[n].context||window,p);else this.failThrough&&this.failThrough(r,p);return this},a}();P.__esModule=!0,P.default=h},function(I,P,G){"use strict";function e(a){return"_"+a}var g=G(9),h=function(){function a(){this._callbacks={}}return a.prototype.get=function(r){return this._callbacks[e(r)]},a.prototype.add=function(r,p,n){var s=e(r);this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push({fn:p,context:n})},a.prototype.remove=function(r,p,n){if(r||p||n){var s=r?[e(r)]:g.keys(this._callbacks);p||n?this.removeCallback(s,p,n):this.removeAllCallbacks(s)}else this._callbacks={}},a.prototype.removeCallback=function(r,p,n){g.apply(r,function(s){this._callbacks[s]=g.filter(this._callbacks[s]||[],function(t){return p&&p!==t.fn||n&&n!==t.context}),0===this._callbacks[s].length&&delete this._callbacks[s]},this)},a.prototype.removeAllCallbacks=function(r){g.apply(r,function(p){delete this._callbacks[p]},this)},a}();P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=this&&this.__extends||function(h,a){function r(){this.constructor=h}for(var p in a)a.hasOwnProperty(p)&&(h[p]=a[p]);h.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)},g=function(h){function a(){h.call(this);var r=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1))}return e(a,h),a.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},a}(G(24).default);P.NetInfo=g,P.Network=new g},function(I,P){"use strict";P.__esModule=!0,P.default=function(G){return[[":def","ws_options",{hostNonTLS:G.wsHost+":"+G.wsPort,hostTLS:G.wsHost+":"+G.wssPort,httpPath:G.wsPath}],[":def","wss_options",[":extend",":ws_options",{useTLS:!0}]],[":def","sockjs_options",{hostNonTLS:G.httpHost+":"+G.httpPort,hostTLS:G.httpHost+":"+G.httpsPort,httpPath:G.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:G.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:G.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],G.useTLS?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],":http_fallback_loop"]]]]]}},function(I,P,G){"use strict";var e=G(3);P.__esModule=!0,P.default=function(){var g=this;g.timeline.info(g.buildTimelineMessage({transport:g.name+(g.options.useTLS?"s":"")})),g.hooks.isInitialized()?g.changeState("initialized"):g.hooks.file?(g.changeState("initializing"),e.Dependencies.load(g.hooks.file,{useTLS:g.options.useTLS},function(h,a){g.hooks.isInitialized()?(g.changeState("initialized"),a(!0)):(h&&g.onError(h),g.onClose(),a(!1))})):g.onClose()}},function(I,P,G){"use strict";var e=G(30),g=G(32);g.default.createXDR=function(h,a){return this.createRequest(e.default,h,a)},P.__esModule=!0,P.default=g.default},function(I,P,G){"use strict";var e=G(31),g={getRequest:function(h){var a=new window.XDomainRequest;return a.ontimeout=function(){h.emit("error",new e.RequestTimedOut),h.close()},a.onerror=function(r){h.emit("error",r),h.close()},a.onprogress=function(){a.responseText&&0<a.responseText.length&&h.onChunk(200,a.responseText)},a.onload=function(){a.responseText&&0<a.responseText.length&&h.onChunk(200,a.responseText),h.emit("finished",200),h.close()},a},abortRequest:function(h){h.ontimeout=h.onerror=h.onprogress=h.onload=null,h.abort()}};P.__esModule=!0,P.default=g},function(I,P){"use strict";var G=this&&this.__extends||function(s,t){function c(){this.constructor=s}for(var u in t)t.hasOwnProperty(u)&&(s[u]=t[u]);s.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)},e=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.BadEventName=e;var g=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.RequestTimedOut=g;var h=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.TransportPriorityTooLow=h;var a=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.TransportClosed=a;var r=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.UnsupportedFeature=r;var p=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.UnsupportedTransport=p;var n=function(s){function t(){s.apply(this,arguments)}return G(t,s),t}(Error);P.UnsupportedStrategy=n},function(I,P,G){"use strict";var e=G(33),g=G(34),h=G(36),a=G(37),r=G(38),p={createStreamingSocket:function(n){return this.createSocket(h.default,n)},createPollingSocket:function(n){return this.createSocket(a.default,n)},createSocket:function(n,s){return new g.default(n,s)},createXHR:function(n,s){return this.createRequest(r.default,n,s)},createRequest:function(n,s,t){return new e.default(n,s,t)}};P.__esModule=!0,P.default=p},function(I,P,G){"use strict";var e=this&&this.__extends||function(r,p){function n(){this.constructor=r}for(var s in p)p.hasOwnProperty(s)&&(r[s]=p[s]);r.prototype=null===p?Object.create(p):(n.prototype=p.prototype,new n)},g=G(2),a=function(r){function p(n,s,t){r.call(this),this.hooks=n,this.method=s,this.url=t}return e(p,r),p.prototype.start=function(n){var s=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){s.close()},g.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},p.prototype.close=function(){this.unloader&&(g.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},p.prototype.onChunk=function(n,s){for(;;){var t=this.advanceBuffer(s);if(!t)break;this.emit("chunk",{status:n,data:t})}this.isBufferTooLong(s)&&this.emit("buffer_too_long")},p.prototype.advanceBuffer=function(n){var s=n.slice(this.position),t=s.indexOf("\n");return-1!==t?(this.position+=t+1,s.slice(0,t)):null},p.prototype.isBufferTooLong=function(n){return this.position===n.length&&262144<n.length},p}(G(24).default);P.__esModule=!0,P.default=a},function(I,P,G){"use strict";function e(s){var t=-1===s.indexOf("?")?"?":"&";return s+t+"t="+ +new Date+"&n="+p++}function g(s){return Math.floor(Math.random()*s)}var h=G(35),a=G(11),r=G(2),p=1,n=function(){function s(t,c){var o;this.hooks=t,this.session=g(1e3)+"/"+function(u){for(var o=[],l=0;l<8;l++)o.push(g(32).toString(32));return o.join("")}(),this.location={base:(o=/([^\?]*)\/*(\??.*)/.exec(c))[1],queryString:o[2]},this.readyState=h.default.CONNECTING,this.openStream()}return s.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},s.prototype.ping=function(){this.hooks.sendHeartbeat(this)},s.prototype.close=function(t,c){this.onClose(t,c,!0)},s.prototype.sendRaw=function(t){if(this.readyState!==h.default.OPEN)return!1;try{return r.default.createSocketRequest("POST",e((c=this.location,u=this.session,c.base+"/"+u+"/xhr_send"))).start(t),!0}catch{return!1}var c,u},s.prototype.reconnect=function(){this.closeStream(),this.openStream()},s.prototype.onClose=function(t,c,u){this.closeStream(),this.readyState=h.default.CLOSED,this.onclose&&this.onclose({code:t,reason:c,wasClean:u})},s.prototype.onChunk=function(t){var c;if(200===t.status)switch(this.readyState===h.default.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":c=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(c);break;case"a":c=JSON.parse(t.data.slice(1)||"[]");for(var u=0;u<c.length;u++)this.onEvent(c[u]);break;case"m":c=JSON.parse(t.data.slice(1)||"null"),this.onEvent(c);break;case"h":this.hooks.onHeartbeat(this);break;case"c":c=JSON.parse(t.data.slice(1)||"[]"),this.onClose(c[0],c[1],!0)}},s.prototype.onOpen=function(t){var u,o;this.readyState===h.default.CONNECTING?(t&&t.hostname&&(this.location.base=(u=t.hostname,(o=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(this.location.base))[1]+u+o[3])),this.readyState=h.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},s.prototype.onEvent=function(t){this.readyState===h.default.OPEN&&this.onmessage&&this.onmessage({data:t})},s.prototype.onActivity=function(){this.onactivity&&this.onactivity()},s.prototype.onError=function(t){this.onerror&&this.onerror(t)},s.prototype.openStream=function(){var t=this;this.stream=r.default.createSocketRequest("POST",e(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(c){t.onChunk(c)}),this.stream.bind("finished",function(c){t.hooks.onFinished(t,c)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(c){a.default.defer(function(){t.onError(c),t.onClose(1006,"Could not start streaming",!1)})}},s.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},s}();P.__esModule=!0,P.default=n},function(I,P){"use strict";var G,e;(e=G||(G={}))[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED",P.__esModule=!0,P.default=G},function(I,P){"use strict";P.__esModule=!0,P.default={getReceiveURL:function(G,e){return G.base+"/"+e+"/xhr_streaming"+G.queryString},onHeartbeat:function(G){G.sendRaw("[]")},sendHeartbeat:function(G){G.sendRaw("[]")},onFinished:function(G,e){G.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(I,P){"use strict";P.__esModule=!0,P.default={getReceiveURL:function(G,e){return G.base+"/"+e+"/xhr"+G.queryString},onHeartbeat:function(){},sendHeartbeat:function(G){G.sendRaw("[]")},onFinished:function(G,e){200===e?G.reconnect():G.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(I,P,G){"use strict";var e=G(2),g={getRequest:function(h){var a=new(e.default.getXHRAPI());return a.onreadystatechange=a.onprogress=function(){switch(a.readyState){case 3:a.responseText&&0<a.responseText.length&&h.onChunk(a.status,a.responseText);break;case 4:a.responseText&&0<a.responseText.length&&h.onChunk(a.status,a.responseText),h.emit("finished",a.status),h.close()}},a},abortRequest:function(h){h.onreadystatechange=null,h.abort()}};P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=G(9),g=G(11),h=G(40),a=function(){function r(p,n,s){this.key=p,this.session=n,this.events=[],this.options=s||{},this.sent=0,this.uniqueID=0}return r.prototype.log=function(p,n){p<=this.options.level&&(this.events.push(e.extend({},n,{timestamp:g.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},r.prototype.error=function(p){this.log(h.default.ERROR,p)},r.prototype.info=function(p){this.log(h.default.INFO,p)},r.prototype.debug=function(p){this.log(h.default.DEBUG,p)},r.prototype.isEmpty=function(){return 0===this.events.length},r.prototype.send=function(p,n){var s=this,t=e.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],p(t,function(c,u){c||s.sent++,n&&n(c,u)}),!0},r.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},r}();P.__esModule=!0,P.default=a},function(I,P){"use strict";var G,e;(e=G||(G={}))[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG",P.__esModule=!0,P.default=G},function(I,P,G){"use strict";function e(A){return function(_){return[A.apply(this,arguments),_]}}function g(A){return"string"==typeof A&&":"===A.charAt(0)}function h(A,_){return _[A.slice(1)]}function r(A,_){return"string"==typeof A?function(E,y){if(!g(E))return[E,y];var m=h(E,y);if(void 0===m)throw"Undefined symbol "+E;return[m,y]}(A,_):"object"==_typeof(A)&&A instanceof Array&&0<A.length?function a(A,_){if(g(A[0])){var E=h(A[0],_);if(1<A.length){if("function"!=typeof E)throw"Calling non-function "+A[0];var y=[p.extend({},_)].concat(p.map(A.slice(1),function(m){return r(m,p.extend({},_))[0]}));return E.apply(this,y)}return[E,_]}return function m(R,F){if(0===R.length)return[[],F];var B=r(R[0],F),J=m(R.slice(1),B[1]);return[[B[0]].concat(J[0]),J[1]]}(A,_)}(A,_):[A,_]}var p=G(9),n=G(11),s=G(42),t=G(31),c=G(64),u=G(65),o=G(66),l=G(67),f=G(68),w=G(69),k=G(70),O=G(2).default.Transports;P.build=function(A,_){return r(A,p.extend({},b,_))[1].strategy};var M={isSupported:function(){return!1},connect:function(A,_){var E=n.default.defer(function(){_(new t.UnsupportedStrategy)});return{abort:function(){E.ensureAborted()},forceMinPriority:function(){}}}},b={extend:function(A,_,E){return[p.extend({},_,E),A]},def:function(A,_,E){if(void 0!==A[_])throw"Redefining symbol "+_;return A[_]=E,[void 0,A]},def_transport:function(A,_,E,y,m,R){var F,B=O[E];if(!B)throw new t.UnsupportedTransport(E);F=A.enabledTransports&&-1===p.arrayIndexOf(A.enabledTransports,_)||A.disabledTransports&&-1!==p.arrayIndexOf(A.disabledTransports,_)?M:new c.default(_,y,R?R.getAssistant(B):B,p.extend({key:A.key,useTLS:A.useTLS,timeline:A.timeline,ignoreNullOrigin:A.ignoreNullOrigin},m));var J=A.def(A,_,F)[1];return J.Transports=A.Transports||{},J.Transports[_]=F,[void 0,J]},transport_manager:e(function(A,_){return new s.default(_)}),sequential:e(function(A,_){var E=Array.prototype.slice.call(arguments,2);return new u.default(E,_)}),cached:e(function(A,_,E){return new l.default(E,A.Transports,{ttl:_,timeline:A.timeline,useTLS:A.useTLS})}),first_connected:e(function(A,_){return new k.default(_)}),best_connected_ever:e(function(){var A=Array.prototype.slice.call(arguments,1);return new o.default(A)}),delayed:e(function(A,_,E){return new f.default(E,{delay:_})}),if:e(function(A,_,E,y){return new w.default(_,E,y)}),is_supported:e(function(A,_){return function(){return _.isSupported()}})}},function(I,P,G){"use strict";var e=G(43),g=function(){function h(a){this.options=a||{},this.livesLeft=this.options.lives||1/0}return h.prototype.getAssistant=function(a){return e.default.createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},h.prototype.isAlive=function(){return 0<this.livesLeft},h.prototype.reportDeath=function(){this.livesLeft-=1},h}();P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=G(44),g=G(45),h=G(48),a=G(49),r=G(50),p=G(51),n=G(54),s=G(52),t=G(62),c=G(63),u={createChannels:function(){return new c.default},createConnectionManager:function(o,l){return new t.default(o,l)},createChannel:function(o,l){return new s.default(o,l)},createPrivateChannel:function(o,l){return new p.default(o,l)},createPresenceChannel:function(o,l){return new r.default(o,l)},createEncryptedChannel:function(o,l){return new n.default(o,l)},createTimelineSender:function(o,l){return new a.default(o,l)},createAuthorizer:function(o,l){return l.authorizer?l.authorizer(o,l):new h.default(o,l)},createHandshake:function(o,l){return new g.default(o,l)},createAssistantToTheTransportManager:function(o,l,f){return new e.default(o,l,f)}};P.__esModule=!0,P.default=u},function(I,P,G){"use strict";var e=G(11),g=G(9),h=function(){function a(r,p,n){this.manager=r,this.transport=p,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return a.prototype.createConnection=function(r,p,n,s){var t=this;s=g.extend({},s,{activityTimeout:this.pingDelay});var c=this.transport.createConnection(r,p,n,s),u=null,o=function l(f){if(c.unbind("closed",l),1002===f.code||1003===f.code)t.manager.reportDeath();else if(!f.wasClean&&u){var w=e.default.now()-u;w<2*t.maxPingDelay&&(t.manager.reportDeath(),t.pingDelay=Math.max(w/2,t.minPingDelay))}};return c.bind("open",function l(){c.unbind("open",l),c.bind("closed",o),u=e.default.now()}),c},a.prototype.isSupported=function(r){return this.manager.isAlive()&&this.transport.isSupported(r)},a}();P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=G(9),g=G(46),h=G(47),a=function(){function r(p,n){this.transport=p,this.callback=n,this.bindListeners()}return r.prototype.close=function(){this.unbindListeners(),this.transport.close()},r.prototype.bindListeners=function(){var p=this;this.onMessage=function(n){var s;p.unbindListeners();try{s=g.processHandshake(n)}catch(t){return p.finish("error",{error:t}),void p.transport.close()}"connected"===s.action?p.finish("connected",{connection:new h.default(s.id,p.transport),activityTimeout:s.activityTimeout}):(p.finish(s.action,{error:s.error}),p.transport.close())},this.onClosed=function(n){p.unbindListeners();var s=g.getCloseAction(n)||"backoff",t=g.getCloseError(n);p.finish(s,{error:t})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},r.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},r.prototype.finish=function(p,n){this.callback(e.extend({transport:this.transport,action:p},n))},r}();P.__esModule=!0,P.default=a},function(I,P){"use strict";P.decodeMessage=function(G){try{var e=JSON.parse(G.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(g){if(!(g instanceof SyntaxError))throw g}return e}catch(g){throw{type:"MessageParseError",error:g,data:G.data}}},P.encodeMessage=function(G){return JSON.stringify(G)},P.processHandshake=function(G){if("pusher:connection_established"===(G=P.decodeMessage(G)).event){if(!G.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:G.data.socket_id,activityTimeout:1e3*G.data.activity_timeout}}if("pusher:error"===G.event)return{action:this.getCloseAction(G.data),error:this.getCloseError(G.data)};throw"Invalid handshake"},P.getCloseAction=function(G){return G.code<4e3?1002<=G.code&&G.code<=1004?"backoff":null:4e3===G.code?"tls_only":G.code<4100?"refused":G.code<4200?"backoff":G.code<4300?"retry":"refused"},P.getCloseError=function(G){return 1e3!==G.code&&1001!==G.code?{type:"PusherError",data:{code:G.code,message:G.reason||G.message}}:null}},function(I,P,G){"use strict";var e=this&&this.__extends||function(n,s){function t(){this.constructor=n}for(var c in s)s.hasOwnProperty(c)&&(n[c]=s[c]);n.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)},g=G(9),h=G(24),a=G(46),r=G(8),p=function(n){function s(t,c){n.call(this),this.id=t,this.transport=c,this.activityTimeout=c.activityTimeout,this.bindListeners()}return e(s,n),s.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},s.prototype.send=function(t){return this.transport.send(t)},s.prototype.send_event=function(t,c,u){var o={event:t,data:c};return u&&(o.channel=u),r.default.debug("Event sent",o),this.send(a.encodeMessage(o))},s.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},s.prototype.close=function(){this.transport.close()},s.prototype.bindListeners=function(){var t=this,c={message:function(o){var l;try{l=a.decodeMessage(o)}catch(f){t.emit("error",{type:"MessageParseError",error:f,data:o.data})}if(void 0!==l){switch(r.default.debug("Event recd",l),l.event){case"pusher:error":t.emit("error",{type:"PusherError",data:l.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",l)}},activity:function(){t.emit("activity")},error:function(o){t.emit("error",{type:"WebSocketError",error:o})},closed:function(o){u(),o&&o.code&&t.handleCloseEvent(o),t.transport=null,t.emit("closed")}},u=function(){g.objectApply(c,function(o,l){t.transport.unbind(l,o)})};g.objectApply(c,function(o,l){t.transport.bind(l,o)})},s.prototype.handleCloseEvent=function(t){var c=a.getCloseAction(t),u=a.getCloseError(t);u&&this.emit("error",u),c&&this.emit(c,{action:c,error:u})},s}(h.default);P.__esModule=!0,P.default=p},function(I,P,G){"use strict";var e=G(2),g=function(){function h(a,r){this.channel=a;var p=r.authTransport;if(void 0===e.default.getAuthorizers()[p])throw"'"+p+"' is not a recognized auth transport";this.type=p,this.options=r,this.authOptions=(r||{}).auth||{}}return h.prototype.composeQuery=function(a){var r="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);for(var p in this.authOptions.params)r+="&"+encodeURIComponent(p)+"="+encodeURIComponent(this.authOptions.params[p]);return r},h.prototype.authorize=function(a,r){return(h.authorizers=h.authorizers||e.default.getAuthorizers())[this.type].call(this,e.default,a,r)},h}();P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=G(2),g=function(){function h(a,r){this.timeline=a,this.options=r||{}}return h.prototype.send=function(a,r){this.timeline.isEmpty()||this.timeline.send(e.default.TimelineTransport.getAgent(this,a),r)},h}();P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=this&&this.__extends||function(n,s){function t(){this.constructor=n}for(var c in s)s.hasOwnProperty(c)&&(n[c]=s[c]);n.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)},g=G(51),h=G(8),a=G(53),r=G(14),p=function(n){function s(t,c){n.call(this,t,c),this.members=new a.default}return e(s,n),s.prototype.authorize=function(t,c){var u=this;n.prototype.authorize.call(this,t,function(o,l){if(!o){if(void 0===l.channel_data){var f=r.default.buildLogSuffix("authenticationEndpoint");return h.default.warn("Invalid auth response for channel '"+u.name+"',expected 'channel_data' field. "+f),void c("Invalid auth response")}var w=JSON.parse(l.channel_data);u.members.setMyID(w.user_id)}c(o,l)})},s.prototype.handleEvent=function(t,c){switch(t){case"pusher_internal:subscription_succeeded":this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(c),this.emit("pusher:subscription_succeeded",this.members));break;case"pusher_internal:member_added":var u=this.members.addMember(c);this.emit("pusher:member_added",u);break;case"pusher_internal:member_removed":var o=this.members.removeMember(c);o&&this.emit("pusher:member_removed",o);break;default:g.default.prototype.handleEvent.call(this,t,c)}},s.prototype.disconnect=function(){this.members.reset(),n.prototype.disconnect.call(this)},s}(g.default);P.__esModule=!0,P.default=p},function(I,P,G){"use strict";var e=this&&this.__extends||function(a,r){function p(){this.constructor=a}for(var n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);a.prototype=null===r?Object.create(r):(p.prototype=r.prototype,new p)},g=G(43),h=function(a){function r(){a.apply(this,arguments)}return e(r,a),r.prototype.authorize=function(p,n){return g.default.createAuthorizer(this,this.pusher.config).authorize(p,n)},r}(G(52).default);P.__esModule=!0,P.default=h},function(I,P,G){"use strict";var e=this&&this.__extends||function(p,n){function s(){this.constructor=p}for(var t in n)n.hasOwnProperty(t)&&(p[t]=n[t]);p.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)},g=G(24),h=G(31),a=G(8),r=function(p){function n(s,t){p.call(this,function(c,u){a.default.debug("No callbacks on "+s+" for "+c)}),this.name=s,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return e(n,p),n.prototype.authorize=function(s,t){return t(!1,{})},n.prototype.trigger=function(s,t){if(0!==s.indexOf("client-"))throw new h.BadEventName("Event '"+s+"' does not start with 'client-'");return this.pusher.send_event(s,t,this.name)},n.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},n.prototype.handleEvent=function(s,t){0===s.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===s&&(this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t)):this.emit(s,t)},n.prototype.subscribe=function(){var s=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,c){t?s.handleEvent("pusher:subscription_error",c):s.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:s.name})}))},n.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},n.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},n.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},n}(g.default);P.__esModule=!0,P.default=r},function(I,P,G){"use strict";var e=G(9),g=function(){function h(){this.reset()}return h.prototype.get=function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null},h.prototype.each=function(a){var r=this;e.objectApply(this.members,function(p,n){a(r.get(n))})},h.prototype.setMyID=function(a){this.myID=a},h.prototype.onSubscription=function(a){this.members=a.presence.hash,this.count=a.presence.count,this.me=this.get(this.myID)},h.prototype.addMember=function(a){return null===this.get(a.user_id)&&this.count++,this.members[a.user_id]=a.user_info,this.get(a.user_id)},h.prototype.removeMember=function(a){var r=this.get(a.user_id);return r&&(delete this.members[a.user_id],this.count--),r},h.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},h}();P.__esModule=!0,P.default=g},function(I,P,G){"use strict";var e=this&&this.__extends||function(s,t){function c(){this.constructor=s}for(var u in t)t.hasOwnProperty(u)&&(s[u]=t[u]);s.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)},g=G(51),h=G(31),a=G(8),r=G(55),p=G(57),n=function(s){function t(){s.apply(this,arguments),this.key=null}return e(t,s),t.prototype.authorize=function(c,u){var o=this;s.prototype.authorize.call(this,c,function(l,f){if(l)u(!0,f);else{var w=f.shared_secret;if(!w){var k="No shared_secret key in auth payload for encrypted channel: "+o.name;return u(!0,k),void a.default.warn("Error: "+k)}o.key=p.decodeBase64(w),delete f.shared_secret,u(!1,f)}})},t.prototype.trigger=function(c,u){throw new h.UnsupportedFeature("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(c,u){return 0===c.indexOf("pusher_internal:")||0===c.indexOf("pusher:")?void s.prototype.handleEvent.call(this,c,u):void this.handleEncryptedEvent(c,u)},t.prototype.handleEncryptedEvent=function(c,u){var o=this;if(this.key)if(u.ciphertext&&u.nonce){var l=p.decodeBase64(u.ciphertext);if(l.length<r.secretbox.overheadLength)a.default.warn("Expected encrypted event ciphertext length to be "+r.secretbox.overheadLength+", got: "+l.length);else{var f=p.decodeBase64(u.nonce);if(!(f.length<r.secretbox.nonceLength)){var w=r.secretbox.open(l,f,this.key);return null===w?(a.default.debug("Failed to decrypted an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(k,O){return k?void a.default.warn("Failed to make a request to the authEndpoint: "+O+". Unable to fetch new key, so dropping encrypted event"):null===(w=r.secretbox.open(l,f,o.key))?void a.default.warn("Failed to decrypt event with new key. Dropping encrypted event"):void o.emitJSON(c,p.encodeUTF8(w))})):void this.emitJSON(c,p.encodeUTF8(w))}a.default.warn("Expected encrypted event nonce length to be "+r.secretbox.nonceLength+", got: "+f.length)}}else a.default.warn("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+u);else a.default.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.emitJSON=function(c,u){try{this.emit(c,JSON.parse(u))}catch{this.emit(c,u)}return this},t}(g.default);P.__esModule=!0,P.default=n},function(I,P,G){!function(e){"use strict";function g(ce,pe,ve,K){ce[pe]=ve>>24&255,ce[pe+1]=ve>>16&255,ce[pe+2]=ve>>8&255,ce[pe+3]=255&ve,ce[pe+4]=K>>24&255,ce[pe+5]=K>>16&255,ce[pe+6]=K>>8&255,ce[pe+7]=255&K}function h(ce,pe,ve,K,oe){var Ae,De=0;for(Ae=0;Ae<oe;Ae++)De|=ce[pe+Ae]^ve[K+Ae];return(1&De-1>>>8)-1}function a(ce,pe,ve,K){return h(ce,pe,ve,K,16)}function r(ce,pe,ve,K){return h(ce,pe,ve,K,32)}function p(ce,pe,ve,K){!function(oe,Ae,De,ze){for(var Oe,bt=255&ze[0]|(255&ze[1])<<8|(255&ze[2])<<16|(255&ze[3])<<24,It=255&De[0]|(255&De[1])<<8|(255&De[2])<<16|(255&De[3])<<24,gt=255&De[4]|(255&De[5])<<8|(255&De[6])<<16|(255&De[7])<<24,Rt=255&De[8]|(255&De[9])<<8|(255&De[10])<<16|(255&De[11])<<24,Xt=255&De[12]|(255&De[13])<<8|(255&De[14])<<16|(255&De[15])<<24,Ft=255&ze[4]|(255&ze[5])<<8|(255&ze[6])<<16|(255&ze[7])<<24,Qt=255&Ae[0]|(255&Ae[1])<<8|(255&Ae[2])<<16|(255&Ae[3])<<24,Lt=255&Ae[4]|(255&Ae[5])<<8|(255&Ae[6])<<16|(255&Ae[7])<<24,Ut=255&Ae[8]|(255&Ae[9])<<8|(255&Ae[10])<<16|(255&Ae[11])<<24,$t=255&Ae[12]|(255&Ae[13])<<8|(255&Ae[14])<<16|(255&Ae[15])<<24,xt=255&ze[8]|(255&ze[9])<<8|(255&ze[10])<<16|(255&ze[11])<<24,Et=255&De[16]|(255&De[17])<<8|(255&De[18])<<16|(255&De[19])<<24,_t=255&De[20]|(255&De[21])<<8|(255&De[22])<<16|(255&De[23])<<24,en=255&De[24]|(255&De[25])<<8|(255&De[26])<<16|(255&De[27])<<24,Ct=255&De[28]|(255&De[29])<<8|(255&De[30])<<16|(255&De[31])<<24,We=255&ze[12]|(255&ze[13])<<8|(255&ze[14])<<16|(255&ze[15])<<24,Je=bt,at=It,it=gt,ut=Rt,ft=Xt,zt=Ft,tn=Qt,Nt=Lt,nn=Ut,pn=$t,on=xt,Pt=Et,Jt=_t,qt=en,Tt=Ct,At=We,sn=0;sn<20;sn+=2)Je^=(Oe=(Jt^=(Oe=(nn^=(Oe=(ft^=(Oe=Je+Jt|0)<<7|Oe>>>25)+Je|0)<<9|Oe>>>23)+ft|0)<<13|Oe>>>19)+nn|0)<<18|Oe>>>14,zt^=(Oe=(at^=(Oe=(qt^=(Oe=(pn^=(Oe=zt+at|0)<<7|Oe>>>25)+zt|0)<<9|Oe>>>23)+pn|0)<<13|Oe>>>19)+qt|0)<<18|Oe>>>14,on^=(Oe=(tn^=(Oe=(it^=(Oe=(Tt^=(Oe=on+tn|0)<<7|Oe>>>25)+on|0)<<9|Oe>>>23)+Tt|0)<<13|Oe>>>19)+it|0)<<18|Oe>>>14,At^=(Oe=(Pt^=(Oe=(Nt^=(Oe=(ut^=(Oe=At+Pt|0)<<7|Oe>>>25)+At|0)<<9|Oe>>>23)+ut|0)<<13|Oe>>>19)+Nt|0)<<18|Oe>>>14,Je^=(Oe=(ut^=(Oe=(it^=(Oe=(at^=(Oe=Je+ut|0)<<7|Oe>>>25)+Je|0)<<9|Oe>>>23)+at|0)<<13|Oe>>>19)+it|0)<<18|Oe>>>14,zt^=(Oe=(ft^=(Oe=(Nt^=(Oe=(tn^=(Oe=zt+ft|0)<<7|Oe>>>25)+zt|0)<<9|Oe>>>23)+tn|0)<<13|Oe>>>19)+Nt|0)<<18|Oe>>>14,on^=(Oe=(pn^=(Oe=(nn^=(Oe=(Pt^=(Oe=on+pn|0)<<7|Oe>>>25)+on|0)<<9|Oe>>>23)+Pt|0)<<13|Oe>>>19)+nn|0)<<18|Oe>>>14,At^=(Oe=(Tt^=(Oe=(qt^=(Oe=(Jt^=(Oe=At+Tt|0)<<7|Oe>>>25)+At|0)<<9|Oe>>>23)+Jt|0)<<13|Oe>>>19)+qt|0)<<18|Oe>>>14;at=at+It|0,it=it+gt|0,ut=ut+Rt|0,ft=ft+Xt|0,zt=zt+Ft|0,tn=tn+Qt|0,Nt=Nt+Lt|0,nn=nn+Ut|0,pn=pn+$t|0,on=on+xt|0,Pt=Pt+Et|0,Jt=Jt+_t|0,qt=qt+en|0,Tt=Tt+Ct|0,At=At+We|0,oe[0]=(Je=Je+bt|0)>>>0&255,oe[1]=Je>>>8&255,oe[2]=Je>>>16&255,oe[3]=Je>>>24&255,oe[4]=at>>>0&255,oe[5]=at>>>8&255,oe[6]=at>>>16&255,oe[7]=at>>>24&255,oe[8]=it>>>0&255,oe[9]=it>>>8&255,oe[10]=it>>>16&255,oe[11]=it>>>24&255,oe[12]=ut>>>0&255,oe[13]=ut>>>8&255,oe[14]=ut>>>16&255,oe[15]=ut>>>24&255,oe[16]=ft>>>0&255,oe[17]=ft>>>8&255,oe[18]=ft>>>16&255,oe[19]=ft>>>24&255,oe[20]=zt>>>0&255,oe[21]=zt>>>8&255,oe[22]=zt>>>16&255,oe[23]=zt>>>24&255,oe[24]=tn>>>0&255,oe[25]=tn>>>8&255,oe[26]=tn>>>16&255,oe[27]=tn>>>24&255,oe[28]=Nt>>>0&255,oe[29]=Nt>>>8&255,oe[30]=Nt>>>16&255,oe[31]=Nt>>>24&255,oe[32]=nn>>>0&255,oe[33]=nn>>>8&255,oe[34]=nn>>>16&255,oe[35]=nn>>>24&255,oe[36]=pn>>>0&255,oe[37]=pn>>>8&255,oe[38]=pn>>>16&255,oe[39]=pn>>>24&255,oe[40]=on>>>0&255,oe[41]=on>>>8&255,oe[42]=on>>>16&255,oe[43]=on>>>24&255,oe[44]=Pt>>>0&255,oe[45]=Pt>>>8&255,oe[46]=Pt>>>16&255,oe[47]=Pt>>>24&255,oe[48]=Jt>>>0&255,oe[49]=Jt>>>8&255,oe[50]=Jt>>>16&255,oe[51]=Jt>>>24&255,oe[52]=qt>>>0&255,oe[53]=qt>>>8&255,oe[54]=qt>>>16&255,oe[55]=qt>>>24&255,oe[56]=Tt>>>0&255,oe[57]=Tt>>>8&255,oe[58]=Tt>>>16&255,oe[59]=Tt>>>24&255,oe[60]=At>>>0&255,oe[61]=At>>>8&255,oe[62]=At>>>16&255,oe[63]=At>>>24&255}(ce,pe,ve,K)}function n(ce,pe,ve,K){!function(oe,Ae,De,ze){for(var Oe,bt=255&ze[0]|(255&ze[1])<<8|(255&ze[2])<<16|(255&ze[3])<<24,It=255&De[0]|(255&De[1])<<8|(255&De[2])<<16|(255&De[3])<<24,gt=255&De[4]|(255&De[5])<<8|(255&De[6])<<16|(255&De[7])<<24,Rt=255&De[8]|(255&De[9])<<8|(255&De[10])<<16|(255&De[11])<<24,Xt=255&De[12]|(255&De[13])<<8|(255&De[14])<<16|(255&De[15])<<24,Ft=255&ze[4]|(255&ze[5])<<8|(255&ze[6])<<16|(255&ze[7])<<24,Qt=255&Ae[0]|(255&Ae[1])<<8|(255&Ae[2])<<16|(255&Ae[3])<<24,Lt=255&Ae[4]|(255&Ae[5])<<8|(255&Ae[6])<<16|(255&Ae[7])<<24,Ut=255&Ae[8]|(255&Ae[9])<<8|(255&Ae[10])<<16|(255&Ae[11])<<24,$t=255&Ae[12]|(255&Ae[13])<<8|(255&Ae[14])<<16|(255&Ae[15])<<24,xt=255&ze[8]|(255&ze[9])<<8|(255&ze[10])<<16|(255&ze[11])<<24,Et=255&De[16]|(255&De[17])<<8|(255&De[18])<<16|(255&De[19])<<24,_t=255&De[20]|(255&De[21])<<8|(255&De[22])<<16|(255&De[23])<<24,en=255&De[24]|(255&De[25])<<8|(255&De[26])<<16|(255&De[27])<<24,Ct=255&De[28]|(255&De[29])<<8|(255&De[30])<<16|(255&De[31])<<24,We=255&ze[12]|(255&ze[13])<<8|(255&ze[14])<<16|(255&ze[15])<<24,Je=0;Je<20;Je+=2)bt^=(Oe=(_t^=(Oe=(Ut^=(Oe=(Xt^=(Oe=bt+_t|0)<<7|Oe>>>25)+bt|0)<<9|Oe>>>23)+Xt|0)<<13|Oe>>>19)+Ut|0)<<18|Oe>>>14,Ft^=(Oe=(It^=(Oe=(en^=(Oe=($t^=(Oe=Ft+It|0)<<7|Oe>>>25)+Ft|0)<<9|Oe>>>23)+$t|0)<<13|Oe>>>19)+en|0)<<18|Oe>>>14,xt^=(Oe=(Qt^=(Oe=(gt^=(Oe=(Ct^=(Oe=xt+Qt|0)<<7|Oe>>>25)+xt|0)<<9|Oe>>>23)+Ct|0)<<13|Oe>>>19)+gt|0)<<18|Oe>>>14,We^=(Oe=(Et^=(Oe=(Lt^=(Oe=(Rt^=(Oe=We+Et|0)<<7|Oe>>>25)+We|0)<<9|Oe>>>23)+Rt|0)<<13|Oe>>>19)+Lt|0)<<18|Oe>>>14,bt^=(Oe=(Rt^=(Oe=(gt^=(Oe=(It^=(Oe=bt+Rt|0)<<7|Oe>>>25)+bt|0)<<9|Oe>>>23)+It|0)<<13|Oe>>>19)+gt|0)<<18|Oe>>>14,Ft^=(Oe=(Xt^=(Oe=(Lt^=(Oe=(Qt^=(Oe=Ft+Xt|0)<<7|Oe>>>25)+Ft|0)<<9|Oe>>>23)+Qt|0)<<13|Oe>>>19)+Lt|0)<<18|Oe>>>14,xt^=(Oe=($t^=(Oe=(Ut^=(Oe=(Et^=(Oe=xt+$t|0)<<7|Oe>>>25)+xt|0)<<9|Oe>>>23)+Et|0)<<13|Oe>>>19)+Ut|0)<<18|Oe>>>14,We^=(Oe=(Ct^=(Oe=(en^=(Oe=(_t^=(Oe=We+Ct|0)<<7|Oe>>>25)+We|0)<<9|Oe>>>23)+_t|0)<<13|Oe>>>19)+en|0)<<18|Oe>>>14;oe[0]=bt>>>0&255,oe[1]=bt>>>8&255,oe[2]=bt>>>16&255,oe[3]=bt>>>24&255,oe[4]=Ft>>>0&255,oe[5]=Ft>>>8&255,oe[6]=Ft>>>16&255,oe[7]=Ft>>>24&255,oe[8]=xt>>>0&255,oe[9]=xt>>>8&255,oe[10]=xt>>>16&255,oe[11]=xt>>>24&255,oe[12]=We>>>0&255,oe[13]=We>>>8&255,oe[14]=We>>>16&255,oe[15]=We>>>24&255,oe[16]=Qt>>>0&255,oe[17]=Qt>>>8&255,oe[18]=Qt>>>16&255,oe[19]=Qt>>>24&255,oe[20]=Lt>>>0&255,oe[21]=Lt>>>8&255,oe[22]=Lt>>>16&255,oe[23]=Lt>>>24&255,oe[24]=Ut>>>0&255,oe[25]=Ut>>>8&255,oe[26]=Ut>>>16&255,oe[27]=Ut>>>24&255,oe[28]=$t>>>0&255,oe[29]=$t>>>8&255,oe[30]=$t>>>16&255,oe[31]=$t>>>24&255}(ce,pe,ve,K)}function s(ce,pe,ve,K,oe,Ae,De){var ze,Oe,bt=new Uint8Array(16),It=new Uint8Array(64);for(Oe=0;Oe<16;Oe++)bt[Oe]=0;for(Oe=0;Oe<8;Oe++)bt[Oe]=Ae[Oe];for(;64<=oe;){for(p(It,bt,De,wt),Oe=0;Oe<64;Oe++)ce[pe+Oe]=ve[K+Oe]^It[Oe];for(ze=1,Oe=8;Oe<16;Oe++)bt[Oe]=255&(ze=ze+(255&bt[Oe])|0),ze>>>=8;oe-=64,pe+=64,K+=64}if(0<oe)for(p(It,bt,De,wt),Oe=0;Oe<oe;Oe++)ce[pe+Oe]=ve[K+Oe]^It[Oe];return 0}function t(ce,pe,ve,K,oe){var Ae,De,ze=new Uint8Array(16),Oe=new Uint8Array(64);for(De=0;De<16;De++)ze[De]=0;for(De=0;De<8;De++)ze[De]=K[De];for(;64<=ve;){for(p(Oe,ze,oe,wt),De=0;De<64;De++)ce[pe+De]=Oe[De];for(Ae=1,De=8;De<16;De++)ze[De]=255&(Ae=Ae+(255&ze[De])|0),Ae>>>=8;ve-=64,pe+=64}if(0<ve)for(p(Oe,ze,oe,wt),De=0;De<ve;De++)ce[pe+De]=Oe[De];return 0}function c(ce,pe,ve,K,oe){var Ae=new Uint8Array(32);n(Ae,K,oe,wt);for(var De=new Uint8Array(8),ze=0;ze<8;ze++)De[ze]=K[ze+16];return t(ce,pe,ve,De,Ae)}function u(ce,pe,ve,K,oe,Ae,De){var ze=new Uint8Array(32);n(ze,Ae,De,wt);for(var Oe=new Uint8Array(8),bt=0;bt<8;bt++)Oe[bt]=Ae[bt+16];return s(ce,pe,ve,K,oe,Oe,ze)}function o(ce,pe,ve,K,oe,Ae){var De=new Ht(Ae);return De.update(ve,K,oe),De.finish(ce,pe),0}function l(ce,pe,ve,K,oe,Ae){var De=new Uint8Array(16);return o(De,0,ve,K,oe,Ae),a(ce,pe,De,0)}function f(ce,pe,ve,K,oe){var Ae;if(ve<32)return-1;for(u(ce,0,pe,0,ve,K,oe),o(ce,16,ce,32,ve-32,ce),Ae=0;Ae<16;Ae++)ce[Ae]=0;return 0}function w(ce,pe,ve,K,oe){var Ae,De=new Uint8Array(32);if(ve<32||(c(De,0,32,K,oe),0!==l(pe,16,pe,32,ve-32,De)))return-1;for(u(ce,0,pe,0,ve,K,oe),Ae=0;Ae<32;Ae++)ce[Ae]=0;return 0}function k(ce,pe){var ve;for(ve=0;ve<16;ve++)ce[ve]=0|pe[ve]}function O(ce){var pe,ve,K=1;for(pe=0;pe<16;pe++)ve=ce[pe]+K+65535,K=Math.floor(ve/65536),ce[pe]=ve-65536*K;ce[0]+=K-1+37*(K-1)}function M(ce,pe,ve){for(var K,oe=~(ve-1),Ae=0;Ae<16;Ae++)ce[Ae]^=K=oe&(ce[Ae]^pe[Ae]),pe[Ae]^=K}function b(ce,pe){var ve,K,oe,Ae=ne(),De=ne();for(ve=0;ve<16;ve++)De[ve]=pe[ve];for(O(De),O(De),O(De),K=0;K<2;K++){for(Ae[0]=De[0]-65517,ve=1;ve<15;ve++)Ae[ve]=De[ve]-65535-(Ae[ve-1]>>16&1),Ae[ve-1]&=65535;Ae[15]=De[15]-32767-(Ae[14]>>16&1),oe=Ae[15]>>16&1,Ae[14]&=65535,M(De,Ae,1-oe)}for(ve=0;ve<16;ve++)ce[2*ve]=255&De[ve],ce[2*ve+1]=De[ve]>>8}function A(ce,pe){var ve=new Uint8Array(32),K=new Uint8Array(32);return b(ve,ce),b(K,pe),r(ve,0,K,0)}function _(ce){var pe=new Uint8Array(32);return b(pe,ce),1&pe[0]}function E(ce,pe){var ve;for(ve=0;ve<16;ve++)ce[ve]=pe[2*ve]+(pe[2*ve+1]<<8);ce[15]&=32767}function y(ce,pe,ve){for(var K=0;K<16;K++)ce[K]=pe[K]+ve[K]}function m(ce,pe,ve){for(var K=0;K<16;K++)ce[K]=pe[K]-ve[K]}function R(ce,pe,ve){var K,oe,Ae=0,De=0,ze=0,Oe=0,bt=0,It=0,gt=0,Rt=0,Xt=0,Ft=0,Qt=0,Lt=0,Ut=0,$t=0,xt=0,Et=0,_t=0,en=0,Ct=0,We=0,Je=0,at=0,it=0,ut=0,ft=0,zt=0,tn=0,Nt=0,nn=0,pn=0,on=0,Pt=ve[0],Jt=ve[1],qt=ve[2],Tt=ve[3],At=ve[4],sn=ve[5],hn=ve[6],Kt=ve[7],dn=ve[8],Rn=ve[9],Sn=ve[10],Nn=ve[11],Un=ve[12],Xn=ve[13],Hn=ve[14],Qn=ve[15];Ae+=(K=pe[0])*Pt,De+=K*Jt,ze+=K*qt,Oe+=K*Tt,bt+=K*At,It+=K*sn,gt+=K*hn,Rt+=K*Kt,Xt+=K*dn,Ft+=K*Rn,Qt+=K*Sn,Lt+=K*Nn,Ut+=K*Un,$t+=K*Xn,xt+=K*Hn,Et+=K*Qn,De+=(K=pe[1])*Pt,ze+=K*Jt,Oe+=K*qt,bt+=K*Tt,It+=K*At,gt+=K*sn,Rt+=K*hn,Xt+=K*Kt,Ft+=K*dn,Qt+=K*Rn,Lt+=K*Sn,Ut+=K*Nn,$t+=K*Un,xt+=K*Xn,Et+=K*Hn,_t+=K*Qn,ze+=(K=pe[2])*Pt,Oe+=K*Jt,bt+=K*qt,It+=K*Tt,gt+=K*At,Rt+=K*sn,Xt+=K*hn,Ft+=K*Kt,Qt+=K*dn,Lt+=K*Rn,Ut+=K*Sn,$t+=K*Nn,xt+=K*Un,Et+=K*Xn,_t+=K*Hn,en+=K*Qn,Oe+=(K=pe[3])*Pt,bt+=K*Jt,It+=K*qt,gt+=K*Tt,Rt+=K*At,Xt+=K*sn,Ft+=K*hn,Qt+=K*Kt,Lt+=K*dn,Ut+=K*Rn,$t+=K*Sn,xt+=K*Nn,Et+=K*Un,_t+=K*Xn,en+=K*Hn,Ct+=K*Qn,bt+=(K=pe[4])*Pt,It+=K*Jt,gt+=K*qt,Rt+=K*Tt,Xt+=K*At,Ft+=K*sn,Qt+=K*hn,Lt+=K*Kt,Ut+=K*dn,$t+=K*Rn,xt+=K*Sn,Et+=K*Nn,_t+=K*Un,en+=K*Xn,Ct+=K*Hn,We+=K*Qn,It+=(K=pe[5])*Pt,gt+=K*Jt,Rt+=K*qt,Xt+=K*Tt,Ft+=K*At,Qt+=K*sn,Lt+=K*hn,Ut+=K*Kt,$t+=K*dn,xt+=K*Rn,Et+=K*Sn,_t+=K*Nn,en+=K*Un,Ct+=K*Xn,We+=K*Hn,Je+=K*Qn,gt+=(K=pe[6])*Pt,Rt+=K*Jt,Xt+=K*qt,Ft+=K*Tt,Qt+=K*At,Lt+=K*sn,Ut+=K*hn,$t+=K*Kt,xt+=K*dn,Et+=K*Rn,_t+=K*Sn,en+=K*Nn,Ct+=K*Un,We+=K*Xn,Je+=K*Hn,at+=K*Qn,Rt+=(K=pe[7])*Pt,Xt+=K*Jt,Ft+=K*qt,Qt+=K*Tt,Lt+=K*At,Ut+=K*sn,$t+=K*hn,xt+=K*Kt,Et+=K*dn,_t+=K*Rn,en+=K*Sn,Ct+=K*Nn,We+=K*Un,Je+=K*Xn,at+=K*Hn,it+=K*Qn,Xt+=(K=pe[8])*Pt,Ft+=K*Jt,Qt+=K*qt,Lt+=K*Tt,Ut+=K*At,$t+=K*sn,xt+=K*hn,Et+=K*Kt,_t+=K*dn,en+=K*Rn,Ct+=K*Sn,We+=K*Nn,Je+=K*Un,at+=K*Xn,it+=K*Hn,ut+=K*Qn,Ft+=(K=pe[9])*Pt,Qt+=K*Jt,Lt+=K*qt,Ut+=K*Tt,$t+=K*At,xt+=K*sn,Et+=K*hn,_t+=K*Kt,en+=K*dn,Ct+=K*Rn,We+=K*Sn,Je+=K*Nn,at+=K*Un,it+=K*Xn,ut+=K*Hn,ft+=K*Qn,Qt+=(K=pe[10])*Pt,Lt+=K*Jt,Ut+=K*qt,$t+=K*Tt,xt+=K*At,Et+=K*sn,_t+=K*hn,en+=K*Kt,Ct+=K*dn,We+=K*Rn,Je+=K*Sn,at+=K*Nn,it+=K*Un,ut+=K*Xn,ft+=K*Hn,zt+=K*Qn,Lt+=(K=pe[11])*Pt,Ut+=K*Jt,$t+=K*qt,xt+=K*Tt,Et+=K*At,_t+=K*sn,en+=K*hn,Ct+=K*Kt,We+=K*dn,Je+=K*Rn,at+=K*Sn,it+=K*Nn,ut+=K*Un,ft+=K*Xn,zt+=K*Hn,tn+=K*Qn,Ut+=(K=pe[12])*Pt,$t+=K*Jt,xt+=K*qt,Et+=K*Tt,_t+=K*At,en+=K*sn,Ct+=K*hn,We+=K*Kt,Je+=K*dn,at+=K*Rn,it+=K*Sn,ut+=K*Nn,ft+=K*Un,zt+=K*Xn,tn+=K*Hn,Nt+=K*Qn,$t+=(K=pe[13])*Pt,xt+=K*Jt,Et+=K*qt,_t+=K*Tt,en+=K*At,Ct+=K*sn,We+=K*hn,Je+=K*Kt,at+=K*dn,it+=K*Rn,ut+=K*Sn,ft+=K*Nn,zt+=K*Un,tn+=K*Xn,Nt+=K*Hn,nn+=K*Qn,xt+=(K=pe[14])*Pt,Et+=K*Jt,_t+=K*qt,en+=K*Tt,Ct+=K*At,We+=K*sn,Je+=K*hn,at+=K*Kt,it+=K*dn,ut+=K*Rn,ft+=K*Sn,zt+=K*Nn,tn+=K*Un,Nt+=K*Xn,nn+=K*Hn,pn+=K*Qn,Et+=(K=pe[15])*Pt,De+=38*(en+=K*qt),ze+=38*(Ct+=K*Tt),Oe+=38*(We+=K*At),bt+=38*(Je+=K*sn),It+=38*(at+=K*hn),gt+=38*(it+=K*Kt),Rt+=38*(ut+=K*dn),Xt+=38*(ft+=K*Rn),Ft+=38*(zt+=K*Sn),Qt+=38*(tn+=K*Nn),Lt+=38*(Nt+=K*Un),Ut+=38*(nn+=K*Xn),$t+=38*(pn+=K*Hn),xt+=38*(on+=K*Qn),Ae=(K=(Ae+=38*(_t+=K*Jt))+(oe=1)+65535)-65536*(oe=Math.floor(K/65536)),De=(K=De+oe+65535)-65536*(oe=Math.floor(K/65536)),ze=(K=ze+oe+65535)-65536*(oe=Math.floor(K/65536)),Oe=(K=Oe+oe+65535)-65536*(oe=Math.floor(K/65536)),bt=(K=bt+oe+65535)-65536*(oe=Math.floor(K/65536)),It=(K=It+oe+65535)-65536*(oe=Math.floor(K/65536)),gt=(K=gt+oe+65535)-65536*(oe=Math.floor(K/65536)),Rt=(K=Rt+oe+65535)-65536*(oe=Math.floor(K/65536)),Xt=(K=Xt+oe+65535)-65536*(oe=Math.floor(K/65536)),Ft=(K=Ft+oe+65535)-65536*(oe=Math.floor(K/65536)),Qt=(K=Qt+oe+65535)-65536*(oe=Math.floor(K/65536)),Lt=(K=Lt+oe+65535)-65536*(oe=Math.floor(K/65536)),Ut=(K=Ut+oe+65535)-65536*(oe=Math.floor(K/65536)),$t=(K=$t+oe+65535)-65536*(oe=Math.floor(K/65536)),xt=(K=xt+oe+65535)-65536*(oe=Math.floor(K/65536)),Et=(K=Et+oe+65535)-65536*(oe=Math.floor(K/65536)),Ae=(K=(Ae+=oe-1+37*(oe-1))+(oe=1)+65535)-65536*(oe=Math.floor(K/65536)),De=(K=De+oe+65535)-65536*(oe=Math.floor(K/65536)),ze=(K=ze+oe+65535)-65536*(oe=Math.floor(K/65536)),Oe=(K=Oe+oe+65535)-65536*(oe=Math.floor(K/65536)),bt=(K=bt+oe+65535)-65536*(oe=Math.floor(K/65536)),It=(K=It+oe+65535)-65536*(oe=Math.floor(K/65536)),gt=(K=gt+oe+65535)-65536*(oe=Math.floor(K/65536)),Rt=(K=Rt+oe+65535)-65536*(oe=Math.floor(K/65536)),Xt=(K=Xt+oe+65535)-65536*(oe=Math.floor(K/65536)),Ft=(K=Ft+oe+65535)-65536*(oe=Math.floor(K/65536)),Qt=(K=Qt+oe+65535)-65536*(oe=Math.floor(K/65536)),Lt=(K=Lt+oe+65535)-65536*(oe=Math.floor(K/65536)),Ut=(K=Ut+oe+65535)-65536*(oe=Math.floor(K/65536)),$t=(K=$t+oe+65535)-65536*(oe=Math.floor(K/65536)),xt=(K=xt+oe+65535)-65536*(oe=Math.floor(K/65536)),Et=(K=Et+oe+65535)-65536*(oe=Math.floor(K/65536)),ce[0]=Ae+=oe-1+37*(oe-1),ce[1]=De,ce[2]=ze,ce[3]=Oe,ce[4]=bt,ce[5]=It,ce[6]=gt,ce[7]=Rt,ce[8]=Xt,ce[9]=Ft,ce[10]=Qt,ce[11]=Lt,ce[12]=Ut,ce[13]=$t,ce[14]=xt,ce[15]=Et}function F(ce,pe){R(ce,pe,pe)}function B(ce,pe){var ve,K=ne();for(ve=0;ve<16;ve++)K[ve]=pe[ve];for(ve=253;0<=ve;ve--)F(K,K),2!==ve&&4!==ve&&R(K,K,pe);for(ve=0;ve<16;ve++)ce[ve]=K[ve]}function J(ce,pe,ve){var K,oe,Ae=new Uint8Array(32),De=new Float64Array(80),ze=ne(),Oe=ne(),bt=ne(),It=ne(),gt=ne(),Rt=ne();for(oe=0;oe<31;oe++)Ae[oe]=pe[oe];for(Ae[31]=127&pe[31]|64,Ae[0]&=248,E(De,ve),oe=0;oe<16;oe++)Oe[oe]=De[oe],It[oe]=ze[oe]=bt[oe]=0;for(ze[0]=It[0]=1,oe=254;0<=oe;--oe)M(ze,Oe,K=Ae[oe>>>3]>>>(7&oe)&1),M(bt,It,K),y(gt,ze,bt),m(ze,ze,bt),y(bt,Oe,It),m(Oe,Oe,It),F(It,gt),F(Rt,ze),R(ze,bt,ze),R(bt,Oe,gt),y(gt,ze,bt),m(ze,ze,bt),F(Oe,ze),m(bt,It,Rt),R(ze,bt,qe),y(ze,ze,It),R(bt,bt,ze),R(ze,It,Rt),R(It,Oe,De),F(Oe,gt),M(ze,Oe,K),M(bt,It,K);for(oe=0;oe<16;oe++)De[oe+16]=ze[oe],De[oe+32]=bt[oe],De[oe+48]=Oe[oe],De[oe+64]=It[oe];var Xt=De.subarray(32),Ft=De.subarray(16);return B(Xt,Xt),R(Ft,Ft,Xt),b(ce,Ft),0}function Q(ce,pe){return J(ce,pe,$e)}function U(ce,pe){return be(pe,32),Q(ce,pe)}function N(ce,pe,ve){var K=new Uint8Array(32);return J(K,ve,pe),n(ce,Me,K,wt)}function D(ce,pe,ve,K){for(var Ae,De,Oe,bt,It,gt,Xt,Ft,Lt,Ut,$t,xt,Et,_t,en,Ct,We,Je,at,it,ut,ft,zt=new Int32Array(16),tn=new Int32Array(16),Nt=ce[0],nn=ce[1],pn=ce[2],on=ce[3],Pt=ce[4],Jt=ce[5],qt=ce[6],Tt=ce[7],At=pe[0],sn=pe[1],hn=pe[2],Kt=pe[3],dn=pe[4],Rn=pe[5],Sn=pe[6],Nn=pe[7],Un=0;128<=K;){for(en=0;en<16;en++)zt[en]=ve[(Ct=8*en+Un)+0]<<24|ve[Ct+1]<<16|ve[Ct+2]<<8|ve[Ct+3],tn[en]=ve[Ct+4]<<24|ve[Ct+5]<<16|ve[Ct+6]<<8|ve[Ct+7];for(en=0;en<80;en++)if(Ae=nn,De=pn,Xt=sn,Ft=hn,at=65535&(Je=Nn),it=Je>>>16,ut=65535&(We=Tt),ft=We>>>16,at+=65535&(Je=((Lt=dn)>>>14|(Oe=Pt)<<18)^(dn>>>18|Pt<<14)^(Pt>>>9|dn<<23)),it+=Je>>>16,ut+=65535&(We=(Pt>>>14|dn<<18)^(Pt>>>18|dn<<14)^(dn>>>9|Pt<<23)),ft+=We>>>16,at+=65535&(Je=dn&(Ut=Rn)^~dn&($t=Sn)),it+=Je>>>16,ut+=65535&(We=Pt&(bt=Jt)^~Pt&(It=qt)),ft+=We>>>16,at+=65535&(Je=Yn[2*en+1]),it+=Je>>>16,ut+=65535&(We=Yn[2*en]),ft+=We>>>16,it+=(Je=tn[en%16])>>>16,ut+=65535&(We=zt[en%16]),ft+=We>>>16,ut+=(it+=(at+=65535&Je)>>>16)>>>16,at=65535&(Je=_t=65535&at|it<<16),it=Je>>>16,ut=65535&(We=Et=65535&ut|(ft+=ut>>>16)<<16),ft=We>>>16,at+=65535&(Je=(At>>>28|Nt<<4)^(Nt>>>2|At<<30)^(Nt>>>7|At<<25)),it+=Je>>>16,ut+=65535&(We=(Nt>>>28|At<<4)^(At>>>2|Nt<<30)^(At>>>7|Nt<<25)),ft+=We>>>16,it+=(Je=At&sn^At&hn^sn&hn)>>>16,ut+=65535&(We=Nt&nn^Nt&pn^nn&pn),ft+=We>>>16,gt=65535&(ut+=(it+=(at+=65535&Je)>>>16)>>>16)|(ft+=ut>>>16)<<16,xt=65535&at|it<<16,at=65535&(Je=Kt),it=Je>>>16,ut=65535&(We=on),ft=We>>>16,it+=(Je=_t)>>>16,ut+=65535&(We=Et),ft+=We>>>16,nn=Nt,pn=Ae,on=De,Pt=65535&(ut+=(it+=(at+=65535&Je)>>>16)>>>16)|(ft+=ut>>>16)<<16,Jt=Oe,qt=bt,Tt=It,Nt=gt,sn=At,hn=Xt,Kt=Ft,dn=65535&at|it<<16,Rn=Lt,Sn=Ut,Nn=$t,At=xt,en%16==15)for(Ct=0;Ct<16;Ct++)at=65535&(Je=tn[Ct]),it=Je>>>16,ut=65535&(We=zt[Ct]),ft=We>>>16,at+=65535&(Je=tn[(Ct+9)%16]),it+=Je>>>16,ut+=65535&(We=zt[(Ct+9)%16]),ft+=We>>>16,at+=65535&(Je=((_t=tn[(Ct+1)%16])>>>1|(Et=zt[(Ct+1)%16])<<31)^(_t>>>8|Et<<24)^(_t>>>7|Et<<25)),it+=Je>>>16,ut+=65535&(We=(Et>>>1|_t<<31)^(Et>>>8|_t<<24)^Et>>>7),ft+=We>>>16,it+=(Je=((_t=tn[(Ct+14)%16])>>>19|(Et=zt[(Ct+14)%16])<<13)^(Et>>>29|_t<<3)^(_t>>>6|Et<<26))>>>16,ut+=65535&(We=(Et>>>19|_t<<13)^(_t>>>29|Et<<3)^Et>>>6),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,zt[Ct]=65535&ut|ft<<16,tn[Ct]=65535&at|it<<16;at=65535&(Je=At),it=Je>>>16,ut=65535&(We=Nt),ft=We>>>16,it+=(Je=pe[0])>>>16,ut+=65535&(We=ce[0]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[0]=Nt=65535&ut|ft<<16,pe[0]=At=65535&at|it<<16,at=65535&(Je=sn),it=Je>>>16,ut=65535&(We=nn),ft=We>>>16,it+=(Je=pe[1])>>>16,ut+=65535&(We=ce[1]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[1]=nn=65535&ut|ft<<16,pe[1]=sn=65535&at|it<<16,at=65535&(Je=hn),it=Je>>>16,ut=65535&(We=pn),ft=We>>>16,it+=(Je=pe[2])>>>16,ut+=65535&(We=ce[2]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[2]=pn=65535&ut|ft<<16,pe[2]=hn=65535&at|it<<16,at=65535&(Je=Kt),it=Je>>>16,ut=65535&(We=on),ft=We>>>16,it+=(Je=pe[3])>>>16,ut+=65535&(We=ce[3]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[3]=on=65535&ut|ft<<16,pe[3]=Kt=65535&at|it<<16,at=65535&(Je=dn),it=Je>>>16,ut=65535&(We=Pt),ft=We>>>16,it+=(Je=pe[4])>>>16,ut+=65535&(We=ce[4]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[4]=Pt=65535&ut|ft<<16,pe[4]=dn=65535&at|it<<16,at=65535&(Je=Rn),it=Je>>>16,ut=65535&(We=Jt),ft=We>>>16,it+=(Je=pe[5])>>>16,ut+=65535&(We=ce[5]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[5]=Jt=65535&ut|ft<<16,pe[5]=Rn=65535&at|it<<16,at=65535&(Je=Sn),it=Je>>>16,ut=65535&(We=qt),ft=We>>>16,it+=(Je=pe[6])>>>16,ut+=65535&(We=ce[6]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[6]=qt=65535&ut|ft<<16,pe[6]=Sn=65535&at|it<<16,at=65535&(Je=Nn),it=Je>>>16,ut=65535&(We=Tt),ft=We>>>16,it+=(Je=pe[7])>>>16,ut+=65535&(We=ce[7]),ft+=We>>>16,ft+=(ut+=(it+=(at+=65535&Je)>>>16)>>>16)>>>16,ce[7]=Tt=65535&ut|ft<<16,pe[7]=Nn=65535&at|it<<16,Un+=128,K-=128}return K}function ie(ce,pe,ve){var K,oe=new Int32Array(8),Ae=new Int32Array(8),De=new Uint8Array(256),ze=ve;for(oe[0]=1779033703,oe[1]=3144134277,oe[2]=1013904242,oe[3]=2773480762,oe[4]=1359893119,oe[5]=2600822924,oe[6]=528734635,oe[7]=1541459225,Ae[0]=4089235720,Ae[1]=2227873595,Ae[2]=4271175723,Ae[3]=1595750129,Ae[4]=2917565137,Ae[5]=725511199,Ae[6]=4215389547,Ae[7]=327033209,D(oe,Ae,pe,ve),ve%=128,K=0;K<ve;K++)De[K]=pe[ze-ve+K];for(De[ve]=128,De[(ve=256-128*(ve<112?1:0))-9]=0,g(De,ve-8,ze/536870912|0,ze<<3),D(oe,Ae,De,ve),K=0;K<8;K++)g(ce,8*K,oe[K],Ae[K]);return 0}function Z(ce,pe){var ve=ne(),K=ne(),oe=ne(),Ae=ne(),De=ne(),ze=ne(),Oe=ne(),bt=ne(),It=ne();m(ve,ce[1],ce[0]),m(It,pe[1],pe[0]),R(ve,ve,It),y(K,ce[0],ce[1]),y(It,pe[0],pe[1]),R(K,K,It),R(oe,ce[3],pe[3]),R(oe,oe,tt),R(Ae,ce[2],pe[2]),y(Ae,Ae,Ae),m(De,K,ve),m(ze,Ae,oe),y(Oe,Ae,oe),y(bt,K,ve),R(ce[0],De,ze),R(ce[1],bt,Oe),R(ce[2],Oe,ze),R(ce[3],De,bt)}function ue(ce,pe,ve){var K;for(K=0;K<4;K++)M(ce[K],pe[K],ve)}function re(ce,pe){var ve=ne(),K=ne(),oe=ne();B(oe,pe[2]),R(ve,pe[0],oe),R(K,pe[1],oe),b(ce,K),ce[31]^=_(ve)<<7}function te(ce,pe,ve){var K,oe;for(k(ce[0],Ue),k(ce[1],Fe),k(ce[2],Fe),k(ce[3],Ue),oe=255;0<=oe;--oe)ue(ce,pe,K=ve[oe/8|0]>>(7&oe)&1),Z(pe,ce),Z(ce,ce),ue(ce,pe,K)}function ye(ce,pe){var ve=[ne(),ne(),ne(),ne()];k(ve[0],ot),k(ve[1],ht),k(ve[2],Fe),R(ve[3],ot,ht),te(ce,ve,pe)}function Se(ce,pe,ve){var K,oe=new Uint8Array(64),Ae=[ne(),ne(),ne(),ne()];for(ve||be(pe,32),ie(oe,pe,32),oe[0]&=248,oe[31]&=127,oe[31]|=64,ye(Ae,oe),re(ce,Ae),K=0;K<32;K++)pe[K+32]=ce[K];return 0}function Ee(ce,pe){var ve,K,oe,Ae;for(K=63;32<=K;--K){for(ve=0,oe=K-32,Ae=K-12;oe<Ae;++oe)pe[oe]+=ve-16*pe[K]*Zn[oe-(K-32)],pe[oe]-=256*(ve=pe[oe]+128>>8);pe[oe]+=ve,pe[K]=0}for(oe=ve=0;oe<32;oe++)pe[oe]+=ve-(pe[31]>>4)*Zn[oe],ve=pe[oe]>>8,pe[oe]&=255;for(oe=0;oe<32;oe++)pe[oe]-=ve*Zn[oe];for(K=0;K<32;K++)pe[K+1]+=pe[K]>>8,ce[K]=255&pe[K]}function V(ce){var pe,ve=new Float64Array(64);for(pe=0;pe<64;pe++)ve[pe]=ce[pe];for(pe=0;pe<64;pe++)ce[pe]=0;Ee(ce,ve)}function Y(ce,pe,ve,K){var oe,Ae,De=new Uint8Array(64),ze=new Uint8Array(64),Oe=new Uint8Array(64),bt=new Float64Array(64),It=[ne(),ne(),ne(),ne()];ie(De,K,32),De[0]&=248,De[31]&=127,De[31]|=64;var gt=ve+64;for(oe=0;oe<ve;oe++)ce[64+oe]=pe[oe];for(oe=0;oe<32;oe++)ce[32+oe]=De[32+oe];for(ie(Oe,ce.subarray(32),ve+32),V(Oe),ye(It,Oe),re(ce,It),oe=32;oe<64;oe++)ce[oe]=K[oe];for(ie(ze,ce,ve+64),V(ze),oe=0;oe<64;oe++)bt[oe]=0;for(oe=0;oe<32;oe++)bt[oe]=Oe[oe];for(oe=0;oe<32;oe++)for(Ae=0;Ae<32;Ae++)bt[oe+Ae]+=ze[oe]*De[Ae];return Ee(ce.subarray(32),bt),gt}function T(ce,pe,ve,K){var oe,Ae=new Uint8Array(32),De=new Uint8Array(64),ze=[ne(),ne(),ne(),ne()],Oe=[ne(),ne(),ne(),ne()];if(ve<64||function z(ce,pe){var ve=ne(),K=ne(),oe=ne(),Ae=ne(),De=ne(),ze=ne(),Oe=ne();return k(ce[2],Fe),E(ce[1],pe),F(oe,ce[1]),R(Ae,oe,Mt),m(oe,oe,ce[2]),y(Ae,ce[2],Ae),F(De,Ae),F(ze,De),R(Oe,ze,De),R(ve,Oe,oe),R(ve,ve,Ae),function(bt,It){var gt,Rt=ne();for(gt=0;gt<16;gt++)Rt[gt]=It[gt];for(gt=250;0<=gt;gt--)F(Rt,Rt),1!==gt&&R(Rt,Rt,It);for(gt=0;gt<16;gt++)bt[gt]=Rt[gt]}(ve,ve),R(ve,ve,oe),R(ve,ve,Ae),R(ve,ve,Ae),R(ce[0],ve,Ae),F(K,ce[0]),R(K,K,Ae),A(K,oe)&&R(ce[0],ce[0],kt),F(K,ce[0]),R(K,K,Ae),A(K,oe)?-1:(_(ce[0])===pe[31]>>7&&m(ce[0],Ue,ce[0]),R(ce[3],ce[0],ce[1]),0)}(Oe,K))return-1;for(oe=0;oe<ve;oe++)ce[oe]=pe[oe];for(oe=0;oe<32;oe++)ce[oe+32]=K[oe];if(ie(De,ce,ve),V(De),te(ze,Oe,De),ye(Oe,pe.subarray(32)),Z(ze,Oe),re(Ae,ze),ve-=64,r(pe,0,Ae,0)){for(oe=0;oe<ve;oe++)ce[oe]=0;return-1}for(oe=0;oe<ve;oe++)ce[oe]=pe[oe+64];return ve}function C(ce,pe){if(32!==ce.length)throw new Error("bad key size");if(24!==pe.length)throw new Error("bad nonce size")}function X(){for(var ce=0;ce<arguments.length;ce++)if(!(arguments[ce]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function se(ce){for(var pe=0;pe<ce.length;pe++)ce[pe]=0}var ne=function(ce){var pe,ve=new Float64Array(16);if(ce)for(pe=0;pe<ce.length;pe++)ve[pe]=ce[pe];return ve},be=function(){throw new Error("no PRNG")},Me=new Uint8Array(16),$e=new Uint8Array(32);$e[0]=9;var Ue=ne(),Fe=ne([1]),qe=ne([56129,1]),Mt=ne([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),tt=ne([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ot=ne([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ht=ne([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),kt=ne([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),wt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Ht=function(ce){var pe,ve,K,oe,Ae,De,ze,Oe;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,pe=255&ce[this.fin=0]|(255&ce[1])<<8,this.r[0]=8191&pe,this.r[1]=8191&(pe>>>13|(ve=255&ce[2]|(255&ce[3])<<8)<<3),this.r[2]=7939&(ve>>>10|(K=255&ce[4]|(255&ce[5])<<8)<<6),this.r[3]=8191&(K>>>7|(oe=255&ce[6]|(255&ce[7])<<8)<<9),this.r[4]=255&(oe>>>4|(Ae=255&ce[8]|(255&ce[9])<<8)<<12),this.r[5]=Ae>>>1&8190,this.r[6]=8191&(Ae>>>14|(De=255&ce[10]|(255&ce[11])<<8)<<2),this.r[7]=8065&(De>>>11|(ze=255&ce[12]|(255&ce[13])<<8)<<5),this.r[8]=8191&(ze>>>8|(Oe=255&ce[14]|(255&ce[15])<<8)<<8),this.r[9]=Oe>>>5&127,this.pad[0]=255&ce[16]|(255&ce[17])<<8,this.pad[1]=255&ce[18]|(255&ce[19])<<8,this.pad[2]=255&ce[20]|(255&ce[21])<<8,this.pad[3]=255&ce[22]|(255&ce[23])<<8,this.pad[4]=255&ce[24]|(255&ce[25])<<8,this.pad[5]=255&ce[26]|(255&ce[27])<<8,this.pad[6]=255&ce[28]|(255&ce[29])<<8,this.pad[7]=255&ce[30]|(255&ce[31])<<8};Ht.prototype.blocks=function(ce,pe,ve){for(var K,oe,Ae,De,ze,Oe,bt,It,gt,Rt,Xt,Ft,Qt,Lt,Ut,$t,xt,Et,_t,en=this.fin?0:2048,Ct=this.h[0],We=this.h[1],Je=this.h[2],at=this.h[3],it=this.h[4],ut=this.h[5],ft=this.h[6],zt=this.h[7],tn=this.h[8],Nt=this.h[9],nn=this.r[0],pn=this.r[1],on=this.r[2],Pt=this.r[3],Jt=this.r[4],qt=this.r[5],Tt=this.r[6],At=this.r[7],sn=this.r[8],hn=this.r[9];16<=ve;)Rt=gt=0,Rt+=(Ct+=8191&(K=255&ce[pe+0]|(255&ce[pe+1])<<8))*nn,Rt+=(We+=8191&(K>>>13|(oe=255&ce[pe+2]|(255&ce[pe+3])<<8)<<3))*(5*hn),Rt+=(Je+=8191&(oe>>>10|(Ae=255&ce[pe+4]|(255&ce[pe+5])<<8)<<6))*(5*sn),Rt+=(at+=8191&(Ae>>>7|(De=255&ce[pe+6]|(255&ce[pe+7])<<8)<<9))*(5*At),gt=(Rt+=(it+=8191&(De>>>4|(ze=255&ce[pe+8]|(255&ce[pe+9])<<8)<<12))*(5*Tt))>>>13,Rt&=8191,Rt+=(ut+=ze>>>1&8191)*(5*qt),Rt+=(ft+=8191&(ze>>>14|(Oe=255&ce[pe+10]|(255&ce[pe+11])<<8)<<2))*(5*Jt),Rt+=(zt+=8191&(Oe>>>11|(bt=255&ce[pe+12]|(255&ce[pe+13])<<8)<<5))*(5*Pt),Rt+=(tn+=8191&(bt>>>8|(It=255&ce[pe+14]|(255&ce[pe+15])<<8)<<8))*(5*on),Xt=gt+=(Rt+=(Nt+=It>>>5|en)*(5*pn))>>>13,Xt+=Ct*pn,Xt+=We*nn,Xt+=Je*(5*hn),Xt+=at*(5*sn),gt=(Xt+=it*(5*At))>>>13,Xt&=8191,Xt+=ut*(5*Tt),Xt+=ft*(5*qt),Xt+=zt*(5*Jt),Xt+=tn*(5*Pt),gt+=(Xt+=Nt*(5*on))>>>13,Xt&=8191,Ft=gt,Ft+=Ct*on,Ft+=We*pn,Ft+=Je*nn,Ft+=at*(5*hn),gt=(Ft+=it*(5*sn))>>>13,Ft&=8191,Ft+=ut*(5*At),Ft+=ft*(5*Tt),Ft+=zt*(5*qt),Ft+=tn*(5*Jt),Qt=gt+=(Ft+=Nt*(5*Pt))>>>13,Qt+=Ct*Pt,Qt+=We*on,Qt+=Je*pn,Qt+=at*nn,gt=(Qt+=it*(5*hn))>>>13,Qt&=8191,Qt+=ut*(5*sn),Qt+=ft*(5*At),Qt+=zt*(5*Tt),Qt+=tn*(5*qt),Lt=gt+=(Qt+=Nt*(5*Jt))>>>13,Lt+=Ct*Jt,Lt+=We*Pt,Lt+=Je*on,Lt+=at*pn,gt=(Lt+=it*nn)>>>13,Lt&=8191,Lt+=ut*(5*hn),Lt+=ft*(5*sn),Lt+=zt*(5*At),Lt+=tn*(5*Tt),Ut=gt+=(Lt+=Nt*(5*qt))>>>13,Ut+=Ct*qt,Ut+=We*Jt,Ut+=Je*Pt,Ut+=at*on,gt=(Ut+=it*pn)>>>13,Ut&=8191,Ut+=ut*nn,Ut+=ft*(5*hn),Ut+=zt*(5*sn),Ut+=tn*(5*At),$t=gt+=(Ut+=Nt*(5*Tt))>>>13,$t+=Ct*Tt,$t+=We*qt,$t+=Je*Jt,$t+=at*Pt,gt=($t+=it*on)>>>13,$t&=8191,$t+=ut*pn,$t+=ft*nn,$t+=zt*(5*hn),$t+=tn*(5*sn),xt=gt+=($t+=Nt*(5*At))>>>13,xt+=Ct*At,xt+=We*Tt,xt+=Je*qt,xt+=at*Jt,gt=(xt+=it*Pt)>>>13,xt&=8191,xt+=ut*on,xt+=ft*pn,xt+=zt*nn,xt+=tn*(5*hn),Et=gt+=(xt+=Nt*(5*sn))>>>13,Et+=Ct*sn,Et+=We*At,Et+=Je*Tt,Et+=at*qt,gt=(Et+=it*Jt)>>>13,Et&=8191,Et+=ut*Pt,Et+=ft*on,Et+=zt*pn,Et+=tn*nn,_t=gt+=(Et+=Nt*(5*hn))>>>13,_t+=Ct*hn,_t+=We*sn,_t+=Je*At,_t+=at*Tt,gt=(_t+=it*qt)>>>13,_t&=8191,_t+=ut*Jt,_t+=ft*Pt,_t+=zt*on,_t+=tn*pn,Ct=Rt=8191&(gt=(gt=((gt+=(_t+=Nt*nn)>>>13)<<2)+gt|0)+(Rt&=8191)|0),We=Xt+=gt>>>=13,Je=Ft&=8191,at=Qt&=8191,it=Lt&=8191,ut=Ut&=8191,ft=$t&=8191,zt=xt&=8191,tn=Et&=8191,Nt=_t&=8191,pe+=16,ve-=16;this.h[0]=Ct,this.h[1]=We,this.h[2]=Je,this.h[3]=at,this.h[4]=it,this.h[5]=ut,this.h[6]=ft,this.h[7]=zt,this.h[8]=tn,this.h[9]=Nt},Ht.prototype.finish=function(ce,pe){var ve,K,oe,Ae,De=new Uint16Array(10);if(this.leftover){for(Ae=this.leftover,this.buffer[Ae++]=1;Ae<16;Ae++)this.buffer[Ae]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(ve=this.h[1]>>>13,this.h[1]&=8191,Ae=2;Ae<10;Ae++)this.h[Ae]+=ve,ve=this.h[Ae]>>>13,this.h[Ae]&=8191;for(this.h[0]+=5*ve,ve=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=ve,ve=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=ve,De[0]=this.h[0]+5,ve=De[0]>>>13,De[0]&=8191,Ae=1;Ae<10;Ae++)De[Ae]=this.h[Ae]+ve,ve=De[Ae]>>>13,De[Ae]&=8191;for(De[9]-=8192,K=(1^ve)-1,Ae=0;Ae<10;Ae++)De[Ae]&=K;for(K=~K,Ae=0;Ae<10;Ae++)this.h[Ae]=this.h[Ae]&K|De[Ae];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),this.h[0]=65535&(oe=this.h[0]+this.pad[0]),Ae=1;Ae<8;Ae++)this.h[Ae]=65535&(oe=(this.h[Ae]+this.pad[Ae]|0)+(oe>>>16)|0);ce[pe+0]=this.h[0]>>>0&255,ce[pe+1]=this.h[0]>>>8&255,ce[pe+2]=this.h[1]>>>0&255,ce[pe+3]=this.h[1]>>>8&255,ce[pe+4]=this.h[2]>>>0&255,ce[pe+5]=this.h[2]>>>8&255,ce[pe+6]=this.h[3]>>>0&255,ce[pe+7]=this.h[3]>>>8&255,ce[pe+8]=this.h[4]>>>0&255,ce[pe+9]=this.h[4]>>>8&255,ce[pe+10]=this.h[5]>>>0&255,ce[pe+11]=this.h[5]>>>8&255,ce[pe+12]=this.h[6]>>>0&255,ce[pe+13]=this.h[6]>>>8&255,ce[pe+14]=this.h[7]>>>0&255,ce[pe+15]=this.h[7]>>>8&255},Ht.prototype.update=function(ce,pe,ve){var K,oe;if(this.leftover){for(ve<(oe=16-this.leftover)&&(oe=ve),K=0;K<oe;K++)this.buffer[this.leftover+K]=ce[pe+K];if(ve-=oe,pe+=oe,this.leftover+=oe,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(16<=ve&&(this.blocks(ce,pe,oe=ve-ve%16),pe+=oe,ve-=oe),ve){for(K=0;K<ve;K++)this.buffer[this.leftover+K]=ce[pe+K];this.leftover+=ve}};var ce,Yt=f,Ln=w,Yn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Zn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);e.lowlevel={crypto_core_hsalsa20:n,crypto_stream_xor:u,crypto_stream:c,crypto_stream_salsa20_xor:s,crypto_stream_salsa20:t,crypto_onetimeauth:o,crypto_onetimeauth_verify:l,crypto_verify_16:a,crypto_verify_32:r,crypto_secretbox:f,crypto_secretbox_open:w,crypto_scalarmult:J,crypto_scalarmult_base:Q,crypto_box_beforenm:N,crypto_box_afternm:Yt,crypto_box:function(ce,pe,ve,K,oe,Ae){var De=new Uint8Array(32);return N(De,oe,Ae),Yt(ce,pe,ve,K,De)},crypto_box_open:function(ce,pe,ve,K,oe,Ae){var De=new Uint8Array(32);return N(De,oe,Ae),Ln(ce,pe,ve,K,De)},crypto_box_keypair:U,crypto_hash:ie,crypto_sign:Y,crypto_sign_keypair:Se,crypto_sign_open:T,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.randomBytes=function(ce){var pe=new Uint8Array(ce);return be(pe,ce),pe},e.secretbox=function(ce,pe,ve){X(ce,pe,ve),C(ve,pe);for(var K=new Uint8Array(32+ce.length),oe=new Uint8Array(K.length),Ae=0;Ae<ce.length;Ae++)K[Ae+32]=ce[Ae];return f(oe,K,K.length,pe,ve),oe.subarray(16)},e.secretbox.open=function(ce,pe,ve){X(ce,pe,ve),C(ve,pe);for(var K=new Uint8Array(16+ce.length),oe=new Uint8Array(K.length),Ae=0;Ae<ce.length;Ae++)K[Ae+16]=ce[Ae];return K.length<32||0!==w(oe,K,K.length,pe,ve)?null:oe.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(ce,pe){if(X(ce,pe),32!==ce.length)throw new Error("bad n size");if(32!==pe.length)throw new Error("bad p size");var ve=new Uint8Array(32);return J(ve,ce,pe),ve},e.scalarMult.base=function(ce){if(X(ce),32!==ce.length)throw new Error("bad n size");var pe=new Uint8Array(32);return Q(pe,ce),pe},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(ce,pe,ve,K){var oe=e.box.before(ve,K);return e.secretbox(ce,pe,oe)},e.box.before=function(ce,pe){X(ce,pe),function(K,oe){if(32!==K.length)throw new Error("bad public key size");if(32!==oe.length)throw new Error("bad secret key size")}(ce,pe);var ve=new Uint8Array(32);return N(ve,ce,pe),ve},e.box.after=e.secretbox,e.box.open=function(ce,pe,ve,K){var oe=e.box.before(ve,K);return e.secretbox.open(ce,pe,oe)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ce=new Uint8Array(32),pe=new Uint8Array(32);return U(ce,pe),{publicKey:ce,secretKey:pe}},e.box.keyPair.fromSecretKey=function(ce){if(X(ce),32!==ce.length)throw new Error("bad secret key size");var pe=new Uint8Array(32);return Q(pe,ce),{publicKey:pe,secretKey:new Uint8Array(ce)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ce,pe){if(X(ce,pe),64!==pe.length)throw new Error("bad secret key size");var ve=new Uint8Array(64+ce.length);return Y(ve,ce,ce.length,pe),ve},e.sign.open=function(ce,pe){if(X(ce,pe),32!==pe.length)throw new Error("bad public key size");var ve=new Uint8Array(ce.length),K=T(ve,ce,ce.length,pe);if(K<0)return null;for(var oe=new Uint8Array(K),Ae=0;Ae<oe.length;Ae++)oe[Ae]=ve[Ae];return oe},e.sign.detached=function(ce,pe){for(var ve=e.sign(ce,pe),K=new Uint8Array(64),oe=0;oe<K.length;oe++)K[oe]=ve[oe];return K},e.sign.detached.verify=function(ce,pe,ve){if(X(ce,pe,ve),64!==pe.length)throw new Error("bad signature size");if(32!==ve.length)throw new Error("bad public key size");var K,oe=new Uint8Array(64+ce.length),Ae=new Uint8Array(64+ce.length);for(K=0;K<64;K++)oe[K]=pe[K];for(K=0;K<ce.length;K++)oe[K+64]=ce[K];return 0<=T(Ae,oe,oe.length,ve)},e.sign.keyPair=function(){var ce=new Uint8Array(32),pe=new Uint8Array(64);return Se(ce,pe),{publicKey:ce,secretKey:pe}},e.sign.keyPair.fromSecretKey=function(ce){if(X(ce),64!==ce.length)throw new Error("bad secret key size");for(var pe=new Uint8Array(32),ve=0;ve<pe.length;ve++)pe[ve]=ce[32+ve];return{publicKey:pe,secretKey:new Uint8Array(ce)}},e.sign.keyPair.fromSeed=function(ce){if(X(ce),32!==ce.length)throw new Error("bad seed size");for(var pe=new Uint8Array(32),ve=new Uint8Array(64),K=0;K<32;K++)ve[K]=ce[K];return Se(pe,ve,!0),{publicKey:pe,secretKey:ve}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(ce){X(ce);var pe=new Uint8Array(64);return ie(pe,ce,ce.length),pe},e.hash.hashLength=64,e.verify=function(ce,pe){return X(ce,pe),0!==ce.length&&0!==pe.length&&ce.length===pe.length&&0===h(ce,0,pe,0,ce.length)},e.setPRNG=function(ce){be=ce},(ce=typeof self<"u"?self.crypto||self.msCrypto:null)&&ce.getRandomValues?e.setPRNG(function(pe,ve){var K,oe=new Uint8Array(ve);for(K=0;K<ve;K+=65536)ce.getRandomValues(oe.subarray(K,K+Math.min(ve-K,65536)));for(K=0;K<ve;K++)pe[K]=oe[K];se(oe)}):(ce=G(56))&&ce.randomBytes&&e.setPRNG(function(pe,ve){var K,oe=ce.randomBytes(ve);for(K=0;K<ve;K++)pe[K]=oe[K];se(oe)})}(void 0!==I&&I.exports?I.exports:self.nacl=self.nacl||{})},function(I,P){},function(I,P,G){(function(e){!function(g,h){"use strict";void 0!==I&&I.exports?I.exports=h():(g.nacl||(g.nacl={}),g.nacl.util=h())}(this,function(){"use strict";function g(a){if(!/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(a))throw new TypeError("invalid encoding")}var h={decodeUTF8:function(a){if("string"!=typeof a)throw new TypeError("expected string");var r,p=unescape(encodeURIComponent(a)),n=new Uint8Array(p.length);for(r=0;r<p.length;r++)n[r]=p.charCodeAt(r);return n},encodeUTF8:function(a){var r,p=[];for(r=0;r<a.length;r++)p.push(String.fromCharCode(a[r]));return decodeURIComponent(escape(p.join("")))}};return typeof atob>"u"?void 0!==e.from?(h.encodeBase64=function(a){return e.from(a).toString("base64")},h.decodeBase64=function(a){return g(a),new Uint8Array(Array.prototype.slice.call(e.from(a,"base64"),0))}):(h.encodeBase64=function(a){return new e(a).toString("base64")},h.decodeBase64=function(a){return g(a),new Uint8Array(Array.prototype.slice.call(new e(a,"base64"),0))}):(h.encodeBase64=function(a){var r,p=[],n=a.length;for(r=0;r<n;r++)p.push(String.fromCharCode(a[r]));return btoa(p.join(""))},h.decodeBase64=function(a){g(a);var r,p=atob(a),n=new Uint8Array(p.length);for(r=0;r<p.length;r++)n[r]=p.charCodeAt(r);return n}),h})}).call(P,G(58).Buffer)},function(I,P,G){"use strict";function e(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(V,Y){if(e()<Y)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(V=new Uint8Array(Y)).__proto__=h.prototype:(null===V&&(V=new h(Y)),V.length=Y),V}function h(V,Y,z){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(V,Y,z);if("number"!=typeof V)return a(this,V,Y,z);if("string"==typeof Y)throw new Error("If encoding is specified then the first argument must be a string");return p(this,V)}function a(V,Y,z,T){if("number"==typeof Y)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Y instanceof ArrayBuffer?function(C,X,se,ne){if(se<0||X.byteLength<se)throw new RangeError("'offset' is out of bounds");if(X.byteLength<se+(ne||0))throw new RangeError("'length' is out of bounds");return X=void 0===se&&void 0===ne?new Uint8Array(X):void 0===ne?new Uint8Array(X,se):new Uint8Array(X,se,ne),h.TYPED_ARRAY_SUPPORT?(C=X).__proto__=h.prototype:C=n(C,X),C}(V,Y,z,T):"string"==typeof Y?function(C,X,se){if("string"==typeof se&&""!==se||(se="utf8"),!h.isEncoding(se))throw new TypeError('"encoding" must be a valid string encoding');var ne=0|t(X,se),be=(C=g(C,ne)).write(X,se);return be!==ne&&(C=C.slice(0,be)),C}(V,Y,z):function(C,X){if(h.isBuffer(X)){var se=0|s(X.length);return 0===(C=g(C,se)).length||X.copy(C,0,0,se),C}if(X){if(typeof ArrayBuffer<"u"&&X.buffer instanceof ArrayBuffer||"length"in X)return"number"!=typeof X.length||(ne=X.length)!=ne?g(C,0):n(C,X);if("Buffer"===X.type&&ye(X.data))return n(C,X.data)}var ne;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(V,Y)}function r(V){if("number"!=typeof V)throw new TypeError('"size" argument must be a number');if(V<0)throw new RangeError('"size" argument must not be negative')}function p(V,Y){if(r(Y),V=g(V,Y<0?0:0|s(Y)),!h.TYPED_ARRAY_SUPPORT)for(var z=0;z<Y;++z)V[z]=0;return V}function n(V,Y){var z=Y.length<0?0:0|s(Y.length);V=g(V,z);for(var T=0;T<z;T+=1)V[T]=255&Y[T];return V}function s(V){if(V>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|V}function t(V,Y){if(h.isBuffer(V))return V.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(V)||V instanceof ArrayBuffer))return V.byteLength;"string"!=typeof V&&(V=""+V);var z=V.length;if(0===z)return 0;for(var T=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":case void 0:return ie(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return Z(V).length;default:if(T)return ie(V).length;Y=(""+Y).toLowerCase(),T=!0}}function c(V,Y,z){var T=V[Y];V[Y]=V[z],V[z]=T}function u(V,Y,z,T,C){if(0===V.length)return-1;if("string"==typeof z?(T=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,isNaN(z)&&(z=C?0:V.length-1),z<0&&(z=V.length+z),z>=V.length){if(C)return-1;z=V.length-1}else if(z<0){if(!C)return-1;z=0}if("string"==typeof Y&&(Y=h.from(Y,T)),h.isBuffer(Y))return 0===Y.length?-1:o(V,Y,z,T,C);if("number"==typeof Y)return Y&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?C?Uint8Array.prototype.indexOf.call(V,Y,z):Uint8Array.prototype.lastIndexOf.call(V,Y,z):o(V,[Y],z,T,C);throw new TypeError("val must be string, number or Buffer")}function o(V,Y,z,T,C){function X(qe,Mt){return 1===ne?qe[Mt]:qe.readUInt16BE(Mt*ne)}var se,ne=1,be=V.length,Me=Y.length;if(void 0!==T&&("ucs2"===(T=String(T).toLowerCase())||"ucs-2"===T||"utf16le"===T||"utf-16le"===T)){if(V.length<2||Y.length<2)return-1;be/=ne=2,Me/=2,z/=2}if(C){var $e=-1;for(se=z;se<be;se++)if(X(V,se)===X(Y,-1===$e?0:se-$e)){if(-1===$e&&($e=se),se-$e+1===Me)return $e*ne}else-1!==$e&&(se-=se-$e),$e=-1}else for(be<z+Me&&(z=be-Me),se=z;0<=se;se--){for(var Ue=!0,Fe=0;Fe<Me;Fe++)if(X(V,se+Fe)!==X(Y,Fe)){Ue=!1;break}if(Ue)return se}return-1}function l(V,Y,z,T){z=Number(z)||0;var C=V.length-z;T?C<(T=Number(T))&&(T=C):T=C;var X=Y.length;if(X%2!=0)throw new TypeError("Invalid hex string");X/2<T&&(T=X/2);for(var se=0;se<T;++se){var ne=parseInt(Y.substr(2*se,2),16);if(isNaN(ne))return se;V[z+se]=ne}return se}function f(V,Y,z,T){return ue(ie(Y,V.length-z),V,z,T)}function w(V,Y,z,T){return ue(function(C){for(var X=[],se=0;se<C.length;++se)X.push(255&C.charCodeAt(se));return X}(Y),V,z,T)}function k(V,Y,z,T){return w(V,Y,z,T)}function O(V,Y,z,T){return ue(Z(Y),V,z,T)}function M(V,Y,z,T){return ue(function(C,X){for(var se,ne,Me=[],$e=0;$e<C.length&&!((X-=2)<0);++$e)ne=(se=C.charCodeAt($e))>>8,Me.push(se%256),Me.push(ne);return Me}(Y,V.length-z),V,z,T)}function b(V,Y,z){return re.fromByteArray(0===Y&&z===V.length?V:V.slice(Y,z))}function A(V,Y,z){z=Math.min(V.length,z);for(var T=[],C=Y;C<z;){var X,se,ne,be,Me=V[C],$e=null,Ue=239<Me?4:223<Me?3:191<Me?2:1;if(C+Ue<=z)switch(Ue){case 1:Me<128&&($e=Me);break;case 2:128==(192&(X=V[C+1]))&&127<(be=(31&Me)<<6|63&X)&&($e=be);break;case 3:se=V[C+2],128==(192&(X=V[C+1]))&&128==(192&se)&&2047<(be=(15&Me)<<12|(63&X)<<6|63&se)&&(be<55296||57343<be)&&($e=be);break;case 4:se=V[C+2],ne=V[C+3],128==(192&(X=V[C+1]))&&128==(192&se)&&128==(192&ne)&&65535<(be=(15&Me)<<18|(63&X)<<12|(63&se)<<6|63&ne)&&be<1114112&&($e=be)}null===$e?($e=65533,Ue=1):65535<$e&&(T.push(($e-=65536)>>>10&1023|55296),$e=56320|1023&$e),T.push($e),C+=Ue}return function(Fe){var qe=Fe.length;if(qe<=Se)return String.fromCharCode.apply(String,Fe);for(var Mt="",tt=0;tt<qe;)Mt+=String.fromCharCode.apply(String,Fe.slice(tt,tt+=Se));return Mt}(T)}function _(V,Y,z){var T="";z=Math.min(V.length,z);for(var C=Y;C<z;++C)T+=String.fromCharCode(127&V[C]);return T}function E(V,Y,z){var T="";z=Math.min(V.length,z);for(var C=Y;C<z;++C)T+=String.fromCharCode(V[C]);return T}function y(V,Y,z){var T=V.length;(!Y||Y<0)&&(Y=0),(!z||z<0||T<z)&&(z=T);for(var C="",X=Y;X<z;++X)C+=D(V[X]);return C}function m(V,Y,z){for(var T=V.slice(Y,z),C="",X=0;X<T.length;X+=2)C+=String.fromCharCode(T[X]+256*T[X+1]);return C}function R(V,Y,z){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(z<V+Y)throw new RangeError("Trying to access beyond buffer length")}function F(V,Y,z,T,C,X){if(!h.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(C<Y||Y<X)throw new RangeError('"value" argument is out of bounds');if(z+T>V.length)throw new RangeError("Index out of range")}function B(V,Y,z,T){Y<0&&(Y=65535+Y+1);for(var C=0,X=Math.min(V.length-z,2);C<X;++C)V[z+C]=(Y&255<<8*(T?C:1-C))>>>8*(T?C:1-C)}function J(V,Y,z,T){Y<0&&(Y=4294967295+Y+1);for(var C=0,X=Math.min(V.length-z,4);C<X;++C)V[z+C]=Y>>>8*(T?C:3-C)&255}function Q(V,Y,z,T,C,X){if(z+T>V.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function U(V,Y,z,T,C){return C||Q(V,0,z,4),te.write(V,Y,z,T,23,4),z+4}function N(V,Y,z,T,C){return C||Q(V,0,z,8),te.write(V,Y,z,T,52,8),z+8}function D(V){return V<16?"0"+V.toString(16):V.toString(16)}function ie(V,Y){Y=Y||1/0;for(var z,T=V.length,C=null,X=[],se=0;se<T;++se){if(55295<(z=V.charCodeAt(se))&&z<57344){if(!C){if(56319<z){-1<(Y-=3)&&X.push(239,191,189);continue}if(se+1===T){-1<(Y-=3)&&X.push(239,191,189);continue}C=z;continue}if(z<56320){-1<(Y-=3)&&X.push(239,191,189),C=z;continue}z=65536+(C-55296<<10|z-56320)}else C&&-1<(Y-=3)&&X.push(239,191,189);if(C=null,z<128){if((Y-=1)<0)break;X.push(z)}else if(z<2048){if((Y-=2)<0)break;X.push(z>>6|192,63&z|128)}else if(z<65536){if((Y-=3)<0)break;X.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;X.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return X}function Z(V){return re.toByteArray(function(Y){if((Y=(z=Y,z.trim?z.trim():z.replace(/^\s+|\s+$/g,"")).replace(Ee,"")).length<2)return"";for(var z;Y.length%4!=0;)Y+="=";return Y}(V))}function ue(V,Y,z,T){for(var C=0;C<T&&!(C+z>=Y.length||C>=V.length);++C)Y[C+z]=V[C];return C}var re=G(59),te=G(60),ye=G(61);P.Buffer=h,P.SlowBuffer=function(V){return+V!=V&&(V=0),h.alloc(+V)},P.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==window.TYPED_ARRAY_SUPPORT?window.TYPED_ARRAY_SUPPORT:function(){try{var V=new Uint8Array(1);return V.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===V.foo()&&"function"==typeof V.subarray&&0===V.subarray(1,1).byteLength}catch{return!1}}(),P.kMaxLength=e(),h.poolSize=8192,h._augment=function(V){return V.__proto__=h.prototype,V},h.from=function(V,Y,z){return a(null,V,Y,z)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(V,Y,z){return T=null,X=Y,se=z,r(C=V),C<=0?g(T,C):void 0!==X?"string"==typeof se?g(T,C).fill(X,se):g(T,C).fill(X):g(T,C);var T,C,X,se},h.allocUnsafe=function(V){return p(null,V)},h.allocUnsafeSlow=function(V){return p(null,V)},h.isBuffer=function(V){return!(null==V||!V._isBuffer)},h.compare=function(V,Y){if(!h.isBuffer(V)||!h.isBuffer(Y))throw new TypeError("Arguments must be Buffers");if(V===Y)return 0;for(var z=V.length,T=Y.length,C=0,X=Math.min(z,T);C<X;++C)if(V[C]!==Y[C]){z=V[C],T=Y[C];break}return z<T?-1:T<z?1:0},h.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(V,Y){if(!ye(V))throw new TypeError('"list" argument must be an Array of Buffers');if(0===V.length)return h.alloc(0);var z;if(void 0===Y)for(z=Y=0;z<V.length;++z)Y+=V[z].length;var T=h.allocUnsafe(Y),C=0;for(z=0;z<V.length;++z){var X=V[z];if(!h.isBuffer(X))throw new TypeError('"list" argument must be an Array of Buffers');X.copy(T,C),C+=X.length}return T},h.byteLength=t,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Y=0;Y<V;Y+=2)c(this,Y,Y+1);return this},h.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Y=0;Y<V;Y+=4)c(this,Y,Y+3),c(this,Y+1,Y+2);return this},h.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Y=0;Y<V;Y+=8)c(this,Y,Y+7),c(this,Y+1,Y+6),c(this,Y+2,Y+5),c(this,Y+3,Y+4);return this},h.prototype.toString=function(){var V=0|this.length;return 0===V?"":0===arguments.length?A(this,0,V):function(Y,z,T){var C=!1;if((void 0===z||z<0)&&(z=0),z>this.length||((void 0===T||T>this.length)&&(T=this.length),T<=0)||(T>>>=0)<=(z>>>=0))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return y(this,z,T);case"utf8":case"utf-8":return A(this,z,T);case"ascii":return _(this,z,T);case"latin1":case"binary":return E(this,z,T);case"base64":return b(this,z,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,z,T);default:if(C)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),C=!0}}.apply(this,arguments)},h.prototype.equals=function(V){if(!h.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V||0===h.compare(this,V)},h.prototype.inspect=function(){var V="",Y=P.INSPECT_MAX_BYTES;return 0<this.length&&(V=this.toString("hex",0,Y).match(/.{2}/g).join(" "),this.length>Y&&(V+=" ... ")),"<Buffer "+V+">"},h.prototype.compare=function(V,Y,z,T,C){if(!h.isBuffer(V))throw new TypeError("Argument must be a Buffer");if(void 0===Y&&(Y=0),void 0===z&&(z=V?V.length:0),void 0===T&&(T=0),void 0===C&&(C=this.length),Y<0||z>V.length||T<0||C>this.length)throw new RangeError("out of range index");if(C<=T&&z<=Y)return 0;if(C<=T)return-1;if(z<=Y)return 1;if(this===V)return 0;for(var X=(C>>>=0)-(T>>>=0),se=(z>>>=0)-(Y>>>=0),ne=Math.min(X,se),be=this.slice(T,C),Me=V.slice(Y,z),$e=0;$e<ne;++$e)if(be[$e]!==Me[$e]){X=be[$e],se=Me[$e];break}return X<se?-1:se<X?1:0},h.prototype.includes=function(V,Y,z){return-1!==this.indexOf(V,Y,z)},h.prototype.indexOf=function(V,Y,z){return u(this,V,Y,z,!0)},h.prototype.lastIndexOf=function(V,Y,z){return u(this,V,Y,z,!1)},h.prototype.write=function(V,Y,z,T){if(void 0===Y)T="utf8",z=this.length,Y=0;else if(void 0===z&&"string"==typeof Y)T=Y,z=this.length,Y=0;else{if(!isFinite(Y))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Y|=0,isFinite(z)?(z|=0,void 0===T&&(T="utf8")):(T=z,z=void 0)}var C=this.length-Y;if((void 0===z||C<z)&&(z=C),0<V.length&&(z<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");for(var X=!1;;)switch(T){case"hex":return l(this,V,Y,z);case"utf8":case"utf-8":return f(this,V,Y,z);case"ascii":return w(this,V,Y,z);case"latin1":case"binary":return k(this,V,Y,z);case"base64":return O(this,V,Y,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,V,Y,z);default:if(X)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),X=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Se=4096;h.prototype.slice=function(V,Y){var z,T=this.length;if((V=~~V)<0?(V+=T)<0&&(V=0):T<V&&(V=T),(Y=void 0===Y?T:~~Y)<0?(Y+=T)<0&&(Y=0):T<Y&&(Y=T),Y<V&&(Y=V),h.TYPED_ARRAY_SUPPORT)(z=this.subarray(V,Y)).__proto__=h.prototype;else{var C=Y-V;z=new h(C,void 0);for(var X=0;X<C;++X)z[X]=this[X+V]}return z},h.prototype.readUIntLE=function(V,Y,z){V|=0,Y|=0,z||R(V,Y,this.length);for(var T=this[V],C=1,X=0;++X<Y&&(C*=256);)T+=this[V+X]*C;return T},h.prototype.readUIntBE=function(V,Y,z){V|=0,Y|=0,z||R(V,Y,this.length);for(var T=this[V+--Y],C=1;0<Y&&(C*=256);)T+=this[V+--Y]*C;return T},h.prototype.readUInt8=function(V,Y){return Y||R(V,1,this.length),this[V]},h.prototype.readUInt16LE=function(V,Y){return Y||R(V,2,this.length),this[V]|this[V+1]<<8},h.prototype.readUInt16BE=function(V,Y){return Y||R(V,2,this.length),this[V]<<8|this[V+1]},h.prototype.readUInt32LE=function(V,Y){return Y||R(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},h.prototype.readUInt32BE=function(V,Y){return Y||R(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},h.prototype.readIntLE=function(V,Y,z){V|=0,Y|=0,z||R(V,Y,this.length);for(var T=this[V],C=1,X=0;++X<Y&&(C*=256);)T+=this[V+X]*C;return(C*=128)<=T&&(T-=Math.pow(2,8*Y)),T},h.prototype.readIntBE=function(V,Y,z){V|=0,Y|=0,z||R(V,Y,this.length);for(var T=Y,C=1,X=this[V+--T];0<T&&(C*=256);)X+=this[V+--T]*C;return(C*=128)<=X&&(X-=Math.pow(2,8*Y)),X},h.prototype.readInt8=function(V,Y){return Y||R(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},h.prototype.readInt16LE=function(V,Y){Y||R(V,2,this.length);var z=this[V]|this[V+1]<<8;return 32768&z?4294901760|z:z},h.prototype.readInt16BE=function(V,Y){Y||R(V,2,this.length);var z=this[V+1]|this[V]<<8;return 32768&z?4294901760|z:z},h.prototype.readInt32LE=function(V,Y){return Y||R(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},h.prototype.readInt32BE=function(V,Y){return Y||R(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},h.prototype.readFloatLE=function(V,Y){return Y||R(V,4,this.length),te.read(this,V,!0,23,4)},h.prototype.readFloatBE=function(V,Y){return Y||R(V,4,this.length),te.read(this,V,!1,23,4)},h.prototype.readDoubleLE=function(V,Y){return Y||R(V,8,this.length),te.read(this,V,!0,52,8)},h.prototype.readDoubleBE=function(V,Y){return Y||R(V,8,this.length),te.read(this,V,!1,52,8)},h.prototype.writeUIntLE=function(V,Y,z,T){V=+V,Y|=0,z|=0,T||F(this,V,Y,z,Math.pow(2,8*z)-1,0);var C=1,X=0;for(this[Y]=255&V;++X<z&&(C*=256);)this[Y+X]=V/C&255;return Y+z},h.prototype.writeUIntBE=function(V,Y,z,T){V=+V,Y|=0,z|=0,T||F(this,V,Y,z,Math.pow(2,8*z)-1,0);var C=z-1,X=1;for(this[Y+C]=255&V;0<=--C&&(X*=256);)this[Y+C]=V/X&255;return Y+z},h.prototype.writeUInt8=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,1,255,0),h.TYPED_ARRAY_SUPPORT||(V=Math.floor(V)),this[Y]=255&V,Y+1},h.prototype.writeUInt16LE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[Y]=255&V,this[Y+1]=V>>>8):B(this,V,Y,!0),Y+2},h.prototype.writeUInt16BE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[Y]=V>>>8,this[Y+1]=255&V):B(this,V,Y,!1),Y+2},h.prototype.writeUInt32LE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[Y+3]=V>>>24,this[Y+2]=V>>>16,this[Y+1]=V>>>8,this[Y]=255&V):J(this,V,Y,!0),Y+4},h.prototype.writeUInt32BE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[Y]=V>>>24,this[Y+1]=V>>>16,this[Y+2]=V>>>8,this[Y+3]=255&V):J(this,V,Y,!1),Y+4},h.prototype.writeIntLE=function(V,Y,z,T){if(V=+V,Y|=0,!T){var C=Math.pow(2,8*z-1);F(this,V,Y,z,C-1,-C)}var X=0,se=1,ne=0;for(this[Y]=255&V;++X<z&&(se*=256);)V<0&&0===ne&&0!==this[Y+X-1]&&(ne=1),this[Y+X]=(V/se>>0)-ne&255;return Y+z},h.prototype.writeIntBE=function(V,Y,z,T){if(V=+V,Y|=0,!T){var C=Math.pow(2,8*z-1);F(this,V,Y,z,C-1,-C)}var X=z-1,se=1,ne=0;for(this[Y+X]=255&V;0<=--X&&(se*=256);)V<0&&0===ne&&0!==this[Y+X+1]&&(ne=1),this[Y+X]=(V/se>>0)-ne&255;return Y+z},h.prototype.writeInt8=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,1,127,-128),h.TYPED_ARRAY_SUPPORT||(V=Math.floor(V)),V<0&&(V=255+V+1),this[Y]=255&V,Y+1},h.prototype.writeInt16LE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[Y]=255&V,this[Y+1]=V>>>8):B(this,V,Y,!0),Y+2},h.prototype.writeInt16BE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[Y]=V>>>8,this[Y+1]=255&V):B(this,V,Y,!1),Y+2},h.prototype.writeInt32LE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[Y]=255&V,this[Y+1]=V>>>8,this[Y+2]=V>>>16,this[Y+3]=V>>>24):J(this,V,Y,!0),Y+4},h.prototype.writeInt32BE=function(V,Y,z){return V=+V,Y|=0,z||F(this,V,Y,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),h.TYPED_ARRAY_SUPPORT?(this[Y]=V>>>24,this[Y+1]=V>>>16,this[Y+2]=V>>>8,this[Y+3]=255&V):J(this,V,Y,!1),Y+4},h.prototype.writeFloatLE=function(V,Y,z){return U(this,V,Y,!0,z)},h.prototype.writeFloatBE=function(V,Y,z){return U(this,V,Y,!1,z)},h.prototype.writeDoubleLE=function(V,Y,z){return N(this,V,Y,!0,z)},h.prototype.writeDoubleBE=function(V,Y,z){return N(this,V,Y,!1,z)},h.prototype.copy=function(V,Y,z,T){if(z||(z=0),T||0===T||(T=this.length),Y>=V.length&&(Y=V.length),Y||(Y=0),0<T&&T<z&&(T=z),T===z||0===V.length||0===this.length)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("sourceStart out of bounds");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),V.length-Y<T-z&&(T=V.length-Y+z);var C,X=T-z;if(this===V&&z<Y&&Y<T)for(C=X-1;0<=C;--C)V[C+Y]=this[C+z];else if(X<1e3||!h.TYPED_ARRAY_SUPPORT)for(C=0;C<X;++C)V[C+Y]=this[C+z];else Uint8Array.prototype.set.call(V,this.subarray(z,z+X),Y);return X},h.prototype.fill=function(V,Y,z,T){if("string"==typeof V){if("string"==typeof Y?(T=Y,Y=0,z=this.length):"string"==typeof z&&(T=z,z=this.length),1===V.length){var C=V.charCodeAt(0);C<256&&(V=C)}if(void 0!==T&&"string"!=typeof T)throw new TypeError("encoding must be a string");if("string"==typeof T&&!h.isEncoding(T))throw new TypeError("Unknown encoding: "+T)}else"number"==typeof V&&(V&=255);if(Y<0||this.length<Y||this.length<z)throw new RangeError("Out of range index");if(z<=Y)return this;var X;if(Y>>>=0,z=void 0===z?this.length:z>>>0,V||(V=0),"number"==typeof V)for(X=Y;X<z;++X)this[X]=V;else{var se=h.isBuffer(V)?V:ie(new h(V,T).toString()),ne=se.length;for(X=0;X<z-Y;++X)this[X+Y]=se[X%ne]}return this};var Ee=/[^+\/0-9A-Za-z-_]/g},function(I,P){"use strict";function G(t){var c=t.length;if(0<c%4)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.indexOf("=");return-1===u&&(u=c),[u,u===c?0:4-u%4]}function e(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function g(t,c,u){for(var l=[],f=c;f<u;f+=3)l.push(e((t[f]<<16&16711680)+(t[f+1]<<8&65280)+(255&t[f+2])));return l.join("")}P.byteLength=function(t){var c=G(t),o=c[1];return 3*(c[0]+o)/4-o},P.toByteArray=function(t){for(var c,u=G(t),o=u[0],l=u[1],f=new r(3*(o+(A=l))/4-A),w=0,k=0<l?o-4:o,O=0;O<k;O+=4)c=a[t.charCodeAt(O)]<<18|a[t.charCodeAt(O+1)]<<12|a[t.charCodeAt(O+2)]<<6|a[t.charCodeAt(O+3)],f[w++]=c>>16&255,f[w++]=c>>8&255,f[w++]=255&c;var A;return 2===l&&(c=a[t.charCodeAt(O)]<<2|a[t.charCodeAt(O+1)]>>4,f[w++]=255&c),1===l&&(c=a[t.charCodeAt(O)]<<10|a[t.charCodeAt(O+1)]<<4|a[t.charCodeAt(O+2)]>>2,f[w++]=c>>8&255,f[w++]=255&c),f},P.fromByteArray=function(t){for(var c,u=t.length,o=u%3,l=[],f=16383,w=0,k=u-o;w<k;w+=f)l.push(g(t,w,k<w+f?k:w+f));return 1===o?l.push(h[(c=t[u-1])>>2]+h[c<<4&63]+"=="):2===o&&l.push(h[(c=(t[u-2]<<8)+t[u-1])>>10]+h[c>>4&63]+h[c<<2&63]+"="),l.join("")};for(var h=[],a=[],r=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,s=p.length;n<s;++n)h[n]=p[n],a[p.charCodeAt(n)]=n;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(I,P){P.read=function(G,e,g,h,a){var r,p,n=8*a-h-1,s=(1<<n)-1,t=s>>1,c=-7,u=g?a-1:0,o=g?-1:1,l=G[e+u];for(u+=o,r=l&(1<<-c)-1,l>>=-c,c+=n;0<c;r=256*r+G[e+u],u+=o,c-=8);for(p=r&(1<<-c)-1,r>>=-c,c+=h;0<c;p=256*p+G[e+u],u+=o,c-=8);if(0===r)r=1-t;else{if(r===s)return p?NaN:1/0*(l?-1:1);p+=Math.pow(2,h),r-=t}return(l?-1:1)*p*Math.pow(2,r-h)},P.write=function(G,e,g,h,a,r){var p,n,s,t=8*r-a-1,c=(1<<t)-1,u=c>>1,o=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,l=h?0:r-1,f=h?1:-1,w=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(n=isNaN(e)?1:0,p=c):(p=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-p))<1&&(p--,s*=2),2<=(e+=1<=p+u?o/s:o*Math.pow(2,1-u))*s&&(p++,s/=2),c<=p+u?(n=0,p=c):1<=p+u?(n=(e*s-1)*Math.pow(2,a),p+=u):(n=e*Math.pow(2,u-1)*Math.pow(2,a),p=0));8<=a;G[g+l]=255&n,l+=f,n/=256,a-=8);for(p=p<<a|n,t+=a;0<t;G[g+l]=255&p,l+=f,p/=256,t-=8);G[g+l-f]|=128*w}},function(I,P){var G={}.toString;I.exports=Array.isArray||function(e){return"[object Array]"==G.call(e)}},function(I,P,G){"use strict";var e=this&&this.__extends||function(s,t){function c(){this.constructor=s}for(var u in t)t.hasOwnProperty(u)&&(s[u]=t[u]);s.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)},g=G(24),h=G(12),a=G(8),r=G(9),p=G(2),n=function(s){function t(c,u){var o=this;s.call(this),this.key=c,this.options=u||{},this.state="initialized",this.connection=null,this.usingTLS=!!u.useTLS,this.timeline=this.options.timeline,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var l=p.default.getNetwork();l.bind("online",function(){o.timeline.info({netinfo:"online"}),"connecting"!==o.state&&"unavailable"!==o.state||o.retryIn(0)}),l.bind("offline",function(){o.timeline.info({netinfo:"offline"}),o.connection&&o.sendActivityCheck()}),this.updateStrategy()}return e(t,s),t.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(c){return!!this.connection&&this.connection.send(c)},t.prototype.send_event=function(c,u,o){return!!this.connection&&this.connection.send_event(c,u,o)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var c=this;this.runner=this.strategy.connect(0,function u(o,l){o?c.runner=c.strategy.connect(0,u):"error"===l.action?(c.emit("error",{type:"HandshakeError",error:l.error}),c.timeline.error({handshakeError:l.error})):(c.abortConnecting(),c.handshakeCallbacks[l.action](l))})},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(c){var u=this;this.timeline.info({action:"retry",delay:c}),0<c&&this.emit("connecting_in",Math.round(c/1e3)),this.retryTimer=new h.OneOffTimer(c||0,function(){u.disconnectInternally(),u.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var c=this;this.unavailableTimer=new h.OneOffTimer(this.options.unavailableTimeout,function(){c.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var c=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new h.OneOffTimer(this.options.pongTimeout,function(){c.timeline.error({pong_timed_out:c.options.pongTimeout}),c.retryIn(0)})},t.prototype.resetActivityCheck=function(){var c=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new h.OneOffTimer(this.activityTimeout,function(){c.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(c){var u=this;return r.extend({},c,{message:function(o){u.resetActivityCheck(),u.emit("message",o)},ping:function(){u.send_event("pusher:pong",{})},activity:function(){u.resetActivityCheck()},error:function(o){u.emit("error",{type:"WebSocketError",error:o})},closed:function(){u.abandonConnection(),u.shouldRetry()&&u.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(c){var u=this;return r.extend({},c,{connected:function(o){u.activityTimeout=Math.min(u.options.activityTimeout,o.activityTimeout,o.connection.activityTimeout||1/0),u.clearUnavailableTimer(),u.setConnection(o.connection),u.socket_id=u.connection.id,u.updateState("connected",{socket_id:u.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var c=this,u=function(o){return function(l){l.error&&c.emit("error",{type:"WebSocketError",error:l.error}),o(l)}};return{tls_only:u(function(){c.usingTLS=!0,c.updateStrategy(),c.retryIn(0)}),refused:u(function(){c.disconnect()}),backoff:u(function(){c.retryIn(1e3)}),retry:u(function(){c.retryIn(0)})}},t.prototype.setConnection=function(c){for(var u in this.connection=c,this.connectionCallbacks)this.connection.bind(u,this.connectionCallbacks[u]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var c in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(c,this.connectionCallbacks[c]);var u=this.connection;return this.connection=null,u}},t.prototype.updateState=function(c,u){var o=this.state;if(o!==(this.state=c)){var l=c;"connected"===l&&(l+=" with new socket ID "+u.socket_id),a.default.debug("State changed",o+" -> "+l),this.timeline.info({state:c,params:u}),this.emit("state_change",{previous:o,current:c}),this.emit(c,u)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(g.default);P.__esModule=!0,P.default=n},function(I,P,G){"use strict";var e=G(9),g=G(43),h=G(31),a=function(){function r(){this.channels={}}return r.prototype.add=function(p,n){return this.channels[p]||(this.channels[p]=function(s,t){if(0!==s.indexOf("private-encrypted-"))return 0===s.indexOf("private-")?g.default.createPrivateChannel(s,t):0===s.indexOf("presence-")?g.default.createPresenceChannel(s,t):g.default.createChannel(s,t);if("ReactNative"!=navigator.product)return g.default.createEncryptedChannel(s,t);throw new h.UnsupportedFeature("Encrypted channels are not yet supported when using React Native builds.")}(p,n)),this.channels[p]},r.prototype.all=function(){return e.values(this.channels)},r.prototype.find=function(p){return this.channels[p]},r.prototype.remove=function(p){var n=this.channels[p];return delete this.channels[p],n},r.prototype.disconnect=function(){e.objectApply(this.channels,function(p){p.disconnect()})},r}();P.__esModule=!0,P.default=a},function(I,P,G){"use strict";function e(n,s){return h.default.defer(function(){s(n)}),{abort:function(){},forceMinPriority:function(){}}}var g=G(43),h=G(11),a=G(31),r=G(9),p=function(){function n(s,t,c,u){this.name=s,this.priority=t,this.transport=c,this.options=u||{}}return n.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},n.prototype.connect=function(s,t){var c=this;if(!this.isSupported())return e(new a.UnsupportedStrategy,t);if(this.priority<s)return e(new a.TransportPriorityTooLow,t);var u=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),l=null,f=function b(){o.unbind("initialized",b),o.connect()},w=function(){l=g.default.createHandshake(o,function(b){u=!0,M(),t(null,b)})},k=function(b){M(),t(b)},O=function(){var b;M(),b=r.safeJSONStringify(o),t(new a.TransportClosed(b))},M=function(){o.unbind("initialized",f),o.unbind("open",w),o.unbind("error",k),o.unbind("closed",O)};return o.bind("initialized",f),o.bind("open",w),o.bind("error",k),o.bind("closed",O),o.initialize(),{abort:function(){u||(M(),l?l.close():o.close())},forceMinPriority:function(b){u||c.priority<b&&(l?l.close():o.close())}}},n}();P.__esModule=!0,P.default=p},function(I,P,G){"use strict";var e=G(9),g=G(11),h=G(12),a=function(){function r(p,n){this.strategies=p,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return r.prototype.isSupported=function(){return e.any(this.strategies,g.default.method("isSupported"))},r.prototype.connect=function(p,n){var s=this,t=this.strategies,c=0,u=this.timeout,o=null;return o=this.tryStrategy(t[c],p,{timeout:u,failFast:this.failFast},function l(f,w){w?n(null,w):(c+=1,s.loop&&(c%=t.length),c<t.length?(u&&(u*=2,s.timeoutLimit&&(u=Math.min(u,s.timeoutLimit))),o=s.tryStrategy(t[c],p,{timeout:u,failFast:s.failFast},l)):n(!0))}),{abort:function(){o.abort()},forceMinPriority:function(l){p=l,o&&o.forceMinPriority(l)}}},r.prototype.tryStrategy=function(p,n,s,t){var c=null,u=null;return 0<s.timeout&&(c=new h.OneOffTimer(s.timeout,function(){u.abort(),t(!0)})),u=p.connect(n,function(o,l){o&&c&&c.isRunning()&&!s.failFast||(c&&c.ensureAborted(),t(o,l))}),{abort:function(){c&&c.ensureAborted(),u.abort()},forceMinPriority:function(o){u.forceMinPriority(o)}}},r}();P.__esModule=!0,P.default=a},function(I,P,G){"use strict";function e(r){r.error||r.aborted||(r.abort(),r.aborted=!0)}var g=G(9),h=G(11),a=function(){function r(p){this.strategies=p}return r.prototype.isSupported=function(){return g.any(this.strategies,h.default.method("isSupported"))},r.prototype.connect=function(p,n){return t=p,u=g.map(this.strategies,function(o,l,f,w){return o.connect(t,function(s,t){return function(c,u){return(t[s].error=c)?void(function(o){return g.all(o,function(l){return Boolean(l.error)})}(t)&&n(!0)):(g.apply(t,function(o){o.forceMinPriority(u.transport.priority)}),void n(null,u))}}(l,w))}),{abort:function(){g.apply(u,e)},forceMinPriority:function(o){g.apply(u,function(l){l.forceMinPriority(o)})}};var t,u},r}();P.__esModule=!0,P.default=a},function(I,P,G){"use strict";function e(c){return"pusherTransport"+(c?"TLS":"NonTLS")}function a(c){var u=p.default.getLocalStorage();if(u)try{delete u[e(c)]}catch{}}var r=G(11),p=G(2),n=G(65),s=G(9),t=function(){function c(u,o,l){this.strategy=u,this.transports=o,this.ttl=l.ttl||18e5,this.usingTLS=l.useTLS,this.timeline=l.timeline}return c.prototype.isSupported=function(){return this.strategy.isSupported()},c.prototype.connect=function(u,o){var l=this.usingTLS,f=function g(c){var u=p.default.getLocalStorage();if(u)try{var o=u[e(c)];if(o)return JSON.parse(o)}catch{a(c)}return null}(l),w=[this.strategy];if(f&&f.timestamp+this.ttl>=r.default.now()){var k=this.transports[f.transport];k&&(this.timeline.info({cached:!0,transport:f.transport,latency:f.latency}),w.push(new n.default([k],{timeout:2*f.latency+1e3,failFast:!0})))}var O=r.default.now(),M=w.pop().connect(u,function b(A,_){A?(a(l),0<w.length?(O=r.default.now(),M=w.pop().connect(u,b)):o(A)):(function h(c,u,o){var l=p.default.getLocalStorage();if(l)try{l[e(c)]=s.safeJSONStringify({timestamp:r.default.now(),transport:u,latency:o})}catch{}}(l,_.transport.name,r.default.now()-O),o(null,_))});return{abort:function(){M.abort()},forceMinPriority:function(b){u=b,M&&M.forceMinPriority(b)}}},c}();P.__esModule=!0,P.default=t},function(I,P,G){"use strict";var e=G(12),g=function(){function h(a,r){var p=r.delay;this.strategy=a,this.options={delay:p}}return h.prototype.isSupported=function(){return this.strategy.isSupported()},h.prototype.connect=function(a,r){var p,n=this.strategy,s=new e.OneOffTimer(this.options.delay,function(){p=n.connect(a,r)});return{abort:function(){s.ensureAborted(),p&&p.abort()},forceMinPriority:function(t){a=t,p&&p.forceMinPriority(t)}}},h}();P.__esModule=!0,P.default=g},function(I,P){"use strict";var G=function(){function e(g,h,a){this.test=g,this.trueBranch=h,this.falseBranch=a}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(g,h){return(this.test()?this.trueBranch:this.falseBranch).connect(g,h)},e}();P.__esModule=!0,P.default=G},function(I,P){"use strict";var G=function(){function e(g){this.strategy=g}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(g,h){var a=this.strategy.connect(g,function(r,p){p&&a.abort(),h(r,p)});return a},e}();P.__esModule=!0,P.default=G},function(I,P,G){"use strict";G(5),P.getGlobalConfig=function(){},P.getClusterConfig=function(g){}}])});